"use strict";(self.webpackChunktp_final_clinica=self.webpackChunktp_final_clinica||[]).push([[179],{9010:(Ot,Le,U)=>{U.d(Le,{$:()=>Fo,A:()=>ie,G:()=>Ve,K:()=>Hs,L:()=>xs,N:()=>mr,P:()=>rc,R:()=>Zu,U:()=>Ft,V:()=>_s,W:()=>Vi,X:()=>ys,Y:()=>ko,Z:()=>vn,_:()=>Cs,a:()=>ht,a0:()=>au,a1:()=>Dr,a2:()=>si,a3:()=>ss,a4:()=>Fs,a5:()=>wa,a6:()=>Vo,a7:()=>Vs,a8:()=>Pa,a9:()=>Ma,aA:()=>Fe,aB:()=>Be,aC:()=>Oe,aD:()=>En,aE:()=>at,aF:()=>At,aG:()=>Pt,aH:()=>oc,aI:()=>ua,aJ:()=>tr,aN:()=>Ws,aQ:()=>Ui,aa:()=>os,ab:()=>Ss,ac:()=>Wa,ad:()=>Na,ae:()=>ha,af:()=>A,ag:()=>L,ah:()=>ge,ak:()=>Vr,al:()=>jr,am:()=>pn,ap:()=>b,aq:()=>en,as:()=>Hu,at:()=>qa,au:()=>ft,av:()=>ri,aw:()=>Di,ax:()=>ce,ay:()=>uc,az:()=>Ti,b:()=>Oa,c:()=>ic,d:()=>sc,e:()=>$i,f:()=>N,g:()=>le,h:()=>T,i:()=>B,j:()=>it,k:()=>Gc,l:()=>fu,m:()=>cc,p:()=>ye,r:()=>Ca,s:()=>qs,u:()=>Su});var h=U(5861),W=U(534),K=U(9058),ve=U(7879),me=U(7582),we=U(4537);const ye={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},ie={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Ve=function pe(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},ot=function ze(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Qe=new K.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),nt=new ve.Yd("@firebase/auth");function ut(E,...f){nt.logLevel<=ve.in.ERROR&&nt.error(`Auth (${W.SDK_VERSION}): ${E}`,...f)}function ce(E,...f){throw Te(E,...f)}function Be(E,...f){return Te(E,...f)}function be(E,f,_){const D=Object.assign(Object.assign({},ot()),{[f]:_});return new K.LL("auth","Firebase",D).create(f,{appName:E.name})}function Ie(E){return be(E,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Je(E,f,_){if(!(f instanceof _))throw _.name!==f.constructor.name&&ce(E,"argument-error"),be(E,"argument-error",`Type of ${f.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Te(E,...f){if("string"!=typeof E){const _=f[0],D=[...f.slice(1)];return D[0]&&(D[0].appName=E.name),E._errorFactory.create(_,...D)}return Qe.create(E,...f)}function Oe(E,f,..._){if(!E)throw Te(f,..._)}function et(E){const f="INTERNAL ASSERTION FAILED: "+E;throw ut(f),new Error(f)}function ft(E,f){E||et(f)}function Gt(){var E;return typeof self<"u"&&(null===(E=self.location)||void 0===E?void 0:E.href)||""}function Jt(){return"http:"===Pn()||"https:"===Pn()}function Pn(){var E;return typeof self<"u"&&(null===(E=self.location)||void 0===E?void 0:E.protocol)||null}class Ct{constructor(f,_){this.shortDelay=f,this.longDelay=_,ft(_>f,"Short delay should be less than long delay!"),this.isMobile=(0,K.uI)()||(0,K.b$)()}get(){return function Mt(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Jt()||(0,K.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Ae(E,f){ft(E.emulator,"Emulator should always be set here");const{url:_}=E.emulator;return f?`${_}${f.startsWith("/")?f.slice(1):f}`:_}class Me{static initialize(f,_,D){this.fetchImpl=f,_&&(this.headersImpl=_),D&&(this.responseImpl=D)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void et("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void et("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void et("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const He={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Ue=new Ct(3e4,6e4);function Ge(E,f){return E.tenantId&&!f.tenantId?Object.assign(Object.assign({},f),{tenantId:E.tenantId}):f}function rt(E,f,_,D){return Et.apply(this,arguments)}function Et(){return(Et=(0,h.Z)(function*(E,f,_,D,q={}){return It(E,q,(0,h.Z)(function*(){let se={},Pe={};D&&("GET"===f?Pe=D:se={body:JSON.stringify(D)});const Ze=(0,K.xO)(Object.assign({key:E.config.apiKey},Pe)).slice(1),yt=yield E._getAdditionalHeaders();return yt["Content-Type"]="application/json",E.languageCode&&(yt["X-Firebase-Locale"]=E.languageCode),Me.fetch()(Wt(E,E.config.apiHost,_,Ze),Object.assign({method:f,headers:yt,referrerPolicy:"no-referrer"},se))}))})).apply(this,arguments)}function It(E,f,_){return $n.apply(this,arguments)}function $n(){return($n=(0,h.Z)(function*(E,f,_){E._canInitEmulator=!1;const D=Object.assign(Object.assign({},He),f);try{const q=new Hn(E),se=yield Promise.race([_(),q.promise]);q.clearNetworkTimeout();const Pe=yield se.json();if("needConfirmation"in Pe)throw Ln(E,"account-exists-with-different-credential",Pe);if(se.ok&&!("errorMessage"in Pe))return Pe;{const Ze=se.ok?Pe.errorMessage:Pe.error.message,[yt,sn]=Ze.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===yt)throw Ln(E,"credential-already-in-use",Pe);if("EMAIL_EXISTS"===yt)throw Ln(E,"email-already-in-use",Pe);if("USER_DISABLED"===yt)throw Ln(E,"user-disabled",Pe);const Dn=D[yt]||yt.toLowerCase().replace(/[_\s]+/g,"-");if(sn)throw be(E,Dn,sn);ce(E,Dn)}}catch(q){if(q instanceof K.ZR)throw q;ce(E,"network-request-failed",{message:String(q)})}})).apply(this,arguments)}function $t(E,f,_,D){return on.apply(this,arguments)}function on(){return(on=(0,h.Z)(function*(E,f,_,D,q={}){const se=yield rt(E,f,_,D,q);return"mfaPendingCredential"in se&&ce(E,"multi-factor-auth-required",{_serverResponse:se}),se})).apply(this,arguments)}function Wt(E,f,_,D){const q=`${f}${_}?${D}`;return E.config.emulator?Ae(E.config,q):`${E.config.apiScheme}://${q}`}function ar(E){switch(E){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Hn{constructor(f){this.auth=f,this.timer=null,this.promise=new Promise((_,D)=>{this.timer=setTimeout(()=>D(Be(this.auth,"network-request-failed")),Ue.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ln(E,f,_){const D={appName:E.name};_.email&&(D.email=_.email),_.phoneNumber&&(D.phoneNumber=_.phoneNumber);const q=Be(E,f,D);return q.customData._tokenResponse=_,q}function xt(E){return void 0!==E&&void 0!==E.getResponse}function zn(E){return void 0!==E&&void 0!==E.enterprise}class Sn{constructor(f){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===f.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=f.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=f.recaptchaEnforcementState}getProviderEnforcementState(f){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const _ of this.recaptchaEnforcementState)if(_.provider&&_.provider===f)return ar(_.enforcementState);return null}isProviderEnabled(f){return"ENFORCE"===this.getProviderEnforcementState(f)||"AUDIT"===this.getProviderEnforcementState(f)}}function Vn(){return(Vn=(0,h.Z)(function*(E){return(yield rt(E,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Zn(E,f){return xn.apply(this,arguments)}function xn(){return(xn=(0,h.Z)(function*(E,f){return rt(E,"GET","/v2/recaptchaConfig",Ge(E,f))})).apply(this,arguments)}function Zt(){return(Zt=(0,h.Z)(function*(E,f){return rt(E,"POST","/v1/accounts:delete",f)})).apply(this,arguments)}function an(){return(an=(0,h.Z)(function*(E,f){return rt(E,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Kn(E,f){return Fr.apply(this,arguments)}function Fr(){return(Fr=(0,h.Z)(function*(E,f){return rt(E,"POST","/v1/accounts:lookup",f)})).apply(this,arguments)}function ei(E){if(E)try{const f=new Date(Number(E));if(!isNaN(f.getTime()))return f.toUTCString()}catch{}}function ns(){return(ns=(0,h.Z)(function*(E,f=!1){const _=(0,K.m9)(E),D=yield _.getIdToken(f),q=Ri(D);Oe(q&&q.exp&&q.auth_time&&q.iat,_.auth,"internal-error");const se="object"==typeof q.firebase?q.firebase:void 0,Pe=se?.sign_in_provider;return{claims:q,token:D,authTime:ei(Ht(q.auth_time)),issuedAtTime:ei(Ht(q.iat)),expirationTime:ei(Ht(q.exp)),signInProvider:Pe||null,signInSecondFactor:se?.sign_in_second_factor||null}})).apply(this,arguments)}function Ht(E){return 1e3*Number(E)}function Ri(E){const[f,_,D]=E.split(".");if(void 0===f||void 0===_||void 0===D)return ut("JWT malformed, contained fewer than 3 sections"),null;try{const q=(0,K.tV)(_);return q?JSON.parse(q):(ut("Failed to decode base64 JWT payload"),null)}catch(q){return ut("Caught error parsing JWT payload as JSON",q?.toString()),null}}function Rn(E){const f=Ri(E);return Oe(f,"internal-error"),Oe(typeof f.exp<"u","internal-error"),Oe(typeof f.iat<"u","internal-error"),Number(f.exp)-Number(f.iat)}function qt(E,f){return Xn.apply(this,arguments)}function Xn(){return(Xn=(0,h.Z)(function*(E,f,_=!1){if(_)return f;try{return yield f}catch(D){throw D instanceof K.ZR&&function br({code:E}){return"auth/user-disabled"===E||"auth/user-token-expired"===E}(D)&&E.auth.currentUser===E&&(yield E.auth.signOut()),D}})).apply(this,arguments)}class Un{constructor(f){this.user=f,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(f){var _;if(f){const D=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),D}{this.errorBackoff=3e4;const q=(null!==(_=this.user.stsTokenManager.expirationTime)&&void 0!==_?_:0)-Date.now()-3e5;return Math.max(0,q)}}schedule(f=!1){var _=this;if(!this.isRunning)return;const D=this.getInterval(f);this.timerId=setTimeout((0,h.Z)(function*(){yield _.iteration()}),D)}iteration(){var f=this;return(0,h.Z)(function*(){try{yield f.user.getIdToken(!0)}catch(_){return void("auth/network-request-failed"===_?.code&&f.schedule(!0))}f.schedule()})()}}class Nn{constructor(f,_){this.createdAt=f,this.lastLoginAt=_,this._initializeTime()}_initializeTime(){this.lastSignInTime=ei(this.lastLoginAt),this.creationTime=ei(this.createdAt)}_copy(f){this.createdAt=f.createdAt,this.lastLoginAt=f.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Ur(E){return Pi.apply(this,arguments)}function Pi(){return(Pi=(0,h.Z)(function*(E){var f;const _=E.auth,D=yield E.getIdToken(),q=yield qt(E,Kn(_,{idToken:D}));Oe(q?.users.length,_,"internal-error");const se=q.users[0];E._notifyReloadListener(se);const Pe=null!==(f=se.providerUserInfo)&&void 0!==f&&f.length?Mr(se.providerUserInfo):[],Ze=function gr(E,f){return[...E.filter(D=>!f.some(q=>q.providerId===D.providerId)),...f]}(E.providerData,Pe),Dn=!!E.isAnonymous&&!(E.email&&se.passwordHash||Ze?.length),hr={uid:se.localId,displayName:se.displayName||null,photoURL:se.photoUrl||null,email:se.email||null,emailVerified:se.emailVerified||!1,phoneNumber:se.phoneNumber||null,tenantId:se.tenantId||null,providerData:Ze,metadata:new Nn(se.createdAt,se.lastLoginAt),isAnonymous:Dn};Object.assign(E,hr)})).apply(this,arguments)}function Sr(){return(Sr=(0,h.Z)(function*(E){const f=(0,K.m9)(E);yield Ur(f),yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)})).apply(this,arguments)}function Mr(E){return E.map(f=>{var{providerId:_}=f,D=(0,me._T)(f,["providerId"]);return{providerId:_,uid:D.rawId||"",displayName:D.displayName||null,email:D.email||null,phoneNumber:D.phoneNumber||null,photoURL:D.photoUrl||null}})}function Ee(){return(Ee=(0,h.Z)(function*(E,f){const _=yield It(E,{},(0,h.Z)(function*(){const D=(0,K.xO)({grant_type:"refresh_token",refresh_token:f}).slice(1),{tokenApiHost:q,apiKey:se}=E.config,Pe=Wt(E,q,"/v1/token",`key=${se}`),Ze=yield E._getAdditionalHeaders();return Ze["Content-Type"]="application/x-www-form-urlencoded",Me.fetch()(Pe,{method:"POST",headers:Ze,body:D})}));return{accessToken:_.access_token,expiresIn:_.expires_in,refreshToken:_.refresh_token}})).apply(this,arguments)}function z(){return(z=(0,h.Z)(function*(E,f){return rt(E,"POST","/v2/accounts:revokeToken",Ge(E,f))})).apply(this,arguments)}class F{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(f){Oe(f.idToken,"internal-error"),Oe(typeof f.idToken<"u","internal-error"),Oe(typeof f.refreshToken<"u","internal-error");const _="expiresIn"in f&&typeof f.expiresIn<"u"?Number(f.expiresIn):Rn(f.idToken);this.updateTokensAndExpiration(f.idToken,f.refreshToken,_)}updateFromIdToken(f){Oe(0!==f.length,"internal-error");const _=Rn(f);this.updateTokensAndExpiration(f,null,_)}getToken(f,_=!1){var D=this;return(0,h.Z)(function*(){return _||!D.accessToken||D.isExpired?(Oe(D.refreshToken,f,"user-token-expired"),D.refreshToken?(yield D.refresh(f,D.refreshToken),D.accessToken):null):D.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(f,_){var D=this;return(0,h.Z)(function*(){const{accessToken:q,refreshToken:se,expiresIn:Pe}=yield function ir(E,f){return Ee.apply(this,arguments)}(f,_);D.updateTokensAndExpiration(q,se,Number(Pe))})()}updateTokensAndExpiration(f,_,D){this.refreshToken=_||null,this.accessToken=f||null,this.expirationTime=Date.now()+1e3*D}static fromJSON(f,_){const{refreshToken:D,accessToken:q,expirationTime:se}=_,Pe=new F;return D&&(Oe("string"==typeof D,"internal-error",{appName:f}),Pe.refreshToken=D),q&&(Oe("string"==typeof q,"internal-error",{appName:f}),Pe.accessToken=q),se&&(Oe("number"==typeof se,"internal-error",{appName:f}),Pe.expirationTime=se),Pe}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(f){this.accessToken=f.accessToken,this.refreshToken=f.refreshToken,this.expirationTime=f.expirationTime}_clone(){return Object.assign(new F,this.toJSON())}_performRefresh(){return et("not implemented")}}function k(E,f){Oe("string"==typeof E||typeof E>"u","internal-error",{appName:f})}class oe{constructor(f){var{uid:_,auth:D,stsTokenManager:q}=f,se=(0,me._T)(f,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Un(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=_,this.auth=D,this.stsTokenManager=q,this.accessToken=q.accessToken,this.displayName=se.displayName||null,this.email=se.email||null,this.emailVerified=se.emailVerified||!1,this.phoneNumber=se.phoneNumber||null,this.photoURL=se.photoURL||null,this.isAnonymous=se.isAnonymous||!1,this.tenantId=se.tenantId||null,this.providerData=se.providerData?[...se.providerData]:[],this.metadata=new Nn(se.createdAt||void 0,se.lastLoginAt||void 0)}getIdToken(f){var _=this;return(0,h.Z)(function*(){const D=yield qt(_,_.stsTokenManager.getToken(_.auth,f));return Oe(D,_.auth,"internal-error"),_.accessToken!==D&&(_.accessToken=D,yield _.auth._persistUserIfCurrent(_),_.auth._notifyListenersIfCurrent(_)),D})()}getIdTokenResult(f){return function Cr(E){return ns.apply(this,arguments)}(this,f)}reload(){return function ti(E){return Sr.apply(this,arguments)}(this)}_assign(f){this!==f&&(Oe(this.uid===f.uid,this.auth,"internal-error"),this.displayName=f.displayName,this.photoURL=f.photoURL,this.email=f.email,this.emailVerified=f.emailVerified,this.phoneNumber=f.phoneNumber,this.isAnonymous=f.isAnonymous,this.tenantId=f.tenantId,this.providerData=f.providerData.map(_=>Object.assign({},_)),this.metadata._copy(f.metadata),this.stsTokenManager._assign(f.stsTokenManager))}_clone(f){const _=new oe(Object.assign(Object.assign({},this),{auth:f,stsTokenManager:this.stsTokenManager._clone()}));return _.metadata._copy(this.metadata),_}_onReload(f){Oe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=f,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(f){this.reloadListener?this.reloadListener(f):this.reloadUserInfo=f}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(f,_=!1){var D=this;return(0,h.Z)(function*(){let q=!1;f.idToken&&f.idToken!==D.stsTokenManager.accessToken&&(D.stsTokenManager.updateFromServerResponse(f),q=!0),_&&(yield Ur(D)),yield D.auth._persistUserIfCurrent(D),q&&D.auth._notifyListenersIfCurrent(D)})()}delete(){var f=this;return(0,h.Z)(function*(){if((0,W._isFirebaseServerApp)(f.auth.app))return Promise.reject(Ie(f.auth));const _=yield f.getIdToken();return yield qt(f,function Yr(E,f){return Zt.apply(this,arguments)}(f.auth,{idToken:_})),f.stsTokenManager.clearRefreshToken(),f.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(f=>Object.assign({},f)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(f,_){var D,q,se,Pe,Ze,yt,sn,Dn;const hr=null!==(D=_.displayName)&&void 0!==D?D:void 0,so=null!==(q=_.email)&&void 0!==q?q:void 0,vu=null!==(se=_.phoneNumber)&&void 0!==se?se:void 0,Xa=null!==(Pe=_.photoURL)&&void 0!==Pe?Pe:void 0,fc=null!==(Ze=_.tenantId)&&void 0!==Ze?Ze:void 0,el=null!==(yt=_._redirectEventId)&&void 0!==yt?yt:void 0,Mh=null!==(sn=_.createdAt)&&void 0!==sn?sn:void 0,pc=null!==(Dn=_.lastLoginAt)&&void 0!==Dn?Dn:void 0,{uid:Rl,emailVerified:Yf,isAnonymous:Jf,providerData:Xi,stsTokenManager:Kc}=_;Oe(Rl&&Kc,f,"internal-error");const Zc=F.fromJSON(this.name,Kc);Oe("string"==typeof Rl,f,"internal-error"),k(hr,f.name),k(so,f.name),Oe("boolean"==typeof Yf,f,"internal-error"),Oe("boolean"==typeof Jf,f,"internal-error"),k(vu,f.name),k(Xa,f.name),k(fc,f.name),k(el,f.name),k(Mh,f.name),k(pc,f.name);const tl=new oe({uid:Rl,auth:f,email:so,emailVerified:Yf,displayName:hr,isAnonymous:Jf,photoURL:Xa,phoneNumber:vu,tenantId:fc,stsTokenManager:Zc,createdAt:Mh,lastLoginAt:pc});return Xi&&Array.isArray(Xi)&&(tl.providerData=Xi.map(Qc=>Object.assign({},Qc))),el&&(tl._redirectEventId=el),tl}static _fromIdTokenResponse(f,_,D=!1){return(0,h.Z)(function*(){const q=new F;q.updateFromServerResponse(_);const se=new oe({uid:_.localId,auth:f,stsTokenManager:q,isAnonymous:D});return yield Ur(se),se})()}static _fromGetAccountInfoResponse(f,_,D){return(0,h.Z)(function*(){const q=_.users[0];Oe(void 0!==q.localId,"internal-error");const se=void 0!==q.providerUserInfo?Mr(q.providerUserInfo):[],Pe=!(q.email&&q.passwordHash||se?.length),Ze=new F;Ze.updateFromIdToken(D);const yt=new oe({uid:q.localId,auth:f,stsTokenManager:Ze,isAnonymous:Pe}),sn={uid:q.localId,displayName:q.displayName||null,photoURL:q.photoUrl||null,email:q.email||null,emailVerified:q.emailVerified||!1,phoneNumber:q.phoneNumber||null,tenantId:q.tenantId||null,providerData:se,metadata:new Nn(q.createdAt,q.lastLoginAt),isAnonymous:!(q.email&&q.passwordHash||se?.length)};return Object.assign(yt,sn),yt})()}}const Ne=new Map;function at(E){ft(E instanceof Function,"Expected a class definition");let f=Ne.get(E);return f?(ft(f instanceof E,"Instance stored in cache mismatched with class"),f):(f=new E,Ne.set(E,f),f)}const Ft=(()=>{class E{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,h.Z)(function*(){return!0})()}_set(_,D){var q=this;return(0,h.Z)(function*(){q.storage[_]=D})()}_get(_){var D=this;return(0,h.Z)(function*(){const q=D.storage[_];return void 0===q?null:q})()}_remove(_){var D=this;return(0,h.Z)(function*(){delete D.storage[_]})()}_addListener(_,D){}_removeListener(_,D){}}return E.type="NONE",E})();function At(E,f,_){return`firebase:${E}:${f}:${_}`}class Kt{constructor(f,_,D){this.persistence=f,this.auth=_,this.userKey=D;const{config:q,name:se}=this.auth;this.fullUserKey=At(this.userKey,q.apiKey,se),this.fullPersistenceKey=At("persistence",q.apiKey,se),this.boundEventHandler=_._onStorageEvent.bind(_),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(f){return this.persistence._set(this.fullUserKey,f.toJSON())}getCurrentUser(){var f=this;return(0,h.Z)(function*(){const _=yield f.persistence._get(f.fullUserKey);return _?oe._fromJSON(f.auth,_):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(f){var _=this;return(0,h.Z)(function*(){if(_.persistence===f)return;const D=yield _.getCurrentUser();return yield _.removeCurrentUser(),_.persistence=f,D?_.setCurrentUser(D):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(f,_,D="authUser"){return(0,h.Z)(function*(){if(!_.length)return new Kt(at(Ft),f,D);const q=(yield Promise.all(_.map(function(){var sn=(0,h.Z)(function*(Dn){if(yield Dn._isAvailable())return Dn});return function(Dn){return sn.apply(this,arguments)}}()))).filter(sn=>sn);let se=q[0]||at(Ft);const Pe=At(D,f.config.apiKey,f.name);let Ze=null;for(const sn of _)try{const Dn=yield sn._get(Pe);if(Dn){const hr=oe._fromJSON(f,Dn);sn!==se&&(Ze=hr),se=sn;break}}catch{}const yt=q.filter(sn=>sn._shouldAllowMigration);return se._shouldAllowMigration&&yt.length?(se=yt[0],Ze&&(yield se._set(Pe,Ze.toJSON())),yield Promise.all(_.map(function(){var sn=(0,h.Z)(function*(Dn){if(Dn!==se)try{yield Dn._remove(Pe)}catch{}});return function(Dn){return sn.apply(this,arguments)}}())),new Kt(se,f,D)):new Kt(se,f,D)})()}}function Gn(E){const f=E.toLowerCase();if(f.includes("opera/")||f.includes("opr/")||f.includes("opios/"))return"Opera";if(ls(f))return"IEMobile";if(f.includes("msie")||f.includes("trident/"))return"IE";if(f.includes("edge/"))return"Edge";if(dn(f))return"Firefox";if(f.includes("silk/"))return"Silk";if(Kr(f))return"Blackberry";if(ur(f))return"Webos";if(ni(f))return"Safari";if((f.includes("chrome/")||ws(f))&&!f.includes("edge/"))return"Chrome";if(Di(f))return"Android";{const D=E.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===D?.length)return D[1]}return"Other"}function dn(E=(0,K.z$)()){return/firefox\//i.test(E)}function ni(E=(0,K.z$)()){const f=E.toLowerCase();return f.includes("safari/")&&!f.includes("chrome/")&&!f.includes("crios/")&&!f.includes("android")}function ws(E=(0,K.z$)()){return/crios\//i.test(E)}function ls(E=(0,K.z$)()){return/iemobile/i.test(E)}function Di(E=(0,K.z$)()){return/android/i.test(E)}function Kr(E=(0,K.z$)()){return/blackberry/i.test(E)}function ur(E=(0,K.z$)()){return/webos/i.test(E)}function ri(E=(0,K.z$)()){return/iphone|ipad|ipod/i.test(E)||/macintosh/i.test(E)&&/mobile/i.test(E)}function Fe(E=(0,K.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(E)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(E)}function Dt(E=(0,K.z$)()){return ri(E)||Di(E)||ur(E)||Kr(E)||/windows phone/i.test(E)||ls(E)}function tn(E,f=[]){let _;switch(E){case"Browser":_=Gn((0,K.z$)());break;case"Worker":_=`${Gn((0,K.z$)())}-${E}`;break;default:_=E}const D=f.length?f.join(","):"FirebaseCore-web";return`${_}/JsCore/${W.SDK_VERSION}/${D}`}class yn{constructor(f){this.auth=f,this.queue=[]}pushCallback(f,_){const D=se=>new Promise((Pe,Ze)=>{try{Pe(f(se))}catch(yt){Ze(yt)}});D.onAbort=_,this.queue.push(D);const q=this.queue.length-1;return()=>{this.queue[q]=()=>Promise.resolve()}}runMiddleware(f){var _=this;return(0,h.Z)(function*(){if(_.auth.currentUser===f)return;const D=[];try{for(const q of _.queue)yield q(f),q.onAbort&&D.push(q.onAbort)}catch(q){D.reverse();for(const se of D)try{se()}catch{}throw _.auth._errorFactory.create("login-blocked",{originalMessage:q?.message})}})()}}function lr(){return(lr=(0,h.Z)(function*(E,f={}){return rt(E,"GET","/v2/passwordPolicy",Ge(E,f))})).apply(this,arguments)}class Ts{constructor(f){var _,D,q,se;const Pe=f.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(_=Pe.minPasswordLength)&&void 0!==_?_:6,Pe.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=Pe.maxPasswordLength),void 0!==Pe.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=Pe.containsLowercaseCharacter),void 0!==Pe.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=Pe.containsUppercaseCharacter),void 0!==Pe.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=Pe.containsNumericCharacter),void 0!==Pe.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=Pe.containsNonAlphanumericCharacter),this.enforcementState=f.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(q=null===(D=f.allowedNonAlphanumericCharacters)||void 0===D?void 0:D.join(""))&&void 0!==q?q:"",this.forceUpgradeOnSignin=null!==(se=f.forceUpgradeOnSignin)&&void 0!==se&&se,this.schemaVersion=f.schemaVersion}validatePassword(f){var _,D,q,se,Pe,Ze;const yt={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(f,yt),this.validatePasswordCharacterOptions(f,yt),yt.isValid&&(yt.isValid=null===(_=yt.meetsMinPasswordLength)||void 0===_||_),yt.isValid&&(yt.isValid=null===(D=yt.meetsMaxPasswordLength)||void 0===D||D),yt.isValid&&(yt.isValid=null===(q=yt.containsLowercaseLetter)||void 0===q||q),yt.isValid&&(yt.isValid=null===(se=yt.containsUppercaseLetter)||void 0===se||se),yt.isValid&&(yt.isValid=null===(Pe=yt.containsNumericCharacter)||void 0===Pe||Pe),yt.isValid&&(yt.isValid=null===(Ze=yt.containsNonAlphanumericCharacter)||void 0===Ze||Ze),yt}validatePasswordLengthOptions(f,_){const D=this.customStrengthOptions.minPasswordLength,q=this.customStrengthOptions.maxPasswordLength;D&&(_.meetsMinPasswordLength=f.length>=D),q&&(_.meetsMaxPasswordLength=f.length<=q)}validatePasswordCharacterOptions(f,_){let D;this.updatePasswordCharacterOptionsStatuses(_,!1,!1,!1,!1);for(let q=0;q<f.length;q++)D=f.charAt(q),this.updatePasswordCharacterOptionsStatuses(_,D>="a"&&D<="z",D>="A"&&D<="Z",D>="0"&&D<="9",this.allowedNonAlphanumericCharacters.includes(D))}updatePasswordCharacterOptionsStatuses(f,_,D,q,se){this.customStrengthOptions.containsLowercaseLetter&&(f.containsLowercaseLetter||(f.containsLowercaseLetter=_)),this.customStrengthOptions.containsUppercaseLetter&&(f.containsUppercaseLetter||(f.containsUppercaseLetter=D)),this.customStrengthOptions.containsNumericCharacter&&(f.containsNumericCharacter||(f.containsNumericCharacter=q)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(f.containsNonAlphanumericCharacter||(f.containsNonAlphanumericCharacter=se))}}class Mo{constructor(f,_,D,q){this.app=f,this.heartbeatServiceProvider=_,this.appCheckServiceProvider=D,this.config=q,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new cs(this),this.idTokenSubscription=new cs(this),this.beforeStateQueue=new yn(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Qe,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=f.name,this.clientVersion=q.sdkClientVersion}_initializeWithPersistence(f,_){var D=this;return _&&(this._popupRedirectResolver=at(_)),this._initializationPromise=this.queue((0,h.Z)(function*(){var q,se;if(!D._deleted&&(D.persistenceManager=yield Kt.create(D,f),!D._deleted)){if(null!==(q=D._popupRedirectResolver)&&void 0!==q&&q._shouldInitProactively)try{yield D._popupRedirectResolver._initialize(D)}catch{}yield D.initializeCurrentUser(_),D.lastNotifiedUid=(null===(se=D.currentUser)||void 0===se?void 0:se.uid)||null,!D._deleted&&(D._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var f=this;return(0,h.Z)(function*(){if(f._deleted)return;const _=yield f.assertedPersistence.getCurrentUser();if(f.currentUser||_){if(f.currentUser&&_&&f.currentUser.uid===_.uid)return f._currentUser._assign(_),void(yield f.currentUser.getIdToken());yield f._updateCurrentUser(_,!0)}})()}initializeCurrentUserFromIdToken(f){var _=this;return(0,h.Z)(function*(){try{const D=yield Kn(_,{idToken:f}),q=yield oe._fromGetAccountInfoResponse(_,D,f);yield _.directlySetCurrentUser(q)}catch(D){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",D),yield _.directlySetCurrentUser(null)}})()}initializeCurrentUser(f){var _=this;return(0,h.Z)(function*(){var D;if((0,W._isFirebaseServerApp)(_.app)){const Ze=_.app.settings.authIdToken;return Ze?new Promise(yt=>{setTimeout(()=>_.initializeCurrentUserFromIdToken(Ze).then(yt,yt))}):_.directlySetCurrentUser(null)}const q=yield _.assertedPersistence.getCurrentUser();let se=q,Pe=!1;if(f&&_.config.authDomain){yield _.getOrInitRedirectPersistenceManager();const Ze=null===(D=_.redirectUser)||void 0===D?void 0:D._redirectEventId,yt=se?._redirectEventId,sn=yield _.tryRedirectSignIn(f);(!Ze||Ze===yt)&&sn?.user&&(se=sn.user,Pe=!0)}if(!se)return _.directlySetCurrentUser(null);if(!se._redirectEventId){if(Pe)try{yield _.beforeStateQueue.runMiddleware(se)}catch(Ze){se=q,_._popupRedirectResolver._overrideRedirectResult(_,()=>Promise.reject(Ze))}return se?_.reloadAndSetCurrentUserOrClear(se):_.directlySetCurrentUser(null)}return Oe(_._popupRedirectResolver,_,"argument-error"),yield _.getOrInitRedirectPersistenceManager(),_.redirectUser&&_.redirectUser._redirectEventId===se._redirectEventId?_.directlySetCurrentUser(se):_.reloadAndSetCurrentUserOrClear(se)})()}tryRedirectSignIn(f){var _=this;return(0,h.Z)(function*(){let D=null;try{D=yield _._popupRedirectResolver._completeRedirectFn(_,f,!0)}catch{yield _._setRedirectUser(null)}return D})()}reloadAndSetCurrentUserOrClear(f){var _=this;return(0,h.Z)(function*(){try{yield Ur(f)}catch(D){if("auth/network-request-failed"!==D?.code)return _.directlySetCurrentUser(null)}return _.directlySetCurrentUser(f)})()}useDeviceLanguage(){this.languageCode=function kt(){if(typeof navigator>"u")return null;const E=navigator;return E.languages&&E.languages[0]||E.language||null}()}_delete(){var f=this;return(0,h.Z)(function*(){f._deleted=!0})()}updateCurrentUser(f){var _=this;return(0,h.Z)(function*(){if((0,W._isFirebaseServerApp)(_.app))return Promise.reject(Ie(_));const D=f?(0,K.m9)(f):null;return D&&Oe(D.auth.config.apiKey===_.config.apiKey,_,"invalid-user-token"),_._updateCurrentUser(D&&D._clone(_))})()}_updateCurrentUser(f,_=!1){var D=this;return(0,h.Z)(function*(){if(!D._deleted)return f&&Oe(D.tenantId===f.tenantId,D,"tenant-id-mismatch"),_||(yield D.beforeStateQueue.runMiddleware(f)),D.queue((0,h.Z)(function*(){yield D.directlySetCurrentUser(f),D.notifyAuthListeners()}))})()}signOut(){var f=this;return(0,h.Z)(function*(){return(0,W._isFirebaseServerApp)(f.app)?Promise.reject(Ie(f)):(yield f.beforeStateQueue.runMiddleware(null),(f.redirectPersistenceManager||f._popupRedirectResolver)&&(yield f._setRedirectUser(null)),f._updateCurrentUser(null,!0))})()}setPersistence(f){var _=this;return(0,W._isFirebaseServerApp)(this.app)?Promise.reject(Ie(this)):this.queue((0,h.Z)(function*(){yield _.assertedPersistence.setPersistence(at(f))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(f){var _=this;return(0,h.Z)(function*(){_._getPasswordPolicyInternal()||(yield _._updatePasswordPolicy());const D=_._getPasswordPolicyInternal();return D.schemaVersion!==_.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(_._errorFactory.create("unsupported-password-policy-schema-version",{})):D.validatePassword(f)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var f=this;return(0,h.Z)(function*(){const _=yield function kn(E){return lr.apply(this,arguments)}(f),D=new Ts(_);null===f.tenantId?f._projectPasswordPolicy=D:f._tenantPasswordPolicies[f.tenantId]=D})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(f){this._errorFactory=new K.LL("auth","Firebase",f())}onAuthStateChanged(f,_,D){return this.registerStateListener(this.authStateSubscription,f,_,D)}beforeAuthStateChanged(f,_){return this.beforeStateQueue.pushCallback(f,_)}onIdTokenChanged(f,_,D){return this.registerStateListener(this.idTokenSubscription,f,_,D)}authStateReady(){return new Promise((f,_)=>{if(this.currentUser)f();else{const D=this.onAuthStateChanged(()=>{D(),f()},_)}})}revokeAccessToken(f){var _=this;return(0,h.Z)(function*(){if(_.currentUser){const D=yield _.currentUser.getIdToken(),q={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:f,idToken:D};null!=_.tenantId&&(q.tenantId=_.tenantId),yield function re(E,f){return z.apply(this,arguments)}(_,q)}})()}toJSON(){var f;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(f=this._currentUser)||void 0===f?void 0:f.toJSON()}}_setRedirectUser(f,_){var D=this;return(0,h.Z)(function*(){const q=yield D.getOrInitRedirectPersistenceManager(_);return null===f?q.removeCurrentUser():q.setCurrentUser(f)})()}getOrInitRedirectPersistenceManager(f){var _=this;return(0,h.Z)(function*(){if(!_.redirectPersistenceManager){const D=f&&at(f)||_._popupRedirectResolver;Oe(D,_,"argument-error"),_.redirectPersistenceManager=yield Kt.create(_,[at(D._redirectPersistence)],"redirectUser"),_.redirectUser=yield _.redirectPersistenceManager.getCurrentUser()}return _.redirectPersistenceManager})()}_redirectUserForId(f){var _=this;return(0,h.Z)(function*(){var D,q;return _._isInitialized&&(yield _.queue((0,h.Z)(function*(){}))),(null===(D=_._currentUser)||void 0===D?void 0:D._redirectEventId)===f?_._currentUser:(null===(q=_.redirectUser)||void 0===q?void 0:q._redirectEventId)===f?_.redirectUser:null})()}_persistUserIfCurrent(f){var _=this;return(0,h.Z)(function*(){if(f===_.currentUser)return _.queue((0,h.Z)(function*(){return _.directlySetCurrentUser(f)}))})()}_notifyListenersIfCurrent(f){f===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var f,_;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const D=null!==(_=null===(f=this.currentUser)||void 0===f?void 0:f.uid)&&void 0!==_?_:null;this.lastNotifiedUid!==D&&(this.lastNotifiedUid=D,this.authStateSubscription.next(this.currentUser))}registerStateListener(f,_,D,q){if(this._deleted)return()=>{};const se="function"==typeof _?_:_.next.bind(_);let Pe=!1;const Ze=this._isInitialized?Promise.resolve():this._initializationPromise;if(Oe(Ze,this,"internal-error"),Ze.then(()=>{Pe||se(this.currentUser)}),"function"==typeof _){const yt=f.addObserver(_,D,q);return()=>{Pe=!0,yt()}}{const yt=f.addObserver(_);return()=>{Pe=!0,yt()}}}directlySetCurrentUser(f){var _=this;return(0,h.Z)(function*(){_.currentUser&&_.currentUser!==f&&_._currentUser._stopProactiveRefresh(),f&&_.isProactiveRefreshEnabled&&f._startProactiveRefresh(),_.currentUser=f,f?yield _.assertedPersistence.setCurrentUser(f):yield _.assertedPersistence.removeCurrentUser()})()}queue(f){return this.operations=this.operations.then(f,f),this.operations}get assertedPersistence(){return Oe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(f){!f||this.frameworks.includes(f)||(this.frameworks.push(f),this.frameworks.sort(),this.clientVersion=tn(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var f=this;return(0,h.Z)(function*(){var _;const D={"X-Client-Version":f.clientVersion};f.app.options.appId&&(D["X-Firebase-gmpid"]=f.app.options.appId);const q=yield null===(_=f.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===_?void 0:_.getHeartbeatsHeader();q&&(D["X-Firebase-Client"]=q);const se=yield f._getAppCheckToken();return se&&(D["X-Firebase-AppCheck"]=se),D})()}_getAppCheckToken(){var f=this;return(0,h.Z)(function*(){var _;const D=yield null===(_=f.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===_?void 0:_.getToken();return D?.error&&function Vt(E,...f){nt.logLevel<=ve.in.WARN&&nt.warn(`Auth (${W.SDK_VERSION}): ${E}`,...f)}(`Error while retrieving App Check token: ${D.error}`),D?.token})()}}function tr(E){return(0,K.m9)(E)}class cs{constructor(f){this.auth=f,this.observer=null,this.addObserver=(0,K.ne)(_=>this.observer=_)}get next(){return Oe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Oi={loadJS:()=>(0,h.Z)(function*(){throw new Error("Unable to load external scripts")})(),recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Qs(E){return Oi.loadJS(E)}function cr(E){return`__${E}${Math.floor(1e6*Math.random())}`}class gi{constructor(f){this.type="recaptcha-enterprise",this.auth=tr(f)}verify(f="verify",_=!1){var D=this;return(0,h.Z)(function*(){function se(){return se=(0,h.Z)(function*(Ze){if(!_){if(null==Ze.tenantId&&null!=Ze._agentRecaptchaConfig)return Ze._agentRecaptchaConfig.siteKey;if(null!=Ze.tenantId&&void 0!==Ze._tenantRecaptchaConfigs[Ze.tenantId])return Ze._tenantRecaptchaConfigs[Ze.tenantId].siteKey}return new Promise(function(){var yt=(0,h.Z)(function*(sn,Dn){Zn(Ze,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(hr=>{if(void 0!==hr.recaptchaKey){const so=new Sn(hr);return null==Ze.tenantId?Ze._agentRecaptchaConfig=so:Ze._tenantRecaptchaConfigs[Ze.tenantId]=so,sn(so.siteKey)}Dn(new Error("recaptcha Enterprise site key undefined"))}).catch(hr=>{Dn(hr)})});return function(sn,Dn){return yt.apply(this,arguments)}}())}),se.apply(this,arguments)}function Pe(Ze,yt,sn){const Dn=window.grecaptcha;zn(Dn)?Dn.enterprise.ready(()=>{Dn.enterprise.execute(Ze,{action:f}).then(hr=>{yt(hr)}).catch(()=>{yt("NO_RECAPTCHA")})}):sn(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((Ze,yt)=>{(function q(Ze){return se.apply(this,arguments)})(D.auth).then(sn=>{if(!_&&zn(window.grecaptcha))Pe(sn,Ze,yt);else{if(typeof window>"u")return void yt(new Error("RecaptchaVerifier is only supported in browser"));let Dn=function go(){return Oi.recaptchaEnterpriseScript}();0!==Dn.length&&(Dn+=sn),Qs(Dn).then(()=>{Pe(sn,Ze,yt)}).catch(hr=>{yt(hr)})}}).catch(sn=>{yt(sn)})})})()}}function $s(E,f,_){return hs.apply(this,arguments)}function hs(){return(hs=(0,h.Z)(function*(E,f,_,D=!1){const q=new gi(E);let se;try{se=yield q.verify(_)}catch{se=yield q.verify(_,!0)}const Pe=Object.assign({},f);return Object.assign(Pe,D?{captchaResp:se}:{captchaResponse:se}),Object.assign(Pe,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(Pe,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),Pe})).apply(this,arguments)}function fs(E,f,_,D){return xi.apply(this,arguments)}function xi(){return xi=(0,h.Z)(function*(E,f,_,D){var q;if(null!==(q=E._getRecaptchaConfig())&&void 0!==q&&q.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const se=yield $s(E,f,_,"getOobCode"===_);return D(E,se)}return D(E,f).catch(function(){var se=(0,h.Z)(function*(Pe){if("auth/missing-recaptcha-token"===Pe.code){console.log(`${_} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const Ze=yield $s(E,f,_,"getOobCode"===_);return D(E,Ze)}return Promise.reject(Pe)});return function(Pe){return se.apply(this,arguments)}}())}),xi.apply(this,arguments)}function Hs(E,f,_){const D=tr(E);Oe(D._canInitEmulator,D,"emulator-config-failed"),Oe(/^https?:\/\//.test(f),D,"invalid-emulator-scheme");const q=!!_?.disableWarnings,se=As(f),{host:Pe,port:Ze}=function Os(E){const f=As(E),_=/(\/\/)?([^?#/]+)/.exec(E.substr(f.length));if(!_)return{host:"",port:null};const D=_[2].split("@").pop()||"",q=/^(\[[^\]]+\])(:|$)/.exec(D);if(q){const se=q[1];return{host:se,port:_o(D.substr(se.length+1))}}{const[se,Pe]=D.split(":");return{host:se,port:_o(Pe)}}}(f);D.config.emulator={url:`${se}//${Pe}${null===Ze?"":`:${Ze}`}/`},D.settings.appVerificationDisabledForTesting=!0,D.emulatorConfig=Object.freeze({host:Pe,port:Ze,protocol:se.replace(":",""),options:Object.freeze({disableWarnings:q})}),q||function No(){function E(){const f=document.createElement("p"),_=f.style;f.innerText="Running in emulator mode. Do not use with production credentials.",_.position="fixed",_.width="100%",_.backgroundColor="#ffffff",_.border=".1em solid #000000",_.color="#b50000",_.bottom="0px",_.left="0px",_.margin="0px",_.zIndex="10000",_.textAlign="center",f.classList.add("firebase-emulator-warning"),document.body.appendChild(f)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",E):E())}()}function As(E){const f=E.indexOf(":");return f<0?"":E.substr(0,f+1)}function _o(E){if(!E)return null;const f=Number(E);return isNaN(f)?null:f}class xs{constructor(f,_){this.providerId=f,this.signInMethod=_}toJSON(){return et("not implemented")}_getIdTokenResponse(f){return et("not implemented")}_linkToIdToken(f,_){return et("not implemented")}_getReauthenticationResolver(f){return et("not implemented")}}function zs(E,f){return Wn.apply(this,arguments)}function Wn(){return(Wn=(0,h.Z)(function*(E,f){return rt(E,"POST","/v1/accounts:resetPassword",Ge(E,f))})).apply(this,arguments)}function Nr(){return(Nr=(0,h.Z)(function*(E,f){return rt(E,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function mi(E,f){return ci.apply(this,arguments)}function ci(){return(ci=(0,h.Z)(function*(E,f){return rt(E,"POST","/v1/accounts:signUp",f)})).apply(this,arguments)}function Xs(){return(Xs=(0,h.Z)(function*(E,f){return rt(E,"POST","/v1/accounts:update",Ge(E,f))})).apply(this,arguments)}function Bn(E,f){return rs.apply(this,arguments)}function rs(){return(rs=(0,h.Z)(function*(E,f){return $t(E,"POST","/v1/accounts:signInWithPassword",Ge(E,f))})).apply(this,arguments)}function ps(E,f){return vr.apply(this,arguments)}function vr(){return(vr=(0,h.Z)(function*(E,f){return rt(E,"POST","/v1/accounts:sendOobCode",Ge(E,f))})).apply(this,arguments)}function fn(){return(fn=(0,h.Z)(function*(E,f){return ps(E,f)})).apply(this,arguments)}function Er(E,f){return Hi.apply(this,arguments)}function Hi(){return(Hi=(0,h.Z)(function*(E,f){return ps(E,f)})).apply(this,arguments)}function gs(E,f){return di.apply(this,arguments)}function di(){return(di=(0,h.Z)(function*(E,f){return ps(E,f)})).apply(this,arguments)}function er(){return(er=(0,h.Z)(function*(E,f){return ps(E,f)})).apply(this,arguments)}function is(){return(is=(0,h.Z)(function*(E,f){return $t(E,"POST","/v1/accounts:signInWithEmailLink",Ge(E,f))})).apply(this,arguments)}function Ai(){return(Ai=(0,h.Z)(function*(E,f){return $t(E,"POST","/v1/accounts:signInWithEmailLink",Ge(E,f))})).apply(this,arguments)}class ks extends xs{constructor(f,_,D,q=null){super("password",D),this._email=f,this._password=_,this._tenantId=q}static _fromEmailAndPassword(f,_){return new ks(f,_,"password")}static _fromEmailAndCode(f,_,D=null){return new ks(f,_,"emailLink",D)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(f){const _="string"==typeof f?JSON.parse(f):f;if(_?.email&&_?.password){if("password"===_.signInMethod)return this._fromEmailAndPassword(_.email,_.password);if("emailLink"===_.signInMethod)return this._fromEmailAndCode(_.email,_.password,_.tenantId)}return null}_getIdTokenResponse(f){var _=this;return(0,h.Z)(function*(){switch(_.signInMethod){case"password":return fs(f,{returnSecureToken:!0,email:_._email,password:_._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Bn);case"emailLink":return function hi(E,f){return is.apply(this,arguments)}(f,{email:_._email,oobCode:_._password});default:ce(f,"internal-error")}})()}_linkToIdToken(f,_){var D=this;return(0,h.Z)(function*(){switch(D.signInMethod){case"password":return fs(f,{idToken:_,returnSecureToken:!0,email:D._email,password:D._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",mi);case"emailLink":return function mn(E,f){return Ai.apply(this,arguments)}(f,{idToken:_,email:D._email,oobCode:D._password});default:ce(f,"internal-error")}})()}_getReauthenticationResolver(f){return this._getIdTokenResponse(f)}}function zi(E,f){return Lr.apply(this,arguments)}function Lr(){return(Lr=(0,h.Z)(function*(E,f){return $t(E,"POST","/v1/accounts:signInWithIdp",Ge(E,f))})).apply(this,arguments)}class mr extends xs{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(f){const _=new mr(f.providerId,f.signInMethod);return f.idToken||f.accessToken?(f.idToken&&(_.idToken=f.idToken),f.accessToken&&(_.accessToken=f.accessToken),f.nonce&&!f.pendingToken&&(_.nonce=f.nonce),f.pendingToken&&(_.pendingToken=f.pendingToken)):f.oauthToken&&f.oauthTokenSecret?(_.accessToken=f.oauthToken,_.secret=f.oauthTokenSecret):ce("argument-error"),_}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(f){const _="string"==typeof f?JSON.parse(f):f,{providerId:D,signInMethod:q}=_,se=(0,me._T)(_,["providerId","signInMethod"]);if(!D||!q)return null;const Pe=new mr(D,q);return Pe.idToken=se.idToken||void 0,Pe.accessToken=se.accessToken||void 0,Pe.secret=se.secret,Pe.nonce=se.nonce,Pe.pendingToken=se.pendingToken||null,Pe}_getIdTokenResponse(f){return zi(f,this.buildRequest())}_linkToIdToken(f,_){const D=this.buildRequest();return D.idToken=_,zi(f,D)}_getReauthenticationResolver(f){const _=this.buildRequest();return _.autoCreate=!1,zi(f,_)}buildRequest(){const f={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)f.pendingToken=this.pendingToken;else{const _={};this.idToken&&(_.id_token=this.idToken),this.accessToken&&(_.access_token=this.accessToken),this.secret&&(_.oauth_token_secret=this.secret),_.providerId=this.providerId,this.nonce&&!this.pendingToken&&(_.nonce=this.nonce),f.postBody=(0,K.xO)(_)}return f}}function _i(){return(_i=(0,h.Z)(function*(E,f){return rt(E,"POST","/v1/accounts:sendVerificationCode",Ge(E,f))})).apply(this,arguments)}function ms(){return(ms=(0,h.Z)(function*(E,f){return $t(E,"POST","/v1/accounts:signInWithPhoneNumber",Ge(E,f))})).apply(this,arguments)}function yi(){return(yi=(0,h.Z)(function*(E,f){const _=yield $t(E,"POST","/v1/accounts:signInWithPhoneNumber",Ge(E,f));if(_.temporaryProof)throw Ln(E,"account-exists-with-different-credential",_);return _})).apply(this,arguments)}const Gs={USER_NOT_FOUND:"user-not-found"};function va(){return(va=(0,h.Z)(function*(E,f){return $t(E,"POST","/v1/accounts:signInWithPhoneNumber",Ge(E,Object.assign(Object.assign({},f),{operation:"REAUTH"})),Gs)})).apply(this,arguments)}class Zi extends xs{constructor(f){super("phone","phone"),this.params=f}static _fromVerification(f,_){return new Zi({verificationId:f,verificationCode:_})}static _fromTokenResponse(f,_){return new Zi({phoneNumber:f,temporaryProof:_})}_getIdTokenResponse(f){return function Oo(E,f){return ms.apply(this,arguments)}(f,this._makeVerificationRequest())}_linkToIdToken(f,_){return function Fi(E,f){return yi.apply(this,arguments)}(f,Object.assign({idToken:_},this._makeVerificationRequest()))}_getReauthenticationResolver(f){return function Qn(E,f){return va.apply(this,arguments)}(f,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:f,phoneNumber:_,verificationId:D,verificationCode:q}=this.params;return f&&_?{temporaryProof:f,phoneNumber:_}:{sessionInfo:D,code:q}}toJSON(){const f={providerId:this.providerId};return this.params.phoneNumber&&(f.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(f.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(f.verificationCode=this.params.verificationCode),this.params.verificationId&&(f.verificationId=this.params.verificationId),f}static fromJSON(f){"string"==typeof f&&(f=JSON.parse(f));const{verificationId:_,verificationCode:D,phoneNumber:q,temporaryProof:se}=f;return D||_||q||se?new Zi({verificationId:_,verificationCode:D,phoneNumber:q,temporaryProof:se}):null}}class fi{constructor(f){var _,D,q,se,Pe,Ze;const yt=(0,K.zd)((0,K.pd)(f)),sn=null!==(_=yt.apiKey)&&void 0!==_?_:null,Dn=null!==(D=yt.oobCode)&&void 0!==D?D:null,hr=function eo(E){switch(E){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(q=yt.mode)&&void 0!==q?q:null);Oe(sn&&Dn&&hr,"argument-error"),this.apiKey=sn,this.operation=hr,this.code=Dn,this.continueUrl=null!==(se=yt.continueUrl)&&void 0!==se?se:null,this.languageCode=null!==(Pe=yt.languageCode)&&void 0!==Pe?Pe:null,this.tenantId=null!==(Ze=yt.tenantId)&&void 0!==Ze?Ze:null}static parseLink(f){const _=function Li(E){const f=(0,K.zd)((0,K.pd)(E)).link,_=f?(0,K.zd)((0,K.pd)(f)).deep_link_id:null,D=(0,K.zd)((0,K.pd)(E)).deep_link_id;return(D?(0,K.zd)((0,K.pd)(D)).link:null)||D||_||f||E}(f);try{return new fi(_)}catch{return null}}}let _s=(()=>{class E{constructor(){this.providerId=E.PROVIDER_ID}static credential(_,D){return ks._fromEmailAndPassword(_,D)}static credentialWithLink(_,D){const q=fi.parseLink(D);return Oe(q,"argument-error"),ks._fromEmailAndCode(_,q.code,q.tenantId)}}return E.PROVIDER_ID="password",E.EMAIL_PASSWORD_SIGN_IN_METHOD="password",E.EMAIL_LINK_SIGN_IN_METHOD="emailLink",E})();class Tr{constructor(f){this.providerId=f,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(f){this.defaultLanguageCode=f}setCustomParameters(f){return this.customParameters=f,this}getCustomParameters(){return this.customParameters}}class yo extends Tr{constructor(){super(...arguments),this.scopes=[]}addScope(f){return this.scopes.includes(f)||this.scopes.push(f),this}getScopes(){return[...this.scopes]}}class vn extends yo{static credentialFromJSON(f){const _="string"==typeof f?JSON.parse(f):f;return Oe("providerId"in _&&"signInMethod"in _,"argument-error"),mr._fromParams(_)}credential(f){return this._credential(Object.assign(Object.assign({},f),{nonce:f.rawNonce}))}_credential(f){return Oe(f.idToken||f.accessToken,"argument-error"),mr._fromParams(Object.assign(Object.assign({},f),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(f){return vn.oauthCredentialFromTaggedObject(f)}static credentialFromError(f){return vn.oauthCredentialFromTaggedObject(f.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:_,oauthAccessToken:D,oauthTokenSecret:q,pendingToken:se,nonce:Pe,providerId:Ze}=f;if(!D&&!q&&!_&&!se||!Ze)return null;try{return new vn(Ze)._credential({idToken:_,accessToken:D,nonce:Pe,pendingToken:se})}catch{return null}}}let Vi=(()=>{class E extends yo{constructor(){super("facebook.com")}static credential(_){return mr._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.FACEBOOK_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return E.credentialFromTaggedObject(_)}static credentialFromError(_){return E.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return E.credential(_.oauthAccessToken)}catch{return null}}}return E.FACEBOOK_SIGN_IN_METHOD="facebook.com",E.PROVIDER_ID="facebook.com",E})(),ys=(()=>{class E extends yo{constructor(){super("google.com"),this.addScope("profile")}static credential(_,D){return mr._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.GOOGLE_SIGN_IN_METHOD,idToken:_,accessToken:D})}static credentialFromResult(_){return E.credentialFromTaggedObject(_)}static credentialFromError(_){return E.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthIdToken:D,oauthAccessToken:q}=_;if(!D&&!q)return null;try{return E.credential(D,q)}catch{return null}}}return E.GOOGLE_SIGN_IN_METHOD="google.com",E.PROVIDER_ID="google.com",E})(),ko=(()=>{class E extends yo{constructor(){super("github.com")}static credential(_){return mr._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.GITHUB_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return E.credentialFromTaggedObject(_)}static credentialFromError(_){return E.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return E.credential(_.oauthAccessToken)}catch{return null}}}return E.GITHUB_SIGN_IN_METHOD="github.com",E.PROVIDER_ID="github.com",E})();class Ui extends xs{constructor(f,_){super(f,f),this.pendingToken=_}_getIdTokenResponse(f){return zi(f,this.buildRequest())}_linkToIdToken(f,_){const D=this.buildRequest();return D.idToken=_,zi(f,D)}_getReauthenticationResolver(f){const _=this.buildRequest();return _.autoCreate=!1,zi(f,_)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(f){const _="string"==typeof f?JSON.parse(f):f,{providerId:D,signInMethod:q,pendingToken:se}=_;return D&&q&&se&&D===q?new Ui(D,se):null}static _create(f,_){return new Ui(f,_)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Cs extends Tr{constructor(f){Oe(f.startsWith("saml."),"argument-error"),super(f)}static credentialFromResult(f){return Cs.samlCredentialFromTaggedObject(f)}static credentialFromError(f){return Cs.samlCredentialFromTaggedObject(f.customData||{})}static credentialFromJSON(f){const _=Ui.fromJSON(f);return Oe(_,"argument-error"),_}static samlCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{pendingToken:_,providerId:D}=f;if(!_||!D)return null;try{return Ui._create(D,_)}catch{return null}}}let Fo=(()=>{class E extends yo{constructor(){super("twitter.com")}static credential(_,D){return mr._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.TWITTER_SIGN_IN_METHOD,oauthToken:_,oauthTokenSecret:D})}static credentialFromResult(_){return E.credentialFromTaggedObject(_)}static credentialFromError(_){return E.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthAccessToken:D,oauthTokenSecret:q}=_;if(!D||!q)return null;try{return E.credential(D,q)}catch{return null}}}return E.TWITTER_SIGN_IN_METHOD="twitter.com",E.PROVIDER_ID="twitter.com",E})();function za(E,f){return Bi.apply(this,arguments)}function Bi(){return(Bi=(0,h.Z)(function*(E,f){return $t(E,"POST","/v1/accounts:signUp",Ge(E,f))})).apply(this,arguments)}class Ci{constructor(f){this.user=f.user,this.providerId=f.providerId,this._tokenResponse=f._tokenResponse,this.operationType=f.operationType}static _fromIdTokenResponse(f,_,D,q=!1){return(0,h.Z)(function*(){const se=yield oe._fromIdTokenResponse(f,D,q),Pe=Ga(D);return new Ci({user:se,providerId:Pe,_tokenResponse:D,operationType:_})})()}static _forOperation(f,_,D){return(0,h.Z)(function*(){yield f._updateTokensIfNecessary(D,!0);const q=Ga(D);return new Ci({user:f,providerId:q,_tokenResponse:D,operationType:_})})()}}function Ga(E){return E.providerId?E.providerId:"phoneNumber"in E?"phone":null}function au(E){return Lo.apply(this,arguments)}function Lo(){return(Lo=(0,h.Z)(function*(E){var f;if((0,W._isFirebaseServerApp)(E.app))return Promise.reject(Ie(E));const _=tr(E);if(yield _._initializationPromise,null!==(f=_.currentUser)&&void 0!==f&&f.isAnonymous)return new Ci({user:_.currentUser,providerId:null,operationType:"signIn"});const D=yield za(_,{returnSecureToken:!0}),q=yield Ci._fromIdTokenResponse(_,"signIn",D,!0);return yield _._updateCurrentUser(q.user),q})).apply(this,arguments)}class j extends K.ZR{constructor(f,_,D,q){var se;super(_.code,_.message),this.operationType=D,this.user=q,Object.setPrototypeOf(this,j.prototype),this.customData={appName:f.name,tenantId:null!==(se=f.tenantId)&&void 0!==se?se:void 0,_serverResponse:_.customData._serverResponse,operationType:D}}static _fromErrorAndOperation(f,_,D,q){return new j(f,_,D,q)}}function H(E,f,_,D){return("reauthenticate"===f?_._getReauthenticationResolver(E):_._getIdTokenResponse(E)).catch(se=>{throw"auth/multi-factor-auth-required"===se.code?j._fromErrorAndOperation(E,se,f,D):se})}function ae(E){return new Set(E.map(({providerId:f})=>f).filter(f=>!!f))}function b(E,f){return O.apply(this,arguments)}function O(){return O=(0,h.Z)(function*(E,f){const _=(0,K.m9)(E);yield de(!0,_,f);const{providerUserInfo:D}=yield function un(E,f){return an.apply(this,arguments)}(_.auth,{idToken:yield _.getIdToken(),deleteProvider:[f]}),q=ae(D||[]);return _.providerData=_.providerData.filter(se=>q.has(se.providerId)),q.has("phone")||(_.phoneNumber=null),yield _.auth._persistUserIfCurrent(_),_}),O.apply(this,arguments)}function C(E,f){return Z.apply(this,arguments)}function Z(){return(Z=(0,h.Z)(function*(E,f,_=!1){const D=yield qt(E,f._linkToIdToken(E.auth,yield E.getIdToken()),_);return Ci._forOperation(E,"link",D)})).apply(this,arguments)}function de(E,f,_){return tt.apply(this,arguments)}function tt(){return(tt=(0,h.Z)(function*(E,f,_){yield Ur(f);const q=!1===E?"provider-already-linked":"no-such-provider";Oe(ae(f.providerData).has(_)===E,f.auth,q)})).apply(this,arguments)}function pt(E,f){return ln.apply(this,arguments)}function ln(){return(ln=(0,h.Z)(function*(E,f,_=!1){const{auth:D}=E;if((0,W._isFirebaseServerApp)(D.app))return Promise.reject(Ie(D));const q="reauthenticate";try{const se=yield qt(E,H(D,q,f,E),_);Oe(se.idToken,D,"internal-error");const Pe=Ri(se.idToken);Oe(Pe,D,"internal-error");const{sub:Ze}=Pe;return Oe(E.uid===Ze,D,"user-mismatch"),Ci._forOperation(E,q,se)}catch(se){throw"auth/user-not-found"===se?.code&&ce(D,"user-mismatch"),se}})).apply(this,arguments)}function sr(E,f){return dr.apply(this,arguments)}function dr(){return(dr=(0,h.Z)(function*(E,f,_=!1){if((0,W._isFirebaseServerApp)(E.app))return Promise.reject(Ie(E));const D="signIn",q=yield H(E,D,f),se=yield Ci._fromIdTokenResponse(E,D,q);return _||(yield E._updateCurrentUser(se.user)),se})).apply(this,arguments)}function Dr(E,f){return nr.apply(this,arguments)}function nr(){return(nr=(0,h.Z)(function*(E,f){return sr(tr(E),f)})).apply(this,arguments)}function si(E,f){return Zr.apply(this,arguments)}function Zr(){return(Zr=(0,h.Z)(function*(E,f){const _=(0,K.m9)(E);return yield de(!1,_,f.providerId),C(_,f)})).apply(this,arguments)}function ss(E,f){return Br.apply(this,arguments)}function Br(){return(Br=(0,h.Z)(function*(E,f){return pt((0,K.m9)(E),f)})).apply(this,arguments)}function Ar(){return(Ar=(0,h.Z)(function*(E,f){return $t(E,"POST","/v1/accounts:signInWithCustomToken",Ge(E,f))})).apply(this,arguments)}function Fs(E,f){return vs.apply(this,arguments)}function vs(){return vs=(0,h.Z)(function*(E,f){if((0,W._isFirebaseServerApp)(E.app))return Promise.reject(Ie(E));const _=tr(E),D=yield function bi(E,f){return Ar.apply(this,arguments)}(_,{token:f,returnSecureToken:!0}),q=yield Ci._fromIdTokenResponse(_,"signIn",D);return yield _._updateCurrentUser(q.user),q}),vs.apply(this,arguments)}class oi{constructor(f,_){this.factorId=f,this.uid=_.mfaEnrollmentId,this.enrollmentTime=new Date(_.enrolledAt).toUTCString(),this.displayName=_.displayName}static _fromServerResponse(f,_){return"phoneInfo"in _?to._fromServerResponse(f,_):"totpInfo"in _?bs._fromServerResponse(f,_):ce(f,"internal-error")}}class to extends oi{constructor(f){super("phone",f),this.phoneNumber=f.phoneInfo}static _fromServerResponse(f,_){return new to(_)}}class bs extends oi{constructor(f){super("totp",f)}static _fromServerResponse(f,_){return new bs(_)}}function Si(E,f,_){var D;Oe((null===(D=_.url)||void 0===D?void 0:D.length)>0,E,"invalid-continue-uri"),Oe(typeof _.dynamicLinkDomain>"u"||_.dynamicLinkDomain.length>0,E,"invalid-dynamic-link-domain"),f.continueUrl=_.url,f.dynamicLinkDomain=_.dynamicLinkDomain,f.canHandleCodeInApp=_.handleCodeInApp,_.iOS&&(Oe(_.iOS.bundleId.length>0,E,"missing-ios-bundle-id"),f.iOSBundleId=_.iOS.bundleId),_.android&&(Oe(_.android.packageName.length>0,E,"missing-android-pkg-name"),f.androidInstallApp=_.android.installApp,f.androidMinimumVersionCode=_.android.minimumVersion,f.androidPackageName=_.android.packageName)}function Ia(E){return Ls.apply(this,arguments)}function Ls(){return(Ls=(0,h.Z)(function*(E){const f=tr(E);f._getPasswordPolicyInternal()&&(yield f._updatePasswordPolicy())})).apply(this,arguments)}function wa(E,f,_){return _r.apply(this,arguments)}function _r(){return(_r=(0,h.Z)(function*(E,f,_){const D=tr(E),q={requestType:"PASSWORD_RESET",email:f,clientType:"CLIENT_TYPE_WEB"};_&&Si(D,q,_),yield fs(D,q,"getOobCode",Er)})).apply(this,arguments)}function Vo(E,f,_){return Xo.apply(this,arguments)}function Xo(){return Xo=(0,h.Z)(function*(E,f,_){yield zs((0,K.m9)(E),{oobCode:f,newPassword:_}).catch(function(){var D=(0,h.Z)(function*(q){throw"auth/password-does-not-meet-requirements"===q.code&&Ia(E),q});return function(q){return D.apply(this,arguments)}}())}),Xo.apply(this,arguments)}function Vs(E,f){return ea.apply(this,arguments)}function ea(){return ea=(0,h.Z)(function*(E,f){yield function oo(E,f){return Xs.apply(this,arguments)}((0,K.m9)(E),{oobCode:f})}),ea.apply(this,arguments)}function Pa(E,f){return ta.apply(this,arguments)}function ta(){return(ta=(0,h.Z)(function*(E,f){const _=(0,K.m9)(E),D=yield zs(_,{oobCode:f}),q=D.requestType;switch(Oe(q,_,"internal-error"),q){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Oe(D.newEmail,_,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Oe(D.mfaInfo,_,"internal-error");default:Oe(D.email,_,"internal-error")}let se=null;return D.mfaInfo&&(se=oi._fromServerResponse(tr(_),D.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===D.requestType?D.newEmail:D.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===D.requestType?D.email:D.newEmail)||null,multiFactorInfo:se},operation:q}})).apply(this,arguments)}function Ma(E,f){return vo.apply(this,arguments)}function vo(){return(vo=(0,h.Z)(function*(E,f){const{data:_}=yield Pa((0,K.m9)(E),f);return _.email})).apply(this,arguments)}function os(E,f,_){return uo.apply(this,arguments)}function uo(){return(uo=(0,h.Z)(function*(E,f,_){if((0,W._isFirebaseServerApp)(E.app))return Promise.reject(Ie(E));const D=tr(E),Pe=yield fs(D,{returnSecureToken:!0,email:f,password:_,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",za).catch(yt=>{throw"auth/password-does-not-meet-requirements"===yt.code&&Ia(E),yt}),Ze=yield Ci._fromIdTokenResponse(D,"signIn",Pe);return yield D._updateCurrentUser(Ze.user),Ze})).apply(this,arguments)}function Ss(E,f,_){return(0,W._isFirebaseServerApp)(E.app)?Promise.reject(Ie(E)):Dr((0,K.m9)(E),_s.credential(f,_)).catch(function(){var D=(0,h.Z)(function*(q){throw"auth/password-does-not-meet-requirements"===q.code&&Ia(E),q});return function(q){return D.apply(this,arguments)}}())}function Wa(E,f,_){return na.apply(this,arguments)}function na(){return(na=(0,h.Z)(function*(E,f,_){const D=tr(E),q={requestType:"EMAIL_SIGNIN",email:f,clientType:"CLIENT_TYPE_WEB"};(function se(Pe,Ze){Oe(Ze.handleCodeInApp,D,"argument-error"),Ze&&Si(D,Pe,Ze)})(q,_),yield fs(D,q,"getOobCode",gs)})).apply(this,arguments)}function Na(E,f){const _=fi.parseLink(f);return"EMAIL_SIGNIN"===_?.operation}function ha(E,f,_){return Au.apply(this,arguments)}function Au(){return(Au=(0,h.Z)(function*(E,f,_){if((0,W._isFirebaseServerApp)(E.app))return Promise.reject(Ie(E));const D=(0,K.m9)(E),q=_s.credentialWithLink(f,_||Gt());return Oe(q._tenantId===(D.tenantId||null),D,"tenant-id-mismatch"),Dr(D,q)})).apply(this,arguments)}function ra(){return(ra=(0,h.Z)(function*(E,f){return rt(E,"POST","/v1/accounts:createAuthUri",Ge(E,f))})).apply(this,arguments)}function A(E,f){return J.apply(this,arguments)}function J(){return J=(0,h.Z)(function*(E,f){const D={identifier:f,continueUri:Jt()?Gt():"http://localhost"},{signinMethods:q}=yield function no(E,f){return ra.apply(this,arguments)}((0,K.m9)(E),D);return q||[]}),J.apply(this,arguments)}function L(E,f){return Q.apply(this,arguments)}function Q(){return Q=(0,h.Z)(function*(E,f){const _=(0,K.m9)(E),q={requestType:"VERIFY_EMAIL",idToken:yield E.getIdToken()};f&&Si(_.auth,q,f);const{email:se}=yield function Lt(E,f){return fn.apply(this,arguments)}(_.auth,q);se!==E.email&&(yield E.reload())}),Q.apply(this,arguments)}function ge(E,f,_){return Ye.apply(this,arguments)}function Ye(){return Ye=(0,h.Z)(function*(E,f,_){const D=(0,K.m9)(E),se={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield E.getIdToken(),newEmail:f};_&&Si(D.auth,se,_);const{email:Pe}=yield function Ki(E,f){return er.apply(this,arguments)}(D.auth,se);Pe!==E.email&&(yield E.reload())}),Ye.apply(this,arguments)}function Xt(){return(Xt=(0,h.Z)(function*(E,f){return rt(E,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Vr(E,f){return yr.apply(this,arguments)}function yr(){return yr=(0,h.Z)(function*(E,{displayName:f,photoURL:_}){if(void 0===f&&void 0===_)return;const D=(0,K.m9)(E),se={idToken:yield D.getIdToken(),displayName:f,photoUrl:_,returnSecureToken:!0},Pe=yield qt(D,function lt(E,f){return Xt.apply(this,arguments)}(D.auth,se));D.displayName=Pe.displayName||null,D.photoURL=Pe.photoUrl||null;const Ze=D.providerData.find(({providerId:yt})=>"password"===yt);Ze&&(Ze.displayName=D.displayName,Ze.photoURL=D.photoURL),yield D._updateTokensIfNecessary(Pe)}),yr.apply(this,arguments)}function jr(E,f){const _=(0,K.m9)(E);return(0,W._isFirebaseServerApp)(_.auth.app)?Promise.reject(Ie(_.auth)):Qr(_,f,null)}function pn(E,f){return Qr((0,K.m9)(E),null,f)}function Qr(E,f,_){return rr.apply(this,arguments)}function rr(){return rr=(0,h.Z)(function*(E,f,_){const{auth:D}=E,se={idToken:yield E.getIdToken(),returnSecureToken:!0};f&&(se.email=f),_&&(se.password=_);const Pe=yield qt(E,function ki(E,f){return Nr.apply(this,arguments)}(D,se));yield E._updateTokensIfNecessary(Pe,!0)}),rr.apply(this,arguments)}class Us{constructor(f,_,D={}){this.isNewUser=f,this.providerId=_,this.profile=D}}class dt extends Us{constructor(f,_,D,q){super(f,_,D),this.username=q}}class $r extends Us{constructor(f,_){super(f,"facebook.com",_)}}class Jr extends dt{constructor(f,_){super(f,"github.com",_,"string"==typeof _?.login?_?.login:null)}}class Qo extends Us{constructor(f,_){super(f,"google.com",_)}}class Rt extends dt{constructor(f,_,D){super(f,"twitter.com",_,D)}}function en(E){const{user:f,_tokenResponse:_}=E;return f.isAnonymous&&!_?{providerId:null,isNewUser:!1,profile:null}:function vi(E){var f,_;if(!E)return null;const{providerId:D}=E,q=E.rawUserInfo?JSON.parse(E.rawUserInfo):{},se=E.isNewUser||"identitytoolkit#SignupNewUserResponse"===E.kind;if(!D&&E?.idToken){const Pe=null===(_=null===(f=Ri(E.idToken))||void 0===f?void 0:f.firebase)||void 0===_?void 0:_.sign_in_provider;if(Pe)return new Us(se,"anonymous"!==Pe&&"custom"!==Pe?Pe:null)}if(!D)return null;switch(D){case"facebook.com":return new $r(se,q);case"github.com":return new Jr(se,q);case"google.com":return new Qo(se,q);case"twitter.com":return new Rt(se,q,E.screenName||null);case"custom":case"anonymous":return new Us(se,null);default:return new Us(se,D,q)}}(_)}class ia{constructor(f,_,D){this.type=f,this.credential=_,this.user=D}static _fromIdtoken(f,_){return new ia("enroll",f,_)}static _fromMfaPendingCredential(f){return new ia("signin",f)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(f){var _,D;if(f?.multiFactorSession){if(null!==(_=f.multiFactorSession)&&void 0!==_&&_.pendingCredential)return ia._fromMfaPendingCredential(f.multiFactorSession.pendingCredential);if(null!==(D=f.multiFactorSession)&&void 0!==D&&D.idToken)return ia._fromIdtoken(f.multiFactorSession.idToken)}return null}}class Tl{constructor(f,_,D){this.session=f,this.hints=_,this.signInResolver=D}static _fromError(f,_){const D=tr(f),q=_.customData._serverResponse,se=(q.mfaInfo||[]).map(Ze=>oi._fromServerResponse(D,Ze));Oe(q.mfaPendingCredential,D,"internal-error");const Pe=ia._fromMfaPendingCredential(q.mfaPendingCredential);return new Tl(Pe,se,function(){var Ze=(0,h.Z)(function*(yt){const sn=yield yt._process(D,Pe);delete q.mfaInfo,delete q.mfaPendingCredential;const Dn=Object.assign(Object.assign({},q),{idToken:sn.idToken,refreshToken:sn.refreshToken});switch(_.operationType){case"signIn":const hr=yield Ci._fromIdTokenResponse(D,_.operationType,Dn);return yield D._updateCurrentUser(hr.user),hr;case"reauthenticate":return Oe(_.user,D,"internal-error"),Ci._forOperation(_.user,_.operationType,Dn);default:ce(D,"internal-error")}});return function(yt){return Ze.apply(this,arguments)}}())}resolveSignIn(f){var _=this;return(0,h.Z)(function*(){return _.signInResolver(f)})()}}function Hu(E,f){var _;const D=(0,K.m9)(E),q=f;return Oe(f.customData.operationType,D,"argument-error"),Oe(null===(_=q.customData._serverResponse)||void 0===_?void 0:_.mfaPendingCredential,D,"argument-error"),Tl._fromError(D,q)}class Eo{constructor(f){this.user=f,this.enrolledFactors=[],f._onReload(_=>{_.mfaInfo&&(this.enrolledFactors=_.mfaInfo.map(D=>oi._fromServerResponse(f.auth,D)))})}static _fromUser(f){return new Eo(f)}getSession(){var f=this;return(0,h.Z)(function*(){return ia._fromIdtoken(yield f.user.getIdToken(),f.user)})()}enroll(f,_){var D=this;return(0,h.Z)(function*(){const q=f,se=yield D.getSession(),Pe=yield qt(D.user,q._process(D.user.auth,se,_));return yield D.user._updateTokensIfNecessary(Pe),D.user.reload()})()}unenroll(f){var _=this;return(0,h.Z)(function*(){const D="string"==typeof f?f:f.uid,q=yield _.user.getIdToken();try{const se=yield qt(_.user,function hn(E,f){return rt(E,"POST","/v2/accounts/mfaEnrollment:withdraw",Ge(E,f))}(_.user.auth,{idToken:q,mfaEnrollmentId:D}));_.enrolledFactors=_.enrolledFactors.filter(({uid:Pe})=>Pe!==D),yield _.user._updateTokensIfNecessary(se),yield _.user.reload()}catch(se){throw se}})()}}const qn=new WeakMap;function qa(E){const f=(0,K.m9)(E);return qn.has(f)||qn.set(f,Eo._fromUser(f)),qn.get(f)}const pi="__sak";class Ut{constructor(f,_){this.storageRetriever=f,this.type=_}_isAvailable(){try{return this.storage?(this.storage.setItem(pi,"1"),this.storage.removeItem(pi),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(f,_){return this.storage.setItem(f,JSON.stringify(_)),Promise.resolve()}_get(f){const _=this.storage.getItem(f);return Promise.resolve(_?JSON.parse(_):null)}_remove(f){return this.storage.removeItem(f),Promise.resolve()}get storage(){return this.storageRetriever()}}const Oa=(()=>{class E extends Ut{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(_,D)=>this.onStorageEvent(_,D),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Io(){const E=(0,K.z$)();return ni(E)||ri(E)}()&&function _n(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Dt(),this._shouldAllowMigration=!0}forAllChangedKeys(_){for(const D of Object.keys(this.listeners)){const q=this.storage.getItem(D),se=this.localCache[D];q!==se&&_(D,se,q)}}onStorageEvent(_,D=!1){if(!_.key)return void this.forAllChangedKeys((Ze,yt,sn)=>{this.notifyListeners(Ze,sn)});const q=_.key;if(D?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Ze=this.storage.getItem(q);if(_.newValue!==Ze)null!==_.newValue?this.storage.setItem(q,_.newValue):this.storage.removeItem(q);else if(this.localCache[q]===_.newValue&&!D)return}const se=()=>{const Ze=this.storage.getItem(q);!D&&this.localCache[q]===Ze||this.notifyListeners(q,Ze)},Pe=this.storage.getItem(q);!function st(){return(0,K.w1)()&&10===document.documentMode}()||Pe===_.newValue||_.newValue===_.oldValue?se():setTimeout(se,10)}notifyListeners(_,D){this.localCache[_]=D;const q=this.listeners[_];if(q)for(const se of Array.from(q))se(D&&JSON.parse(D))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((_,D,q)=>{this.onStorageEvent(new StorageEvent("storage",{key:_,oldValue:D,newValue:q}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(_,D){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[_]||(this.listeners[_]=new Set,this.localCache[_]=this.storage.getItem(_)),this.listeners[_].add(D)}_removeListener(_,D){this.listeners[_]&&(this.listeners[_].delete(D),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(_,D){var q=()=>super._set,se=this;return(0,h.Z)(function*(){yield q().call(se,_,D),se.localCache[_]=JSON.stringify(D)})()}_get(_){var D=()=>super._get,q=this;return(0,h.Z)(function*(){const se=yield D().call(q,_);return q.localCache[_]=JSON.stringify(se),se})()}_remove(_){var D=()=>super._remove,q=this;return(0,h.Z)(function*(){yield D().call(q,_),delete q.localCache[_]})()}}return E.type="LOCAL",E})(),ht=(()=>{class E extends Ut{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(_,D){}_removeListener(_,D){}}return E.type="SESSION",E})();let Dl=(()=>{class E{constructor(_){this.eventTarget=_,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(_){const D=this.receivers.find(se=>se.isListeningto(_));if(D)return D;const q=new E(_);return this.receivers.push(q),q}isListeningto(_){return this.eventTarget===_}handleEvent(_){var D=this;return(0,h.Z)(function*(){const q=_,{eventId:se,eventType:Pe,data:Ze}=q.data,yt=D.handlersMap[Pe];if(!yt?.size)return;q.ports[0].postMessage({status:"ack",eventId:se,eventType:Pe});const sn=Array.from(yt).map(function(){var hr=(0,h.Z)(function*(so){return so(q.origin,Ze)});return function(so){return hr.apply(this,arguments)}}()),Dn=yield function xr(E){return Promise.all(E.map(function(){var f=(0,h.Z)(function*(_){try{return{fulfilled:!0,value:yield _}}catch(D){return{fulfilled:!1,reason:D}}});return function(_){return f.apply(this,arguments)}}()))}(sn);q.ports[0].postMessage({status:"done",eventId:se,eventType:Pe,response:Dn})})()}_subscribe(_,D){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[_]||(this.handlersMap[_]=new Set),this.handlersMap[_].add(D)}_unsubscribe(_,D){this.handlersMap[_]&&D&&this.handlersMap[_].delete(D),(!D||0===this.handlersMap[_].size)&&delete this.handlersMap[_],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return E.receivers=[],E})();function Ws(E="",f=10){let _="";for(let D=0;D<f;D++)_+=Math.floor(10*Math.random());return E+_}class Qi{constructor(f){this.target=f,this.handlers=new Set}removeMessageHandler(f){f.messageChannel&&(f.messageChannel.port1.removeEventListener("message",f.onMessage),f.messageChannel.port1.close()),this.handlers.delete(f)}_send(f,_,D=50){var q=this;return(0,h.Z)(function*(){const se=typeof MessageChannel<"u"?new MessageChannel:null;if(!se)throw new Error("connection_unavailable");let Pe,Ze;return new Promise((yt,sn)=>{const Dn=Ws("",20);se.port1.start();const hr=setTimeout(()=>{sn(new Error("unsupported_event"))},D);Ze={messageChannel:se,onMessage(so){const vu=so;if(vu.data.eventId===Dn)switch(vu.data.status){case"ack":clearTimeout(hr),Pe=setTimeout(()=>{sn(new Error("timeout"))},3e3);break;case"done":clearTimeout(Pe),yt(vu.data.response);break;default:clearTimeout(hr),clearTimeout(Pe),sn(new Error("invalid_response"))}}},q.handlers.add(Ze),se.port1.addEventListener("message",Ze.onMessage),q.target.postMessage({eventType:f,eventId:Dn,data:_},[se.port2])}).finally(()=>{Ze&&q.removeMessageHandler(Ze)})})()}}function Gi(){return window}function as(){return typeof Gi().WorkerGlobalScope<"u"&&"function"==typeof Gi().importScripts}function je(){return(je=(0,h.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Wu="firebaseLocalStorageDb",Ei="firebaseLocalStorage",qu="fbase_key";class Es{constructor(f){this.request=f}toPromise(){return new Promise((f,_)=>{this.request.addEventListener("success",()=>{f(this.request.result)}),this.request.addEventListener("error",()=>{_(this.request.error)})})}}function wo(E,f){return E.transaction([Ei],f?"readwrite":"readonly").objectStore(Ei)}function cu(){const E=indexedDB.open(Wu,1);return new Promise((f,_)=>{E.addEventListener("error",()=>{_(E.error)}),E.addEventListener("upgradeneeded",()=>{const D=E.result;try{D.createObjectStore(Ei,{keyPath:qu})}catch(q){_(q)}}),E.addEventListener("success",(0,h.Z)(function*(){const D=E.result;D.objectStoreNames.contains(Ei)?f(D):(D.close(),yield function Al(){const E=indexedDB.deleteDatabase(Wu);return new Es(E).toPromise()}(),f(yield cu()))}))})}function Ku(E,f,_){return lo.apply(this,arguments)}function lo(){return(lo=(0,h.Z)(function*(E,f,_){const D=wo(E,!0).put({[qu]:f,value:_});return new Es(D).toPromise()})).apply(this,arguments)}function Da(){return(Da=(0,h.Z)(function*(E,f){const _=wo(E,!1).get(f),D=yield new Es(_).toPromise();return void 0===D?null:D.value})).apply(this,arguments)}function v(E,f){const _=wo(E,!0).delete(f);return new Es(_).toPromise()}const B=(()=>{class E{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var _=this;return(0,h.Z)(function*(){return _.db||(_.db=yield cu()),_.db})()}_withRetries(_){var D=this;return(0,h.Z)(function*(){let q=0;for(;;)try{const se=yield D._openDb();return yield _(se)}catch(se){if(q++>3)throw se;D.db&&(D.db.close(),D.db=void 0)}})()}initializeServiceWorkerMessaging(){var _=this;return(0,h.Z)(function*(){return as()?_.initializeReceiver():_.initializeSender()})()}initializeReceiver(){var _=this;return(0,h.Z)(function*(){_.receiver=Dl._getInstance(function ro(){return as()?self:null}()),_.receiver._subscribe("keyChanged",function(){var D=(0,h.Z)(function*(q,se){return{keyProcessed:(yield _._poll()).includes(se.key)}});return function(q,se){return D.apply(this,arguments)}}()),_.receiver._subscribe("ping",function(){var D=(0,h.Z)(function*(q,se){return["keyChanged"]});return function(q,se){return D.apply(this,arguments)}}())})()}initializeSender(){var _=this;return(0,h.Z)(function*(){var D,q;if(_.activeServiceWorker=yield function lu(){return je.apply(this,arguments)}(),!_.activeServiceWorker)return;_.sender=new Qi(_.activeServiceWorker);const se=yield _.sender._send("ping",{},800);se&&null!==(D=se[0])&&void 0!==D&&D.fulfilled&&null!==(q=se[0])&&void 0!==q&&q.value.includes("keyChanged")&&(_.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(_){var D=this;return(0,h.Z)(function*(){if(D.sender&&D.activeServiceWorker&&function Gu(){var E;return(null===(E=navigator?.serviceWorker)||void 0===E?void 0:E.controller)||null}()===D.activeServiceWorker)try{yield D.sender._send("keyChanged",{key:_},D.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,h.Z)(function*(){try{if(!indexedDB)return!1;const _=yield cu();return yield Ku(_,pi,"1"),yield v(_,pi),!0}catch{}return!1})()}_withPendingWrite(_){var D=this;return(0,h.Z)(function*(){D.pendingWrites++;try{yield _()}finally{D.pendingWrites--}})()}_set(_,D){var q=this;return(0,h.Z)(function*(){return q._withPendingWrite((0,h.Z)(function*(){return yield q._withRetries(se=>Ku(se,_,D)),q.localCache[_]=D,q.notifyServiceWorker(_)}))})()}_get(_){var D=this;return(0,h.Z)(function*(){const q=yield D._withRetries(se=>function du(E,f){return Da.apply(this,arguments)}(se,_));return D.localCache[_]=q,q})()}_remove(_){var D=this;return(0,h.Z)(function*(){return D._withPendingWrite((0,h.Z)(function*(){return yield D._withRetries(q=>v(q,_)),delete D.localCache[_],D.notifyServiceWorker(_)}))})()}_poll(){var _=this;return(0,h.Z)(function*(){const D=yield _._withRetries(Pe=>{const Ze=wo(Pe,!1).getAll();return new Es(Ze).toPromise()});if(!D)return[];if(0!==_.pendingWrites)return[];const q=[],se=new Set;if(0!==D.length)for(const{fbase_key:Pe,value:Ze}of D)se.add(Pe),JSON.stringify(_.localCache[Pe])!==JSON.stringify(Ze)&&(_.notifyListeners(Pe,Ze),q.push(Pe));for(const Pe of Object.keys(_.localCache))_.localCache[Pe]&&!se.has(Pe)&&(_.notifyListeners(Pe,null),q.push(Pe));return q})()}notifyListeners(_,D){this.localCache[_]=D;const q=this.listeners[_];if(q)for(const se of Array.from(q))se(D)}startPolling(){var _=this;this.stopPolling(),this.pollTimer=setInterval((0,h.Z)(function*(){return _._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(_,D){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[_]||(this.listeners[_]=new Set,this._get(_)),this.listeners[_].add(D)}_removeListener(_,D){this.listeners[_]&&(this.listeners[_].delete(D),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return E.type="LOCAL",E})(),jn=1e12;class Ii{constructor(f){this.auth=f,this.counter=jn,this._widgets=new Map}render(f,_){const D=this.counter;return this._widgets.set(D,new On(f,this.auth.name,_||{})),this.counter++,D}reset(f){var _;const D=f||jn;null===(_=this._widgets.get(D))||void 0===_||_.delete(),this._widgets.delete(D)}getResponse(f){var _;return(null===(_=this._widgets.get(f||jn))||void 0===_?void 0:_.getResponse())||""}execute(f){var _=this;return(0,h.Z)(function*(){var D;return null===(D=_._widgets.get(f||jn))||void 0===D||D.execute(),""})()}}class On{constructor(f,_,D){this.params=D,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const q="string"==typeof f?document.getElementById(f):f;Oe(q,"argument-error",{appName:_}),this.container=q,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Ps(E){const f=[],_="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let D=0;D<E;D++)f.push(_.charAt(Math.floor(62*Math.random())));return f.join("")}(50);const{callback:f,"expired-callback":_}=this.params;if(f)try{f(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,_)try{_()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Xr=cr("rcb"),xa=new Ct(3e4,6e4);class bu{constructor(){var f;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(f=Gi().grecaptcha)||void 0===f||!f.render)}load(f,_=""){return Oe(function Bo(E){return E.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(E)}(_),f,"argument-error"),this.shouldResolveImmediately(_)&&xt(Gi().grecaptcha)?Promise.resolve(Gi().grecaptcha):new Promise((D,q)=>{const se=Gi().setTimeout(()=>{q(Be(f,"network-request-failed"))},xa.get());Gi()[Xr]=()=>{Gi().clearTimeout(se),delete Gi()[Xr];const Ze=Gi().grecaptcha;if(!Ze||!xt(Ze))return void q(Be(f,"internal-error"));const yt=Ze.render;Ze.render=(sn,Dn)=>{const hr=yt(sn,Dn);return this.counter++,hr},this.hostLanguage=_,D(Ze)},Qs(`${function Ys(){return Oi.recaptchaV2Script}()}?${(0,K.xO)({onload:Xr,render:"explicit",hl:_})}`).catch(()=>{clearTimeout(se),q(Be(f,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(f){var _;return!(null===(_=Gi().grecaptcha)||void 0===_||!_.render)&&(f===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class jo{load(f){return(0,h.Z)(function*(){return new Ii(f)})()}clearedOneInstance(){}}const io="recaptcha",nc={theme:"light",type:"image"};class Zu{constructor(f,_,D=Object.assign({},nc)){this.parameters=D,this.type=io,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=tr(f),this.isInvisible="invisible"===this.parameters.size,Oe(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const q="string"==typeof _?document.getElementById(_):_;Oe(q,this.auth,"argument-error"),this.container=q,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new jo:new bu,this.validateStartingState()}verify(){var f=this;return(0,h.Z)(function*(){f.assertNotDestroyed();const _=yield f.render(),D=f.getAssertedRecaptcha();return D.getResponse(_)||new Promise(se=>{const Pe=Ze=>{Ze&&(f.tokenChangeListeners.delete(Pe),se(Ze))};f.tokenChangeListeners.add(Pe),f.isInvisible&&D.execute(_)})})()}render(){try{this.assertNotDestroyed()}catch(f){return Promise.reject(f)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(f=>{throw this.renderPromise=null,f})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(f=>{this.container.removeChild(f)})}validateStartingState(){Oe(!this.parameters.sitekey,this.auth,"argument-error"),Oe(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Oe(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(f){return _=>{if(this.tokenChangeListeners.forEach(D=>D(_)),"function"==typeof f)f(_);else if("string"==typeof f){const D=Gi()[f];"function"==typeof D&&D(_)}}}assertNotDestroyed(){Oe(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var f=this;return(0,h.Z)(function*(){if(yield f.init(),!f.widgetId){let _=f.container;if(!f.isInvisible){const D=document.createElement("div");_.appendChild(D),_=D}f.widgetId=f.getAssertedRecaptcha().render(_,f.parameters)}return f.widgetId})()}init(){var f=this;return(0,h.Z)(function*(){Oe(Jt()&&!as(),f.auth,"internal-error"),yield function oa(){let E=null;return new Promise(f=>{"complete"!==document.readyState?(E=()=>f(),window.addEventListener("load",E)):f()}).catch(f=>{throw E&&window.removeEventListener("load",E),f})}(),f.recaptcha=yield f._recaptchaLoader.load(f.auth,f.auth.languageCode||void 0);const _=yield function Ir(E){return Vn.apply(this,arguments)}(f.auth);Oe(_,f.auth,"internal-error"),f.parameters.sitekey=_})()}getAssertedRecaptcha(){return Oe(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Ka{constructor(f,_){this.verificationId=f,this.onConfirmation=_}confirm(f){const _=Zi._fromVerification(this.verificationId,f);return this.onConfirmation(_)}}function qs(E,f,_){return hu.apply(this,arguments)}function hu(){return(hu=(0,h.Z)(function*(E,f,_){if((0,W._isFirebaseServerApp)(E.app))return Promise.reject(Ie(E));const D=tr(E),q=yield fa(D,f,(0,K.m9)(_));return new Ka(q,se=>Dr(D,se))})).apply(this,arguments)}function fu(E,f,_){return Aa.apply(this,arguments)}function Aa(){return(Aa=(0,h.Z)(function*(E,f,_){const D=(0,K.m9)(E);yield de(!1,D,"phone");const q=yield fa(D.auth,f,(0,K.m9)(_));return new Ka(q,se=>si(D,se))})).apply(this,arguments)}function Ca(E,f,_){return Yi.apply(this,arguments)}function Yi(){return(Yi=(0,h.Z)(function*(E,f,_){const D=(0,K.m9)(E);if((0,W._isFirebaseServerApp)(D.auth.app))return Promise.reject(Ie(D.auth));const q=yield fa(D.auth,f,(0,K.m9)(_));return new Ka(q,se=>ss(D,se))})).apply(this,arguments)}function fa(E,f,_){return To.apply(this,arguments)}function To(){return To=(0,h.Z)(function*(E,f,_){var D;const q=yield _.verify();try{let se;if(Oe("string"==typeof q,E,"argument-error"),Oe(_.type===io,E,"argument-error"),se="string"==typeof f?{phoneNumber:f}:f,"session"in se){const Pe=se.session;if("phoneNumber"in se)return Oe("enroll"===Pe.type,E,"internal-error"),(yield function Fn(E,f){return rt(E,"POST","/v2/accounts/mfaEnrollment:start",Ge(E,f))}(E,{idToken:Pe.credential,phoneEnrollmentInfo:{phoneNumber:se.phoneNumber,recaptchaToken:q}})).phoneSessionInfo.sessionInfo;{Oe("signin"===Pe.type,E,"internal-error");const Ze=(null===(D=se.multiFactorHint)||void 0===D?void 0:D.uid)||se.multiFactorUid;return Oe(Ze,E,"missing-multi-factor-info"),(yield function ne(E,f){return rt(E,"POST","/v2/accounts/mfaSignIn:start",Ge(E,f))}(E,{mfaPendingCredential:Pe.credential,mfaEnrollmentId:Ze,phoneSignInInfo:{recaptchaToken:q}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Pe}=yield function Or(E,f){return _i.apply(this,arguments)}(E,{phoneNumber:se.phoneNumber,recaptchaToken:q});return Pe}}finally{_._reset()}}),To.apply(this,arguments)}function Su(E,f){return wi.apply(this,arguments)}function wi(){return(wi=(0,h.Z)(function*(E,f){const _=(0,K.m9)(E);if((0,W._isFirebaseServerApp)(_.auth.app))return Promise.reject(Ie(_.auth));yield C(_,f)})).apply(this,arguments)}let rc=(()=>{class E{constructor(_){this.providerId=E.PROVIDER_ID,this.auth=tr(_)}verifyPhoneNumber(_,D){return fa(this.auth,_,(0,K.m9)(D))}static credential(_,D){return Zi._fromVerification(_,D)}static credentialFromResult(_){return E.credentialFromTaggedObject(_)}static credentialFromError(_){return E.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{phoneNumber:D,temporaryProof:q}=_;return D&&q?Zi._fromTokenResponse(D,q):null}}return E.PROVIDER_ID="phone",E.PHONE_SIGN_IN_METHOD="phone",E})();function ji(E,f){return f?at(f):(Oe(E._popupRedirectResolver,E,"argument-error"),E._popupRedirectResolver)}class ai extends xs{constructor(f){super("custom","custom"),this.params=f}_getIdTokenResponse(f){return zi(f,this._buildIdpRequest())}_linkToIdToken(f,_){return zi(f,this._buildIdpRequest(_))}_getReauthenticationResolver(f){return zi(f,this._buildIdpRequest())}_buildIdpRequest(f){const _={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return f&&(_.idToken=f),_}}function Hc(E){return sr(E.auth,new ai(E),E.bypassAuthState)}function Za(E){const{auth:f,user:_}=E;return Oe(_,f,"internal-error"),pt(_,new ai(E),E.bypassAuthState)}function $o(E){return Ru.apply(this,arguments)}function Ru(){return(Ru=(0,h.Z)(function*(E){const{auth:f,user:_}=E;return Oe(_,f,"internal-error"),C(_,new ai(E),E.bypassAuthState)})).apply(this,arguments)}class Qu{constructor(f,_,D,q,se=!1){this.auth=f,this.resolver=D,this.user=q,this.bypassAuthState=se,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(_)?_:[_]}execute(){var f=this;return new Promise(function(){var _=(0,h.Z)(function*(D,q){f.pendingPromise={resolve:D,reject:q};try{f.eventManager=yield f.resolver._initialize(f.auth),yield f.onExecution(),f.eventManager.registerConsumer(f)}catch(se){f.reject(se)}});return function(D,q){return _.apply(this,arguments)}}())}onAuthEvent(f){var _=this;return(0,h.Z)(function*(){const{urlResponse:D,sessionId:q,postBody:se,tenantId:Pe,error:Ze,type:yt}=f;if(Ze)return void _.reject(Ze);const sn={auth:_.auth,requestUri:D,sessionId:q,tenantId:Pe||void 0,postBody:se||void 0,user:_.user,bypassAuthState:_.bypassAuthState};try{_.resolve(yield _.getIdpTask(yt)(sn))}catch(Dn){_.reject(Dn)}})()}onError(f){this.reject(f)}getIdpTask(f){switch(f){case"signInViaPopup":case"signInViaRedirect":return Hc;case"linkViaPopup":case"linkViaRedirect":return $o;case"reauthViaPopup":case"reauthViaRedirect":return Za;default:ce(this.auth,"internal-error")}}resolve(f){ft(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(f),this.unregisterAndCleanUp()}reject(f){ft(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(f),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Ji=new Ct(2e3,1e4);function ic(E,f,_){return Ho.apply(this,arguments)}function Ho(){return(Ho=(0,h.Z)(function*(E,f,_){if((0,W._isFirebaseServerApp)(E.app))return Promise.reject(Be(E,"operation-not-supported-in-this-environment"));const D=tr(E);Je(E,f,Tr);const q=ji(D,_);return new ka(D,"signInViaPopup",f,q).executeNotNull()})).apply(this,arguments)}function $i(E,f,_){return Do.apply(this,arguments)}function Do(){return(Do=(0,h.Z)(function*(E,f,_){const D=(0,K.m9)(E);if((0,W._isFirebaseServerApp)(D.auth.app))return Promise.reject(Be(D.auth,"operation-not-supported-in-this-environment"));Je(D.auth,f,Tr);const q=ji(D.auth,_);return new ka(D.auth,"reauthViaPopup",f,q,D).executeNotNull()})).apply(this,arguments)}function sc(E,f,_){return Qa.apply(this,arguments)}function Qa(){return(Qa=(0,h.Z)(function*(E,f,_){const D=(0,K.m9)(E);Je(D.auth,f,Tr);const q=ji(D.auth,_);return new ka(D.auth,"linkViaPopup",f,q,D).executeNotNull()})).apply(this,arguments)}let ka=(()=>{class E extends Qu{constructor(_,D,q,se,Pe){super(_,D,se,Pe),this.provider=q,this.authWindow=null,this.pollId=null,E.currentPopupAction&&E.currentPopupAction.cancel(),E.currentPopupAction=this}executeNotNull(){var _=this;return(0,h.Z)(function*(){const D=yield _.execute();return Oe(D,_.auth,"internal-error"),D})()}onExecution(){var _=this;return(0,h.Z)(function*(){ft(1===_.filter.length,"Popup operations only handle one event");const D=Ws();_.authWindow=yield _.resolver._openPopup(_.auth,_.provider,_.filter[0],D),_.authWindow.associatedEvent=D,_.resolver._originValidation(_.auth).catch(q=>{_.reject(q)}),_.resolver._isIframeWebStorageSupported(_.auth,q=>{q||_.reject(Be(_.auth,"web-storage-unsupported"))}),_.pollUserCancellation()})()}get eventId(){var _;return(null===(_=this.authWindow)||void 0===_?void 0:_.associatedEvent)||null}cancel(){this.reject(Be(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,E.currentPopupAction=null}pollUserCancellation(){const _=()=>{var D,q;this.pollId=null!==(q=null===(D=this.authWindow)||void 0===D?void 0:D.window)&&void 0!==q&&q.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Be(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(_,Ji.get())};_()}}return E.currentPopupAction=null,E})();const Md="pendingRedirect",Is=new Map;class Fa extends Qu{constructor(f,_,D=!1){super(f,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],_,void 0,D),this.eventId=null}execute(){var f=()=>super.execute,_=this;return(0,h.Z)(function*(){let D=Is.get(_.auth._key());if(!D){try{const se=(yield function pu(E,f){return aa.apply(this,arguments)}(_.resolver,_.auth))?yield f().call(_):null;D=()=>Promise.resolve(se)}catch(q){D=()=>Promise.reject(q)}Is.set(_.auth._key(),D)}return _.bypassAuthState||Is.set(_.auth._key(),()=>Promise.resolve(null)),D()})()}onAuthEvent(f){var _=()=>super.onAuthEvent,D=this;return(0,h.Z)(function*(){if("signInViaRedirect"===f.type)return _().call(D,f);if("unknown"!==f.type){if(f.eventId){const q=yield D.auth._redirectUserForId(f.eventId);if(q)return D.user=q,_().call(D,f);D.resolve(null)}}else D.resolve(null)})()}onExecution(){return(0,h.Z)(function*(){})()}cleanUp(){}}function aa(){return(aa=(0,h.Z)(function*(E,f){const _=Yu(f),D=La(E);if(!(yield D._isAvailable()))return!1;const q="true"===(yield D._get(_));return yield D._remove(_),q})).apply(this,arguments)}function zo(E,f){return pa.apply(this,arguments)}function pa(){return(pa=(0,h.Z)(function*(E,f){return La(E)._set(Yu(f),"true")})).apply(this,arguments)}function ua(){Is.clear()}function oc(E,f){Is.set(E._key(),f)}function La(E){return at(E._redirectPersistence)}function Yu(E){return At(Md,E.config.apiKey,E.name)}function N(E,f,_){return function d(E,f,_){return m.apply(this,arguments)}(E,f,_)}function m(){return(m=(0,h.Z)(function*(E,f,_){if((0,W._isFirebaseServerApp)(E.app))return Promise.reject(Ie(E));const D=tr(E);Je(E,f,Tr),yield D._initializationPromise;const q=ji(D,_);return yield zo(q,D),q._openRedirect(D,f,"signInViaRedirect")})).apply(this,arguments)}function T(E,f,_){return function V(E,f,_){return Y.apply(this,arguments)}(E,f,_)}function Y(){return(Y=(0,h.Z)(function*(E,f,_){const D=(0,K.m9)(E);if(Je(D.auth,f,Tr),(0,W._isFirebaseServerApp)(D.auth.app))return Promise.reject(Ie(D.auth));yield D.auth._initializationPromise;const q=ji(D.auth,_);yield zo(q,D.auth);const se=yield nn(D);return q._openRedirect(D.auth,f,"reauthViaRedirect",se)})).apply(this,arguments)}function le(E,f,_){return function _e(E,f,_){return Re.apply(this,arguments)}(E,f,_)}function Re(){return(Re=(0,h.Z)(function*(E,f,_){const D=(0,K.m9)(E);Je(D.auth,f,Tr),yield D.auth._initializationPromise;const q=ji(D.auth,_);yield de(!1,D,f.providerId),yield zo(q,D.auth);const se=yield nn(D);return q._openRedirect(D.auth,f,"linkViaRedirect",se)})).apply(this,arguments)}function it(E,f){return Tt.apply(this,arguments)}function Tt(){return(Tt=(0,h.Z)(function*(E,f){return yield tr(E)._initializationPromise,Pt(E,f,!1)})).apply(this,arguments)}function Pt(E,f){return Tn.apply(this,arguments)}function Tn(){return(Tn=(0,h.Z)(function*(E,f,_=!1){if((0,W._isFirebaseServerApp)(E.app))return Promise.reject(Ie(E));const D=tr(E),q=ji(D,f),Pe=yield new Fa(D,q,_).execute();return Pe&&!_&&(delete Pe.user._redirectEventId,yield D._persistUserIfCurrent(Pe.user),yield D._setRedirectUser(null,f)),Pe})).apply(this,arguments)}function nn(E){return cn.apply(this,arguments)}function cn(){return(cn=(0,h.Z)(function*(E){const f=Ws(`${E.uid}:::`);return E._redirectEventId=f,yield E.auth._setRedirectUser(E),yield E.auth._persistUserIfCurrent(E),f})).apply(this,arguments)}class En{constructor(f){this.auth=f,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(f){this.consumers.add(f),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,f)&&(this.sendToConsumer(this.queuedRedirectEvent,f),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(f){this.consumers.delete(f)}onEvent(f){if(this.hasEventBeenHandled(f))return!1;let _=!1;return this.consumers.forEach(D=>{this.isEventForConsumer(f,D)&&(_=!0,this.sendToConsumer(f,D),this.saveEventToCache(f))}),this.hasHandledPotentialRedirect||!function Yn(E){switch(E.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ui(E);default:return!1}}(f)||(this.hasHandledPotentialRedirect=!0,_||(this.queuedRedirectEvent=f,_=!0)),_}sendToConsumer(f,_){var D;if(f.error&&!ui(f)){const q=(null===(D=f.error.code)||void 0===D?void 0:D.split("auth/")[1])||"internal-error";_.onError(Be(this.auth,q))}else _.onAuthEvent(f)}isEventForConsumer(f,_){const D=null===_.eventId||!!f.eventId&&f.eventId===_.eventId;return _.filter.includes(f.type)&&D}hasEventBeenHandled(f){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(kr(f))}saveEventToCache(f){this.cachedEventUids.add(kr(f)),this.lastProcessedEventTime=Date.now()}}function kr(E){return[E.type,E.eventId,E.sessionId,E.tenantId].filter(f=>f).join("-")}function ui({type:E,error:f}){return"unknown"===E&&"auth/no-auth-event"===f?.code}function Ti(E){return Ms.apply(this,arguments)}function Ms(){return(Ms=(0,h.Z)(function*(E,f={}){return rt(E,"GET","/v1/projects",f)})).apply(this,arguments)}const In=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Jn=/^https?/;function la(){return(la=(0,h.Z)(function*(E){if(E.config.emulator)return;const{authorizedDomains:f}=yield Ti(E);for(const _ of f)try{if(ba(_))return}catch{}ce(E,"unauthorized-domain")})).apply(this,arguments)}function ba(E){const f=Gt(),{protocol:_,hostname:D}=new URL(f);if(E.startsWith("chrome-extension://")){const Pe=new URL(E);return""===Pe.hostname&&""===D?"chrome-extension:"===_&&E.replace("chrome-extension://","")===f.replace("chrome-extension://",""):"chrome-extension:"===_&&Pe.hostname===D}if(!Jn.test(_))return!1;if(In.test(E))return D===E;const q=E.replace(/\./g,"\\.");return new RegExp("^(.+\\."+q+"|"+q+")$","i").test(D)}const zc=new Ct(3e4,6e4);function gu(){const E=Gi().___jsl;if(E?.H)for(const f of Object.keys(E.H))if(E.H[f].r=E.H[f].r||[],E.H[f].L=E.H[f].L||[],E.H[f].r=[...E.H[f].L],E.CP)for(let _=0;_<E.CP.length;_++)E.CP[_]=null}let Ju=null;const gn=new Ct(5e3,15e3),Cn="__/auth/iframe",rn="emulator/auth/iframe",zr={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},us=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ga(E){const f=E.config;Oe(f.authDomain,E,"auth-domain-config-required");const _=f.emulator?Ae(f,rn):`https://${E.config.authDomain}/${Cn}`,D={apiKey:f.apiKey,appName:E.name,v:W.SDK_VERSION},q=us.get(E.config.apiHost);q&&(D.eid=q);const se=E._getFrameworks();return se.length&&(D.fw=se.join(",")),`${_}?${(0,K.xO)(D).slice(1)}`}function Co(){return Co=(0,h.Z)(function*(E){const f=yield function Ya(E){return Ju=Ju||function mu(E){return new Promise((f,_)=>{var D,q,se;function Pe(){gu(),gapi.load("gapi.iframes",{callback:()=>{f(gapi.iframes.getContext())},ontimeout:()=>{gu(),_(Be(E,"network-request-failed"))},timeout:zc.get()})}if(null!==(q=null===(D=Gi().gapi)||void 0===D?void 0:D.iframes)&&void 0!==q&&q.Iframe)f(gapi.iframes.getContext());else{if(null===(se=Gi().gapi)||void 0===se||!se.load){const Ze=cr("iframefcb");return Gi()[Ze]=()=>{gapi.load?Pe():_(Be(E,"network-request-failed"))},Qs(`${function Wr(){return Oi.gapiScript}()}?onload=${Ze}`).catch(yt=>_(yt))}Pe()}}).catch(f=>{throw Ju=null,f})}(E),Ju}(E),_=Gi().gapi;return Oe(_,E,"internal-error"),f.open({where:document.body,url:ga(E),messageHandlersFilter:_.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:zr,dontclear:!0},D=>new Promise(function(){var q=(0,h.Z)(function*(se,Pe){yield D.restyle({setHideOnLeave:!1});const Ze=Be(E,"network-request-failed"),yt=Gi().setTimeout(()=>{Pe(Ze)},gn.get());function sn(){Gi().clearTimeout(yt),se(D)}D.ping(sn).then(sn,()=>{Pe(Ze)})});return function(se,Pe){return q.apply(this,arguments)}}()))}),Co.apply(this,arguments)}const qi={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class co{constructor(f){this.window=f,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const Ua="__/auth/handler",Xu="emulator/auth/handler",ac=encodeURIComponent("fac");function uc(E,f,_,D,q,se){return lc.apply(this,arguments)}function lc(){return(lc=(0,h.Z)(function*(E,f,_,D,q,se){Oe(E.config.authDomain,E,"auth-domain-config-required"),Oe(E.config.apiKey,E,"invalid-api-key");const Pe={apiKey:E.config.apiKey,appName:E.name,authType:_,redirectUrl:D,v:W.SDK_VERSION,eventId:q};if(f instanceof Tr){f.setDefaultLanguage(E.languageCode),Pe.providerId=f.providerId||"",(0,K.xb)(f.getCustomParameters())||(Pe.customParameters=JSON.stringify(f.getCustomParameters()));for(const[Dn,hr]of Object.entries(se||{}))Pe[Dn]=hr}if(f instanceof yo){const Dn=f.getScopes().filter(hr=>""!==hr);Dn.length>0&&(Pe.scopes=Dn.join(","))}E.tenantId&&(Pe.tid=E.tenantId);const Ze=Pe;for(const Dn of Object.keys(Ze))void 0===Ze[Dn]&&delete Ze[Dn];const yt=yield E._getAppCheckToken(),sn=yt?`#${ac}=${encodeURIComponent(yt)}`:"";return`${function bl({config:E}){return E.emulator?Ae(E,Xu):`https://${E.authDomain}/${Ua}`}(E)}?${(0,K.xO)(Ze).slice(1)}${sn}`})).apply(this,arguments)}const bo="webStorageSupport",Gc=class Sh{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ht,this._completeRedirectFn=Pt,this._overrideRedirectResult=oc}_openPopup(f,_,D,q){var se=this;return(0,h.Z)(function*(){var Pe;ft(null===(Pe=se.eventManagers[f._key()])||void 0===Pe?void 0:Pe.manager,"_initialize() not called before _openPopup()");const Ze=yield uc(f,_,D,Gt(),q);return function Cl(E,f,_,D=500,q=600){const se=Math.max((window.screen.availHeight-q)/2,0).toString(),Pe=Math.max((window.screen.availWidth-D)/2,0).toString();let Ze="";const yt=Object.assign(Object.assign({},qi),{width:D.toString(),height:q.toString(),top:se,left:Pe}),sn=(0,K.z$)().toLowerCase();_&&(Ze=ws(sn)?"_blank":_),dn(sn)&&(f=f||"http://localhost",yt.scrollbars="yes");const Dn=Object.entries(yt).reduce((so,[vu,Xa])=>`${so}${vu}=${Xa},`,"");if(function ke(E=(0,K.z$)()){var f;return ri(E)&&!(null===(f=window.navigator)||void 0===f||!f.standalone)}(sn)&&"_self"!==Ze)return function ho(E,f){const _=document.createElement("a");_.href=E,_.target=f;const D=document.createEvent("MouseEvent");D.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),_.dispatchEvent(D)}(f||"",Ze),new co(null);const hr=window.open(f||"",Ze,Dn);Oe(hr,E,"popup-blocked");try{hr.focus()}catch{}return new co(hr)}(f,Ze,Ws())})()}_openRedirect(f,_,D,q){var se=this;return(0,h.Z)(function*(){return yield se._originValidation(f),function uu(E){Gi().location.href=E}(yield uc(f,_,D,Gt(),q)),new Promise(()=>{})})()}_initialize(f){const _=f._key();if(this.eventManagers[_]){const{manager:q,promise:se}=this.eventManagers[_];return q?Promise.resolve(q):(ft(se,"If manager is not set, promise should be"),se)}const D=this.initAndGetManager(f);return this.eventManagers[_]={promise:D},D.catch(()=>{delete this.eventManagers[_]}),D}initAndGetManager(f){var _=this;return(0,h.Z)(function*(){const D=yield function Wi(E){return Co.apply(this,arguments)}(f),q=new En(f);return D.register("authEvent",se=>(Oe(se?.authEvent,f,"invalid-auth-event"),{status:q.onEvent(se.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),_.eventManagers[f._key()]={manager:q},_.iframes[f._key()]=D,q})()}_isIframeWebStorageSupported(f,_){this.iframes[f._key()].send(bo,{type:bo},q=>{var se;const Pe=null===(se=q?.[0])||void 0===se?void 0:se[bo];void 0!==Pe&&_(!!Pe),ce(f,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(f){const _=f._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function Ao(E){return la.apply(this,arguments)}(f)),this.originValidationPromises[_]}get _shouldInitProactively(){return Dt()||ni()||ri()}};class Wc{constructor(f){this.factorId=f}_process(f,_,D){switch(_.type){case"enroll":return this._finalizeEnroll(f,_.credential,D);case"signin":return this._finalizeSignIn(f,_.credential);default:return et("unexpected MultiFactorSessionType")}}}class yu extends Wc{constructor(f){super("phone"),this.credential=f}static _fromCredential(f){return new yu(f)}_finalizeEnroll(f,_,D){return function sa(E,f){return rt(E,"POST","/v2/accounts/mfaEnrollment:finalize",Ge(E,f))}(f,{idToken:_,displayName:D,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(f,_){return function fe(E,f){return rt(E,"POST","/v2/accounts/mfaSignIn:finalize",Ge(E,f))}(f,{mfaPendingCredential:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let cc=(()=>{class E{constructor(){}static assertion(_){return yu._fromCredential(_)}}return E.FACTOR_ID="phone",E})();var Rh="@firebase/auth";class Od{constructor(f){this.auth=f,this.internalListeners=new Map}getUid(){var f;return this.assertAuthConfigured(),(null===(f=this.auth.currentUser)||void 0===f?void 0:f.uid)||null}getToken(f){var _=this;return(0,h.Z)(function*(){return _.assertAuthConfigured(),yield _.auth._initializationPromise,_.auth.currentUser?{accessToken:yield _.auth.currentUser.getIdToken(f)}:null})()}addAuthTokenListener(f){if(this.assertAuthConfigured(),this.internalListeners.has(f))return;const _=this.auth.onIdTokenChanged(D=>{f(D?.stsTokenManager.accessToken||null)});this.internalListeners.set(f,_),this.updateProactiveRefresh()}removeAuthTokenListener(f){this.assertAuthConfigured();const _=this.internalListeners.get(f);_&&(this.internalListeners.delete(f),_(),this.updateProactiveRefresh())}assertAuthConfigured(){Oe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(0,K.Pz)("authIdTokenMaxAge"),function ds(E){Oi=E}({loadJS:E=>new Promise((f,_)=>{const D=document.createElement("script");D.setAttribute("src",E),D.onload=f,D.onerror=q=>{const se=Be("internal-error");se.customData=q,_(se)},D.type="text/javascript",D.charset="UTF-8",function cm(){var E,f;return null!==(f=null===(E=document.getElementsByTagName("head"))||void 0===E?void 0:E[0])&&void 0!==f?f:document}().appendChild(D)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),function xd(E){(0,W._registerComponent)(new we.wA("auth",(f,{options:_})=>{const D=f.getProvider("app").getImmediate(),q=f.getProvider("heartbeat"),se=f.getProvider("app-check-internal"),{apiKey:Pe,authDomain:Ze}=D.options;Oe(Pe&&!Pe.includes(":"),"invalid-api-key",{appName:D.name});const yt={apiKey:Pe,authDomain:Ze,clientPlatform:E,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:tn(E)},sn=new Mo(D,q,se,yt);return function ya(E,f){const _=f?.persistence||[],D=(Array.isArray(_)?_:[_]).map(at);f?.errorMap&&E._updateErrorMap(f.errorMap),E._initializeWithPersistence(D,f?.popupRedirectResolver)}(sn,_),sn},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((f,_,D)=>{f.getProvider("auth-internal").initialize()})),(0,W._registerComponent)(new we.wA("auth-internal",f=>{const _=tr(f.getProvider("auth").getImmediate());return new Od(_)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,W.registerVersion)(Rh,"1.7.0",function So(E){switch(E){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(E)),(0,W.registerVersion)(Rh,"1.7.0","esm2017")}("Browser")},5776:(Ot,Le,U)=>{U.d(Le,{u7:()=>Lc,Jj:()=>Kl,IX:()=>vv,my:()=>Bs,xU:()=>Vc,Lz:()=>Zl,WA:()=>gt,F8:()=>kf,$q:()=>Ih,W:()=>ml,EK:()=>Qt,PU:()=>ly,l7:()=>Is,Ky:()=>Ut,Xb:()=>pi,Cf:()=>Rr,K9:()=>jc,Me:()=>Qu,yq:()=>Jr,Wi:()=>j_,ET:()=>qg,Ab:()=>py,vr:()=>fy,Fc:()=>Tv,hJ:()=>_v,B$:()=>H_,at:()=>$_,oe:()=>Wg,AK:()=>hy,TF:()=>Dv,JU:()=>Pg,ST:()=>Iv,fH:()=>wv,Ix:()=>Ng,Wu:()=>Bg,Lx:()=>vh,qY:()=>Zs,GL:()=>_l,QT:()=>Lv,kl:()=>ey,Xk:()=>ty,PL:()=>ny,UQ:()=>Vv,zN:()=>Uv,ad:()=>Ev,nP:()=>Zg,b9:()=>Nv,vh:()=>YE,Pb:()=>Av,L$:()=>Cv,cf:()=>jv,sc:()=>Uf,Xo:()=>Mv,IO:()=>Y_,iE:()=>Mg,Eo:()=>ph,i3:()=>dy,Bt:()=>qv,pl:()=>Bv,Ub:()=>Us,qK:()=>X_,TQ:()=>xv,e0:()=>Ov,r7:()=>ry,Mx:()=>q_,ar:()=>Lg});var ye,h=U(5861),W=U(534),K=U(4537),ve=U(7879),me=U(9058),we=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ce={},De=De||{},X=we||self;function ie(i){var e=typeof i;return"array"==(e="object"!=e?e:i?Array.isArray(i)?"array":e:"null")||"object"==e&&"number"==typeof i.length}function pe(i){var e=typeof i;return"object"==e&&null!=i||"function"==e}var Ve="closure_uid_"+(1e9*Math.random()>>>0),ot=0;function Qe(i,e,n){return i.call.apply(i.bind,arguments)}function mt(i,e,n){if(!i)throw Error();if(2<arguments.length){var o=Array.prototype.slice.call(arguments,2);return function(){var u=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(u,o),i.apply(e,u)}}return function(){return i.apply(e,arguments)}}function nt(i,e,n){return(nt=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Qe:mt).apply(null,arguments)}function Vt(i,e){var n=Array.prototype.slice.call(arguments,1);return function(){var o=n.slice();return o.push.apply(o,arguments),i.apply(this,o)}}function ut(i,e){function n(){}n.prototype=e.prototype,i.$=e.prototype,i.prototype=new n,i.prototype.constructor=i,i.ac=function(o,u,c){for(var g=Array(arguments.length-2),S=2;S<arguments.length;S++)g[S-2]=arguments[S];return e.prototype[u].apply(o,g)}}function ce(){this.s=this.s,this.o=this.o}ce.prototype.s=!1,ce.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function ze(i){Object.prototype.hasOwnProperty.call(i,Ve)&&i[Ve]||(i[Ve]=++ot)}(this)},ce.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const be=Array.prototype.indexOf?function(i,e){return Array.prototype.indexOf.call(i,e,void 0)}:function(i,e){if("string"==typeof i)return"string"!=typeof e||1!=e.length?-1:i.indexOf(e,0);for(let n=0;n<i.length;n++)if(n in i&&i[n]===e)return n;return-1};function Ie(i){const e=i.length;if(0<e){const n=Array(e);for(let o=0;o<e;o++)n[o]=i[o];return n}return[]}function Je(i,e){for(let n=1;n<arguments.length;n++){const o=arguments[n];if(ie(o)){const u=i.length||0,c=o.length||0;i.length=u+c;for(let g=0;g<c;g++)i[u+g]=o[g]}else i.push(o)}}function Te(i,e){this.type=i,this.g=this.target=e,this.defaultPrevented=!1}Te.prototype.h=function(){this.defaultPrevented=!0};var Oe=function(){if(!X.addEventListener||!Object.defineProperty)return!1;var i=!1,e=Object.defineProperty({},"passive",{get:function(){i=!0}});try{const n=()=>{};X.addEventListener("test",n,e),X.removeEventListener("test",n,e)}catch{}return i}();function et(i){return/^[\s\xa0]*$/.test(i)}function ft(){var i=X.navigator;return i&&(i=i.userAgent)?i:""}function Gt(i){return-1!=ft().indexOf(i)}function Jt(i){return Jt[" "](i),i}Jt[" "]=function(){};var Ge,i,Mt=Gt("Opera"),kt=Gt("Trident")||Gt("MSIE"),Ct=Gt("Edge"),Ae=Ct||kt,Me=Gt("Gecko")&&!(-1!=ft().toLowerCase().indexOf("webkit")&&!Gt("Edge"))&&!(Gt("Trident")||Gt("MSIE"))&&!Gt("Edge"),He=-1!=ft().toLowerCase().indexOf("webkit")&&!Gt("Edge");function Ue(){var i=X.document;return i?i.documentMode:void 0}e:{var rt="",Et=(i=ft(),Me?/rv:([^\);]+)(\)|;)/.exec(i):Ct?/Edge\/([\d\.]+)/.exec(i):kt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(i):He?/WebKit\/(\S+)/.exec(i):Mt?/(?:Version)[ \/]?(\S+)/.exec(i):void 0);if(Et&&(rt=Et?Et[1]:""),kt){var It=Ue();if(null!=It&&It>parseFloat(rt)){Ge=String(It);break e}}Ge=rt}var on=X.document&&kt&&(Ue()||parseInt(Ge,10))||void 0;function Wt(i,e){if(Te.call(this,i?i.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,i){var n=this.type=i.type,o=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:null;if(this.target=i.target||i.srcElement,this.g=e,e=i.relatedTarget){if(Me){e:{try{Jt(e.nodeName);var u=!0;break e}catch{}u=!1}u||(e=null)}}else"mouseover"==n?e=i.fromElement:"mouseout"==n&&(e=i.toElement);this.relatedTarget=e,o?(this.clientX=void 0!==o.clientX?o.clientX:o.pageX,this.clientY=void 0!==o.clientY?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0):(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0),this.button=i.button,this.key=i.key||"",this.ctrlKey=i.ctrlKey,this.altKey=i.altKey,this.shiftKey=i.shiftKey,this.metaKey=i.metaKey,this.pointerId=i.pointerId||0,this.pointerType="string"==typeof i.pointerType?i.pointerType:ar[i.pointerType]||"",this.state=i.state,this.i=i,i.defaultPrevented&&Wt.$.h.call(this)}}ut(Wt,Te);var ar={2:"touch",3:"pen",4:"mouse"};Wt.prototype.h=function(){Wt.$.h.call(this);var i=this.i;i.preventDefault?i.preventDefault():i.returnValue=!1};var Hn="closure_listenable_"+(1e6*Math.random()|0),Ln=0;function xt(i,e,n,o,u){this.listener=i,this.proxy=null,this.src=e,this.type=n,this.capture=!!o,this.la=u,this.key=++Ln,this.fa=this.ia=!1}function zn(i){i.fa=!0,i.listener=null,i.proxy=null,i.src=null,i.la=null}function Sn(i,e,n){for(const o in i)e.call(n,i[o],o,i)}function Vn(i){const e={};for(const n in i)e[n]=i[n];return e}const Zn="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function xn(i,e){let n,o;for(let u=1;u<arguments.length;u++){for(n in o=arguments[u],o)i[n]=o[n];for(let c=0;c<Zn.length;c++)n=Zn[c],Object.prototype.hasOwnProperty.call(o,n)&&(i[n]=o[n])}}function Yr(i){this.src=i,this.g={},this.h=0}function Zt(i,e){var n=e.type;if(n in i.g){var c,o=i.g[n],u=be(o,e);(c=0<=u)&&Array.prototype.splice.call(o,u,1),c&&(zn(e),0==i.g[n].length&&(delete i.g[n],i.h--))}}function un(i,e,n,o){for(var u=0;u<i.length;++u){var c=i[u];if(!c.fa&&c.listener==e&&c.capture==!!n&&c.la==o)return u}return-1}Yr.prototype.add=function(i,e,n,o,u){var c=i.toString();(i=this.g[c])||(i=this.g[c]=[],this.h++);var g=un(i,e,o,u);return-1<g?(e=i[g],n||(e.ia=!1)):((e=new xt(e,this.src,c,!!o,u)).ia=n,i.push(e)),e};var an="closure_lm_"+(1e6*Math.random()|0),Kn={};function Fr(i,e,n,o,u){if(o&&o.once)return Cr(i,e,n,o,u);if(Array.isArray(e)){for(var c=0;c<e.length;c++)Fr(i,e[c],n,o,u);return null}return n=br(n),i&&i[Hn]?i.O(e,n,pe(o)?!!o.capture:!!o,u):ei(i,e,n,!1,o,u)}function ei(i,e,n,o,u,c){if(!e)throw Error("Invalid event type");var g=pe(u)?!!u.capture:!!u,S=qt(i);if(S||(i[an]=S=new Yr(i)),(n=S.add(e,n,o,g,c)).proxy)return n;if(o=function Mn(){const e=Rn;return function i(n){return e.call(i.src,i.listener,n)}}(),n.proxy=o,o.src=i,o.listener=n,i.addEventListener)Oe||(u=g),void 0===u&&(u=!1),i.addEventListener(e.toString(),o,u);else if(i.attachEvent)i.attachEvent(Ri(e.toString()),o);else{if(!i.addListener||!i.removeListener)throw Error("addEventListener and attachEvent are unavailable.");i.addListener(o)}return n}function Cr(i,e,n,o,u){if(Array.isArray(e)){for(var c=0;c<e.length;c++)Cr(i,e[c],n,o,u);return null}return n=br(n),i&&i[Hn]?i.P(e,n,pe(o)?!!o.capture:!!o,u):ei(i,e,n,!0,o,u)}function ns(i,e,n,o,u){if(Array.isArray(e))for(var c=0;c<e.length;c++)ns(i,e[c],n,o,u);else o=pe(o)?!!o.capture:!!o,n=br(n),i&&i[Hn]?(i=i.i,(e=String(e).toString())in i.g&&-1<(n=un(c=i.g[e],n,o,u))&&(zn(c[n]),Array.prototype.splice.call(c,n,1),0==c.length&&(delete i.g[e],i.h--))):i&&(i=qt(i))&&(e=i.g[e.toString()],i=-1,e&&(i=un(e,n,o,u)),(n=-1<i?e[i]:null)&&Ht(n))}function Ht(i){if("number"!=typeof i&&i&&!i.fa){var e=i.src;if(e&&e[Hn])Zt(e.i,i);else{var n=i.type,o=i.proxy;e.removeEventListener?e.removeEventListener(n,o,i.capture):e.detachEvent?e.detachEvent(Ri(n),o):e.addListener&&e.removeListener&&e.removeListener(o),(n=qt(e))?(Zt(n,i),0==n.h&&(n.src=null,e[an]=null)):zn(i)}}}function Ri(i){return i in Kn?Kn[i]:Kn[i]="on"+i}function Rn(i,e){if(i.fa)i=!0;else{e=new Wt(e,this);var n=i.listener,o=i.la||i.src;i.ia&&Ht(i),i=n.call(o,e)}return i}function qt(i){return(i=i[an])instanceof Yr?i:null}var Xn="__closure_events_fn_"+(1e9*Math.random()>>>0);function br(i){return"function"==typeof i?i:(i[Xn]||(i[Xn]=function(e){return i.handleEvent(e)}),i[Xn])}function Un(){ce.call(this),this.i=new Yr(this),this.S=this,this.J=null}function Nn(i,e){var n,o=i.J;if(o)for(n=[];o;o=o.J)n.push(o);if(i=i.S,o=e.type||e,"string"==typeof e)e=new Te(e,i);else if(e instanceof Te)e.target=e.target||i;else{var u=e;xn(e=new Te(o,i),u)}if(u=!0,n)for(var c=n.length-1;0<=c;c--){var g=e.g=n[c];u=Ur(g,o,!0,e)&&u}if(u=Ur(g=e.g=i,o,!0,e)&&u,u=Ur(g,o,!1,e)&&u,n)for(c=0;c<n.length;c++)u=Ur(g=e.g=n[c],o,!1,e)&&u}function Ur(i,e,n,o){if(!(e=i.i.g[String(e)]))return!0;e=e.concat();for(var u=!0,c=0;c<e.length;++c){var g=e[c];if(g&&!g.fa&&g.capture==n){var S=g.listener,x=g.la||g.src;g.ia&&Zt(i.i,g),u=!1!==S.call(x,o)&&u}}return u&&!o.defaultPrevented}ut(Un,ce),Un.prototype[Hn]=!0,Un.prototype.removeEventListener=function(i,e,n,o){ns(this,i,e,n,o)},Un.prototype.N=function(){if(Un.$.N.call(this),this.i){var e,i=this.i;for(e in i.g){for(var n=i.g[e],o=0;o<n.length;o++)zn(n[o]);delete i.g[e],i.h--}}this.J=null},Un.prototype.O=function(i,e,n,o){return this.i.add(String(i),e,!1,n,o)},Un.prototype.P=function(i,e,n,o){return this.i.add(String(i),e,!0,n,o)};var Pi=X.JSON.stringify;function Sr(){var i=k;let e=null;return i.g&&(e=i.g,i.g=i.g.next,i.g||(i.h=null),e.next=null),e}var Mr=new class ti{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new ir,i=>i.reset());class ir{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function Ee(i){var e=1;i=i.split(":");const n=[];for(;0<e&&i.length;)n.push(i.shift()),e--;return i.length&&n.push(i.join(":")),n}function re(i){X.setTimeout(()=>{throw i},0)}let z,F=!1,k=new class gr{constructor(){this.h=this.g=null}add(e,n){const o=Mr.get();o.set(e,n),this.h?this.h.next=o:this.g=o,this.h=o}},oe=()=>{const i=X.Promise.resolve(void 0);z=()=>{i.then(Ne)}};var Ne=()=>{for(var i;i=Sr();){try{i.h.call(i.g)}catch(n){re(n)}var e=Mr;e.j(i),100>e.h&&(e.h++,i.next=e.g,e.g=i)}F=!1};function at(i,e){Un.call(this),this.h=i||1,this.g=e||X,this.j=nt(this.qb,this),this.l=Date.now()}function vt(i){i.ga=!1,i.T&&(i.g.clearTimeout(i.T),i.T=null)}function Ft(i,e,n){if("function"==typeof i)n&&(i=nt(i,n));else{if(!i||"function"!=typeof i.handleEvent)throw Error("Invalid listener argument");i=nt(i.handleEvent,i)}return 2147483647<Number(e)?-1:X.setTimeout(i,e||0)}function At(i){i.g=Ft(()=>{i.g=null,i.i&&(i.i=!1,At(i))},i.j);const e=i.h;i.h=null,i.m.apply(null,e)}ut(at,Un),(ye=at.prototype).ga=!1,ye.T=null,ye.qb=function(){if(this.ga){var i=Date.now()-this.l;0<i&&i<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-i):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Nn(this,"tick"),this.ga&&(vt(this),this.start()))}},ye.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},ye.N=function(){at.$.N.call(this),vt(this),delete this.g};class Kt extends ce{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:At(this)}N(){super.N(),this.g&&(X.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Gn(i){ce.call(this),this.h=i,this.g={}}ut(Gn,ce);var dn=[];function ni(i,e,n,o){Array.isArray(n)||(n&&(dn[0]=n.toString()),n=dn);for(var u=0;u<n.length;u++){var c=Fr(e,n[u],o||i.handleEvent,!1,i.h||i);if(!c)break;i.g[c.key]=c}}function ws(i){Sn(i.g,function(e,n){this.g.hasOwnProperty(n)&&Ht(e)},i),i.g={}}function ls(){this.g=!0}function ur(i,e,n,o){i.info(function(){return"XMLHTTP TEXT ("+e+"): "+function Fe(i,e){if(!i.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(i=0;i<n.length;i++)if(Array.isArray(n[i])){var o=n[i];if(!(2>o.length)){var u=o[1];if(Array.isArray(u)&&!(1>u.length)){var c=u[0];if("noop"!=c&&"stop"!=c&&"close"!=c)for(var g=1;g<u.length;g++)u[g]=""}}}return Pi(n)}catch{return e}}(i,n)+(o?" "+o:"")})}Gn.prototype.N=function(){Gn.$.N.call(this),ws(this)},Gn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},ls.prototype.Ea=function(){this.g=!1},ls.prototype.info=function(){};var ke={},st=null;function Dt(){return st=st||new Un}function _n(i){Te.call(this,ke.Ta,i)}function tn(i){const e=Dt();Nn(e,new _n(e))}function yn(i,e){Te.call(this,ke.STAT_EVENT,i),this.stat=e}function kn(i){const e=Dt();Nn(e,new yn(e,i))}function lr(i,e){Te.call(this,ke.Ua,i),this.size=e}function ii(i,e){if("function"!=typeof i)throw Error("Fn must not be null and must be a function");return X.setTimeout(function(){i()},e)}ke.Ta="serverreachability",ut(_n,Te),ke.STAT_EVENT="statevent",ut(yn,Te),ke.Ua="timingevent",ut(lr,Te);var Ts={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Mo={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function tr(){}function Oi(){}tr.prototype.h=null;var go,ds={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Qs(){Te.call(this,"d")}function Ys(){Te.call(this,"c")}function Wr(){}function cr(i,e,n,o){this.l=i,this.j=e,this.m=n,this.W=o||1,this.U=new Gn(this),this.P=Js,this.V=new at(i=Ae?125:void 0),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new js}function js(){this.i=null,this.g="",this.h=!1}ut(Qs,Te),ut(Ys,Te),ut(Wr,tr),Wr.prototype.g=function(){return new XMLHttpRequest},Wr.prototype.i=function(){return{}},go=new Wr;var Js=45e3,gi={},$s={};function hs(i,e,n){i.L=1,i.A=rs(mi(e)),i.u=n,i.S=!0,fs(i,null)}function fs(i,e){i.G=Date.now(),mo(i),i.B=mi(i.A);var n=i.B,o=i.W;Array.isArray(o)||(o=[String(o)]),mn(n.i,"t",o),i.o=0,n=i.l.J,i.h=new js,i.g=Ar(i.l,n?e:null,!i.u),0<i.O&&(i.M=new Kt(nt(i.Pa,i,i.g),i.O)),ni(i.U,i.g,"readystatechange",i.nb),e=i.I?Vn(i.I):{},i.u?(i.v||(i.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",i.g.ha(i.B,i.v,i.u,e)):(i.v="GET",i.g.ha(i.B,i.v,null,e)),tn(),function Di(i,e,n,o,u,c){i.info(function(){if(i.g)if(c)for(var g="",S=c.split("&"),x=0;x<S.length;x++){var G=S[x].split("=");if(1<G.length){var te=G[0];G=G[1];var ue=te.split("_");g=2<=ue.length&&"type"==ue[1]?g+(te+"=")+G+"&":g+(te+"=redacted&")}}else g=null;else g=c;return"XMLHTTP REQ ("+o+") [attempt "+u+"]: "+e+"\n"+n+"\n"+g})}(i.j,i.v,i.B,i.m,i.W,i.u)}function xi(i){return!!i.g&&"GET"==i.v&&2!=i.L&&i.l.Ha}function Ds(i,e,n){let u,o=!0;for(;!i.J&&i.o<n.length;){if(u=Jo(i,n),u==$s){4==e&&(i.s=4,kn(14),o=!1),ur(i.j,i.m,null,"[Incomplete Response]");break}if(u==gi){i.s=4,kn(15),ur(i.j,i.m,n,"[Invalid Chunk]"),o=!1;break}ur(i.j,i.m,u,null),_o(i,u)}xi(i)&&0!=i.o&&(i.h.g=i.h.g.slice(i.o),i.o=0),4!=e||0!=n.length||i.h.h||(i.s=1,kn(16),o=!1),i.i=i.i&&o,o?0<n.length&&!i.ba&&(i.ba=!0,(e=i.l).g==i&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),dr(e),e.M=!0,kn(11))):(ur(i.j,i.m,n,"[Invalid Chunked Response]"),Os(i),As(i))}function Jo(i,e){var n=i.o,o=e.indexOf("\n",n);return-1==o?$s:(n=Number(e.substring(n,o)),isNaN(n)?gi:(o+=1)+n>e.length?$s:(e=e.slice(o,o+n),i.o=o+n,e))}function mo(i){i.Y=Date.now()+i.P,ya(i,i.P)}function ya(i,e){if(null!=i.C)throw Error("WatchDog timer not null");i.C=ii(nt(i.lb,i),e)}function Hs(i){i.C&&(X.clearTimeout(i.C),i.C=null)}function As(i){0==i.l.H||i.J||si(i.l,i)}function Os(i){Hs(i);var e=i.M;e&&"function"==typeof e.sa&&e.sa(),i.M=null,vt(i.V),ws(i.U),i.g&&(e=i.g,i.g=null,e.abort(),e.sa())}function _o(i,e){try{var n=i.l;if(0!=n.H&&(n.g==i||_i(n.i,i)))if(!i.K&&_i(n.i,i)&&3==n.H){try{var o=n.Ja.g.parse(e)}catch{o=null}if(Array.isArray(o)&&3==o.length){var u=o;if(0==u[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<i.G))break e;nr(n),b(n)}sr(n),kn(18)}}else n.Fa=u[1],0<n.Fa-n.V&&37500>u[2]&&n.G&&0==n.A&&!n.v&&(n.v=ii(nt(n.ib,n),6e3));if(1>=Or(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else ss(n,11)}else if((i.K||n.g==i)&&nr(n),!et(e))for(u=n.Ja.g.parse(e),e=0;e<u.length;e++){let G=u[e];if(n.V=G[0],G=G[1],2==n.H)if("c"==G[0]){n.K=G[1],n.pa=G[2];const te=G[3];null!=te&&(n.ra=te,n.l.info("VER="+n.ra));const ue=G[4];null!=ue&&(n.Ga=ue,n.l.info("SVER="+n.Ga));const Se=G[5];null!=Se&&"number"==typeof Se&&0<Se&&(n.L=o=1.5*Se,n.l.info("backChannelRequestTimeoutMs_="+o)),o=n;const qe=i.g;if(qe){const Nt=qe.g?qe.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Nt){var c=o.i;c.g||-1==Nt.indexOf("spdy")&&-1==Nt.indexOf("quic")&&-1==Nt.indexOf("h2")||(c.j=c.l,c.g=new Set,c.h&&(Oo(c,c.h),c.h=null))}if(o.F){const zt=qe.g?qe.g.getResponseHeader("X-HTTP-Session-Id"):null;zt&&(o.Da=zt,Bn(o.I,o.F,zt))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-i.G,n.l.info("Handshake RTT: "+n.S+"ms"));var g=i;if((o=n).wa=bi(o,o.J?o.pa:null,o.Y),g.K){ms(o.i,g);var S=g,x=o.L;x&&S.setTimeout(x),S.C&&(Hs(S),mo(S)),o.g=g}else ln(o);0<n.j.length&&C(n)}else"stop"!=G[0]&&"close"!=G[0]||ss(n,7);else 3==n.H&&("stop"==G[0]||"close"==G[0]?"stop"==G[0]?ss(n,7):ae(n):"noop"!=G[0]&&n.h&&n.h.Aa(G),n.A=0)}tn()}catch{}}function zs(i,e){if(i.forEach&&"function"==typeof i.forEach)i.forEach(e,void 0);else if(ie(i)||"string"==typeof i)Array.prototype.forEach.call(i,e,void 0);else for(var n=function xs(i){if(i.ta&&"function"==typeof i.ta)return i.ta();if(!i.Z||"function"!=typeof i.Z){if(typeof Map<"u"&&i instanceof Map)return Array.from(i.keys());if(!(typeof Set<"u"&&i instanceof Set)){if(ie(i)||"string"==typeof i){var e=[];i=i.length;for(var n=0;n<i;n++)e.push(n);return e}e=[],n=0;for(const o in i)e[n++]=o;return e}}}(i),o=function No(i){if(i.Z&&"function"==typeof i.Z)return i.Z();if(typeof Map<"u"&&i instanceof Map||typeof Set<"u"&&i instanceof Set)return Array.from(i.values());if("string"==typeof i)return i.split("");if(ie(i)){for(var e=[],n=i.length,o=0;o<n;o++)e.push(i[o]);return e}for(o in e=[],n=0,i)e[n++]=i[o];return e}(i),u=o.length,c=0;c<u;c++)e.call(void 0,o[c],n&&n[c],i)}(ye=cr.prototype).setTimeout=function(i){this.P=i},ye.nb=function(i){i=i.target;const e=this.M;e&&3==Bi(i)?e.l():this.Pa(i)},ye.Pa=function(i){try{if(i==this.g)e:{const te=Bi(this.g);var e=this.g.Ia();if(this.g.da(),!(3>te)&&(3!=te||Ae||this.g&&(this.h.h||this.g.ja()||Ci(this.g)))){this.J||4!=te||7==e||tn(),Hs(this);var n=this.g.da();this.ca=n;t:if(xi(this)){var o=Ci(this.g);i="";var u=o.length,c=4==Bi(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Os(this),As(this);var g="";break t}this.h.i=new X.TextDecoder}for(e=0;e<u;e++)this.h.h=!0,i+=this.h.i.decode(o[e],{stream:c&&e==u-1});o.length=0,this.h.g+=i,this.o=0,g=this.h.g}else g=this.g.ja();if(this.i=200==n,function Kr(i,e,n,o,u,c,g){i.info(function(){return"XMLHTTP RESP ("+o+") [ attempt "+u+"]: "+e+"\n"+n+"\n"+c+" "+g})}(this.j,this.v,this.B,this.m,this.W,te,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var S,x=this.g;if((S=x.g?x.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!et(S)){var G=S;break t}}G=null}if(!(n=G)){this.i=!1,this.s=3,kn(12),Os(this),As(this);break e}ur(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,_o(this,n)}this.S?(Ds(this,te,g),Ae&&this.i&&3==te&&(ni(this.U,this.V,"tick",this.mb),this.V.start())):(ur(this.j,this.m,g,null),_o(this,g)),4==te&&Os(this),this.i&&!this.J&&(4==te?si(this.l,this):(this.i=!1,mo(this)))}else(function Ga(i){const e={};i=(i.g&&2<=Bi(i)&&i.g.getAllResponseHeaders()||"").split("\r\n");for(let o=0;o<i.length;o++){if(et(i[o]))continue;var n=Ee(i[o]);const u=n[0];if("string"!=typeof(n=n[1]))continue;n=n.trim();const c=e[u]||[];e[u]=c,c.push(n)}!function Ir(i,e){for(const n in i)e.call(void 0,i[n],n,i)}(e,function(o){return o.join(", ")})})(this.g),400==n&&0<g.indexOf("Unknown SID")?(this.s=3,kn(12)):(this.s=0,kn(13)),Os(this),As(this)}}}catch{}},ye.mb=function(){if(this.g){var i=Bi(this.g),e=this.g.ja();this.o<e.length&&(Hs(this),Ds(this,i,e),this.i&&4!=i&&mo(this))}},ye.cancel=function(){this.J=!0,Os(this)},ye.lb=function(){this.C=null;const i=Date.now();0<=i-this.Y?(function ri(i,e){i.info(function(){return"TIMEOUT: "+e})}(this.j,this.B),2!=this.L&&(tn(),kn(17)),Os(this),this.s=2,As(this)):ya(this,this.Y-i)};var Wn=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Nr(i){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,i instanceof Nr){this.h=i.h,ci(this,i.j),this.s=i.s,this.g=i.g,oo(this,i.m),this.l=i.l;var e=i.i,n=new Ki;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),Xs(this,n),this.o=i.o}else i&&(e=String(i).match(Wn))?(this.h=!1,ci(this,e[1]||"",!0),this.s=ps(e[2]||""),this.g=ps(e[3]||"",!0),oo(this,e[4]),this.l=ps(e[5]||"",!0),Xs(this,e[6]||"",!0),this.o=ps(e[7]||"")):(this.h=!1,this.i=new Ki(null,this.h))}function mi(i){return new Nr(i)}function ci(i,e,n){i.j=n?ps(e,!0):e,i.j&&(i.j=i.j.replace(/:$/,""))}function oo(i,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);i.m=e}else i.m=null}function Xs(i,e,n){e instanceof Ki?(i.i=e,function ks(i,e){e&&!i.j&&(er(i),i.i=null,i.g.forEach(function(n,o){var u=o.toLowerCase();o!=u&&(hi(this,o),mn(this,u,n))},i)),i.j=e}(i.i,i.h)):(n||(e=vr(e,gs)),i.i=new Ki(e,i.h))}function Bn(i,e,n){i.i.set(e,n)}function rs(i){return Bn(i,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),i}function ps(i,e){return i?e?decodeURI(i.replace(/%25/g,"%2525")):decodeURIComponent(i):""}function vr(i,e,n){return"string"==typeof i?(i=encodeURI(i).replace(e,Lt),n&&(i=i.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),i):null}function Lt(i){return"%"+((i=i.charCodeAt(0))>>4&15).toString(16)+(15&i).toString(16)}Nr.prototype.toString=function(){var i=[],e=this.j;e&&i.push(vr(e,fn,!0),":");var n=this.g;return(n||"file"==e)&&(i.push("//"),(e=this.s)&&i.push(vr(e,fn,!0),"@"),i.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&i.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&i.push("/"),i.push(vr(n,"/"==n.charAt(0)?Hi:Er,!0))),(n=this.i.toString())&&i.push("?",n),(n=this.o)&&i.push("#",vr(n,di)),i.join("")};var fn=/[#\/\?@]/g,Er=/[#\?:]/g,Hi=/[#\?]/g,gs=/[#\?@]/g,di=/#/g;function Ki(i,e){this.h=this.g=null,this.i=i||null,this.j=!!e}function er(i){i.g||(i.g=new Map,i.h=0,i.i&&function ki(i,e){if(i){i=i.split("&");for(var n=0;n<i.length;n++){var o=i[n].indexOf("="),u=null;if(0<=o){var c=i[n].substring(0,o);u=i[n].substring(o+1)}else c=i[n];e(c,u?decodeURIComponent(u.replace(/\+/g," ")):"")}}}(i.i,function(e,n){i.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function hi(i,e){er(i),e=Ai(i,e),i.g.has(e)&&(i.i=null,i.h-=i.g.get(e).length,i.g.delete(e))}function is(i,e){return er(i),e=Ai(i,e),i.g.has(e)}function mn(i,e,n){hi(i,e),0<n.length&&(i.i=null,i.g.set(Ai(i,e),Ie(n)),i.h+=n.length)}function Ai(i,e){return e=String(e),i.j&&(e=e.toLowerCase()),e}function Lr(i){this.l=i||wr,i=X.PerformanceNavigationTiming?0<(i=X.performance.getEntriesByType("navigation")).length&&("hq"==i[0].nextHopProtocol||"h2"==i[0].nextHopProtocol):!!(X.g&&X.g.Ka&&X.g.Ka()&&X.g.Ka().dc),this.j=i?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(ye=Ki.prototype).add=function(i,e){er(this),this.i=null,i=Ai(this,i);var n=this.g.get(i);return n||this.g.set(i,n=[]),n.push(e),this.h+=1,this},ye.forEach=function(i,e){er(this),this.g.forEach(function(n,o){n.forEach(function(u){i.call(e,u,o,this)},this)},this)},ye.ta=function(){er(this);const i=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let o=0;o<e.length;o++){const u=i[o];for(let c=0;c<u.length;c++)n.push(e[o])}return n},ye.Z=function(i){er(this);let e=[];if("string"==typeof i)is(this,i)&&(e=e.concat(this.g.get(Ai(this,i))));else{i=Array.from(this.g.values());for(let n=0;n<i.length;n++)e=e.concat(i[n])}return e},ye.set=function(i,e){return er(this),this.i=null,is(this,i=Ai(this,i))&&(this.h-=this.g.get(i).length),this.g.set(i,[e]),this.h+=1,this},ye.get=function(i,e){return i&&0<(i=this.Z(i)).length?String(i[0]):e},ye.toString=function(){if(this.i)return this.i;if(!this.g)return"";const i=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var o=e[n];const c=encodeURIComponent(String(o)),g=this.Z(o);for(o=0;o<g.length;o++){var u=c;""!==g[o]&&(u+="="+encodeURIComponent(String(g[o]))),i.push(u)}}return this.i=i.join("&")};var wr=10;function mr(i){return!!i.h||!!i.g&&i.g.size>=i.j}function Or(i){return i.h?1:i.g?i.g.size:0}function _i(i,e){return i.h?i.h==e:!!i.g&&i.g.has(e)}function Oo(i,e){i.g?i.g.add(e):i.h=e}function ms(i,e){i.h&&i.h==e?i.h=null:i.g&&i.g.has(e)&&i.g.delete(e)}function Fi(i){if(null!=i.h)return i.i.concat(i.h.F);if(null!=i.g&&0!==i.g.size){let e=i.i;for(const n of i.g.values())e=e.concat(n.F);return e}return Ie(i.i)}Lr.prototype.cancel=function(){if(this.i=Fi(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const i of this.g.values())i.cancel();this.g.clear()}};var yi=class{stringify(i){return X.JSON.stringify(i,void 0)}parse(i){return X.JSON.parse(i,void 0)}};function Gs(){this.g=new yi}function Qn(i,e,n){const o=n||"";try{zs(i,function(u,c){let g=u;pe(u)&&(g=Pi(u)),e.push(o+c+"="+encodeURIComponent(g))})}catch(u){throw e.push(o+"type="+encodeURIComponent("_badmap")),u}}function Zi(i,e,n,o,u){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,u(o)}catch{}}function eo(i){this.l=i.ec||null,this.j=i.ob||!1}function Li(i,e){Un.call(this),this.F=i,this.u=e,this.m=void 0,this.readyState=fi,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}ut(eo,tr),eo.prototype.g=function(){return new Li(this.l,this.j)},eo.prototype.i=function(i){return function(){return i}}({}),ut(Li,Un);var fi=0;function xo(i){i.j.read().then(i.Xa.bind(i)).catch(i.ka.bind(i))}function _s(i){i.readyState=4,i.l=null,i.j=null,i.A=null,Tr(i)}function Tr(i){i.onreadystatechange&&i.onreadystatechange.call(i)}(ye=Li.prototype).open=function(i,e){if(this.readyState!=fi)throw this.abort(),Error("Error reopening a connection");this.C=i,this.B=e,this.readyState=1,Tr(this)},ye.send=function(i){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};i&&(e.body=i),(this.F||X).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},ye.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,_s(this)),this.readyState=fi},ye.$a=function(i){if(this.g&&(this.l=i,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=i.headers,this.readyState=2,Tr(this)),this.g&&(this.readyState=3,Tr(this),this.g)))if("arraybuffer"===this.responseType)i.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof X.ReadableStream<"u"&&"body"in i){if(this.j=i.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;xo(this)}else i.text().then(this.Za.bind(this),this.ka.bind(this))},ye.Xa=function(i){if(this.g){if(this.u&&i.value)this.response.push(i.value);else if(!this.u){var e=i.value?i.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!i.done}))&&(this.response=this.responseText+=e)}i.done?_s(this):Tr(this),3==this.readyState&&xo(this)}},ye.Za=function(i){this.g&&(this.response=this.responseText=i,_s(this))},ye.Ya=function(i){this.g&&(this.response=i,_s(this))},ye.ka=function(){this.g&&_s(this)},ye.setRequestHeader=function(i,e){this.v.append(i,e)},ye.getResponseHeader=function(i){return this.h&&this.h.get(i.toLowerCase())||""},ye.getAllResponseHeaders=function(){if(!this.h)return"";const i=[],e=this.h.entries();for(var n=e.next();!n.done;)i.push((n=n.value)[0]+": "+n[1]),n=e.next();return i.join("\r\n")},Object.defineProperty(Li.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(i){this.m=i?"include":"same-origin"}});var yo=X.JSON.parse;function vn(i){Un.call(this),this.headers=new Map,this.u=i||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=Vi,this.L=this.M=!1}ut(vn,Un);var Vi="",ys=/^https?$/i,ko=["POST","PUT"];function Ui(i,e){i.h=!1,i.g&&(i.l=!0,i.g.abort(),i.l=!1),i.j=e,i.m=5,ao(i),Fo(i)}function ao(i){i.F||(i.F=!0,Nn(i,"complete"),Nn(i,"error"))}function Cs(i){if(i.h&&typeof De<"u"&&(!i.C[1]||4!=Bi(i)||2!=i.da()))if(i.v&&4==Bi(i))Ft(i.La,0,i);else if(Nn(i,"readystatechange"),4==Bi(i)){i.h=!1;try{const g=i.da();e:switch(g){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var o;if(o=0===g){var u=String(i.I).match(Wn)[1]||null;!u&&X.self&&X.self.location&&(u=X.self.location.protocol.slice(0,-1)),o=!ys.test(u?u.toLowerCase():"")}n=o}if(n)Nn(i,"complete"),Nn(i,"success");else{i.m=6;try{var c=2<Bi(i)?i.g.statusText:""}catch{c=""}i.j=c+" ["+i.da()+"]",ao(i)}}finally{Fo(i)}}}function Fo(i,e){if(i.g){za(i);const n=i.g,o=i.C[0]?()=>{}:null;i.g=null,i.C=null,e||Nn(i,"ready");try{n.onreadystatechange=o}catch{}}}function za(i){i.g&&i.L&&(i.g.ontimeout=null),i.A&&(X.clearTimeout(i.A),i.A=null)}function Bi(i){return i.g?i.g.readyState:0}function Ci(i){try{if(!i.g)return null;if("response"in i.g)return i.g.response;switch(i.K){case Vi:case"text":return i.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in i.g)return i.g.mozResponseArrayBuffer}return null}catch{return null}}function au(i){let e="";return Sn(i,function(n,o){e+=o,e+=":",e+=n,e+="\r\n"}),e}function Lo(i,e,n){e:{for(o in n){var o=!1;break e}o=!0}o||(n=au(n),"string"==typeof i?null!=n&&encodeURIComponent(String(n)):Bn(i,e,n))}function j(i,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[i]||e}function H(i){this.Ga=0,this.j=[],this.l=new ls,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=j("failFast",!1,i),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=j("baseRetryDelayMs",5e3,i),this.hb=j("retryDelaySeedMs",1e4,i),this.eb=j("forwardChannelMaxRetries",2,i),this.xa=j("forwardChannelRequestTimeoutMs",2e4,i),this.va=i&&i.xmlHttpFactory||void 0,this.Ha=i&&i.useFetchStreams||!1,this.L=void 0,this.J=i&&i.supportsCrossDomainXhr||!1,this.K="",this.i=new Lr(i&&i.concurrentRequestLimit),this.Ja=new Gs,this.P=i&&i.fastHandshake||!1,this.O=i&&i.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=i&&i.bc||!1,i&&i.Ea&&this.l.Ea(),i&&i.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&i&&i.detectBufferingProxy||!1,this.qa=void 0,i&&i.longPollingTimeout&&0<i.longPollingTimeout&&(this.qa=i.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function ae(i){if(O(i),3==i.H){var e=i.W++,n=mi(i.I);if(Bn(n,"SID",i.K),Bn(n,"RID",e),Bn(n,"TYPE","terminate"),tt(i,n),(e=new cr(i,i.l,e)).L=2,e.A=rs(mi(n)),n=!1,X.navigator&&X.navigator.sendBeacon)try{n=X.navigator.sendBeacon(e.A.toString(),"")}catch{}!n&&X.Image&&((new Image).src=e.A,n=!0),n||(e.g=Ar(e.l,null),e.g.ha(e.A)),e.G=Date.now(),mo(e)}Br(i)}function b(i){i.g&&(dr(i),i.g.cancel(),i.g=null)}function O(i){b(i),i.u&&(X.clearTimeout(i.u),i.u=null),nr(i),i.i.cancel(),i.m&&("number"==typeof i.m&&X.clearTimeout(i.m),i.m=null)}function C(i){if(!mr(i.i)&&!i.m){i.m=!0;var e=i.Na;z||oe(),F||(z(),F=!0),k.add(e,i),i.C=0}}function de(i,e){var n;n=e?e.m:i.W++;const o=mi(i.I);Bn(o,"SID",i.K),Bn(o,"RID",n),Bn(o,"AID",i.V),tt(i,o),i.o&&i.s&&Lo(o,i.o,i.s),n=new cr(i,i.l,n,i.C+1),null===i.o&&(n.I=i.s),e&&(i.j=e.F.concat(i.j)),e=pt(i,n,1e3),n.setTimeout(Math.round(.5*i.xa)+Math.round(.5*i.xa*Math.random())),Oo(i.i,n),hs(n,o,e)}function tt(i,e){i.na&&Sn(i.na,function(n,o){Bn(e,o,n)}),i.h&&zs({},function(n,o){Bn(e,o,n)})}function pt(i,e,n){n=Math.min(i.j.length,n);var o=i.h?nt(i.h.Va,i.h,i):null;e:{var u=i.j;let c=-1;for(;;){const g=["count="+n];-1==c?0<n?(c=u[0].g,g.push("ofs="+c)):c=0:g.push("ofs="+c);let S=!0;for(let x=0;x<n;x++){let G=u[x].g;const te=u[x].map;if(G-=c,0>G)c=Math.max(0,u[x].g-100),S=!1;else try{Qn(te,g,"req"+G+"_")}catch{o&&o(te)}}if(S){o=g.join("&");break e}}}return i=i.j.splice(0,n),e.F=i,o}function ln(i){if(!i.g&&!i.u){i.ba=1;var e=i.Ma;z||oe(),F||(z(),F=!0),k.add(e,i),i.A=0}}function sr(i){return!(i.g||i.u||3<=i.A||(i.ba++,i.u=ii(nt(i.Ma,i),Zr(i,i.A)),i.A++,0))}function dr(i){null!=i.B&&(X.clearTimeout(i.B),i.B=null)}function Dr(i){i.g=new cr(i,i.l,"rpc",i.ba),null===i.o&&(i.g.I=i.s),i.g.O=0;var e=mi(i.wa);Bn(e,"RID","rpc"),Bn(e,"SID",i.K),Bn(e,"AID",i.V),Bn(e,"CI",i.G?"0":"1"),!i.G&&i.qa&&Bn(e,"TO",i.qa),Bn(e,"TYPE","xmlhttp"),tt(i,e),i.o&&i.s&&Lo(e,i.o,i.s),i.L&&i.g.setTimeout(i.L);var n=i.g;i=i.pa,n.L=1,n.A=rs(mi(e)),n.u=null,n.S=!0,fs(n,i)}function nr(i){null!=i.v&&(X.clearTimeout(i.v),i.v=null)}function si(i,e){var n=null;if(i.g==e){nr(i),dr(i),i.g=null;var o=2}else{if(!_i(i.i,e))return;n=e.F,ms(i.i,e),o=1}if(0!=i.H)if(e.i)if(1==o){n=e.u?e.u.length:0,e=Date.now()-e.G;var u=i.C;Nn(o=Dt(),new lr(o,n)),C(i)}else ln(i);else if(3==(u=e.s)||0==u&&0<e.ca||!(1==o&&function Z(i,e){return!(Or(i.i)>=i.i.j-(i.m?1:0)||(i.m?(i.j=e.F.concat(i.j),0):1==i.H||2==i.H||i.C>=(i.cb?0:i.eb)||(i.m=ii(nt(i.Na,i,e),Zr(i,i.C)),i.C++,0)))}(i,e)||2==o&&sr(i)))switch(n&&0<n.length&&(e=i.i,e.i=e.i.concat(n)),u){case 1:ss(i,5);break;case 4:ss(i,10);break;case 3:ss(i,6);break;default:ss(i,2)}}function Zr(i,e){let n=i.ab+Math.floor(Math.random()*i.hb);return i.isActive()||(n*=2),n*e}function ss(i,e){if(i.l.info("Error code "+e),2==e){var n=null;i.h&&(n=null);var o=nt(i.pb,i);n||(n=new Nr("//www.google.com/images/cleardot.gif"),X.location&&"http"==X.location.protocol||ci(n,"https"),rs(n)),function va(i,e){const n=new ls;if(X.Image){const o=new Image;o.onload=Vt(Zi,n,o,"TestLoadImage: loaded",!0,e),o.onerror=Vt(Zi,n,o,"TestLoadImage: error",!1,e),o.onabort=Vt(Zi,n,o,"TestLoadImage: abort",!1,e),o.ontimeout=Vt(Zi,n,o,"TestLoadImage: timeout",!1,e),X.setTimeout(function(){o.ontimeout&&o.ontimeout()},1e4),o.src=i}else e(!1)}(n.toString(),o)}else kn(2);i.H=0,i.h&&i.h.za(e),Br(i),O(i)}function Br(i){if(i.H=0,i.ma=[],i.h){const e=Fi(i.i);(0!=e.length||0!=i.j.length)&&(Je(i.ma,e),Je(i.ma,i.j),i.i.i.length=0,Ie(i.j),i.j.length=0),i.h.ya()}}function bi(i,e,n){var o=n instanceof Nr?mi(n):new Nr(n);if(""!=o.g)e&&(o.g=e+"."+o.g),oo(o,o.m);else{var u=X.location;o=u.protocol,e=e?e+"."+u.hostname:u.hostname,u=+u.port;var c=new Nr(null);o&&ci(c,o),e&&(c.g=e),u&&oo(c,u),n&&(c.l=n),o=c}return e=i.Da,(n=i.F)&&e&&Bn(o,n,e),Bn(o,"VER",i.ra),tt(i,o),o}function Ar(i,e,n){if(e&&!i.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new vn(i.Ha&&!i.va?new eo({ob:n}):i.va)).Oa(i.J),e}function Fs(){}function vs(){if(kt&&!(10<=Number(on)))throw Error("Environmental error: no available transport.")}function oi(i,e){Un.call(this),this.g=new H(e),this.l=i,this.h=e&&e.messageUrlParams||null,i=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(i?i["X-Client-Protocol"]="webchannel":i={"X-Client-Protocol":"webchannel"}),this.g.s=i,i=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(i?i["X-WebChannel-Content-Type"]=e.messageContentType:i={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(i?i["X-WebChannel-Client-Profile"]=e.Ca:i={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=i,(i=e&&e.cc)&&!et(i)&&(this.g.o=i),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!et(e)&&(this.g.F=e,null!==(i=this.h)&&e in i&&e in(i=this.h)&&delete i[e]),this.j=new Si(this)}function to(i){Qs.call(this),i.__headers__&&(this.headers=i.__headers__,this.statusCode=i.__status__,delete i.__headers__,delete i.__status__);var e=i.__sm__;if(e){e:{for(const n in e){i=n;break e}i=void 0}(this.i=i)&&(i=this.i,e=null!==e&&i in e?e[i]:void 0),this.data=e}else this.data=i}function bs(){Ys.call(this),this.status=1}function Si(i){this.g=i}function Ls(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function wa(i,e,n){n||(n=0);var o=Array(16);if("string"==typeof e)for(var u=0;16>u;++u)o[u]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(u=0;16>u;++u)o[u]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;var c=i.g[3],g=(e=i.g[0])+(c^(n=i.g[1])&((u=i.g[2])^c))+o[0]+3614090360&4294967295;g=(n=(u=(c=(e=(n=(u=(c=(e=(n=(u=(c=(e=(n=(u=(c=(e=(n=(u=(c=(e=(n=(u=(c=(e=(n=(u=(c=(e=(n=(u=(c=(e=(n=(u=(c=(e=(n=(u=(c=(e=(n=(u=(c=(e=(n=(u=(c=(e=(n=(u=(c=(e=(n=(u=(c=(e=(n=(u=(c=(e=n+(g<<7&4294967295|g>>>25))+((g=c+(u^e&(n^u))+o[1]+3905402710&4294967295)<<12&4294967295|g>>>20))+((g=u+(n^c&(e^n))+o[2]+606105819&4294967295)<<17&4294967295|g>>>15))+((g=n+(e^u&(c^e))+o[3]+3250441966&4294967295)<<22&4294967295|g>>>10))+((g=e+(c^n&(u^c))+o[4]+4118548399&4294967295)<<7&4294967295|g>>>25))+((g=c+(u^e&(n^u))+o[5]+1200080426&4294967295)<<12&4294967295|g>>>20))+((g=u+(n^c&(e^n))+o[6]+2821735955&4294967295)<<17&4294967295|g>>>15))+((g=n+(e^u&(c^e))+o[7]+4249261313&4294967295)<<22&4294967295|g>>>10))+((g=e+(c^n&(u^c))+o[8]+1770035416&4294967295)<<7&4294967295|g>>>25))+((g=c+(u^e&(n^u))+o[9]+2336552879&4294967295)<<12&4294967295|g>>>20))+((g=u+(n^c&(e^n))+o[10]+4294925233&4294967295)<<17&4294967295|g>>>15))+((g=n+(e^u&(c^e))+o[11]+2304563134&4294967295)<<22&4294967295|g>>>10))+((g=e+(c^n&(u^c))+o[12]+1804603682&4294967295)<<7&4294967295|g>>>25))+((g=c+(u^e&(n^u))+o[13]+4254626195&4294967295)<<12&4294967295|g>>>20))+((g=u+(n^c&(e^n))+o[14]+2792965006&4294967295)<<17&4294967295|g>>>15))+((g=n+(e^u&(c^e))+o[15]+1236535329&4294967295)<<22&4294967295|g>>>10))+((g=e+(u^c&(n^u))+o[1]+4129170786&4294967295)<<5&4294967295|g>>>27))+((g=c+(n^u&(e^n))+o[6]+3225465664&4294967295)<<9&4294967295|g>>>23))+((g=u+(e^n&(c^e))+o[11]+643717713&4294967295)<<14&4294967295|g>>>18))+((g=n+(c^e&(u^c))+o[0]+3921069994&4294967295)<<20&4294967295|g>>>12))+((g=e+(u^c&(n^u))+o[5]+3593408605&4294967295)<<5&4294967295|g>>>27))+((g=c+(n^u&(e^n))+o[10]+38016083&4294967295)<<9&4294967295|g>>>23))+((g=u+(e^n&(c^e))+o[15]+3634488961&4294967295)<<14&4294967295|g>>>18))+((g=n+(c^e&(u^c))+o[4]+3889429448&4294967295)<<20&4294967295|g>>>12))+((g=e+(u^c&(n^u))+o[9]+568446438&4294967295)<<5&4294967295|g>>>27))+((g=c+(n^u&(e^n))+o[14]+3275163606&4294967295)<<9&4294967295|g>>>23))+((g=u+(e^n&(c^e))+o[3]+4107603335&4294967295)<<14&4294967295|g>>>18))+((g=n+(c^e&(u^c))+o[8]+1163531501&4294967295)<<20&4294967295|g>>>12))+((g=e+(u^c&(n^u))+o[13]+2850285829&4294967295)<<5&4294967295|g>>>27))+((g=c+(n^u&(e^n))+o[2]+4243563512&4294967295)<<9&4294967295|g>>>23))+((g=u+(e^n&(c^e))+o[7]+1735328473&4294967295)<<14&4294967295|g>>>18))+((g=n+(c^e&(u^c))+o[12]+2368359562&4294967295)<<20&4294967295|g>>>12))+((g=e+(n^u^c)+o[5]+4294588738&4294967295)<<4&4294967295|g>>>28))+((g=c+(e^n^u)+o[8]+2272392833&4294967295)<<11&4294967295|g>>>21))+((g=u+(c^e^n)+o[11]+1839030562&4294967295)<<16&4294967295|g>>>16))+((g=n+(u^c^e)+o[14]+4259657740&4294967295)<<23&4294967295|g>>>9))+((g=e+(n^u^c)+o[1]+2763975236&4294967295)<<4&4294967295|g>>>28))+((g=c+(e^n^u)+o[4]+1272893353&4294967295)<<11&4294967295|g>>>21))+((g=u+(c^e^n)+o[7]+4139469664&4294967295)<<16&4294967295|g>>>16))+((g=n+(u^c^e)+o[10]+3200236656&4294967295)<<23&4294967295|g>>>9))+((g=e+(n^u^c)+o[13]+681279174&4294967295)<<4&4294967295|g>>>28))+((g=c+(e^n^u)+o[0]+3936430074&4294967295)<<11&4294967295|g>>>21))+((g=u+(c^e^n)+o[3]+3572445317&4294967295)<<16&4294967295|g>>>16))+((g=n+(u^c^e)+o[6]+76029189&4294967295)<<23&4294967295|g>>>9))+((g=e+(n^u^c)+o[9]+3654602809&4294967295)<<4&4294967295|g>>>28))+((g=c+(e^n^u)+o[12]+3873151461&4294967295)<<11&4294967295|g>>>21))+((g=u+(c^e^n)+o[15]+530742520&4294967295)<<16&4294967295|g>>>16))+((g=n+(u^c^e)+o[2]+3299628645&4294967295)<<23&4294967295|g>>>9))+((g=e+(u^(n|~c))+o[0]+4096336452&4294967295)<<6&4294967295|g>>>26))+((g=c+(n^(e|~u))+o[7]+1126891415&4294967295)<<10&4294967295|g>>>22))+((g=u+(e^(c|~n))+o[14]+2878612391&4294967295)<<15&4294967295|g>>>17))+((g=n+(c^(u|~e))+o[5]+4237533241&4294967295)<<21&4294967295|g>>>11))+((g=e+(u^(n|~c))+o[12]+1700485571&4294967295)<<6&4294967295|g>>>26))+((g=c+(n^(e|~u))+o[3]+2399980690&4294967295)<<10&4294967295|g>>>22))+((g=u+(e^(c|~n))+o[10]+4293915773&4294967295)<<15&4294967295|g>>>17))+((g=n+(c^(u|~e))+o[1]+2240044497&4294967295)<<21&4294967295|g>>>11))+((g=e+(u^(n|~c))+o[8]+1873313359&4294967295)<<6&4294967295|g>>>26))+((g=c+(n^(e|~u))+o[15]+4264355552&4294967295)<<10&4294967295|g>>>22))+((g=u+(e^(c|~n))+o[6]+2734768916&4294967295)<<15&4294967295|g>>>17))+((g=n+(c^(u|~e))+o[13]+1309151649&4294967295)<<21&4294967295|g>>>11))+((c=(e=n+((g=e+(u^(n|~c))+o[4]+4149444226&4294967295)<<6&4294967295|g>>>26))+((g=c+(n^(e|~u))+o[11]+3174756917&4294967295)<<10&4294967295|g>>>22))^((u=c+((g=u+(e^(c|~n))+o[2]+718787259&4294967295)<<15&4294967295|g>>>17))|~e))+o[9]+3951481745&4294967295,i.g[0]=i.g[0]+e&4294967295,i.g[1]=i.g[1]+(u+(g<<21&4294967295|g>>>11))&4294967295,i.g[2]=i.g[2]+u&4294967295,i.g[3]=i.g[3]+c&4294967295}function _r(i,e){this.h=e;for(var n=[],o=!0,u=i.length-1;0<=u;u--){var c=0|i[u];o&&c==e||(n[u]=c,o=!1)}this.g=n}(ye=vn.prototype).Oa=function(i){this.M=i},ye.ha=function(i,e,n,o){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+i);e=e?e.toUpperCase():"GET",this.I=i,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():go.g(),this.C=function cs(i){return i.h||(i.h=i.i())}(this.u?this.u:go),this.g.onreadystatechange=nt(this.La,this);try{this.G=!0,this.g.open(e,String(i),!0),this.G=!1}catch(c){return void Ui(this,c)}if(i=n||"",n=new Map(this.headers),o)if(Object.getPrototypeOf(o)===Object.prototype)for(var u in o)n.set(u,o[u]);else{if("function"!=typeof o.keys||"function"!=typeof o.get)throw Error("Unknown input type for opt_headers: "+String(o));for(const c of o.keys())n.set(c,o.get(c))}o=Array.from(n.keys()).find(c=>"content-type"==c.toLowerCase()),u=X.FormData&&i instanceof X.FormData,!(0<=be(ko,e))||o||u||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[c,g]of n)this.g.setRequestHeader(c,g);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{za(this),0<this.B&&((this.L=function Ea(i){return kt&&"number"==typeof i.timeout&&void 0!==i.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=nt(this.ua,this)):this.A=Ft(this.ua,this.B,this)),this.v=!0,this.g.send(i),this.v=!1}catch(c){Ui(this,c)}},ye.ua=function(){typeof De<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Nn(this,"timeout"),this.abort(8))},ye.abort=function(i){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=i||7,Nn(this,"complete"),Nn(this,"abort"),Fo(this))},ye.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Fo(this,!0)),vn.$.N.call(this)},ye.La=function(){this.s||(this.G||this.v||this.l?Cs(this):this.kb())},ye.kb=function(){Cs(this)},ye.isActive=function(){return!!this.g},ye.da=function(){try{return 2<Bi(this)?this.g.status:-1}catch{return-1}},ye.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},ye.Wa=function(i){if(this.g){var e=this.g.responseText;return i&&0==e.indexOf(i)&&(e=e.substring(i.length)),yo(e)}},ye.Ia=function(){return this.m},ye.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(ye=H.prototype).ra=8,ye.H=1,ye.Na=function(i){if(this.m)if(this.m=null,1==this.H){if(!i){this.W=Math.floor(1e5*Math.random()),i=this.W++;const u=new cr(this,this.l,i);let c=this.s;if(this.U&&(c?(c=Vn(c),xn(c,this.U)):c=this.U),null!==this.o||this.O||(u.I=c,c=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){var o=this.j[n];if(void 0===(o="__data__"in o.map&&"string"==typeof(o=o.map.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=n;break e}if(4096===e||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=pt(this,u,e),Bn(n=mi(this.I),"RID",i),Bn(n,"CVER",22),this.F&&Bn(n,"X-HTTP-Session-Id",this.F),tt(this,n),c&&(this.O?e="headers="+encodeURIComponent(String(au(c)))+"&"+e:this.o&&Lo(n,this.o,c)),Oo(this.i,u),this.bb&&Bn(n,"TYPE","init"),this.P?(Bn(n,"$req",e),Bn(n,"SID","null"),u.aa=!0,hs(u,n,null)):hs(u,n,e),this.H=2}}else 3==this.H&&(i?de(this,i):0==this.j.length||mr(this.i)||de(this))},ye.Ma=function(){if(this.u=null,Dr(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var i=2*this.S;this.l.info("BP detection timer enabled: "+i),this.B=ii(nt(this.jb,this),i)}},ye.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,kn(10),b(this),Dr(this))},ye.ib=function(){null!=this.v&&(this.v=null,b(this),sr(this),kn(19))},ye.pb=function(i){i?(this.l.info("Successfully pinged google.com"),kn(2)):(this.l.info("Failed to ping google.com"),kn(1))},ye.isActive=function(){return!!this.h&&this.h.isActive(this)},(ye=Fs.prototype).Ba=function(){},ye.Aa=function(){},ye.za=function(){},ye.ya=function(){},ye.isActive=function(){return!0},ye.Va=function(){},vs.prototype.g=function(i,e){return new oi(i,e)},ut(oi,Un),oi.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var i=this.g,e=this.l,n=this.h||void 0;kn(0),i.Y=e,i.na=n||{},i.G=i.aa,i.I=bi(i,null,i.Y),C(i)},oi.prototype.close=function(){ae(this.g)},oi.prototype.u=function(i){var e=this.g;if("string"==typeof i){var n={};n.__data__=i,i=n}else this.v&&((n={}).__data__=Pi(i),i=n);e.j.push(new class{constructor(i,e){this.g=i,this.map=e}}(e.fb++,i)),3==e.H&&C(e)},oi.prototype.N=function(){this.g.h=null,delete this.j,ae(this.g),delete this.g,oi.$.N.call(this)},ut(to,Qs),ut(bs,Ys),ut(Si,Fs),Si.prototype.Ba=function(){Nn(this.g,"a")},Si.prototype.Aa=function(i){Nn(this.g,new to(i))},Si.prototype.za=function(i){Nn(this.g,new bs)},Si.prototype.ya=function(){Nn(this.g,"b")},ut(Ls,function Ia(){this.blockSize=-1}),Ls.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Ls.prototype.j=function(i,e){void 0===e&&(e=i.length);for(var n=e-this.blockSize,o=this.m,u=this.h,c=0;c<e;){if(0==u)for(;c<=n;)wa(this,i,c),c+=this.blockSize;if("string"==typeof i){for(;c<e;)if(o[u++]=i.charCodeAt(c++),u==this.blockSize){wa(this,o),u=0;break}}else for(;c<e;)if(o[u++]=i[c++],u==this.blockSize){wa(this,o),u=0;break}}this.h=u,this.i+=e},Ls.prototype.l=function(){var i=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);i[0]=128;for(var e=1;e<i.length-8;++e)i[e]=0;var n=8*this.i;for(e=i.length-8;e<i.length;++e)i[e]=255&n,n/=256;for(this.j(i),i=Array(16),e=n=0;4>e;++e)for(var o=0;32>o;o+=8)i[n++]=this.g[e]>>>o&255;return i};var Vo={};function Xo(i){return-128<=i&&128>i?function Pn(i,e){var n=Vo;return Object.prototype.hasOwnProperty.call(n,i)?n[i]:n[i]=e(i)}(i,function(e){return new _r([0|e],0>e?-1:0)}):new _r([0|i],0>i?-1:0)}function Vs(i){if(isNaN(i)||!isFinite(i))return ta;if(0>i)return Ss(Vs(-i));for(var e=[],n=1,o=0;i>=n;o++)e[o]=i/n|0,n*=Pa;return new _r(e,0)}var Pa=4294967296,ta=Xo(0),Ma=Xo(1),vo=Xo(16777216);function os(i){if(0!=i.h)return!1;for(var e=0;e<i.g.length;e++)if(0!=i.g[e])return!1;return!0}function uo(i){return-1==i.h}function Ss(i){for(var e=i.g.length,n=[],o=0;o<e;o++)n[o]=~i.g[o];return new _r(n,~i.h).add(Ma)}function Wa(i,e){return i.add(Ss(e))}function na(i,e){for(;(65535&i[e])!=i[e];)i[e+1]+=i[e]>>>16,i[e]&=65535,e++}function Na(i,e){this.g=i,this.h=e}function ha(i,e){if(os(e))throw Error("division by zero");if(os(i))return new Na(ta,ta);if(uo(i))return e=ha(Ss(i),e),new Na(Ss(e.g),Ss(e.h));if(uo(e))return e=ha(i,Ss(e)),new Na(Ss(e.g),e.h);if(30<i.g.length){if(uo(i)||uo(e))throw Error("slowDivide_ only works with positive integers.");for(var n=Ma,o=e;0>=o.X(i);)n=Au(n),o=Au(o);var u=no(n,1),c=no(o,1);for(o=no(o,2),n=no(n,2);!os(o);){var g=c.add(o);0>=g.X(i)&&(u=u.add(n),c=g),o=no(o,1),n=no(n,1)}return e=Wa(i,u.R(e)),new Na(u,e)}for(u=ta;0<=i.X(e);){for(n=Math.max(1,Math.floor(i.ea()/e.ea())),o=48>=(o=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,o-48),g=(c=Vs(n)).R(e);uo(g)||0<g.X(i);)g=(c=Vs(n-=o)).R(e);os(c)&&(c=Ma),u=u.add(c),i=Wa(i,g)}return new Na(u,i)}function Au(i){for(var e=i.g.length+1,n=[],o=0;o<e;o++)n[o]=i.D(o)<<1|i.D(o-1)>>>31;return new _r(n,i.h)}function no(i,e){var n=e>>5;e%=32;for(var o=i.g.length-n,u=[],c=0;c<o;c++)u[c]=0<e?i.D(c+n)>>>e|i.D(c+n+1)<<32-e:i.D(c+n);return new _r(u,i.h)}(ye=_r.prototype).ea=function(){if(uo(this))return-Ss(this).ea();for(var i=0,e=1,n=0;n<this.g.length;n++){var o=this.D(n);i+=(0<=o?o:Pa+o)*e,e*=Pa}return i},ye.toString=function(i){if(2>(i=i||10)||36<i)throw Error("radix out of range: "+i);if(os(this))return"0";if(uo(this))return"-"+Ss(this).toString(i);for(var e=Vs(Math.pow(i,6)),n=this,o="";;){var u=ha(n,e).g,c=((0<(n=Wa(n,u.R(e))).g.length?n.g[0]:n.h)>>>0).toString(i);if(os(n=u))return c+o;for(;6>c.length;)c="0"+c;o=c+o}},ye.D=function(i){return 0>i?0:i<this.g.length?this.g[i]:this.h},ye.X=function(i){return uo(i=Wa(this,i))?-1:os(i)?0:1},ye.abs=function(){return uo(this)?Ss(this):this},ye.add=function(i){for(var e=Math.max(this.g.length,i.g.length),n=[],o=0,u=0;u<=e;u++){var c=o+(65535&this.D(u))+(65535&i.D(u)),g=(c>>>16)+(this.D(u)>>>16)+(i.D(u)>>>16);o=g>>>16,n[u]=(g&=65535)<<16|(c&=65535)}return new _r(n,-2147483648&n[n.length-1]?-1:0)},ye.R=function(i){if(os(this)||os(i))return ta;if(uo(this))return uo(i)?Ss(this).R(Ss(i)):Ss(Ss(this).R(i));if(uo(i))return Ss(this.R(Ss(i)));if(0>this.X(vo)&&0>i.X(vo))return Vs(this.ea()*i.ea());for(var e=this.g.length+i.g.length,n=[],o=0;o<2*e;o++)n[o]=0;for(o=0;o<this.g.length;o++)for(var u=0;u<i.g.length;u++){var c=this.D(o)>>>16,g=65535&this.D(o),S=i.D(u)>>>16,x=65535&i.D(u);n[2*o+2*u]+=g*x,na(n,2*o+2*u),n[2*o+2*u+1]+=c*x,na(n,2*o+2*u+1),n[2*o+2*u+1]+=g*S,na(n,2*o+2*u+1),n[2*o+2*u+2]+=c*S,na(n,2*o+2*u+2)}for(o=0;o<e;o++)n[o]=n[2*o+1]<<16|n[2*o];for(o=e;o<2*e;o++)n[o]=0;return new _r(n,0)},ye.gb=function(i){return ha(this,i).h},ye.and=function(i){for(var e=Math.max(this.g.length,i.g.length),n=[],o=0;o<e;o++)n[o]=this.D(o)&i.D(o);return new _r(n,this.h&i.h)},ye.or=function(i){for(var e=Math.max(this.g.length,i.g.length),n=[],o=0;o<e;o++)n[o]=this.D(o)|i.D(o);return new _r(n,this.h|i.h)},ye.xor=function(i){for(var e=Math.max(this.g.length,i.g.length),n=[],o=0;o<e;o++)n[o]=this.D(o)^i.D(o);return new _r(n,this.h^i.h)},vs.prototype.createWebChannel=vs.prototype.g,oi.prototype.send=oi.prototype.u,oi.prototype.open=oi.prototype.m,oi.prototype.close=oi.prototype.close,Ts.NO_ERROR=0,Ts.TIMEOUT=8,Ts.HTTP_ERROR=6,Mo.COMPLETE="complete",Oi.EventType=ds,ds.OPEN="a",ds.CLOSE="b",ds.ERROR="c",ds.MESSAGE="d",Un.prototype.listen=Un.prototype.O,vn.prototype.listenOnce=vn.prototype.P,vn.prototype.getLastError=vn.prototype.Sa,vn.prototype.getLastErrorCode=vn.prototype.Ia,vn.prototype.getStatus=vn.prototype.da,vn.prototype.getResponseJson=vn.prototype.Wa,vn.prototype.getResponseText=vn.prototype.ja,vn.prototype.send=vn.prototype.ha,vn.prototype.setWithCredentials=vn.prototype.Oa,Ls.prototype.digest=Ls.prototype.l,Ls.prototype.reset=Ls.prototype.reset,Ls.prototype.update=Ls.prototype.j,_r.prototype.add=_r.prototype.add,_r.prototype.multiply=_r.prototype.R,_r.prototype.modulo=_r.prototype.gb,_r.prototype.compare=_r.prototype.X,_r.prototype.toNumber=_r.prototype.ea,_r.prototype.toString=_r.prototype.toString,_r.prototype.getBits=_r.prototype.D,_r.fromNumber=Vs,_r.fromString=function ea(i,e){if(0==i.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==i.charAt(0))return Ss(ea(i.substring(1),e));if(0<=i.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=Vs(Math.pow(e,8)),o=ta,u=0;u<i.length;u+=8){var c=Math.min(8,i.length-u),g=parseInt(i.substring(u,u+c),e);8>c?(c=Vs(Math.pow(e,c)),o=o.R(c).add(Vs(g))):o=(o=o.R(n)).add(Vs(g))}return o};var ra=Ce.createWebChannelTransport=function(){return new vs},A=Ce.getStatEventTarget=function(){return Dt()},J=Ce.ErrorCode=Ts,L=Ce.EventType=Mo,Q=Ce.Event=ke,ge=Ce.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},lt=(Ce.FetchXmlHttpFactory=eo,Ce.WebChannel=Oi),Xt=Ce.XhrIo=vn,Vr=Ce.Md5=Ls,yr=Ce.Integer=_r;const jr="@firebase/firestore";class pn{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}pn.UNAUTHENTICATED=new pn(null),pn.GOOGLE_CREDENTIALS=new pn("google-credentials-uid"),pn.FIRST_PARTY=new pn("first-party-uid"),pn.MOCK_USER=new pn("mock-user");let Qr="10.10.0";const rr=new ve.Yd("@firebase/firestore");function vi(){return rr.logLevel}function Us(i){rr.setLogLevel(i)}function dt(i,...e){if(rr.logLevel<=ve.in.DEBUG){const n=e.map(Qo);rr.debug(`Firestore (${Qr}): ${i}`,...n)}}function $r(i,...e){if(rr.logLevel<=ve.in.ERROR){const n=e.map(Qo);rr.error(`Firestore (${Qr}): ${i}`,...n)}}function Jr(i,...e){if(rr.logLevel<=ve.in.WARN){const n=e.map(Qo);rr.warn(`Firestore (${Qr}): ${i}`,...n)}}function Qo(i){if("string"==typeof i)return i;try{return JSON.stringify(i)}catch{return i}}function Rt(i="Unexpected state"){const e=`FIRESTORE (${Qr}) INTERNAL ASSERTION FAILED: `+i;throw $r(e),new Error(e)}function en(i,e){i||Rt()}function jc(i,e){i||Rt()}function _t(i,e){return i}const Xe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class gt extends me.ZR{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class qr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}class wl{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class ec{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(pn.UNAUTHENTICATED))}shutdown(){}}class Rs{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class Uo{constructor(e){this.t=e,this.currentUser=pn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){var o=this;let u=this.i;const c=G=>this.i!==u?(u=this.i,n(G)):Promise.resolve();let g=new qr;this.o=()=>{this.i++,this.currentUser=this.u(),g.resolve(),g=new qr,e.enqueueRetryable(()=>c(this.currentUser))};const S=()=>{const G=g;e.enqueueRetryable((0,h.Z)(function*(){yield G.promise,yield c(o.currentUser)}))},x=G=>{dt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=G,this.auth.addAuthTokenListener(this.o),S()};this.t.onInit(G=>x(G)),setTimeout(()=>{if(!this.auth){const G=this.t.getImmediate({optional:!0});G?x(G):(dt("FirebaseAuthCredentialsProvider","Auth not yet detected"),g.resolve(),g=new qr)}},0),S()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(o=>this.i!==e?(dt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):o?(en("string"==typeof o.accessToken),new wl(o.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return en(null===e||"string"==typeof e),new pn(e)}}class $c{constructor(e,n,o){this.l=e,this.h=n,this.P=o,this.type="FirstParty",this.user=pn.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class $u{constructor(e,n,o){this.l=e,this.h=n,this.P=o}getToken(){return Promise.resolve(new $c(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(pn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class tc{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Yo{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const o=c=>{null!=c.error&&dt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const g=c.token!==this.R;return this.R=c.token,dt("FirebaseAppCheckTokenProvider",`Received ${g?"new":"existing"} token.`),g?n(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable(()=>o(c))};const u=c=>{dt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.appCheck.addTokenListener(this.o)};this.A.onInit(c=>u(c)),setTimeout(()=>{if(!this.appCheck){const c=this.A.getImmediate({optional:!0});c?u(c):dt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(en("string"==typeof n.token),this.R=n.token,new tc(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Tl(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(i);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let o=0;o<i;o++)n[o]=Math.floor(256*Math.random());return n}class Hu{static newId(){const n=62*Math.floor(256/62);let o="";for(;o.length<20;){const u=Tl(40);for(let c=0;c<u.length;++c)o.length<20&&u[c]<n&&(o+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(u[c]%62))}return o}}function Fn(i,e){return i<e?-1:i>e?1:0}function sa(i,e,n){return i.length===e.length&&i.every((o,u)=>n(o,e[u]))}function zu(i){return i+"\0"}class Qt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new gt(Xe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new gt(Xe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new gt(Xe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new gt(Xe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Qt.fromMillis(Date.now())}static fromDate(e){return Qt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),o=Math.floor(1e6*(e-1e3*n));return new Qt(n,o)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Fn(this.nanoseconds,e.nanoseconds):Fn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class hn{constructor(e){this.timestamp=e}static fromTimestamp(e){return new hn(e)}static min(){return new hn(new Qt(0,0))}static max(){return new hn(new Qt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Eo{constructor(e,n,o){void 0===n?n=0:n>e.length&&Rt(),void 0===o?o=e.length-n:o>e.length-n&&Rt(),this.segments=e,this.offset=n,this.len=o}get length(){return this.len}isEqual(e){return 0===Eo.comparator(this,e)}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Eo?e.forEach(o=>{n.push(o)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,o=this.limit();n<o;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const o=Math.min(e.length,n.length);for(let u=0;u<o;u++){const c=e.get(u),g=n.get(u);if(c<g)return-1;if(c>g)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class qn extends Eo{construct(e,n,o){return new qn(e,n,o)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const o of e){if(o.indexOf("//")>=0)throw new gt(Xe.INVALID_ARGUMENT,`Invalid segment (${o}). Paths must not contain // in them.`);n.push(...o.split("/").filter(u=>u.length>0))}return new qn(n)}static emptyPath(){return new qn([])}}const qa=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class pi extends Eo{construct(e,n,o){return new pi(e,n,o)}static isValidIdentifier(e){return qa.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),pi.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new pi(["__name__"])}static fromServerFormat(e){const n=[];let o="",u=0;const c=()=>{if(0===o.length)throw new gt(Xe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(o),o=""};let g=!1;for(;u<e.length;){const S=e[u];if("\\"===S){if(u+1===e.length)throw new gt(Xe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const x=e[u+1];if("\\"!==x&&"."!==x&&"`"!==x)throw new gt(Xe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);o+=x,u+=2}else"`"===S?(g=!g,u++):"."!==S||g?(o+=S,u++):(c(),u++)}if(c(),g)throw new gt(Xe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new pi(n)}static emptyPath(){return new pi([])}}class Ut{constructor(e){this.path=e}static fromPath(e){return new Ut(qn.fromString(e))}static fromName(e){return new Ut(qn.fromString(e).popFirst(5))}static empty(){return new Ut(qn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===qn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,n){return qn.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ut(new qn(e.slice()))}}class Io{constructor(e,n,o,u){this.indexId=e,this.collectionGroup=n,this.fields=o,this.indexState=u}}function Cu(i){return i.fields.find(e=>2===e.kind)}function Ta(i){return i.fields.filter(e=>2!==e.kind)}Io.UNKNOWN_ID=-1;class Oa{constructor(e,n){this.fieldPath=e,this.kind=n}}class ht{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new ht(0,Ws.min())}}function xr(i,e){const n=i.toTimestamp().seconds,o=i.toTimestamp().nanoseconds+1,u=hn.fromTimestamp(1e9===o?new Qt(n+1,0):new Qt(n,o));return new Ws(u,Ut.empty(),e)}function Dl(i){return new Ws(i.readTime,i.key,-1)}class Ws{constructor(e,n,o){this.readTime=e,this.documentKey=n,this.largestBatchId=o}static min(){return new Ws(hn.min(),Ut.empty(),-1)}static max(){return new Ws(hn.max(),Ut.empty(),-1)}}function Qi(i,e){let n=i.readTime.compareTo(e.readTime);return 0!==n?n:(n=Ut.comparator(i.documentKey,e.documentKey),0!==n?n:Fn(i.largestBatchId,e.largestBatchId))}const Gi="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class uu{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function as(i){return lu.apply(this,arguments)}function lu(){return lu=(0,h.Z)(function*(i){if(i.code!==Xe.FAILED_PRECONDITION||i.message!==Gi)throw i;dt("LocalStore","Unexpectedly lost primary lease")}),lu.apply(this,arguments)}class je{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Rt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new je((o,u)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(o,u)},this.catchCallback=c=>{this.wrapFailure(n,c).next(o,u)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof je?n:je.resolve(n)}catch(n){return je.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):je.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):je.reject(n)}static resolve(e){return new je((n,o)=>{n(e)})}static reject(e){return new je((n,o)=>{o(e)})}static waitFor(e){return new je((n,o)=>{let u=0,c=0,g=!1;e.forEach(S=>{++u,S.next(()=>{++c,g&&c===u&&n()},x=>o(x))}),g=!0,c===u&&n()})}static or(e){let n=je.resolve(!1);for(const o of e)n=n.next(u=>u?je.resolve(u):o());return n}static forEach(e,n){const o=[];return e.forEach((u,c)=>{o.push(n.call(this,u,c))}),this.waitFor(o)}static mapArray(e,n){return new je((o,u)=>{const c=e.length,g=new Array(c);let S=0;for(let x=0;x<c;x++){const G=x;n(e[G]).next(te=>{g[G]=te,++S,S===c&&o(g)},te=>u(te))}})}static doWhile(e,n){return new je((o,u)=>{const c=()=>{!0===e()?n().next(()=>{c()},u):o()};c()})}}class Gu{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new qr,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new Hr(e,n.error)):this.V.resolve()},this.transaction.onerror=o=>{const u=Al(o.target.error);this.V.reject(new Hr(e,u))}}static open(e,n,o,u){try{return new Gu(n,e.transaction(u,o))}catch(c){throw new Hr(n,c)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(dt("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const n=this.transaction.objectStore(e);return new qu(n)}}class ro{constructor(e,n,o){this.name=e,this.version=n,this.p=o,12.2===ro.S((0,me.z$)())&&$r("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return dt("SimpleDb","Removing database:",e),Es(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,me.hl)())return!1;if(ro.C())return!0;const e=(0,me.z$)(),n=ro.S(e),o=0<n&&n<10,u=ro.v(e),c=0<u&&u<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||o||c)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.F)}static M(e,n){return e.store(n)}static S(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),o=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(o)}static v(e){const n=e.match(/Android ([\d.]+)/i),o=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(o)}O(e){var n=this;return(0,h.Z)(function*(){return n.db||(dt("SimpleDb","Opening database:",n.name),n.db=yield new Promise((o,u)=>{const c=indexedDB.open(n.name,n.version);c.onsuccess=g=>{o(g.target.result)},c.onblocked=()=>{u(new Hr(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},c.onerror=g=>{const S=g.target.error;u("VersionError"===S.name?new gt(Xe.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===S.name?new gt(Xe.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+S):new Hr(e,S))},c.onupgradeneeded=g=>{dt("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',g.oldVersion),n.p.N(g.target.result,c.transaction,g.oldVersion,n.version).next(()=>{dt("SimpleDb","Database upgrade to version "+n.version+" complete")})}})),n.L&&(n.db.onversionchange=o=>n.L(o)),n.db})()}B(e){this.L=e,this.db&&(this.db.onversionchange=n=>e(n))}runTransaction(e,n,o,u){var c=this;return(0,h.Z)(function*(){const g="readonly"===n;let S=0;for(;;){++S;try{c.db=yield c.O(e);const x=Gu.open(c.db,e,g?"readonly":"readwrite",o),G=u(x).next(te=>(x.g(),te)).catch(te=>(x.abort(te),je.reject(te))).toPromise();return G.catch(()=>{}),yield x.m,G}catch(x){const G=x,te="FirebaseError"!==G.name&&S<3;if(dt("SimpleDb","Transaction failed with error:",G.message,"Retrying:",te),c.close(),!te)return Promise.reject(G)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Wu{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return Es(this.k.delete())}}class Hr extends gt{constructor(e,n){super(Xe.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function Ei(i){return"IndexedDbTransactionError"===i.name}class qu{constructor(e){this.store=e}put(e,n){let o;return void 0!==n?(dt("SimpleDb","PUT",this.store.name,e,n),o=this.store.put(n,e)):(dt("SimpleDb","PUT",this.store.name,"<auto-key>",e),o=this.store.put(e)),Es(o)}add(e){return dt("SimpleDb","ADD",this.store.name,e,e),Es(this.store.add(e))}get(e){return Es(this.store.get(e)).next(n=>(void 0===n&&(n=null),dt("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return dt("SimpleDb","DELETE",this.store.name,e),Es(this.store.delete(e))}count(){return dt("SimpleDb","COUNT",this.store.name),Es(this.store.count())}W(e,n){const o=this.options(e,n),u=o.index?this.store.index(o.index):this.store;if("function"==typeof u.getAll){const c=u.getAll(o.range);return new je((g,S)=>{c.onerror=x=>{S(x.target.error)},c.onsuccess=x=>{g(x.target.result)}})}{const c=this.cursor(o),g=[];return this.G(c,(S,x)=>{g.push(x)}).next(()=>g)}}j(e,n){const o=this.store.getAll(e,null===n?void 0:n);return new je((u,c)=>{o.onerror=g=>{c(g.target.error)},o.onsuccess=g=>{u(g.target.result)}})}H(e,n){dt("SimpleDb","DELETE ALL",this.store.name);const o=this.options(e,n);o.J=!1;const u=this.cursor(o);return this.G(u,(c,g,S)=>S.delete())}Y(e,n){let o;n?o=e:(o={},n=e);const u=this.cursor(o);return this.G(u,n)}Z(e){const n=this.cursor({});return new je((o,u)=>{n.onerror=c=>{const g=Al(c.target.error);u(g)},n.onsuccess=c=>{const g=c.target.result;g?e(g.primaryKey,g.value).next(S=>{S?g.continue():o()}):o()}})}G(e,n){const o=[];return new je((u,c)=>{e.onerror=g=>{c(g.target.error)},e.onsuccess=g=>{const S=g.target.result;if(!S)return void u();const x=new Wu(S),G=n(S.primaryKey,S.value,x);if(G instanceof je){const te=G.catch(ue=>(x.done(),je.reject(ue)));o.push(te)}x.isDone?u():null===x.$?S.continue():S.continue(x.$)}}).next(()=>je.waitFor(o))}options(e,n){let o;return void 0!==e&&("string"==typeof e?o=e:n=e),{index:o,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const o=this.store.index(e.index);return e.J?o.openKeyCursor(e.range,n):o.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function Es(i){return new je((e,n)=>{i.onsuccess=o=>{e(o.target.result)},i.onerror=o=>{const u=Al(o.target.error);n(u)}})}let wo=!1;function Al(i){const e=ro.S((0,me.z$)());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(i.message.indexOf(n)>=0){const o=new gt("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return wo||(wo=!0,setTimeout(()=>{throw o},0)),o}}return i}class cu{constructor(e,n){this.asyncQueue=e,this.X=n,this.task=null}start(){this.ee(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}ee(e){var n=this;dt("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,h.Z)(function*(){n.task=null;try{dt("IndexBackfiller",`Documents written: ${yield n.X.te()}`)}catch(o){Ei(o)?dt("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",o):yield as(o)}yield n.ee(6e4)}))}}class Ku{constructor(e,n){this.localStore=e,this.persistence=n}te(e=50){var n=this;return(0,h.Z)(function*(){return n.persistence.runTransaction("Backfill Indexes","readwrite-primary",o=>n.ne(o,e))})()}ne(e,n){const o=new Set;let u=n,c=!0;return je.doWhile(()=>!0===c&&u>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(g=>{if(null!==g&&!o.has(g))return dt("IndexBackfiller",`Processing collection: ${g}`),this.re(e,g,u).next(S=>{u-=S,o.add(g)});c=!1})).next(()=>n-u)}re(e,n,o){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(u=>this.localStore.localDocuments.getNextDocuments(e,n,u,o).next(c=>{const g=c.changes;return this.localStore.indexManager.updateIndexEntries(e,g).next(()=>this.ie(u,c)).next(S=>(dt("IndexBackfiller",`Updating offset: ${S}`),this.localStore.indexManager.updateCollectionGroup(e,n,S))).next(()=>g.size)}))}ie(e,n){let o=e;return n.changes.forEach((u,c)=>{const g=Dl(c);Qi(g,o)>0&&(o=g)}),new Ws(o.readTime,o.documentKey,Math.max(n.batchId,e.largestBatchId))}}let lo=(()=>{class i{constructor(n,o){this.previousValue=n,o&&(o.sequenceNumberHandler=u=>this.se(u),this.oe=u=>o.writeSequenceNumber(u))}se(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){const n=++this.previousValue;return this.oe&&this.oe(n),n}}return i._e=-1,i})();function du(i){return null==i}function Da(i){return 0===i&&1/i==-1/0}function v(i){return"number"==typeof i&&Number.isInteger(i)&&!Da(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}function R(i){let e="";for(let n=0;n<i.length;n++)e.length>0&&(e=M(e)),e=I(i.get(n),e);return M(e)}function I(i,e){let n=e;const o=i.length;for(let u=0;u<o;u++){const c=i.charAt(u);switch(c){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=c}}return n}function M(i){return i+"\x01\x01"}function B(i){const e=i.length;if(en(e>=2),2===e)return en("\x01"===i.charAt(0)&&"\x01"===i.charAt(1)),qn.emptyPath();const n=e-2,o=[];let u="";for(let c=0;c<e;){const g=i.indexOf("\x01",c);switch((g<0||g>n)&&Rt(),i.charAt(g+1)){case"\x01":const S=i.substring(c,g);let x;0===u.length?x=S:(u+=S,x=u,u=""),o.push(x);break;case"\x10":u+=i.substring(c,g),u+="\0";break;case"\x11":u+=i.substring(c,g+1);break;default:Rt()}c=g+2}return new qn(o)}const ne=["userId","batchId"];function fe(i,e){return[i,R(e)]}function Ke(i,e,n){return[i,R(e),n]}const We={},Bt=["prefixPath","collectionGroup","readTime","documentId"],jn=["prefixPath","collectionGroup","documentId"],Ii=["collectionGroup","readTime","prefixPath","documentId"],On=["canonicalId","targetId"],Ps=["targetId","path"],Xr=["path","targetId"],xa=["collectionId","parent"],bu=["indexId","uid"],Bo=["uid","sequenceNumber"],jo=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],io=["indexId","uid","orderedDocumentKey"],nc=["userId","collectionPath","documentId"],Zu=["userId","collectionPath","largestBatchId"],oa=["userId","collectionGroup","largestBatchId"],Ka=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],qs=[...Ka,"documentOverlays"],hu=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],fu=hu,Aa=[...fu,"indexConfiguration","indexState","indexEntries"];class Ca extends uu{constructor(e,n){super(),this.ae=e,this.currentSequenceNumber=n}}function Yi(i,e){const n=_t(i);return ro.M(n.ae,e)}function fa(i){let e=0;for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e++;return e}function To(i,e){for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e(n,i[n])}function Su(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}class wi{constructor(e,n){this.comparator=e,this.root=n||ji.EMPTY}insert(e,n){return new wi(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ji.BLACK,null,null))}remove(e){return new wi(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ji.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const o=this.comparator(e,n.key);if(0===o)return n.value;o<0?n=n.left:o>0&&(n=n.right)}return null}indexOf(e){let n=0,o=this.root;for(;!o.isEmpty();){const u=this.comparator(e,o.key);if(0===u)return n+o.left.size;u<0?o=o.left:(n+=o.left.size+1,o=o.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,o)=>(e(n,o),!1))}toString(){const e=[];return this.inorderTraversal((n,o)=>(e.push(`${n}:${o}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new rc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new rc(this.root,e,this.comparator,!1)}getReverseIterator(){return new rc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new rc(this.root,e,this.comparator,!0)}}class rc{constructor(e,n,o,u){this.isReverse=u,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=n?o(e.key,n):1,n&&u&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(0===c){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ji{constructor(e,n,o,u,c){this.key=e,this.value=n,this.color=o??ji.RED,this.left=u??ji.EMPTY,this.right=c??ji.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,o,u,c){return new ji(e??this.key,n??this.value,o??this.color,u??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,o){let u=this;const c=o(e,u.key);return u=c<0?u.copy(null,null,null,u.left.insert(e,n,o),null):0===c?u.copy(null,n,null,null,null):u.copy(null,null,null,null,u.right.insert(e,n,o)),u.fixUp()}removeMin(){if(this.left.isEmpty())return ji.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let o,u=this;if(n(e,u.key)<0)u.left.isEmpty()||u.left.isRed()||u.left.left.isRed()||(u=u.moveRedLeft()),u=u.copy(null,null,null,u.left.remove(e,n),null);else{if(u.left.isRed()&&(u=u.rotateRight()),u.right.isEmpty()||u.right.isRed()||u.right.left.isRed()||(u=u.moveRedRight()),0===n(e,u.key)){if(u.right.isEmpty())return ji.EMPTY;o=u.right.min(),u=u.copy(o.key,o.value,null,null,u.right.removeMin())}u=u.copy(null,null,null,null,u.right.remove(e,n))}return u.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ji.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ji.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Rt();const e=this.left.check();if(e!==this.right.check())throw Rt();return e+(this.isRed()?0:1)}}ji.EMPTY=null,ji.RED=!0,ji.BLACK=!1,ji.EMPTY=new class{constructor(){this.size=0}get key(){throw Rt()}get value(){throw Rt()}get color(){throw Rt()}get left(){throw Rt()}get right(){throw Rt()}copy(e,n,o,u,c){return this}insert(e,n,o){return new ji(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class ai{constructor(e){this.comparator=e,this.data=new wi(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,o)=>(e(n),!1))}forEachInRange(e,n){const o=this.data.getIteratorFrom(e[0]);for(;o.hasNext();){const u=o.getNext();if(this.comparator(u.key,e[1])>=0)return;n(u.key)}}forEachWhile(e,n){let o;for(o=void 0!==n?this.data.getIteratorFrom(n):this.data.getIterator();o.hasNext();)if(!e(o.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Hc(this.data.getIterator())}getIteratorFrom(e){return new Hc(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(o=>{n=n.add(o)}),n}isEqual(e){if(!(e instanceof ai)||this.size!==e.size)return!1;const n=this.data.getIterator(),o=e.data.getIterator();for(;n.hasNext();){const u=n.getNext().key,c=o.getNext().key;if(0!==this.comparator(u,c))return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new ai(this.comparator);return n.data=e,n}}class Hc{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Za(i){return i.hasNext()?i.getNext():void 0}class $o{constructor(e){this.fields=e,e.sort(pi.comparator)}static empty(){return new $o([])}unionWith(e){let n=new ai(pi.comparator);for(const o of this.fields)n=n.add(o);for(const o of e)n=n.add(o);return new $o(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return sa(this.fields,e.fields,(n,o)=>n.isEqual(o))}}class Ru extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}function Qu(){return typeof atob<"u"}class Ji{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(u){try{return atob(u)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new Ru("Invalid base64 string: "+c):c}}(e);return new Ji(n)}static fromUint8Array(e){const n=function(u){let c="";for(let g=0;g<u.length;++g)c+=String.fromCharCode(u[g]);return c}(e);return new Ji(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(n){const o=new Uint8Array(n.length);for(let u=0;u<n.length;u++)o[u]=n.charCodeAt(u);return o}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Fn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ji.EMPTY_BYTE_STRING=new Ji("");const ic=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ho(i){if(en(!!i),"string"==typeof i){let e=0;const n=ic.exec(i);if(en(!!n),n[1]){let u=n[1];u=(u+"000000000").substr(0,9),e=Number(u)}const o=new Date(i);return{seconds:Math.floor(o.getTime()/1e3),nanos:e}}return{seconds:$i(i.seconds),nanos:$i(i.nanos)}}function $i(i){return"number"==typeof i?i:"string"==typeof i?Number(i):0}function Do(i){return"string"==typeof i?Ji.fromBase64String(i):Ji.fromUint8Array(i)}function sc(i){var e,n;return"server_timestamp"===(null===(n=((null===(e=i?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Qa(i){const e=i.mapValue.fields.__previous_value__;return sc(e)?Qa(e):e}function ka(i){const e=Ho(i.mapValue.fields.__local_write_time__.timestampValue);return new Qt(e.seconds,e.nanos)}class Md{constructor(e,n,o,u,c,g,S,x,G){this.databaseId=e,this.appId=n,this.persistenceKey=o,this.host=u,this.ssl=c,this.forceLongPolling=g,this.autoDetectLongPolling=S,this.longPollingOptions=x,this.useFetchStreams=G}}class Is{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Is("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Is&&e.projectId===this.projectId&&e.database===this.database}}const Fa={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},pu={nullValue:"NULL_VALUE"};function aa(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?sc(i)?4:Re(i)?9007199254740991:10:Rt()}function zo(i,e){if(i===e)return!0;const n=aa(i);if(n!==aa(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return ka(i).isEqual(ka(e));case 3:return function(u,c){if("string"==typeof u.timestampValue&&"string"==typeof c.timestampValue&&u.timestampValue.length===c.timestampValue.length)return u.timestampValue===c.timestampValue;const g=Ho(u.timestampValue),S=Ho(c.timestampValue);return g.seconds===S.seconds&&g.nanos===S.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return c=e,Do(i.bytesValue).isEqual(Do(c.bytesValue));case 7:return i.referenceValue===e.referenceValue;case 8:return function(u,c){return $i(u.geoPointValue.latitude)===$i(c.geoPointValue.latitude)&&$i(u.geoPointValue.longitude)===$i(c.geoPointValue.longitude)}(i,e);case 2:return function(u,c){if("integerValue"in u&&"integerValue"in c)return $i(u.integerValue)===$i(c.integerValue);if("doubleValue"in u&&"doubleValue"in c){const g=$i(u.doubleValue),S=$i(c.doubleValue);return g===S?Da(g)===Da(S):isNaN(g)&&isNaN(S)}return!1}(i,e);case 9:return sa(i.arrayValue.values||[],e.arrayValue.values||[],zo);case 10:return function(u,c){const g=u.mapValue.fields||{},S=c.mapValue.fields||{};if(fa(g)!==fa(S))return!1;for(const x in g)if(g.hasOwnProperty(x)&&(void 0===S[x]||!zo(g[x],S[x])))return!1;return!0}(i,e);default:return Rt()}var c}function pa(i,e){return void 0!==(i.values||[]).find(n=>zo(n,e))}function ua(i,e){if(i===e)return 0;const n=aa(i),o=aa(e);if(n!==o)return Fn(n,o);switch(n){case 0:case 9007199254740991:return 0;case 1:return Fn(i.booleanValue,e.booleanValue);case 2:return function(c,g){const S=$i(c.integerValue||c.doubleValue),x=$i(g.integerValue||g.doubleValue);return S<x?-1:S>x?1:S===x?0:isNaN(S)?isNaN(x)?0:-1:1}(i,e);case 3:return oc(i.timestampValue,e.timestampValue);case 4:return oc(ka(i),ka(e));case 5:return Fn(i.stringValue,e.stringValue);case 6:return function(c,g){const S=Do(c),x=Do(g);return S.compareTo(x)}(i.bytesValue,e.bytesValue);case 7:return function(c,g){const S=c.split("/"),x=g.split("/");for(let G=0;G<S.length&&G<x.length;G++){const te=Fn(S[G],x[G]);if(0!==te)return te}return Fn(S.length,x.length)}(i.referenceValue,e.referenceValue);case 8:return function(c,g){const S=Fn($i(c.latitude),$i(g.latitude));return 0!==S?S:Fn($i(c.longitude),$i(g.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return function(c,g){const S=c.values||[],x=g.values||[];for(let G=0;G<S.length&&G<x.length;++G){const te=ua(S[G],x[G]);if(te)return te}return Fn(S.length,x.length)}(i.arrayValue,e.arrayValue);case 10:return function(c,g){if(c===Fa.mapValue&&g===Fa.mapValue)return 0;if(c===Fa.mapValue)return 1;if(g===Fa.mapValue)return-1;const S=c.fields||{},x=Object.keys(S),G=g.fields||{},te=Object.keys(G);x.sort(),te.sort();for(let ue=0;ue<x.length&&ue<te.length;++ue){const Se=Fn(x[ue],te[ue]);if(0!==Se)return Se;const qe=ua(S[x[ue]],G[te[ue]]);if(0!==qe)return qe}return Fn(x.length,te.length)}(i.mapValue,e.mapValue);default:throw Rt()}}function oc(i,e){if("string"==typeof i&&"string"==typeof e&&i.length===e.length)return Fn(i,e);const n=Ho(i),o=Ho(e),u=Fn(n.seconds,o.seconds);return 0!==u?u:Fn(n.nanos,o.nanos)}function La(i){return Yu(i)}function Yu(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(n){const o=Ho(n);return`time(${o.seconds},${o.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?Do(i.bytesValue).toBase64():"referenceValue"in i?Ut.fromName(i.referenceValue).toString():"geoPointValue"in i?function(n){return`geo(${n.latitude},${n.longitude})`}(i.geoPointValue):"arrayValue"in i?function(n){let o="[",u=!0;for(const c of n.values||[])u?u=!1:o+=",",o+=Yu(c);return o+"]"}(i.arrayValue):"mapValue"in i?function(n){const o=Object.keys(n.fields||{}).sort();let u="{",c=!0;for(const g of o)c?c=!1:u+=",",u+=`${g}:${Yu(n.fields[g])}`;return u+"}"}(i.mapValue):Rt()}function d(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function m(i){return!!i&&"integerValue"in i}function T(i){return!!i&&"arrayValue"in i}function V(i){return!!i&&"nullValue"in i}function Y(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function le(i){return!!i&&"mapValue"in i}function _e(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&"object"==typeof i.timestampValue)return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return To(i.mapValue.fields,(n,o)=>e.mapValue.fields[n]=_e(o)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(i.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=_e(i.arrayValue.values[n]);return e}return Object.assign({},i)}function Re(i){return"__max__"===(((i.mapValue||{}).fields||{}).__type__||{}).stringValue}function it(i){return"nullValue"in i?pu:"booleanValue"in i?{booleanValue:!1}:"integerValue"in i||"doubleValue"in i?{doubleValue:NaN}:"timestampValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in i?{stringValue:""}:"bytesValue"in i?{bytesValue:""}:"referenceValue"in i?d(Is.empty(),Ut.empty()):"geoPointValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in i?{arrayValue:{}}:"mapValue"in i?{mapValue:{}}:Rt()}function Tt(i){return"nullValue"in i?{booleanValue:!1}:"booleanValue"in i?{doubleValue:NaN}:"integerValue"in i||"doubleValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in i?{stringValue:""}:"stringValue"in i?{bytesValue:""}:"bytesValue"in i?d(Is.empty(),Ut.empty()):"referenceValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in i?{arrayValue:{}}:"arrayValue"in i?{mapValue:{}}:"mapValue"in i?Fa:Rt()}function Pt(i,e){const n=ua(i.value,e.value);return 0!==n?n:i.inclusive&&!e.inclusive?-1:!i.inclusive&&e.inclusive?1:0}function Tn(i,e){const n=ua(i.value,e.value);return 0!==n?n:i.inclusive&&!e.inclusive?1:!i.inclusive&&e.inclusive?-1:0}class nn{constructor(e){this.value=e}static empty(){return new nn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let o=0;o<e.length-1;++o)if(n=(n.mapValue.fields||{})[e.get(o)],!le(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=_e(n)}setAll(e){let n=pi.emptyPath(),o={},u=[];e.forEach((g,S)=>{if(!n.isImmediateParentOf(S)){const x=this.getFieldsMap(n);this.applyChanges(x,o,u),o={},u=[],n=S.popLast()}g?o[S.lastSegment()]=_e(g):u.push(S.lastSegment())});const c=this.getFieldsMap(n);this.applyChanges(c,o,u)}delete(e){const n=this.field(e.popLast());le(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return zo(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let o=0;o<e.length;++o){let u=n.mapValue.fields[e.get(o)];le(u)&&u.mapValue.fields||(u={mapValue:{fields:{}}},n.mapValue.fields[e.get(o)]=u),n=u}return n.mapValue.fields}applyChanges(e,n,o){To(n,(u,c)=>e[u]=c);for(const u of o)delete e[u]}clone(){return new nn(_e(this.value))}}function cn(i){const e=[];return To(i.fields,(n,o)=>{const u=new pi([n]);if(le(o)){const c=cn(o.mapValue).fields;if(0===c.length)e.push(u);else for(const g of c)e.push(u.child(g))}else e.push(u)}),new $o(e)}class bt{constructor(e,n,o,u,c,g,S){this.key=e,this.documentType=n,this.version=o,this.readTime=u,this.createTime=c,this.data=g,this.documentState=S}static newInvalidDocument(e){return new bt(e,0,hn.min(),hn.min(),hn.min(),nn.empty(),0)}static newFoundDocument(e,n,o,u){return new bt(e,1,n,hn.min(),o,u,0)}static newNoDocument(e,n){return new bt(e,2,n,hn.min(),hn.min(),nn.empty(),0)}static newUnknownDocument(e,n){return new bt(e,3,n,hn.min(),hn.min(),nn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(hn.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=nn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=nn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=hn.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof bt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new bt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class En{constructor(e,n){this.position=e,this.inclusive=n}}function kr(i,e,n){let o=0;for(let u=0;u<i.position.length;u++){const c=e[u],g=i.position[u];if(o=c.field.isKeyField()?Ut.comparator(Ut.fromName(g.referenceValue),n.key):ua(g,n.data.field(c.field)),"desc"===c.dir&&(o*=-1),0!==o)break}return o}function ui(i,e){if(null===i)return null===e;if(null===e||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let n=0;n<i.position.length;n++)if(!zo(i.position[n],e.position[n]))return!1;return!0}class Yn{constructor(e,n="asc"){this.field=e,this.dir=n}}function Ti(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}class Ms{}class In extends Ms{constructor(e,n,o){super(),this.field=e,this.op=n,this.value=o}static create(e,n,o){return e.isKeyField()?"in"===n||"not-in"===n?this.createKeyFieldInFilter(e,n,o):new gn(e,n,o):"array-contains"===n?new us(e,o):"in"===n?new ga(e,o):"not-in"===n?new Wi(e,o):"array-contains-any"===n?new Co(e,o):new In(e,n,o)}static createKeyFieldInFilter(e,n,o){return"in"===n?new Cn(e,o):new rn(e,o)}matches(e){const n=e.data.field(this.field);return"!="===this.op?null!==n&&this.matchesComparison(ua(n,this.value)):null!==n&&aa(this.value)===aa(n)&&this.matchesComparison(ua(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Rt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Jn extends Ms{constructor(e,n){super(),this.filters=e,this.op=n,this.ue=null}static create(e,n){return new Jn(e,n)}matches(e){return Ao(this)?void 0===this.filters.find(n=>!n.matches(e)):void 0!==this.filters.find(n=>n.matches(e))}getFlattenedFilters(){return null!==this.ue||(this.ue=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function Ao(i){return"and"===i.op}function la(i){return"or"===i.op}function ba(i){return zc(i)&&Ao(i)}function zc(i){for(const e of i.filters)if(e instanceof Jn)return!1;return!0}function gu(i){if(i instanceof In)return i.field.canonicalString()+i.op.toString()+La(i.value);if(ba(i))return i.filters.map(e=>gu(e)).join(",");{const e=i.filters.map(n=>gu(n)).join(",");return`${i.op}(${e})`}}function mu(i,e){return i instanceof In?(o=i,(u=e)instanceof In&&o.op===u.op&&o.field.isEqual(u.field)&&zo(o.value,u.value)):i instanceof Jn?function(o,u){return u instanceof Jn&&o.op===u.op&&o.filters.length===u.filters.length&&o.filters.reduce((c,g,S)=>c&&mu(g,u.filters[S]),!0)}(i,e):void Rt();var o,u}function Ju(i,e){const n=i.filters.concat(e);return Jn.create(n,i.op)}function Ya(i){return i instanceof In?`${(n=i).field.canonicalString()} ${n.op} ${La(n.value)}`:i instanceof Jn?function(n){return n.op.toString()+" {"+n.getFilters().map(Ya).join(" ,")+"}"}(i):"Filter";var n}class gn extends In{constructor(e,n,o){super(e,n,o),this.key=Ut.fromName(o.referenceValue)}matches(e){const n=Ut.comparator(e.key,this.key);return this.matchesComparison(n)}}class Cn extends In{constructor(e,n){super(e,"in",n),this.keys=zr(0,n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class rn extends In{constructor(e,n){super(e,"not-in",n),this.keys=zr(0,n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function zr(i,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(o=>Ut.fromName(o.referenceValue))}class us extends In{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return T(n)&&pa(n.arrayValue,this.value)}}class ga extends In{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return null!==n&&pa(this.value.arrayValue,n)}}class Wi extends In{constructor(e,n){super(e,"not-in",n)}matches(e){if(pa(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return null!==n&&!pa(this.value.arrayValue,n)}}class Co extends In{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!T(n)||!n.arrayValue.values)&&n.arrayValue.values.some(o=>pa(this.value.arrayValue,o))}}class qi{constructor(e,n=null,o=[],u=[],c=null,g=null,S=null){this.path=e,this.collectionGroup=n,this.orderBy=o,this.filters=u,this.limit=c,this.startAt=g,this.endAt=S,this.ce=null}}function _u(i,e=null,n=[],o=[],u=null,c=null,g=null){return new qi(i,e,n,o,u,c,g)}function ma(i){const e=_t(i);if(null===e.ce){let n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(o=>gu(o)).join(","),n+="|ob:",n+=e.orderBy.map(o=>{return(c=o).field.canonicalString()+c.dir;var c}).join(","),du(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(o=>La(o)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(o=>La(o)).join(",")),e.ce=n}return e.ce}function Ns(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<i.orderBy.length;n++)if(!Ti(i.orderBy[n],e.orderBy[n]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let n=0;n<i.filters.length;n++)if(!mu(i.filters[n],e.filters[n]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!ui(i.startAt,e.startAt)&&ui(i.endAt,e.endAt)}function Va(i){return Ut.isDocumentKey(i.path)&&null===i.collectionGroup&&0===i.filters.length}function co(i,e){return i.filters.filter(n=>n instanceof In&&n.field.isEqual(e))}function Cl(i,e,n){let o=pu,u=!0;for(const c of co(i,e)){let g=pu,S=!0;switch(c.op){case"<":case"<=":g=it(c.value);break;case"==":case"in":case">=":g=c.value;break;case">":g=c.value,S=!1;break;case"!=":case"not-in":g=pu}Pt({value:o,inclusive:u},{value:g,inclusive:S})<0&&(o=g,u=S)}if(null!==n)for(let c=0;c<i.orderBy.length;++c)if(i.orderBy[c].field.isEqual(e)){const g=n.position[c];Pt({value:o,inclusive:u},{value:g,inclusive:n.inclusive})<0&&(o=g,u=n.inclusive);break}return{value:o,inclusive:u}}function ho(i,e,n){let o=Fa,u=!0;for(const c of co(i,e)){let g=Fa,S=!0;switch(c.op){case">=":case">":g=Tt(c.value),S=!1;break;case"==":case"in":case"<=":g=c.value;break;case"<":g=c.value,S=!1;break;case"!=":case"not-in":g=Fa}Tn({value:o,inclusive:u},{value:g,inclusive:S})>0&&(o=g,u=S)}if(null!==n)for(let c=0;c<i.orderBy.length;++c)if(i.orderBy[c].field.isEqual(e)){const g=n.position[c];Tn({value:o,inclusive:u},{value:g,inclusive:n.inclusive})>0&&(o=g,u=n.inclusive);break}return{value:o,inclusive:u}}class Ua{constructor(e,n=null,o=[],u=[],c=null,g="F",S=null,x=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=o,this.filters=u,this.limit=c,this.limitType=g,this.startAt=S,this.endAt=x,this.le=null,this.he=null,this.Pe=null}}function Xu(i,e,n,o,u,c,g,S){return new Ua(i,e,n,o,u,c,g,S)}function ac(i){return new Ua(i)}function uc(i){return 0===i.filters.length&&null===i.limit&&null==i.startAt&&null==i.endAt&&(0===i.explicitOrderBy.length||1===i.explicitOrderBy.length&&i.explicitOrderBy[0].field.isKeyField())}function lc(i){return null!==i.collectionGroup}function bl(i){const e=_t(i);if(null===e.le){e.le=[];const n=new Set;for(const c of e.explicitOrderBy)e.le.push(c),n.add(c.field.canonicalString());const o=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(g){let S=new ai(pi.comparator);return g.filters.forEach(x=>{x.getFlattenedFilters().forEach(G=>{G.isInequality()&&(S=S.add(G.field))})}),S})(e).forEach(c=>{n.has(c.canonicalString())||c.isKeyField()||e.le.push(new Yn(c,o))}),n.has(pi.keyField().canonicalString())||e.le.push(new Yn(pi.keyField(),o))}return e.le}function bo(i){const e=_t(i);return e.he||(e.he=function Sh(i,e){if("F"===i.limitType)return _u(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map(u=>new Yn(u.field,"desc"===u.dir?"asc":"desc"));const n=i.endAt?new En(i.endAt.position,i.endAt.inclusive):null,o=i.startAt?new En(i.startAt.position,i.startAt.inclusive):null;return _u(i.path,i.collectionGroup,e,i.filters,i.limit,n,o)}}(e,bl(i))),e.he}function Gc(i,e){const n=i.filters.concat([e]);return new Ua(i.path,i.collectionGroup,i.explicitOrderBy.slice(),n,i.limit,i.limitType,i.startAt,i.endAt)}function Wc(i,e,n){return new Ua(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,n,i.startAt,i.endAt)}function yu(i,e){return Ns(bo(i),bo(e))&&i.limitType===e.limitType}function cc(i){return`${ma(bo(i))}|lt:${i.limitType}`}function dc(i){return`Query(target=${function(n){let o=n.path.canonicalString();return null!==n.collectionGroup&&(o+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(o+=`, filters: [${n.filters.map(u=>Ya(u)).join(", ")}]`),du(n.limit)||(o+=", limit: "+n.limit),n.orderBy.length>0&&(o+=`, orderBy: [${n.orderBy.map(u=>{return`${(g=u).field.canonicalString()} (${g.dir})`;var g}).join(", ")}]`),n.startAt&&(o+=", startAt: ",o+=n.startAt.inclusive?"b:":"a:",o+=n.startAt.position.map(u=>La(u)).join(",")),n.endAt&&(o+=", endAt: ",o+=n.endAt.inclusive?"a:":"b:",o+=n.endAt.position.map(u=>La(u)).join(",")),`Target(${o})`}(bo(i))}; limitType=${i.limitType})`}function Ja(i,e){return e.isFoundDocument()&&function(o,u){const c=u.key.path;return null!==o.collectionGroup?u.key.hasCollectionId(o.collectionGroup)&&o.path.isPrefixOf(c):Ut.isDocumentKey(o.path)?o.path.isEqual(c):o.path.isImmediateParentOf(c)}(i,e)&&function(o,u){for(const c of bl(o))if(!c.field.isKeyField()&&null===u.data.field(c.field))return!1;return!0}(i,e)&&function(o,u){for(const c of o.filters)if(!c.matches(u))return!1;return!0}(i,e)&&(u=e,!((o=i).startAt&&!function(g,S,x){const G=kr(g,S,x);return g.inclusive?G<=0:G<0}(o.startAt,bl(o),u)||o.endAt&&!function(g,S,x){const G=kr(g,S,x);return g.inclusive?G>=0:G>0}(o.endAt,bl(o),u)));var o,u}function Nd(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function Pu(i){return(e,n)=>{let o=!1;for(const u of bl(i)){const c=Rh(u,e,n);if(0!==c)return c;o=o||u.field.isKeyField()}return 0}}function Rh(i,e,n){const o=i.field.isKeyField()?Ut.comparator(e.key,n.key):function(c,g,S){const x=g.data.field(c),G=S.data.field(c);return null!==x&&null!==G?ua(x,G):Rt()}(i.field,e,n);switch(i.dir){case"asc":return o;case"desc":return-1*o;default:return Rt()}}class Ba{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),o=this.inner[n];if(void 0!==o)for(const[u,c]of o)if(this.equalsFn(u,e))return c}has(e){return void 0!==this.get(e)}set(e,n){const o=this.mapKeyFn(e),u=this.inner[o];if(void 0===u)return this.inner[o]=[[e,n]],void this.innerSize++;for(let c=0;c<u.length;c++)if(this.equalsFn(u[c][0],e))return void(u[c]=[e,n]);u.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),o=this.inner[n];if(void 0===o)return!1;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return 1===o.length?delete this.inner[n]:o.splice(u,1),this.innerSize--,!0;return!1}forEach(e){To(this.inner,(n,o)=>{for(const[u,c]of o)e(u,c)})}isEmpty(){return Su(this.inner)}size(){return this.innerSize}}const Od=new wi(Ut.comparator);function So(){return Od}const xd=new wi(Ut.comparator);function hc(...i){let e=xd;for(const n of i)e=e.insert(n.key,n);return e}function Ph(i){let e=xd;return i.forEach((n,o)=>e=e.insert(n,o.overlayedDocument)),e}function Go(){return qc()}function Sl(){return qc()}function qc(){return new Ba(i=>i.toString(),(i,e)=>i.isEqual(e))}const cm=new wi(Ut.comparator),E=new ai(Ut.comparator);function f(...i){let e=E;for(const n of i)e=e.add(n);return e}const _=new ai(Fn);function D(){return _}function q(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Da(e)?"-0":e}}function se(i){return{integerValue:""+i}}function Pe(i,e){return v(e)?se(e):q(i,e)}class Ze{constructor(){this._=void 0}}function yt(i,e,n){return i instanceof hr?function(u,c){const g={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:u.seconds,nanos:u.nanoseconds}}}};return c&&sc(c)&&(c=Qa(c)),c&&(g.fields.__previous_value__=c),{mapValue:g}}(n,e):i instanceof so?vu(i,e):i instanceof Xa?fc(i,e):function(u,c){const g=Dn(u,c),S=Mh(g)+Mh(u.Ie);return m(g)&&m(u.Ie)?se(S):q(u.serializer,S)}(i,e)}function sn(i,e,n){return i instanceof so?vu(i,e):i instanceof Xa?fc(i,e):n}function Dn(i,e){return i instanceof el?m(o=e)||(c=o)&&"doubleValue"in c?e:{integerValue:0}:null;var o,c}class hr extends Ze{}class so extends Ze{constructor(e){super(),this.elements=e}}function vu(i,e){const n=pc(e);for(const o of i.elements)n.some(u=>zo(u,o))||n.push(o);return{arrayValue:{values:n}}}class Xa extends Ze{constructor(e){super(),this.elements=e}}function fc(i,e){let n=pc(e);for(const o of i.elements)n=n.filter(u=>!zo(u,o));return{arrayValue:{values:n}}}class el extends Ze{constructor(e,n){super(),this.serializer=e,this.Ie=n}}function Mh(i){return $i(i.integerValue||i.doubleValue)}function pc(i){return T(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}class Rl{constructor(e,n){this.field=e,this.transform=n}}class Jf{constructor(e,n){this.version=e,this.transformResults=n}}class Xi{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Xi}static exists(e){return new Xi(void 0,e)}static updateTime(e){return new Xi(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Kc(i,e){return void 0!==i.updateTime?e.isFoundDocument()&&e.version.isEqual(i.updateTime):void 0===i.exists||i.exists===e.isFoundDocument()}class Zc{}function tl(i,e){if(!i.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return i.isNoDocument()?new nl(i.key,Xi.none()):new Eu(i.key,i.data,Xi.none());{const n=i.data,o=nn.empty();let u=new ai(pi.comparator);for(let c of e.fields)if(!u.has(c)){let g=n.field(c);null===g&&c.length>1&&(c=c.popLast(),g=n.field(c)),null===g?o.delete(c):o.set(c,g),u=u.add(c)}return new Mu(i.key,o,new $o(u.toArray()),Xi.none())}}function Qc(i,e,n){i instanceof Eu?function(u,c,g){const S=u.value.clone(),x=kd(u.fieldTransforms,c,g.transformResults);S.setAll(x),c.convertToFoundDocument(g.version,S).setHasCommittedMutations()}(i,e,n):i instanceof Mu?function(u,c,g){if(!Kc(u.precondition,c))return void c.convertToUnknownDocument(g.version);const S=kd(u.fieldTransforms,c,g.transformResults),x=c.data;x.setAll(ep(u)),x.setAll(S),c.convertToFoundDocument(g.version,x).setHasCommittedMutations()}(i,e,n):e.convertToNoDocument(n.version).setHasCommittedMutations()}function Yc(i,e,n,o){return i instanceof Eu?function(c,g,S,x){if(!Kc(c.precondition,g))return S;const G=c.value.clone(),te=Fd(c.fieldTransforms,x,g);return G.setAll(te),g.convertToFoundDocument(g.version,G).setHasLocalMutations(),null}(i,e,n,o):i instanceof Mu?function(c,g,S,x){if(!Kc(c.precondition,g))return S;const G=Fd(c.fieldTransforms,x,g),te=g.data;return te.setAll(ep(c)),te.setAll(G),g.convertToFoundDocument(g.version,te).setHasLocalMutations(),null===S?null:S.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map(ue=>ue.field))}(i,e,n,o):(S=n,Kc(i.precondition,g=e)?(g.convertToNoDocument(g.version).setHasLocalMutations(),null):S);var g,S}function dm(i,e){let n=null;for(const o of i.fieldTransforms){const u=e.data.field(o.field),c=Dn(o.transform,u||null);null!=c&&(null===n&&(n=nn.empty()),n.set(o.field,c))}return n||null}function Xf(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&(u=e.fieldTransforms,!!(void 0===(o=i.fieldTransforms)&&void 0===u||o&&u&&sa(o,u,(c,g)=>function Yf(i,e){return i.field.isEqual(e.field)&&(u=e.transform,(o=i.transform)instanceof so&&u instanceof so||o instanceof Xa&&u instanceof Xa?sa(o.elements,u.elements,zo):o instanceof el&&u instanceof el?zo(o.Ie,u.Ie):o instanceof hr&&u instanceof hr);var o,u}(c,g))))&&(0===i.type?i.value.isEqual(e.value):1!==i.type||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask));var o,u}class Eu extends Zc{constructor(e,n,o,u=[]){super(),this.key=e,this.value=n,this.precondition=o,this.fieldTransforms=u,this.type=0}getFieldMask(){return null}}class Mu extends Zc{constructor(e,n,o,u,c=[]){super(),this.key=e,this.data=n,this.fieldMask=o,this.precondition=u,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function ep(i){const e=new Map;return i.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const o=i.data.field(n);e.set(n,o)}}),e}function kd(i,e,n){const o=new Map;en(i.length===n.length);for(let u=0;u<n.length;u++){const c=i[u],g=c.transform,S=e.data.field(c.field);o.set(c.field,sn(g,S,n[u]))}return o}function Fd(i,e,n){const o=new Map;for(const u of i){const c=u.transform,g=n.data.field(u.field);o.set(u.field,yt(c,g,e))}return o}class nl extends Zc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class tp extends Zc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class np{constructor(e,n,o,u){this.batchId=e,this.localWriteTime=n,this.baseMutations=o,this.mutations=u}applyToRemoteDocument(e,n){const o=n.mutationResults;for(let u=0;u<this.mutations.length;u++){const c=this.mutations[u];c.key.isEqual(e.key)&&Qc(c,e,o[u])}}applyToLocalView(e,n){for(const o of this.baseMutations)o.key.isEqual(e.key)&&(n=Yc(o,e,n,this.localWriteTime));for(const o of this.mutations)o.key.isEqual(e.key)&&(n=Yc(o,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const o=Sl();return this.mutations.forEach(u=>{const c=e.get(u.key),g=c.overlayedDocument;let S=this.applyToLocalView(g,c.mutatedFields);S=n.has(u.key)?null:S;const x=tl(g,S);null!==x&&o.set(u.key,x),g.isValidDocument()||g.convertToNoDocument(hn.min())}),o}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),f())}isEqual(e){return this.batchId===e.batchId&&sa(this.mutations,e.mutations,(n,o)=>Xf(n,o))&&sa(this.baseMutations,e.baseMutations,(n,o)=>Xf(n,o))}}class rp{constructor(e,n,o,u){this.batch=e,this.commitVersion=n,this.mutationResults=o,this.docVersions=u}static from(e,n,o){en(e.mutations.length===o.length);let u=cm;const c=e.mutations;for(let g=0;g<c.length;g++)u=u.insert(c[g].key,o[g].version);return new rp(e,n,o,u)}}class Nh{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class xy{constructor(e,n){this.count=e,this.unchangedNames=n}}var fo,li;function sp(i){switch(i){default:return Rt();case Xe.CANCELLED:case Xe.UNKNOWN:case Xe.DEADLINE_EXCEEDED:case Xe.RESOURCE_EXHAUSTED:case Xe.INTERNAL:case Xe.UNAVAILABLE:case Xe.UNAUTHENTICATED:return!1;case Xe.INVALID_ARGUMENT:case Xe.NOT_FOUND:case Xe.ALREADY_EXISTS:case Xe.PERMISSION_DENIED:case Xe.FAILED_PRECONDITION:case Xe.ABORTED:case Xe.OUT_OF_RANGE:case Xe.UNIMPLEMENTED:case Xe.DATA_LOSS:return!0}}function hm(i){if(void 0===i)return $r("GRPC error has no .code"),Xe.UNKNOWN;switch(i){case fo.OK:return Xe.OK;case fo.CANCELLED:return Xe.CANCELLED;case fo.UNKNOWN:return Xe.UNKNOWN;case fo.DEADLINE_EXCEEDED:return Xe.DEADLINE_EXCEEDED;case fo.RESOURCE_EXHAUSTED:return Xe.RESOURCE_EXHAUSTED;case fo.INTERNAL:return Xe.INTERNAL;case fo.UNAVAILABLE:return Xe.UNAVAILABLE;case fo.UNAUTHENTICATED:return Xe.UNAUTHENTICATED;case fo.INVALID_ARGUMENT:return Xe.INVALID_ARGUMENT;case fo.NOT_FOUND:return Xe.NOT_FOUND;case fo.ALREADY_EXISTS:return Xe.ALREADY_EXISTS;case fo.PERMISSION_DENIED:return Xe.PERMISSION_DENIED;case fo.FAILED_PRECONDITION:return Xe.FAILED_PRECONDITION;case fo.ABORTED:return Xe.ABORTED;case fo.OUT_OF_RANGE:return Xe.OUT_OF_RANGE;case fo.UNIMPLEMENTED:return Xe.UNIMPLEMENTED;case fo.DATA_LOSS:return Xe.DATA_LOSS;default:return Rt()}}(li=fo||(fo={}))[li.OK=0]="OK",li[li.CANCELLED=1]="CANCELLED",li[li.UNKNOWN=2]="UNKNOWN",li[li.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",li[li.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",li[li.NOT_FOUND=5]="NOT_FOUND",li[li.ALREADY_EXISTS=6]="ALREADY_EXISTS",li[li.PERMISSION_DENIED=7]="PERMISSION_DENIED",li[li.UNAUTHENTICATED=16]="UNAUTHENTICATED",li[li.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",li[li.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",li[li.ABORTED=10]="ABORTED",li[li.OUT_OF_RANGE=11]="OUT_OF_RANGE",li[li.UNIMPLEMENTED=12]="UNIMPLEMENTED",li[li.INTERNAL=13]="INTERNAL",li[li.UNAVAILABLE=14]="UNAVAILABLE",li[li.DATA_LOSS=15]="DATA_LOSS";function _a(){return new TextEncoder}const op=new yr([4294967295,4294967295],0);function ap(i){const e=_a().encode(i),n=new Vr;return n.update(e),new Uint8Array(n.digest())}function xh(i){const e=new DataView(i.buffer),n=e.getUint32(0,!0),o=e.getUint32(4,!0),u=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new yr([n,o],0),new yr([u,c],0)]}class Wo{constructor(e,n,o){if(this.bitmap=e,this.padding=n,this.hashCount=o,n<0||n>=8)throw new rl(`Invalid padding: ${n}`);if(o<0)throw new rl(`Invalid hash count: ${o}`);if(e.length>0&&0===this.hashCount)throw new rl(`Invalid hash count: ${o}`);if(0===e.length&&0!==n)throw new rl(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*e.length-n,this.Ee=yr.fromNumber(this.Te)}de(e,n,o){let u=e.add(n.multiply(yr.fromNumber(o)));return 1===u.compare(op)&&(u=new yr([u.getBits(0),u.getBits(1)],0)),u.modulo(this.Ee).toNumber()}Ae(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Te)return!1;const n=ap(e),[o,u]=xh(n);for(let c=0;c<this.hashCount;c++){const g=this.de(o,u,c);if(!this.Ae(g))return!1}return!0}static create(e,n,o){const u=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),g=new Wo(c,u,n);return o.forEach(S=>g.insert(S)),g}insert(e){if(0===this.Te)return;const n=ap(e),[o,u]=xh(n);for(let c=0;c<this.hashCount;c++){const g=this.de(o,u,c);this.Re(g)}}Re(e){const n=Math.floor(e/8);this.bitmap[n]|=1<<e%8}}class rl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Jc{constructor(e,n,o,u,c){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=o,this.documentUpdates=u,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,n,o){const u=new Map;return u.set(e,Xc.createSynthesizedTargetChangeForCurrentChange(e,n,o)),new Jc(hn.min(),u,new wi(Fn),So(),f())}}class Xc{constructor(e,n,o,u,c){this.resumeToken=e,this.current=n,this.addedDocuments=o,this.modifiedDocuments=u,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,n,o){return new Xc(o,n,f(),f(),f())}}class kh{constructor(e,n,o,u){this.Ve=e,this.removedTargetIds=n,this.key=o,this.me=u}}class up{constructor(e,n){this.targetId=e,this.fe=n}}class fm{constructor(e,n,o=Ji.EMPTY_BYTE_STRING,u=null){this.state=e,this.targetIds=n,this.resumeToken=o,this.cause=u}}class lp{constructor(){this.ge=0,this.pe=pm(),this.ye=Ji.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return 0!==this.ge}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=f(),n=f(),o=f();return this.pe.forEach((u,c)=>{switch(c){case 0:e=e.add(u);break;case 2:n=n.add(u);break;case 1:o=o.add(u);break;default:Rt()}}),new Xc(this.ye,this.we,e,n,o)}Fe(){this.Se=!1,this.pe=pm()}Me(e,n){this.Se=!0,this.pe=this.pe.insert(e,n)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,en(this.ge>=0)}Le(){this.Se=!0,this.we=!0}}class ky{constructor(e){this.Be=e,this.ke=new Map,this.qe=So(),this.Qe=cp(),this.Ke=new wi(Fn)}$e(e){for(const n of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(n,e.me):this.We(n,e.key,e.me);for(const n of e.removedTargetIds)this.We(n,e.key,e.me)}Ge(e){this.forEachTarget(e,n=>{const o=this.ze(n);switch(e.state){case 0:this.je(n)&&o.Ce(e.resumeToken);break;case 1:o.Ne(),o.be||o.Fe(),o.Ce(e.resumeToken);break;case 2:o.Ne(),o.be||this.removeTarget(n);break;case 3:this.je(n)&&(o.Le(),o.Ce(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),o.Ce(e.resumeToken));break;default:Rt()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ke.forEach((o,u)=>{this.je(u)&&n(u)})}Je(e){const n=e.targetId,o=e.fe.count,u=this.Ye(n);if(u){const c=u.target;if(Va(c))if(0===o){const g=new Ut(c.path);this.We(n,g,bt.newNoDocument(g,hn.min()))}else en(1===o);else{const g=this.Ze(n);if(g!==o){const S=this.Xe(e),x=S?this.et(S,e,g):1;0!==x&&(this.He(n),this.Ke=this.Ke.insert(n,2===x?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Xe(e){const n=e.fe.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:o="",padding:u=0},hashCount:c=0}=n;let g,S;try{g=Do(o).toUint8Array()}catch(x){if(x instanceof Ru)return Jr("Decoding the base64 bloom filter in existence filter failed ("+x.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw x}try{S=new Wo(g,u,c)}catch(x){return Jr(x instanceof rl?"BloomFilter error: ":"Applying bloom filter failed: ",x),null}return 0===S.Te?null:S}et(e,n,o){return n.fe.count===o-this.rt(e,n.targetId)?0:2}rt(e,n){const o=this.Be.getRemoteKeysForTarget(n);let u=0;return o.forEach(c=>{const g=this.Be.nt(),S=`projects/${g.projectId}/databases/${g.database}/documents/${c.path.canonicalString()}`;e.mightContain(S)||(this.We(n,c,null),u++)}),u}it(e){const n=new Map;this.ke.forEach((c,g)=>{const S=this.Ye(g);if(S){if(c.current&&Va(S.target)){const x=new Ut(S.target.path);null!==this.qe.get(x)||this.st(g,x)||this.We(g,x,bt.newNoDocument(x,e))}c.De&&(n.set(g,c.ve()),c.Fe())}});let o=f();this.Qe.forEach((c,g)=>{let S=!0;g.forEachWhile(x=>{const G=this.Ye(x);return!G||"TargetPurposeLimboResolution"===G.purpose||(S=!1,!1)}),S&&(o=o.add(c))}),this.qe.forEach((c,g)=>g.setReadTime(e));const u=new Jc(e,n,this.Ke,this.qe,o);return this.qe=So(),this.Qe=cp(),this.Ke=new wi(Fn),u}Ue(e,n){if(!this.je(e))return;const o=this.st(e,n.key)?2:0;this.ze(e).Me(n.key,o),this.qe=this.qe.insert(n.key,n),this.Qe=this.Qe.insert(n.key,this.ot(n.key).add(e))}We(e,n,o){if(!this.je(e))return;const u=this.ze(e);this.st(e,n)?u.Me(n,1):u.xe(n),this.Qe=this.Qe.insert(n,this.ot(n).delete(e)),o&&(this.qe=this.qe.insert(n,o))}removeTarget(e){this.ke.delete(e)}Ze(e){const n=this.ze(e).ve();return this.Be.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let n=this.ke.get(e);return n||(n=new lp,this.ke.set(e,n)),n}ot(e){let n=this.Qe.get(e);return n||(n=new ai(Fn),this.Qe=this.Qe.insert(e,n)),n}je(e){const n=null!==this.Ye(e);return n||dt("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){const n=this.ke.get(e);return n&&n.be?null:this.Be._t(e)}He(e){this.ke.set(e,new lp),this.Be.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}st(e,n){return this.Be.getRemoteKeysForTarget(e).has(n)}}function cp(){return new wi(Ut.comparator)}function pm(){return new wi(Ut.comparator)}const Fy={asc:"ASCENDING",desc:"DESCENDING"},dp={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},hp={and:"AND",or:"OR"};class Ly{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function gc(i,e){return i.useProto3Json||du(e)?e:{value:e}}function ed(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function gm(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function mm(i,e){return ed(i,e.toTimestamp())}function Ks(i){return en(!!i),hn.fromTimestamp(function(n){const o=Ho(n);return new Qt(o.seconds,o.nanos)}(i))}function Fh(i,e){return Pl(i,e).canonicalString()}function Pl(i,e){const n=(u=i,new qn(["projects",u.projectId,"databases",u.database])).child("documents");var u;return void 0===e?n:n.child(e)}function Ld(i){const e=qn.fromString(i);return en(mp(e)),e}function td(i,e){return Fh(i.databaseId,e.path)}function eu(i,e){const n=Ld(e);if(n.get(1)!==i.databaseId.projectId)throw new gt(Xe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+i.databaseId.projectId);if(n.get(3)!==i.databaseId.database)throw new gt(Xe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+i.databaseId.database);return new Ut(ym(n))}function Vd(i,e){return Fh(i.databaseId,e)}function _m(i){const e=Ld(i);return 4===e.length?qn.emptyPath():ym(e)}function fp(i){return new qn(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function ym(i){return en(i.length>4&&"documents"===i.get(4)),i.popFirst(5)}function vm(i,e,n){return{name:td(i,e),fields:n.value.mapValue.fields}}function Em(i,e,n){const o=eu(i,e.name),u=Ks(e.updateTime),c=e.createTime?Ks(e.createTime):hn.min(),g=new nn({mapValue:{fields:e.fields}}),S=bt.newFoundDocument(o,u,c,g);return n&&S.setHasCommittedMutations(),n?S.setHasCommittedMutations():S}function Ml(i,e){let n;if(e instanceof Eu)n={update:vm(i,e.key,e.value)};else if(e instanceof nl)n={delete:td(i,e.key)};else if(e instanceof Mu)n={update:vm(i,e.key,e.data),updateMask:bm(e.fieldMask)};else{if(!(e instanceof tp))return Rt();n={verify:td(i,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(o=>function(c,g){const S=g.transform;if(S instanceof hr)return{fieldPath:g.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(S instanceof so)return{fieldPath:g.field.canonicalString(),appendMissingElements:{values:S.elements}};if(S instanceof Xa)return{fieldPath:g.field.canonicalString(),removeAllFromArray:{values:S.elements}};if(S instanceof el)return{fieldPath:g.field.canonicalString(),increment:S.Ie};throw Rt()}(0,o))),e.precondition.isNone||(n.currentDocument=void 0!==(c=e.precondition).updateTime?{updateTime:mm(i,c.updateTime)}:void 0!==c.exists?{exists:c.exists}:Rt()),n;var c}function Ud(i,e){const n=e.currentDocument?void 0!==(c=e.currentDocument).updateTime?Xi.updateTime(Ks(c.updateTime)):void 0!==c.exists?Xi.exists(c.exists):Xi.none():Xi.none(),o=e.updateTransforms?e.updateTransforms.map(u=>function(g,S){let x=null;"setToServerValue"in S?(en("REQUEST_TIME"===S.setToServerValue),x=new hr):"appendMissingElements"in S?x=new so(S.appendMissingElements.values||[]):"removeAllFromArray"in S?x=new Xa(S.removeAllFromArray.values||[]):"increment"in S?x=new el(g,S.increment):Rt();const G=pi.fromServerFormat(S.fieldPath);return new Rl(G,x)}(i,u)):[];var c;if(e.update){const u=eu(i,e.update.name),c=new nn({mapValue:{fields:e.update.fields}});if(e.updateMask){const g=new $o((e.updateMask.fieldPaths||[]).map(te=>pi.fromServerFormat(te)));return new Mu(u,c,g,n,o)}return new Eu(u,c,n,o)}if(e.delete){const u=eu(i,e.delete);return new nl(u,n)}if(e.verify){const u=eu(i,e.verify);return new tp(u,n)}return Rt()}function wm(i,e){return{documents:[Vd(i,e.path)]}}function gp(i,e){const n={structuredQuery:{}},o=e.path;let u;null!==e.collectionGroup?(u=o,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(u=o.popLast(),n.structuredQuery.from=[{collectionId:o.lastSegment()}]),n.parent=Vd(i,u);const c=function(G){if(0!==G.length)return Cm(Jn.create(G,"and"))}(e.filters);c&&(n.structuredQuery.where=c);const g=function(G){if(0!==G.length)return G.map(te=>{return{field:mc((Se=te).field),direction:Dm(Se.dir)};var Se})}(e.orderBy);g&&(n.structuredQuery.orderBy=g);const S=gc(i,e.limit);return null!==S&&(n.structuredQuery.limit=S),e.startAt&&(n.structuredQuery.startAt={before:(G=e.startAt).inclusive,values:G.position}),e.endAt&&(n.structuredQuery.endAt=function(G){return{before:!G.inclusive,values:G.position}}(e.endAt)),{ut:n,parent:u};var G}function Lh(i){let e=_m(i.parent);const n=i.structuredQuery,o=n.from?n.from.length:0;let u=null;if(o>0){en(1===o);const te=n.from[0];te.allDescendants?u=te.collectionId:e=e.child(te.collectionId)}let c=[];n.where&&(c=function(ue){const Se=Nl(ue);return Se instanceof Jn&&ba(Se)?Se.getFilters():[Se]}(n.where));let g=[];n.orderBy&&(g=n.orderBy.map(Se=>{return new Yn(il((Nt=Se).field),function(jt){switch(jt){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(Nt.direction));var Nt}));let S=null;n.limit&&(S=function(ue){let Se;return Se="object"==typeof ue?ue.value:ue,du(Se)?null:Se}(n.limit));let x=null;var ue;n.startAt&&(x=new En((ue=n.startAt).values||[],!!ue.before));let G=null;return n.endAt&&(G=function(ue){return new En(ue.values||[],!ue.before)}(n.endAt)),Xu(e,u,g,c,S,"F",x,G)}function Nl(i){return void 0!==i.unaryFilter?function(n){switch(n.unaryFilter.op){case"IS_NAN":const o=il(n.unaryFilter.field);return In.create(o,"==",{doubleValue:NaN});case"IS_NULL":const u=il(n.unaryFilter.field);return In.create(u,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=il(n.unaryFilter.field);return In.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const g=il(n.unaryFilter.field);return In.create(g,"!=",{nullValue:"NULL_VALUE"});default:return Rt()}}(i):void 0!==i.fieldFilter?In.create(il((n=i).fieldFilter.field),function(u){switch(u){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Rt()}}(n.fieldFilter.op),n.fieldFilter.value):void 0!==i.compositeFilter?function(n){return Jn.create(n.compositeFilter.filters.map(o=>Nl(o)),function(u){switch(u){case"AND":return"and";case"OR":return"or";default:return Rt()}}(n.compositeFilter.op))}(i):Rt();var n}function Dm(i){return Fy[i]}function Am(i){return dp[i]}function Uy(i){return hp[i]}function mc(i){return{fieldPath:i.canonicalString()}}function il(i){return pi.fromServerFormat(i.fieldPath)}function Cm(i){return i instanceof In?function(n){if("=="===n.op){if(Y(n.value))return{unaryFilter:{field:mc(n.field),op:"IS_NAN"}};if(V(n.value))return{unaryFilter:{field:mc(n.field),op:"IS_NULL"}}}else if("!="===n.op){if(Y(n.value))return{unaryFilter:{field:mc(n.field),op:"IS_NOT_NAN"}};if(V(n.value))return{unaryFilter:{field:mc(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:mc(n.field),op:Am(n.op),value:n.value}}}(i):i instanceof Jn?function(n){const o=n.getFilters().map(u=>Cm(u));return 1===o.length?o[0]:{compositeFilter:{op:Uy(n.op),filters:o}}}(i):Rt()}function bm(i){const e=[];return i.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function mp(i){return i.length>=4&&"projects"===i.get(0)&&"databases"===i.get(2)}class Nu{constructor(e,n,o,u,c=hn.min(),g=hn.min(),S=Ji.EMPTY_BYTE_STRING,x=null){this.target=e,this.targetId=n,this.purpose=o,this.sequenceNumber=u,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=g,this.resumeToken=S,this.expectedCount=x}withSequenceNumber(e){return new Nu(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Nu(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Nu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Nu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Vh{constructor(e){this.ct=e}}function Bd(i,e){const n=e.key,o={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Ol(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())o.document={name:td(c=i.ct,(g=e).key),fields:g.data.value.mapValue.fields,updateTime:ed(c,g.version.toTimestamp()),createTime:ed(c,g.createTime.toTimestamp())};else if(e.isNoDocument())o.noDocument={path:n.path.toArray(),readTime:xl(e.version)};else{if(!e.isUnknownDocument())return Rt();o.unknownDocument={path:n.path.toArray(),version:xl(e.version)}}var c,g;return o}function Ol(i){const e=i.toTimestamp();return[e.seconds,e.nanoseconds]}function xl(i){const e=i.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function sl(i){const e=new Qt(i.seconds,i.nanoseconds);return hn.fromTimestamp(e)}function Ou(i,e){const n=(e.baseMutations||[]).map(c=>Ud(i.ct,c));for(let c=0;c<e.mutations.length-1;++c)c+1<e.mutations.length&&void 0!==e.mutations[c+1].transform&&(e.mutations[c].updateTransforms=e.mutations[c+1].transform.fieldTransforms,e.mutations.splice(c+1,1),++c);const o=e.mutations.map(c=>Ud(i.ct,c)),u=Qt.fromMillis(e.localWriteTimeMs);return new np(e.batchId,u,n,o)}function nd(i){const e=sl(i.readTime),n=void 0!==i.lastLimboFreeSnapshotVersion?sl(i.lastLimboFreeSnapshotVersion):hn.min();let o;return o=void 0!==i.query.documents?(en(1===(c=i.query).documents.length),bo(ac(_m(c.documents[0])))):function(c){return bo(Lh(c))}(i.query),new Nu(o,i.targetId,"TargetPurposeListen",i.lastListenSequenceNumber,e,n,Ji.fromBase64String(i.resumeToken));var c}function Uh(i,e){const n=xl(e.snapshotVersion),o=xl(e.lastLimboFreeSnapshotVersion);let u;u=Va(e.target)?wm(i.ct,e.target):gp(i.ct,e.target).ut;const c=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:ma(e.target),readTime:n,resumeToken:c,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:o,query:u}}function _c(i){const e=Lh({parent:i.parent,structuredQuery:i.structuredQuery});return"LAST"===i.limitType?Wc(e,e.limit,"L"):e}function _p(i,e){return new Nh(e.largestBatchId,Ud(i.ct,e.overlayMutation))}function yp(i,e){const n=e.path.lastSegment();return[i,R(e.path.popLast()),n]}function Rm(i,e,n,o){return{indexId:i,uid:e,sequenceNumber:n,readTime:xl(o.readTime),documentKey:R(o.documentKey.path),largestBatchId:o.largestBatchId}}class By{getBundleMetadata(e,n){return Pm(e).get(n).next(o=>{if(o)return{id:(c=o).bundleId,createTime:sl(c.createTime),version:c.version};var c})}saveBundleMetadata(e,n){return Pm(e).put({bundleId:(u=n).id,createTime:xl(Ks(u.createTime)),version:u.version});var u}getNamedQuery(e,n){return vp(e).get(n).next(o=>{if(o)return{name:(c=o).name,query:_c(c.bundledQuery),readTime:sl(c.readTime)};var c})}saveNamedQuery(e,n){return vp(e).put({name:(u=n).name,readTime:xl(Ks(u.readTime)),bundledQuery:u.bundledQuery});var u}}function Pm(i){return Yi(i,"bundles")}function vp(i){return Yi(i,"namedQueries")}class jd{constructor(e,n){this.serializer=e,this.userId=n}static lt(e,n){return new jd(e,n.uid||"")}getOverlay(e,n){return kl(e).get(yp(this.userId,n)).next(o=>o?_p(this.serializer,o):null)}getOverlays(e,n){const o=Go();return je.forEach(n,u=>this.getOverlay(e,u).next(c=>{null!==c&&o.set(u,c)})).next(()=>o)}saveOverlays(e,n,o){const u=[];return o.forEach((c,g)=>{const S=new Nh(n,g);u.push(this.ht(e,S))}),je.waitFor(u)}removeOverlaysForBatchId(e,n,o){const u=new Set;n.forEach(g=>u.add(R(g.getCollectionPath())));const c=[];return u.forEach(g=>{const S=IDBKeyRange.bound([this.userId,g,o],[this.userId,g,o+1],!1,!0);c.push(kl(e).H("collectionPathOverlayIndex",S))}),je.waitFor(c)}getOverlaysForCollection(e,n,o){const u=Go(),c=R(n),g=IDBKeyRange.bound([this.userId,c,o],[this.userId,c,Number.POSITIVE_INFINITY],!0);return kl(e).W("collectionPathOverlayIndex",g).next(S=>{for(const x of S){const G=_p(this.serializer,x);u.set(G.getKey(),G)}return u})}getOverlaysForCollectionGroup(e,n,o,u){const c=Go();let g;const S=IDBKeyRange.bound([this.userId,n,o],[this.userId,n,Number.POSITIVE_INFINITY],!0);return kl(e).Y({index:"collectionGroupOverlayIndex",range:S},(x,G,te)=>{const ue=_p(this.serializer,G);c.size()<u||ue.largestBatchId===g?(c.set(ue.getKey(),ue),g=ue.largestBatchId):te.done()}).next(()=>c)}ht(e,n){return kl(e).put(function(u,c,g){const[S,x,G]=yp(c,g.mutation.key);return{userId:c,collectionPath:x,documentId:G,collectionGroup:g.mutation.key.getCollectionGroup(),largestBatchId:g.largestBatchId,overlayMutation:Ml(u.ct,g.mutation)}}(this.serializer,this.userId,n))}}function kl(i){return Yi(i,"documentOverlays")}class ol{constructor(){}Pt(e,n){this.It(e,n),n.Tt()}It(e,n){if("nullValue"in e)this.Et(n,5);else if("booleanValue"in e)this.Et(n,10),n.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(n,15),n.dt($i(e.integerValue));else if("doubleValue"in e){const o=$i(e.doubleValue);isNaN(o)?this.Et(n,13):(this.Et(n,15),Da(o)?n.dt(0):n.dt(o))}else if("timestampValue"in e){const o=e.timestampValue;this.Et(n,20),"string"==typeof o?n.At(o):(n.At(`${o.seconds||""}`),n.dt(o.nanos||0))}else if("stringValue"in e)this.Rt(e.stringValue,n),this.Vt(n);else if("bytesValue"in e)this.Et(n,30),n.ft(Do(e.bytesValue)),this.Vt(n);else if("referenceValue"in e)this.gt(e.referenceValue,n);else if("geoPointValue"in e){const o=e.geoPointValue;this.Et(n,45),n.dt(o.latitude||0),n.dt(o.longitude||0)}else"mapValue"in e?Re(e)?this.Et(n,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,n),this.Vt(n)):"arrayValue"in e?(this.wt(e.arrayValue,n),this.Vt(n)):Rt()}Rt(e,n){this.Et(n,25),this.St(e,n)}St(e,n){n.At(e)}yt(e,n){const o=e.fields||{};this.Et(n,55);for(const u of Object.keys(o))this.Rt(u,n),this.It(o[u],n)}wt(e,n){const o=e.values||[];this.Et(n,50);for(const u of o)this.It(u,n)}gt(e,n){this.Et(n,37),Ut.fromName(e).path.forEach(o=>{this.Et(n,60),this.St(o,n)})}Et(e,n){e.dt(n)}Vt(e){e.dt(2)}}function rd(i){if(0===i)return 8;let e=0;return!(i>>4)&&(e+=4,i<<=4),!(i>>6)&&(e+=2,i<<=2),!(i>>7)&&(e+=1),e}function Mm(i){const e=64-function(o){let u=0;for(let c=0;c<8;++c){const g=rd(255&o[c]);if(u+=g,8!==g)break}return u}(i);return Math.ceil(e/8)}ol.bt=new ol;class jy{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(e){const n=e[Symbol.iterator]();let o=n.next();for(;!o.done;)this.Ct(o.value),o=n.next();this.vt()}Ft(e){const n=e[Symbol.iterator]();let o=n.next();for(;!o.done;)this.Mt(o.value),o=n.next();this.xt()}Ot(e){for(const n of e){const o=n.charCodeAt(0);if(o<128)this.Ct(o);else if(o<2048)this.Ct(960|o>>>6),this.Ct(128|63&o);else if(n<"\ud800"||"\udbff"<n)this.Ct(480|o>>>12),this.Ct(128|63&o>>>6),this.Ct(128|63&o);else{const u=n.codePointAt(0);this.Ct(240|u>>>18),this.Ct(128|63&u>>>12),this.Ct(128|63&u>>>6),this.Ct(128|63&u)}}this.vt()}Nt(e){for(const n of e){const o=n.charCodeAt(0);if(o<128)this.Mt(o);else if(o<2048)this.Mt(960|o>>>6),this.Mt(128|63&o);else if(n<"\ud800"||"\udbff"<n)this.Mt(480|o>>>12),this.Mt(128|63&o>>>6),this.Mt(128|63&o);else{const u=n.codePointAt(0);this.Mt(240|u>>>18),this.Mt(128|63&u>>>12),this.Mt(128|63&u>>>6),this.Mt(128|63&u)}}this.xt()}Lt(e){const n=this.Bt(e),o=Mm(n);this.kt(1+o),this.buffer[this.position++]=255&o;for(let u=n.length-o;u<n.length;++u)this.buffer[this.position++]=255&n[u]}qt(e){const n=this.Bt(e),o=Mm(n);this.kt(1+o),this.buffer[this.position++]=~(255&o);for(let u=n.length-o;u<n.length;++u)this.buffer[this.position++]=~(255&n[u])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(e){this.kt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Wt(){return this.buffer.slice(0,this.position)}Bt(e){const n=function(c){const g=new DataView(new ArrayBuffer(8));return g.setFloat64(0,c,!1),new Uint8Array(g.buffer)}(e),o=0!=(128&n[0]);n[0]^=o?255:128;for(let u=1;u<n.length;++u)n[u]^=o?255:0;return n}Ct(e){const n=255&e;0===n?(this.Kt(0),this.Kt(255)):255===n?(this.Kt(255),this.Kt(0)):this.Kt(n)}Mt(e){const n=255&e;0===n?(this.Ut(0),this.Ut(255)):255===n?(this.Ut(255),this.Ut(0)):this.Ut(e)}vt(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(e){this.kt(1),this.buffer[this.position++]=e}Ut(e){this.kt(1),this.buffer[this.position++]=~e}kt(e){const n=e+this.position;if(n<=this.buffer.length)return;let o=2*this.buffer.length;o<n&&(o=n);const u=new Uint8Array(o);u.set(this.buffer),this.buffer=u}}class jE{constructor(e){this.Gt=e}ft(e){this.Gt.Dt(e)}At(e){this.Gt.Ot(e)}dt(e){this.Gt.Lt(e)}Tt(){this.Gt.Qt()}}class $y{constructor(e){this.Gt=e}ft(e){this.Gt.Ft(e)}At(e){this.Gt.Nt(e)}dt(e){this.Gt.qt(e)}Tt(){this.Gt.$t()}}class yc{constructor(){this.Gt=new jy,this.zt=new jE(this.Gt),this.jt=new $y(this.Gt)}seed(e){this.Gt.seed(e)}Ht(e){return 0===e?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}}class vc{constructor(e,n,o,u){this.indexId=e,this.documentKey=n,this.arrayValue=o,this.directionalValue=u}Jt(){const e=this.directionalValue.length,n=0===e||255===this.directionalValue[e-1]?e+1:e,o=new Uint8Array(n);return o.set(this.directionalValue,0),n!==e?o.set([0],this.directionalValue.length):++o[o.length-1],new vc(this.indexId,this.documentKey,this.arrayValue,o)}}function ja(i,e){let n=i.indexId-e.indexId;return 0!==n?n:(n=$d(i.arrayValue,e.arrayValue),0!==n?n:(n=$d(i.directionalValue,e.directionalValue),0!==n?n:Ut.comparator(i.documentKey,e.documentKey)))}function $d(i,e){for(let n=0;n<i.length&&n<e.length;++n){const o=i[n]-e[n];if(0!==o)return o}return i.length-e.length}class Bh{constructor(e){this.Yt=new ai((n,o)=>pi.comparator(n.field,o.field)),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Zt=e.orderBy,this.Xt=[];for(const n of e.filters){const o=n;o.isInequality()?this.Yt=this.Yt.add(o):this.Xt.push(o)}}get en(){return this.Yt.size>1}tn(e){if(en(e.collectionGroup===this.collectionId),this.en)return!1;const n=Cu(e);if(void 0!==n&&!this.nn(n))return!1;const o=Ta(e);let u=new Set,c=0,g=0;for(;c<o.length&&this.nn(o[c]);++c)u=u.add(o[c].fieldPath.canonicalString());if(c===o.length)return!0;if(this.Yt.size>0){const S=this.Yt.getIterator().getNext();if(!u.has(S.field.canonicalString())){const x=o[c];if(!this.rn(S,x)||!this.sn(this.Zt[g++],x))return!1}++c}for(;c<o.length;++c)if(g>=this.Zt.length||!this.sn(this.Zt[g++],o[c]))return!1;return!0}on(){if(this.en)return null;let e=new ai(pi.comparator);const n=[];for(const o of this.Xt)if(!o.field.isKeyField())if("array-contains"===o.op||"array-contains-any"===o.op)n.push(new Oa(o.field,2));else{if(e.has(o.field))continue;e=e.add(o.field),n.push(new Oa(o.field,0))}for(const o of this.Zt)o.field.isKeyField()||e.has(o.field)||(e=e.add(o.field),n.push(new Oa(o.field,"asc"===o.dir?0:1)));return new Io(Io.UNKNOWN_ID,this.collectionId,n,ht.empty())}nn(e){for(const n of this.Xt)if(this.rn(n,e))return!0;return!1}rn(e,n){return!(void 0===e||!e.field.isEqual(n.fieldPath))&&2===n.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,n){return!!e.field.isEqual(n.fieldPath)&&(0===n.kind&&"asc"===e.dir||1===n.kind&&"desc"===e.dir)}}function Ep(i){var e,n;if(en(i instanceof In||i instanceof Jn),i instanceof In){if(i instanceof ga){const u=(null===(n=null===(e=i.value.arrayValue)||void 0===e?void 0:e.values)||void 0===n?void 0:n.map(c=>In.create(i.field,"==",c)))||[];return Jn.create(u,"or")}return i}const o=i.filters.map(u=>Ep(u));return Jn.create(o,i.op)}function Nm(i){if(0===i.getFilters().length)return[];const e=Ip(Ep(i));return en(Om(e)),jh(e)||al(e)?[e]:e.getFilters()}function jh(i){return i instanceof In}function al(i){return i instanceof Jn&&ba(i)}function Om(i){return jh(i)||al(i)||function(n){if(n instanceof Jn&&la(n)){for(const o of n.getFilters())if(!jh(o)&&!al(o))return!1;return!0}return!1}(i)}function Ip(i){if(en(i instanceof In||i instanceof Jn),i instanceof In)return i;if(1===i.filters.length)return Ip(i.filters[0]);const e=i.filters.map(o=>Ip(o));let n=Jn.create(e,i.op);return n=$h(n),Om(n)?n:(en(n instanceof Jn),en(Ao(n)),en(n.filters.length>1),n.filters.reduce((o,u)=>wp(o,u)))}function wp(i,e){let n;return en(i instanceof In||i instanceof Jn),en(e instanceof In||e instanceof Jn),n=i instanceof In?e instanceof In?Jn.create([i,e],"and"):xm(i,e):e instanceof In?xm(e,i):function(u,c){if(en(u.filters.length>0&&c.filters.length>0),Ao(u)&&Ao(c))return Ju(u,c.getFilters());const g=la(u)?u:c,S=la(u)?c:u,x=g.filters.map(G=>wp(G,S));return Jn.create(x,"or")}(i,e),$h(n)}function xm(i,e){if(Ao(e))return Ju(e,i.getFilters());{const n=e.filters.map(o=>wp(i,o));return Jn.create(n,"or")}}function $h(i){if(en(i instanceof In||i instanceof Jn),i instanceof In)return i;const e=i.getFilters();if(1===e.length)return $h(e[0]);if(zc(i))return i;const n=e.map(u=>$h(u)),o=[];return n.forEach(u=>{u instanceof In?o.push(u):u instanceof Jn&&(u.op===i.op?o.push(...u.filters):o.push(u))}),1===o.length?o[0]:Jn.create(o,i.op)}class ul{constructor(){this._n=new Fl}addToCollectionParentIndex(e,n){return this._n.add(n),je.resolve()}getCollectionParents(e,n){return je.resolve(this._n.getEntries(n))}addFieldIndex(e,n){return je.resolve()}deleteFieldIndex(e,n){return je.resolve()}deleteAllFieldIndexes(e){return je.resolve()}createTargetIndexes(e,n){return je.resolve()}getDocumentsMatchingTarget(e,n){return je.resolve(null)}getIndexType(e,n){return je.resolve(0)}getFieldIndexes(e,n){return je.resolve([])}getNextCollectionGroupToUpdate(e){return je.resolve(null)}getMinOffset(e,n){return je.resolve(Ws.min())}getMinOffsetFromCollectionGroup(e,n){return je.resolve(Ws.min())}updateCollectionGroup(e,n,o){return je.resolve()}updateIndexEntries(e,n){return je.resolve()}}class Fl{constructor(){this.index={}}add(e){const n=e.lastSegment(),o=e.popLast(),u=this.index[n]||new ai(qn.comparator),c=!u.has(o);return this.index[n]=u.add(o),c}has(e){const n=e.lastSegment(),o=e.popLast(),u=this.index[n];return u&&u.has(o)}getEntries(e){return(this.index[e]||new ai(qn.comparator)).toArray()}}const Hh=new Uint8Array(0);class Hy{constructor(e,n){this.databaseId=n,this.an=new Fl,this.un=new Ba(o=>ma(o),(o,u)=>Ns(o,u)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.an.has(n)){const o=n.lastSegment(),u=n.popLast();e.addOnCommittedListener(()=>{this.an.add(n)});const c={collectionId:o,parent:R(u)};return km(e).put(c)}return je.resolve()}getCollectionParents(e,n){const o=[],u=IDBKeyRange.bound([n,""],[zu(n),""],!1,!0);return km(e).W(u).next(c=>{for(const g of c){if(g.collectionId!==n)break;o.push(B(g.parent))}return o})}addFieldIndex(e,n){const o=Hd(e),u={indexId:(S=n).indexId,collectionGroup:S.collectionGroup,fields:S.fields.map(x=>[x.fieldPath.canonicalString(),x.kind])};var S;delete u.indexId;const c=o.add(u);if(n.indexState){const g=sd(e);return c.next(S=>{g.put(Rm(S,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return c.next()}deleteFieldIndex(e,n){const o=Hd(e),u=sd(e),c=id(e);return o.delete(n.indexId).next(()=>u.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>c.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=Hd(e),o=id(e),u=sd(e);return n.H().next(()=>o.H()).next(()=>u.H())}createTargetIndexes(e,n){return je.forEach(this.cn(n),o=>this.getIndexType(e,o).next(u=>{if(0===u||1===u){const c=new Bh(o).on();if(null!=c)return this.addFieldIndex(e,c)}}))}getDocumentsMatchingTarget(e,n){const o=id(e);let u=!0;const c=new Map;return je.forEach(this.cn(n),g=>this.ln(e,g).next(S=>{u&&(u=!!S),c.set(g,S)})).next(()=>{if(u){let g=f();const S=[];return je.forEach(c,(x,G)=>{var wn;dt("IndexedDbIndexManager",`Using index ${wn=x,`id=${wn.indexId}|cg=${wn.collectionGroup}|f=${wn.fields.map(Pr=>`${Pr.fieldPath}:${Pr.kind}`).join(",")}`} to execute ${ma(n)}`);const te=function(wn,Pr){const es=Cu(Pr);if(void 0===es)return null;for(const Ni of co(wn,es.fieldPath))switch(Ni.op){case"array-contains-any":return Ni.value.arrayValue.values||[];case"array-contains":return[Ni.value]}return null}(G,x),ue=function(wn,Pr){const es=new Map;for(const Ni of Ta(Pr))for(const Po of co(wn,Ni.fieldPath))switch(Po.op){case"==":case"in":es.set(Ni.fieldPath.canonicalString(),Po.value);break;case"not-in":case"!=":return es.set(Ni.fieldPath.canonicalString(),Po.value),Array.from(es.values())}return null}(G,x),Se=function(wn,Pr){const es=[];let Ni=!0;for(const Po of Ta(Pr)){const $a=0===Po.kind?Cl(wn,Po.fieldPath,wn.startAt):ho(wn,Po.fieldPath,wn.startAt);es.push($a.value),Ni&&(Ni=$a.inclusive)}return new En(es,Ni)}(G,x),qe=function(wn,Pr){const es=[];let Ni=!0;for(const Po of Ta(Pr)){const $a=0===Po.kind?ho(wn,Po.fieldPath,wn.endAt):Cl(wn,Po.fieldPath,wn.endAt);es.push($a.value),Ni&&(Ni=$a.inclusive)}return new En(es,Ni)}(G,x),Nt=this.hn(x,G,Se),zt=this.hn(x,G,qe),jt=this.Pn(x,G,ue),An=this.In(x.indexId,te,Nt,Se.inclusive,zt,qe.inclusive,jt);return je.forEach(An,fr=>o.j(fr,n.limit).next(wn=>{wn.forEach(Pr=>{const es=Ut.fromSegments(Pr.documentKey);g.has(es)||(g=g.add(es),S.push(es))})}))}).next(()=>S)}return je.resolve(null)})}cn(e){let n=this.un.get(e);return n||(n=0===e.filters.length?[e]:Nm(Jn.create(e.filters,"and")).map(o=>_u(e.path,e.collectionGroup,e.orderBy,o.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,n),n)}In(e,n,o,u,c,g,S){const x=(null!=n?n.length:1)*Math.max(o.length,c.length),G=x/(null!=n?n.length:1),te=[];for(let ue=0;ue<x;++ue){const Se=n?this.Tn(n[ue/G]):Hh,qe=this.En(e,Se,o[ue%G],u),Nt=this.dn(e,Se,c[ue%G],g),zt=S.map(jt=>this.En(e,Se,jt,!0));te.push(...this.createRange(qe,Nt,zt))}return te}En(e,n,o,u){const c=new vc(e,Ut.empty(),n,o);return u?c:c.Jt()}dn(e,n,o,u){const c=new vc(e,Ut.empty(),n,o);return u?c.Jt():c}ln(e,n){const o=new Bh(n),u=null!=n.collectionGroup?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,u).next(c=>{let g=null;for(const S of c)o.tn(S)&&(!g||S.fields.length>g.fields.length)&&(g=S);return g})}getIndexType(e,n){let o=2;const u=this.cn(n);return je.forEach(u,c=>this.ln(e,c).next(g=>{g?0!==o&&g.fields.length<function(x){let G=new ai(pi.comparator),te=!1;for(const ue of x.filters)for(const Se of ue.getFlattenedFilters())Se.field.isKeyField()||("array-contains"===Se.op||"array-contains-any"===Se.op?te=!0:G=G.add(Se.field));for(const ue of x.orderBy)ue.field.isKeyField()||(G=G.add(ue.field));return G.size+(te?1:0)}(c)&&(o=1):o=0})).next(()=>null!==n.limit&&u.length>1&&2===o?1:o)}An(e,n){const o=new yc;for(const u of Ta(e)){const c=n.data.field(u.fieldPath);if(null==c)return null;const g=o.Ht(u.kind);ol.bt.Pt(c,g)}return o.Wt()}Tn(e){const n=new yc;return ol.bt.Pt(e,n.Ht(0)),n.Wt()}Rn(e,n){const o=new yc;return ol.bt.Pt(d(this.databaseId,n),o.Ht(function(c){const g=Ta(c);return 0===g.length?0:g[g.length-1].kind}(e))),o.Wt()}Pn(e,n,o){if(null===o)return[];let u=[];u.push(new yc);let c=0;for(const g of Ta(e)){const S=o[c++];for(const x of u)if(this.Vn(n,g.fieldPath)&&T(S))u=this.mn(u,g,S);else{const G=x.Ht(g.kind);ol.bt.Pt(S,G)}}return this.fn(u)}hn(e,n,o){return this.Pn(e,n,o.position)}fn(e){const n=[];for(let o=0;o<e.length;++o)n[o]=e[o].Wt();return n}mn(e,n,o){const u=[...e],c=[];for(const g of o.arrayValue.values||[])for(const S of u){const x=new yc;x.seed(S.Wt()),ol.bt.Pt(g,x.Ht(n.kind)),c.push(x)}return c}Vn(e,n){return!!e.filters.find(o=>o instanceof In&&o.field.isEqual(n)&&("in"===o.op||"not-in"===o.op))}getFieldIndexes(e,n){const o=Hd(e),u=sd(e);return(n?o.W("collectionGroupIndex",IDBKeyRange.bound(n,n)):o.W()).next(c=>{const g=[];return je.forEach(c,S=>u.get([S.indexId,this.uid]).next(x=>{g.push(function(te,ue){const Se=ue?new ht(ue.sequenceNumber,new Ws(sl(ue.readTime),new Ut(B(ue.documentKey)),ue.largestBatchId)):ht.empty(),qe=te.fields.map(([Nt,zt])=>new Oa(pi.fromServerFormat(Nt),zt));return new Io(te.indexId,te.collectionGroup,qe,Se)}(S,x))})).next(()=>g)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>0===n.length?null:(n.sort((o,u)=>{const c=o.indexState.sequenceNumber-u.indexState.sequenceNumber;return 0!==c?c:Fn(o.collectionGroup,u.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,o){const u=Hd(e),c=sd(e);return this.gn(e).next(g=>u.W("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(S=>je.forEach(S,x=>c.put(Rm(x.indexId,this.uid,g,o)))))}updateIndexEntries(e,n){const o=new Map;return je.forEach(n,(u,c)=>{const g=o.get(u.collectionGroup);return(g?je.resolve(g):this.getFieldIndexes(e,u.collectionGroup)).next(S=>(o.set(u.collectionGroup,S),je.forEach(S,x=>this.pn(e,u,x).next(G=>{const te=this.yn(c,x);return G.isEqual(te)?je.resolve():this.wn(e,c,x,G,te)}))))})}Sn(e,n,o,u){return id(e).put({indexId:u.indexId,uid:this.uid,arrayValue:u.arrayValue,directionalValue:u.directionalValue,orderedDocumentKey:this.Rn(o,n.key),documentKey:n.key.path.toArray()})}bn(e,n,o,u){return id(e).delete([u.indexId,this.uid,u.arrayValue,u.directionalValue,this.Rn(o,n.key),n.key.path.toArray()])}pn(e,n,o){const u=id(e);let c=new ai(ja);return u.Y({index:"documentKeyIndex",range:IDBKeyRange.only([o.indexId,this.uid,this.Rn(o,n)])},(g,S)=>{c=c.add(new vc(o.indexId,n,S.arrayValue,S.directionalValue))}).next(()=>c)}yn(e,n){let o=new ai(ja);const u=this.An(n,e);if(null==u)return o;const c=Cu(n);if(null!=c){const g=e.data.field(c.fieldPath);if(T(g))for(const S of g.arrayValue.values||[])o=o.add(new vc(n.indexId,e.key,this.Tn(S),u))}else o=o.add(new vc(n.indexId,e.key,Hh,u));return o}wn(e,n,o,u,c){dt("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const g=[];return function(x,G,te,ue,Se){const qe=x.getIterator(),Nt=G.getIterator();let zt=Za(qe),jt=Za(Nt);for(;zt||jt;){let An=!1,fr=!1;if(zt&&jt){const wn=te(zt,jt);wn<0?fr=!0:wn>0&&(An=!0)}else null!=zt?fr=!0:An=!0;An?(ue(jt),jt=Za(Nt)):fr?(Se(zt),zt=Za(qe)):(zt=Za(qe),jt=Za(Nt))}}(u,c,ja,S=>{g.push(this.Sn(e,n,o,S))},S=>{g.push(this.bn(e,n,o,S))}),je.waitFor(g)}gn(e){let n=1;return sd(e).Y({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(o,u,c)=>{c.done(),n=u.sequenceNumber+1}).next(()=>n)}createRange(e,n,o){o=o.sort((g,S)=>ja(g,S)).filter((g,S,x)=>!S||0!==ja(g,x[S-1]));const u=[];u.push(e);for(const g of o){const S=ja(g,e),x=ja(g,n);if(0===S)u[0]=e.Jt();else if(S>0&&x<0)u.push(g),u.push(g.Jt());else if(x>0)break}u.push(n);const c=[];for(let g=0;g<u.length;g+=2){if(this.Dn(u[g],u[g+1]))return[];c.push(IDBKeyRange.bound([u[g].indexId,this.uid,u[g].arrayValue,u[g].directionalValue,Hh,[]],[u[g+1].indexId,this.uid,u[g+1].arrayValue,u[g+1].directionalValue,Hh,[]]))}return c}Dn(e,n){return ja(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(Tp)}getMinOffset(e,n){return je.mapArray(this.cn(n),o=>this.ln(e,o).next(u=>u||Rt())).next(Tp)}}function km(i){return Yi(i,"collectionParents")}function id(i){return Yi(i,"indexEntries")}function Hd(i){return Yi(i,"indexConfiguration")}function sd(i){return Yi(i,"indexState")}function Tp(i){en(0!==i.length);let e=i[0].indexState.offset,n=e.largestBatchId;for(let o=1;o<i.length;o++){const u=i[o].indexState.offset;Qi(u,e)<0&&(e=u),n<u.largestBatchId&&(n=u.largestBatchId)}return new Ws(e.readTime,e.documentKey,n)}const Fm={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class ca{constructor(e,n,o){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=o}static withCacheSize(e){return new ca(e,ca.DEFAULT_COLLECTION_PERCENTILE,ca.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Lm(i,e,n){const o=i.store("mutations"),u=i.store("documentMutations"),c=[],g=IDBKeyRange.only(n.batchId);let S=0;const x=o.Y({range:g},(te,ue,Se)=>(S++,Se.delete()));c.push(x.next(()=>{en(1===S)}));const G=[];for(const te of n.mutations){const ue=Ke(e,te.key.path,n.batchId);c.push(u.delete(ue)),G.push(te.key)}return je.waitFor(c).next(()=>G)}function zh(i){if(!i)return 0;let e;if(i.document)e=i.document;else if(i.unknownDocument)e=i.unknownDocument;else{if(!i.noDocument)throw Rt();e=i.noDocument}return JSON.stringify(e).length}ca.DEFAULT_COLLECTION_PERCENTILE=10,ca.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ca.DEFAULT=new ca(41943040,ca.DEFAULT_COLLECTION_PERCENTILE,ca.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ca.DISABLED=new ca(-1,0,0);class Ec{constructor(e,n,o,u){this.userId=e,this.serializer=n,this.indexManager=o,this.referenceDelegate=u,this.Cn={}}static lt(e,n,o,u){en(""!==e.uid);const c=e.isAuthenticated()?e.uid:"";return new Ec(c,n,o,u)}checkEmpty(e){let n=!0;const o=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return tu(e).Y({index:"userMutationsIndex",range:o},(u,c,g)=>{n=!1,g.done()}).next(()=>n)}addMutationBatch(e,n,o,u){const c=Ic(e),g=tu(e);return g.add({}).next(S=>{en("number"==typeof S);const x=new np(S,n,o,u),G=function(qe,Nt,zt){const jt=zt.baseMutations.map(fr=>Ml(qe.ct,fr)),An=zt.mutations.map(fr=>Ml(qe.ct,fr));return{userId:Nt,batchId:zt.batchId,localWriteTimeMs:zt.localWriteTime.toMillis(),baseMutations:jt,mutations:An}}(this.serializer,this.userId,x),te=[];let ue=new ai((Se,qe)=>Fn(Se.canonicalString(),qe.canonicalString()));for(const Se of u){const qe=Ke(this.userId,Se.key.path,S);ue=ue.add(Se.key.path.popLast()),te.push(g.put(G)),te.push(c.put(qe,We))}return ue.forEach(Se=>{te.push(this.indexManager.addToCollectionParentIndex(e,Se))}),e.addOnCommittedListener(()=>{this.Cn[S]=x.keys()}),je.waitFor(te).next(()=>x)})}lookupMutationBatch(e,n){return tu(e).get(n).next(o=>o?(en(o.userId===this.userId),Ou(this.serializer,o)):null)}vn(e,n){return this.Cn[n]?je.resolve(this.Cn[n]):this.lookupMutationBatch(e,n).next(o=>{if(o){const u=o.keys();return this.Cn[n]=u,u}return null})}getNextMutationBatchAfterBatchId(e,n){const o=n+1,u=IDBKeyRange.lowerBound([this.userId,o]);let c=null;return tu(e).Y({index:"userMutationsIndex",range:u},(g,S,x)=>{S.userId===this.userId&&(en(S.batchId>=o),c=Ou(this.serializer,S)),x.done()}).next(()=>c)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let o=-1;return tu(e).Y({index:"userMutationsIndex",range:n,reverse:!0},(u,c,g)=>{o=c.batchId,g.done()}).next(()=>o)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return tu(e).W("userMutationsIndex",n).next(o=>o.map(u=>Ou(this.serializer,u)))}getAllMutationBatchesAffectingDocumentKey(e,n){const o=fe(this.userId,n.path),u=IDBKeyRange.lowerBound(o),c=[];return Ic(e).Y({range:u},(g,S,x)=>{const[G,te,ue]=g,Se=B(te);if(G===this.userId&&n.path.isEqual(Se))return tu(e).get(ue).next(qe=>{if(!qe)throw Rt();en(qe.userId===this.userId),c.push(Ou(this.serializer,qe))});x.done()}).next(()=>c)}getAllMutationBatchesAffectingDocumentKeys(e,n){let o=new ai(Fn);const u=[];return n.forEach(c=>{const g=fe(this.userId,c.path),S=IDBKeyRange.lowerBound(g),x=Ic(e).Y({range:S},(G,te,ue)=>{const[Se,qe,Nt]=G,zt=B(qe);Se===this.userId&&c.path.isEqual(zt)?o=o.add(Nt):ue.done()});u.push(x)}),je.waitFor(u).next(()=>this.Fn(e,o))}getAllMutationBatchesAffectingQuery(e,n){const o=n.path,u=o.length+1,c=fe(this.userId,o),g=IDBKeyRange.lowerBound(c);let S=new ai(Fn);return Ic(e).Y({range:g},(x,G,te)=>{const[ue,Se,qe]=x,Nt=B(Se);ue===this.userId&&o.isPrefixOf(Nt)?Nt.length===u&&(S=S.add(qe)):te.done()}).next(()=>this.Fn(e,S))}Fn(e,n){const o=[],u=[];return n.forEach(c=>{u.push(tu(e).get(c).next(g=>{if(null===g)throw Rt();en(g.userId===this.userId),o.push(Ou(this.serializer,g))}))}),je.waitFor(u).next(()=>o)}removeMutationBatch(e,n){return Lm(e.ae,this.userId,n).next(o=>(e.addOnCommittedListener(()=>{this.Mn(n.batchId)}),je.forEach(o,u=>this.referenceDelegate.markPotentiallyOrphaned(e,u))))}Mn(e){delete this.Cn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return je.resolve();const o=IDBKeyRange.lowerBound([this.userId]),u=[];return Ic(e).Y({range:o},(c,g,S)=>{if(c[0]===this.userId){const x=B(c[1]);u.push(x)}else S.done()}).next(()=>{en(0===u.length)})})}containsKey(e,n){return xu(e,this.userId,n)}xn(e){return Dp(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function xu(i,e,n){const o=fe(e,n.path),u=o[1],c=IDBKeyRange.lowerBound(o);let g=!1;return Ic(i).Y({range:c,J:!0},(S,x,G)=>{const[te,ue,Se]=S;te===e&&ue===u&&(g=!0),G.done()}).next(()=>g)}function tu(i){return Yi(i,"mutations")}function Ic(i){return Yi(i,"documentMutations")}function Dp(i){return Yi(i,"mutationQueues")}class Ll{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new Ll(0)}static Ln(){return new Ll(-1)}}class $E{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.Bn(e).next(n=>{const o=new Ll(n.highestTargetId);return n.highestTargetId=o.next(),this.kn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Bn(e).next(n=>hn.fromTimestamp(new Qt(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Bn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,o){return this.Bn(e).next(u=>(u.highestListenSequenceNumber=n,o&&(u.lastRemoteSnapshotVersion=o.toTimestamp()),n>u.highestListenSequenceNumber&&(u.highestListenSequenceNumber=n),this.kn(e,u)))}addTargetData(e,n){return this.qn(e,n).next(()=>this.Bn(e).next(o=>(o.targetCount+=1,this.Qn(n,o),this.kn(e,o))))}updateTargetData(e,n){return this.qn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>zd(e).delete(n.targetId)).next(()=>this.Bn(e)).next(o=>(en(o.targetCount>0),o.targetCount-=1,this.kn(e,o)))}removeTargets(e,n,o){let u=0;const c=[];return zd(e).Y((g,S)=>{const x=nd(S);x.sequenceNumber<=n&&null===o.get(x.targetId)&&(u++,c.push(this.removeTargetData(e,x)))}).next(()=>je.waitFor(c)).next(()=>u)}forEachTarget(e,n){return zd(e).Y((o,u)=>{const c=nd(u);n(c)})}Bn(e){return zy(e).get("targetGlobalKey").next(n=>(en(null!==n),n))}kn(e,n){return zy(e).put("targetGlobalKey",n)}qn(e,n){return zd(e).put(Uh(this.serializer,n))}Qn(e,n){let o=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,o=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,o=!0),o}getTargetCount(e){return this.Bn(e).next(n=>n.targetCount)}getTargetData(e,n){const o=ma(n),u=IDBKeyRange.bound([o,Number.NEGATIVE_INFINITY],[o,Number.POSITIVE_INFINITY]);let c=null;return zd(e).Y({range:u,index:"queryTargetsIndex"},(g,S,x)=>{const G=nd(S);Ns(n,G.target)&&(c=G,x.done())}).next(()=>c)}addMatchingKeys(e,n,o){const u=[],c=ku(e);return n.forEach(g=>{const S=R(g.path);u.push(c.put({targetId:o,path:S})),u.push(this.referenceDelegate.addReference(e,o,g))}),je.waitFor(u)}removeMatchingKeys(e,n,o){const u=ku(e);return je.forEach(n,c=>{const g=R(c.path);return je.waitFor([u.delete([o,g]),this.referenceDelegate.removeReference(e,o,c)])})}removeMatchingKeysForTargetId(e,n){const o=ku(e),u=IDBKeyRange.bound([n],[n+1],!1,!0);return o.delete(u)}getMatchingKeysForTargetId(e,n){const o=IDBKeyRange.bound([n],[n+1],!1,!0),u=ku(e);let c=f();return u.Y({range:o,J:!0},(g,S,x)=>{const G=B(g[1]),te=new Ut(G);c=c.add(te)}).next(()=>c)}containsKey(e,n){const o=R(n.path),u=IDBKeyRange.bound([o],[zu(o)],!1,!0);let c=0;return ku(e).Y({index:"documentTargetsIndex",J:!0,range:u},([g,S],x,G)=>{0!==g&&(c++,G.done())}).next(()=>c>0)}_t(e,n){return zd(e).get(n).next(o=>o?nd(o):null)}}function zd(i){return Yi(i,"targets")}function zy(i){return Yi(i,"targetGlobal")}function ku(i){return Yi(i,"targetDocuments")}function Gh([i,e],[n,o]){const u=Fn(i,n);return 0===u?Fn(e,o):u}class HE{constructor(e){this.Kn=e,this.buffer=new ai(Gh),this.$n=0}Un(){return++this.$n}Wn(e){const n=[e,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(n);else{const o=this.buffer.last();Gh(n,o)<0&&(this.buffer=this.buffer.delete(o).add(n))}}get maxValue(){return this.buffer.last()[0]}}class Gy{constructor(e,n,o){this.garbageCollector=e,this.asyncQueue=n,this.localStore=o,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.zn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}zn(e){var n=this;dt("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,h.Z)(function*(){n.Gn=null;try{yield n.localStore.collectGarbage(n.garbageCollector)}catch(o){Ei(o)?dt("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",o):yield as(o)}yield n.zn(3e5)}))}}class Vm{constructor(e,n){this.jn=e,this.params=n}calculateTargetCount(e,n){return this.jn.Hn(e).next(o=>Math.floor(n/100*o))}nthSequenceNumber(e,n){if(0===n)return je.resolve(lo._e);const o=new HE(n);return this.jn.forEachTarget(e,u=>o.Wn(u.sequenceNumber)).next(()=>this.jn.Jn(e,u=>o.Wn(u))).next(()=>o.maxValue)}removeTargets(e,n,o){return this.jn.removeTargets(e,n,o)}removeOrphanedDocuments(e,n){return this.jn.removeOrphanedDocuments(e,n)}collect(e,n){return-1===this.params.cacheSizeCollectionThreshold?(dt("LruGarbageCollector","Garbage collection skipped; disabled"),je.resolve(Fm)):this.getCacheSize(e).next(o=>o<this.params.cacheSizeCollectionThreshold?(dt("LruGarbageCollector",`Garbage collection skipped; Cache size ${o} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Fm):this.Yn(e,n))}getCacheSize(e){return this.jn.getCacheSize(e)}Yn(e,n){let o,u,c,g,S,x,G;const te=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(ue=>(ue>this.params.maximumSequenceNumbersToCollect?(dt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${ue}`),u=this.params.maximumSequenceNumbersToCollect):u=ue,g=Date.now(),this.nthSequenceNumber(e,u))).next(ue=>(o=ue,S=Date.now(),this.removeTargets(e,o,n))).next(ue=>(c=ue,x=Date.now(),this.removeOrphanedDocuments(e,o))).next(ue=>(G=Date.now(),vi()<=ve.in.DEBUG&&dt("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${g-te}ms\n\tDetermined least recently used ${u} in `+(S-g)+`ms\n\tRemoved ${c} targets in `+(x-S)+`ms\n\tRemoved ${ue} documents in `+(G-x)+`ms\nTotal Duration: ${G-te}ms`),je.resolve({didRun:!0,sequenceNumbersCollected:u,targetsRemoved:c,documentsRemoved:ue})))}}class Wy{constructor(e,n){this.db=e,this.garbageCollector=function Um(i,e){return new Vm(i,e)}(this,n)}Hn(e){const n=this.Zn(e);return this.db.getTargetCache().getTargetCount(e).next(o=>n.next(u=>o+u))}Zn(e){let n=0;return this.Jn(e,o=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Jn(e,n){return this.Xn(e,(o,u)=>n(u))}addReference(e,n,o){return Wh(e,o)}removeReference(e,n,o){return Wh(e,o)}removeTargets(e,n,o){return this.db.getTargetCache().removeTargets(e,n,o)}markPotentiallyOrphaned(e,n){return Wh(e,n)}er(e,n){return function(u,c){let g=!1;return Dp(u).Z(S=>xu(u,S,c).next(x=>(x&&(g=!0),je.resolve(!x)))).next(()=>g)}(e,n)}removeOrphanedDocuments(e,n){const o=this.db.getRemoteDocumentCache().newChangeBuffer(),u=[];let c=0;return this.Xn(e,(g,S)=>{if(S<=n){const x=this.er(e,g).next(G=>{if(!G)return c++,o.getEntry(e,g).next(()=>(o.removeEntry(g,hn.min()),ku(e).delete([0,R(g.path)])))});u.push(x)}}).next(()=>je.waitFor(u)).next(()=>o.apply(e)).next(()=>c)}removeTarget(e,n){const o=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,o)}updateLimboDocument(e,n){return Wh(e,n)}Xn(e,n){const o=ku(e);let u,c=lo._e;return o.Y({index:"documentTargetsIndex"},([g,S],{path:x,sequenceNumber:G})=>{0===g?(c!==lo._e&&n(new Ut(B(u)),c),c=G,u=x):c=lo._e}).next(()=>{c!==lo._e&&n(new Ut(B(u)),c)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Wh(i,e){return ku(i).put((u=i.currentSequenceNumber,{targetId:0,path:R(e.path),sequenceNumber:u}));var u}class Bm{constructor(){this.changes=new Ba(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,bt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const o=this.changes.get(n);return void 0!==o?je.resolve(o):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class jm{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,o){return wc(e).put(o)}removeEntry(e,n,o){return wc(e).delete(function(c,g){const S=c.path.toArray();return[S.slice(0,S.length-2),S[S.length-2],Ol(g),S[S.length-1]]}(n,o))}updateMetadata(e,n){return this.getMetadata(e).next(o=>(o.byteSize+=n,this.tr(e,o)))}getEntry(e,n){let o=bt.newInvalidDocument(n);return wc(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(Iu(n))},(u,c)=>{o=this.nr(n,c)}).next(()=>o)}rr(e,n){let o={size:0,document:bt.newInvalidDocument(n)};return wc(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(Iu(n))},(u,c)=>{o={document:this.nr(n,c),size:zh(c)}}).next(()=>o)}getEntries(e,n){let o=So();return this.ir(e,n,(u,c)=>{const g=this.nr(u,c);o=o.insert(u,g)}).next(()=>o)}sr(e,n){let o=So(),u=new wi(Ut.comparator);return this.ir(e,n,(c,g)=>{const S=this.nr(c,g);o=o.insert(c,S),u=u.insert(c,zh(g))}).next(()=>({documents:o,_r:u}))}ir(e,n,o){if(n.isEmpty())return je.resolve();let u=new ai(Hm);n.forEach(x=>u=u.add(x));const c=IDBKeyRange.bound(Iu(u.first()),Iu(u.last())),g=u.getIterator();let S=g.getNext();return wc(e).Y({index:"documentKeyIndex",range:c},(x,G,te)=>{const ue=Ut.fromSegments([...G.prefixPath,G.collectionGroup,G.documentId]);for(;S&&Hm(S,ue)<0;)o(S,null),S=g.getNext();S&&S.isEqual(ue)&&(o(S,G),S=g.hasNext()?g.getNext():null),S?te.U(Iu(S)):te.done()}).next(()=>{for(;S;)o(S,null),S=g.hasNext()?g.getNext():null})}getDocumentsMatchingQuery(e,n,o,u,c){const g=n.path,S=[g.popLast().toArray(),g.lastSegment(),Ol(o.readTime),o.documentKey.path.isEmpty()?"":o.documentKey.path.lastSegment()],x=[g.popLast().toArray(),g.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return wc(e).W(IDBKeyRange.bound(S,x,!0)).next(G=>{c?.incrementDocumentReadCount(G.length);let te=So();for(const ue of G){const Se=this.nr(Ut.fromSegments(ue.prefixPath.concat(ue.collectionGroup,ue.documentId)),ue);Se.isFoundDocument()&&(Ja(n,Se)||u.has(Se.key))&&(te=te.insert(Se.key,Se))}return te})}getAllFromCollectionGroup(e,n,o,u){let c=So();const g=Ap(n,o),S=Ap(n,Ws.max());return wc(e).Y({index:"collectionGroupIndex",range:IDBKeyRange.bound(g,S,!0)},(x,G,te)=>{const ue=this.nr(Ut.fromSegments(G.prefixPath.concat(G.collectionGroup,G.documentId)),G);c=c.insert(ue.key,ue),c.size===u&&te.done()}).next(()=>c)}newChangeBuffer(e){return new $m(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return qh(e).get("remoteDocumentGlobalKey").next(n=>(en(!!n),n))}tr(e,n){return qh(e).put("remoteDocumentGlobalKey",n)}nr(e,n){if(n){const o=function Sm(i,e){let n;if(e.document)n=Em(i.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const o=Ut.fromSegments(e.noDocument.path),u=sl(e.noDocument.readTime);n=bt.newNoDocument(o,u),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return Rt();{const o=Ut.fromSegments(e.unknownDocument.path),u=sl(e.unknownDocument.version);n=bt.newUnknownDocument(o,u)}}return e.readTime&&n.setReadTime(function(u){const c=new Qt(u[0],u[1]);return hn.fromTimestamp(c)}(e.readTime)),n}(this.serializer,n);if(!o.isNoDocument()||!o.version.isEqual(hn.min()))return o}return bt.newInvalidDocument(e)}}function Gd(i){return new jm(i)}class $m extends Bm{constructor(e,n){super(),this.ar=e,this.trackRemovals=n,this.ur=new Ba(o=>o.toString(),(o,u)=>o.isEqual(u))}applyChanges(e){const n=[];let o=0,u=new ai((c,g)=>Fn(c.canonicalString(),g.canonicalString()));return this.changes.forEach((c,g)=>{const S=this.ur.get(c);if(n.push(this.ar.removeEntry(e,c,S.readTime)),g.isValidDocument()){const x=Bd(this.ar.serializer,g);u=u.add(c.path.popLast());const G=zh(x);o+=G-S.size,n.push(this.ar.addEntry(e,c,x))}else if(o-=S.size,this.trackRemovals){const x=Bd(this.ar.serializer,g.convertToNoDocument(hn.min()));n.push(this.ar.addEntry(e,c,x))}}),u.forEach(c=>{n.push(this.ar.indexManager.addToCollectionParentIndex(e,c))}),n.push(this.ar.updateMetadata(e,o)),je.waitFor(n)}getFromCache(e,n){return this.ar.rr(e,n).next(o=>(this.ur.set(n,{size:o.size,readTime:o.document.readTime}),o.document))}getAllFromCache(e,n){return this.ar.sr(e,n).next(({documents:o,_r:u})=>(u.forEach((c,g)=>{this.ur.set(c,{size:g,readTime:o.get(c).readTime})}),o))}}function qh(i){return Yi(i,"remoteDocumentGlobal")}function wc(i){return Yi(i,"remoteDocumentsV14")}function Iu(i){const e=i.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Ap(i,e){const n=e.documentKey.path.toArray();return[i,Ol(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function Hm(i,e){const n=i.path.toArray(),o=e.path.toArray();let u=0;for(let c=0;c<n.length-2&&c<o.length-2;++c)if(u=Fn(n[c],o[c]),u)return u;return u=Fn(n.length,o.length),u||(u=Fn(n[n.length-2],o[o.length-2]),u||Fn(n[n.length-1],o[o.length-1]))}class Cp{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class bp{constructor(e,n,o,u){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=o,this.indexManager=u}getDocument(e,n){let o=null;return this.documentOverlayCache.getOverlay(e,n).next(u=>(o=u,this.remoteDocumentCache.getEntry(e,n))).next(u=>(null!==o&&Yc(o.mutation,u,$o.empty(),Qt.now()),u))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(o=>this.getLocalViewOfDocuments(e,o,f()).next(()=>o))}getLocalViewOfDocuments(e,n,o=f()){const u=Go();return this.populateOverlays(e,u,n).next(()=>this.computeViews(e,n,u,o).next(c=>{let g=hc();return c.forEach((S,x)=>{g=g.insert(S,x.overlayedDocument)}),g}))}getOverlayedDocuments(e,n){const o=Go();return this.populateOverlays(e,o,n).next(()=>this.computeViews(e,n,o,f()))}populateOverlays(e,n,o){const u=[];return o.forEach(c=>{n.has(c)||u.push(c)}),this.documentOverlayCache.getOverlays(e,u).next(c=>{c.forEach((g,S)=>{n.set(g,S)})})}computeViews(e,n,o,u){let c=So();const g=qc(),S=qc();return n.forEach((x,G)=>{const te=o.get(G.key);u.has(G.key)&&(void 0===te||te.mutation instanceof Mu)?c=c.insert(G.key,G):void 0!==te?(g.set(G.key,te.mutation.getFieldMask()),Yc(te.mutation,G,te.mutation.getFieldMask(),Qt.now())):g.set(G.key,$o.empty())}),this.recalculateAndSaveOverlays(e,c).next(x=>(x.forEach((G,te)=>g.set(G,te)),n.forEach((G,te)=>{var ue;return S.set(G,new Cp(te,null!==(ue=g.get(G))&&void 0!==ue?ue:null))}),S))}recalculateAndSaveOverlays(e,n){const o=qc();let u=new wi((g,S)=>g-S),c=f();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(g=>{for(const S of g)S.keys().forEach(x=>{const G=n.get(x);if(null===G)return;let te=o.get(x)||$o.empty();te=S.applyToLocalView(G,te),o.set(x,te);const ue=(u.get(S.batchId)||f()).add(x);u=u.insert(S.batchId,ue)})}).next(()=>{const g=[],S=u.getReverseIterator();for(;S.hasNext();){const x=S.getNext(),G=x.key,te=x.value,ue=Sl();te.forEach(Se=>{if(!c.has(Se)){const qe=tl(n.get(Se),o.get(Se));null!==qe&&ue.set(Se,qe),c=c.add(Se)}}),g.push(this.documentOverlayCache.saveOverlays(e,G,ue))}return je.waitFor(g)}).next(()=>o)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(o=>this.recalculateAndSaveOverlays(e,o))}getDocumentsMatchingQuery(e,n,o,u){return Ut.isDocumentKey((g=n).path)&&null===g.collectionGroup&&0===g.filters.length?this.getDocumentsMatchingDocumentQuery(e,n.path):lc(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,o,u):this.getDocumentsMatchingCollectionQuery(e,n,o,u);var g}getNextDocuments(e,n,o,u){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,o,u).next(c=>{const g=u-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,o.largestBatchId,u-c.size):je.resolve(Go());let S=-1,x=c;return g.next(G=>je.forEach(G,(te,ue)=>(S<ue.largestBatchId&&(S=ue.largestBatchId),c.get(te)?je.resolve():this.remoteDocumentCache.getEntry(e,te).next(Se=>{x=x.insert(te,Se)}))).next(()=>this.populateOverlays(e,G,c)).next(()=>this.computeViews(e,x,G,f())).next(te=>({batchId:S,changes:Ph(te)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Ut(n)).next(o=>{let u=hc();return o.isFoundDocument()&&(u=u.insert(o.key,o)),u})}getDocumentsMatchingCollectionGroupQuery(e,n,o,u){const c=n.collectionGroup;let g=hc();return this.indexManager.getCollectionParents(e,c).next(S=>je.forEach(S,x=>{const G=(ue=n,Se=x.child(c),new Ua(Se,null,ue.explicitOrderBy.slice(),ue.filters.slice(),ue.limit,ue.limitType,ue.startAt,ue.endAt));var ue,Se;return this.getDocumentsMatchingCollectionQuery(e,G,o,u).next(te=>{te.forEach((ue,Se)=>{g=g.insert(ue,Se)})})}).next(()=>g))}getDocumentsMatchingCollectionQuery(e,n,o,u){let c;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,o.largestBatchId).next(g=>(c=g,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,o,c,u))).next(g=>{c.forEach((x,G)=>{const te=G.getKey();null===g.get(te)&&(g=g.insert(te,bt.newInvalidDocument(te)))});let S=hc();return g.forEach((x,G)=>{const te=c.get(x);void 0!==te&&Yc(te.mutation,G,$o.empty(),Qt.now()),Ja(n,G)&&(S=S.insert(x,G))}),S})}}class qy{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,n){return je.resolve(this.cr.get(n))}saveBundleMetadata(e,n){return this.cr.set(n.id,{id:(u=n).id,version:u.version,createTime:Ks(u.createTime)}),je.resolve();var u}getNamedQuery(e,n){return je.resolve(this.lr.get(n))}saveNamedQuery(e,n){return this.lr.set(n.name,{name:(u=n).name,query:_c(u.bundledQuery),readTime:Ks(u.readTime)}),je.resolve();var u}}class Ky{constructor(){this.overlays=new wi(Ut.comparator),this.hr=new Map}getOverlay(e,n){return je.resolve(this.overlays.get(n))}getOverlays(e,n){const o=Go();return je.forEach(n,u=>this.getOverlay(e,u).next(c=>{null!==c&&o.set(u,c)})).next(()=>o)}saveOverlays(e,n,o){return o.forEach((u,c)=>{this.ht(e,n,c)}),je.resolve()}removeOverlaysForBatchId(e,n,o){const u=this.hr.get(o);return void 0!==u&&(u.forEach(c=>this.overlays=this.overlays.remove(c)),this.hr.delete(o)),je.resolve()}getOverlaysForCollection(e,n,o){const u=Go(),c=n.length+1,g=new Ut(n.child("")),S=this.overlays.getIteratorFrom(g);for(;S.hasNext();){const x=S.getNext().value,G=x.getKey();if(!n.isPrefixOf(G.path))break;G.path.length===c&&x.largestBatchId>o&&u.set(x.getKey(),x)}return je.resolve(u)}getOverlaysForCollectionGroup(e,n,o,u){let c=new wi((G,te)=>G-te);const g=this.overlays.getIterator();for(;g.hasNext();){const G=g.getNext().value;if(G.getKey().getCollectionGroup()===n&&G.largestBatchId>o){let te=c.get(G.largestBatchId);null===te&&(te=Go(),c=c.insert(G.largestBatchId,te)),te.set(G.getKey(),G)}}const S=Go(),x=c.getIterator();for(;x.hasNext()&&(x.getNext().value.forEach((G,te)=>S.set(G,te)),!(S.size()>=u)););return je.resolve(S)}ht(e,n,o){const u=this.overlays.get(o.key);if(null!==u){const g=this.hr.get(u.largestBatchId).delete(o.key);this.hr.set(u.largestBatchId,g)}this.overlays=this.overlays.insert(o.key,new Nh(n,o));let c=this.hr.get(n);void 0===c&&(c=f(),this.hr.set(n,c)),this.hr.set(n,c.add(o.key))}}class Sp{constructor(){this.Pr=new ai(qo.Ir),this.Tr=new ai(qo.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,n){const o=new qo(e,n);this.Pr=this.Pr.add(o),this.Tr=this.Tr.add(o)}dr(e,n){e.forEach(o=>this.addReference(o,n))}removeReference(e,n){this.Ar(new qo(e,n))}Rr(e,n){e.forEach(o=>this.removeReference(o,n))}Vr(e){const n=new Ut(new qn([])),o=new qo(n,e),u=new qo(n,e+1),c=[];return this.Tr.forEachInRange([o,u],g=>{this.Ar(g),c.push(g.key)}),c}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const n=new Ut(new qn([])),o=new qo(n,e),u=new qo(n,e+1);let c=f();return this.Tr.forEachInRange([o,u],g=>{c=c.add(g.key)}),c}containsKey(e){const n=new qo(e,0),o=this.Pr.firstAfterOrEqual(n);return null!==o&&e.isEqual(o.key)}}class qo{constructor(e,n){this.key=e,this.pr=n}static Ir(e,n){return Ut.comparator(e.key,n.key)||Fn(e.pr,n.pr)}static Er(e,n){return Fn(e.pr,n.pr)||Ut.comparator(e.key,n.key)}}class zm{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new ai(qo.Ir)}checkEmpty(e){return je.resolve(0===this.mutationQueue.length)}addMutationBatch(e,n,o,u){const c=this.yr;this.yr++;const g=new np(c,n,o,u);this.mutationQueue.push(g);for(const S of u)this.wr=this.wr.add(new qo(S.key,c)),this.indexManager.addToCollectionParentIndex(e,S.key.path.popLast());return je.resolve(g)}lookupMutationBatch(e,n){return je.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(e,n){const u=this.br(n+1),c=u<0?0:u;return je.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return je.resolve(0===this.mutationQueue.length?-1:this.yr-1)}getAllMutationBatches(e){return je.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const o=new qo(n,0),u=new qo(n,Number.POSITIVE_INFINITY),c=[];return this.wr.forEachInRange([o,u],g=>{const S=this.Sr(g.pr);c.push(S)}),je.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,n){let o=new ai(Fn);return n.forEach(u=>{const c=new qo(u,0),g=new qo(u,Number.POSITIVE_INFINITY);this.wr.forEachInRange([c,g],S=>{o=o.add(S.pr)})}),je.resolve(this.Dr(o))}getAllMutationBatchesAffectingQuery(e,n){const o=n.path,u=o.length+1;let c=o;Ut.isDocumentKey(c)||(c=c.child(""));const g=new qo(new Ut(c),0);let S=new ai(Fn);return this.wr.forEachWhile(x=>{const G=x.key.path;return!!o.isPrefixOf(G)&&(G.length===u&&(S=S.add(x.pr)),!0)},g),je.resolve(this.Dr(S))}Dr(e){const n=[];return e.forEach(o=>{const u=this.Sr(o);null!==u&&n.push(u)}),n}removeMutationBatch(e,n){en(0===this.Cr(n.batchId,"removed")),this.mutationQueue.shift();let o=this.wr;return je.forEach(n.mutations,u=>{const c=new qo(u.key,n.batchId);return o=o.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,u.key)}).next(()=>{this.wr=o})}Mn(e){}containsKey(e,n){const o=new qo(n,0),u=this.wr.firstAfterOrEqual(o);return je.resolve(n.isEqual(u&&u.key))}performConsistencyCheck(e){return je.resolve()}Cr(e,n){return this.br(e)}br(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Sr(e){const n=this.br(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class zE{constructor(e){this.vr=e,this.docs=new wi(Ut.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const o=n.key,u=this.docs.get(o),c=u?u.size:0,g=this.vr(n);return this.docs=this.docs.insert(o,{document:n.mutableCopy(),size:g}),this.size+=g-c,this.indexManager.addToCollectionParentIndex(e,o.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const o=this.docs.get(n);return je.resolve(o?o.document.mutableCopy():bt.newInvalidDocument(n))}getEntries(e,n){let o=So();return n.forEach(u=>{const c=this.docs.get(u);o=o.insert(u,c?c.document.mutableCopy():bt.newInvalidDocument(u))}),je.resolve(o)}getDocumentsMatchingQuery(e,n,o,u){let c=So();const g=n.path,S=new Ut(g.child("")),x=this.docs.getIteratorFrom(S);for(;x.hasNext();){const{key:G,value:{document:te}}=x.getNext();if(!g.isPrefixOf(G.path))break;G.path.length>g.length+1||Qi(Dl(te),o)<=0||(u.has(te.key)||Ja(n,te))&&(c=c.insert(te.key,te.mutableCopy()))}return je.resolve(c)}getAllFromCollectionGroup(e,n,o,u){Rt()}Fr(e,n){return je.forEach(this.docs,o=>n(o))}newChangeBuffer(e){return new GE(this)}getSize(e){return je.resolve(this.size)}}class GE extends Bm{constructor(e){super(),this.ar=e}applyChanges(e){const n=[];return this.changes.forEach((o,u)=>{u.isValidDocument()?n.push(this.ar.addEntry(e,u)):this.ar.removeEntry(o)}),je.waitFor(n)}getFromCache(e,n){return this.ar.getEntry(e,n)}getAllFromCache(e,n){return this.ar.getEntries(e,n)}}class Wd{constructor(e){this.persistence=e,this.Mr=new Ba(n=>ma(n),Ns),this.lastRemoteSnapshotVersion=hn.min(),this.highestTargetId=0,this.Or=0,this.Nr=new Sp,this.targetCount=0,this.Lr=Ll.Nn()}forEachTarget(e,n){return this.Mr.forEach((o,u)=>n(u)),je.resolve()}getLastRemoteSnapshotVersion(e){return je.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return je.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),je.resolve(this.highestTargetId)}setTargetsMetadata(e,n,o){return o&&(this.lastRemoteSnapshotVersion=o),n>this.Or&&(this.Or=n),je.resolve()}qn(e){this.Mr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Lr=new Ll(n),this.highestTargetId=n),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,n){return this.qn(n),this.targetCount+=1,je.resolve()}updateTargetData(e,n){return this.qn(n),je.resolve()}removeTargetData(e,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,je.resolve()}removeTargets(e,n,o){let u=0;const c=[];return this.Mr.forEach((g,S)=>{S.sequenceNumber<=n&&null===o.get(S.targetId)&&(this.Mr.delete(g),c.push(this.removeMatchingKeysForTargetId(e,S.targetId)),u++)}),je.waitFor(c).next(()=>u)}getTargetCount(e){return je.resolve(this.targetCount)}getTargetData(e,n){const o=this.Mr.get(n)||null;return je.resolve(o)}addMatchingKeys(e,n,o){return this.Nr.dr(n,o),je.resolve()}removeMatchingKeys(e,n,o){this.Nr.Rr(n,o);const u=this.persistence.referenceDelegate,c=[];return u&&n.forEach(g=>{c.push(u.markPotentiallyOrphaned(e,g))}),je.waitFor(c)}removeMatchingKeysForTargetId(e,n){return this.Nr.Vr(n),je.resolve()}getMatchingKeysForTargetId(e,n){const o=this.Nr.gr(n);return je.resolve(o)}containsKey(e,n){return je.resolve(this.Nr.containsKey(n))}}class Tc{constructor(e,n){this.Br={},this.overlays={},this.kr=new lo(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new Wd(this),this.indexManager=new ul,this.remoteDocumentCache=new zE(o=>this.referenceDelegate.Kr(o)),this.serializer=new Vh(n),this.$r=new qy(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Ky,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let o=this.Br[e.toKey()];return o||(o=new zm(n,this.referenceDelegate),this.Br[e.toKey()]=o),o}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,n,o){dt("MemoryPersistence","Starting transaction:",e);const u=new Gm(this.kr.next());return this.referenceDelegate.Ur(),o(u).next(c=>this.referenceDelegate.Wr(u).next(()=>c)).toPromise().then(c=>(u.raiseOnCommittedEvent(),c))}Gr(e,n){return je.or(Object.values(this.Br).map(o=>()=>o.containsKey(e,n)))}}class Gm extends uu{constructor(e){super(),this.currentSequenceNumber=e}}class qd{constructor(e){this.persistence=e,this.zr=new Sp,this.jr=null}static Hr(e){return new qd(e)}get Jr(){if(this.jr)return this.jr;throw Rt()}addReference(e,n,o){return this.zr.addReference(o,n),this.Jr.delete(o.toString()),je.resolve()}removeReference(e,n,o){return this.zr.removeReference(o,n),this.Jr.add(o.toString()),je.resolve()}markPotentiallyOrphaned(e,n){return this.Jr.add(n.toString()),je.resolve()}removeTarget(e,n){this.zr.Vr(n.targetId).forEach(u=>this.Jr.add(u.toString()));const o=this.persistence.getTargetCache();return o.getMatchingKeysForTargetId(e,n.targetId).next(u=>{u.forEach(c=>this.Jr.add(c.toString()))}).next(()=>o.removeTargetData(e,n))}Ur(){this.jr=new Set}Wr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return je.forEach(this.Jr,o=>{const u=Ut.fromPath(o);return this.Yr(e,u).next(c=>{c||n.removeEntry(u,hn.min())})}).next(()=>(this.jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Yr(e,n).next(o=>{o?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(e){return 0}Yr(e,n){return je.or([()=>je.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gr(e,n)])}}class Rp{constructor(e){this.serializer=e}N(e,n,o,u){const c=new Gu("createOrUpgrade",n);var x;o<1&&u>=1&&(e.createObjectStore("owner"),(x=e).createObjectStore("mutationQueues",{keyPath:"userId"}),x.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",ne,{unique:!0}),x.createObjectStore("documentMutations"),Wm(e),function(x){x.createObjectStore("remoteDocuments")}(e));let g=je.resolve();return o<3&&u>=3&&(0!==o&&(function(x){x.deleteObjectStore("targetDocuments"),x.deleteObjectStore("targets"),x.deleteObjectStore("targetGlobal")}(e),Wm(e)),g=g.next(()=>function(x){const G=x.store("targetGlobal"),te={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:hn.min().toTimestamp(),targetCount:0};return G.put("targetGlobalKey",te)}(c))),o<4&&u>=4&&(0!==o&&(g=g.next(()=>function(x,G){return G.store("mutations").W().next(te=>{x.deleteObjectStore("mutations"),x.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",ne,{unique:!0});const ue=G.store("mutations"),Se=te.map(qe=>ue.put(qe));return je.waitFor(Se)})}(e,c))),g=g.next(()=>{!function(x){x.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),o<5&&u>=5&&(g=g.next(()=>this.Xr(c))),o<6&&u>=6&&(g=g.next(()=>(function(x){x.createObjectStore("remoteDocumentGlobal")}(e),this.ei(c)))),o<7&&u>=7&&(g=g.next(()=>this.ti(c))),o<8&&u>=8&&(g=g.next(()=>this.ni(e,c))),o<9&&u>=9&&(g=g.next(()=>{!function(x){x.objectStoreNames.contains("remoteDocumentChanges")&&x.deleteObjectStore("remoteDocumentChanges")}(e)})),o<10&&u>=10&&(g=g.next(()=>this.ri(c))),o<11&&u>=11&&(g=g.next(()=>{(function(x){x.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(x){x.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),o<12&&u>=12&&(g=g.next(()=>{!function(x){const G=x.createObjectStore("documentOverlays",{keyPath:nc});G.createIndex("collectionPathOverlayIndex",Zu,{unique:!1}),G.createIndex("collectionGroupOverlayIndex",oa,{unique:!1})}(e)})),o<13&&u>=13&&(g=g.next(()=>function(x){const G=x.createObjectStore("remoteDocumentsV14",{keyPath:Bt});G.createIndex("documentKeyIndex",jn),G.createIndex("collectionGroupIndex",Ii)}(e)).next(()=>this.ii(e,c)).next(()=>e.deleteObjectStore("remoteDocuments"))),o<14&&u>=14&&(g=g.next(()=>this.si(e,c))),o<15&&u>=15&&(g=g.next(()=>function(x){x.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),x.createObjectStore("indexState",{keyPath:bu}).createIndex("sequenceNumberIndex",Bo,{unique:!1}),x.createObjectStore("indexEntries",{keyPath:jo}).createIndex("documentKeyIndex",io,{unique:!1})}(e))),g}ei(e){let n=0;return e.store("remoteDocuments").Y((o,u)=>{n+=zh(u)}).next(()=>{const o={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",o)})}Xr(e){const n=e.store("mutationQueues"),o=e.store("mutations");return n.W().next(u=>je.forEach(u,c=>{const g=IDBKeyRange.bound([c.userId,-1],[c.userId,c.lastAcknowledgedBatchId]);return o.W("userMutationsIndex",g).next(S=>je.forEach(S,x=>{en(x.userId===c.userId);const G=Ou(this.serializer,x);return Lm(e,c.userId,G).next(()=>{})}))}))}ti(e){const n=e.store("targetDocuments"),o=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(u=>{const c=[];return o.Y((g,S)=>{const x=new qn(g),G=[0,R(x)];c.push(n.get(G).next(te=>te?je.resolve():n.put({targetId:0,path:R(x),sequenceNumber:u.highestListenSequenceNumber})))}).next(()=>je.waitFor(c))})}ni(e,n){e.createObjectStore("collectionParents",{keyPath:xa});const o=n.store("collectionParents"),u=new Fl,c=g=>{if(u.add(g)){const S=g.lastSegment(),x=g.popLast();return o.put({collectionId:S,parent:R(x)})}};return n.store("remoteDocuments").Y({J:!0},(g,S)=>{const x=new qn(g);return c(x.popLast())}).next(()=>n.store("documentMutations").Y({J:!0},([g,S,x],G)=>{const te=B(S);return c(te.popLast())}))}ri(e){const n=e.store("targets");return n.Y((o,u)=>{const c=nd(u),g=Uh(this.serializer,c);return n.put(g)})}ii(e,n){const o=n.store("remoteDocuments"),u=[];return o.Y((c,g)=>{const S=n.store("remoteDocumentsV14"),x=(ue=g,ue.document?new Ut(qn.fromString(ue.document.name).popFirst(5)):ue.noDocument?Ut.fromSegments(ue.noDocument.path):ue.unknownDocument?Ut.fromSegments(ue.unknownDocument.path):Rt()).path.toArray(),G={prefixPath:x.slice(0,x.length-2),collectionGroup:x[x.length-2],documentId:x[x.length-1],readTime:g.readTime||[0,0],unknownDocument:g.unknownDocument,noDocument:g.noDocument,document:g.document,hasCommittedMutations:!!g.hasCommittedMutations};var ue;u.push(S.put(G))}).next(()=>je.waitFor(u))}si(e,n){const o=n.store("mutations"),u=Gd(this.serializer),c=new Tc(qd.Hr,this.serializer.ct);return o.W().next(g=>{const S=new Map;return g.forEach(x=>{var G;let te=null!==(G=S.get(x.userId))&&void 0!==G?G:f();Ou(this.serializer,x).keys().forEach(ue=>te=te.add(ue)),S.set(x.userId,te)}),je.forEach(S,(x,G)=>{const te=new pn(G),ue=jd.lt(this.serializer,te),Se=c.getIndexManager(te),qe=Ec.lt(te,this.serializer,Se,c.referenceDelegate);return new bp(u,qe,ue,Se).recalculateAndSaveOverlaysForDocumentKeys(new Ca(n,lo._e),x).next()})})}}function Wm(i){i.createObjectStore("targetDocuments",{keyPath:Ps}).createIndex("documentTargetsIndex",Xr,{unique:!0}),i.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",On,{unique:!0}),i.createObjectStore("targetGlobal")}const Kh="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Zh{constructor(e,n,o,u,c,g,S,x,G,te,ue=15){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=o,this.oi=c,this.window=g,this.document=S,this._i=G,this.ai=te,this.ui=ue,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=Se=>Promise.resolve(),!Zh.D())throw new gt(Xe.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Wy(this,u),this.Ti=n+"main",this.serializer=new Vh(x),this.Ei=new ro(this.Ti,this.ui,new Rp(this.serializer)),this.Qr=new $E(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Gd(this.serializer),this.$r=new By,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,!1===te&&$r("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ai().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new gt(Xe.FAILED_PRECONDITION,Kh);return this.Ri(),this.Vi(),this.mi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Qr.getHighestSequenceNumber(e))}).then(e=>{this.kr=new lo(e,this._i)}).then(()=>{this.qr=!0}).catch(e=>(this.Ei&&this.Ei.close(),Promise.reject(e)))}fi(e){var n=this;return this.Ii=function(){var o=(0,h.Z)(function*(u){if(n.started)return e(u)});return function(u){return o.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ei.B(function(){var n=(0,h.Z)(function*(o){null===o.newVersion&&(yield e())});return function(o){return n.apply(this,arguments)}}())}setNetworkEnabled(e){var n=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.oi.enqueueAndForget((0,h.Z)(function*(){n.started&&(yield n.Ai())})))}Ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Pp(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.gi(e).next(n=>{n||(this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)))})}).next(()=>this.pi(e)).next(n=>this.isPrimary&&!n?this.yi(e).next(()=>!1):!!n&&this.wi(e).next(()=>!0))).catch(e=>{if(Ei(e))return dt("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return dt("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.oi.enqueueRetryable(()=>this.Ii(e)),this.isPrimary=e})}gi(e){return Vl(e).get("owner").next(n=>je.resolve(this.Si(n)))}bi(e){return Pp(e).delete(this.clientId)}Di(){var e=this;return(0,h.Z)(function*(){if(e.isPrimary&&!e.Ci(e.Pi,18e5)){e.Pi=Date.now();const n=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",o=>{const u=Yi(o,"clientMetadata");return u.W().next(c=>{const g=e.vi(c,18e5),S=c.filter(x=>-1===g.indexOf(x));return je.forEach(S,x=>u.delete(x.clientId)).next(()=>S)})}).catch(()=>[]);if(e.di)for(const o of n)e.di.removeItem(e.Fi(o.clientId))}})()}mi(){this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ai().then(()=>this.Di()).then(()=>this.mi()))}Si(e){return!!e&&e.ownerId===this.clientId}pi(e){return this.ai?je.resolve(!0):Vl(e).get("owner").next(n=>{if(null!==n&&this.Ci(n.leaseTimestampMs,5e3)&&!this.Mi(n.ownerId)){if(this.Si(n)&&this.networkEnabled)return!0;if(!this.Si(n)){if(!n.allowTabSynchronization)throw new gt(Xe.FAILED_PRECONDITION,Kh);return!1}}return!(!this.networkEnabled||!this.inForeground)||Pp(e).W().next(o=>void 0===this.vi(o,5e3).find(u=>!(this.clientId===u.clientId||!(!this.networkEnabled&&u.networkEnabled||!this.inForeground&&u.inForeground&&this.networkEnabled===u.networkEnabled))))}).next(n=>(this.isPrimary!==n&&dt("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}shutdown(){var e=this;return(0,h.Z)(function*(){e.qr=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Oi(),e.Ni(),yield e.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],n=>{const o=new Ca(n,lo._e);return e.yi(o).next(()=>e.bi(o))}),e.Ei.close(),e.Li()})()}vi(e,n){return e.filter(o=>this.Ci(o.updateTimeMs,n)&&!this.Mi(o.clientId))}Bi(){return this.runTransaction("getActiveClients","readonly",e=>Pp(e).W().next(n=>this.vi(n,18e5).map(o=>o.clientId)))}get started(){return this.qr}getMutationQueue(e,n){return Ec.lt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Hy(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return jd.lt(this.serializer,e)}getBundleCache(){return this.$r}runTransaction(e,n,o){dt("IndexedDbPersistence","Starting transaction:",e);const u="readonly"===n?"readonly":"readwrite",c=15===(x=this.ui)?Aa:14===x?fu:13===x?hu:12===x?qs:11===x?Ka:void Rt();var x;let g;return this.Ei.runTransaction(e,u,c,S=>(g=new Ca(S,this.kr?this.kr.next():lo._e),"readwrite-primary"===n?this.gi(g).next(x=>!!x||this.pi(g)).next(x=>{if(!x)throw $r(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)),new gt(Xe.FAILED_PRECONDITION,Gi);return o(g)}).next(x=>this.wi(g).next(()=>x)):this.ki(g).next(()=>o(g)))).then(S=>(g.raiseOnCommittedEvent(),S))}ki(e){return Vl(e).get("owner").next(n=>{if(null!==n&&this.Ci(n.leaseTimestampMs,5e3)&&!this.Mi(n.ownerId)&&!this.Si(n)&&!(this.ai||this.allowTabSynchronization&&n.allowTabSynchronization))throw new gt(Xe.FAILED_PRECONDITION,Kh)})}wi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Vl(e).put("owner",n)}static D(){return ro.D()}yi(e){const n=Vl(e);return n.get("owner").next(o=>this.Si(o)?(dt("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):je.resolve())}Ci(e,n){const o=Date.now();return!(e<o-n||e>o&&($r(`Detected an update time that is in the future: ${e} > ${o}`),1))}Ri(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.li=()=>{this.oi.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.Ai()))},this.document.addEventListener("visibilitychange",this.li),this.inForeground="visible"===this.document.visibilityState)}Oi(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}Vi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const n=/(?:Version|Mobile)\/1[456]/;(0,me.G6)()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.oi.enterRestrictedMode(!0),this.oi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}Ni(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Mi(e){var n;try{const o=null!==(null===(n=this.di)||void 0===n?void 0:n.getItem(this.Fi(e)));return dt("IndexedDbPersistence",`Client '${e}' ${o?"is":"is not"} zombied in LocalStorage`),o}catch(o){return $r("IndexedDbPersistence","Failed to get zombied client id.",o),!1}}xi(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(e){$r("Failed to set zombie client id.",e)}}Li(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch{}}Fi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Vl(i){return Yi(i,"owner")}function Pp(i){return Yi(i,"clientMetadata")}function Kd(i,e){let n=i.projectId;return i.isDefaultDatabase||(n+="."+i.database),"firestore/"+e+"/"+n+"/"}class Mp{constructor(e,n,o,u){this.targetId=e,this.fromCache=n,this.qi=o,this.Qi=u}static Ki(e,n){let o=f(),u=f();for(const c of n.docChanges)switch(c.type){case 0:o=o.add(c.doc.key);break;case 1:u=u.add(c.doc.key)}return new Mp(e,n.fromCache,o,u)}}class Np{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class Op{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=(0,me.G6)()?8:ro.v((0,me.z$)())>0?6:4}initialize(e,n){this.zi=e,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(e,n,o,u){const c={result:null};return this.ji(e,n).next(g=>{c.result=g}).next(()=>{if(!c.result)return this.Hi(e,n,u,o).next(g=>{c.result=g})}).next(()=>{if(c.result)return;const g=new Np;return this.Ji(e,n,g).next(S=>{if(c.result=S,this.Ui)return this.Yi(e,n,g,S.size)})}).next(()=>c.result)}Yi(e,n,o,u){return o.documentReadCount<this.Wi?(vi()<=ve.in.DEBUG&&dt("QueryEngine","SDK will not create cache indexes for query:",dc(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),je.resolve()):(vi()<=ve.in.DEBUG&&dt("QueryEngine","Query:",dc(n),"scans",o.documentReadCount,"local documents and returns",u,"documents as results."),o.documentReadCount>this.Gi*u?(vi()<=ve.in.DEBUG&&dt("QueryEngine","The SDK decides to create cache indexes for query:",dc(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,bo(n))):je.resolve())}ji(e,n){if(uc(n))return je.resolve(null);let o=bo(n);return this.indexManager.getIndexType(e,o).next(u=>0===u?null:(null!==n.limit&&1===u&&(n=Wc(n,null,"F"),o=bo(n)),this.indexManager.getDocumentsMatchingTarget(e,o).next(c=>{const g=f(...c);return this.zi.getDocuments(e,g).next(S=>this.indexManager.getMinOffset(e,o).next(x=>{const G=this.Zi(n,S);return this.Xi(n,G,g,x.readTime)?this.ji(e,Wc(n,null,"F")):this.es(e,G,n,x)}))})))}Hi(e,n,o,u){return uc(n)||u.isEqual(hn.min())?je.resolve(null):this.zi.getDocuments(e,o).next(c=>{const g=this.Zi(n,c);return this.Xi(n,g,o,u)?je.resolve(null):(vi()<=ve.in.DEBUG&&dt("QueryEngine","Re-using previous result from %s to execute query: %s",u.toString(),dc(n)),this.es(e,g,n,xr(u,-1)).next(S=>S))})}Zi(e,n){let o=new ai(Pu(e));return n.forEach((u,c)=>{Ja(e,c)&&(o=o.add(c))}),o}Xi(e,n,o,u){if(null===e.limit)return!1;if(o.size!==n.size)return!0;const c="F"===e.limitType?n.last():n.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(u)>0)}Ji(e,n,o){return vi()<=ve.in.DEBUG&&dt("QueryEngine","Using full collection scan to execute query:",dc(n)),this.zi.getDocumentsMatchingQuery(e,n,Ws.min(),o)}es(e,n,o,u){return this.zi.getDocumentsMatchingQuery(e,o,u).next(c=>(n.forEach(g=>{c=c.insert(g.key,g)}),c))}}class qm{constructor(e,n,o,u){this.persistence=e,this.ts=n,this.serializer=u,this.ns=new wi(Fn),this.rs=new Ba(c=>ma(c),Ns),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(o)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new bp(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ns))}}function Ul(i,e,n,o){return new qm(i,e,n,o)}function Km(i,e){return Zd.apply(this,arguments)}function Zd(){return Zd=(0,h.Z)(function*(i,e){const n=_t(i);return yield n.persistence.runTransaction("Handle user change","readonly",o=>{let u;return n.mutationQueue.getAllMutationBatches(o).next(c=>(u=c,n._s(e),n.mutationQueue.getAllMutationBatches(o))).next(c=>{const g=[],S=[];let x=f();for(const G of u){g.push(G.batchId);for(const te of G.mutations)x=x.add(te.key)}for(const G of c){S.push(G.batchId);for(const te of G.mutations)x=x.add(te.key)}return n.localDocuments.getDocuments(o,x).next(G=>({us:G,removedBatchIds:g,addedBatchIds:S}))})})}),Zd.apply(this,arguments)}function Zm(i){const e=_t(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Qr.getLastRemoteSnapshotVersion(n))}function Qd(i,e,n){let o=f(),u=f();return n.forEach(c=>o=o.add(c)),e.getEntries(i,o).next(c=>{let g=So();return n.forEach((S,x)=>{const G=c.get(S);x.isFoundDocument()!==G.isFoundDocument()&&(u=u.add(S)),x.isNoDocument()&&x.version.isEqual(hn.min())?(e.removeEntry(S,x.readTime),g=g.insert(S,x)):!G.isValidDocument()||x.version.compareTo(G.version)>0||0===x.version.compareTo(G.version)&&G.hasPendingWrites?(e.addEntry(x),g=g.insert(S,x)):dt("LocalStore","Ignoring outdated watch update for ",S,". Current version:",G.version," Watch version:",x.version)}),{cs:g,ls:u}})}function Fu(i,e){const n=_t(i);return n.persistence.runTransaction("Get next mutation batch","readonly",o=>(void 0===e&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(o,e)))}function wu(i,e){const n=_t(i);return n.persistence.runTransaction("Allocate target","readwrite",o=>{let u;return n.Qr.getTargetData(o,e).next(c=>c?(u=c,je.resolve(u)):n.Qr.allocateTargetId(o).next(g=>(u=new Nu(e,g,"TargetPurposeListen",o.currentSequenceNumber),n.Qr.addTargetData(o,u).next(()=>u))))}).then(o=>{const u=n.ns.get(o.targetId);return(null===u||o.snapshotVersion.compareTo(u.snapshotVersion)>0)&&(n.ns=n.ns.insert(o.targetId,o),n.rs.set(e,o.targetId)),o})}function Bl(i,e,n){return kp.apply(this,arguments)}function kp(){return kp=(0,h.Z)(function*(i,e,n){const o=_t(i),u=o.ns.get(e),c=n?"readwrite":"readwrite-primary";try{n||(yield o.persistence.runTransaction("Release target",c,g=>o.persistence.referenceDelegate.removeTarget(g,u)))}catch(g){if(!Ei(g))throw g;dt("LocalStore",`Failed to update sequence numbers for target ${e}: ${g}`)}o.ns=o.ns.remove(e),o.rs.delete(u.target)}),kp.apply(this,arguments)}function Yh(i,e,n){const o=_t(i);let u=hn.min(),c=f();return o.persistence.runTransaction("Execute query","readwrite",g=>function(x,G,te){const ue=_t(x),Se=ue.rs.get(te);return void 0!==Se?je.resolve(ue.ns.get(Se)):ue.Qr.getTargetData(G,te)}(o,g,bo(e)).next(S=>{if(S)return u=S.lastLimboFreeSnapshotVersion,o.Qr.getMatchingKeysForTargetId(g,S.targetId).next(x=>{c=x})}).next(()=>o.ts.getDocumentsMatchingQuery(g,e,n?u:hn.min(),n?c:f())).next(S=>(Qm(o,Nd(e),S),{documents:S,hs:c})))}function Fp(i,e){const n=_t(i),o=_t(n.Qr),u=n.ns.get(e);return u?Promise.resolve(u.target):n.persistence.runTransaction("Get target data","readonly",c=>o._t(c,e).next(g=>g?g.target:null))}function Dc(i,e){const n=_t(i),o=n.ss.get(e)||hn.min();return n.persistence.runTransaction("Get new document changes","readonly",u=>n.os.getAllFromCollectionGroup(u,e,xr(o,-1),Number.MAX_SAFE_INTEGER)).then(u=>(Qm(n,e,u),u))}function Qm(i,e,n){let o=i.ss.get(e)||hn.min();n.forEach((u,c)=>{c.readTime.compareTo(o)>0&&(o=c.readTime)}),i.ss.set(e,o)}function Lp(){return Lp=(0,h.Z)(function*(i,e,n,o){const u=_t(i);let c=f(),g=So();for(const G of n){const te=e.Ps(G.metadata.name);G.document&&(c=c.add(te));const ue=e.Is(G);ue.setReadTime(e.Ts(G.metadata.readTime)),g=g.insert(te,ue)}const S=u.os.newChangeBuffer({trackRemovals:!0}),x=yield wu(u,(te=o,bo(ac(qn.fromString(`__bundle__/docs/${te}`)))));var te;return u.persistence.runTransaction("Apply bundle documents","readwrite",G=>Qd(G,S,g).next(te=>(S.apply(G),te)).next(te=>u.Qr.removeMatchingKeysForTargetId(G,x.targetId).next(()=>u.Qr.addMatchingKeys(G,c,x.targetId)).next(()=>u.localDocuments.getLocalViewOfDocuments(G,te.cs,te.ls)).next(()=>te.cs)))}),Lp.apply(this,arguments)}function Vp(i,e){return Jh.apply(this,arguments)}function Jh(){return Jh=(0,h.Z)(function*(i,e,n=f()){const o=yield wu(i,bo(_c(e.bundledQuery))),u=_t(i);return u.persistence.runTransaction("Save named query","readwrite",c=>{const g=Ks(e.readTime);if(o.snapshotVersion.compareTo(g)>=0)return u.$r.saveNamedQuery(c,e);const S=o.withResumeToken(Ji.EMPTY_BYTE_STRING,g);return u.ns=u.ns.insert(S.targetId,S),u.Qr.updateTargetData(c,S).next(()=>u.Qr.removeMatchingKeysForTargetId(c,o.targetId)).next(()=>u.Qr.addMatchingKeys(c,n,o.targetId)).next(()=>u.$r.saveNamedQuery(c,e))})}),Jh.apply(this,arguments)}function Ym(i,e){return`firestore_clients_${i}_${e}`}function Up(i,e,n){let o=`firestore_mutations_${i}_${n}`;return e.isAuthenticated()&&(o+=`_${e.uid}`),o}function Yd(i,e){return`firestore_targets_${i}_${e}`}class Bp{constructor(e,n,o,u){this.user=e,this.batchId=n,this.state=o,this.error=u}static Es(e,n,o){const u=JSON.parse(o);let c,g="object"==typeof u&&-1!==["pending","acknowledged","rejected"].indexOf(u.state)&&(void 0===u.error||"object"==typeof u.error);return g&&u.error&&(g="string"==typeof u.error.message&&"string"==typeof u.error.code,g&&(c=new gt(u.error.code,u.error.message))),g?new Bp(e,n,u.state,c):($r("SharedClientState",`Failed to parse mutation state for ID '${n}': ${o}`),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Jd{constructor(e,n,o){this.targetId=e,this.state=n,this.error=o}static Es(e,n){const o=JSON.parse(n);let u,c="object"==typeof o&&-1!==["not-current","current","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return c&&o.error&&(c="string"==typeof o.error.message&&"string"==typeof o.error.code,c&&(u=new gt(o.error.code,o.error.message))),c?new Jd(e,o.state,u):($r("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Xh{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Es(e,n){const o=JSON.parse(n);let u="object"==typeof o&&o.activeTargetIds instanceof Array,c=D();for(let g=0;u&&g<o.activeTargetIds.length;++g)u=v(o.activeTargetIds[g]),c=c.add(o.activeTargetIds[g]);return u?new Xh(e,c):($r("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}}class jp{constructor(e,n){this.clientId=e,this.onlineState=n}static Es(e){const n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new jp(n.clientId,n.onlineState):($r("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Jm{constructor(){this.activeTargetIds=D()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Xm{constructor(e,n,o,u,c){this.window=e,this.oi=n,this.persistenceKey=o,this.Vs=u,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.fs=this.gs.bind(this),this.ps=new wi(Fn),this.started=!1,this.ys=[];const g=o.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=c,this.ws=Ym(this.persistenceKey,this.Vs),this.Ss=`firestore_sequence_number_${this.persistenceKey}`,this.ps=this.ps.insert(this.Vs,new Jm),this.bs=new RegExp(`^firestore_clients_${g}_([^_]*)$`),this.Ds=new RegExp(`^firestore_mutations_${g}_(\\d+)(?:_(.*))?$`),this.Cs=new RegExp(`^firestore_targets_${g}_(\\d+)$`),this.vs=`firestore_online_state_${this.persistenceKey}`,this.Fs=function(x){return`firestore_bundle_loaded_v2_${x}`}(this.persistenceKey),this.window.addEventListener("storage",this.fs)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,h.Z)(function*(){const n=yield e.syncEngine.Bi();for(const u of n){if(u===e.Vs)continue;const c=e.getItem(Ym(e.persistenceKey,u));if(c){const g=Xh.Es(u,c);g&&(e.ps=e.ps.insert(g.clientId,g))}}e.Ms();const o=e.storage.getItem(e.vs);if(o){const u=e.xs(o);u&&e.Os(u)}for(const u of e.ys)e.gs(u);e.ys=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ss,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ns(this.ps)}isActiveQueryTarget(e){let n=!1;return this.ps.forEach((o,u)=>{u.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.Ls(e,"pending")}updateMutationState(e,n,o){this.Ls(e,n,o),this.Bs(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){const o=this.storage.getItem(Yd(this.persistenceKey,e));if(o){const u=Jd.Es(e,o);u&&(n=u.state)}}return this.ks.As(e),this.Ms(),n}removeLocalQueryTarget(e){this.ks.Rs(e),this.Ms()}isLocalQueryTarget(e){return this.ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Yd(this.persistenceKey,e))}updateQueryState(e,n,o){this.qs(e,n,o)}handleUserChange(e,n,o){n.forEach(u=>{this.Bs(u)}),this.currentUser=e,o.forEach(u=>{this.addPendingMutation(u)})}setOnlineState(e){this.Qs(e)}notifyBundleLoaded(e){this.Ks(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.fs),this.removeItem(this.ws),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return dt("SharedClientState","READ",e,n),n}setItem(e,n){dt("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){dt("SharedClientState","REMOVE",e),this.storage.removeItem(e)}gs(e){var n=this;const o=e;if(o.storageArea===this.storage){if(dt("SharedClientState","EVENT",o.key,o.newValue),o.key===this.ws)return void $r("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.oi.enqueueRetryable((0,h.Z)(function*(){if(n.started){if(null!==o.key)if(n.bs.test(o.key)){if(null==o.newValue){const u=n.$s(o.key);return n.Us(u,null)}{const u=n.Ws(o.key,o.newValue);if(u)return n.Us(u.clientId,u)}}else if(n.Ds.test(o.key)){if(null!==o.newValue){const u=n.Gs(o.key,o.newValue);if(u)return n.zs(u)}}else if(n.Cs.test(o.key)){if(null!==o.newValue){const u=n.js(o.key,o.newValue);if(u)return n.Hs(u)}}else if(o.key===n.vs){if(null!==o.newValue){const u=n.xs(o.newValue);if(u)return n.Os(u)}}else if(o.key===n.Ss){const u=function(g){let S=lo._e;if(null!=g)try{const x=JSON.parse(g);en("number"==typeof x),S=x}catch(x){$r("SharedClientState","Failed to read sequence number from WebStorage",x)}return S}(o.newValue);u!==lo._e&&n.sequenceNumberHandler(u)}else if(o.key===n.Fs){const u=n.Js(o.newValue);yield Promise.all(u.map(c=>n.syncEngine.Ys(c)))}}else n.ys.push(o)}))}}get ks(){return this.ps.get(this.Vs)}Ms(){this.setItem(this.ws,this.ks.ds())}Ls(e,n,o){const u=new Bp(this.currentUser,e,n,o),c=Up(this.persistenceKey,this.currentUser,e);this.setItem(c,u.ds())}Bs(e){const n=Up(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Qs(e){this.storage.setItem(this.vs,JSON.stringify({clientId:this.Vs,onlineState:e}))}qs(e,n,o){const u=Yd(this.persistenceKey,e),c=new Jd(e,n,o);this.setItem(u,c.ds())}Ks(e){const n=JSON.stringify(Array.from(e));this.setItem(this.Fs,n)}$s(e){const n=this.bs.exec(e);return n?n[1]:null}Ws(e,n){const o=this.$s(e);return Xh.Es(o,n)}Gs(e,n){const o=this.Ds.exec(e),u=Number(o[1]);return Bp.Es(new pn(void 0!==o[2]?o[2]:null),u,n)}js(e,n){const o=this.Cs.exec(e),u=Number(o[1]);return Jd.Es(u,n)}xs(e){return jp.Es(e)}Js(e){return JSON.parse(e)}zs(e){var n=this;return(0,h.Z)(function*(){if(e.user.uid===n.currentUser.uid)return n.syncEngine.Zs(e.batchId,e.state,e.error);dt("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Hs(e){return this.syncEngine.Xs(e.targetId,e.state,e.error)}Us(e,n){const o=n?this.ps.insert(e,n):this.ps.remove(e),u=this.Ns(this.ps),c=this.Ns(o),g=[],S=[];return c.forEach(x=>{u.has(x)||g.push(x)}),u.forEach(x=>{c.has(x)||S.push(x)}),this.syncEngine.eo(g,S).then(()=>{this.ps=o})}Os(e){this.ps.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ns(e){let n=D();return e.forEach((o,u)=>{n=n.unionWith(u.activeTargetIds)}),n}}class Xd{constructor(){this.no=new Jm,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,o){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,n,o){this.ro[e]=n}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new Jm,Promise.resolve()}handleUserChange(e,n,o){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Qy{io(e){}shutdown(){}}class ef{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){dt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){dt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let ad=null;function jl(){return null===ad?ad=268435456+Math.round(2147483648*Math.random()):ad++,"0x"+ad.toString(16)}const $p={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Hp{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}onMessage(e){this.Ao=e}close(){this.ho()}send(e){this.lo(e)}Ro(){this.Io()}Vo(e){this.Eo(e)}mo(e){this.Ao(e)}}const po="WebChannelConnection";class tf extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const o=n.ssl?"https":"http",u=encodeURIComponent(this.databaseId.projectId),c=encodeURIComponent(this.databaseId.database);this.fo=o+"://"+n.host,this.po=`projects/${u}/databases/${c}`,this.yo="(default)"===this.databaseId.database?`project_id=${u}`:`project_id=${u}&database_id=${c}`}get wo(){return!1}So(n,o,u,c,g){const S=jl(),x=this.bo(n,o.toUriEncodedString());dt("RestConnection",`Sending RPC '${n}' ${S}:`,x,u);const G={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(G,c,g),this.Co(n,x,G,u).then(te=>(dt("RestConnection",`Received RPC '${n}' ${S}: `,te),te),te=>{throw Jr("RestConnection",`RPC '${n}' ${S} failed with error: `,te,"url: ",x,"request:",u),te})}vo(n,o,u,c,g,S){return this.So(n,o,u,c,g)}Do(n,o,u){n["X-Goog-Api-Client"]="gl-js/ fire/"+Qr,n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),o&&o.headers.forEach((c,g)=>n[g]=c),u&&u.headers.forEach((c,g)=>n[g]=c)}bo(n,o){return`${this.fo}/v1/${o}:${$p[n]}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Co(e,n,o,u){const c=jl();return new Promise((g,S)=>{const x=new Xt;x.setWithCredentials(!0),x.listenOnce(L.COMPLETE,()=>{try{switch(x.getLastErrorCode()){case J.NO_ERROR:const te=x.getResponseJson();dt(po,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(te)),g(te);break;case J.TIMEOUT:dt(po,`RPC '${e}' ${c} timed out`),S(new gt(Xe.DEADLINE_EXCEEDED,"Request time out"));break;case J.HTTP_ERROR:const ue=x.getStatus();if(dt(po,`RPC '${e}' ${c} failed with status:`,ue,"response text:",x.getResponseText()),ue>0){let Se=x.getResponseJson();Array.isArray(Se)&&(Se=Se[0]);const qe=Se?.error;if(qe&&qe.status&&qe.message){const Nt=function(jt){const An=jt.toLowerCase().replace(/_/g,"-");return Object.values(Xe).indexOf(An)>=0?An:Xe.UNKNOWN}(qe.status);S(new gt(Nt,qe.message))}else S(new gt(Xe.UNKNOWN,"Server responded with status "+x.getStatus()))}else S(new gt(Xe.UNAVAILABLE,"Connection failed."));break;default:Rt()}}finally{dt(po,`RPC '${e}' ${c} completed.`)}});const G=JSON.stringify(u);dt(po,`RPC '${e}' ${c} sending request:`,u),x.send(n,"POST",G,o,15)})}Fo(e,n,o){const u=jl(),c=[this.fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],g=ra(),S=A(),x={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},G=this.longPollingOptions.timeoutSeconds;void 0!==G&&(x.longPollingTimeout=Math.round(1e3*G)),this.useFetchStreams&&(x.useFetchStreams=!0),this.Do(x.initMessageHeaders,n,o),x.encodeInitMessageHeaders=!0;const te=c.join("");dt(po,`Creating RPC '${e}' stream ${u}: ${te}`,x);const ue=g.createWebChannel(te,x);let Se=!1,qe=!1;const Nt=new Hp({lo:jt=>{qe?dt(po,`Not sending because RPC '${e}' stream ${u} is closed:`,jt):(Se||(dt(po,`Opening RPC '${e}' stream ${u} transport.`),ue.open(),Se=!0),dt(po,`RPC '${e}' stream ${u} sending:`,jt),ue.send(jt))},ho:()=>ue.close()}),zt=(jt,An,fr)=>{jt.listen(An,wn=>{try{fr(wn)}catch(Pr){setTimeout(()=>{throw Pr},0)}})};return zt(ue,lt.EventType.OPEN,()=>{qe||dt(po,`RPC '${e}' stream ${u} transport opened.`)}),zt(ue,lt.EventType.CLOSE,()=>{qe||(qe=!0,dt(po,`RPC '${e}' stream ${u} transport closed`),Nt.Vo())}),zt(ue,lt.EventType.ERROR,jt=>{qe||(qe=!0,Jr(po,`RPC '${e}' stream ${u} transport errored:`,jt),Nt.Vo(new gt(Xe.UNAVAILABLE,"The operation could not be completed")))}),zt(ue,lt.EventType.MESSAGE,jt=>{var An;if(!qe){const fr=jt.data[0];en(!!fr);const Pr=fr.error||(null===(An=fr[0])||void 0===An?void 0:An.error);if(Pr){dt(po,`RPC '${e}' stream ${u} received error:`,Pr);const es=Pr.status;let Ni=function(nI){const Hf=fo[nI];if(void 0!==Hf)return hm(Hf)}(es),Po=Pr.message;void 0===Ni&&(Ni=Xe.INTERNAL,Po="Unknown error status: "+es+" with message "+Pr.message),qe=!0,Nt.Vo(new gt(Ni,Po)),ue.close()}else dt(po,`RPC '${e}' stream ${u} received:`,fr),Nt.mo(fr)}}),zt(S,Q.STAT_EVENT,jt=>{jt.stat===ge.PROXY?dt(po,`RPC '${e}' stream ${u} detected buffering proxy`):jt.stat===ge.NOPROXY&&dt(po,`RPC '${e}' stream ${u} detected no buffering proxy`)}),setTimeout(()=>{Nt.Ro()},0),Nt}}function Ac(){return typeof window<"u"?window:null}function ud(){return typeof document<"u"?document:null}function Cc(i){return new Ly(i,!0)}class ld{constructor(e,n,o=1e3,u=1.5,c=6e4){this.oi=e,this.timerId=n,this.Mo=o,this.xo=u,this.Oo=c,this.No=0,this.Lo=null,this.Bo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(e){this.cancel();const n=Math.floor(this.No+this.Qo()),o=Math.max(0,Date.now()-this.Bo),u=Math.max(0,n-o);u>0&&dt("ExponentialBackoff",`Backing off for ${u} ms (base delay: ${this.No} ms, delay with jitter: ${n} ms, last attempt: ${o} ms ago)`),this.Lo=this.oi.enqueueAfterDelay(this.timerId,u,()=>(this.Bo=Date.now(),e())),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){null!==this.Lo&&(this.Lo.skipDelay(),this.Lo=null)}cancel(){null!==this.Lo&&(this.Lo.cancel(),this.Lo=null)}Qo(){return(Math.random()-.5)*this.No}}class Yy{constructor(e,n,o,u,c,g,S,x){this.oi=e,this.$o=o,this.Uo=u,this.connection=c,this.authCredentialsProvider=g,this.appCheckCredentialsProvider=S,this.listener=x,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new ld(e,n)}Ho(){return 1===this.state||5===this.state||this.Jo()}Jo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Yo()}stop(){var e=this;return(0,h.Z)(function*(){e.Ho()&&(yield e.close(0))})()}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&null===this.Go&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,()=>this.e_()))}t_(e){this.n_(),this.stream.send(e)}e_(){var e=this;return(0,h.Z)(function*(){if(e.Jo())return e.close(0)})()}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}close(e,n){var o=this;return(0,h.Z)(function*(){o.n_(),o.r_(),o.jo.cancel(),o.Wo++,4!==e?o.jo.reset():n&&n.code===Xe.RESOURCE_EXHAUSTED?($r(n.toString()),$r("Using maximum backoff delay to prevent overloading the backend."),o.jo.ko()):n&&n.code===Xe.UNAUTHENTICATED&&3!==o.state&&(o.authCredentialsProvider.invalidateToken(),o.appCheckCredentialsProvider.invalidateToken()),null!==o.stream&&(o.i_(),o.stream.close(),o.stream=null),o.state=e,yield o.listener.To(n)})()}i_(){}auth(){this.state=1;const e=this.s_(this.Wo),n=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([o,u])=>{this.Wo===n&&this.o_(o,u)},o=>{e(()=>{const u=new gt(Xe.UNKNOWN,"Fetching auth token failed: "+o.message);return this.__(u)})})}o_(e,n){const o=this.s_(this.Wo);this.stream=this.a_(e,n),this.stream.Po(()=>{o(()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,()=>(this.Jo()&&(this.state=3),Promise.resolve())),this.listener.Po()))}),this.stream.To(u=>{o(()=>this.__(u))}),this.stream.onMessage(u=>{o(()=>this.onMessage(u))})}Yo(){var e=this;this.state=5,this.jo.qo((0,h.Z)(function*(){e.state=0,e.start()}))}__(e){return dt("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}s_(e){return n=>{this.oi.enqueueAndForget(()=>this.Wo===e?n():(dt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class zp extends Yy{constructor(e,n,o,u,c,g){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,o,u,g),this.serializer=c}a_(e,n){return this.connection.Fo("Listen",e,n)}onMessage(e){this.jo.reset();const n=function Im(i,e){let n;if("targetChange"in e){const o="NO_CHANGE"===(G=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===G?1:"REMOVE"===G?2:"CURRENT"===G?3:"RESET"===G?4:Rt(),u=e.targetChange.targetIds||[],c=function(G,te){return G.useProto3Json?(en(void 0===te||"string"==typeof te),Ji.fromBase64String(te||"")):(en(void 0===te||te instanceof Uint8Array),Ji.fromUint8Array(te||new Uint8Array))}(i,e.targetChange.resumeToken),g=e.targetChange.cause,S=g&&function(G){const te=void 0===G.code?Xe.UNKNOWN:hm(G.code);return new gt(te,G.message||"")}(g);n=new fm(o,u,c,S||null)}else if("documentChange"in e){const o=e.documentChange,u=eu(i,o.document.name),c=Ks(o.document.updateTime),g=o.document.createTime?Ks(o.document.createTime):hn.min(),S=new nn({mapValue:{fields:o.document.fields}}),x=bt.newFoundDocument(u,c,g,S);n=new kh(o.targetIds||[],o.removedTargetIds||[],x.key,x)}else if("documentDelete"in e){const o=e.documentDelete,u=eu(i,o.document),c=o.readTime?Ks(o.readTime):hn.min(),g=bt.newNoDocument(u,c);n=new kh([],o.removedTargetIds||[],g.key,g)}else if("documentRemove"in e){const o=e.documentRemove,u=eu(i,o.document);n=new kh([],o.removedTargetIds||[],u,null)}else{if(!("filter"in e))return Rt();{const o=e.filter,{count:u=0,unchangedNames:c}=o,g=new xy(u,c);n=new up(o.targetId,g)}}var G;return n}(this.serializer,e),o=function(c){if(!("targetChange"in c))return hn.min();const g=c.targetChange;return g.targetIds&&g.targetIds.length?hn.min():g.readTime?Ks(g.readTime):hn.min()}(e);return this.listener.u_(n,o)}c_(e){const n={};n.database=fp(this.serializer),n.addTarget=function(c,g){let S;const x=g.target;if(S=Va(x)?{documents:wm(c,x)}:{query:gp(c,x).ut},S.targetId=g.targetId,g.resumeToken.approximateByteSize()>0){S.resumeToken=gm(c,g.resumeToken);const G=gc(c,g.expectedCount);null!==G&&(S.expectedCount=G)}else if(g.snapshotVersion.compareTo(hn.min())>0){S.readTime=ed(c,g.snapshotVersion.toTimestamp());const G=gc(c,g.expectedCount);null!==G&&(S.expectedCount=G)}return S}(this.serializer,e);const o=function Tm(i,e){const n=function(u){switch(u){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Rt()}}(e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,e);o&&(n.labels=o),this.t_(n)}l_(e){const n={};n.database=fp(this.serializer),n.removeTarget=e,this.t_(n)}}class eh extends Yy{constructor(e,n,o,u,c,g){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,o,u,g),this.serializer=c,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(e,n){return this.connection.Fo("Write",e,n)}onMessage(e){if(en(!!e.streamToken),this.lastStreamToken=e.streamToken,this.h_){this.jo.reset();const n=function pp(i,e){return i&&i.length>0?(en(void 0!==e),i.map(n=>function(u,c){let g=Ks(u.updateTime?u.updateTime:c);return g.isEqual(hn.min())&&(g=Ks(c)),new Jf(g,u.transformResults||[])}(n,e))):[]}(e.writeResults,e.commitTime),o=Ks(e.commitTime);return this.listener.T_(o,n)}return en(!e.writeResults||0===e.writeResults.length),this.h_=!0,this.listener.E_()}d_(){const e={};e.database=fp(this.serializer),this.t_(e)}I_(e){const n={streamToken:this.lastStreamToken,writes:e.map(o=>Ml(this.serializer,o))};this.t_(n)}}class Jy extends class{}{constructor(e,n,o,u){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=o,this.serializer=u,this.A_=!1}R_(){if(this.A_)throw new gt(Xe.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,n,o,u){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,g])=>this.connection.So(e,Pl(n,o),u,c,g)).catch(c=>{throw"FirebaseError"===c.name?(c.code===Xe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new gt(Xe.UNKNOWN,c.toString())})}vo(e,n,o,u,c){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([g,S])=>this.connection.vo(e,Pl(n,o),u,g,S,c)).catch(g=>{throw"FirebaseError"===g.name?(g.code===Xe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),g):new gt(Xe.UNKNOWN,g.toString())})}terminate(){this.A_=!0,this.connection.terminate()}}class Xy{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){0===this.m_&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve())))}S_(e){"Online"===this.state?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.y_("Offline")))}set(e){this.b_(),this.m_=0,"Online"===e&&(this.g_=!1),this.y_(e)}y_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}w_(e){const n=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.g_?($r(n),this.g_=!1):dt("OnlineStateTracker",n)}b_(){null!==this.f_&&(this.f_.cancel(),this.f_=null)}}class Wp{constructor(e,n,o,u,c){var g=this;this.localStore=e,this.datastore=n,this.asyncQueue=o,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=c,this.M_.io(S=>{o.enqueueAndForget((0,h.Z)(function*(){var x;Tu(g)&&(dt("RemoteStore","Restarting streams for network reachability change."),yield(x=(0,h.Z)(function*(te){const ue=_t(te);ue.v_.add(4),yield dd(ue),ue.x_.set("Unknown"),ue.v_.delete(4),yield cd(ue)}),function G(te){return x.apply(this,arguments)})(g))}))}),this.x_=new Xy(o,u)}}function cd(i){return qp.apply(this,arguments)}function qp(){return qp=(0,h.Z)(function*(i){if(Tu(i))for(const e of i.F_)yield e(!0)}),qp.apply(this,arguments)}function dd(i){return t_.apply(this,arguments)}function t_(){return t_=(0,h.Z)(function*(i){for(const e of i.F_)yield e(!1)}),t_.apply(this,arguments)}function nf(i,e){const n=_t(i);n.C_.has(e.targetId)||(n.C_.set(e.targetId,e),nh(n)?rf(n):sh(n).Jo()&&th(n,e))}function ll(i,e){const n=_t(i),o=sh(n);n.C_.delete(e),o.Jo()&&n_(n,e),0===n.C_.size&&(o.Jo()?o.Xo():Tu(n)&&n.x_.set("Unknown"))}function th(i,e){if(i.O_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(hn.min())>0){const n=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}sh(i).c_(e)}function n_(i,e){i.O_.Oe(e),sh(i).l_(e)}function rf(i){i.O_=new ky({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>i.C_.get(e)||null,nt:()=>i.datastore.serializer.databaseId}),sh(i).start(),i.x_.p_()}function nh(i){return Tu(i)&&!sh(i).Ho()&&i.C_.size>0}function Tu(i){return 0===_t(i).v_.size}function r_(i){i.O_=void 0}function i_(i){return Kp.apply(this,arguments)}function Kp(){return Kp=(0,h.Z)(function*(i){i.C_.forEach((e,n)=>{th(i,e)})}),Kp.apply(this,arguments)}function s_(i,e){return o_.apply(this,arguments)}function o_(){return o_=(0,h.Z)(function*(i,e){r_(i),nh(i)?(i.x_.S_(e),rf(i)):i.x_.set("Unknown")}),o_.apply(this,arguments)}function ev(i,e,n){return hd.apply(this,arguments)}function hd(){return hd=(0,h.Z)(function*(i,e,n){if(i.x_.set("Online"),e instanceof fm&&2===e.state&&e.cause)try{yield(o=(0,h.Z)(function*(c,g){const S=g.cause;for(const x of g.targetIds)c.C_.has(x)&&(yield c.remoteSyncer.rejectListen(x,S),c.C_.delete(x),c.O_.removeTarget(x))}),function u(c,g){return o.apply(this,arguments)})(i,e)}catch(o){dt("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),o),yield sf(i,o)}else if(e instanceof kh?i.O_.$e(e):e instanceof up?i.O_.Je(e):i.O_.Ge(e),!n.isEqual(hn.min()))try{const o=yield Zm(i.localStore);n.compareTo(o)>=0&&(yield function(c,g){const S=c.O_.it(g);return S.targetChanges.forEach((x,G)=>{if(x.resumeToken.approximateByteSize()>0){const te=c.C_.get(G);te&&c.C_.set(G,te.withResumeToken(x.resumeToken,g))}}),S.targetMismatches.forEach((x,G)=>{const te=c.C_.get(x);if(!te)return;c.C_.set(x,te.withResumeToken(Ji.EMPTY_BYTE_STRING,te.snapshotVersion)),n_(c,x);const ue=new Nu(te.target,x,G,te.sequenceNumber);th(c,ue)}),c.remoteSyncer.applyRemoteEvent(S)}(i,n))}catch(o){dt("RemoteStore","Failed to raise snapshot:",o),yield sf(i,o)}var o}),hd.apply(this,arguments)}function sf(i,e,n){return $l.apply(this,arguments)}function $l(){return $l=(0,h.Z)(function*(i,e,n){if(!Ei(e))throw e;i.v_.add(1),yield dd(i),i.x_.set("Offline"),n||(n=()=>Zm(i.localStore)),i.asyncQueue.enqueueRetryable((0,h.Z)(function*(){dt("RemoteStore","Retrying IndexedDB access"),yield n(),i.v_.delete(1),yield cd(i)}))}),$l.apply(this,arguments)}function fd(i,e){return e().catch(n=>sf(i,n,e))}function pd(i){return af.apply(this,arguments)}function af(){return af=(0,h.Z)(function*(i){const e=_t(i),n=cl(e);let o=e.D_.length>0?e.D_[e.D_.length-1].batchId:-1;for(;tv(e);)try{const u=yield Fu(e.localStore,o);if(null===u){0===e.D_.length&&n.Xo();break}o=u.batchId,nv(e,u)}catch(u){yield sf(e,u)}a_(e)&&Zp(e)}),af.apply(this,arguments)}function tv(i){return Tu(i)&&i.D_.length<10}function nv(i,e){i.D_.push(e);const n=cl(i);n.Jo()&&n.P_&&n.I_(e.mutations)}function a_(i){return Tu(i)&&!cl(i).Ho()&&i.D_.length>0}function Zp(i){cl(i).start()}function u_(i){return rh.apply(this,arguments)}function rh(){return rh=(0,h.Z)(function*(i){cl(i).d_()}),rh.apply(this,arguments)}function WE(i){return ih.apply(this,arguments)}function ih(){return ih=(0,h.Z)(function*(i){const e=cl(i);for(const n of i.D_)e.I_(n.mutations)}),ih.apply(this,arguments)}function l_(i,e,n){return Qp.apply(this,arguments)}function Qp(){return Qp=(0,h.Z)(function*(i,e,n){const o=i.D_.shift(),u=rp.from(o,e,n);yield fd(i,()=>i.remoteSyncer.applySuccessfulWrite(u)),yield pd(i)}),Qp.apply(this,arguments)}function rv(i,e){return uf.apply(this,arguments)}function uf(){return uf=(0,h.Z)(function*(i,e){var n;e&&cl(i).P_&&(yield(n=(0,h.Z)(function*(u,c){if(sp(S=c.code)&&S!==Xe.ABORTED){const g=u.D_.shift();cl(u).Zo(),yield fd(u,()=>u.remoteSyncer.rejectFailedWrite(g.batchId,c)),yield pd(u)}var S}),function o(u,c){return n.apply(this,arguments)})(i,e)),a_(i)&&Zp(i)}),uf.apply(this,arguments)}function c_(i,e){return lf.apply(this,arguments)}function lf(){return lf=(0,h.Z)(function*(i,e){const n=_t(i);n.asyncQueue.verifyOperationInProgress(),dt("RemoteStore","RemoteStore received new credentials");const o=Tu(n);n.v_.add(3),yield dd(n),o&&n.x_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.v_.delete(3),yield cd(n)}),lf.apply(this,arguments)}function Yp(i,e){return Jp.apply(this,arguments)}function Jp(){return Jp=(0,h.Z)(function*(i,e){const n=_t(i);e?(n.v_.delete(2),yield cd(n)):e||(n.v_.add(2),yield dd(n),n.x_.set("Unknown"))}),Jp.apply(this,arguments)}function sh(i){return i.N_||(i.N_=function(n,o,u){const c=_t(n);return c.R_(),new zp(o,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,u)}(i.datastore,i.asyncQueue,{Po:i_.bind(null,i),To:s_.bind(null,i),u_:ev.bind(null,i)}),i.F_.push(function(){var e=(0,h.Z)(function*(n){n?(i.N_.Zo(),nh(i)?rf(i):i.x_.set("Unknown")):(yield i.N_.stop(),r_(i))});return function(n){return e.apply(this,arguments)}}())),i.N_}function cl(i){return i.L_||(i.L_=function(n,o,u){const c=_t(n);return c.R_(),new eh(o,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,u)}(i.datastore,i.asyncQueue,{Po:u_.bind(null,i),To:rv.bind(null,i),E_:WE.bind(null,i),T_:l_.bind(null,i)}),i.F_.push(function(){var e=(0,h.Z)(function*(n){n?(i.L_.Zo(),yield pd(i)):(yield i.L_.stop(),i.D_.length>0&&(dt("RemoteStore",`Stopping write stream with ${i.D_.length} pending writes`),i.D_=[]))});return function(n){return e.apply(this,arguments)}}())),i.L_}class cf{constructor(e,n,o,u,c){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=o,this.op=u,this.removalCallback=c,this.deferred=new qr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(g=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,o,u,c){const g=Date.now()+o,S=new cf(e,n,g,u,c);return S.start(o),S}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new gt(Xe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function da(i,e){if($r("AsyncQueue",`${e}: ${i}`),Ei(i))return new gt(Xe.UNAVAILABLE,`${e}: ${i}`);throw i}class bc{constructor(e){this.comparator=e?(n,o)=>e(n,o)||Ut.comparator(n.key,o.key):(n,o)=>Ut.comparator(n.key,o.key),this.keyedMap=hc(),this.sortedSet=new wi(this.comparator)}static emptySet(e){return new bc(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,o)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof bc)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),o=e.sortedSet.getIterator();for(;n.hasNext();){const u=n.getNext().key,c=o.getNext().key;if(!u.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,n){const o=new bc;return o.comparator=this.comparator,o.keyedMap=e,o.sortedSet=n,o}}class iv{constructor(){this.B_=new wi(Ut.comparator)}track(e){const n=e.doc.key,o=this.B_.get(n);o?0!==e.type&&3===o.type?this.B_=this.B_.insert(n,e):3===e.type&&1!==o.type?this.B_=this.B_.insert(n,{type:o.type,doc:e.doc}):2===e.type&&2===o.type?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):2===e.type&&0===o.type?this.B_=this.B_.insert(n,{type:0,doc:e.doc}):1===e.type&&0===o.type?this.B_=this.B_.remove(n):1===e.type&&2===o.type?this.B_=this.B_.insert(n,{type:1,doc:o.doc}):0===e.type&&1===o.type?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):Rt():this.B_=this.B_.insert(n,e)}k_(){const e=[];return this.B_.inorderTraversal((n,o)=>{e.push(o)}),e}}class Hl{constructor(e,n,o,u,c,g,S,x,G){this.query=e,this.docs=n,this.oldDocs=o,this.docChanges=u,this.mutatedKeys=c,this.fromCache=g,this.syncStateChanged=S,this.excludesMetadataChanges=x,this.hasCachedResults=G}static fromInitialDocuments(e,n,o,u,c){const g=[];return n.forEach(S=>{g.push({type:0,doc:S})}),new Hl(e,n,bc.emptySet(n),g,o,u,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&yu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,o=e.docChanges;if(n.length!==o.length)return!1;for(let u=0;u<n.length;u++)if(n[u].type!==o[u].type||!n[u].doc.isEqual(o[u].doc))return!1;return!0}}class zl{constructor(){this.q_=void 0,this.Q_=[]}K_(){return this.Q_.some(e=>e.U_())}}class df{constructor(){this.queries=new Ba(e=>cc(e),yu),this.onlineState="Unknown",this.W_=new Set}}function Xp(i,e){return eg.apply(this,arguments)}function eg(){return eg=(0,h.Z)(function*(i,e){const n=_t(i);let o=3;const u=e.query;let c=n.queries.get(u);c?!c.K_()&&e.U_()&&(o=2):(c=new zl,o=e.U_()?0:1);try{switch(o){case 0:c.q_=yield n.onListen(u,!0);break;case 1:c.q_=yield n.onListen(u,!1);break;case 2:yield n.onFirstRemoteStoreListen(u)}}catch(g){const S=da(g,`Initialization of query '${dc(e.query)}' failed`);return void e.onError(S)}n.queries.set(u,c),c.Q_.push(e),e.G_(n.onlineState),c.q_&&e.z_(c.q_)&&ng(n)}),eg.apply(this,arguments)}function tg(i,e){return oh.apply(this,arguments)}function oh(){return oh=(0,h.Z)(function*(i,e){const n=_t(i),o=e.query;let u=3;const c=n.queries.get(o);if(c){const g=c.Q_.indexOf(e);g>=0&&(c.Q_.splice(g,1),0===c.Q_.length?u=e.U_()?0:1:!c.K_()&&e.U_()&&(u=2))}switch(u){case 0:return n.queries.delete(o),n.onUnlisten(o,!0);case 1:return n.queries.delete(o),n.onUnlisten(o,!1);case 2:return n.onLastRemoteStoreUnlisten(o);default:return}}),oh.apply(this,arguments)}function Lu(i,e){const n=_t(i);let o=!1;for(const u of e){const g=n.queries.get(u.query);if(g){for(const S of g.Q_)S.z_(u)&&(o=!0);g.q_=u}}o&&ng(n)}function d_(i,e,n){const o=_t(i),u=o.queries.get(e);if(u)for(const c of u.Q_)c.onError(n);o.queries.delete(e)}function ng(i){i.W_.forEach(e=>{e.next()})}var h_,Ro;(Ro=h_||(h_={})).j_="default",Ro.Cache="cache";class rg{constructor(e,n,o){this.query=e,this.H_=n,this.J_=!1,this.Y_=null,this.onlineState="Unknown",this.options=o||{}}z_(e){if(!this.options.includeMetadataChanges){const o=[];for(const u of e.docChanges)3!==u.type&&o.push(u);e=new Hl(e.query,e.docs,e.oldDocs,o,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.J_?this.Z_(e)&&(this.H_.next(e),n=!0):this.X_(e,this.onlineState)&&(this.ea(e),n=!0),this.Y_=e,n}onError(e){this.H_.error(e)}G_(e){this.onlineState=e;let n=!1;return this.Y_&&!this.J_&&this.X_(this.Y_,e)&&(this.ea(this.Y_),n=!0),n}X_(e,n){return!e.fromCache||!this.U_()||(!this.options.ta||!("Offline"!==n))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===n)}Z_(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Y_&&this.Y_.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}ea(e){e=Hl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.J_=!0,this.H_.next(e)}U_(){return this.options.source!==h_.Cache}}class ig{constructor(e,n){this.na=e,this.byteLength=n}ra(){return"metadata"in this.na}}class f_{constructor(e){this.serializer=e}Ps(e){return eu(this.serializer,e)}Is(e){return e.metadata.exists?Em(this.serializer,e.document,!1):bt.newNoDocument(this.Ps(e.metadata.name),this.Ts(e.metadata.readTime))}Ts(e){return Ks(e)}}class sv{constructor(e,n,o){this.ia=e,this.localStore=n,this.serializer=o,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=hf(e)}sa(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.na.namedQuery)this.queries.push(e.na.namedQuery);else if(e.na.documentMetadata){this.documents.push({metadata:e.na.documentMetadata}),e.na.documentMetadata.exists||++n;const o=qn.fromString(e.na.documentMetadata.name);this.collectionGroups.add(o.get(o.length-2))}else e.na.document&&(this.documents[this.documents.length-1].document=e.na.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}oa(e){const n=new Map,o=new f_(this.serializer);for(const u of e)if(u.metadata.queries){const c=o.Ps(u.metadata.name);for(const g of u.metadata.queries){const S=(n.get(g)||f()).add(c);n.set(g,S)}}return n}complete(){var e=this;return(0,h.Z)(function*(){const n=yield function Zy(i,e,n,o){return Lp.apply(this,arguments)}(e.localStore,new f_(e.serializer),e.documents,e.ia.id),o=e.oa(e.documents);for(const u of e.queries)yield Vp(e.localStore,u,o.get(u.name));return e.progress.taskState="Success",{progress:e.progress,_a:e.collectionGroups,aa:n}})()}}function hf(i){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:i.totalDocuments,totalBytes:i.totalBytes}}class sg{constructor(e){this.key=e}}class og{constructor(e){this.key=e}}class p_{constructor(e,n){this.query=e,this.ua=n,this.ca=null,this.hasCachedResults=!1,this.current=!1,this.la=f(),this.mutatedKeys=f(),this.ha=Pu(e),this.Pa=new bc(this.ha)}get Ia(){return this.ua}Ta(e,n){const o=n?n.Ea:new iv,u=n?n.Pa:this.Pa;let c=n?n.mutatedKeys:this.mutatedKeys,g=u,S=!1;const x="F"===this.query.limitType&&u.size===this.query.limit?u.last():null,G="L"===this.query.limitType&&u.size===this.query.limit?u.first():null;if(e.inorderTraversal((te,ue)=>{const Se=u.get(te),qe=Ja(this.query,ue)?ue:null,Nt=!!Se&&this.mutatedKeys.has(Se.key),zt=!!qe&&(qe.hasLocalMutations||this.mutatedKeys.has(qe.key)&&qe.hasCommittedMutations);let jt=!1;Se&&qe?Se.data.isEqual(qe.data)?Nt!==zt&&(o.track({type:3,doc:qe}),jt=!0):this.da(Se,qe)||(o.track({type:2,doc:qe}),jt=!0,(x&&this.ha(qe,x)>0||G&&this.ha(qe,G)<0)&&(S=!0)):!Se&&qe?(o.track({type:0,doc:qe}),jt=!0):Se&&!qe&&(o.track({type:1,doc:Se}),jt=!0,(x||G)&&(S=!0)),jt&&(qe?(g=g.add(qe),c=zt?c.add(te):c.delete(te)):(g=g.delete(te),c=c.delete(te)))}),null!==this.query.limit)for(;g.size>this.query.limit;){const te="F"===this.query.limitType?g.last():g.first();g=g.delete(te.key),c=c.delete(te.key),o.track({type:1,doc:te})}return{Pa:g,Ea:o,Xi:S,mutatedKeys:c}}da(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,o,u){const c=this.Pa;this.Pa=e.Pa,this.mutatedKeys=e.mutatedKeys;const g=e.Ea.k_();g.sort((te,ue)=>function(qe,Nt){const zt=jt=>{switch(jt){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Rt()}};return zt(qe)-zt(Nt)}(te.type,ue.type)||this.ha(te.doc,ue.doc)),this.Aa(o),u=null!=u&&u;const S=n&&!u?this.Ra():[],x=0===this.la.size&&this.current&&!u?1:0,G=x!==this.ca;return this.ca=x,0!==g.length||G?{snapshot:new Hl(this.query,e.Pa,c,g,e.mutatedKeys,0===x,G,!1,!!o&&o.resumeToken.approximateByteSize()>0),Va:S}:{Va:S}}G_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Pa:this.Pa,Ea:new iv,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{Va:[]}}ma(e){return!this.ua.has(e)&&!!this.Pa.has(e)&&!this.Pa.get(e).hasLocalMutations}Aa(e){e&&(e.addedDocuments.forEach(n=>this.ua=this.ua.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.ua=this.ua.delete(n)),this.current=e.current)}Ra(){if(!this.current)return[];const e=this.la;this.la=f(),this.Pa.forEach(o=>{this.ma(o.key)&&(this.la=this.la.add(o.key))});const n=[];return e.forEach(o=>{this.la.has(o)||n.push(new og(o))}),this.la.forEach(o=>{e.has(o)||n.push(new sg(o))}),n}fa(e){this.ua=e.hs,this.la=f();const n=this.Ta(e.documents);return this.applyChanges(n,!0)}ga(){return Hl.fromInitialDocuments(this.query,this.Pa,this.mutatedKeys,0===this.ca,this.hasCachedResults)}}class g_{constructor(e,n,o){this.query=e,this.targetId=n,this.view=o}}class m_{constructor(e){this.key=e,this.pa=!1}}class ov{constructor(e,n,o,u,c,g){this.localStore=e,this.remoteStore=n,this.eventManager=o,this.sharedClientState=u,this.currentUser=c,this.maxConcurrentLimboResolutions=g,this.ya={},this.wa=new Ba(S=>cc(S),yu),this.Sa=new Map,this.ba=new Set,this.Da=new wi(Ut.comparator),this.Ca=new Map,this.va=new Sp,this.Fa={},this.Ma=new Map,this.xa=Ll.Ln(),this.onlineState="Unknown",this.Oa=void 0}get isPrimaryClient(){return!0===this.Oa}}function av(i,e){return ff.apply(this,arguments)}function ff(){return ff=(0,h.Z)(function*(i,e,n=!0){const o=Af(i);let u;const c=o.wa.get(e);return c?(o.sharedClientState.addLocalQueryTarget(c.targetId),u=c.view.ga()):u=yield Vu(o,e,n,!0),u}),ff.apply(this,arguments)}function __(i,e){return Gl.apply(this,arguments)}function Gl(){return Gl=(0,h.Z)(function*(i,e){const n=Af(i);yield Vu(n,e,!0,!1)}),Gl.apply(this,arguments)}function Vu(i,e,n,o){return Wl.apply(this,arguments)}function Wl(){return Wl=(0,h.Z)(function*(i,e,n,o){const u=yield wu(i.localStore,bo(e)),c=u.targetId,g=n?i.sharedClientState.addLocalQueryTarget(c):"not-current";let S;return o&&(S=yield ag(i,e,c,"current"===g,u.resumeToken)),i.isPrimaryClient&&n&&nf(i.remoteStore,u),S}),Wl.apply(this,arguments)}function ag(i,e,n,o,u){return ug.apply(this,arguments)}function ug(){return ug=(0,h.Z)(function*(i,e,n,o,u){i.Na=(ue,Se,qe)=>{return(Nt=(0,h.Z)(function*(jt,An,fr,wn){let Pr=An.view.Ta(fr);Pr.Xi&&(Pr=yield Yh(jt.localStore,An.query,!1).then(({documents:$a})=>An.view.Ta($a,Pr)));const es=wn&&wn.targetChanges.get(An.targetId),Ni=wn&&null!=wn.targetMismatches.get(An.targetId),Po=An.view.applyChanges(Pr,jt.isPrimaryClient,es,Ni);return vf(jt,An.targetId,Po.Va),Po.snapshot}),function zt(jt,An,fr,wn){return Nt.apply(this,arguments)})(i,ue,Se,qe);var Nt};const c=yield Yh(i.localStore,e,!0),g=new p_(e,c.hs),S=g.Ta(c.documents),x=Xc.createSynthesizedTargetChangeForCurrentChange(n,o&&"Offline"!==i.onlineState,u),G=g.applyChanges(S,i.isPrimaryClient,x);vf(i,n,G.Va);const te=new g_(e,n,g);return i.wa.set(e,te),i.Sa.has(n)?i.Sa.get(n).push(e):i.Sa.set(n,[e]),G.snapshot}),ug.apply(this,arguments)}function y_(i,e,n){return pf.apply(this,arguments)}function pf(){return pf=(0,h.Z)(function*(i,e,n){const o=_t(i),u=o.wa.get(e),c=o.Sa.get(u.targetId);if(c.length>1)return o.Sa.set(u.targetId,c.filter(g=>!yu(g,e))),void o.wa.delete(e);o.isPrimaryClient?(o.sharedClientState.removeLocalQueryTarget(u.targetId),o.sharedClientState.isActiveQueryTarget(u.targetId)||(yield Bl(o.localStore,u.targetId,!1).then(()=>{o.sharedClientState.clearQueryState(u.targetId),n&&ll(o.remoteStore,u.targetId),dl(o,u.targetId)}).catch(as))):(dl(o,u.targetId),yield Bl(o.localStore,u.targetId,!0))}),pf.apply(this,arguments)}function lg(i,e){return Sc.apply(this,arguments)}function Sc(){return Sc=(0,h.Z)(function*(i,e){const n=_t(i),o=n.wa.get(e),u=n.Sa.get(o.targetId);n.isPrimaryClient&&1===u.length&&(n.sharedClientState.removeLocalQueryTarget(o.targetId),ll(n.remoteStore,o.targetId))}),Sc.apply(this,arguments)}function mf(){return mf=(0,h.Z)(function*(i,e,n){const o=vg(i);try{const u=yield function(g,S){const x=_t(g),G=Qt.now(),te=S.reduce((qe,Nt)=>qe.add(Nt.key),f());let ue,Se;return x.persistence.runTransaction("Locally write mutations","readwrite",qe=>{let Nt=So(),zt=f();return x.os.getEntries(qe,te).next(jt=>{Nt=jt,Nt.forEach((An,fr)=>{fr.isValidDocument()||(zt=zt.add(An))})}).next(()=>x.localDocuments.getOverlayedDocuments(qe,Nt)).next(jt=>{ue=jt;const An=[];for(const fr of S){const wn=dm(fr,ue.get(fr.key).overlayedDocument);null!=wn&&An.push(new Mu(fr.key,wn,cn(wn.value.mapValue),Xi.exists(!0)))}return x.mutationQueue.addMutationBatch(qe,G,An,S)}).next(jt=>{Se=jt;const An=jt.applyToLocalDocumentSet(ue,zt);return x.documentOverlayCache.saveOverlays(qe,jt.batchId,An)})}).then(()=>({batchId:Se.batchId,changes:Ph(ue)}))}(o.localStore,e);o.sharedClientState.addPendingMutation(u.batchId),function(g,S,x){let G=g.Fa[g.currentUser.toKey()];G||(G=new wi(Fn)),G=G.insert(S,x),g.Fa[g.currentUser.toKey()]=G}(o,u.batchId,n),yield Uu(o,u.changes),yield pd(o.remoteStore)}catch(u){const c=da(u,"Failed to persist write");n.reject(c)}}),mf.apply(this,arguments)}function cg(i,e){return dg.apply(this,arguments)}function dg(){return dg=(0,h.Z)(function*(i,e){const n=_t(i);try{const o=yield function xp(i,e){const n=_t(i),o=e.snapshotVersion;let u=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",c=>{const g=n.os.newChangeBuffer({trackRemovals:!0});u=n.ns;const S=[];e.targetChanges.forEach((te,ue)=>{const Se=u.get(ue);if(!Se)return;S.push(n.Qr.removeMatchingKeys(c,te.removedDocuments,ue).next(()=>n.Qr.addMatchingKeys(c,te.addedDocuments,ue)));let qe=Se.withSequenceNumber(c.currentSequenceNumber);var zt,jt,An;null!==e.targetMismatches.get(ue)?qe=qe.withResumeToken(Ji.EMPTY_BYTE_STRING,hn.min()).withLastLimboFreeSnapshotVersion(hn.min()):te.resumeToken.approximateByteSize()>0&&(qe=qe.withResumeToken(te.resumeToken,o)),u=u.insert(ue,qe),jt=qe,An=te,(0===(zt=Se).resumeToken.approximateByteSize()||jt.snapshotVersion.toMicroseconds()-zt.snapshotVersion.toMicroseconds()>=3e8||An.addedDocuments.size+An.modifiedDocuments.size+An.removedDocuments.size>0)&&S.push(n.Qr.updateTargetData(c,qe))});let x=So(),G=f();if(e.documentUpdates.forEach(te=>{e.resolvedLimboDocuments.has(te)&&S.push(n.persistence.referenceDelegate.updateLimboDocument(c,te))}),S.push(Qd(c,g,e.documentUpdates).next(te=>{x=te.cs,G=te.ls})),!o.isEqual(hn.min())){const te=n.Qr.getLastRemoteSnapshotVersion(c).next(ue=>n.Qr.setTargetsMetadata(c,c.currentSequenceNumber,o));S.push(te)}return je.waitFor(S).next(()=>g.apply(c)).next(()=>n.localDocuments.getLocalViewOfDocuments(c,x,G)).next(()=>x)}).then(c=>(n.ns=u,c))}(n.localStore,e);e.targetChanges.forEach((u,c)=>{const g=n.Ca.get(c);g&&(en(u.addedDocuments.size+u.modifiedDocuments.size+u.removedDocuments.size<=1),u.addedDocuments.size>0?g.pa=!0:u.modifiedDocuments.size>0?en(g.pa):u.removedDocuments.size>0&&(en(g.pa),g.pa=!1))}),yield Uu(n,o,e)}catch(o){yield as(o)}}),dg.apply(this,arguments)}function v_(i,e,n){const o=_t(i);if(o.isPrimaryClient&&0===n||!o.isPrimaryClient&&1===n){const u=[];o.wa.forEach((c,g)=>{const S=g.view.G_(e);S.snapshot&&u.push(S.snapshot)}),function(g,S){const x=_t(g);x.onlineState=S;let G=!1;x.queries.forEach((te,ue)=>{for(const Se of ue.Q_)Se.G_(S)&&(G=!0)}),G&&ng(x)}(o.eventManager,e),u.length&&o.ya.u_(u),o.onlineState=e,o.isPrimaryClient&&o.sharedClientState.setOnlineState(e)}}function uv(i,e,n){return hg.apply(this,arguments)}function hg(){return hg=(0,h.Z)(function*(i,e,n){const o=_t(i);o.sharedClientState.updateQueryState(e,"rejected",n);const u=o.Ca.get(e),c=u&&u.key;if(c){let g=new wi(Ut.comparator);g=g.insert(c,bt.newNoDocument(c,hn.min()));const S=f().add(c),x=new Jc(hn.min(),new Map,new wi(Fn),g,S);yield cg(o,x),o.Da=o.Da.remove(c),o.Ca.delete(e),Ef(o)}else yield Bl(o.localStore,e,!1).then(()=>dl(o,e,n)).catch(as)}),hg.apply(this,arguments)}function E_(i,e){return I_.apply(this,arguments)}function I_(){return I_=(0,h.Z)(function*(i,e){const n=_t(i),o=e.batch.batchId;try{const u=yield function Qh(i,e){const n=_t(i);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",o=>{const u=e.batch.keys(),c=n.os.newChangeBuffer({trackRemovals:!0});return function(S,x,G,te){const ue=G.batch,Se=ue.keys();let qe=je.resolve();return Se.forEach(Nt=>{qe=qe.next(()=>te.getEntry(x,Nt)).next(zt=>{const jt=G.docVersions.get(Nt);en(null!==jt),zt.version.compareTo(jt)<0&&(ue.applyToRemoteDocument(zt,G),zt.isValidDocument()&&(zt.setReadTime(G.commitVersion),te.addEntry(zt)))})}),qe.next(()=>S.mutationQueue.removeMutationBatch(x,ue))}(n,o,e,c).next(()=>c.apply(o)).next(()=>n.mutationQueue.performConsistencyCheck(o)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(o,u,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(o,function(S){let x=f();for(let G=0;G<S.mutationResults.length;++G)S.mutationResults[G].transformResults.length>0&&(x=x.add(S.batch.mutations[G].key));return x}(e))).next(()=>n.localDocuments.getDocuments(o,u))})}(n.localStore,e);T_(n,o,null),yf(n,o),n.sharedClientState.updateMutationState(o,"acknowledged"),yield Uu(n,u)}catch(u){yield as(u)}}),I_.apply(this,arguments)}function lv(i,e,n){return w_.apply(this,arguments)}function w_(){return w_=(0,h.Z)(function*(i,e,n){const o=_t(i);try{const u=yield function(g,S){const x=_t(g);return x.persistence.runTransaction("Reject batch","readwrite-primary",G=>{let te;return x.mutationQueue.lookupMutationBatch(G,S).next(ue=>(en(null!==ue),te=ue.keys(),x.mutationQueue.removeMutationBatch(G,ue))).next(()=>x.mutationQueue.performConsistencyCheck(G)).next(()=>x.documentOverlayCache.removeOverlaysForBatchId(G,te,S)).next(()=>x.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(G,te)).next(()=>x.localDocuments.getDocuments(G,te))})}(o.localStore,e);T_(o,e,n),yf(o,e),o.sharedClientState.updateMutationState(e,"rejected",n),yield Uu(o,u)}catch(u){yield as(u)}}),w_.apply(this,arguments)}function _f(){return _f=(0,h.Z)(function*(i,e){const n=_t(i);Tu(n.remoteStore)||dt("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const o=yield function(g){const S=_t(g);return S.persistence.runTransaction("Get highest unacknowledged batch id","readonly",x=>S.mutationQueue.getHighestUnacknowledgedBatchId(x))}(n.localStore);if(-1===o)return void e.resolve();const u=n.Ma.get(o)||[];u.push(e),n.Ma.set(o,u)}catch(o){const u=da(o,"Initialization of waitForPendingWrites() operation failed");e.reject(u)}}),_f.apply(this,arguments)}function yf(i,e){(i.Ma.get(e)||[]).forEach(n=>{n.resolve()}),i.Ma.delete(e)}function T_(i,e,n){const o=_t(i);let u=o.Fa[o.currentUser.toKey()];if(u){const c=u.get(e);c&&(n?c.reject(n):c.resolve(),u=u.remove(e)),o.Fa[o.currentUser.toKey()]=u}}function dl(i,e,n=null){i.sharedClientState.removeLocalQueryTarget(e);for(const o of i.Sa.get(e))i.wa.delete(o),n&&i.ya.La(o,n);i.Sa.delete(e),i.isPrimaryClient&&i.va.Vr(e).forEach(o=>{i.va.containsKey(o)||fg(i,o)})}function fg(i,e){i.ba.delete(e.path.canonicalString());const n=i.Da.get(e);null!==n&&(ll(i.remoteStore,n),i.Da=i.Da.remove(e),i.Ca.delete(n),Ef(i))}function vf(i,e,n){for(const o of n)o instanceof sg?(i.va.addReference(o.key,e),cv(i,o)):o instanceof og?(dt("SyncEngine","Document no longer in limbo: "+o.key),i.va.removeReference(o.key,e),i.va.containsKey(o.key)||fg(i,o.key)):Rt()}function cv(i,e){const n=e.key,o=n.path.canonicalString();i.Da.get(n)||i.ba.has(o)||(dt("SyncEngine","New document in limbo: "+n),i.ba.add(o),Ef(i))}function Ef(i){for(;i.ba.size>0&&i.Da.size<i.maxConcurrentLimboResolutions;){const e=i.ba.values().next().value;i.ba.delete(e);const n=new Ut(qn.fromString(e)),o=i.xa.next();i.Ca.set(o,new m_(n)),i.Da=i.Da.insert(n,o),nf(i.remoteStore,new Nu(bo(ac(n.path)),o,"TargetPurposeLimboResolution",lo._e))}}function Uu(i,e,n){return or.apply(this,arguments)}function or(){return or=(0,h.Z)(function*(i,e,n){const o=_t(i),u=[],c=[],g=[];var S;o.wa.isEmpty()||(o.wa.forEach((S,x)=>{g.push(o.Na(x,e,n).then(G=>{if((G||n)&&o.isPrimaryClient&&o.sharedClientState.updateQueryState(x.targetId,G?.fromCache?"not-current":"current"),G){u.push(G);const te=Mp.Ki(x.targetId,G);c.push(te)}}))}),yield Promise.all(g),o.ya.u_(u),yield(S=(0,h.Z)(function*(G,te){const ue=_t(G);try{yield ue.persistence.runTransaction("notifyLocalViewChanges","readwrite",Se=>je.forEach(te,qe=>je.forEach(qe.qi,Nt=>ue.persistence.referenceDelegate.addReference(Se,qe.targetId,Nt)).next(()=>je.forEach(qe.Qi,Nt=>ue.persistence.referenceDelegate.removeReference(Se,qe.targetId,Nt)))))}catch(Se){if(!Ei(Se))throw Se;dt("LocalStore","Failed to update sequence numbers: "+Se)}for(const Se of te){const qe=Se.targetId;if(!Se.fromCache){const Nt=ue.ns.get(qe),jt=Nt.withLastLimboFreeSnapshotVersion(Nt.snapshotVersion);ue.ns=ue.ns.insert(qe,jt)}}}),function x(G,te){return S.apply(this,arguments)})(o.localStore,c))}),or.apply(this,arguments)}function D_(i,e){return If.apply(this,arguments)}function If(){return If=(0,h.Z)(function*(i,e){const n=_t(i);if(!n.currentUser.isEqual(e)){dt("SyncEngine","User change. New user:",e.toKey());const o=yield Km(n.localStore,e);n.currentUser=e,(c=n).Ma.forEach(S=>{S.forEach(x=>{x.reject(new gt(Xe.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),c.Ma.clear(),n.sharedClientState.handleUserChange(e,o.removedBatchIds,o.addedBatchIds),yield Uu(n,o.us)}var c}),If.apply(this,arguments)}function gd(i,e){const n=_t(i),o=n.Ca.get(e);if(o&&o.pa)return f().add(o.key);{let u=f();const c=n.Sa.get(e);if(!c)return u;for(const g of c){const S=n.wa.get(g);u=u.unionWith(S.view.Ia)}return u}}function A_(i,e){return pg.apply(this,arguments)}function pg(){return pg=(0,h.Z)(function*(i,e){const n=_t(i),o=yield Yh(n.localStore,e.query,!0),u=e.view.fa(o);return n.isPrimaryClient&&vf(n,e.targetId,u.Va),u}),pg.apply(this,arguments)}function wf(i,e){return ql.apply(this,arguments)}function ql(){return ql=(0,h.Z)(function*(i,e){const n=_t(i);return Dc(n.localStore,e).then(o=>Uu(n,o))}),ql.apply(this,arguments)}function gg(i,e,n,o){return Rc.apply(this,arguments)}function Rc(){return Rc=(0,h.Z)(function*(i,e,n,o){const u=_t(i),c=yield function(S,x){const G=_t(S),te=_t(G.mutationQueue);return G.persistence.runTransaction("Lookup mutation documents","readonly",ue=>te.vn(ue,x).next(Se=>Se?G.localDocuments.getDocuments(ue,Se):je.resolve(null)))}(u.localStore,e);var x;null!==c?("pending"===n?yield pd(u.remoteStore):"acknowledged"===n||"rejected"===n?(T_(u,e,o||null),yf(u,e),x=e,_t(_t(u.localStore).mutationQueue).Mn(x)):Rt(),yield Uu(u,c)):dt("SyncEngine","Cannot apply mutation batch with id: "+e)}),Rc.apply(this,arguments)}function ah(){return ah=(0,h.Z)(function*(i,e){const n=_t(i);if(Af(n),vg(n),!0===e&&!0!==n.Oa){const o=n.sharedClientState.getAllActiveQueryTargets(),u=yield Tf(n,o.toArray());n.Oa=!0,yield Yp(n.remoteStore,!0);for(const c of u)nf(n.remoteStore,c)}else if(!1===e&&!1!==n.Oa){const o=[];let u=Promise.resolve();n.Sa.forEach((c,g)=>{n.sharedClientState.isLocalQueryTarget(g)?o.push(g):u=u.then(()=>(dl(n,g),Bl(n.localStore,g,!0))),ll(n.remoteStore,g)}),yield u,yield Tf(n,o),function(g){const S=_t(g);S.Ca.forEach((x,G)=>{ll(S.remoteStore,G)}),S.va.mr(),S.Ca=new Map,S.Da=new wi(Ut.comparator)}(n),n.Oa=!1,yield Yp(n.remoteStore,!1)}}),ah.apply(this,arguments)}function Tf(i,e,n){return uh.apply(this,arguments)}function uh(){return uh=(0,h.Z)(function*(i,e,n){const o=_t(i),u=[],c=[];for(const g of e){let S;const x=o.Sa.get(g);if(x&&0!==x.length){S=yield wu(o.localStore,bo(x[0]));for(const G of x){const te=o.wa.get(G),ue=yield A_(o,te);ue.snapshot&&c.push(ue.snapshot)}}else{const G=yield Fp(o.localStore,g);S=yield wu(o.localStore,G),yield ag(o,mg(G),g,!1,S.resumeToken)}u.push(S)}return o.ya.u_(c),u}),uh.apply(this,arguments)}function mg(i){return Xu(i.path,i.collectionGroup,i.orderBy,i.filters,i.limit,"F",i.startAt,i.endAt)}function _g(i){return n=_t(i).localStore,_t(_t(n).persistence).Bi();var n}function dv(i,e,n,o){return yg.apply(this,arguments)}function yg(){return yg=(0,h.Z)(function*(i,e,n,o){const u=_t(i);if(u.Oa)return void dt("SyncEngine","Ignoring unexpected query state notification.");const c=u.Sa.get(e);if(c&&c.length>0)switch(n){case"current":case"not-current":{const g=yield Dc(u.localStore,Nd(c[0])),S=Jc.createSynthesizedRemoteEventForCurrentChange(e,"current"===n,Ji.EMPTY_BYTE_STRING);yield Uu(u,g,S);break}case"rejected":yield Bl(u.localStore,e,!0),dl(u,e,o);break;default:Rt()}}),yg.apply(this,arguments)}function hv(i,e,n){return Df.apply(this,arguments)}function Df(){return Df=(0,h.Z)(function*(i,e,n){const o=Af(i);if(o.Oa){for(const u of e){if(o.Sa.has(u)&&o.sharedClientState.isActiveQueryTarget(u)){dt("SyncEngine","Adding an already active target "+u);continue}const c=yield Fp(o.localStore,u),g=yield wu(o.localStore,c);yield ag(o,mg(c),g.targetId,!1,g.resumeToken),nf(o.remoteStore,g)}for(const u of n)o.Sa.has(u)&&(yield Bl(o.localStore,u,!1).then(()=>{ll(o.remoteStore,u),dl(o,u)}).catch(as))}}),Df.apply(this,arguments)}function Af(i){const e=_t(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=cg.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=gd.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=uv.bind(null,e),e.ya.u_=Lu.bind(null,e.eventManager),e.ya.La=d_.bind(null,e.eventManager),e}function vg(i){const e=_t(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=E_.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=lv.bind(null,e),e}class lh{constructor(){this.synchronizeTabs=!1}initialize(e){var n=this;return(0,h.Z)(function*(){n.serializer=Cc(e.databaseInfo.databaseId),n.sharedClientState=n.createSharedClientState(e),n.persistence=n.createPersistence(e),yield n.persistence.start(),n.localStore=n.createLocalStore(e),n.gcScheduler=n.createGarbageCollectionScheduler(e,n.localStore),n.indexBackfillerScheduler=n.createIndexBackfillerScheduler(e,n.localStore)})()}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return Ul(this.persistence,new Op,e.initialUser,this.serializer)}createPersistence(e){return new Tc(qd.Hr,this.serializer)}createSharedClientState(e){return new Xd}terminate(){var e=this;return(0,h.Z)(function*(){var n,o;null===(n=e.gcScheduler)||void 0===n||n.stop(),null===(o=e.indexBackfillerScheduler)||void 0===o||o.stop(),e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Cf extends lh{constructor(e,n,o){super(),this.ka=e,this.cacheSizeBytes=n,this.forceOwnership=o,this.synchronizeTabs=!1}initialize(e){var n=()=>super.initialize,o=this;return(0,h.Z)(function*(){yield n().call(o,e),yield o.ka.initialize(o,e),yield vg(o.ka.syncEngine),yield pd(o.ka.remoteStore),yield o.persistence.fi(()=>(o.gcScheduler&&!o.gcScheduler.started&&o.gcScheduler.start(),o.indexBackfillerScheduler&&!o.indexBackfillerScheduler.started&&o.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return Ul(this.persistence,new Op,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,n){return new Gy(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,n)}createIndexBackfillerScheduler(e,n){const o=new Ku(n,this.persistence);return new cu(e.asyncQueue,o)}createPersistence(e){const n=Kd(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),o=void 0!==this.cacheSizeBytes?ca.withCacheSize(this.cacheSizeBytes):ca.DEFAULT;return new Zh(this.synchronizeTabs,n,e.clientId,o,e.asyncQueue,Ac(),ud(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new Xd}}class S_ extends Cf{constructor(e,n){super(e,n,!1),this.ka=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}initialize(e){var n=()=>super.initialize,o=this;return(0,h.Z)(function*(){yield n().call(o,e);const u=o.ka.syncEngine;o.sharedClientState instanceof Xm&&(o.sharedClientState.syncEngine={Zs:gg.bind(null,u),Xs:dv.bind(null,u),eo:hv.bind(null,u),Bi:_g.bind(null,u),Ys:wf.bind(null,u)},yield o.sharedClientState.start()),yield o.persistence.fi(function(){var c=(0,h.Z)(function*(g){yield function C_(i,e){return ah.apply(this,arguments)}(o.ka.syncEngine,g),o.gcScheduler&&(g&&!o.gcScheduler.started?o.gcScheduler.start():g||o.gcScheduler.stop()),o.indexBackfillerScheduler&&(g&&!o.indexBackfillerScheduler.started?o.indexBackfillerScheduler.start():g||o.indexBackfillerScheduler.stop())});return function(g){return c.apply(this,arguments)}}())})()}createSharedClientState(e){const n=Ac();if(!Xm.D(n))throw new gt(Xe.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const o=Kd(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Xm(n,e.asyncQueue,o,e.clientId,e.initialUser)}}class md{initialize(e,n){var o=this;return(0,h.Z)(function*(){o.localStore||(o.localStore=e.localStore,o.sharedClientState=e.sharedClientState,o.datastore=o.createDatastore(n),o.remoteStore=o.createRemoteStore(n),o.eventManager=o.createEventManager(n),o.syncEngine=o.createSyncEngine(n,!e.synchronizeTabs),o.sharedClientState.onlineStateHandler=u=>v_(o.syncEngine,u,1),o.remoteStore.remoteSyncer.handleCredentialChange=D_.bind(null,o.syncEngine),yield Yp(o.remoteStore,o.syncEngine.isPrimaryClient))})()}createEventManager(e){return new df}createDatastore(e){const n=Cc(e.databaseInfo.databaseId),o=new tf(e.databaseInfo);return new Jy(e.authCredentials,e.appCheckCredentials,o,n)}createRemoteStore(e){return o=this.localStore,u=this.datastore,c=e.asyncQueue,g=n=>v_(this.syncEngine,n,0),S=ef.D()?new ef:new Qy,new Wp(o,u,c,g,S);var o,u,c,g,S}createSyncEngine(e,n){return function(u,c,g,S,x,G,te){const ue=new ov(u,c,g,S,x,G);return te&&(ue.Oa=!0),ue}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){var e=this;return(0,h.Z)(function*(){var n,o;yield(o=(0,h.Z)(function*(c){const g=_t(c);dt("RemoteStore","RemoteStore shutting down."),g.v_.add(5),yield dd(g),g.M_.shutdown(),g.x_.set("Unknown")}),function u(c){return o.apply(this,arguments)})(e.remoteStore),null===(n=e.datastore)||void 0===n||n.terminate()})()}}function Sa(i,e=10240){let n=0;return{read:()=>(0,h.Z)(function*(){if(n<i.byteLength){const o={value:i.slice(n,n+e),done:!1};return n+=e,o}return{done:!0}})(),cancel:()=>(0,h.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class bf{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.qa(this.observer.next,e)}error(e){this.observer.error?this.qa(this.observer.error,e):$r("Uncaught Error in snapshot listener:",e.toString())}Qa(){this.muted=!0}qa(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}class pv{constructor(e,n){this.Ka=e,this.serializer=n,this.metadata=new qr,this.buffer=new Uint8Array,this.$a=new TextDecoder("utf-8"),this.Ua().then(o=>{o&&o.ra()?this.metadata.resolve(o.na.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(o?.na)}`))},o=>this.metadata.reject(o))}close(){return this.Ka.cancel()}getMetadata(){var e=this;return(0,h.Z)(function*(){return e.metadata.promise})()}Ba(){var e=this;return(0,h.Z)(function*(){return yield e.getMetadata(),e.Ua()})()}Ua(){var e=this;return(0,h.Z)(function*(){const n=yield e.Wa();if(null===n)return null;const o=e.$a.decode(n),u=Number(o);isNaN(u)&&e.Ga(`length string (${o}) is not valid number`);const c=yield e.za(u);return new ig(JSON.parse(c),n.length+u)})()}ja(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Wa(){var e=this;return(0,h.Z)(function*(){for(;e.ja()<0&&!(yield e.Ha()););if(0===e.buffer.length)return null;const n=e.ja();n<0&&e.Ga("Reached the end of bundle when a length string is expected.");const o=e.buffer.slice(0,n);return e.buffer=e.buffer.slice(n),o})()}za(e){var n=this;return(0,h.Z)(function*(){for(;n.buffer.length<e;)(yield n.Ha())&&n.Ga("Reached the end of bundle when more is expected.");const o=n.$a.decode(n.buffer.slice(0,e));return n.buffer=n.buffer.slice(e),o})()}Ga(e){throw this.Ka.cancel(),new Error(`Invalid bundle format: ${e}`)}Ha(){var e=this;return(0,h.Z)(function*(){const n=yield e.Ka.read();if(!n.done){const o=new Uint8Array(e.buffer.length+n.value.length);o.set(e.buffer),o.set(n.value,e.buffer.length),e.buffer=o}return n.done})()}}class KE{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){var n=this;return(0,h.Z)(function*(){if(n.ensureCommitNotCalled(),n.mutations.length>0)throw n.lastTransactionError=new gt(Xe.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),n.lastTransactionError;const o=yield(u=(0,h.Z)(function*(g,S){const x=_t(g),G={documents:S.map(qe=>td(x.serializer,qe))},te=yield x.vo("BatchGetDocuments",x.serializer.databaseId,qn.emptyPath(),G,S.length),ue=new Map;te.forEach(qe=>{const Nt=function Vy(i,e){return"found"in e?function(o,u){en(!!u.found);const c=eu(o,u.found.name),g=Ks(u.found.updateTime),S=u.found.createTime?Ks(u.found.createTime):hn.min(),x=new nn({mapValue:{fields:u.found.fields}});return bt.newFoundDocument(c,g,S,x)}(i,e):"missing"in e?function(o,u){en(!!u.missing),en(!!u.readTime);const c=eu(o,u.missing),g=Ks(u.readTime);return bt.newNoDocument(c,g)}(i,e):Rt()}(x.serializer,qe);ue.set(Nt.key.toString(),Nt)});const Se=[];return S.forEach(qe=>{const Nt=ue.get(qe.toString());en(!!Nt),Se.push(Nt)}),Se}),function c(g,S){return u.apply(this,arguments)})(n.datastore,e);var u;return o.forEach(u=>n.recordVersion(u)),o})()}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(o){this.lastTransactionError=o}this.writtenDocs.add(e.toString())}delete(e){this.write(new nl(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,h.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastTransactionError)throw e.lastTransactionError;const n=e.readVersions;var o;e.mutations.forEach(o=>{n.delete(o.key.toString())}),n.forEach((o,u)=>{const c=Ut.fromPath(u);e.mutations.push(new tp(c,e.precondition(c)))}),yield(o=(0,h.Z)(function*(c,g){const S=_t(c),x={writes:g.map(G=>Ml(S.serializer,G))};yield S.So("Commit",S.serializer.databaseId,qn.emptyPath(),x)}),function u(c,g){return o.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw Rt();n=hn.min()}const o=this.readVersions.get(e.key.toString());if(o){if(!n.isEqual(o))throw new gt(Xe.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(hn.min())?Xi.exists(!1):Xi.updateTime(n):Xi.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(hn.min()))throw new gt(Xe.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Xi.updateTime(n)}return Xi.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Eg{constructor(e,n,o,u,c){this.asyncQueue=e,this.datastore=n,this.options=o,this.updateFunction=u,this.deferred=c,this.Ja=o.maxAttempts,this.jo=new ld(this.asyncQueue,"transaction_retry")}Ya(){this.Ja-=1,this.Za()}Za(){var e=this;this.jo.qo((0,h.Z)(function*(){const n=new KE(e.datastore),o=e.Xa(n);o&&o.then(u=>{e.asyncQueue.enqueueAndForget(()=>n.commit().then(()=>{e.deferred.resolve(u)}).catch(c=>{e.eu(c)}))}).catch(u=>{e.eu(u)})}))}Xa(e){try{const n=this.updateFunction(e);return!du(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}eu(e){this.Ja>0&&this.tu(e)?(this.Ja-=1,this.asyncQueue.enqueueAndForget(()=>(this.Za(),Promise.resolve()))):this.deferred.reject(e)}tu(e){if("FirebaseError"===e.name){const n=e.code;return"aborted"===n||"failed-precondition"===n||"already-exists"===n||!sp(n)}return!1}}class R_{constructor(e,n,o,u){var c=this;this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=o,this.databaseInfo=u,this.user=pn.UNAUTHENTICATED,this.clientId=Hu.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(o,function(){var g=(0,h.Z)(function*(S){dt("FirestoreClient","Received user=",S.uid),yield c.authCredentialListener(S),c.user=S});return function(S){return g.apply(this,arguments)}}()),this.appCheckCredentials.start(o,g=>(dt("FirestoreClient","Received new app check token=",g),this.appCheckCredentialListener(g,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new gt(Xe.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const n=new qr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,h.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),n.resolve()}catch(o){const u=da(o,"Failed to shutdown persistence");n.reject(u)}})),n.promise}}function Sf(i,e){return Ig.apply(this,arguments)}function Ig(){return Ig=(0,h.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress(),dt("FirestoreClient","Initializing OfflineComponentProvider");const n=i.configuration;yield e.initialize(n);let o=n.initialUser;i.setCredentialChangeListener(function(){var u=(0,h.Z)(function*(c){o.isEqual(c)||(yield Km(e.localStore,c),o=c)});return function(c){return u.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i._offlineComponents=e}),Ig.apply(this,arguments)}function wg(i,e){return Rf.apply(this,arguments)}function Rf(){return Rf=(0,h.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress();const n=yield Tg(i);dt("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(n,i.configuration),i.setCredentialChangeListener(o=>c_(e.remoteStore,o)),i.setAppCheckTokenChangeListener((o,u)=>c_(e.remoteStore,u)),i._onlineComponents=e}),Rf.apply(this,arguments)}function P_(i){return"FirebaseError"===i.name?i.code===Xe.FAILED_PRECONDITION||i.code===Xe.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||22===i.code||20===i.code||11===i.code}function Tg(i){return ch.apply(this,arguments)}function ch(){return ch=(0,h.Z)(function*(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){dt("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Sf(i,i._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!P_(n))throw n;Jr("Error using user provided cache. Falling back to memory cache: "+n),yield Sf(i,new lh)}}else dt("FirestoreClient","Using default OfflineComponentProvider"),yield Sf(i,new lh);return i._offlineComponents}),ch.apply(this,arguments)}function Pf(i){return Dg.apply(this,arguments)}function Dg(){return Dg=(0,h.Z)(function*(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(dt("FirestoreClient","Using user provided OnlineComponentProvider"),yield wg(i,i._uninitializedComponentsProvider._online)):(dt("FirestoreClient","Using default OnlineComponentProvider"),yield wg(i,new md))),i._onlineComponents}),Dg.apply(this,arguments)}function M_(i){return Tg(i).then(e=>e.persistence)}function _d(i){return Tg(i).then(e=>e.localStore)}function N_(i){return Pf(i).then(e=>e.remoteStore)}function nu(i){return Pf(i).then(e=>e.syncEngine)}function yd(i){return Nf.apply(this,arguments)}function Nf(){return Nf=(0,h.Z)(function*(i){const e=yield Pf(i),n=e.eventManager;return n.onListen=av.bind(null,e.syncEngine),n.onUnlisten=y_.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=__.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=lg.bind(null,e.syncEngine),n}),Nf.apply(this,arguments)}function dh(i,e,n={}){const o=new qr;return i.asyncQueue.enqueueAndForget((0,h.Z)(function*(){return function(c,g,S,x,G){const te=new bf({next:Se=>{g.enqueueAndForget(()=>tg(c,ue));const qe=Se.docs.has(S);!qe&&Se.fromCache?G.reject(new gt(Xe.UNAVAILABLE,"Failed to get document because the client is offline.")):qe&&Se.fromCache&&x&&"server"===x.source?G.reject(new gt(Xe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):G.resolve(Se)},error:Se=>G.reject(Se)}),ue=new rg(ac(S.path),te,{includeMetadataChanges:!0,ta:!0});return Xp(c,ue)}(yield yd(i),i.asyncQueue,e,n,o)})),o.promise}function mv(i,e,n={}){const o=new qr;return i.asyncQueue.enqueueAndForget((0,h.Z)(function*(){return function(c,g,S,x,G){const te=new bf({next:Se=>{g.enqueueAndForget(()=>tg(c,ue)),Se.fromCache&&"server"===x.source?G.reject(new gt(Xe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):G.resolve(Se)},error:Se=>G.reject(Se)}),ue=new rg(S,te,{includeMetadataChanges:!0,ta:!0});return Xp(c,ue)}(yield yd(i),i.asyncQueue,e,n,o)})),o.promise}function U_(i){const e={};return void 0!==i.timeoutSeconds&&(e.timeoutSeconds=i.timeoutSeconds),e}const B_=new Map;function hh(i,e,n){if(!n)throw new gt(Xe.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function j_(i,e,n,o){if(!0===e&&!0===o)throw new gt(Xe.INVALID_ARGUMENT,`${i} and ${n} cannot be used together.`)}function bg(i){if(!Ut.isDocumentKey(i))throw new gt(Xe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function Sg(i){if(Ut.isDocumentKey(i))throw new gt(Xe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function Pc(i){if(void 0===i)return"undefined";if(null===i)return"null";if("string"==typeof i)return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if("number"==typeof i||"boolean"==typeof i)return""+i;if("object"==typeof i){if(i instanceof Array)return"an array";{const e=(o=i).constructor?o.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var o;return"function"==typeof i?"a function":Rt()}function Rr(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new gt(Xe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Pc(i);throw new gt(Xe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return i}function Rg(i,e){if(e<=0)throw new gt(Xe.INVALID_ARGUMENT,`Function ${i}() requires a positive number, but it was: ${e}.`)}class fh{constructor(e){var n,o;if(void 0===e.host){if(void 0!==e.ssl)throw new gt(Xe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(n=e.ssl)||void 0===n||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new gt(Xe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}j_("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=U_(null!==(o=e.experimentalLongPollingOptions)&&void 0!==o?o:{}),function(c){if(void 0!==c.timeoutSeconds){if(isNaN(c.timeoutSeconds))throw new gt(Xe.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (must not be NaN)`);if(c.timeoutSeconds<5)throw new gt(Xe.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (minimum allowed value is 5)`);if(c.timeoutSeconds>30)throw new gt(Xe.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Of{constructor(e,n,o,u){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=o,this._app=u,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new fh({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new gt(Xe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new gt(Xe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new fh(e),void 0!==e.credentials&&(this._authCredentials=function(o){if(!o)return new ec;switch(o.type){case"firstParty":return new $u(o.sessionIndex||"0",o.iamToken||null,o.authTokenFactory||null);case"provider":return o.client;default:throw new gt(Xe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const o=B_.get(n);o&&(dt("ComponentProvider","Removing Datastore"),B_.delete(n),o.terminate())}(this),Promise.resolve()}}function $_(i,e,n,o={}){var u;const c=(i=Rr(i,Of))._getSettings(),g=`${e}:${n}`;if("firestore.googleapis.com"!==c.host&&c.host!==g&&Jr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),i._setSettings(Object.assign(Object.assign({},c),{host:g,ssl:!1})),o.mockUserToken){let S,x;if("string"==typeof o.mockUserToken)S=o.mockUserToken,x=pn.MOCK_USER;else{S=(0,me.Sg)(o.mockUserToken,null===(u=i._app)||void 0===u?void 0:u.options.projectId);const G=o.mockUserToken.sub||o.mockUserToken.user_id;if(!G)throw new gt(Xe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");x=new pn(G)}i._authCredentials=new Rs(new wl(S,x))}}class Ko{constructor(e,n,o){this.converter=n,this._query=o,this.type="query",this.firestore=e}withConverter(e){return new Ko(this.firestore,e,this._query)}}class Bs{constructor(e,n,o){this.converter=n,this._key=o,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Bu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Bs(this.firestore,e,this._key)}}class Bu extends Ko{constructor(e,n,o){super(e,n,ac(o)),this._path=o,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Bs(this.firestore,null,new Ut(e))}withConverter(e){return new Bu(this.firestore,e,this._path)}}function _v(i,e,...n){if(i=(0,me.m9)(i),hh("collection","path",e),i instanceof Of){const o=qn.fromString(e,...n);return Sg(o),new Bu(i,null,o)}{if(!(i instanceof Bs||i instanceof Bu))throw new gt(Xe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=i._path.child(qn.fromString(e,...n));return Sg(o),new Bu(i.firestore,null,o)}}function H_(i,e){if(i=Rr(i,Of),hh("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new gt(Xe.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Ko(i,null,(o=e,new Ua(qn.emptyPath(),o)));var o}function Pg(i,e,...n){if(i=(0,me.m9)(i),1===arguments.length&&(e=Hu.newId()),hh("doc","path",e),i instanceof Of){const o=qn.fromString(e,...n);return bg(o),new Bs(i,null,new Ut(o))}{if(!(i instanceof Bs||i instanceof Bu))throw new gt(Xe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=i._path.child(qn.fromString(e,...n));return bg(o),new Bs(i.firestore,i instanceof Bu?i.converter:null,new Ut(o))}}function ph(i,e){return i=(0,me.m9)(i),e=(0,me.m9)(e),(i instanceof Bs||i instanceof Bu)&&(e instanceof Bs||e instanceof Bu)&&i.firestore===e.firestore&&i.path===e.path&&i.converter===e.converter}function Mg(i,e){return i=(0,me.m9)(i),e=(0,me.m9)(e),i instanceof Ko&&e instanceof Ko&&i.firestore===e.firestore&&yu(i._query,e._query)&&i.converter===e.converter}class z_{constructor(){this.nu=Promise.resolve(),this.ru=[],this.iu=!1,this.su=[],this.ou=null,this._u=!1,this.au=!1,this.uu=[],this.jo=new ld(this,"async_queue_retry"),this.cu=()=>{const n=ud();n&&dt("AsyncQueue","Visibility state changed to "+n.visibilityState),this.jo.Ko()};const e=ud();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.cu)}get isShuttingDown(){return this.iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.lu(),this.hu(e)}enterRestrictedMode(e){if(!this.iu){this.iu=!0,this.au=e||!1;const n=ud();n&&"function"==typeof n.removeEventListener&&n.removeEventListener("visibilitychange",this.cu)}}enqueue(e){if(this.lu(),this.iu)return new Promise(()=>{});const n=new qr;return this.hu(()=>this.iu&&this.au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.ru.push(e),this.Pu()))}Pu(){var e=this;return(0,h.Z)(function*(){if(0!==e.ru.length){try{yield e.ru[0](),e.ru.shift(),e.jo.reset()}catch(n){if(!Ei(n))throw n;dt("AsyncQueue","Operation failed with retryable error: "+n)}e.ru.length>0&&e.jo.qo(()=>e.Pu())}})()}hu(e){const n=this.nu.then(()=>(this._u=!0,e().catch(o=>{throw this.ou=o,this._u=!1,$r("INTERNAL UNHANDLED ERROR: ",function(g){let S=g.message||"";return g.stack&&(S=g.stack.includes(g.message)?g.stack:g.message+"\n"+g.stack),S}(o)),o}).then(o=>(this._u=!1,o))));return this.nu=n,n}enqueueAfterDelay(e,n,o){this.lu(),this.uu.indexOf(e)>-1&&(n=0);const u=cf.createAndSchedule(this,e,n,o,c=>this.Iu(c));return this.su.push(u),u}lu(){this.ou&&Rt()}verifyOperationInProgress(){}Tu(){var e=this;return(0,h.Z)(function*(){let n;do{n=e.nu,yield n}while(n!==e.nu)})()}Eu(e){for(const n of this.su)if(n.timerId===e)return!0;return!1}du(e){return this.Tu().then(()=>{this.su.sort((n,o)=>n.targetTimeMs-o.targetTimeMs);for(const n of this.su)if(n.skipDelay(),"all"!==e&&n.timerId===e)break;return this.Tu()})}Au(e){this.uu.push(e)}Iu(e){const n=this.su.indexOf(e);this.su.splice(n,1)}}function xf(i){return function(n,o){if("object"!=typeof n||null===n)return!1;const u=n;for(const c of["next","error","complete"])if(c in u&&"function"==typeof u[c])return!0;return!1}(i)}class yv{constructor(){this._progressObserver={},this._taskCompletionResolver=new qr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,o){this._progressObserver={next:e,error:n,complete:o}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}const vv=-1;class Mi extends Of{constructor(e,n,o,u){super(e,n,o,u),this.type="firestore",this._queue=new z_,this._persistenceKey=u?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||G_(this),this._firestoreClient.terminate()}}function Ev(i,e){const n="object"==typeof i?i:(0,W.getApp)(),o="string"==typeof i?i:e||"(default)",u=(0,W._getProvider)(n,"firestore").getImmediate({identifier:o});if(!u._initialized){const c=(0,me.P0)("firestore");c&&$_(u,...c)}return u}function Zs(i){return i._firestoreClient||G_(i),i._firestoreClient.verifyNotTerminated(),i._firestoreClient}function G_(i){var e,n,o;const u=i._freezeSettings(),c=(x=(null===(e=i._app)||void 0===e?void 0:e.options.appId)||"",new Md(i._databaseId,x,i._persistenceKey,(te=u).host,te.ssl,te.experimentalForceLongPolling,te.experimentalAutoDetectLongPolling,U_(te.experimentalLongPollingOptions),te.useFetchStreams));var x,te;i._firestoreClient=new R_(i._authCredentials,i._appCheckCredentials,i._queue,c),null!==(n=u.localCache)&&void 0!==n&&n._offlineComponentProvider&&null!==(o=u.localCache)&&void 0!==o&&o._onlineComponentProvider&&(i._firestoreClient._uninitializedComponentsProvider={_offlineKind:u.localCache.kind,_offline:u.localCache._offlineComponentProvider,_online:u.localCache._onlineComponentProvider})}function Iv(i,e){K_(i=Rr(i,Mi));const n=Zs(i);if(n._uninitializedComponentsProvider)throw new gt(Xe.FAILED_PRECONDITION,"SDK cache is already specified.");Jr("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const o=i._freezeSettings(),u=new md;return W_(n,u,new Cf(u,o.cacheSizeBytes,e?.forceOwnership))}function wv(i){K_(i=Rr(i,Mi));const e=Zs(i);if(e._uninitializedComponentsProvider)throw new gt(Xe.FAILED_PRECONDITION,"SDK cache is already specified.");Jr("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=i._freezeSettings(),o=new md;return W_(e,o,new S_(o,n.cacheSizeBytes))}function W_(i,e,n){const o=new qr;return i.asyncQueue.enqueue((0,h.Z)(function*(){try{yield Sf(i,n),yield wg(i,e),o.resolve()}catch(u){const c=u;if(!P_(c))throw c;Jr("Error enabling indexeddb cache. Falling back to memory cache: "+c),o.reject(c)}})).then(()=>o.promise)}function Tv(i){if(i._initialized&&!i._terminated)throw new gt(Xe.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new qr;return i._queue.enqueueAndForgetEvenWhileRestricted((0,h.Z)(function*(){try{yield(n=(0,h.Z)(function*(u){if(!ro.D())return Promise.resolve();const c=u+"main";yield ro.delete(c)}),function o(u){return n.apply(this,arguments)})(Kd(i._databaseId,i._persistenceKey)),e.resolve()}catch(n){e.reject(n)}var n})),e.promise}function q_(i){return function(n){const o=new qr;return n.asyncQueue.enqueueAndForget((0,h.Z)(function*(){return function qE(i,e){return _f.apply(this,arguments)}(yield nu(n),o)})),o.promise}(Zs(i=Rr(i,Mi)))}function Ng(i){return function gv(i){return i.asyncQueue.enqueue((0,h.Z)(function*(){const e=yield M_(i),n=yield N_(i);return e.setNetworkEnabled(!0),function(u){const c=_t(u);return c.v_.delete(0),cd(c)}(n)}))}(Zs(i=Rr(i,Mi)))}function Dv(i){return function O_(i){return i.asyncQueue.enqueue((0,h.Z)(function*(){const e=yield M_(i),n=yield N_(i);return e.setNetworkEnabled(!1),(o=(0,h.Z)(function*(c){const g=_t(c);g.v_.add(0),yield dd(g),g.x_.set("Offline")}),function u(c){return o.apply(this,arguments)})(n);var o}))}(Zs(i=Rr(i,Mi)))}function Av(i,e){const n=Zs(i=Rr(i,Mi)),o=new yv;return function F_(i,e,n,o){const u=function(g,S){let x;return x="string"==typeof g?_a().encode(g):g,te=function(te,ue){if(te instanceof Uint8Array)return Sa(te,void 0);if(te instanceof ArrayBuffer)return Sa(new Uint8Array(te),void 0);if(te instanceof ReadableStream)return te.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(x),new pv(te,S);var te}(n,Cc(e));i.asyncQueue.enqueueAndForget((0,h.Z)(function*(){!function fv(i,e,n){const o=_t(i);var u;(u=(0,h.Z)(function*(g,S,x){try{const G=yield S.getMetadata();if(yield function(Nt,zt){const jt=_t(Nt),An=Ks(zt.createTime);return jt.persistence.runTransaction("hasNewerBundle","readonly",fr=>jt.$r.getBundleMetadata(fr,zt.id)).then(fr=>!!fr&&fr.createTime.compareTo(An)>=0)}(g.localStore,G))return yield S.close(),x._completeWith({taskState:"Success",documentsLoaded:(Nt=G).totalDocuments,bytesLoaded:Nt.totalBytes,totalDocuments:Nt.totalDocuments,totalBytes:Nt.totalBytes}),Promise.resolve(new Set);x._updateProgress(hf(G));const te=new sv(G,g.localStore,S.serializer);let ue=yield S.Ba();for(;ue;){const qe=yield te.sa(ue);qe&&x._updateProgress(qe),ue=yield S.Ba()}const Se=yield te.complete();return yield Uu(g,Se.aa,void 0),yield function(Nt,zt){const jt=_t(Nt);return jt.persistence.runTransaction("Save bundle","readwrite",An=>jt.$r.saveBundleMetadata(An,zt))}(g.localStore,G),x._completeWith(Se.progress),Promise.resolve(Se._a)}catch(G){return Jr("SyncEngine",`Loading bundle failed with ${G}`),x._failWith(G),Promise.resolve(new Set)}var Nt}),function c(g,S,x){return u.apply(this,arguments)})(o,e,n).then(u=>{o.sharedClientState.notifyBundleLoaded(u)})}(yield nu(i),u,o)}))}(n,i._databaseId,e,o),o}function Cv(i,e){return function L_(i,e){return i.asyncQueue.enqueue((0,h.Z)(function*(){return function(o,u){const c=_t(o);return c.persistence.runTransaction("Get named query","readonly",g=>c.$r.getNamedQuery(g,u))}(yield _d(i),e)}))}(Zs(i=Rr(i,Mi)),e).then(n=>n?new Ko(i,null,n.query):null)}function K_(i){if(i._initialized||i._terminated)throw new gt(Xe.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Kl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Kl(Ji.fromBase64String(e))}catch(n){throw new gt(Xe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Kl(Ji.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Zl{constructor(...e){for(let n=0;n<e.length;++n)if(0===e[n].length)throw new gt(Xe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new pi(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Ql{constructor(e){this._methodName=e}}class kf{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new gt(Xe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new gt(Xe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Fn(this._lat,e._lat)||Fn(this._long,e._long)}}const QE=/^__.*__$/;class Z_{constructor(e,n,o){this.data=e,this.fieldMask=n,this.fieldTransforms=o}toMutation(e,n){return null!==this.fieldMask?new Mu(e,this.data,this.fieldMask,n,this.fieldTransforms):new Eu(e,this.data,n,this.fieldTransforms)}}class xg{constructor(e,n,o){this.data=e,this.fieldMask=n,this.fieldTransforms=o}toMutation(e,n){return new Mu(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Rv(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Rt()}}class Mc{constructor(e,n,o,u,c,g){this.settings=e,this.databaseId=n,this.serializer=o,this.ignoreUndefinedProperties=u,void 0===c&&this.Ru(),this.fieldTransforms=c||[],this.fieldMask=g||[]}get path(){return this.settings.path}get Vu(){return this.settings.Vu}mu(e){return new Mc(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}fu(e){var n;const o=null===(n=this.path)||void 0===n?void 0:n.child(e),u=this.mu({path:o,gu:!1});return u.pu(e),u}yu(e){var n;const o=null===(n=this.path)||void 0===n?void 0:n.child(e),u=this.mu({path:o,gu:!1});return u.Ru(),u}wu(e){return this.mu({path:void 0,gu:!0})}Su(e){return gl(e,this.settings.methodName,this.settings.bu||!1,this.path,this.settings.Du)}contains(e){return void 0!==this.fieldMask.find(n=>e.isPrefixOf(n))||void 0!==this.fieldTransforms.find(n=>e.isPrefixOf(n.field))}Ru(){if(this.path)for(let e=0;e<this.path.length;e++)this.pu(this.path.get(e))}pu(e){if(0===e.length)throw this.Su("Document fields must not be empty");if(Rv(this.Vu)&&QE.test(e))throw this.Su('Document fields cannot begin and end with "__"')}}class Pv{constructor(e,n,o){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=o||Cc(e)}Cu(e,n,o,u=!1){return new Mc({Vu:e,methodName:n,Du:o,path:pi.emptyPath(),gu:!1,bu:u},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Nc(i){const e=i._freezeSettings(),n=Cc(i._databaseId);return new Pv(i._databaseId,!!e.ignoreUndefinedProperties,n)}function vd(i,e,n,o,u,c={}){const g=i.Cu(c.merge||c.mergeFields?2:0,e,n,u);Yl("Data must be an object, but it was:",g,o);const S=kc(o,g);let x,G;if(c.merge)x=new $o(g.fieldMask),G=g.fieldTransforms;else if(c.mergeFields){const te=[];for(const ue of c.mergeFields){const Se=ju(e,ue,n);if(!g.contains(Se))throw new gt(Xe.INVALID_ARGUMENT,`Field '${Se}' is specified in your field mask but missing from your input data.`);kg(te,Se)||te.push(Se)}x=new $o(te),G=g.fieldTransforms.filter(ue=>x.covers(ue.field))}else x=null,G=g.fieldTransforms;return new Z_(new nn(S),x,G)}class mh extends Ql{_toFieldTransform(e){if(2!==e.Vu)throw e.Su(1===e.Vu?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof mh}}function Du(i,e,n){return new Mc({Vu:3,Du:e.settings.Du,methodName:i._methodName,gu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Oc extends Ql{_toFieldTransform(e){return new Rl(e.path,new hr)}isEqual(e){return e instanceof Oc}}class Zo extends Ql{constructor(e,n){super(e),this.vu=n}_toFieldTransform(e){const n=Du(this,e,!0),o=this.vu.map(c=>ru(c,n)),u=new so(o);return new Rl(e.path,u)}isEqual(e){return e instanceof Zo&&(0,me.vZ)(this.vu,e.vu)}}class fl extends Ql{constructor(e,n){super(e),this.vu=n}_toFieldTransform(e){const n=Du(this,e,!0),o=this.vu.map(c=>ru(c,n)),u=new Xa(o);return new Rl(e.path,u)}isEqual(e){return e instanceof fl&&(0,me.vZ)(this.vu,e.vu)}}class Ed extends Ql{constructor(e,n){super(e),this.Fu=n}_toFieldTransform(e){const n=new el(e.serializer,Pe(e.serializer,this.Fu));return new Rl(e.path,n)}isEqual(e){return e instanceof Ed&&this.Fu===e.Fu}}function Ra(i,e,n,o){const u=i.Cu(1,e,n);Yl("Data must be an object, but it was:",u,o);const c=[],g=nn.empty();To(o,(x,G)=>{const te=pl(e,x,n);G=(0,me.m9)(G);const ue=u.yu(te);if(G instanceof mh)c.push(te);else{const Se=ru(G,ue);null!=Se&&(c.push(te),g.set(te,Se))}});const S=new $o(c);return new xg(g,S,u.fieldTransforms)}function _h(i,e,n,o,u,c){const g=i.Cu(1,e,n),S=[ju(e,o,n)],x=[u];if(c.length%2!=0)throw new gt(Xe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let Se=0;Se<c.length;Se+=2)S.push(ju(e,c[Se])),x.push(c[Se+1]);const G=[],te=nn.empty();for(let Se=S.length-1;Se>=0;--Se)if(!kg(G,S[Se])){const qe=S[Se];let Nt=x[Se];Nt=(0,me.m9)(Nt);const zt=g.yu(qe);if(Nt instanceof mh)G.push(qe);else{const jt=ru(Nt,zt);null!=jt&&(G.push(qe),te.set(qe,jt))}}const ue=new $o(G);return new xg(te,ue,g.fieldTransforms)}function xc(i,e,n,o=!1){return ru(n,i.Cu(o?4:3,e))}function ru(i,e){if(Fc(i=(0,me.m9)(i)))return Yl("Unsupported field value:",e,i),kc(i,e);if(i instanceof Ql)return function(o,u){if(!Rv(u.Vu))throw u.Su(`${o._methodName}() can only be used with update() and set()`);if(!u.path)throw u.Su(`${o._methodName}() is not currently supported inside arrays`);const c=o._toFieldTransform(u);c&&u.fieldTransforms.push(c)}(i,e),null;if(void 0===i&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.gu&&4!==e.Vu)throw e.Su("Nested arrays are not supported");return function(o,u){const c=[];let g=0;for(const S of o){let x=ru(S,u.wu(g));null==x&&(x={nullValue:"NULL_VALUE"}),c.push(x),g++}return{arrayValue:{values:c}}}(i,e)}return function(o,u){if(null===(o=(0,me.m9)(o)))return{nullValue:"NULL_VALUE"};if("number"==typeof o)return Pe(u.serializer,o);if("boolean"==typeof o)return{booleanValue:o};if("string"==typeof o)return{stringValue:o};if(o instanceof Date){const c=Qt.fromDate(o);return{timestampValue:ed(u.serializer,c)}}if(o instanceof Qt){const c=new Qt(o.seconds,1e3*Math.floor(o.nanoseconds/1e3));return{timestampValue:ed(u.serializer,c)}}if(o instanceof kf)return{geoPointValue:{latitude:o.latitude,longitude:o.longitude}};if(o instanceof Kl)return{bytesValue:gm(u.serializer,o._byteString)};if(o instanceof Bs){const c=u.databaseId,g=o.firestore._databaseId;if(!g.isEqual(c))throw u.Su(`Document reference is for database ${g.projectId}/${g.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:Fh(o.firestore._databaseId||u.databaseId,o._key.path)}}throw u.Su(`Unsupported field value: ${Pc(o)}`)}(i,e)}function kc(i,e){const n={};return Su(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):To(i,(o,u)=>{const c=ru(u,e.fu(o));null!=c&&(n[o]=c)}),{mapValue:{fields:n}}}function Fc(i){return!("object"!=typeof i||null===i||i instanceof Array||i instanceof Date||i instanceof Qt||i instanceof kf||i instanceof Kl||i instanceof Bs||i instanceof Ql)}function Yl(i,e,n){if(!Fc(n)||"object"!=typeof(u=n)||null===u||Object.getPrototypeOf(u)!==Object.prototype&&null!==Object.getPrototypeOf(u)){const o=Pc(n);throw e.Su("an object"===o?i+" a custom object":i+" "+o)}var u}function ju(i,e,n){if((e=(0,me.m9)(e))instanceof Zl)return e._internalPath;if("string"==typeof e)return pl(i,e);throw gl("Field path arguments must be of type string or ",i,!1,void 0,n)}const Id=new RegExp("[~\\*/\\[\\]]");function pl(i,e,n){if(e.search(Id)>=0)throw gl(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,n);try{return new Zl(...e.split("."))._internalPath}catch{throw gl(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,n)}}function gl(i,e,n,o,u){const c=o&&!o.isEmpty(),g=void 0!==u;let S=`Function ${e}() called with invalid data`;n&&(S+=" (via `toFirestore()`)"),S+=". ";let x="";return(c||g)&&(x+=" (found",c&&(x+=` in field ${o}`),g&&(x+=` in document ${u}`),x+=")"),new gt(Xe.INVALID_ARGUMENT,S+i+x)}function kg(i,e){return i.some(n=>n.isEqual(e))}class wd{constructor(e,n,o,u,c){this._firestore=e,this._userDataWriter=n,this._key=o,this._document=u,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new Bs(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Q_(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(yh("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n)}}}class Q_ extends wd{data(){return super.data()}}function yh(i,e){return"string"==typeof e?pl(i,e):e instanceof Zl?e._internalPath:e._delegate._internalPath}function Fg(i){if("L"===i.limitType&&0===i.explicitOrderBy.length)throw new gt(Xe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ff{}class Td extends Ff{}function Y_(i,e,...n){let o=[];e instanceof Ff&&o.push(e),o=o.concat(n),function(c){const g=c.filter(x=>x instanceof Ad).length,S=c.filter(x=>x instanceof Dd).length;if(g>1||g>0&&S>0)throw new gt(Xe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(o);for(const u of o)i=u._apply(i);return i}class Dd extends Td{constructor(e,n,o){super(),this._field=e,this._op=n,this._value=o,this.type="where"}static _create(e,n,o){return new Dd(e,n,o)}_apply(e){const n=this._parse(e);return $g(e._query,n),new Ko(e.firestore,e.converter,Gc(e._query,n))}_parse(e){const n=Nc(e.firestore);return function(c,g,S,x,G,te,ue){let Se;if(G.isKeyField()){if("array-contains"===te||"array-contains-any"===te)throw new gt(Xe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${te}' queries on documentId().`);if("in"===te||"not-in"===te){bd(ue,te);const qe=[];for(const Nt of ue)qe.push(jg(x,c,Nt));Se={arrayValue:{values:qe}}}else Se=jg(x,c,ue)}else"in"!==te&&"not-in"!==te&&"array-contains-any"!==te||bd(ue,te),Se=xc(S,"where",ue,"in"===te||"not-in"===te);return In.create(G,te,Se)}(e._query,0,n,e.firestore._databaseId,this._field,this._op,this._value)}}function Lg(i,e,n){const o=e,u=yh("where",i);return Dd._create(u,o,n)}class Ad extends Ff{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Ad(e,n)}_parse(e){const n=this._queryConstraints.map(o=>o._parse(e)).filter(o=>o.getFilters().length>0);return 1===n.length?n[0]:Jn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return 0===n.getFilters().length?e:(function(u,c){let g=u;const S=c.getFlattenedFilters();for(const x of S)$g(g,x),g=Gc(g,x)}(e._query,n),new Ko(e.firestore,e.converter,Gc(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Vg extends Td{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Vg(e,n)}_apply(e){const n=function(u,c,g){if(null!==u.startAt)throw new gt(Xe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==u.endAt)throw new gt(Xe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Yn(c,g)}(e._query,this._field,this._direction);return new Ko(e.firestore,e.converter,function(u,c){const g=u.explicitOrderBy.concat([c]);return new Ua(u.path,u.collectionGroup,g,u.filters.slice(),u.limit,u.limitType,u.startAt,u.endAt)}(e._query,n))}}function Mv(i,e="asc"){const n=e,o=yh("orderBy",i);return Vg._create(o,n)}class Ug extends Td{constructor(e,n,o){super(),this.type=e,this._limit=n,this._limitType=o}static _create(e,n,o){return new Ug(e,n,o)}_apply(e){return new Ko(e.firestore,e.converter,Wc(e._query,this._limit,this._limitType))}}function Nv(i){return Rg("limit",i),Ug._create("limit",i,"F")}function YE(i){return Rg("limitToLast",i),Ug._create("limitToLast",i,"L")}class Lf extends Td{constructor(e,n,o){super(),this.type=e,this._docOrFields=n,this._inclusive=o}static _create(e,n,o){return new Lf(e,n,o)}_apply(e){const n=Eh(e,this.type,this._docOrFields,this._inclusive);return new Ko(e.firestore,e.converter,(c=n,new Ua((u=e._query).path,u.collectionGroup,u.explicitOrderBy.slice(),u.filters.slice(),u.limit,u.limitType,c,u.endAt)));var u,c}}function Ov(...i){return Lf._create("startAt",i,!0)}function xv(...i){return Lf._create("startAfter",i,!1)}class Cd extends Td{constructor(e,n,o){super(),this.type=e,this._docOrFields=n,this._inclusive=o}static _create(e,n,o){return new Cd(e,n,o)}_apply(e){const n=Eh(e,this.type,this._docOrFields,this._inclusive);return new Ko(e.firestore,e.converter,(c=n,new Ua((u=e._query).path,u.collectionGroup,u.explicitOrderBy.slice(),u.filters.slice(),u.limit,u.limitType,u.startAt,c)));var u,c}}function vh(...i){return Cd._create("endBefore",i,!1)}function Bg(...i){return Cd._create("endAt",i,!0)}function Eh(i,e,n,o){if(n[0]=(0,me.m9)(n[0]),n[0]instanceof wd)return function(c,g,S,x,G){if(!x)throw new gt(Xe.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${S}().`);const te=[];for(const ue of bl(c))if(ue.field.isKeyField())te.push(d(g,x.key));else{const Se=x.data.field(ue.field);if(sc(Se))throw new gt(Xe.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+ue.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===Se){const qe=ue.field.canonicalString();throw new gt(Xe.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${qe}' (used as the orderBy) does not exist.`)}te.push(Se)}return new En(te,G)}(i._query,i.firestore._databaseId,e,n[0]._document,o);{const u=Nc(i.firestore);return function(g,S,x,G,te,ue){const Se=g.explicitOrderBy;if(te.length>Se.length)throw new gt(Xe.INVALID_ARGUMENT,`Too many arguments provided to ${G}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const qe=[];for(let Nt=0;Nt<te.length;Nt++){const zt=te[Nt];if(Se[Nt].field.isKeyField()){if("string"!=typeof zt)throw new gt(Xe.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${G}(), but got a ${typeof zt}`);if(!lc(g)&&-1!==zt.indexOf("/"))throw new gt(Xe.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${G}() must be a plain document ID, but '${zt}' contains a slash.`);const jt=g.path.child(qn.fromString(zt));if(!Ut.isDocumentKey(jt))throw new gt(Xe.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${G}() must result in a valid document path, but '${jt}' is not because it contains an odd number of segments.`);const An=new Ut(jt);qe.push(d(S,An))}else{const jt=xc(x,G,zt);qe.push(jt)}}return new En(qe,ue)}(i._query,i.firestore._databaseId,u,e,n,o)}}function jg(i,e,n){if("string"==typeof(n=(0,me.m9)(n))){if(""===n)throw new gt(Xe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!lc(e)&&-1!==n.indexOf("/"))throw new gt(Xe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const o=e.path.child(qn.fromString(n));if(!Ut.isDocumentKey(o))throw new gt(Xe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${o}' is not because it has an odd number of segments (${o.length}).`);return d(i,new Ut(o))}if(n instanceof Bs)return d(i,n._key);throw new gt(Xe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Pc(n)}.`)}function bd(i,e){if(!Array.isArray(i)||0===i.length)throw new gt(Xe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function $g(i,e){const n=function(u,c){for(const g of u)for(const S of g.getFlattenedFilters())if(c.indexOf(S.op)>=0)return S.op;return null}(i.filters,function(u){switch(u){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==n)throw new gt(Xe.INVALID_ARGUMENT,n===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class Lc{convertValue(e,n="none"){switch(aa(e)){case 0:return null;case 1:return e.booleanValue;case 2:return $i(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Do(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw Rt()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const o={};return To(e,(u,c)=>{o[u]=this.convertValue(c,n)}),o}convertGeoPoint(e){return new kf($i(e.latitude),$i(e.longitude))}convertArray(e,n){return(e.values||[]).map(o=>this.convertValue(o,n))}convertServerTimestamp(e,n){switch(n){case"previous":const o=Qa(e);return null==o?null:this.convertValue(o,n);case"estimate":return this.convertTimestamp(ka(e));default:return null}}convertTimestamp(e){const n=Ho(e);return new Qt(n.seconds,n.nanos)}convertDocumentKey(e,n){const o=qn.fromString(e);en(mp(o));const u=new Is(o.get(1),o.get(3)),c=new Ut(o.popFirst(5));return u.isEqual(n)||$r(`Document ${c} contains a document reference within a different database (${u.projectId}/${u.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),c}}function Vf(i,e,n){let o;return o=i?n&&(n.merge||n.mergeFields)?i.toFirestore(e,n):i.toFirestore(e):e,o}class kv extends Lc{constructor(e){super(),this.firestore=e}convertBytes(e){return new Kl(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Bs(this.firestore,null,n)}}class Sd{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Vc extends wd{constructor(e,n,o,u,c,g){super(e,n,o,u,g),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Ih(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const o=this._document.data.field(yh("DocumentSnapshot.get",e));if(null!==o)return this._userDataWriter.convertValue(o,n.serverTimestamps)}}}class Ih extends Vc{data(e={}){return super.data(e)}}class ml{constructor(e,n,o,u){this._firestore=e,this._userDataWriter=n,this._snapshot=u,this.metadata=new Sd(u.hasPendingWrites,u.fromCache),this.query=o}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,n){this._snapshot.docs.forEach(o=>{e.call(n,new Ih(this._firestore,this._userDataWriter,o.key,o,new Sd(this._snapshot.mutatedKeys.has(o.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new gt(Xe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(u,c){if(u._snapshot.oldDocs.isEmpty()){let g=0;return u._snapshot.docChanges.map(S=>({type:"added",doc:new Ih(u._firestore,u._userDataWriter,S.doc.key,S.doc,new Sd(u._snapshot.mutatedKeys.has(S.doc.key),u._snapshot.fromCache),u.query.converter),oldIndex:-1,newIndex:g++}))}{let g=u._snapshot.oldDocs;return u._snapshot.docChanges.filter(S=>c||3!==S.type).map(S=>{const x=new Ih(u._firestore,u._userDataWriter,S.doc.key,S.doc,new Sd(u._snapshot.mutatedKeys.has(S.doc.key),u._snapshot.fromCache),u.query.converter);let G=-1,te=-1;return 0!==S.type&&(G=g.indexOf(S.doc.key),g=g.delete(S.doc.key)),1!==S.type&&(g=g.add(S.doc),te=g.indexOf(S.doc.key)),{type:Fv(S.type),doc:x,oldIndex:G,newIndex:te}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function Fv(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Rt()}}function X_(i,e){return i instanceof Vc&&e instanceof Vc?i._firestore===e._firestore&&i._key.isEqual(e._key)&&(null===i._document?null===e._document:i._document.isEqual(e._document))&&i._converter===e._converter:i instanceof ml&&e instanceof ml&&i._firestore===e._firestore&&Mg(i.query,e.query)&&i.metadata.isEqual(e.metadata)&&i._snapshot.isEqual(e._snapshot)}function Lv(i){i=Rr(i,Bs);const e=Rr(i.firestore,Mi);return dh(Zs(e),i._key).then(n=>wh(e,i,n))}class Jl extends Lc{constructor(e){super(),this.firestore=e}convertBytes(e){return new Kl(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Bs(this.firestore,null,n)}}function ey(i){i=Rr(i,Bs);const e=Rr(i.firestore,Mi),n=Zs(e),o=new Jl(e);return function x_(i,e){const n=new qr;return i.asyncQueue.enqueueAndForget((0,h.Z)(function*(){return(o=(0,h.Z)(function*(c,g,S){try{const x=yield function(te,ue){const Se=_t(te);return Se.persistence.runTransaction("read document","readonly",qe=>Se.localDocuments.getDocument(qe,ue))}(c,g);x.isFoundDocument()?S.resolve(x):x.isNoDocument()?S.resolve(null):S.reject(new gt(Xe.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(x){const G=da(x,`Failed to get document '${g} from cache`);S.reject(G)}}),function u(c,g,S){return o.apply(this,arguments)})(yield _d(i),e,n);var o})),n.promise}(n,i._key).then(u=>new Vc(e,o,i._key,u,new Sd(null!==u&&u.hasLocalMutations,!0),i.converter))}function ty(i){i=Rr(i,Bs);const e=Rr(i.firestore,Mi);return dh(Zs(e),i._key,{source:"server"}).then(n=>wh(e,i,n))}function ny(i){i=Rr(i,Ko);const e=Rr(i.firestore,Mi),n=Zs(e),o=new Jl(e);return Fg(i._query),mv(n,i._query).then(u=>new ml(e,o,i,u))}function Vv(i){i=Rr(i,Ko);const e=Rr(i.firestore,Mi),n=Zs(e),o=new Jl(e);return function Ag(i,e){const n=new qr;return i.asyncQueue.enqueueAndForget((0,h.Z)(function*(){return(o=(0,h.Z)(function*(c,g,S){try{const x=yield Yh(c,g,!0),G=new p_(g,x.hs),te=G.Ta(x.documents),ue=G.applyChanges(te,!1);S.resolve(ue.snapshot)}catch(x){const G=da(x,`Failed to execute query '${g} against cache`);S.reject(G)}}),function u(c,g,S){return o.apply(this,arguments)})(yield _d(i),e,n);var o})),n.promise}(n,i._query).then(u=>new ml(e,o,i,u))}function Uv(i){i=Rr(i,Ko);const e=Rr(i.firestore,Mi),n=Zs(e),o=new Jl(e);return mv(n,i._query,{source:"server"}).then(u=>new ml(e,o,i,u))}function Bv(i,e,n){i=Rr(i,Bs);const o=Rr(i.firestore,Mi),u=Vf(i.converter,e,n);return _l(o,[vd(Nc(o),"setDoc",i._key,u,null!==i.converter,n).toMutation(i._key,Xi.none())])}function ry(i,e,n,...o){i=Rr(i,Bs);const u=Rr(i.firestore,Mi),c=Nc(u);let g;return g="string"==typeof(e=(0,me.m9)(e))||e instanceof Zl?_h(c,"updateDoc",i._key,e,n,o):Ra(c,"updateDoc",i._key,e),_l(u,[g.toMutation(i._key,Xi.exists(!0))])}function Wg(i){return _l(Rr(i.firestore,Mi),[new nl(i._key,Xi.none())])}function qg(i,e){const n=Rr(i.firestore,Mi),o=Pg(i),u=Vf(i.converter,e);return _l(n,[vd(Nc(i.firestore),"addDoc",o._key,u,null!==i.converter,{}).toMutation(o._key,Xi.exists(!1))]).then(()=>o)}function jv(i,...e){var n,o,u;i=(0,me.m9)(i);let c={includeMetadataChanges:!1,source:"default"},g=0;"object"!=typeof e[g]||xf(e[g])||(c=e[g],g++);const S={includeMetadataChanges:c.includeMetadataChanges,source:c.source};if(xf(e[g])){const ue=e[g];e[g]=null===(n=ue.next)||void 0===n?void 0:n.bind(ue),e[g+1]=null===(o=ue.error)||void 0===o?void 0:o.bind(ue),e[g+2]=null===(u=ue.complete)||void 0===u?void 0:u.bind(ue)}let x,G,te;if(i instanceof Bs)G=Rr(i.firestore,Mi),te=ac(i._key.path),x={next:ue=>{e[g]&&e[g](wh(G,i,ue))},error:e[g+1],complete:e[g+2]};else{const ue=Rr(i,Ko);G=Rr(ue.firestore,Mi),te=ue._query;const Se=new Jl(G);x={next:qe=>{e[g]&&e[g](new ml(G,Se,ue,qe))},error:e[g+1],complete:e[g+2]},Fg(i._query)}return function(Se,qe,Nt,zt){const jt=new bf(zt),An=new rg(qe,jt,Nt);return Se.asyncQueue.enqueueAndForget((0,h.Z)(function*(){return Xp(yield yd(Se),An)})),()=>{jt.Qa(),Se.asyncQueue.enqueueAndForget((0,h.Z)(function*(){return tg(yield yd(Se),An)}))}}(Zs(G),te,S,x)}function Uf(i,e){return function k_(i,e){const n=new bf(e);return i.asyncQueue.enqueueAndForget((0,h.Z)(function*(){return u=yield yd(i),c=n,_t(u).W_.add(c),void c.next();var u,c})),()=>{n.Qa(),i.asyncQueue.enqueueAndForget((0,h.Z)(function*(){return u=yield yd(i),c=n,void _t(u).W_.delete(c);var u,c}))}}(Zs(i=Rr(i,Mi)),xf(e)?e:{next:e})}function _l(i,e){return function(o,u){const c=new qr;return o.asyncQueue.enqueueAndForget((0,h.Z)(function*(){return function gf(i,e,n){return mf.apply(this,arguments)}(yield nu(o),u,c)})),c.promise}(Zs(i),e)}function wh(i,e,n){const o=n.docs.get(e._key),u=new Jl(i);return new Vc(i,u,e._key,o,new Sd(n.hasPendingWrites,n.fromCache),e.converter)}const uy={maxAttempts:5};class ly{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Nc(e)}set(e,n,o){this._verifyNotCommitted();const u=yl(e,this._firestore),c=Vf(u.converter,n,o),g=vd(this._dataReader,"WriteBatch.set",u._key,c,null!==u.converter,o);return this._mutations.push(g.toMutation(u._key,Xi.none())),this}update(e,n,o,...u){this._verifyNotCommitted();const c=yl(e,this._firestore);let g;return g="string"==typeof(n=(0,me.m9)(n))||n instanceof Zl?_h(this._dataReader,"WriteBatch.update",c._key,n,o,u):Ra(this._dataReader,"WriteBatch.update",c._key,n),this._mutations.push(g.toMutation(c._key,Xi.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=yl(e,this._firestore);return this._mutations=this._mutations.concat(new nl(n._key,Xi.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new gt(Xe.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function yl(i,e){if((i=(0,me.m9)(i)).firestore!==e)throw new gt(Xe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}class cy extends class{constructor(n,o){this._firestore=n,this._transaction=o,this._dataReader=Nc(n)}get(n){const o=yl(n,this._firestore),u=new kv(this._firestore);return this._transaction.lookup([o._key]).then(c=>{if(!c||1!==c.length)return Rt();const g=c[0];if(g.isFoundDocument())return new wd(this._firestore,u,g.key,g,o.converter);if(g.isNoDocument())return new wd(this._firestore,u,o._key,null,o.converter);throw Rt()})}set(n,o,u){const c=yl(n,this._firestore),g=Vf(c.converter,o,u),S=vd(this._dataReader,"Transaction.set",c._key,g,null!==c.converter,u);return this._transaction.set(c._key,S),this}update(n,o,u,...c){const g=yl(n,this._firestore);let S;return S="string"==typeof(o=(0,me.m9)(o))||o instanceof Zl?_h(this._dataReader,"Transaction.update",g._key,o,u,c):Ra(this._dataReader,"Transaction.update",g._key,o),this._transaction.update(g._key,S),this}delete(n){const o=yl(n,this._firestore);return this._transaction.delete(o._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=yl(e,this._firestore),o=new Jl(this._firestore);return super.get(e).then(u=>new Vc(this._firestore,o,n._key,u._document,new Sd(!1,!1),n.converter))}}function dy(i,e,n){i=Rr(i,Mi);const o=Object.assign(Object.assign({},uy),n);return function(c){if(c.maxAttempts<1)throw new gt(Xe.INVALID_ARGUMENT,"Max attempts must be at least 1")}(o),function(c,g,S){const x=new qr;return c.asyncQueue.enqueueAndForget((0,h.Z)(function*(){const G=yield function Mf(i){return Pf(i).then(e=>e.datastore)}(c);new Eg(c.asyncQueue,G,S,g,x).Ya()})),x.promise}(Zs(i),u=>e(new cy(i,u)),o)}function hy(){return new mh("deleteField")}function qv(){return new Oc("serverTimestamp")}function fy(...i){return new Zo("arrayUnion",i)}function py(...i){return new fl("arrayRemove",i)}function Zg(i){return new Ed("increment",i)}!function(e,n=!0){Qr=W.SDK_VERSION,(0,W._registerComponent)(new K.wA("firestore",(o,{instanceIdentifier:u,options:c})=>{const g=o.getProvider("app").getImmediate(),S=new Mi(new Uo(o.getProvider("auth-internal")),new Yo(o.getProvider("app-check-internal")),function(G,te){if(!Object.prototype.hasOwnProperty.apply(G.options,["projectId"]))throw new gt(Xe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Is(G.options.projectId,te)}(g,u),g);return c=Object.assign({useFetchStreams:n},c),S._setSettings(c),S},"PUBLIC").setMultipleInstances(!0)),(0,W.registerVersion)(jr,"4.5.1",e),(0,W.registerVersion)(jr,"4.5.1","esm2017")}()},9058:(Ot,Le,U)=>{U.d(Le,{BH:()=>be,G6:()=>Ct,L:()=>De,LL:()=>rt,P0:()=>ut,Pz:()=>Be,Sg:()=>Ie,UG:()=>Oe,ZB:()=>pe,ZR:()=>Ge,aH:()=>ce,b$:()=>Gt,eu:()=>Me,hl:()=>Ae,jU:()=>et,m9:()=>ir,ne:()=>Kn,pd:()=>un,r3:()=>xt,ru:()=>ft,tV:()=>X,uI:()=>Te,vZ:()=>Vn,w1:()=>Pn,xO:()=>Yr,xb:()=>Sn,z$:()=>Je,zd:()=>Zt});const ve=function(Ee){const re=[];let z=0;for(let F=0;F<Ee.length;F++){let k=Ee.charCodeAt(F);k<128?re[z++]=k:k<2048?(re[z++]=k>>6|192,re[z++]=63&k|128):55296==(64512&k)&&F+1<Ee.length&&56320==(64512&Ee.charCodeAt(F+1))?(k=65536+((1023&k)<<10)+(1023&Ee.charCodeAt(++F)),re[z++]=k>>18|240,re[z++]=k>>12&63|128,re[z++]=k>>6&63|128,re[z++]=63&k|128):(re[z++]=k>>12|224,re[z++]=k>>6&63|128,re[z++]=63&k|128)}return re},we={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(Ee,re){if(!Array.isArray(Ee))throw Error("encodeByteArray takes an array as a parameter");this.init_();const z=re?this.byteToCharMapWebSafe_:this.byteToCharMap_,F=[];for(let k=0;k<Ee.length;k+=3){const oe=Ee[k],Ne=k+1<Ee.length,at=Ne?Ee[k+1]:0,vt=k+2<Ee.length,Ft=vt?Ee[k+2]:0;let Gn=(15&at)<<2|Ft>>6,dn=63&Ft;vt||(dn=64,Ne||(Gn=64)),F.push(z[oe>>2],z[(3&oe)<<4|at>>4],z[Gn],z[dn])}return F.join("")},encodeString(Ee,re){return this.HAS_NATIVE_SUPPORT&&!re?btoa(Ee):this.encodeByteArray(ve(Ee),re)},decodeString(Ee,re){return this.HAS_NATIVE_SUPPORT&&!re?atob(Ee):function(Ee){const re=[];let z=0,F=0;for(;z<Ee.length;){const k=Ee[z++];if(k<128)re[F++]=String.fromCharCode(k);else if(k>191&&k<224){const oe=Ee[z++];re[F++]=String.fromCharCode((31&k)<<6|63&oe)}else if(k>239&&k<365){const vt=((7&k)<<18|(63&Ee[z++])<<12|(63&Ee[z++])<<6|63&Ee[z++])-65536;re[F++]=String.fromCharCode(55296+(vt>>10)),re[F++]=String.fromCharCode(56320+(1023&vt))}else{const oe=Ee[z++],Ne=Ee[z++];re[F++]=String.fromCharCode((15&k)<<12|(63&oe)<<6|63&Ne)}}return re.join("")}(this.decodeStringToByteArray(Ee,re))},decodeStringToByteArray(Ee,re){this.init_();const z=re?this.charToByteMapWebSafe_:this.charToByteMap_,F=[];for(let k=0;k<Ee.length;){const oe=z[Ee.charAt(k++)],at=k<Ee.length?z[Ee.charAt(k)]:0;++k;const Ft=k<Ee.length?z[Ee.charAt(k)]:64;++k;const Kt=k<Ee.length?z[Ee.charAt(k)]:64;if(++k,null==oe||null==at||null==Ft||null==Kt)throw new Ce;F.push(oe<<2|at>>4),64!==Ft&&(F.push(at<<4&240|Ft>>2),64!==Kt&&F.push(Ft<<6&192|Kt))}return F},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let Ee=0;Ee<this.ENCODED_VALS.length;Ee++)this.byteToCharMap_[Ee]=this.ENCODED_VALS.charAt(Ee),this.charToByteMap_[this.byteToCharMap_[Ee]]=Ee,this.byteToCharMapWebSafe_[Ee]=this.ENCODED_VALS_WEBSAFE.charAt(Ee),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[Ee]]=Ee,Ee>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(Ee)]=Ee,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(Ee)]=Ee)}}};class Ce extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const De=function(Ee){return function(Ee){const re=ve(Ee);return we.encodeByteArray(re,!0)}(Ee).replace(/\./g,"")},X=function(Ee){try{return we.decodeString(Ee,!0)}catch(re){console.error("base64Decode failed: ",re)}return null};function pe(Ee,re){if(!(re instanceof Object))return re;switch(re.constructor){case Date:return new Date(re.getTime());case Object:void 0===Ee&&(Ee={});break;case Array:Ee=[];break;default:return re}for(const z in re)!re.hasOwnProperty(z)||!ze(z)||(Ee[z]=pe(Ee[z],re[z]));return Ee}function ze(Ee){return"__proto__"!==Ee}const nt=()=>{try{return function Ve(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const Ee=process.env.__FIREBASE_DEFAULTS__;return Ee?JSON.parse(Ee):void 0})()||(()=>{if(typeof document>"u")return;let Ee;try{Ee=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const re=Ee&&X(Ee[1]);return re&&JSON.parse(re)})()}catch(Ee){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${Ee}`)}},ut=Ee=>{const re=(Ee=>{var re,z;return null===(z=null===(re=nt())||void 0===re?void 0:re.emulatorHosts)||void 0===z?void 0:z[Ee]})(Ee);if(!re)return;const z=re.lastIndexOf(":");if(z<=0||z+1===re.length)throw new Error(`Invalid host ${re} with no separate hostname and port!`);const F=parseInt(re.substring(z+1),10);return"["===re[0]?[re.substring(1,z-1),F]:[re.substring(0,z),F]},ce=()=>{var Ee;return null===(Ee=nt())||void 0===Ee?void 0:Ee.config},Be=Ee=>{var re;return null===(re=nt())||void 0===re?void 0:re[`_${Ee}`]};class be{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((re,z)=>{this.resolve=re,this.reject=z})}wrapCallback(re){return(z,F)=>{z?this.reject(z):this.resolve(F),"function"==typeof re&&(this.promise.catch(()=>{}),1===re.length?re(z):re(z,F))}}}function Ie(Ee,re){if(Ee.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const F=re||"demo-project",k=Ee.iat||0,oe=Ee.sub||Ee.user_id;if(!oe)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Ne=Object.assign({iss:`https://securetoken.google.com/${F}`,aud:F,iat:k,exp:k+3600,auth_time:k,sub:oe,user_id:oe,firebase:{sign_in_provider:"custom",identities:{}}},Ee);return[De(JSON.stringify({alg:"none",type:"JWT"})),De(JSON.stringify(Ne)),""].join(".")}function Je(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Te(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Je())}function Oe(){var Ee;const re=null===(Ee=nt())||void 0===Ee?void 0:Ee.forceEnvironment;if("node"===re)return!0;if("browser"===re)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function et(){return"object"==typeof self&&self.self===self}function ft(){const Ee="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof Ee&&void 0!==Ee.id}function Gt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Pn(){const Ee=Je();return Ee.indexOf("MSIE ")>=0||Ee.indexOf("Trident/")>=0}function Ct(){return!Oe()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ae(){try{return"object"==typeof indexedDB}catch{return!1}}function Me(){return new Promise((Ee,re)=>{try{let z=!0;const F="validate-browser-context-for-indexeddb-analytics-module",k=self.indexedDB.open(F);k.onsuccess=()=>{k.result.close(),z||self.indexedDB.deleteDatabase(F),Ee(!0)},k.onupgradeneeded=()=>{z=!1},k.onerror=()=>{var oe;re((null===(oe=k.error)||void 0===oe?void 0:oe.message)||"")}}catch(z){re(z)}})}class Ge extends Error{constructor(re,z,F){super(z),this.code=re,this.customData=F,this.name="FirebaseError",Object.setPrototypeOf(this,Ge.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,rt.prototype.create)}}class rt{constructor(re,z,F){this.service=re,this.serviceName=z,this.errors=F}create(re,...z){const F=z[0]||{},k=`${this.service}/${re}`,oe=this.errors[re],Ne=oe?function Et(Ee,re){return Ee.replace(It,(z,F)=>{const k=re[F];return null!=k?String(k):`<${F}?>`})}(oe,F):"Error";return new Ge(k,`${this.serviceName}: ${Ne} (${k}).`,F)}}const It=/\{\$([^}]+)}/g;function xt(Ee,re){return Object.prototype.hasOwnProperty.call(Ee,re)}function Sn(Ee){for(const re in Ee)if(Object.prototype.hasOwnProperty.call(Ee,re))return!1;return!0}function Vn(Ee,re){if(Ee===re)return!0;const z=Object.keys(Ee),F=Object.keys(re);for(const k of z){if(!F.includes(k))return!1;const oe=Ee[k],Ne=re[k];if(Zn(oe)&&Zn(Ne)){if(!Vn(oe,Ne))return!1}else if(oe!==Ne)return!1}for(const k of F)if(!z.includes(k))return!1;return!0}function Zn(Ee){return null!==Ee&&"object"==typeof Ee}function Yr(Ee){const re=[];for(const[z,F]of Object.entries(Ee))Array.isArray(F)?F.forEach(k=>{re.push(encodeURIComponent(z)+"="+encodeURIComponent(k))}):re.push(encodeURIComponent(z)+"="+encodeURIComponent(F));return re.length?"&"+re.join("&"):""}function Zt(Ee){const re={};return Ee.replace(/^\?/,"").split("&").forEach(F=>{if(F){const[k,oe]=F.split("=");re[decodeURIComponent(k)]=decodeURIComponent(oe)}}),re}function un(Ee){const re=Ee.indexOf("?");if(!re)return"";const z=Ee.indexOf("#",re);return Ee.substring(re,z>0?z:void 0)}function Kn(Ee,re){const z=new Fr(Ee,re);return z.subscribe.bind(z)}class Fr{constructor(re,z){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=z,this.task.then(()=>{re(this)}).catch(F=>{this.error(F)})}next(re){this.forEachObserver(z=>{z.next(re)})}error(re){this.forEachObserver(z=>{z.error(re)}),this.close(re)}complete(){this.forEachObserver(re=>{re.complete()}),this.close()}subscribe(re,z,F){let k;if(void 0===re&&void 0===z&&void 0===F)throw new Error("Missing Observer.");k=function Mn(Ee,re){if("object"!=typeof Ee||null===Ee)return!1;for(const z of re)if(z in Ee&&"function"==typeof Ee[z])return!0;return!1}(re,["next","error","complete"])?re:{next:re,error:z,complete:F},void 0===k.next&&(k.next=Cr),void 0===k.error&&(k.error=Cr),void 0===k.complete&&(k.complete=Cr);const oe=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?k.error(this.finalError):k.complete()}catch{}}),this.observers.push(k),oe}unsubscribeOne(re){void 0===this.observers||void 0===this.observers[re]||(delete this.observers[re],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(re){if(!this.finalized)for(let z=0;z<this.observers.length;z++)this.sendOne(z,re)}sendOne(re,z){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[re])try{z(this.observers[re])}catch(F){typeof console<"u"&&console.error&&console.error(F)}})}close(re){this.finalized||(this.finalized=!0,void 0!==re&&(this.finalError=re),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Cr(){}function ir(Ee){return Ee&&Ee._delegate?Ee._delegate:Ee}},7411:(Ot,Le,U)=>{U.d(Le,{T:()=>Ce});var h=U(5861),W=U(7142);class K extends Error{constructor(De){super(),this.code="",this.code=De,Error.captureStackTrace&&Error.captureStackTrace(this,K),this.name="dniDuplicadoError"}}var ve=U(5879),me=U(7213),we=U(4067);let Ce=(()=>{class ye{constructor(X,ie){this.autenticador=X,this.firestore=ie,this.usuarioActual=null}registro(X,ie){var pe=this;return(0,h.Z)(function*(){try{if(yield pe.firestore.verificarDNI(X.dni))throw new K("dni-duplicado");const Ve=yield pe.autenticador.createUserWithEmailAndPassword(X.email,ie);Ve.user?.sendEmailVerification();const ot=yield pe.obtenerInfoUsuario(Ve,X);return pe.firestore.agregarInformacionUsuario(ot),!1}catch(ze){return ze.code}})()}obtenerInfoUsuario(X,ie){var pe=this;return(0,h.Z)(function*(){switch(ie.tipo){case"Administrador":return{uid:X.user?.uid,email:X.user?.email,fechaRegistro:(new Date).toLocaleString(),nombre:ie.nombre,apellido:ie.apellido,dni:ie.dni,tipoUsuario:ie.tipo,edad:ie.edad,imagenUno:yield pe.firestore.agregarImagenUsuario("1",ie)};case"Paciente":return{uid:X.user?.uid,email:X.user?.email,fechaRegistro:(new Date).toLocaleString(),nombre:ie.nombre,apellido:ie.apellido,dni:ie.dni,tipoUsuario:ie.tipo,edad:ie.edad,obraSocial:ie.obraSocial,imagenUno:yield pe.firestore.agregarImagenUsuario("1",ie),imagenDos:yield pe.firestore.agregarImagenUsuario("2",ie)};default:return{uid:X.user?.uid,email:X.user?.email,fechaRegistro:(new Date).toLocaleString(),nombre:ie.nombre,apellido:ie.apellido,dni:ie.dni,tipoUsuario:ie.tipo,edad:ie.edad,especialidad:ie.especialidad,estaActivo:ie.estaActiva,imagenUno:yield pe.firestore.agregarImagenUsuario("1",ie)}}})()}login(X,ie){var pe=this;return(0,h.Z)(function*(){try{return yield pe.autenticador.signInWithEmailAndPassword(X,ie)}catch(ze){return ze.code}})()}loginConGoogle(X,ie){var pe=this;return(0,h.Z)(function*(){try{return yield pe.autenticador.signInWithPopup(new W.Z.auth.GoogleAuthProvider)}catch(ze){return console.log("Error en google con google",ze),!1}})()}obtenerUsuarioLogueado(){return this.autenticador.authState}cerrarSesion(){return this.autenticador.signOut()}reeviarEmail(){null!=this.usuarioActual&&this.usuarioActual?.sendEmailVerification()}static#e=this.\u0275fac=function(ie){return new(ie||ye)(ve.LFG(me.zQ),ve.LFG(we.C))};static#t=this.\u0275prov=ve.Yz7({token:ye,factory:ye.\u0275fac,providedIn:"root"})}return ye})()},4067:(Ot,Le,U)=>{U.d(Le,{C:()=>we});var h=U(5861),W=U(7350),K=U(5592),ve=U(5879),me=U(830);let we=(()=>{class Ce{constructor(De,X){this.firestore=De,this.firestorage=X,this.usuarios=(0,W.hJ)(this.firestore,"usuarios"),this.horarios=(0,W.hJ)(this.firestore,"horarios"),this.turnos=(0,W.hJ)(this.firestore,"turnos"),this.idAutoIncremental=(0,W.hJ)(this.firestore,"idAutoIncremental")}agregarInformacionUsuario(De){try{return(0,W.ET)(this.usuarios,De)}catch(X){return console.log(X.code),null}}agregarHorarios(De){try{return(0,W.ET)(this.horarios,De)}catch(X){return console.log(X.code),null}}incrementarId(De){var X=this;return(0,h.Z)(function*(){try{const ie=(0,W.IO)(X.idAutoIncremental,(0,W.ar)(De,">=",0));return(yield(0,W.PL)(ie)).forEach(function(){var ze=(0,h.Z)(function*(Ve){const ot=Ve.id,Qe=Ve.data();Qe[De]=Qe[De]+1,yield(0,W.r7)((0,W.JU)(X.firestore,"idAutoIncremental",ot),Qe)});return function(Ve){return ze.apply(this,arguments)}}()),!0}catch(ie){return console.log(ie.code),null}})()}obtenerId(De){var X=this;return(0,h.Z)(function*(){try{const ie=(0,W.IO)(X.idAutoIncremental,(0,W.ar)(De,">=",0)),pe=yield(0,W.PL)(ie);let ze=null;return pe.forEach(Ve=>{ze=Ve.data()[De]}),ze}catch(ie){return console.log(ie.code),null}})()}agregarTurno(De){var X=this;return(0,h.Z)(function*(){try{return yield X.incrementarId("idTurnos"),(0,W.ET)(X.turnos,De)}catch(ie){return console.log(ie.code),null}})()}editarHorarios(De,X){var ie=this;return(0,h.Z)(function*(){try{const pe=(0,W.IO)(ie.horarios,(0,W.ar)("uid","==",De));return(yield(0,W.PL)(pe)).forEach(function(){var Ve=(0,h.Z)(function*(ot){const Qe=ot.id;yield(0,W.r7)((0,W.JU)(ie.firestore,"horarios",Qe),{diasHorarios:X})});return function(ot){return Ve.apply(this,arguments)}}()),!0}catch(pe){return console.log(pe.code),null}})()}obtenerHorarioUsuario(De){var X=this;return(0,h.Z)(function*(){try{const ie=(0,W.IO)(X.horarios,(0,W.ar)("uid","==",De)),pe=yield(0,W.PL)(ie);let ze=null;return pe.forEach(Ve=>{ze=Ve.data()}),ze}catch(ie){return console.log(ie.code),null}})()}verificarDNI(De){var X=this;return(0,h.Z)(function*(){let ie=!1;const pe=(0,W.IO)(X.usuarios,(0,W.ar)("dni","==",De));return(yield(0,W.PL)(pe)).forEach(Ve=>{ie=!0}),ie})()}obtenerUsuariosEspecificos(De,X){var ie=this;return(0,h.Z)(function*(){try{const pe=(0,W.IO)(ie.usuarios,(0,W.ar)(De,"==",X)),ze=yield(0,W.PL)(pe);let Ve=[];return ze.forEach(ot=>{Ve.push(ot.data())}),0==Ve.length?null:Ve}catch(pe){return console.log(pe.code),null}})()}obtenerInfoUsuario(De){var X=this;return(0,h.Z)(function*(){try{const ie=(0,W.IO)(X.usuarios,(0,W.ar)("uid","==",De));return(yield(0,W.PL)(ie)).forEach(Ve=>(X.datosUsuarioActual=Ve.data(),!0)),!1}catch(ie){return console.log(ie.code),null}})()}actualizarEstadoEspecialista(De,X){var ie=this;return(0,h.Z)(function*(){try{const pe=(0,W.IO)(ie.usuarios,(0,W.ar)("uid","==",De));return(yield(0,W.PL)(pe)).forEach(function(){var Ve=(0,h.Z)(function*(ot){const Qe=ot.id;yield(0,W.r7)((0,W.JU)(ie.firestore,"usuarios",Qe),{estaActivo:X})});return function(ot){return Ve.apply(this,arguments)}}()),!0}catch(pe){return console.log(pe.code),null}})()}editarTurnos(De,X){var ie=this;return(0,h.Z)(function*(){try{const pe=(0,W.IO)(ie.turnos,(0,W.ar)("idTurno","==",De));return(yield(0,W.PL)(pe)).forEach(function(){var Ve=(0,h.Z)(function*(ot){const Qe=ot.id;yield(0,W.r7)((0,W.JU)(ie.firestore,"turnos",Qe),X)});return function(ot){return Ve.apply(this,arguments)}}()),!0}catch(pe){return console.log(pe.code),null}})()}agregarImagenUsuario(De,X){var ie=this;return(0,h.Z)(function*(){const pe="1"==De?X.imagenPerfilUno:X.imagenPerfilDos,ze=`imagenes-usuarios/foto-perfil-${De}-${X.dni}`;return(yield ie.firestorage.upload(ze,pe)).ref.getDownloadURL()})()}obtenerUsuarios(){return new K.y(De=>{(0,W.cf)(this.usuarios,X=>{const ie=[];X.docChanges().forEach(pe=>{const ze=pe.doc.data();ie.push(ze)}),De.next(ie)})})}obtenerUsuariosPorTipo(De){return new K.y(X=>{(0,W.cf)(this.usuarios,ie=>{const pe=[];ie.docChanges().forEach(ze=>{const Ve=ze.doc.data();Ve.tipoUsuario==De&&pe.push(Ve)}),X.next(pe)})})}obtenerTurnosPorUid(De,X){return new K.y(ie=>{(0,W.cf)(this.turnos,pe=>{const ze=[];pe.docChanges().forEach(Ve=>{const ot=Ve.doc.data();("Especialista"==X&&ot.uidEspecialista==De||"Paciente"==X&&ot.uidPaciente==De)&&ze.push(ot)}),ie.next(ze)})})}obtenerTurnos(){return new K.y(De=>{(0,W.cf)(this.turnos,X=>{const ie=[];X.docChanges().forEach(pe=>{const ze=pe.doc.data();ie.push(ze)}),De.next(ie)})})}static#e=this.\u0275fac=function(X){return new(X||Ce)(ve.LFG(W.gg),ve.LFG(me.Q1))};static#t=this.\u0275prov=ve.Yz7({token:Ce,factory:Ce.\u0275fac,providedIn:"root"})}return Ce})()},553:(Ot,Le,U)=>{U.d(Le,{N:()=>h});const h={production:!1,recaptcha:{siteKey:"6Le-OPgpAAAAAIvmuLveGEzEGbxNouOhec4XQD-D"}}},510:(Ot,Le,U)=>{var h=U(6593),W=U(5879),K=U(6825);function me(N){return new W.vHH(3e3,!1)}function Et(N){switch(N.length){case 0:return new K.ZN;case 1:return N[0];default:return new K.ZE(N)}}function It(N,d,m=new Map,T=new Map){const V=[],Y=[];let le=-1,_e=null;if(d.forEach(Re=>{const it=Re.get("offset"),Tt=it==le,Pt=Tt&&_e||new Map;Re.forEach((Tn,nn)=>{let cn=nn,bt=Tn;if("offset"!==nn)switch(cn=N.normalizePropertyName(cn,V),bt){case K.k1:bt=m.get(nn);break;case K.l3:bt=T.get(nn);break;default:bt=N.normalizeStyleValue(nn,cn,bt,V)}Pt.set(cn,bt)}),Tt||Y.push(Pt),_e=Pt,le=it}),V.length)throw function ft(N){return new W.vHH(3502,!1)}();return Y}function $n(N,d,m,T){switch(d){case"start":N.onStart(()=>T(m&&$t(m,"start",N)));break;case"done":N.onDone(()=>T(m&&$t(m,"done",N)));break;case"destroy":N.onDestroy(()=>T(m&&$t(m,"destroy",N)))}}function $t(N,d,m){const Y=on(N.element,N.triggerName,N.fromState,N.toState,d||N.phaseName,m.totalTime??N.totalTime,!!m.disabled),le=N._data;return null!=le&&(Y._data=le),Y}function on(N,d,m,T,V="",Y=0,le){return{element:N,triggerName:d,fromState:m,toState:T,phaseName:V,totalTime:Y,disabled:!!le}}function Wt(N,d,m){let T=N.get(d);return T||N.set(d,T=m),T}function ar(N){const d=N.indexOf(":");return[N.substring(1,d),N.slice(d+1)]}const Hn=(()=>typeof document>"u"?null:document.documentElement)();function Ln(N){const d=N.parentNode||N.host||null;return d===Hn?null:d}let zn=null,Sn=!1;function xn(N,d){for(;d;){if(d===N)return!0;d=Ln(d)}return!1}function Yr(N,d,m){if(m)return Array.from(N.querySelectorAll(d));const T=N.querySelector(d);return T?[T]:[]}let un=(()=>{class N{validateStyleProperty(m){return function Ir(N){zn||(zn=function Zn(){return typeof document<"u"?document.body:null}()||{},Sn=!!zn.style&&"WebkitAppearance"in zn.style);let d=!0;return zn.style&&!function xt(N){return"ebkit"==N.substring(1,6)}(N)&&(d=N in zn.style,!d&&Sn&&(d="Webkit"+N.charAt(0).toUpperCase()+N.slice(1)in zn.style)),d}(m)}matchesElement(m,T){return!1}containsElement(m,T){return xn(m,T)}getParentElement(m){return Ln(m)}query(m,T,V){return Yr(m,T,V)}computeStyle(m,T,V){return V||""}animate(m,T,V,Y,le,_e=[],Re){return new K.ZN(V,Y)}static#e=this.\u0275fac=function(T){return new(T||N)};static#t=this.\u0275prov=W.Yz7({token:N,factory:N.\u0275fac})}return N})(),an=(()=>{class N{static#e=this.NOOP=new un}return N})();const Kn=1e3,Mn="ng-enter",Cr="ng-leave",ns="ng-trigger",Ht=".ng-trigger",Ri="ng-animating",Rn=".ng-animating";function qt(N){if("number"==typeof N)return N;const d=N.match(/^(-?[\.\d]+)(m?s)/);return!d||d.length<2?0:Xn(parseFloat(d[1]),d[2])}function Xn(N,d){return"s"===d?N*Kn:N}function br(N,d,m){return N.hasOwnProperty("duration")?N:function Un(N,d,m){let V,Y=0,le="";if("string"==typeof N){const _e=N.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===_e)return d.push(me()),{duration:0,delay:0,easing:""};V=Xn(parseFloat(_e[1]),_e[2]);const Re=_e[3];null!=Re&&(Y=Xn(parseFloat(Re),_e[4]));const it=_e[5];it&&(le=it)}else V=N;if(!m){let _e=!1,Re=d.length;V<0&&(d.push(function we(){return new W.vHH(3100,!1)}()),_e=!0),Y<0&&(d.push(function Ce(){return new W.vHH(3101,!1)}()),_e=!0),_e&&d.splice(Re,0,me())}return{duration:V,delay:Y,easing:le}}(N,d,m)}function Nn(N,d={}){return Object.keys(N).forEach(m=>{d[m]=N[m]}),d}function Ur(N){const d=new Map;return Object.keys(N).forEach(m=>{d.set(m,N[m])}),d}function Sr(N,d=new Map,m){if(m)for(let[T,V]of m)d.set(T,V);for(let[T,V]of N)d.set(T,V);return d}function gr(N,d,m){d.forEach((T,V)=>{const Y=Ne(V);m&&!m.has(V)&&m.set(V,N.style[Y]),N.style[Y]=T})}function Mr(N,d){d.forEach((m,T)=>{const V=Ne(T);N.style[V]=""})}function ir(N){return Array.isArray(N)?1==N.length?N[0]:(0,K.vP)(N):N}const re=new RegExp("{{\\s*(.+?)\\s*}}","g");function z(N){let d=[];if("string"==typeof N){let m;for(;m=re.exec(N);)d.push(m[1]);re.lastIndex=0}return d}function F(N,d,m){const T=N.toString(),V=T.replace(re,(Y,le)=>{let _e=d[le];return null==_e&&(m.push(function De(N){return new W.vHH(3003,!1)}()),_e=""),_e.toString()});return V==T?N:V}function k(N){const d=[];let m=N.next();for(;!m.done;)d.push(m.value),m=N.next();return d}const oe=/-+([a-z0-9])/g;function Ne(N){return N.replace(oe,(...d)=>d[1].toUpperCase())}function At(N,d,m){switch(d.type){case 7:return N.visitTrigger(d,m);case 0:return N.visitState(d,m);case 1:return N.visitTransition(d,m);case 2:return N.visitSequence(d,m);case 3:return N.visitGroup(d,m);case 4:return N.visitAnimate(d,m);case 5:return N.visitKeyframes(d,m);case 6:return N.visitStyle(d,m);case 8:return N.visitReference(d,m);case 9:return N.visitAnimateChild(d,m);case 10:return N.visitAnimateRef(d,m);case 11:return N.visitQuery(d,m);case 12:return N.visitStagger(d,m);default:throw function X(N){return new W.vHH(3004,!1)}()}}function Kt(N,d){return window.getComputedStyle(N)[d]}const Kr="*";function ur(N,d){const m=[];return"string"==typeof N?N.split(/\s*,\s*/).forEach(T=>function ri(N,d,m){if(":"==N[0]){const Re=function Fe(N,d){switch(N){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(m,T)=>parseFloat(T)>parseFloat(m);case":decrement":return(m,T)=>parseFloat(T)<parseFloat(m);default:return d.push(function Je(N){return new W.vHH(3016,!1)}()),"* => *"}}(N,m);if("function"==typeof Re)return void d.push(Re);N=Re}const T=N.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==T||T.length<4)return m.push(function Ie(N){return new W.vHH(3015,!1)}()),d;const V=T[1],Y=T[2],le=T[3];d.push(Dt(V,le));"<"==Y[0]&&!(V==Kr&&le==Kr)&&d.push(Dt(le,V))}(T,m,d)):m.push(N),m}const ke=new Set(["true","1"]),st=new Set(["false","0"]);function Dt(N,d){const m=ke.has(N)||st.has(N),T=ke.has(d)||st.has(d);return(V,Y)=>{let le=N==Kr||N==V,_e=d==Kr||d==Y;return!le&&m&&"boolean"==typeof V&&(le=V?ke.has(N):st.has(N)),!_e&&T&&"boolean"==typeof Y&&(_e=Y?ke.has(d):st.has(d)),le&&_e}}const tn=new RegExp("s*:selfs*,?","g");function yn(N,d,m,T){return new lr(N).build(d,m,T)}class lr{constructor(d){this._driver=d}build(d,m,T){const V=new Mo(m);return this._resetContextStyleTimingState(V),At(this,ir(d),V)}_resetContextStyleTimingState(d){d.currentQuerySelector="",d.collectedStyles=new Map,d.collectedStyles.set("",new Map),d.currentTime=0}visitTrigger(d,m){let T=m.queryCount=0,V=m.depCount=0;const Y=[],le=[];return"@"==d.name.charAt(0)&&m.errors.push(function pe(){return new W.vHH(3006,!1)}()),d.definitions.forEach(_e=>{if(this._resetContextStyleTimingState(m),0==_e.type){const Re=_e,it=Re.name;it.toString().split(/\s*,\s*/).forEach(Tt=>{Re.name=Tt,Y.push(this.visitState(Re,m))}),Re.name=it}else if(1==_e.type){const Re=this.visitTransition(_e,m);T+=Re.queryCount,V+=Re.depCount,le.push(Re)}else m.errors.push(function ze(){return new W.vHH(3007,!1)}())}),{type:7,name:d.name,states:Y,transitions:le,queryCount:T,depCount:V,options:null}}visitState(d,m){const T=this.visitStyle(d.styles,m),V=d.options&&d.options.params||null;if(T.containsDynamicStyles){const Y=new Set,le=V||{};T.styles.forEach(_e=>{_e instanceof Map&&_e.forEach(Re=>{z(Re).forEach(it=>{le.hasOwnProperty(it)||Y.add(it)})})}),Y.size&&(k(Y.values()),m.errors.push(function Ve(N,d){return new W.vHH(3008,!1)}()))}return{type:0,name:d.name,style:T,options:V?{params:V}:null}}visitTransition(d,m){m.queryCount=0,m.depCount=0;const T=At(this,ir(d.animation),m);return{type:1,matchers:ur(d.expr,m.errors),animation:T,queryCount:m.queryCount,depCount:m.depCount,options:Oi(d.options)}}visitSequence(d,m){return{type:2,steps:d.steps.map(T=>At(this,T,m)),options:Oi(d.options)}}visitGroup(d,m){const T=m.currentTime;let V=0;const Y=d.steps.map(le=>{m.currentTime=T;const _e=At(this,le,m);return V=Math.max(V,m.currentTime),_e});return m.currentTime=V,{type:3,steps:Y,options:Oi(d.options)}}visitAnimate(d,m){const T=function cs(N,d){if(N.hasOwnProperty("duration"))return N;if("number"==typeof N)return ds(br(N,d).duration,0,"");const m=N;if(m.split(/\s+/).some(Y=>"{"==Y.charAt(0)&&"{"==Y.charAt(1))){const Y=ds(0,0,"");return Y.dynamic=!0,Y.strValue=m,Y}const V=br(m,d);return ds(V.duration,V.delay,V.easing)}(d.timings,m.errors);m.currentAnimateTimings=T;let V,Y=d.styles?d.styles:(0,K.oB)({});if(5==Y.type)V=this.visitKeyframes(Y,m);else{let le=d.styles,_e=!1;if(!le){_e=!0;const it={};T.easing&&(it.easing=T.easing),le=(0,K.oB)(it)}m.currentTime+=T.duration+T.delay;const Re=this.visitStyle(le,m);Re.isEmptyStep=_e,V=Re}return m.currentAnimateTimings=null,{type:4,timings:T,style:V,options:null}}visitStyle(d,m){const T=this._makeStyleAst(d,m);return this._validateStyleAst(T,m),T}_makeStyleAst(d,m){const T=[],V=Array.isArray(d.styles)?d.styles:[d.styles];for(let _e of V)"string"==typeof _e?_e===K.l3?T.push(_e):m.errors.push(new W.vHH(3002,!1)):T.push(Ur(_e));let Y=!1,le=null;return T.forEach(_e=>{if(_e instanceof Map&&(_e.has("easing")&&(le=_e.get("easing"),_e.delete("easing")),!Y))for(let Re of _e.values())if(Re.toString().indexOf("{{")>=0){Y=!0;break}}),{type:6,styles:T,easing:le,offset:d.offset,containsDynamicStyles:Y,options:null}}_validateStyleAst(d,m){const T=m.currentAnimateTimings;let V=m.currentTime,Y=m.currentTime;T&&Y>0&&(Y-=T.duration+T.delay),d.styles.forEach(le=>{"string"!=typeof le&&le.forEach((_e,Re)=>{const it=m.collectedStyles.get(m.currentQuerySelector),Tt=it.get(Re);let Pt=!0;Tt&&(Y!=V&&Y>=Tt.startTime&&V<=Tt.endTime&&(m.errors.push(function mt(N,d,m,T,V){return new W.vHH(3010,!1)}()),Pt=!1),Y=Tt.startTime),Pt&&it.set(Re,{startTime:Y,endTime:V}),m.options&&function Ee(N,d,m){const T=d.params||{},V=z(N);V.length&&V.forEach(Y=>{T.hasOwnProperty(Y)||m.push(function ye(N){return new W.vHH(3001,!1)}())})}(_e,m.options,m.errors)})})}visitKeyframes(d,m){const T={type:5,styles:[],options:null};if(!m.currentAnimateTimings)return m.errors.push(function nt(){return new W.vHH(3011,!1)}()),T;let Y=0;const le=[];let _e=!1,Re=!1,it=0;const Tt=d.steps.map(kr=>{const ui=this._makeStyleAst(kr,m);let Yn=null!=ui.offset?ui.offset:function tr(N){if("string"==typeof N)return null;let d=null;if(Array.isArray(N))N.forEach(m=>{if(m instanceof Map&&m.has("offset")){const T=m;d=parseFloat(T.get("offset")),T.delete("offset")}});else if(N instanceof Map&&N.has("offset")){const m=N;d=parseFloat(m.get("offset")),m.delete("offset")}return d}(ui.styles),Ti=0;return null!=Yn&&(Y++,Ti=ui.offset=Yn),Re=Re||Ti<0||Ti>1,_e=_e||Ti<it,it=Ti,le.push(Ti),ui});Re&&m.errors.push(function Vt(){return new W.vHH(3012,!1)}()),_e&&m.errors.push(function ut(){return new W.vHH(3200,!1)}());const Pt=d.steps.length;let Tn=0;Y>0&&Y<Pt?m.errors.push(function ce(){return new W.vHH(3202,!1)}()):0==Y&&(Tn=1/(Pt-1));const nn=Pt-1,cn=m.currentTime,bt=m.currentAnimateTimings,En=bt.duration;return Tt.forEach((kr,ui)=>{const Yn=Tn>0?ui==nn?1:Tn*ui:le[ui],Ti=Yn*En;m.currentTime=cn+bt.delay+Ti,bt.duration=Ti,this._validateStyleAst(kr,m),kr.offset=Yn,T.styles.push(kr)}),T}visitReference(d,m){return{type:8,animation:At(this,ir(d.animation),m),options:Oi(d.options)}}visitAnimateChild(d,m){return m.depCount++,{type:9,options:Oi(d.options)}}visitAnimateRef(d,m){return{type:10,animation:this.visitReference(d.animation,m),options:Oi(d.options)}}visitQuery(d,m){const T=m.currentQuerySelector,V=d.options||{};m.queryCount++,m.currentQuery=d;const[Y,le]=function ii(N){const d=!!N.split(/\s*,\s*/).find(m=>":self"==m);return d&&(N=N.replace(tn,"")),N=N.replace(/@\*/g,Ht).replace(/@\w+/g,m=>Ht+"-"+m.slice(1)).replace(/:animating/g,Rn),[N,d]}(d.selector);m.currentQuerySelector=T.length?T+" "+Y:Y,Wt(m.collectedStyles,m.currentQuerySelector,new Map);const _e=At(this,ir(d.animation),m);return m.currentQuery=null,m.currentQuerySelector=T,{type:11,selector:Y,limit:V.limit||0,optional:!!V.optional,includeSelf:le,animation:_e,originalSelector:d.selector,options:Oi(d.options)}}visitStagger(d,m){m.currentQuery||m.errors.push(function Be(){return new W.vHH(3013,!1)}());const T="full"===d.timings?{duration:0,delay:0,easing:"full"}:br(d.timings,m.errors,!0);return{type:12,animation:At(this,ir(d.animation),m),timings:T,options:null}}}class Mo{constructor(d){this.errors=d,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function Oi(N){return N?(N=Nn(N)).params&&(N.params=function Ts(N){return N?Nn(N):null}(N.params)):N={},N}function ds(N,d,m){return{duration:N,delay:d,easing:m}}function Qs(N,d,m,T,V,Y,le=null,_e=!1){return{type:1,element:N,keyframes:d,preStyleProps:m,postStyleProps:T,duration:V,delay:Y,totalTime:V+Y,easing:le,subTimeline:_e}}class Ys{constructor(){this._map=new Map}get(d){return this._map.get(d)||[]}append(d,m){let T=this._map.get(d);T||this._map.set(d,T=[]),T.push(...m)}has(d){return this._map.has(d)}clear(){this._map.clear()}}const cr=new RegExp(":enter","g"),Js=new RegExp(":leave","g");function gi(N,d,m,T,V,Y=new Map,le=new Map,_e,Re,it=[]){return(new $s).buildKeyframes(N,d,m,T,V,Y,le,_e,Re,it)}class $s{buildKeyframes(d,m,T,V,Y,le,_e,Re,it,Tt=[]){it=it||new Ys;const Pt=new fs(d,m,it,V,Y,Tt,[]);Pt.options=Re;const Tn=Re.delay?qt(Re.delay):0;Pt.currentTimeline.delayNextStep(Tn),Pt.currentTimeline.setStyles([le],null,Pt.errors,Re),At(this,T,Pt);const nn=Pt.timelines.filter(cn=>cn.containsAnimation());if(nn.length&&_e.size){let cn;for(let bt=nn.length-1;bt>=0;bt--){const En=nn[bt];if(En.element===m){cn=En;break}}cn&&!cn.allowOnlyTimelineStyles()&&cn.setStyles([_e],null,Pt.errors,Re)}return nn.length?nn.map(cn=>cn.buildKeyframes()):[Qs(m,[],[],[],0,Tn,"",!1)]}visitTrigger(d,m){}visitState(d,m){}visitTransition(d,m){}visitAnimateChild(d,m){const T=m.subInstructions.get(m.element);if(T){const V=m.createSubContext(d.options),Y=m.currentTimeline.currentTime,le=this._visitSubInstructions(T,V,V.options);Y!=le&&m.transformIntoNewTimeline(le)}m.previousNode=d}visitAnimateRef(d,m){const T=m.createSubContext(d.options);T.transformIntoNewTimeline(),this._applyAnimationRefDelays([d.options,d.animation.options],m,T),this.visitReference(d.animation,T),m.transformIntoNewTimeline(T.currentTimeline.currentTime),m.previousNode=d}_applyAnimationRefDelays(d,m,T){for(const V of d){const Y=V?.delay;if(Y){const le="number"==typeof Y?Y:qt(F(Y,V?.params??{},m.errors));T.delayNextStep(le)}}}_visitSubInstructions(d,m,T){let Y=m.currentTimeline.currentTime;const le=null!=T.duration?qt(T.duration):null,_e=null!=T.delay?qt(T.delay):null;return 0!==le&&d.forEach(Re=>{const it=m.appendInstructionToTimeline(Re,le,_e);Y=Math.max(Y,it.duration+it.delay)}),Y}visitReference(d,m){m.updateOptions(d.options,!0),At(this,d.animation,m),m.previousNode=d}visitSequence(d,m){const T=m.subContextCount;let V=m;const Y=d.options;if(Y&&(Y.params||Y.delay)&&(V=m.createSubContext(Y),V.transformIntoNewTimeline(),null!=Y.delay)){6==V.previousNode.type&&(V.currentTimeline.snapshotCurrentStyles(),V.previousNode=hs);const le=qt(Y.delay);V.delayNextStep(le)}d.steps.length&&(d.steps.forEach(le=>At(this,le,V)),V.currentTimeline.applyStylesToKeyframe(),V.subContextCount>T&&V.transformIntoNewTimeline()),m.previousNode=d}visitGroup(d,m){const T=[];let V=m.currentTimeline.currentTime;const Y=d.options&&d.options.delay?qt(d.options.delay):0;d.steps.forEach(le=>{const _e=m.createSubContext(d.options);Y&&_e.delayNextStep(Y),At(this,le,_e),V=Math.max(V,_e.currentTimeline.currentTime),T.push(_e.currentTimeline)}),T.forEach(le=>m.currentTimeline.mergeTimelineCollectedStyles(le)),m.transformIntoNewTimeline(V),m.previousNode=d}_visitTiming(d,m){if(d.dynamic){const T=d.strValue;return br(m.params?F(T,m.params,m.errors):T,m.errors)}return{duration:d.duration,delay:d.delay,easing:d.easing}}visitAnimate(d,m){const T=m.currentAnimateTimings=this._visitTiming(d.timings,m),V=m.currentTimeline;T.delay&&(m.incrementTime(T.delay),V.snapshotCurrentStyles());const Y=d.style;5==Y.type?this.visitKeyframes(Y,m):(m.incrementTime(T.duration),this.visitStyle(Y,m),V.applyStylesToKeyframe()),m.currentAnimateTimings=null,m.previousNode=d}visitStyle(d,m){const T=m.currentTimeline,V=m.currentAnimateTimings;!V&&T.hasCurrentStyleProperties()&&T.forwardFrame();const Y=V&&V.easing||d.easing;d.isEmptyStep?T.applyEmptyStep(Y):T.setStyles(d.styles,Y,m.errors,m.options),m.previousNode=d}visitKeyframes(d,m){const T=m.currentAnimateTimings,V=m.currentTimeline.duration,Y=T.duration,_e=m.createSubContext().currentTimeline;_e.easing=T.easing,d.styles.forEach(Re=>{_e.forwardTime((Re.offset||0)*Y),_e.setStyles(Re.styles,Re.easing,m.errors,m.options),_e.applyStylesToKeyframe()}),m.currentTimeline.mergeTimelineCollectedStyles(_e),m.transformIntoNewTimeline(V+Y),m.previousNode=d}visitQuery(d,m){const T=m.currentTimeline.currentTime,V=d.options||{},Y=V.delay?qt(V.delay):0;Y&&(6===m.previousNode.type||0==T&&m.currentTimeline.hasCurrentStyleProperties())&&(m.currentTimeline.snapshotCurrentStyles(),m.previousNode=hs);let le=T;const _e=m.invokeQuery(d.selector,d.originalSelector,d.limit,d.includeSelf,!!V.optional,m.errors);m.currentQueryTotal=_e.length;let Re=null;_e.forEach((it,Tt)=>{m.currentQueryIndex=Tt;const Pt=m.createSubContext(d.options,it);Y&&Pt.delayNextStep(Y),it===m.element&&(Re=Pt.currentTimeline),At(this,d.animation,Pt),Pt.currentTimeline.applyStylesToKeyframe(),le=Math.max(le,Pt.currentTimeline.currentTime)}),m.currentQueryIndex=0,m.currentQueryTotal=0,m.transformIntoNewTimeline(le),Re&&(m.currentTimeline.mergeTimelineCollectedStyles(Re),m.currentTimeline.snapshotCurrentStyles()),m.previousNode=d}visitStagger(d,m){const T=m.parentContext,V=m.currentTimeline,Y=d.timings,le=Math.abs(Y.duration),_e=le*(m.currentQueryTotal-1);let Re=le*m.currentQueryIndex;switch(Y.duration<0?"reverse":Y.easing){case"reverse":Re=_e-Re;break;case"full":Re=T.currentStaggerTime}const Tt=m.currentTimeline;Re&&Tt.delayNextStep(Re);const Pt=Tt.currentTime;At(this,d.animation,m),m.previousNode=d,T.currentStaggerTime=V.currentTime-Pt+(V.startTime-T.currentTimeline.startTime)}}const hs={};class fs{constructor(d,m,T,V,Y,le,_e,Re){this._driver=d,this.element=m,this.subInstructions=T,this._enterClassName=V,this._leaveClassName=Y,this.errors=le,this.timelines=_e,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=hs,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=Re||new xi(this._driver,m,0),_e.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(d,m){if(!d)return;const T=d;let V=this.options;null!=T.duration&&(V.duration=qt(T.duration)),null!=T.delay&&(V.delay=qt(T.delay));const Y=T.params;if(Y){let le=V.params;le||(le=this.options.params={}),Object.keys(Y).forEach(_e=>{(!m||!le.hasOwnProperty(_e))&&(le[_e]=F(Y[_e],le,this.errors))})}}_copyOptions(){const d={};if(this.options){const m=this.options.params;if(m){const T=d.params={};Object.keys(m).forEach(V=>{T[V]=m[V]})}}return d}createSubContext(d=null,m,T){const V=m||this.element,Y=new fs(this._driver,V,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(V,T||0));return Y.previousNode=this.previousNode,Y.currentAnimateTimings=this.currentAnimateTimings,Y.options=this._copyOptions(),Y.updateOptions(d),Y.currentQueryIndex=this.currentQueryIndex,Y.currentQueryTotal=this.currentQueryTotal,Y.parentContext=this,this.subContextCount++,Y}transformIntoNewTimeline(d){return this.previousNode=hs,this.currentTimeline=this.currentTimeline.fork(this.element,d),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(d,m,T){const V={duration:m??d.duration,delay:this.currentTimeline.currentTime+(T??0)+d.delay,easing:""},Y=new Ds(this._driver,d.element,d.keyframes,d.preStyleProps,d.postStyleProps,V,d.stretchStartingKeyframe);return this.timelines.push(Y),V}incrementTime(d){this.currentTimeline.forwardTime(this.currentTimeline.duration+d)}delayNextStep(d){d>0&&this.currentTimeline.delayNextStep(d)}invokeQuery(d,m,T,V,Y,le){let _e=[];if(V&&_e.push(this.element),d.length>0){d=(d=d.replace(cr,"."+this._enterClassName)).replace(Js,"."+this._leaveClassName);let it=this._driver.query(this.element,d,1!=T);0!==T&&(it=T<0?it.slice(it.length+T,it.length):it.slice(0,T)),_e.push(...it)}return!Y&&0==_e.length&&le.push(function be(N){return new W.vHH(3014,!1)}()),_e}}class xi{constructor(d,m,T,V){this._driver=d,this.element=m,this.startTime=T,this._elementTimelineStylesLookup=V,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(m),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(m,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(d){const m=1===this._keyframes.size&&this._pendingStyles.size;this.duration||m?(this.forwardTime(this.currentTime+d),m&&this.snapshotCurrentStyles()):this.startTime+=d}fork(d,m){return this.applyStylesToKeyframe(),new xi(this._driver,d,m||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(d){this.applyStylesToKeyframe(),this.duration=d,this._loadKeyframe()}_updateStyle(d,m){this._localTimelineStyles.set(d,m),this._globalTimelineStyles.set(d,m),this._styleSummary.set(d,{time:this.currentTime,value:m})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(d){d&&this._previousKeyframe.set("easing",d);for(let[m,T]of this._globalTimelineStyles)this._backFill.set(m,T||K.l3),this._currentKeyframe.set(m,K.l3);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(d,m,T,V){m&&this._previousKeyframe.set("easing",m);const Y=V&&V.params||{},le=function mo(N,d){const m=new Map;let T;return N.forEach(V=>{if("*"===V){T=T||d.keys();for(let Y of T)m.set(Y,K.l3)}else Sr(V,m)}),m}(d,this._globalTimelineStyles);for(let[_e,Re]of le){const it=F(Re,Y,T);this._pendingStyles.set(_e,it),this._localTimelineStyles.has(_e)||this._backFill.set(_e,this._globalTimelineStyles.get(_e)??K.l3),this._updateStyle(_e,it)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((d,m)=>{this._currentKeyframe.set(m,d)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((d,m)=>{this._currentKeyframe.has(m)||this._currentKeyframe.set(m,d)}))}snapshotCurrentStyles(){for(let[d,m]of this._localTimelineStyles)this._pendingStyles.set(d,m),this._updateStyle(d,m)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const d=[];for(let m in this._currentKeyframe)d.push(m);return d}mergeTimelineCollectedStyles(d){d._styleSummary.forEach((m,T)=>{const V=this._styleSummary.get(T);(!V||m.time>V.time)&&this._updateStyle(T,m.value)})}buildKeyframes(){this.applyStylesToKeyframe();const d=new Set,m=new Set,T=1===this._keyframes.size&&0===this.duration;let V=[];this._keyframes.forEach((_e,Re)=>{const it=Sr(_e,new Map,this._backFill);it.forEach((Tt,Pt)=>{Tt===K.k1?d.add(Pt):Tt===K.l3&&m.add(Pt)}),T||it.set("offset",Re/this.duration),V.push(it)});const Y=d.size?k(d.values()):[],le=m.size?k(m.values()):[];if(T){const _e=V[0],Re=new Map(_e);_e.set("offset",0),Re.set("offset",1),V=[_e,Re]}return Qs(this.element,V,Y,le,this.duration,this.startTime,this.easing,!1)}}class Ds extends xi{constructor(d,m,T,V,Y,le,_e=!1){super(d,m,le.delay),this.keyframes=T,this.preStyleProps=V,this.postStyleProps=Y,this._stretchStartingKeyframe=_e,this.timings={duration:le.duration,delay:le.delay,easing:le.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let d=this.keyframes,{delay:m,duration:T,easing:V}=this.timings;if(this._stretchStartingKeyframe&&m){const Y=[],le=T+m,_e=m/le,Re=Sr(d[0]);Re.set("offset",0),Y.push(Re);const it=Sr(d[0]);it.set("offset",Jo(_e)),Y.push(it);const Tt=d.length-1;for(let Pt=1;Pt<=Tt;Pt++){let Tn=Sr(d[Pt]);const nn=Tn.get("offset");Tn.set("offset",Jo((m+nn*T)/le)),Y.push(Tn)}T=le,m=0,V="",d=Y}return Qs(this.element,d,this.preStyleProps,this.postStyleProps,T,m,V,!0)}}function Jo(N,d=3){const m=Math.pow(10,d-1);return Math.round(N*m)/m}class Hs{}const Os=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class _o extends Hs{normalizePropertyName(d,m){return Ne(d)}normalizeStyleValue(d,m,T,V){let Y="";const le=T.toString().trim();if(Os.has(m)&&0!==T&&"0"!==T)if("number"==typeof T)Y="px";else{const _e=T.match(/^[+-]?[\d\.]+([a-z]*)$/);_e&&0==_e[1].length&&V.push(function ie(N,d){return new W.vHH(3005,!1)}())}return le+Y}}function No(N,d,m,T,V,Y,le,_e,Re,it,Tt,Pt,Tn){return{type:0,element:N,triggerName:d,isRemovalTransition:V,fromState:m,fromStyles:Y,toState:T,toStyles:le,timelines:_e,queriedElements:Re,preStyleProps:it,postStyleProps:Tt,totalTime:Pt,errors:Tn}}const xs={};class zs{constructor(d,m,T){this._triggerName=d,this.ast=m,this._stateStyles=T}match(d,m,T,V){return function ki(N,d,m,T,V){return N.some(Y=>Y(d,m,T,V))}(this.ast.matchers,d,m,T,V)}buildStyles(d,m,T){let V=this._stateStyles.get("*");return void 0!==d&&(V=this._stateStyles.get(d?.toString())||V),V?V.buildStyles(m,T):new Map}build(d,m,T,V,Y,le,_e,Re,it,Tt){const Pt=[],Tn=this.ast.options&&this.ast.options.params||xs,cn=this.buildStyles(T,_e&&_e.params||xs,Pt),bt=Re&&Re.params||xs,En=this.buildStyles(V,bt,Pt),kr=new Set,ui=new Map,Yn=new Map,Ti="void"===V,Ms={params:Nr(bt,Tn),delay:this.ast.options?.delay},In=Tt?[]:gi(d,m,this.ast.animation,Y,le,cn,En,Ms,it,Pt);let Jn=0;if(In.forEach(la=>{Jn=Math.max(la.duration+la.delay,Jn)}),Pt.length)return No(m,this._triggerName,T,V,Ti,cn,En,[],[],ui,Yn,Jn,Pt);In.forEach(la=>{const ba=la.element,zc=Wt(ui,ba,new Set);la.preStyleProps.forEach(mu=>zc.add(mu));const gu=Wt(Yn,ba,new Set);la.postStyleProps.forEach(mu=>gu.add(mu)),ba!==m&&kr.add(ba)});const Ao=k(kr.values());return No(m,this._triggerName,T,V,Ti,cn,En,In,Ao,ui,Yn,Jn)}}function Nr(N,d){const m=Nn(d);for(const T in N)N.hasOwnProperty(T)&&null!=N[T]&&(m[T]=N[T]);return m}class mi{constructor(d,m,T){this.styles=d,this.defaultParams=m,this.normalizer=T}buildStyles(d,m){const T=new Map,V=Nn(this.defaultParams);return Object.keys(d).forEach(Y=>{const le=d[Y];null!==le&&(V[Y]=le)}),this.styles.styles.forEach(Y=>{"string"!=typeof Y&&Y.forEach((le,_e)=>{le&&(le=F(le,V,m));const Re=this.normalizer.normalizePropertyName(_e,m);le=this.normalizer.normalizeStyleValue(_e,Re,le,m),T.set(_e,le)})}),T}}class oo{constructor(d,m,T){this.name=d,this.ast=m,this._normalizer=T,this.transitionFactories=[],this.states=new Map,m.states.forEach(V=>{this.states.set(V.name,new mi(V.style,V.options&&V.options.params||{},T))}),Bn(this.states,"true","1"),Bn(this.states,"false","0"),m.transitions.forEach(V=>{this.transitionFactories.push(new zs(d,V,this.states))}),this.fallbackTransition=function Xs(N,d,m){return new zs(N,{type:1,animation:{type:2,steps:[],options:null},matchers:[(le,_e)=>!0],options:null,queryCount:0,depCount:0},d)}(d,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(d,m,T,V){return this.transitionFactories.find(le=>le.match(d,m,T,V))||null}matchStyles(d,m,T){return this.fallbackTransition.buildStyles(d,m,T)}}function Bn(N,d,m){N.has(d)?N.has(m)||N.set(m,N.get(d)):N.has(m)&&N.set(d,N.get(m))}const rs=new Ys;class ps{constructor(d,m,T){this.bodyNode=d,this._driver=m,this._normalizer=T,this._animations=new Map,this._playersById=new Map,this.players=[]}register(d,m){const T=[],Y=yn(this._driver,m,T,[]);if(T.length)throw function Gt(N){return new W.vHH(3503,!1)}();this._animations.set(d,Y)}_buildPlayer(d,m,T){const V=d.element,Y=It(this._normalizer,d.keyframes,m,T);return this._driver.animate(V,Y,d.duration,d.delay,d.easing,[],!0)}create(d,m,T={}){const V=[],Y=this._animations.get(d);let le;const _e=new Map;if(Y?(le=gi(this._driver,m,Y,Mn,Cr,new Map,new Map,T,rs,V),le.forEach(Tt=>{const Pt=Wt(_e,Tt.element,new Map);Tt.postStyleProps.forEach(Tn=>Pt.set(Tn,null))})):(V.push(function Jt(){return new W.vHH(3300,!1)}()),le=[]),V.length)throw function Pn(N){return new W.vHH(3504,!1)}();_e.forEach((Tt,Pt)=>{Tt.forEach((Tn,nn)=>{Tt.set(nn,this._driver.computeStyle(Pt,nn,K.l3))})});const it=Et(le.map(Tt=>{const Pt=_e.get(Tt.element);return this._buildPlayer(Tt,new Map,Pt)}));return this._playersById.set(d,it),it.onDestroy(()=>this.destroy(d)),this.players.push(it),it}destroy(d){const m=this._getPlayer(d);m.destroy(),this._playersById.delete(d);const T=this.players.indexOf(m);T>=0&&this.players.splice(T,1)}_getPlayer(d){const m=this._playersById.get(d);if(!m)throw function Mt(N){return new W.vHH(3301,!1)}();return m}listen(d,m,T,V){const Y=on(m,"","","");return $n(this._getPlayer(d),T,Y,V),()=>{}}command(d,m,T,V){if("register"==T)return void this.register(d,V[0]);if("create"==T)return void this.create(d,m,V[0]||{});const Y=this._getPlayer(d);switch(T){case"play":Y.play();break;case"pause":Y.pause();break;case"reset":Y.reset();break;case"restart":Y.restart();break;case"finish":Y.finish();break;case"init":Y.init();break;case"setPosition":Y.setPosition(parseFloat(V[0]));break;case"destroy":this.destroy(d)}}}const vr="ng-animate-queued",fn="ng-animate-disabled",di=[],Ki={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},er={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},hi="__ng_removed";class is{get params(){return this.options.params}constructor(d,m=""){this.namespaceId=m;const T=d&&d.hasOwnProperty("value");if(this.value=function mr(N){return N??null}(T?d.value:d),T){const Y=Nn(d);delete Y.value,this.options=Y}else this.options={};this.options.params||(this.options.params={})}absorbOptions(d){const m=d.params;if(m){const T=this.options.params;Object.keys(m).forEach(V=>{null==T[V]&&(T[V]=m[V])})}}}const mn="void",Ai=new is(mn);class ks{constructor(d,m,T){this.id=d,this.hostElement=m,this._engine=T,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+d,yi(m,this._hostClassName)}listen(d,m,T,V){if(!this._triggers.has(m))throw function kt(N,d){return new W.vHH(3302,!1)}();if(null==T||0==T.length)throw function Ct(N){return new W.vHH(3303,!1)}();if(!function _i(N){return"start"==N||"done"==N}(T))throw function Ae(N,d){return new W.vHH(3400,!1)}();const Y=Wt(this._elementListeners,d,[]),le={name:m,phase:T,callback:V};Y.push(le);const _e=Wt(this._engine.statesByElement,d,new Map);return _e.has(m)||(yi(d,ns),yi(d,ns+"-"+m),_e.set(m,Ai)),()=>{this._engine.afterFlush(()=>{const Re=Y.indexOf(le);Re>=0&&Y.splice(Re,1),this._triggers.has(m)||_e.delete(m)})}}register(d,m){return!this._triggers.has(d)&&(this._triggers.set(d,m),!0)}_getTrigger(d){const m=this._triggers.get(d);if(!m)throw function Me(N){return new W.vHH(3401,!1)}();return m}trigger(d,m,T,V=!0){const Y=this._getTrigger(m),le=new Lr(this.id,m,d);let _e=this._engine.statesByElement.get(d);_e||(yi(d,ns),yi(d,ns+"-"+m),this._engine.statesByElement.set(d,_e=new Map));let Re=_e.get(m);const it=new is(T,this.id);if(!(T&&T.hasOwnProperty("value"))&&Re&&it.absorbOptions(Re.options),_e.set(m,it),Re||(Re=Ai),it.value!==mn&&Re.value===it.value){if(!function eo(N,d){const m=Object.keys(N),T=Object.keys(d);if(m.length!=T.length)return!1;for(let V=0;V<m.length;V++){const Y=m[V];if(!d.hasOwnProperty(Y)||N[Y]!==d[Y])return!1}return!0}(Re.params,it.params)){const bt=[],En=Y.matchStyles(Re.value,Re.params,bt),kr=Y.matchStyles(it.value,it.params,bt);bt.length?this._engine.reportError(bt):this._engine.afterFlush(()=>{Mr(d,En),gr(d,kr)})}return}const Tn=Wt(this._engine.playersByElement,d,[]);Tn.forEach(bt=>{bt.namespaceId==this.id&&bt.triggerName==m&&bt.queued&&bt.destroy()});let nn=Y.matchTransition(Re.value,it.value,d,it.params),cn=!1;if(!nn){if(!V)return;nn=Y.fallbackTransition,cn=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:d,triggerName:m,transition:nn,fromState:Re,toState:it,player:le,isFallbackTransition:cn}),cn||(yi(d,vr),le.onStart(()=>{Gs(d,vr)})),le.onDone(()=>{let bt=this.players.indexOf(le);bt>=0&&this.players.splice(bt,1);const En=this._engine.playersByElement.get(d);if(En){let kr=En.indexOf(le);kr>=0&&En.splice(kr,1)}}),this.players.push(le),Tn.push(le),le}deregister(d){this._triggers.delete(d),this._engine.statesByElement.forEach(m=>m.delete(d)),this._elementListeners.forEach((m,T)=>{this._elementListeners.set(T,m.filter(V=>V.name!=d))})}clearElementCache(d){this._engine.statesByElement.delete(d),this._elementListeners.delete(d);const m=this._engine.playersByElement.get(d);m&&(m.forEach(T=>T.destroy()),this._engine.playersByElement.delete(d))}_signalRemovalForInnerTriggers(d,m){const T=this._engine.driver.query(d,Ht,!0);T.forEach(V=>{if(V[hi])return;const Y=this._engine.fetchNamespacesByElement(V);Y.size?Y.forEach(le=>le.triggerLeaveAnimation(V,m,!1,!0)):this.clearElementCache(V)}),this._engine.afterFlushAnimationsDone(()=>T.forEach(V=>this.clearElementCache(V)))}triggerLeaveAnimation(d,m,T,V){const Y=this._engine.statesByElement.get(d),le=new Map;if(Y){const _e=[];if(Y.forEach((Re,it)=>{if(le.set(it,Re.value),this._triggers.has(it)){const Tt=this.trigger(d,it,mn,V);Tt&&_e.push(Tt)}}),_e.length)return this._engine.markElementAsRemoved(this.id,d,!0,m,le),T&&Et(_e).onDone(()=>this._engine.processLeaveNode(d)),!0}return!1}prepareLeaveAnimationListeners(d){const m=this._elementListeners.get(d),T=this._engine.statesByElement.get(d);if(m&&T){const V=new Set;m.forEach(Y=>{const le=Y.name;if(V.has(le))return;V.add(le);const Re=this._triggers.get(le).fallbackTransition,it=T.get(le)||Ai,Tt=new is(mn),Pt=new Lr(this.id,le,d);this._engine.totalQueuedPlayers++,this._queue.push({element:d,triggerName:le,transition:Re,fromState:it,toState:Tt,player:Pt,isFallbackTransition:!0})})}}removeNode(d,m){const T=this._engine;if(d.childElementCount&&this._signalRemovalForInnerTriggers(d,m),this.triggerLeaveAnimation(d,m,!0))return;let V=!1;if(T.totalAnimations){const Y=T.players.length?T.playersByQueriedElement.get(d):[];if(Y&&Y.length)V=!0;else{let le=d;for(;le=le.parentNode;)if(T.statesByElement.get(le)){V=!0;break}}}if(this.prepareLeaveAnimationListeners(d),V)T.markElementAsRemoved(this.id,d,!1,m);else{const Y=d[hi];(!Y||Y===Ki)&&(T.afterFlush(()=>this.clearElementCache(d)),T.destroyInnerAnimations(d),T._onRemovalComplete(d,m))}}insertNode(d,m){yi(d,this._hostClassName)}drainQueuedTransitions(d){const m=[];return this._queue.forEach(T=>{const V=T.player;if(V.destroyed)return;const Y=T.element,le=this._elementListeners.get(Y);le&&le.forEach(_e=>{if(_e.name==T.triggerName){const Re=on(Y,T.triggerName,T.fromState.value,T.toState.value);Re._data=d,$n(T.player,_e.phase,Re,_e.callback)}}),V.markedForDestroy?this._engine.afterFlush(()=>{V.destroy()}):m.push(T)}),this._queue=[],m.sort((T,V)=>{const Y=T.transition.ast.depCount,le=V.transition.ast.depCount;return 0==Y||0==le?Y-le:this._engine.driver.containsElement(T.element,V.element)?1:-1})}destroy(d){this.players.forEach(m=>m.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,d)}}class zi{_onRemovalComplete(d,m){this.onRemovalComplete(d,m)}constructor(d,m,T){this.bodyNode=d,this.driver=m,this._normalizer=T,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(V,Y)=>{}}get queuedPlayers(){const d=[];return this._namespaceList.forEach(m=>{m.players.forEach(T=>{T.queued&&d.push(T)})}),d}createNamespace(d,m){const T=new ks(d,m,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,m)?this._balanceNamespaceList(T,m):(this.newHostElements.set(m,T),this.collectEnterElement(m)),this._namespaceLookup[d]=T}_balanceNamespaceList(d,m){const T=this._namespaceList,V=this.namespacesByHostElement;if(T.length-1>=0){let le=!1,_e=this.driver.getParentElement(m);for(;_e;){const Re=V.get(_e);if(Re){const it=T.indexOf(Re);T.splice(it+1,0,d),le=!0;break}_e=this.driver.getParentElement(_e)}le||T.unshift(d)}else T.push(d);return V.set(m,d),d}register(d,m){let T=this._namespaceLookup[d];return T||(T=this.createNamespace(d,m)),T}registerTrigger(d,m,T){let V=this._namespaceLookup[d];V&&V.register(m,T)&&this.totalAnimations++}destroy(d,m){d&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{const T=this._fetchNamespace(d);this.namespacesByHostElement.delete(T.hostElement);const V=this._namespaceList.indexOf(T);V>=0&&this._namespaceList.splice(V,1),T.destroy(m),delete this._namespaceLookup[d]}))}_fetchNamespace(d){return this._namespaceLookup[d]}fetchNamespacesByElement(d){const m=new Set,T=this.statesByElement.get(d);if(T)for(let V of T.values())if(V.namespaceId){const Y=this._fetchNamespace(V.namespaceId);Y&&m.add(Y)}return m}trigger(d,m,T,V){if(Or(m)){const Y=this._fetchNamespace(d);if(Y)return Y.trigger(m,T,V),!0}return!1}insertNode(d,m,T,V){if(!Or(m))return;const Y=m[hi];if(Y&&Y.setForRemoval){Y.setForRemoval=!1,Y.setForMove=!0;const le=this.collectedLeaveElements.indexOf(m);le>=0&&this.collectedLeaveElements.splice(le,1)}if(d){const le=this._fetchNamespace(d);le&&le.insertNode(m,T)}V&&this.collectEnterElement(m)}collectEnterElement(d){this.collectedEnterElements.push(d)}markElementAsDisabled(d,m){m?this.disabledNodes.has(d)||(this.disabledNodes.add(d),yi(d,fn)):this.disabledNodes.has(d)&&(this.disabledNodes.delete(d),Gs(d,fn))}removeNode(d,m,T){if(Or(m)){const V=d?this._fetchNamespace(d):null;V?V.removeNode(m,T):this.markElementAsRemoved(d,m,!1,T);const Y=this.namespacesByHostElement.get(m);Y&&Y.id!==d&&Y.removeNode(m,T)}else this._onRemovalComplete(m,T)}markElementAsRemoved(d,m,T,V,Y){this.collectedLeaveElements.push(m),m[hi]={namespaceId:d,setForRemoval:V,hasAnimation:T,removedBeforeQueried:!1,previousTriggersValues:Y}}listen(d,m,T,V,Y){return Or(m)?this._fetchNamespace(d).listen(m,T,V,Y):()=>{}}_buildInstruction(d,m,T,V,Y){return d.transition.build(this.driver,d.element,d.fromState.value,d.toState.value,T,V,d.fromState.options,d.toState.options,m,Y)}destroyInnerAnimations(d){let m=this.driver.query(d,Ht,!0);m.forEach(T=>this.destroyActiveAnimationsForElement(T)),0!=this.playersByQueriedElement.size&&(m=this.driver.query(d,Rn,!0),m.forEach(T=>this.finishActiveQueriedAnimationOnElement(T)))}destroyActiveAnimationsForElement(d){const m=this.playersByElement.get(d);m&&m.forEach(T=>{T.queued?T.markedForDestroy=!0:T.destroy()})}finishActiveQueriedAnimationOnElement(d){const m=this.playersByQueriedElement.get(d);m&&m.forEach(T=>T.finish())}whenRenderingDone(){return new Promise(d=>{if(this.players.length)return Et(this.players).onDone(()=>d());d()})}processLeaveNode(d){const m=d[hi];if(m&&m.setForRemoval){if(d[hi]=Ki,m.namespaceId){this.destroyInnerAnimations(d);const T=this._fetchNamespace(m.namespaceId);T&&T.clearElementCache(d)}this._onRemovalComplete(d,m.setForRemoval)}d.classList?.contains(fn)&&this.markElementAsDisabled(d,!1),this.driver.query(d,".ng-animate-disabled",!0).forEach(T=>{this.markElementAsDisabled(T,!1)})}flush(d=-1){let m=[];if(this.newHostElements.size&&(this.newHostElements.forEach((T,V)=>this._balanceNamespaceList(T,V)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let T=0;T<this.collectedEnterElements.length;T++)yi(this.collectedEnterElements[T],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const T=[];try{m=this._flushAnimations(T,d)}finally{for(let V=0;V<T.length;V++)T[V]()}}else for(let T=0;T<this.collectedLeaveElements.length;T++)this.processLeaveNode(this.collectedLeaveElements[T]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(T=>T()),this._flushFns=[],this._whenQuietFns.length){const T=this._whenQuietFns;this._whenQuietFns=[],m.length?Et(m).onDone(()=>{T.forEach(V=>V())}):T.forEach(V=>V())}}reportError(d){throw function He(N){return new W.vHH(3402,!1)}()}_flushAnimations(d,m){const T=new Ys,V=[],Y=new Map,le=[],_e=new Map,Re=new Map,it=new Map,Tt=new Set;this.disabledNodes.forEach(gn=>{Tt.add(gn);const Cn=this.driver.query(gn,".ng-animate-queued",!0);for(let rn=0;rn<Cn.length;rn++)Tt.add(Cn[rn])});const Pt=this.bodyNode,Tn=Array.from(this.statesByElement.keys()),nn=Fi(Tn,this.collectedEnterElements),cn=new Map;let bt=0;nn.forEach((gn,Cn)=>{const rn=Mn+bt++;cn.set(Cn,rn),gn.forEach(zr=>yi(zr,rn))});const En=[],kr=new Set,ui=new Set;for(let gn=0;gn<this.collectedLeaveElements.length;gn++){const Cn=this.collectedLeaveElements[gn],rn=Cn[hi];rn&&rn.setForRemoval&&(En.push(Cn),kr.add(Cn),rn.hasAnimation?this.driver.query(Cn,".ng-star-inserted",!0).forEach(zr=>kr.add(zr)):ui.add(Cn))}const Yn=new Map,Ti=Fi(Tn,Array.from(kr));Ti.forEach((gn,Cn)=>{const rn=Cr+bt++;Yn.set(Cn,rn),gn.forEach(zr=>yi(zr,rn))}),d.push(()=>{nn.forEach((gn,Cn)=>{const rn=cn.get(Cn);gn.forEach(zr=>Gs(zr,rn))}),Ti.forEach((gn,Cn)=>{const rn=Yn.get(Cn);gn.forEach(zr=>Gs(zr,rn))}),En.forEach(gn=>{this.processLeaveNode(gn)})});const Ms=[],In=[];for(let gn=this._namespaceList.length-1;gn>=0;gn--)this._namespaceList[gn].drainQueuedTransitions(m).forEach(rn=>{const zr=rn.player,us=rn.element;if(Ms.push(zr),this.collectedEnterElements.length){const Ns=us[hi];if(Ns&&Ns.setForMove){if(Ns.previousTriggersValues&&Ns.previousTriggersValues.has(rn.triggerName)){const Va=Ns.previousTriggersValues.get(rn.triggerName),co=this.statesByElement.get(rn.element);if(co&&co.has(rn.triggerName)){const Cl=co.get(rn.triggerName);Cl.value=Va,co.set(rn.triggerName,Cl)}}return void zr.destroy()}}const ga=!Pt||!this.driver.containsElement(Pt,us),Wi=Yn.get(us),Co=cn.get(us),qi=this._buildInstruction(rn,T,Co,Wi,ga);if(qi.errors&&qi.errors.length)return void In.push(qi);if(ga)return zr.onStart(()=>Mr(us,qi.fromStyles)),zr.onDestroy(()=>gr(us,qi.toStyles)),void V.push(zr);if(rn.isFallbackTransition)return zr.onStart(()=>Mr(us,qi.fromStyles)),zr.onDestroy(()=>gr(us,qi.toStyles)),void V.push(zr);const _u=[];qi.timelines.forEach(Ns=>{Ns.stretchStartingKeyframe=!0,this.disabledNodes.has(Ns.element)||_u.push(Ns)}),qi.timelines=_u,T.append(us,qi.timelines),le.push({instruction:qi,player:zr,element:us}),qi.queriedElements.forEach(Ns=>Wt(_e,Ns,[]).push(zr)),qi.preStyleProps.forEach((Ns,Va)=>{if(Ns.size){let co=Re.get(Va);co||Re.set(Va,co=new Set),Ns.forEach((Cl,ho)=>co.add(ho))}}),qi.postStyleProps.forEach((Ns,Va)=>{let co=it.get(Va);co||it.set(Va,co=new Set),Ns.forEach((Cl,ho)=>co.add(ho))})});if(In.length){const gn=[];In.forEach(Cn=>{gn.push(function Ge(N,d){return new W.vHH(3505,!1)}())}),Ms.forEach(Cn=>Cn.destroy()),this.reportError(gn)}const Jn=new Map,Ao=new Map;le.forEach(gn=>{const Cn=gn.element;T.has(Cn)&&(Ao.set(Cn,Cn),this._beforeAnimationBuild(gn.player.namespaceId,gn.instruction,Jn))}),V.forEach(gn=>{const Cn=gn.element;this._getPreviousPlayers(Cn,!1,gn.namespaceId,gn.triggerName,null).forEach(zr=>{Wt(Jn,Cn,[]).push(zr),zr.destroy()})});const la=En.filter(gn=>Li(gn,Re,it)),ba=new Map;ms(ba,this.driver,ui,it,K.l3).forEach(gn=>{Li(gn,Re,it)&&la.push(gn)});const gu=new Map;nn.forEach((gn,Cn)=>{ms(gu,this.driver,new Set(gn),Re,K.k1)}),la.forEach(gn=>{const Cn=ba.get(gn),rn=gu.get(gn);ba.set(gn,new Map([...Cn?.entries()??[],...rn?.entries()??[]]))});const mu=[],Ju=[],Ya={};le.forEach(gn=>{const{element:Cn,player:rn,instruction:zr}=gn;if(T.has(Cn)){if(Tt.has(Cn))return rn.onDestroy(()=>gr(Cn,zr.toStyles)),rn.disabled=!0,rn.overrideTotalTime(zr.totalTime),void V.push(rn);let us=Ya;if(Ao.size>1){let Wi=Cn;const Co=[];for(;Wi=Wi.parentNode;){const qi=Ao.get(Wi);if(qi){us=qi;break}Co.push(Wi)}Co.forEach(qi=>Ao.set(qi,us))}const ga=this._buildAnimation(rn.namespaceId,zr,Jn,Y,gu,ba);if(rn.setRealPlayer(ga),us===Ya)mu.push(rn);else{const Wi=this.playersByElement.get(us);Wi&&Wi.length&&(rn.parentPlayer=Et(Wi)),V.push(rn)}}else Mr(Cn,zr.fromStyles),rn.onDestroy(()=>gr(Cn,zr.toStyles)),Ju.push(rn),Tt.has(Cn)&&V.push(rn)}),Ju.forEach(gn=>{const Cn=Y.get(gn.element);if(Cn&&Cn.length){const rn=Et(Cn);gn.setRealPlayer(rn)}}),V.forEach(gn=>{gn.parentPlayer?gn.syncPlayerEvents(gn.parentPlayer):gn.destroy()});for(let gn=0;gn<En.length;gn++){const Cn=En[gn],rn=Cn[hi];if(Gs(Cn,Cr),rn&&rn.hasAnimation)continue;let zr=[];if(_e.size){let ga=_e.get(Cn);ga&&ga.length&&zr.push(...ga);let Wi=this.driver.query(Cn,Rn,!0);for(let Co=0;Co<Wi.length;Co++){let qi=_e.get(Wi[Co]);qi&&qi.length&&zr.push(...qi)}}const us=zr.filter(ga=>!ga.destroyed);us.length?Qn(this,Cn,us):this.processLeaveNode(Cn)}return En.length=0,mu.forEach(gn=>{this.players.push(gn),gn.onDone(()=>{gn.destroy();const Cn=this.players.indexOf(gn);this.players.splice(Cn,1)}),gn.play()}),mu}afterFlush(d){this._flushFns.push(d)}afterFlushAnimationsDone(d){this._whenQuietFns.push(d)}_getPreviousPlayers(d,m,T,V,Y){let le=[];if(m){const _e=this.playersByQueriedElement.get(d);_e&&(le=_e)}else{const _e=this.playersByElement.get(d);if(_e){const Re=!Y||Y==mn;_e.forEach(it=>{it.queued||!Re&&it.triggerName!=V||le.push(it)})}}return(T||V)&&(le=le.filter(_e=>!(T&&T!=_e.namespaceId||V&&V!=_e.triggerName))),le}_beforeAnimationBuild(d,m,T){const Y=m.element,le=m.isRemovalTransition?void 0:d,_e=m.isRemovalTransition?void 0:m.triggerName;for(const Re of m.timelines){const it=Re.element,Tt=it!==Y,Pt=Wt(T,it,[]);this._getPreviousPlayers(it,Tt,le,_e,m.toState).forEach(nn=>{const cn=nn.getRealPlayer();cn.beforeDestroy&&cn.beforeDestroy(),nn.destroy(),Pt.push(nn)})}Mr(Y,m.fromStyles)}_buildAnimation(d,m,T,V,Y,le){const _e=m.triggerName,Re=m.element,it=[],Tt=new Set,Pt=new Set,Tn=m.timelines.map(cn=>{const bt=cn.element;Tt.add(bt);const En=bt[hi];if(En&&En.removedBeforeQueried)return new K.ZN(cn.duration,cn.delay);const kr=bt!==Re,ui=function va(N){const d=[];return Zi(N,d),d}((T.get(bt)||di).map(Jn=>Jn.getRealPlayer())).filter(Jn=>!!Jn.element&&Jn.element===bt),Yn=Y.get(bt),Ti=le.get(bt),Ms=It(this._normalizer,cn.keyframes,Yn,Ti),In=this._buildPlayer(cn,Ms,ui);if(cn.subTimeline&&V&&Pt.add(bt),kr){const Jn=new Lr(d,_e,bt);Jn.setRealPlayer(In),it.push(Jn)}return In});it.forEach(cn=>{Wt(this.playersByQueriedElement,cn.element,[]).push(cn),cn.onDone(()=>function wr(N,d,m){let T=N.get(d);if(T){if(T.length){const V=T.indexOf(m);T.splice(V,1)}0==T.length&&N.delete(d)}return T}(this.playersByQueriedElement,cn.element,cn))}),Tt.forEach(cn=>yi(cn,Ri));const nn=Et(Tn);return nn.onDestroy(()=>{Tt.forEach(cn=>Gs(cn,Ri)),gr(Re,m.toStyles)}),Pt.forEach(cn=>{Wt(V,cn,[]).push(nn)}),nn}_buildPlayer(d,m,T){return m.length>0?this.driver.animate(d.element,m,d.duration,d.delay,d.easing,T):new K.ZN(d.duration,d.delay)}}class Lr{constructor(d,m,T){this.namespaceId=d,this.triggerName=m,this.element=T,this._player=new K.ZN,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(d){this._containsRealPlayer||(this._player=d,this._queuedCallbacks.forEach((m,T)=>{m.forEach(V=>$n(d,T,void 0,V))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(d.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(d){this.totalTime=d}syncPlayerEvents(d){const m=this._player;m.triggerCallback&&d.onStart(()=>m.triggerCallback("start")),d.onDone(()=>this.finish()),d.onDestroy(()=>this.destroy())}_queueEvent(d,m){Wt(this._queuedCallbacks,d,[]).push(m)}onDone(d){this.queued&&this._queueEvent("done",d),this._player.onDone(d)}onStart(d){this.queued&&this._queueEvent("start",d),this._player.onStart(d)}onDestroy(d){this.queued&&this._queueEvent("destroy",d),this._player.onDestroy(d)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(d){this.queued||this._player.setPosition(d)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(d){const m=this._player;m.triggerCallback&&m.triggerCallback(d)}}function Or(N){return N&&1===N.nodeType}function Oo(N,d){const m=N.style.display;return N.style.display=d??"none",m}function ms(N,d,m,T,V){const Y=[];m.forEach(Re=>Y.push(Oo(Re)));const le=[];T.forEach((Re,it)=>{const Tt=new Map;Re.forEach(Pt=>{const Tn=d.computeStyle(it,Pt,V);Tt.set(Pt,Tn),(!Tn||0==Tn.length)&&(it[hi]=er,le.push(it))}),N.set(it,Tt)});let _e=0;return m.forEach(Re=>Oo(Re,Y[_e++])),le}function Fi(N,d){const m=new Map;if(N.forEach(_e=>m.set(_e,[])),0==d.length)return m;const V=new Set(d),Y=new Map;function le(_e){if(!_e)return 1;let Re=Y.get(_e);if(Re)return Re;const it=_e.parentNode;return Re=m.has(it)?it:V.has(it)?1:le(it),Y.set(_e,Re),Re}return d.forEach(_e=>{const Re=le(_e);1!==Re&&m.get(Re).push(_e)}),m}function yi(N,d){N.classList?.add(d)}function Gs(N,d){N.classList?.remove(d)}function Qn(N,d,m){Et(m).onDone(()=>N.processLeaveNode(d))}function Zi(N,d){for(let m=0;m<N.length;m++){const T=N[m];T instanceof K.ZE?Zi(T.players,d):d.push(T)}}function Li(N,d,m){const T=m.get(N);if(!T)return!1;let V=d.get(N);return V?T.forEach(Y=>V.add(Y)):d.set(N,T),m.delete(N),!0}class fi{constructor(d,m,T){this.bodyNode=d,this._driver=m,this._normalizer=T,this._triggerCache={},this.onRemovalComplete=(V,Y)=>{},this._transitionEngine=new zi(d,m,T),this._timelineEngine=new ps(d,m,T),this._transitionEngine.onRemovalComplete=(V,Y)=>this.onRemovalComplete(V,Y)}registerTrigger(d,m,T,V,Y){const le=d+"-"+V;let _e=this._triggerCache[le];if(!_e){const Re=[],Tt=yn(this._driver,Y,Re,[]);if(Re.length)throw function et(N,d){return new W.vHH(3404,!1)}();_e=function ci(N,d,m){return new oo(N,d,m)}(V,Tt,this._normalizer),this._triggerCache[le]=_e}this._transitionEngine.registerTrigger(m,V,_e)}register(d,m){this._transitionEngine.register(d,m)}destroy(d,m){this._transitionEngine.destroy(d,m)}onInsert(d,m,T,V){this._transitionEngine.insertNode(d,m,T,V)}onRemove(d,m,T){this._transitionEngine.removeNode(d,m,T)}disableAnimations(d,m){this._transitionEngine.markElementAsDisabled(d,m)}process(d,m,T,V){if("@"==T.charAt(0)){const[Y,le]=ar(T);this._timelineEngine.command(Y,m,le,V)}else this._transitionEngine.trigger(d,m,T,V)}listen(d,m,T,V,Y){if("@"==T.charAt(0)){const[le,_e]=ar(T);return this._timelineEngine.listen(le,m,_e,Y)}return this._transitionEngine.listen(d,m,T,V,Y)}flush(d=-1){this._transitionEngine.flush(d)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(d){this._transitionEngine.afterFlushAnimationsDone(d)}}let _s=(()=>{class N{static#e=this.initialStylesByElement=new WeakMap;constructor(m,T,V){this._element=m,this._startStyles=T,this._endStyles=V,this._state=0;let Y=N.initialStylesByElement.get(m);Y||N.initialStylesByElement.set(m,Y=new Map),this._initialStyles=Y}start(){this._state<1&&(this._startStyles&&gr(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(gr(this._element,this._initialStyles),this._endStyles&&(gr(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(N.initialStylesByElement.delete(this._element),this._startStyles&&(Mr(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Mr(this._element,this._endStyles),this._endStyles=null),gr(this._element,this._initialStyles),this._state=3)}}return N})();function Tr(N){let d=null;return N.forEach((m,T)=>{(function yo(N){return"display"===N||"position"===N})(T)&&(d=d||new Map,d.set(T,m))}),d}class vn{constructor(d,m,T,V){this.element=d,this.keyframes=m,this.options=T,this._specialStyles=V,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=T.duration,this._delay=T.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(d=>d()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const d=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,d,this.options),this._finalKeyframe=d.length?d[d.length-1]:new Map;const m=()=>this._onFinish();this.domPlayer.addEventListener("finish",m),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",m)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(d){const m=[];return d.forEach(T=>{m.push(Object.fromEntries(T))}),m}_triggerWebAnimation(d,m,T){return d.animate(this._convertKeyframesToObject(m),T)}onStart(d){this._originalOnStartFns.push(d),this._onStartFns.push(d)}onDone(d){this._originalOnDoneFns.push(d),this._onDoneFns.push(d)}onDestroy(d){this._onDestroyFns.push(d)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(d=>d()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(d=>d()),this._onDestroyFns=[])}setPosition(d){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=d*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const d=new Map;this.hasStarted()&&this._finalKeyframe.forEach((T,V)=>{"offset"!==V&&d.set(V,this._finished?T:Kt(this.element,V))}),this.currentSnapshot=d}triggerCallback(d){const m="start"===d?this._onStartFns:this._onDoneFns;m.forEach(T=>T()),m.length=0}}class Vi{validateStyleProperty(d){return!0}validateAnimatableStyleProperty(d){return!0}matchesElement(d,m){return!1}containsElement(d,m){return xn(d,m)}getParentElement(d){return Ln(d)}query(d,m,T){return Yr(d,m,T)}computeStyle(d,m,T){return window.getComputedStyle(d)[m]}animate(d,m,T,V,Y,le=[]){const Re={duration:T,delay:V,fill:0==V?"both":"forwards"};Y&&(Re.easing=Y);const it=new Map,Tt=le.filter(nn=>nn instanceof vn);(function vt(N,d){return 0===N||0===d})(T,V)&&Tt.forEach(nn=>{nn.currentSnapshot.forEach((cn,bt)=>it.set(bt,cn))});let Pt=function Pi(N){return N.length?N[0]instanceof Map?N:N.map(d=>Ur(d)):[]}(m).map(nn=>Sr(nn));Pt=function Ft(N,d,m){if(m.size&&d.length){let T=d[0],V=[];if(m.forEach((Y,le)=>{T.has(le)||V.push(le),T.set(le,Y)}),V.length)for(let Y=1;Y<d.length;Y++){let le=d[Y];V.forEach(_e=>le.set(_e,Kt(N,_e)))}}return d}(d,Pt,it);const Tn=function xo(N,d){let m=null,T=null;return Array.isArray(d)&&d.length?(m=Tr(d[0]),d.length>1&&(T=Tr(d[d.length-1]))):d instanceof Map&&(m=Tr(d)),m||T?new _s(N,m,T):null}(d,Pt);return new vn(d,Pt,Re,Tn)}}var ys=U(6814);let ko=(()=>{class N extends K._j{constructor(m,T){super(),this._nextAnimationId=0,this._renderer=m.createRenderer(T.body,{id:"0",encapsulation:W.ifc.None,styles:[],data:{animation:[]}})}build(m){const T=this._nextAnimationId.toString();this._nextAnimationId++;const V=Array.isArray(m)?(0,K.vP)(m):m;return ao(this._renderer,null,T,"register",[V]),new Ea(T,this._renderer)}static#e=this.\u0275fac=function(T){return new(T||N)(W.LFG(W.FYo),W.LFG(ys.K0))};static#t=this.\u0275prov=W.Yz7({token:N,factory:N.\u0275fac})}return N})();class Ea extends K.LC{constructor(d,m){super(),this._id=d,this._renderer=m}create(d,m){return new Ui(this._id,d,m||{},this._renderer)}}class Ui{constructor(d,m,T,V){this.id=d,this.element=m,this._renderer=V,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",T)}_listen(d,m){return this._renderer.listen(this.element,`@@${this.id}:${d}`,m)}_command(d,...m){return ao(this._renderer,this.element,this.id,d,m)}onDone(d){this._listen("done",d)}onStart(d){this._listen("start",d)}onDestroy(d){this._listen("destroy",d)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(d){this._command("setPosition",d)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function ao(N,d,m,T,V){return N.setProperty(d,`@@${m}:${T}`,V)}const Fo="@.disabled";let za=(()=>{class N{constructor(m,T,V){this.delegate=m,this.engine=T,this._zone=V,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,T.onRemovalComplete=(Y,le)=>{const _e=le?.parentNode(Y);_e&&le.removeChild(_e,Y)}}createRenderer(m,T){const Y=this.delegate.createRenderer(m,T);if(!(m&&T&&T.data&&T.data.animation)){let Tt=this._rendererCache.get(Y);return Tt||(Tt=new Bi("",Y,this.engine,()=>this._rendererCache.delete(Y)),this._rendererCache.set(Y,Tt)),Tt}const le=T.id,_e=T.id+"-"+this._currentId;this._currentId++,this.engine.register(_e,m);const Re=Tt=>{Array.isArray(Tt)?Tt.forEach(Re):this.engine.registerTrigger(le,_e,m,Tt.name,Tt)};return T.data.animation.forEach(Re),new Ci(this,_e,Y,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(m,T,V){m>=0&&m<this._microtaskId?this._zone.run(()=>T(V)):(0==this._animationCallbacksBuffer.length&&queueMicrotask(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(Y=>{const[le,_e]=Y;le(_e)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([T,V]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}static#e=this.\u0275fac=function(T){return new(T||N)(W.LFG(W.FYo),W.LFG(fi),W.LFG(W.R0b))};static#t=this.\u0275prov=W.Yz7({token:N,factory:N.\u0275fac})}return N})();class Bi{constructor(d,m,T,V){this.namespaceId=d,this.delegate=m,this.engine=T,this._onDestroy=V}get data(){return this.delegate.data}destroyNode(d){this.delegate.destroyNode?.(d)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(d,m){return this.delegate.createElement(d,m)}createComment(d){return this.delegate.createComment(d)}createText(d){return this.delegate.createText(d)}appendChild(d,m){this.delegate.appendChild(d,m),this.engine.onInsert(this.namespaceId,m,d,!1)}insertBefore(d,m,T,V=!0){this.delegate.insertBefore(d,m,T),this.engine.onInsert(this.namespaceId,m,d,V)}removeChild(d,m,T){this.engine.onRemove(this.namespaceId,m,this.delegate)}selectRootElement(d,m){return this.delegate.selectRootElement(d,m)}parentNode(d){return this.delegate.parentNode(d)}nextSibling(d){return this.delegate.nextSibling(d)}setAttribute(d,m,T,V){this.delegate.setAttribute(d,m,T,V)}removeAttribute(d,m,T){this.delegate.removeAttribute(d,m,T)}addClass(d,m){this.delegate.addClass(d,m)}removeClass(d,m){this.delegate.removeClass(d,m)}setStyle(d,m,T,V){this.delegate.setStyle(d,m,T,V)}removeStyle(d,m,T){this.delegate.removeStyle(d,m,T)}setProperty(d,m,T){"@"==m.charAt(0)&&m==Fo?this.disableAnimations(d,!!T):this.delegate.setProperty(d,m,T)}setValue(d,m){this.delegate.setValue(d,m)}listen(d,m,T){return this.delegate.listen(d,m,T)}disableAnimations(d,m){this.engine.disableAnimations(d,m)}}class Ci extends Bi{constructor(d,m,T,V,Y){super(m,T,V,Y),this.factory=d,this.namespaceId=m}setProperty(d,m,T){"@"==m.charAt(0)?"."==m.charAt(1)&&m==Fo?this.disableAnimations(d,T=void 0===T||!!T):this.engine.process(this.namespaceId,d,m.slice(1),T):this.delegate.setProperty(d,m,T)}listen(d,m,T){if("@"==m.charAt(0)){const V=function Ga(N){switch(N){case"body":return document.body;case"document":return document;case"window":return window;default:return N}}(d);let Y=m.slice(1),le="";return"@"!=Y.charAt(0)&&([Y,le]=function au(N){const d=N.indexOf(".");return[N.substring(0,d),N.slice(d+1)]}(Y)),this.engine.listen(this.namespaceId,V,Y,le,_e=>{this.factory.scheduleListenerCallback(_e._data||-1,T,_e)})}return this.delegate.listen(d,m,T)}}const ae=[{provide:K._j,useClass:ko},{provide:Hs,useFactory:function j(){return new _o}},{provide:fi,useClass:(()=>{class N extends fi{constructor(m,T,V,Y){super(m.body,T,V)}ngOnDestroy(){this.flush()}static#e=this.\u0275fac=function(T){return new(T||N)(W.LFG(ys.K0),W.LFG(an),W.LFG(Hs),W.LFG(W.z2F))};static#t=this.\u0275prov=W.Yz7({token:N,factory:N.\u0275fac})}return N})()},{provide:W.FYo,useFactory:function H(N,d,m){return new za(N,d,m)},deps:[h.se,fi,W.R0b]}],b=[{provide:an,useFactory:()=>new Vi},{provide:W.QbO,useValue:"BrowserAnimations"},...ae],O=[{provide:an,useClass:un},{provide:W.QbO,useValue:"NoopAnimations"},...ae];let C=(()=>{class N{static withConfig(m){return{ngModule:N,providers:m.disableAnimations?O:b}}static#e=this.\u0275fac=function(T){return new(T||N)};static#t=this.\u0275mod=W.oAB({type:N});static#n=this.\u0275inj=W.cJS({providers:b,imports:[h.b2]})}return N})();var pt=U(7045),ln=U(5861),sr=U(4036),dr=U(7411);let Dr=(()=>{class N{constructor(m,T){var V=this;this.autenticador=m,this.router=T,this.canActivate=(0,ln.Z)(function*(){const Y=V.autenticador.obtenerUsuarioLogueado();return V.autenticador.usuarioActual=yield(0,sr.z)(Y),null==V.autenticador.usuarioActual||(V.router.navigateByUrl("bienvenido/mi-perfil"),!1)})}static#e=this.\u0275fac=function(T){return new(T||N)(W.LFG(dr.T),W.LFG(pt.F0))};static#t=this.\u0275prov=W.Yz7({token:N,factory:N.\u0275fac,providedIn:"root"})}return N})(),nr=(()=>{class N{constructor(m,T){var V=this;this.autenticador=m,this.router=T,this.canActivate=(0,ln.Z)(function*(){const Y=V.autenticador.obtenerUsuarioLogueado();return V.autenticador.usuarioActual=yield(0,sr.z)(Y),null!=V.autenticador.usuarioActual||(V.router.navigateByUrl("home"),!1)})}static#e=this.\u0275fac=function(T){return new(T||N)(W.LFG(dr.T),W.LFG(pt.F0))};static#t=this.\u0275prov=W.Yz7({token:N,factory:N.\u0275fac,providedIn:"root"})}return N})();const Zr=[{path:"",redirectTo:"home",pathMatch:"full"},{path:"home",loadChildren:()=>U.e(707).then(U.bind(U,4707)).then(N=>N.HomeModule),canActivate:[Dr]},{path:"sesiones",loadChildren:()=>U.e(591).then(U.bind(U,591)).then(N=>N.SesionesModule),canActivate:[Dr]},{path:"bienvenido",loadChildren:()=>Promise.all([U.e(519),U.e(327)]).then(U.bind(U,9327)).then(N=>N.BienvenidoModule),canActivate:[nr]},{path:"encuesta",loadChildren:()=>U.e(65).then(U.bind(U,7065)).then(N=>N.EncuestaModule),canActivate:[nr]},{path:"**",component:(()=>{class N{static#e=this.\u0275fac=function(T){return new(T||N)};static#t=this.\u0275cmp=W.Xpm({type:N,selectors:[["app-error"]],decls:6,vars:0,consts:[["routerLink",""]],template:function(T,V){1&T&&(W.TgZ(0,"body")(1,"h1"),W._uU(2,"Error en la web 404 (P\xe1gina no encontrada)"),W.qZA(),W.TgZ(3,"button",0),W._uU(4,"Volver a la p\xe1gina"),W.qZA()(),W._UZ(5,"router-outlet"))},dependencies:[pt.lC,pt.rH]})}return N})()}];let ss=(()=>{class N{static#e=this.\u0275fac=function(T){return new(T||N)};static#t=this.\u0275mod=W.oAB({type:N});static#n=this.\u0275inj=W.cJS({imports:[pt.Bz.forRoot(Zr),pt.Bz]})}return N})();var Br=U(8672);let bi=(()=>{class N{constructor(m){this.router=m,this.title="tp-final-clinica"}navigate(m){this.router.navigateByUrl(m)}static#e=this.\u0275fac=function(T){return new(T||N)(W.Y36(pt.F0))};static#t=this.\u0275cmp=W.Xpm({type:N,selectors:[["app-root"]],decls:4,vars:0,consts:[["bdColor","rgba(51,51,51,0.8)","size","medium","color","#fff","template","<img src='assets/spinner.gif' width='64' height='64'/>"],[2,"font-size","20px","color","white"]],template:function(T,V){1&T&&(W.TgZ(0,"ngx-spinner",0)(1,"p",1),W._uU(2,"Cargando..."),W.qZA()(),W._UZ(3,"router-outlet"))},dependencies:[pt.lC,Br.Ro]})}return N})();var Ar=U(95),Fs=U(2096),vs=U(2459),oi=U(5592),to=U(6328),bs=U(2181),Si=U(7398),Ia=U(4716),Ls=U(4664);class wa{}class _r{}class Vo{constructor(d){this.normalizedNames=new Map,this.lazyUpdate=null,d?"string"==typeof d?this.lazyInit=()=>{this.headers=new Map,d.split("\n").forEach(m=>{const T=m.indexOf(":");if(T>0){const V=m.slice(0,T),Y=V.toLowerCase(),le=m.slice(T+1).trim();this.maybeSetNormalizedName(V,Y),this.headers.has(Y)?this.headers.get(Y).push(le):this.headers.set(Y,[le])}})}:typeof Headers<"u"&&d instanceof Headers?(this.headers=new Map,d.forEach((m,T)=>{this.setHeaderEntries(T,m)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(d).forEach(([m,T])=>{this.setHeaderEntries(m,T)})}:this.headers=new Map}has(d){return this.init(),this.headers.has(d.toLowerCase())}get(d){this.init();const m=this.headers.get(d.toLowerCase());return m&&m.length>0?m[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(d){return this.init(),this.headers.get(d.toLowerCase())||null}append(d,m){return this.clone({name:d,value:m,op:"a"})}set(d,m){return this.clone({name:d,value:m,op:"s"})}delete(d,m){return this.clone({name:d,value:m,op:"d"})}maybeSetNormalizedName(d,m){this.normalizedNames.has(m)||this.normalizedNames.set(m,d)}init(){this.lazyInit&&(this.lazyInit instanceof Vo?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(d=>this.applyUpdate(d)),this.lazyUpdate=null))}copyFrom(d){d.init(),Array.from(d.headers.keys()).forEach(m=>{this.headers.set(m,d.headers.get(m)),this.normalizedNames.set(m,d.normalizedNames.get(m))})}clone(d){const m=new Vo;return m.lazyInit=this.lazyInit&&this.lazyInit instanceof Vo?this.lazyInit:this,m.lazyUpdate=(this.lazyUpdate||[]).concat([d]),m}applyUpdate(d){const m=d.name.toLowerCase();switch(d.op){case"a":case"s":let T=d.value;if("string"==typeof T&&(T=[T]),0===T.length)return;this.maybeSetNormalizedName(d.name,m);const V=("a"===d.op?this.headers.get(m):void 0)||[];V.push(...T),this.headers.set(m,V);break;case"d":const Y=d.value;if(Y){let le=this.headers.get(m);if(!le)return;le=le.filter(_e=>-1===Y.indexOf(_e)),0===le.length?(this.headers.delete(m),this.normalizedNames.delete(m)):this.headers.set(m,le)}else this.headers.delete(m),this.normalizedNames.delete(m)}}setHeaderEntries(d,m){const T=(Array.isArray(m)?m:[m]).map(Y=>Y.toString()),V=d.toLowerCase();this.headers.set(V,T),this.maybeSetNormalizedName(d,V)}forEach(d){this.init(),Array.from(this.normalizedNames.keys()).forEach(m=>d(this.normalizedNames.get(m),this.headers.get(m)))}}class Vs{encodeKey(d){return Ma(d)}encodeValue(d){return Ma(d)}decodeKey(d){return decodeURIComponent(d)}decodeValue(d){return decodeURIComponent(d)}}const Pa=/%(\d[a-f0-9])/gi,ta={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function Ma(N){return encodeURIComponent(N).replace(Pa,(d,m)=>ta[m]??d)}function vo(N){return`${N}`}class os{constructor(d={}){if(this.updates=null,this.cloneFrom=null,this.encoder=d.encoder||new Vs,d.fromString){if(d.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function ea(N,d){const m=new Map;return N.length>0&&N.replace(/^\?/,"").split("&").forEach(V=>{const Y=V.indexOf("="),[le,_e]=-1==Y?[d.decodeKey(V),""]:[d.decodeKey(V.slice(0,Y)),d.decodeValue(V.slice(Y+1))],Re=m.get(le)||[];Re.push(_e),m.set(le,Re)}),m}(d.fromString,this.encoder)}else d.fromObject?(this.map=new Map,Object.keys(d.fromObject).forEach(m=>{const T=d.fromObject[m],V=Array.isArray(T)?T.map(vo):[vo(T)];this.map.set(m,V)})):this.map=null}has(d){return this.init(),this.map.has(d)}get(d){this.init();const m=this.map.get(d);return m?m[0]:null}getAll(d){return this.init(),this.map.get(d)||null}keys(){return this.init(),Array.from(this.map.keys())}append(d,m){return this.clone({param:d,value:m,op:"a"})}appendAll(d){const m=[];return Object.keys(d).forEach(T=>{const V=d[T];Array.isArray(V)?V.forEach(Y=>{m.push({param:T,value:Y,op:"a"})}):m.push({param:T,value:V,op:"a"})}),this.clone(m)}set(d,m){return this.clone({param:d,value:m,op:"s"})}delete(d,m){return this.clone({param:d,value:m,op:"d"})}toString(){return this.init(),this.keys().map(d=>{const m=this.encoder.encodeKey(d);return this.map.get(d).map(T=>m+"="+this.encoder.encodeValue(T)).join("&")}).filter(d=>""!==d).join("&")}clone(d){const m=new os({encoder:this.encoder});return m.cloneFrom=this.cloneFrom||this,m.updates=(this.updates||[]).concat(d),m}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(d=>this.map.set(d,this.cloneFrom.map.get(d))),this.updates.forEach(d=>{switch(d.op){case"a":case"s":const m=("a"===d.op?this.map.get(d.param):void 0)||[];m.push(vo(d.value)),this.map.set(d.param,m);break;case"d":if(void 0===d.value){this.map.delete(d.param);break}{let T=this.map.get(d.param)||[];const V=T.indexOf(vo(d.value));-1!==V&&T.splice(V,1),T.length>0?this.map.set(d.param,T):this.map.delete(d.param)}}}),this.cloneFrom=this.updates=null)}}class Ss{constructor(){this.map=new Map}set(d,m){return this.map.set(d,m),this}get(d){return this.map.has(d)||this.map.set(d,d.defaultValue()),this.map.get(d)}delete(d){return this.map.delete(d),this}has(d){return this.map.has(d)}keys(){return this.map.keys()}}function na(N){return typeof ArrayBuffer<"u"&&N instanceof ArrayBuffer}function Na(N){return typeof Blob<"u"&&N instanceof Blob}function ha(N){return typeof FormData<"u"&&N instanceof FormData}class no{constructor(d,m,T,V){let Y;if(this.url=m,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=d.toUpperCase(),function Wa(N){switch(N){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||V?(this.body=void 0!==T?T:null,Y=V):Y=T,Y&&(this.reportProgress=!!Y.reportProgress,this.withCredentials=!!Y.withCredentials,Y.responseType&&(this.responseType=Y.responseType),Y.headers&&(this.headers=Y.headers),Y.context&&(this.context=Y.context),Y.params&&(this.params=Y.params)),this.headers||(this.headers=new Vo),this.context||(this.context=new Ss),this.params){const le=this.params.toString();if(0===le.length)this.urlWithParams=m;else{const _e=m.indexOf("?");this.urlWithParams=m+(-1===_e?"?":_e<m.length-1?"&":"")+le}}else this.params=new os,this.urlWithParams=m}serializeBody(){return null===this.body?null:na(this.body)||Na(this.body)||ha(this.body)||function Au(N){return typeof URLSearchParams<"u"&&N instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof os?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||ha(this.body)?null:Na(this.body)?this.body.type||null:na(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof os?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(d={}){const m=d.method||this.method,T=d.url||this.url,V=d.responseType||this.responseType,Y=void 0!==d.body?d.body:this.body,le=void 0!==d.withCredentials?d.withCredentials:this.withCredentials,_e=void 0!==d.reportProgress?d.reportProgress:this.reportProgress;let Re=d.headers||this.headers,it=d.params||this.params;const Tt=d.context??this.context;return void 0!==d.setHeaders&&(Re=Object.keys(d.setHeaders).reduce((Pt,Tn)=>Pt.set(Tn,d.setHeaders[Tn]),Re)),d.setParams&&(it=Object.keys(d.setParams).reduce((Pt,Tn)=>Pt.set(Tn,d.setParams[Tn]),it)),new no(m,T,Y,{params:it,headers:Re,context:Tt,reportProgress:_e,responseType:V,withCredentials:le})}}var ra=function(N){return N[N.Sent=0]="Sent",N[N.UploadProgress=1]="UploadProgress",N[N.ResponseHeader=2]="ResponseHeader",N[N.DownloadProgress=3]="DownloadProgress",N[N.Response=4]="Response",N[N.User=5]="User",N}(ra||{});class A{constructor(d,m=200,T="OK"){this.headers=d.headers||new Vo,this.status=void 0!==d.status?d.status:m,this.statusText=d.statusText||T,this.url=d.url||null,this.ok=this.status>=200&&this.status<300}}class J extends A{constructor(d={}){super(d),this.type=ra.ResponseHeader}clone(d={}){return new J({headers:d.headers||this.headers,status:void 0!==d.status?d.status:this.status,statusText:d.statusText||this.statusText,url:d.url||this.url||void 0})}}class L extends A{constructor(d={}){super(d),this.type=ra.Response,this.body=void 0!==d.body?d.body:null}clone(d={}){return new L({body:void 0!==d.body?d.body:this.body,headers:d.headers||this.headers,status:void 0!==d.status?d.status:this.status,statusText:d.statusText||this.statusText,url:d.url||this.url||void 0})}}class Q extends A{constructor(d){super(d,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${d.url||"(unknown url)"}`:`Http failure response for ${d.url||"(unknown url)"}: ${d.status} ${d.statusText}`,this.error=d.error||null}}function ge(N,d){return{body:d,headers:N.headers,context:N.context,observe:N.observe,params:N.params,reportProgress:N.reportProgress,responseType:N.responseType,withCredentials:N.withCredentials}}let Ye=(()=>{class N{constructor(m){this.handler=m}request(m,T,V={}){let Y;if(m instanceof no)Y=m;else{let Re,it;Re=V.headers instanceof Vo?V.headers:new Vo(V.headers),V.params&&(it=V.params instanceof os?V.params:new os({fromObject:V.params})),Y=new no(m,T,void 0!==V.body?V.body:null,{headers:Re,context:V.context,params:it,reportProgress:V.reportProgress,responseType:V.responseType||"json",withCredentials:V.withCredentials})}const le=(0,Fs.of)(Y).pipe((0,to.b)(Re=>this.handler.handle(Re)));if(m instanceof no||"events"===V.observe)return le;const _e=le.pipe((0,bs.h)(Re=>Re instanceof L));switch(V.observe||"body"){case"body":switch(Y.responseType){case"arraybuffer":return _e.pipe((0,Si.U)(Re=>{if(null!==Re.body&&!(Re.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return Re.body}));case"blob":return _e.pipe((0,Si.U)(Re=>{if(null!==Re.body&&!(Re.body instanceof Blob))throw new Error("Response is not a Blob.");return Re.body}));case"text":return _e.pipe((0,Si.U)(Re=>{if(null!==Re.body&&"string"!=typeof Re.body)throw new Error("Response is not a string.");return Re.body}));default:return _e.pipe((0,Si.U)(Re=>Re.body))}case"response":return _e;default:throw new Error(`Unreachable: unhandled observe type ${V.observe}}`)}}delete(m,T={}){return this.request("DELETE",m,T)}get(m,T={}){return this.request("GET",m,T)}head(m,T={}){return this.request("HEAD",m,T)}jsonp(m,T){return this.request("JSONP",m,{params:(new os).append(T,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(m,T={}){return this.request("OPTIONS",m,T)}patch(m,T,V={}){return this.request("PATCH",m,ge(V,T))}post(m,T,V={}){return this.request("POST",m,ge(V,T))}put(m,T,V={}){return this.request("PUT",m,ge(V,T))}static#e=this.\u0275fac=function(T){return new(T||N)(W.LFG(wa))};static#t=this.\u0275prov=W.Yz7({token:N,factory:N.\u0275fac})}return N})();function rr(N,d){return d(N)}function vi(N,d){return(m,T)=>d.intercept(m,{handle:V=>N(V,T)})}const dt=new W.OlP(""),$r=new W.OlP(""),Jr=new W.OlP("");function Qo(){let N=null;return(d,m)=>{null===N&&(N=((0,W.f3M)(dt,{optional:!0})??[]).reduceRight(vi,rr));const T=(0,W.f3M)(W.HDt),V=T.add();return N(d,m).pipe((0,Ia.x)(()=>T.remove(V)))}}let Rt=(()=>{class N extends wa{constructor(m,T){super(),this.backend=m,this.injector=T,this.chain=null,this.pendingTasks=(0,W.f3M)(W.HDt)}handle(m){if(null===this.chain){const V=Array.from(new Set([...this.injector.get($r),...this.injector.get(Jr,[])]));this.chain=V.reduceRight((Y,le)=>function Us(N,d,m){return(T,V)=>m.runInContext(()=>d(T,Y=>N(Y,V)))}(Y,le,this.injector),rr)}const T=this.pendingTasks.add();return this.chain(m,V=>this.backend.handle(V)).pipe((0,Ia.x)(()=>this.pendingTasks.remove(T)))}static#e=this.\u0275fac=function(T){return new(T||N)(W.LFG(_r),W.LFG(W.lqb))};static#t=this.\u0275prov=W.Yz7({token:N,factory:N.\u0275fac})}return N})();const $u=/^\)\]\}',?\n/;let Yo=(()=>{class N{constructor(m){this.xhrFactory=m}handle(m){if("JSONP"===m.method)throw new W.vHH(-2800,!1);const T=this.xhrFactory;return(T.\u0275loadImpl?(0,vs.D)(T.\u0275loadImpl()):(0,Fs.of)(null)).pipe((0,Ls.w)(()=>new oi.y(Y=>{const le=T.build();if(le.open(m.method,m.urlWithParams),m.withCredentials&&(le.withCredentials=!0),m.headers.forEach((bt,En)=>le.setRequestHeader(bt,En.join(","))),m.headers.has("Accept")||le.setRequestHeader("Accept","application/json, text/plain, */*"),!m.headers.has("Content-Type")){const bt=m.detectContentTypeHeader();null!==bt&&le.setRequestHeader("Content-Type",bt)}if(m.responseType){const bt=m.responseType.toLowerCase();le.responseType="json"!==bt?bt:"text"}const _e=m.serializeBody();let Re=null;const it=()=>{if(null!==Re)return Re;const bt=le.statusText||"OK",En=new Vo(le.getAllResponseHeaders()),kr=function tc(N){return"responseURL"in N&&N.responseURL?N.responseURL:/^X-Request-URL:/m.test(N.getAllResponseHeaders())?N.getResponseHeader("X-Request-URL"):null}(le)||m.url;return Re=new J({headers:En,status:le.status,statusText:bt,url:kr}),Re},Tt=()=>{let{headers:bt,status:En,statusText:kr,url:ui}=it(),Yn=null;204!==En&&(Yn=typeof le.response>"u"?le.responseText:le.response),0===En&&(En=Yn?200:0);let Ti=En>=200&&En<300;if("json"===m.responseType&&"string"==typeof Yn){const Ms=Yn;Yn=Yn.replace($u,"");try{Yn=""!==Yn?JSON.parse(Yn):null}catch(In){Yn=Ms,Ti&&(Ti=!1,Yn={error:In,text:Yn})}}Ti?(Y.next(new L({body:Yn,headers:bt,status:En,statusText:kr,url:ui||void 0})),Y.complete()):Y.error(new Q({error:Yn,headers:bt,status:En,statusText:kr,url:ui||void 0}))},Pt=bt=>{const{url:En}=it(),kr=new Q({error:bt,status:le.status||0,statusText:le.statusText||"Unknown Error",url:En||void 0});Y.error(kr)};let Tn=!1;const nn=bt=>{Tn||(Y.next(it()),Tn=!0);let En={type:ra.DownloadProgress,loaded:bt.loaded};bt.lengthComputable&&(En.total=bt.total),"text"===m.responseType&&le.responseText&&(En.partialText=le.responseText),Y.next(En)},cn=bt=>{let En={type:ra.UploadProgress,loaded:bt.loaded};bt.lengthComputable&&(En.total=bt.total),Y.next(En)};return le.addEventListener("load",Tt),le.addEventListener("error",Pt),le.addEventListener("timeout",Pt),le.addEventListener("abort",Pt),m.reportProgress&&(le.addEventListener("progress",nn),null!==_e&&le.upload&&le.upload.addEventListener("progress",cn)),le.send(_e),Y.next({type:ra.Sent}),()=>{le.removeEventListener("error",Pt),le.removeEventListener("abort",Pt),le.removeEventListener("load",Tt),le.removeEventListener("timeout",Pt),m.reportProgress&&(le.removeEventListener("progress",nn),null!==_e&&le.upload&&le.upload.removeEventListener("progress",cn)),le.readyState!==le.DONE&&le.abort()}})))}static#e=this.\u0275fac=function(T){return new(T||N)(W.LFG(ys.JF))};static#t=this.\u0275prov=W.Yz7({token:N,factory:N.\u0275fac})}return N})();const ia=new W.OlP("XSRF_ENABLED"),Hu=new W.OlP("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),sa=new W.OlP("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class zu{}let Qt=(()=>{class N{constructor(m,T,V){this.doc=m,this.platform=T,this.cookieName=V,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const m=this.doc.cookie||"";return m!==this.lastCookieString&&(this.parseCount++,this.lastToken=(0,ys.Mx)(m,this.cookieName),this.lastCookieString=m),this.lastToken}static#e=this.\u0275fac=function(T){return new(T||N)(W.LFG(ys.K0),W.LFG(W.Lbi),W.LFG(Hu))};static#t=this.\u0275prov=W.Yz7({token:N,factory:N.\u0275fac})}return N})();function hn(N,d){const m=N.url.toLowerCase();if(!(0,W.f3M)(ia)||"GET"===N.method||"HEAD"===N.method||m.startsWith("http://")||m.startsWith("https://"))return d(N);const T=(0,W.f3M)(zu).getToken(),V=(0,W.f3M)(sa);return null!=T&&!N.headers.has(V)&&(N=N.clone({headers:N.headers.set(V,T)})),d(N)}var qn=function(N){return N[N.Interceptors=0]="Interceptors",N[N.LegacyInterceptors=1]="LegacyInterceptors",N[N.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",N[N.NoXsrfProtection=3]="NoXsrfProtection",N[N.JsonpSupport=4]="JsonpSupport",N[N.RequestsMadeViaParent=5]="RequestsMadeViaParent",N[N.Fetch=6]="Fetch",N}(qn||{});function pi(...N){const d=[Ye,Yo,Rt,{provide:wa,useExisting:Rt},{provide:_r,useExisting:Yo},{provide:$r,useValue:hn,multi:!0},{provide:ia,useValue:!0},{provide:zu,useClass:Qt}];for(const m of N)d.push(...m.\u0275providers);return(0,W.MR2)(d)}const Io=new W.OlP("LEGACY_INTERCEPTOR_FN");function Cu(){return function qa(N,d){return{\u0275kind:N,\u0275providers:d}}(qn.LegacyInterceptors,[{provide:Io,useFactory:Qo},{provide:$r,useExisting:Io,multi:!0}])}let Dl=(()=>{class N{static#e=this.\u0275fac=function(T){return new(T||N)};static#t=this.\u0275mod=W.oAB({type:N});static#n=this.\u0275inj=W.cJS({providers:[pi(Cu())]})}return N})();var ro=U(7217),Wu=U(830),Hr=U(1920),Ei=U(7213),qu=U(6321),Es=U(7921),wo=U(9360),Al=U(8251);function cu(){return(0,wo.e)((N,d)=>{let m,T=!1;N.subscribe((0,Al.x)(d,V=>{const Y=m;m=V,T&&d.next([Y,V]),T=!0}))})}var Ku=U(6699),lo=U(3997),Da=(U(6365),U(3106)),v=U(5776),R=U(9058),I=U(4537);function ne(N,d){if(void 0===d)return{merge:!1};if(void 0!==d.mergeFields&&void 0!==d.merge)throw new v.WA("invalid-argument",`Invalid options passed to function ${N}(): You cannot specify both "merge" and "mergeFields".`);return d}function fe(){if(typeof Uint8Array>"u")throw new v.WA("unimplemented","Uint8Arrays are not available in this environment.")}function Ke(){if(!(0,v.Me)())throw new v.WA("unimplemented","Blobs are unavailable in Firestore in this environment.")}class We{constructor(d){this._delegate=d}static fromBase64String(d){return Ke(),new We(v.Jj.fromBase64String(d))}static fromUint8Array(d){return fe(),new We(v.Jj.fromUint8Array(d))}toBase64(){return Ke(),this._delegate.toBase64()}toUint8Array(){return fe(),this._delegate.toUint8Array()}isEqual(d){return this._delegate.isEqual(d._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Bt(N){return function jn(N,d){if("object"!=typeof N||null===N)return!1;const m=N;for(const T of d)if(T in m&&"function"==typeof m[T])return!0;return!1}(N,["next","error","complete"])}class Ii{enableIndexedDbPersistence(d,m){return(0,v.ST)(d._delegate,{forceOwnership:m})}enableMultiTabIndexedDbPersistence(d){return(0,v.fH)(d._delegate)}clearIndexedDbPersistence(d){return(0,v.Fc)(d._delegate)}}class On{constructor(d,m,T){this._delegate=m,this._persistenceProvider=T,this.INTERNAL={delete:()=>this.terminate()},d instanceof v.l7||(this._appCompat=d)}get _databaseId(){return this._delegate._databaseId}settings(d){const m=this._delegate._getSettings();!d.merge&&m.host!==d.host&&(0,v.yq)("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),d.merge&&delete(d=Object.assign(Object.assign({},m),d)).merge,this._delegate._setSettings(d)}useEmulator(d,m,T={}){(0,v.at)(this._delegate,d,m,T)}enableNetwork(){return(0,v.Ix)(this._delegate)}disableNetwork(){return(0,v.TF)(this._delegate)}enablePersistence(d){let m=!1,T=!1;return d&&(m=!!d.synchronizeTabs,T=!!d.experimentalForceOwningTab,(0,v.Wi)("synchronizeTabs",m,"experimentalForceOwningTab",T)),m?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,T)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return(0,v.Mx)(this._delegate)}onSnapshotsInSync(d){return(0,v.sc)(this._delegate,d)}get app(){if(!this._appCompat)throw new v.WA("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(d){try{return new Aa(this,(0,v.hJ)(this._delegate,d))}catch(m){throw io(m,"collection()","Firestore.collection()")}}doc(d){try{return new jo(this,(0,v.JU)(this._delegate,d))}catch(m){throw io(m,"doc()","Firestore.doc()")}}collectionGroup(d){try{return new qs(this,(0,v.B$)(this._delegate,d))}catch(m){throw io(m,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(d){return(0,v.i3)(this._delegate,m=>d(new xa(this,m)))}batch(){return(0,v.qY)(this._delegate),new bu(new v.PU(this._delegate,d=>(0,v.GL)(this._delegate,d)))}loadBundle(d){return(0,v.Pb)(this._delegate,d)}namedQuery(d){return(0,v.L$)(this._delegate,d).then(m=>m?new qs(this,m):null)}}class Ps extends v.u7{constructor(d){super(),this.firestore=d}convertBytes(d){return new We(new v.Jj(d))}convertReference(d){const m=this.convertDocumentKey(d,this.firestore._databaseId);return jo.forKey(m,this.firestore,null)}}class xa{constructor(d,m){this._firestore=d,this._delegate=m,this._userDataWriter=new Ps(d)}get(d){const m=Ca(d);return this._delegate.get(m).then(T=>new oa(this._firestore,new v.xU(this._firestore._delegate,this._userDataWriter,T._key,T._document,T.metadata,m.converter)))}set(d,m,T){const V=Ca(d);return T?(ne("Transaction.set",T),this._delegate.set(V,m,T)):this._delegate.set(V,m),this}update(d,m,T,...V){const Y=Ca(d);return 2===arguments.length?this._delegate.update(Y,m):this._delegate.update(Y,m,T,...V),this}delete(d){const m=Ca(d);return this._delegate.delete(m),this}}class bu{constructor(d){this._delegate=d}set(d,m,T){const V=Ca(d);return T?(ne("WriteBatch.set",T),this._delegate.set(V,m,T)):this._delegate.set(V,m),this}update(d,m,T,...V){const Y=Ca(d);return 2===arguments.length?this._delegate.update(Y,m):this._delegate.update(Y,m,T,...V),this}delete(d){const m=Ca(d);return this._delegate.delete(m),this}commit(){return this._delegate.commit()}}class Bo{constructor(d,m,T){this._firestore=d,this._userDataWriter=m,this._delegate=T}fromFirestore(d,m){const T=new v.$q(this._firestore._delegate,this._userDataWriter,d._key,d._document,d.metadata,null);return this._delegate.fromFirestore(new Ka(this._firestore,T),m??{})}toFirestore(d,m){return m?this._delegate.toFirestore(d,m):this._delegate.toFirestore(d)}static getInstance(d,m){const T=Bo.INSTANCES;let V=T.get(d);V||(V=new WeakMap,T.set(d,V));let Y=V.get(m);return Y||(Y=new Bo(d,new Ps(d),m),V.set(m,Y)),Y}}Bo.INSTANCES=new WeakMap;class jo{constructor(d,m){this.firestore=d,this._delegate=m,this._userDataWriter=new Ps(d)}static forPath(d,m,T){if(d.length%2!=0)throw new v.WA("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${d.canonicalString()} has ${d.length}`);return new jo(m,new v.my(m._delegate,T,new v.Ky(d)))}static forKey(d,m,T){return new jo(m,new v.my(m._delegate,T,d))}get id(){return this._delegate.id}get parent(){return new Aa(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(d){try{return new Aa(this.firestore,(0,v.hJ)(this._delegate,d))}catch(m){throw io(m,"collection()","DocumentReference.collection()")}}isEqual(d){return(d=(0,R.m9)(d))instanceof v.my&&(0,v.Eo)(this._delegate,d)}set(d,m){m=ne("DocumentReference.set",m);try{return m?(0,v.pl)(this._delegate,d,m):(0,v.pl)(this._delegate,d)}catch(T){throw io(T,"setDoc()","DocumentReference.set()")}}update(d,m,...T){try{return 1===arguments.length?(0,v.r7)(this._delegate,d):(0,v.r7)(this._delegate,d,m,...T)}catch(V){throw io(V,"updateDoc()","DocumentReference.update()")}}delete(){return(0,v.oe)(this._delegate)}onSnapshot(...d){const m=nc(d),T=Zu(d,V=>new oa(this.firestore,new v.xU(this.firestore._delegate,this._userDataWriter,V._key,V._document,V.metadata,this._delegate.converter)));return(0,v.cf)(this._delegate,m,T)}get(d){let m;return m="cache"===d?.source?(0,v.kl)(this._delegate):"server"===d?.source?(0,v.Xk)(this._delegate):(0,v.QT)(this._delegate),m.then(T=>new oa(this.firestore,new v.xU(this.firestore._delegate,this._userDataWriter,T._key,T._document,T.metadata,this._delegate.converter)))}withConverter(d){return new jo(this.firestore,this._delegate.withConverter(d?Bo.getInstance(this.firestore,d):null))}}function io(N,d,m){return N.message=N.message.replace(d,m),N}function nc(N){for(const d of N)if("object"==typeof d&&!Bt(d))return d;return{}}function Zu(N,d){var m,T;let V;return V=Bt(N[0])?N[0]:Bt(N[1])?N[1]:"function"==typeof N[0]?{next:N[0],error:N[1],complete:N[2]}:{next:N[1],error:N[2],complete:N[3]},{next:Y=>{V.next&&V.next(d(Y))},error:null===(m=V.error)||void 0===m?void 0:m.bind(V),complete:null===(T=V.complete)||void 0===T?void 0:T.bind(V)}}class oa{constructor(d,m){this._firestore=d,this._delegate=m}get ref(){return new jo(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(d){return this._delegate.data(d)}get(d,m){return this._delegate.get(d,m)}isEqual(d){return(0,v.qK)(this._delegate,d._delegate)}}class Ka extends oa{data(d){const m=this._delegate.data(d);return this._delegate._converter||(0,v.K9)(void 0!==m,"Document in a QueryDocumentSnapshot should exist"),m}}class qs{constructor(d,m){this.firestore=d,this._delegate=m,this._userDataWriter=new Ps(d)}where(d,m,T){try{return new qs(this.firestore,(0,v.IO)(this._delegate,(0,v.ar)(d,m,T)))}catch(V){throw io(V,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(d,m){try{return new qs(this.firestore,(0,v.IO)(this._delegate,(0,v.Xo)(d,m)))}catch(T){throw io(T,/(orderBy|where)\(\)/,"Query.$1()")}}limit(d){try{return new qs(this.firestore,(0,v.IO)(this._delegate,(0,v.b9)(d)))}catch(m){throw io(m,"limit()","Query.limit()")}}limitToLast(d){try{return new qs(this.firestore,(0,v.IO)(this._delegate,(0,v.vh)(d)))}catch(m){throw io(m,"limitToLast()","Query.limitToLast()")}}startAt(...d){try{return new qs(this.firestore,(0,v.IO)(this._delegate,(0,v.e0)(...d)))}catch(m){throw io(m,"startAt()","Query.startAt()")}}startAfter(...d){try{return new qs(this.firestore,(0,v.IO)(this._delegate,(0,v.TQ)(...d)))}catch(m){throw io(m,"startAfter()","Query.startAfter()")}}endBefore(...d){try{return new qs(this.firestore,(0,v.IO)(this._delegate,(0,v.Lx)(...d)))}catch(m){throw io(m,"endBefore()","Query.endBefore()")}}endAt(...d){try{return new qs(this.firestore,(0,v.IO)(this._delegate,(0,v.Wu)(...d)))}catch(m){throw io(m,"endAt()","Query.endAt()")}}isEqual(d){return(0,v.iE)(this._delegate,d._delegate)}get(d){let m;return m="cache"===d?.source?(0,v.UQ)(this._delegate):"server"===d?.source?(0,v.zN)(this._delegate):(0,v.PL)(this._delegate),m.then(T=>new fu(this.firestore,new v.W(this.firestore._delegate,this._userDataWriter,this._delegate,T._snapshot)))}onSnapshot(...d){const m=nc(d),T=Zu(d,V=>new fu(this.firestore,new v.W(this.firestore._delegate,this._userDataWriter,this._delegate,V._snapshot)));return(0,v.cf)(this._delegate,m,T)}withConverter(d){return new qs(this.firestore,this._delegate.withConverter(d?Bo.getInstance(this.firestore,d):null))}}class hu{constructor(d,m){this._firestore=d,this._delegate=m}get type(){return this._delegate.type}get doc(){return new Ka(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class fu{constructor(d,m){this._firestore=d,this._delegate=m}get query(){return new qs(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(d=>new Ka(this._firestore,d))}docChanges(d){return this._delegate.docChanges(d).map(m=>new hu(this._firestore,m))}forEach(d,m){this._delegate.forEach(T=>{d.call(m,new Ka(this._firestore,T))})}isEqual(d){return(0,v.qK)(this._delegate,d._delegate)}}class Aa extends qs{constructor(d,m){super(d,m),this.firestore=d,this._delegate=m}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const d=this._delegate.parent;return d?new jo(this.firestore,d):null}doc(d){try{return new jo(this.firestore,void 0===d?(0,v.JU)(this._delegate):(0,v.JU)(this._delegate,d))}catch(m){throw io(m,"doc()","CollectionReference.doc()")}}add(d){return(0,v.ET)(this._delegate,d).then(m=>new jo(this.firestore,m))}isEqual(d){return(0,v.Eo)(this._delegate,d._delegate)}withConverter(d){return new Aa(this.firestore,this._delegate.withConverter(d?Bo.getInstance(this.firestore,d):null))}}function Ca(N){return(0,v.Cf)(N,v.my)}class Yi{constructor(...d){this._delegate=new v.Lz(...d)}static documentId(){return new Yi(v.Xb.keyField().canonicalString())}isEqual(d){return(d=(0,R.m9)(d))instanceof v.Lz&&this._delegate._internalPath.isEqual(d._internalPath)}}class fa{constructor(d){this._delegate=d}static serverTimestamp(){const d=(0,v.Bt)();return d._methodName="FieldValue.serverTimestamp",new fa(d)}static delete(){const d=(0,v.AK)();return d._methodName="FieldValue.delete",new fa(d)}static arrayUnion(...d){const m=(0,v.vr)(...d);return m._methodName="FieldValue.arrayUnion",new fa(m)}static arrayRemove(...d){const m=(0,v.Ab)(...d);return m._methodName="FieldValue.arrayRemove",new fa(m)}static increment(d){const m=(0,v.nP)(d);return m._methodName="FieldValue.increment",new fa(m)}isEqual(d){return this._delegate.isEqual(d._delegate)}}const To={Firestore:On,GeoPoint:v.F8,Timestamp:v.EK,Blob:We,Transaction:xa,WriteBatch:bu,DocumentReference:jo,DocumentSnapshot:oa,Query:qs,QueryDocumentSnapshot:Ka,QuerySnapshot:fu,CollectionReference:Aa,FieldPath:Yi,FieldValue:fa,setLogLevel:function Xr(N){(0,v.Ub)(N)},CACHE_SIZE_UNLIMITED:v.IX};!function wi(N){(function Su(N,d){N.INTERNAL.registerComponent(new I.wA("firestore-compat",m=>{const T=m.getProvider("app-compat").getImmediate(),V=m.getProvider("firestore").getImmediate();return d(T,V)},"PUBLIC").setServiceProps(Object.assign({},To)))})(N,(d,m)=>new On(d,m,new Ii)),N.registerVersion("@firebase/firestore-compat","0.3.28")}(Da.Z);var rc=U(7142);function ai(N,d){return function ji(N,d=qu.z){return new oi.y(m=>{let T;return null!=d?d.schedule(()=>{T=N.onSnapshot({includeMetadataChanges:!0},m)}):T=N.onSnapshot({includeMetadataChanges:!0},m),()=>{T?.()}})}(N,d)}function Za(N,d){return ai(N,d).pipe((0,Si.U)(m=>({payload:m,type:"query"})))}class $o{ref;afs;constructor(d,m){this.ref=d,this.afs=m}set(d,m){return this.ref.set(d,m)}update(d){return this.ref.update(d)}delete(){return this.ref.delete()}collection(d,m){const T=this.ref.collection(d),{ref:V,query:Y}=Fa(T,m);return new Do(V,Y,this.afs)}snapshotChanges(){return function Hc(N,d){return ai(N,d).pipe((0,Es.O)(void 0),cu(),(0,Si.U)(m=>{const[T,V]=m;return V.exists?T?.exists?{payload:V,type:"modified"}:{payload:V,type:"added"}:{payload:V,type:"removed"}}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Hr.iC)}valueChanges(d={}){return this.snapshotChanges().pipe((0,Si.U)(({payload:m})=>d.idField?{...m.data(),[d.idField]:m.id}:m.data()))}get(d){return(0,vs.D)(this.ref.get(d)).pipe(Hr.iC)}}function Ru(N,d){return Za(N,d).pipe((0,Es.O)(void 0),cu(),(0,Si.U)(m=>{const[T,V]=m,Y=V.payload.docChanges(),le=Y.map(_e=>({type:_e.type,payload:_e}));return T&&JSON.stringify(T.payload.metadata)!==JSON.stringify(V.payload.metadata)&&V.payload.docs.forEach((_e,Re)=>{const it=Y.find(Pt=>Pt.doc.ref.isEqual(_e.ref)),Tt=T?.payload.docs.find(Pt=>Pt.ref.isEqual(_e.ref));it&&JSON.stringify(it.doc.metadata)===JSON.stringify(_e.metadata)||!it&&Tt&&JSON.stringify(Tt.metadata)===JSON.stringify(_e.metadata)||le.push({type:"modified",payload:{oldIndex:Re,newIndex:Re,type:"modified",doc:_e}})}),le}))}function Qu(N,d,m){return Ru(N,m).pipe((0,Ku.R)((T,V)=>function Ji(N,d,m){return d.forEach(T=>{m.indexOf(T.type)>-1&&(N=function Ho(N,d){switch(d.type){case"added":if(!N[d.newIndex]||!N[d.newIndex].doc.ref.isEqual(d.doc.ref))return ic(N,d.newIndex,0,d);break;case"modified":if(null==N[d.oldIndex]||N[d.oldIndex].doc.ref.isEqual(d.doc.ref)){if(d.oldIndex!==d.newIndex){const m=N.slice();return m.splice(d.oldIndex,1),m.splice(d.newIndex,0,d),m}return ic(N,d.newIndex,1,d)}break;case"removed":if(N[d.oldIndex]&&N[d.oldIndex].doc.ref.isEqual(d.doc.ref))return ic(N,d.oldIndex,1)}return N}(N,T))}),N}(T,V.map(Y=>Y.payload),d),[]),(0,lo.x)(),(0,Si.U)(T=>T.map(V=>({type:V.type,payload:V}))))}function ic(N,d,m,...T){const V=N.slice();return V.splice(d,m,...T),V}function $i(N){return(!N||0===N.length)&&(N=["added","removed","modified"]),N}class Do{ref;query;afs;constructor(d,m,T){this.ref=d,this.query=m,this.afs=T}stateChanges(d){let m=Ru(this.query,this.afs.schedulers.outsideAngular);return d&&d.length>0&&(m=m.pipe((0,Si.U)(T=>T.filter(V=>d.indexOf(V.type)>-1)))),m.pipe((0,Es.O)(void 0),cu(),(0,bs.h)(([T,V])=>V.length>0||!T),(0,Si.U)(([,T])=>T),Hr.iC)}auditTrail(d){return this.stateChanges(d).pipe((0,Ku.R)((m,T)=>[...m,...T],[]))}snapshotChanges(d){const m=$i(d);return Qu(this.query,m,this.afs.schedulers.outsideAngular).pipe(Hr.iC)}valueChanges(d={}){return Za(this.query,this.afs.schedulers.outsideAngular).pipe((0,Si.U)(m=>m.payload.docs.map(T=>d.idField?{...T.data(),[d.idField]:T.id}:T.data())),Hr.iC)}get(d){return(0,vs.D)(this.query.get(d)).pipe(Hr.iC)}add(d){return this.ref.add(d)}doc(d){return new $o(this.ref.doc(d),this.afs)}}class sc{query;afs;constructor(d,m){this.query=d,this.afs=m}stateChanges(d){return d&&0!==d.length?Ru(this.query,this.afs.schedulers.outsideAngular).pipe((0,Si.U)(m=>m.filter(T=>d.indexOf(T.type)>-1)),(0,bs.h)(m=>m.length>0),Hr.iC):Ru(this.query,this.afs.schedulers.outsideAngular).pipe(Hr.iC)}auditTrail(d){return this.stateChanges(d).pipe((0,Ku.R)((m,T)=>[...m,...T],[]))}snapshotChanges(d){const m=$i(d);return Qu(this.query,m,this.afs.schedulers.outsideAngular).pipe(Hr.iC)}valueChanges(d={}){return Za(this.query,this.afs.schedulers.outsideAngular).pipe((0,Si.U)(T=>T.payload.docs.map(V=>d.idField?{[d.idField]:V.id,...V.data()}:V.data())),Hr.iC)}get(d){return(0,vs.D)(this.query.get(d)).pipe(Hr.iC)}}const Qa=new W.OlP("angularfire2.enableFirestorePersistence"),ka=new W.OlP("angularfire2.firestore.persistenceSettings"),Md=new W.OlP("angularfire2.firestore.settings"),Is=new W.OlP("angularfire2.firestore.use-emulator");function Fa(N,d=(m=>m)){return{query:d(N),ref:N}}let pu=(()=>{class N{schedulers;firestore;persistenceEnabled$;constructor(m,T,V,Y,le,_e,Re,it,Tt,Pt,Tn,nn,cn,bt,En,kr,ui){this.schedulers=Re;const Yn=(0,ro.on)(m,_e,T),Ti=Tt;Pt&&(0,Ei.nw)(Yn,_e,Tn,cn,bt,En,nn,kr),[this.firestore,this.persistenceEnabled$]=(0,ro.cc)(`${Yn.name}.firestore`,"AngularFirestore",Yn.name,()=>{const Ms=_e.runOutsideAngular(()=>Yn.firestore());if(Y&&Ms.settings(Y),Ti&&Ms.useEmulator(...Ti),V&&!(0,ys.PM)(le)){const In=()=>{try{return(0,vs.D)(Ms.enablePersistence(it||void 0).then(()=>!0,()=>!1))}catch(Jn){return typeof console<"u"&&console.warn(Jn),(0,Fs.of)(!1)}};return[Ms,_e.runOutsideAngular(In)]}return[Ms,(0,Fs.of)(!1)]},[Y,Ti,V])}collection(m,T){let V;V="string"==typeof m?this.firestore.collection(m):m;const{ref:Y,query:le}=Fa(V,T),_e=this.schedulers.ngZone.run(()=>Y);return new Do(_e,le,this)}collectionGroup(m,T){const V=T||(le=>le),Y=this.firestore.collectionGroup(m);return new sc(V(Y),this)}doc(m){let T;T="string"==typeof m?this.firestore.doc(m):m;const V=this.schedulers.ngZone.run(()=>T);return new $o(V,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(T){return new(T||N)(W.LFG(ro.Dh),W.LFG(ro.xv,8),W.LFG(Qa,8),W.LFG(Md,8),W.LFG(W.Lbi),W.LFG(W.R0b),W.LFG(Hr.HU),W.LFG(ka,8),W.LFG(Is,8),W.LFG(Ei.zQ,8),W.LFG(Ei.Qv,8),W.LFG(Ei.L6,8),W.LFG(Ei._Q,8),W.LFG(Ei.rT,8),W.LFG(Ei.lh,8),W.LFG(Ei.f7,8),W.LFG(Hr.Rf,8))};static \u0275prov=W.Yz7({token:N,factory:N.\u0275fac,providedIn:"any"})}return N})(),aa=(()=>{class N{constructor(){rc.Z.registerVersion("angularfire",Hr.q4.full,"fst-compat")}static enablePersistence(m){return{ngModule:N,providers:[{provide:Qa,useValue:!0},{provide:ka,useValue:m}]}}static \u0275fac=function(T){return new(T||N)};static \u0275mod=W.oAB({type:N});static \u0275inj=W.cJS({providers:[pu]})}return N})();var zo=U(721),pa=U(7350),ua=U(7679),oc=U(553);const La={apiKey:"AIzaSyAQcbxYDaaTa5gQya6GglbXHSrhD_22-ig",authDomain:"clinica-online-laboiv.firebaseapp.com",projectId:"clinica-online-laboiv",storageBucket:"clinica-online-laboiv.appspot.com",messagingSenderId:"236997059569",appId:"1:236997059569:web:ef51fe1275453ff2155a50"};let Yu=(()=>{class N{static#e=this.\u0275fac=function(T){return new(T||N)};static#t=this.\u0275mod=W.oAB({type:N,bootstrap:[bi]});static#n=this.\u0275inj=W.cJS({providers:[{provide:ua.BZ,useValue:{siteKey:oc.N.recaptcha.siteKey}}],imports:[h.b2,ss,Ar.u5,ys.ez,Br.ef,C,Dl,ro.hO.initializeApp(La),aa,Wu.TE,ua.a,ua.lQ,(0,zo.hX)(()=>(0,zo.ZF)(La)),(0,pa.Cm)(()=>(0,pa.ad)())]})}return N})();h.q6().bootstrapModule(Yu).catch(N=>console.error(N))},5619:(Ot,Le,U)=>{U.d(Le,{X:()=>W});var h=U(8645);class W extends h.x{constructor(ve){super(),this._value=ve}get value(){return this.getValue()}_subscribe(ve){const me=super._subscribe(ve);return!me.closed&&ve.next(this._value),me}getValue(){const{hasError:ve,thrownError:me,_value:we}=this;if(ve)throw me;return this._throwIfClosed(),we}next(ve){super.next(this._value=ve)}}},5592:(Ot,Le,U)=>{U.d(Le,{y:()=>ye});var h=U(305),W=U(7394),K=U(4850),ve=U(8407),me=U(2653),we=U(4674),Ce=U(1441);let ye=(()=>{class pe{constructor(Ve){Ve&&(this._subscribe=Ve)}lift(Ve){const ot=new pe;return ot.source=this,ot.operator=Ve,ot}subscribe(Ve,ot,Qe){const mt=function ie(pe){return pe&&pe instanceof h.Lv||function X(pe){return pe&&(0,we.m)(pe.next)&&(0,we.m)(pe.error)&&(0,we.m)(pe.complete)}(pe)&&(0,W.Nn)(pe)}(Ve)?Ve:new h.Hp(Ve,ot,Qe);return(0,Ce.x)(()=>{const{operator:nt,source:Vt}=this;mt.add(nt?nt.call(mt,Vt):Vt?this._subscribe(mt):this._trySubscribe(mt))}),mt}_trySubscribe(Ve){try{return this._subscribe(Ve)}catch(ot){Ve.error(ot)}}forEach(Ve,ot){return new(ot=De(ot))((Qe,mt)=>{const nt=new h.Hp({next:Vt=>{try{Ve(Vt)}catch(ut){mt(ut),nt.unsubscribe()}},error:mt,complete:Qe});this.subscribe(nt)})}_subscribe(Ve){var ot;return null===(ot=this.source)||void 0===ot?void 0:ot.subscribe(Ve)}[K.L](){return this}pipe(...Ve){return(0,ve.U)(Ve)(this)}toPromise(Ve){return new(Ve=De(Ve))((ot,Qe)=>{let mt;this.subscribe(nt=>mt=nt,nt=>Qe(nt),()=>ot(mt))})}}return pe.create=ze=>new pe(ze),pe})();function De(pe){var ze;return null!==(ze=pe??me.config.Promise)&&void 0!==ze?ze:Promise}},8645:(Ot,Le,U)=>{U.d(Le,{x:()=>Ce});var h=U(5592),W=U(7394);const ve=(0,U(2306).d)(De=>function(){De(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var me=U(9039),we=U(1441);let Ce=(()=>{class De extends h.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(ie){const pe=new ye(this,this);return pe.operator=ie,pe}_throwIfClosed(){if(this.closed)throw new ve}next(ie){(0,we.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const pe of this.currentObservers)pe.next(ie)}})}error(ie){(0,we.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=ie;const{observers:pe}=this;for(;pe.length;)pe.shift().error(ie)}})}complete(){(0,we.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:ie}=this;for(;ie.length;)ie.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var ie;return(null===(ie=this.observers)||void 0===ie?void 0:ie.length)>0}_trySubscribe(ie){return this._throwIfClosed(),super._trySubscribe(ie)}_subscribe(ie){return this._throwIfClosed(),this._checkFinalizedStatuses(ie),this._innerSubscribe(ie)}_innerSubscribe(ie){const{hasError:pe,isStopped:ze,observers:Ve}=this;return pe||ze?W.Lc:(this.currentObservers=null,Ve.push(ie),new W.w0(()=>{this.currentObservers=null,(0,me.P)(Ve,ie)}))}_checkFinalizedStatuses(ie){const{hasError:pe,thrownError:ze,isStopped:Ve}=this;pe?ie.error(ze):Ve&&ie.complete()}asObservable(){const ie=new h.y;return ie.source=this,ie}}return De.create=(X,ie)=>new ye(X,ie),De})();class ye extends Ce{constructor(X,ie){super(),this.destination=X,this.source=ie}next(X){var ie,pe;null===(pe=null===(ie=this.destination)||void 0===ie?void 0:ie.next)||void 0===pe||pe.call(ie,X)}error(X){var ie,pe;null===(pe=null===(ie=this.destination)||void 0===ie?void 0:ie.error)||void 0===pe||pe.call(ie,X)}complete(){var X,ie;null===(ie=null===(X=this.destination)||void 0===X?void 0:X.complete)||void 0===ie||ie.call(X)}_subscribe(X){var ie,pe;return null!==(pe=null===(ie=this.source)||void 0===ie?void 0:ie.subscribe(X))&&void 0!==pe?pe:W.Lc}}},305:(Ot,Le,U)=>{U.d(Le,{Hp:()=>Qe,Lv:()=>pe});var h=U(4674),W=U(7394),K=U(2653),ve=U(3894),me=U(2420);const we=De("C",void 0,void 0);function De(ce,Be,be){return{kind:ce,value:Be,error:be}}var X=U(7599),ie=U(1441);class pe extends W.w0{constructor(Be){super(),this.isStopped=!1,Be?(this.destination=Be,(0,W.Nn)(Be)&&Be.add(this)):this.destination=ut}static create(Be,be,Ie){return new Qe(Be,be,Ie)}next(Be){this.isStopped?Vt(function ye(ce){return De("N",ce,void 0)}(Be),this):this._next(Be)}error(Be){this.isStopped?Vt(function Ce(ce){return De("E",void 0,ce)}(Be),this):(this.isStopped=!0,this._error(Be))}complete(){this.isStopped?Vt(we,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Be){this.destination.next(Be)}_error(Be){try{this.destination.error(Be)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const ze=Function.prototype.bind;function Ve(ce,Be){return ze.call(ce,Be)}class ot{constructor(Be){this.partialObserver=Be}next(Be){const{partialObserver:be}=this;if(be.next)try{be.next(Be)}catch(Ie){mt(Ie)}}error(Be){const{partialObserver:be}=this;if(be.error)try{be.error(Be)}catch(Ie){mt(Ie)}else mt(Be)}complete(){const{partialObserver:Be}=this;if(Be.complete)try{Be.complete()}catch(be){mt(be)}}}class Qe extends pe{constructor(Be,be,Ie){let Je;if(super(),(0,h.m)(Be)||!Be)Je={next:Be??void 0,error:be??void 0,complete:Ie??void 0};else{let Te;this&&K.config.useDeprecatedNextContext?(Te=Object.create(Be),Te.unsubscribe=()=>this.unsubscribe(),Je={next:Be.next&&Ve(Be.next,Te),error:Be.error&&Ve(Be.error,Te),complete:Be.complete&&Ve(Be.complete,Te)}):Je=Be}this.destination=new ot(Je)}}function mt(ce){K.config.useDeprecatedSynchronousErrorHandling?(0,ie.O)(ce):(0,ve.h)(ce)}function Vt(ce,Be){const{onStoppedNotification:be}=K.config;be&&X.z.setTimeout(()=>be(ce,Be))}const ut={closed:!0,next:me.Z,error:function nt(ce){throw ce},complete:me.Z}},7394:(Ot,Le,U)=>{U.d(Le,{Lc:()=>we,w0:()=>me,Nn:()=>Ce});var h=U(4674);const K=(0,U(2306).d)(De=>function(ie){De(this),this.message=ie?`${ie.length} errors occurred during unsubscription:\n${ie.map((pe,ze)=>`${ze+1}) ${pe.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=ie});var ve=U(9039);class me{constructor(X){this.initialTeardown=X,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let X;if(!this.closed){this.closed=!0;const{_parentage:ie}=this;if(ie)if(this._parentage=null,Array.isArray(ie))for(const Ve of ie)Ve.remove(this);else ie.remove(this);const{initialTeardown:pe}=this;if((0,h.m)(pe))try{pe()}catch(Ve){X=Ve instanceof K?Ve.errors:[Ve]}const{_finalizers:ze}=this;if(ze){this._finalizers=null;for(const Ve of ze)try{ye(Ve)}catch(ot){X=X??[],ot instanceof K?X=[...X,...ot.errors]:X.push(ot)}}if(X)throw new K(X)}}add(X){var ie;if(X&&X!==this)if(this.closed)ye(X);else{if(X instanceof me){if(X.closed||X._hasParent(this))return;X._addParent(this)}(this._finalizers=null!==(ie=this._finalizers)&&void 0!==ie?ie:[]).push(X)}}_hasParent(X){const{_parentage:ie}=this;return ie===X||Array.isArray(ie)&&ie.includes(X)}_addParent(X){const{_parentage:ie}=this;this._parentage=Array.isArray(ie)?(ie.push(X),ie):ie?[ie,X]:X}_removeParent(X){const{_parentage:ie}=this;ie===X?this._parentage=null:Array.isArray(ie)&&(0,ve.P)(ie,X)}remove(X){const{_finalizers:ie}=this;ie&&(0,ve.P)(ie,X),X instanceof me&&X._removeParent(this)}}me.EMPTY=(()=>{const De=new me;return De.closed=!0,De})();const we=me.EMPTY;function Ce(De){return De instanceof me||De&&"closed"in De&&(0,h.m)(De.remove)&&(0,h.m)(De.add)&&(0,h.m)(De.unsubscribe)}function ye(De){(0,h.m)(De)?De():De.unsubscribe()}},2653:(Ot,Le,U)=>{U.d(Le,{config:()=>h});const h={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},4036:(Ot,Le,U)=>{U.d(Le,{z:()=>K});var h=U(6973),W=U(305);function K(ve,me){const we="object"==typeof me;return new Promise((Ce,ye)=>{const De=new W.Hp({next:X=>{Ce(X),De.unsubscribe()},error:ye,complete:()=>{we?Ce(me.defaultValue):ye(new h.K)}});ve.subscribe(De)})}},5211:(Ot,Le,U)=>{U.d(Le,{z:()=>me});var h=U(7537),K=U(4564),ve=U(2459);function me(...we){return function W(){return(0,h.J)(1)}()((0,ve.D)(we,(0,K.yG)(we)))}},6232:(Ot,Le,U)=>{U.d(Le,{E:()=>W});const W=new(U(5592).y)(me=>me.complete())},2459:(Ot,Le,U)=>{U.d(Le,{D:()=>Be});var h=U(4829),W=U(3093),K=U(5137),we=U(5592),ye=U(4971),De=U(4674),X=U(7103);function pe(be,Ie){if(!be)throw new Error("Iterable cannot be null");return new we.y(Je=>{(0,X.f)(Je,Ie,()=>{const Te=be[Symbol.asyncIterator]();(0,X.f)(Je,Ie,()=>{Te.next().then(Oe=>{Oe.done?Je.complete():Je.next(Oe.value)})},0,!0)})})}var ze=U(8382),Ve=U(4026),ot=U(4266),Qe=U(3664),mt=U(5726),nt=U(9853),Vt=U(541);function Be(be,Ie){return Ie?function ce(be,Ie){if(null!=be){if((0,ze.c)(be))return function ve(be,Ie){return(0,h.Xf)(be).pipe((0,K.R)(Ie),(0,W.Q)(Ie))}(be,Ie);if((0,ot.z)(be))return function Ce(be,Ie){return new we.y(Je=>{let Te=0;return Ie.schedule(function(){Te===be.length?Je.complete():(Je.next(be[Te++]),Je.closed||this.schedule())})})}(be,Ie);if((0,Ve.t)(be))return function me(be,Ie){return(0,h.Xf)(be).pipe((0,K.R)(Ie),(0,W.Q)(Ie))}(be,Ie);if((0,mt.D)(be))return pe(be,Ie);if((0,Qe.T)(be))return function ie(be,Ie){return new we.y(Je=>{let Te;return(0,X.f)(Je,Ie,()=>{Te=be[ye.h](),(0,X.f)(Je,Ie,()=>{let Oe,et;try{({value:Oe,done:et}=Te.next())}catch(ft){return void Je.error(ft)}et?Je.complete():Je.next(Oe)},0,!0)}),()=>(0,De.m)(Te?.return)&&Te.return()})}(be,Ie);if((0,Vt.L)(be))return function ut(be,Ie){return pe((0,Vt.Q)(be),Ie)}(be,Ie)}throw(0,nt.z)(be)}(be,Ie):(0,h.Xf)(be)}},4829:(Ot,Le,U)=>{U.d(Le,{Xf:()=>ze});var h=U(7582),W=U(4266),K=U(4026),ve=U(5592),me=U(8382),we=U(5726),Ce=U(9853),ye=U(3664),De=U(541),X=U(4674),ie=U(3894),pe=U(4850);function ze(ce){if(ce instanceof ve.y)return ce;if(null!=ce){if((0,me.c)(ce))return function Ve(ce){return new ve.y(Be=>{const be=ce[pe.L]();if((0,X.m)(be.subscribe))return be.subscribe(Be);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(ce);if((0,W.z)(ce))return function ot(ce){return new ve.y(Be=>{for(let be=0;be<ce.length&&!Be.closed;be++)Be.next(ce[be]);Be.complete()})}(ce);if((0,K.t)(ce))return function Qe(ce){return new ve.y(Be=>{ce.then(be=>{Be.closed||(Be.next(be),Be.complete())},be=>Be.error(be)).then(null,ie.h)})}(ce);if((0,we.D)(ce))return nt(ce);if((0,ye.T)(ce))return function mt(ce){return new ve.y(Be=>{for(const be of ce)if(Be.next(be),Be.closed)return;Be.complete()})}(ce);if((0,De.L)(ce))return function Vt(ce){return nt((0,De.Q)(ce))}(ce)}throw(0,Ce.z)(ce)}function nt(ce){return new ve.y(Be=>{(function ut(ce,Be){var be,Ie,Je,Te;return(0,h.mG)(this,void 0,void 0,function*(){try{for(be=(0,h.KL)(ce);!(Ie=yield be.next()).done;)if(Be.next(Ie.value),Be.closed)return}catch(Oe){Je={error:Oe}}finally{try{Ie&&!Ie.done&&(Te=be.return)&&(yield Te.call(be))}finally{if(Je)throw Je.error}}Be.complete()})})(ce,Be).catch(be=>Be.error(be))})}},3019:(Ot,Le,U)=>{U.d(Le,{T:()=>we});var h=U(7537),W=U(4829),K=U(6232),ve=U(4564),me=U(2459);function we(...Ce){const ye=(0,ve.yG)(Ce),De=(0,ve._6)(Ce,1/0),X=Ce;return X.length?1===X.length?(0,W.Xf)(X[0]):(0,h.J)(De)((0,me.D)(X,ye)):K.E}},2096:(Ot,Le,U)=>{U.d(Le,{of:()=>K});var h=U(4564),W=U(2459);function K(...ve){const me=(0,h.yG)(ve);return(0,W.D)(ve,me)}},8251:(Ot,Le,U)=>{U.d(Le,{x:()=>W});var h=U(305);function W(ve,me,we,Ce,ye){return new K(ve,me,we,Ce,ye)}class K extends h.Lv{constructor(me,we,Ce,ye,De,X){super(me),this.onFinalize=De,this.shouldUnsubscribe=X,this._next=we?function(ie){try{we(ie)}catch(pe){me.error(pe)}}:super._next,this._error=ye?function(ie){try{ye(ie)}catch(pe){me.error(pe)}finally{this.unsubscribe()}}:super._error,this._complete=Ce?function(){try{Ce()}catch(ie){me.error(ie)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var me;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:we}=this;super.unsubscribe(),!we&&(null===(me=this.onFinalize)||void 0===me||me.call(this))}}}},6328:(Ot,Le,U)=>{U.d(Le,{b:()=>K});var h=U(1631),W=U(4674);function K(ve,me){return(0,W.m)(me)?(0,h.z)(ve,me,1):(0,h.z)(ve,1)}},3572:(Ot,Le,U)=>{U.d(Le,{d:()=>K});var h=U(9360),W=U(8251);function K(ve){return(0,h.e)((me,we)=>{let Ce=!1;me.subscribe((0,W.x)(we,ye=>{Ce=!0,we.next(ye)},()=>{Ce||we.next(ve),we.complete()}))})}},3997:(Ot,Le,U)=>{U.d(Le,{x:()=>ve});var h=U(2737),W=U(9360),K=U(8251);function ve(we,Ce=h.y){return we=we??me,(0,W.e)((ye,De)=>{let X,ie=!0;ye.subscribe((0,K.x)(De,pe=>{const ze=Ce(pe);(ie||!we(X,ze))&&(ie=!1,X=ze,De.next(pe))}))})}function me(we,Ce){return we===Ce}},2181:(Ot,Le,U)=>{U.d(Le,{h:()=>K});var h=U(9360),W=U(8251);function K(ve,me){return(0,h.e)((we,Ce)=>{let ye=0;we.subscribe((0,W.x)(Ce,De=>ve.call(me,De,ye++)&&Ce.next(De)))})}},4716:(Ot,Le,U)=>{U.d(Le,{x:()=>W});var h=U(9360);function W(K){return(0,h.e)((ve,me)=>{try{ve.subscribe(me)}finally{me.add(K)}})}},1374:(Ot,Le,U)=>{U.d(Le,{P:()=>Ce});var h=U(6973),W=U(2181),K=U(8180),ve=U(3572),me=U(3026),we=U(2737);function Ce(ye,De){const X=arguments.length>=2;return ie=>ie.pipe(ye?(0,W.h)((pe,ze)=>ye(pe,ze,ie)):we.y,(0,K.q)(1),X?(0,ve.d)(De):(0,me.T)(()=>new h.K))}},7398:(Ot,Le,U)=>{U.d(Le,{U:()=>K});var h=U(9360),W=U(8251);function K(ve,me){return(0,h.e)((we,Ce)=>{let ye=0;we.subscribe((0,W.x)(Ce,De=>{Ce.next(ve.call(me,De,ye++))}))})}},7537:(Ot,Le,U)=>{U.d(Le,{J:()=>K});var h=U(1631),W=U(2737);function K(ve=1/0){return(0,h.z)(W.y,ve)}},1631:(Ot,Le,U)=>{U.d(Le,{z:()=>ye});var h=U(7398),W=U(4829),K=U(9360),ve=U(7103),me=U(8251),Ce=U(4674);function ye(De,X,ie=1/0){return(0,Ce.m)(X)?ye((pe,ze)=>(0,h.U)((Ve,ot)=>X(pe,Ve,ze,ot))((0,W.Xf)(De(pe,ze))),ie):("number"==typeof X&&(ie=X),(0,K.e)((pe,ze)=>function we(De,X,ie,pe,ze,Ve,ot,Qe){const mt=[];let nt=0,Vt=0,ut=!1;const ce=()=>{ut&&!mt.length&&!nt&&X.complete()},Be=Ie=>nt<pe?be(Ie):mt.push(Ie),be=Ie=>{Ve&&X.next(Ie),nt++;let Je=!1;(0,W.Xf)(ie(Ie,Vt++)).subscribe((0,me.x)(X,Te=>{ze?.(Te),Ve?Be(Te):X.next(Te)},()=>{Je=!0},void 0,()=>{if(Je)try{for(nt--;mt.length&&nt<pe;){const Te=mt.shift();ot?(0,ve.f)(X,ot,()=>be(Te)):be(Te)}ce()}catch(Te){X.error(Te)}}))};return De.subscribe((0,me.x)(X,Be,()=>{ut=!0,ce()})),()=>{Qe?.()}}(pe,ze,De,ie)))}},3093:(Ot,Le,U)=>{U.d(Le,{Q:()=>ve});var h=U(7103),W=U(9360),K=U(8251);function ve(me,we=0){return(0,W.e)((Ce,ye)=>{Ce.subscribe((0,K.x)(ye,De=>(0,h.f)(ye,me,()=>ye.next(De),we),()=>(0,h.f)(ye,me,()=>ye.complete(),we),De=>(0,h.f)(ye,me,()=>ye.error(De),we)))})}},6699:(Ot,Le,U)=>{U.d(Le,{R:()=>ve});var h=U(9360),W=U(8251);function ve(me,we){return(0,h.e)(function K(me,we,Ce,ye,De){return(X,ie)=>{let pe=Ce,ze=we,Ve=0;X.subscribe((0,W.x)(ie,ot=>{const Qe=Ve++;ze=pe?me(ze,ot,Qe):(pe=!0,ot),ye&&ie.next(ze)},De&&(()=>{pe&&ie.next(ze),ie.complete()})))}}(me,we,arguments.length>=2,!0))}},3020:(Ot,Le,U)=>{U.d(Le,{B:()=>me});var h=U(4829),W=U(8645),K=U(305),ve=U(9360);function me(Ce={}){const{connector:ye=(()=>new W.x),resetOnError:De=!0,resetOnComplete:X=!0,resetOnRefCountZero:ie=!0}=Ce;return pe=>{let ze,Ve,ot,Qe=0,mt=!1,nt=!1;const Vt=()=>{Ve?.unsubscribe(),Ve=void 0},ut=()=>{Vt(),ze=ot=void 0,mt=nt=!1},ce=()=>{const Be=ze;ut(),Be?.unsubscribe()};return(0,ve.e)((Be,be)=>{Qe++,!nt&&!mt&&Vt();const Ie=ot=ot??ye();be.add(()=>{Qe--,0===Qe&&!nt&&!mt&&(Ve=we(ce,ie))}),Ie.subscribe(be),!ze&&Qe>0&&(ze=new K.Hp({next:Je=>Ie.next(Je),error:Je=>{nt=!0,Vt(),Ve=we(ut,De,Je),Ie.error(Je)},complete:()=>{mt=!0,Vt(),Ve=we(ut,X),Ie.complete()}}),(0,h.Xf)(Be).subscribe(ze))})(pe)}}function we(Ce,ye,...De){if(!0===ye)return void Ce();if(!1===ye)return;const X=new K.Hp({next:()=>{X.unsubscribe(),Ce()}});return(0,h.Xf)(ye(...De)).subscribe(X)}},7921:(Ot,Le,U)=>{U.d(Le,{O:()=>ve});var h=U(5211),W=U(4564),K=U(9360);function ve(...me){const we=(0,W.yG)(me);return(0,K.e)((Ce,ye)=>{(we?(0,h.z)(me,Ce,we):(0,h.z)(me,Ce)).subscribe(ye)})}},5137:(Ot,Le,U)=>{U.d(Le,{R:()=>W});var h=U(9360);function W(K,ve=0){return(0,h.e)((me,we)=>{we.add(K.schedule(()=>me.subscribe(we),ve))})}},4664:(Ot,Le,U)=>{U.d(Le,{w:()=>ve});var h=U(4829),W=U(9360),K=U(8251);function ve(me,we){return(0,W.e)((Ce,ye)=>{let De=null,X=0,ie=!1;const pe=()=>ie&&!De&&ye.complete();Ce.subscribe((0,K.x)(ye,ze=>{De?.unsubscribe();let Ve=0;const ot=X++;(0,h.Xf)(me(ze,ot)).subscribe(De=(0,K.x)(ye,Qe=>ye.next(we?we(ze,Qe,ot,Ve++):Qe),()=>{De=null,pe()}))},()=>{ie=!0,pe()}))})}},8180:(Ot,Le,U)=>{U.d(Le,{q:()=>ve});var h=U(6232),W=U(9360),K=U(8251);function ve(me){return me<=0?()=>h.E:(0,W.e)((we,Ce)=>{let ye=0;we.subscribe((0,K.x)(Ce,De=>{++ye<=me&&(Ce.next(De),me<=ye&&Ce.complete())}))})}},9773:(Ot,Le,U)=>{U.d(Le,{R:()=>me});var h=U(9360),W=U(8251),K=U(4829),ve=U(2420);function me(we){return(0,h.e)((Ce,ye)=>{(0,K.Xf)(we).subscribe((0,W.x)(ye,()=>ye.complete(),ve.Z)),!ye.closed&&Ce.subscribe(ye)})}},9397:(Ot,Le,U)=>{U.d(Le,{b:()=>me});var h=U(4674),W=U(9360),K=U(8251),ve=U(2737);function me(we,Ce,ye){const De=(0,h.m)(we)||Ce||ye?{next:we,error:Ce,complete:ye}:we;return De?(0,W.e)((X,ie)=>{var pe;null===(pe=De.subscribe)||void 0===pe||pe.call(De);let ze=!0;X.subscribe((0,K.x)(ie,Ve=>{var ot;null===(ot=De.next)||void 0===ot||ot.call(De,Ve),ie.next(Ve)},()=>{var Ve;ze=!1,null===(Ve=De.complete)||void 0===Ve||Ve.call(De),ie.complete()},Ve=>{var ot;ze=!1,null===(ot=De.error)||void 0===ot||ot.call(De,Ve),ie.error(Ve)},()=>{var Ve,ot;ze&&(null===(Ve=De.unsubscribe)||void 0===Ve||Ve.call(De)),null===(ot=De.finalize)||void 0===ot||ot.call(De)}))}):ve.y}},3026:(Ot,Le,U)=>{U.d(Le,{T:()=>ve});var h=U(6973),W=U(9360),K=U(8251);function ve(we=me){return(0,W.e)((Ce,ye)=>{let De=!1;Ce.subscribe((0,K.x)(ye,X=>{De=!0,ye.next(X)},()=>De?ye.complete():ye.error(we())))})}function me(){return new h.K}},1954:(Ot,Le,U)=>{U.d(Le,{o:()=>me});var h=U(7394);class W extends h.w0{constructor(Ce,ye){super()}schedule(Ce,ye=0){return this}}const K={setInterval(we,Ce,...ye){const{delegate:De}=K;return De?.setInterval?De.setInterval(we,Ce,...ye):setInterval(we,Ce,...ye)},clearInterval(we){const{delegate:Ce}=K;return(Ce?.clearInterval||clearInterval)(we)},delegate:void 0};var ve=U(9039);class me extends W{constructor(Ce,ye){super(Ce,ye),this.scheduler=Ce,this.work=ye,this.pending=!1}schedule(Ce,ye=0){var De;if(this.closed)return this;this.state=Ce;const X=this.id,ie=this.scheduler;return null!=X&&(this.id=this.recycleAsyncId(ie,X,ye)),this.pending=!0,this.delay=ye,this.id=null!==(De=this.id)&&void 0!==De?De:this.requestAsyncId(ie,this.id,ye),this}requestAsyncId(Ce,ye,De=0){return K.setInterval(Ce.flush.bind(Ce,this),De)}recycleAsyncId(Ce,ye,De=0){if(null!=De&&this.delay===De&&!1===this.pending)return ye;null!=ye&&K.clearInterval(ye)}execute(Ce,ye){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const De=this._execute(Ce,ye);if(De)return De;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(Ce,ye){let X,De=!1;try{this.work(Ce)}catch(ie){De=!0,X=ie||new Error("Scheduled action threw falsy error")}if(De)return this.unsubscribe(),X}unsubscribe(){if(!this.closed){const{id:Ce,scheduler:ye}=this,{actions:De}=ye;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ve.P)(De,this),null!=Ce&&(this.id=this.recycleAsyncId(ye,Ce,null)),this.delay=null,super.unsubscribe()}}}},2631:(Ot,Le,U)=>{U.d(Le,{v:()=>K});var h=U(4552);class W{constructor(me,we=W.now){this.schedulerActionCtor=me,this.now=we}schedule(me,we=0,Ce){return new this.schedulerActionCtor(this,me).schedule(Ce,we)}}W.now=h.l.now;class K extends W{constructor(me,we=W.now){super(me,we),this.actions=[],this._active=!1}flush(me){const{actions:we}=this;if(this._active)return void we.push(me);let Ce;this._active=!0;do{if(Ce=me.execute(me.state,me.delay))break}while(me=we.shift());if(this._active=!1,Ce){for(;me=we.shift();)me.unsubscribe();throw Ce}}}},6321:(Ot,Le,U)=>{U.d(Le,{z:()=>K});var h=U(1954);const K=new(U(2631).v)(h.o)},4552:(Ot,Le,U)=>{U.d(Le,{l:()=>h});const h={now:()=>(h.delegate||Date).now(),delegate:void 0}},7599:(Ot,Le,U)=>{U.d(Le,{z:()=>h});const h={setTimeout(W,K,...ve){const{delegate:me}=h;return me?.setTimeout?me.setTimeout(W,K,...ve):setTimeout(W,K,...ve)},clearTimeout(W){const{delegate:K}=h;return(K?.clearTimeout||clearTimeout)(W)},delegate:void 0}},4971:(Ot,Le,U)=>{U.d(Le,{h:()=>W});const W=function h(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},4850:(Ot,Le,U)=>{U.d(Le,{L:()=>h});const h="function"==typeof Symbol&&Symbol.observable||"@@observable"},6973:(Ot,Le,U)=>{U.d(Le,{K:()=>W});const W=(0,U(2306).d)(K=>function(){K(this),this.name="EmptyError",this.message="no elements in sequence"})},4564:(Ot,Le,U)=>{U.d(Le,{_6:()=>we,jO:()=>ve,yG:()=>me});var h=U(4674);function K(Ce){return Ce[Ce.length-1]}function ve(Ce){return(0,h.m)(K(Ce))?Ce.pop():void 0}function me(Ce){return function W(Ce){return Ce&&(0,h.m)(Ce.schedule)}(K(Ce))?Ce.pop():void 0}function we(Ce,ye){return"number"==typeof K(Ce)?Ce.pop():ye}},7453:(Ot,Le,U)=>{U.d(Le,{D:()=>me});const{isArray:h}=Array,{getPrototypeOf:W,prototype:K,keys:ve}=Object;function me(Ce){if(1===Ce.length){const ye=Ce[0];if(h(ye))return{args:ye,keys:null};if(function we(Ce){return Ce&&"object"==typeof Ce&&W(Ce)===K}(ye)){const De=ve(ye);return{args:De.map(X=>ye[X]),keys:De}}}return{args:Ce,keys:null}}},9039:(Ot,Le,U)=>{function h(W,K){if(W){const ve=W.indexOf(K);0<=ve&&W.splice(ve,1)}}U.d(Le,{P:()=>h})},2306:(Ot,Le,U)=>{function h(W){const ve=W(me=>{Error.call(me),me.stack=(new Error).stack});return ve.prototype=Object.create(Error.prototype),ve.prototype.constructor=ve,ve}U.d(Le,{d:()=>h})},2714:(Ot,Le,U)=>{function h(W,K){return W.reduce((ve,me,we)=>(ve[me]=K[we],ve),{})}U.d(Le,{n:()=>h})},1441:(Ot,Le,U)=>{U.d(Le,{O:()=>ve,x:()=>K});var h=U(2653);let W=null;function K(me){if(h.config.useDeprecatedSynchronousErrorHandling){const we=!W;if(we&&(W={errorThrown:!1,error:null}),me(),we){const{errorThrown:Ce,error:ye}=W;if(W=null,Ce)throw ye}}else me()}function ve(me){h.config.useDeprecatedSynchronousErrorHandling&&W&&(W.errorThrown=!0,W.error=me)}},7103:(Ot,Le,U)=>{function h(W,K,ve,me=0,we=!1){const Ce=K.schedule(function(){ve(),we?W.add(this.schedule(null,me)):this.unsubscribe()},me);if(W.add(Ce),!we)return Ce}U.d(Le,{f:()=>h})},2737:(Ot,Le,U)=>{function h(W){return W}U.d(Le,{y:()=>h})},4266:(Ot,Le,U)=>{U.d(Le,{z:()=>h});const h=W=>W&&"number"==typeof W.length&&"function"!=typeof W},5726:(Ot,Le,U)=>{U.d(Le,{D:()=>W});var h=U(4674);function W(K){return Symbol.asyncIterator&&(0,h.m)(K?.[Symbol.asyncIterator])}},4674:(Ot,Le,U)=>{function h(W){return"function"==typeof W}U.d(Le,{m:()=>h})},8382:(Ot,Le,U)=>{U.d(Le,{c:()=>K});var h=U(4850),W=U(4674);function K(ve){return(0,W.m)(ve[h.L])}},3664:(Ot,Le,U)=>{U.d(Le,{T:()=>K});var h=U(4971),W=U(4674);function K(ve){return(0,W.m)(ve?.[h.h])}},4026:(Ot,Le,U)=>{U.d(Le,{t:()=>W});var h=U(4674);function W(K){return(0,h.m)(K?.then)}},541:(Ot,Le,U)=>{U.d(Le,{L:()=>ve,Q:()=>K});var h=U(7582),W=U(4674);function K(me){return(0,h.FC)(this,arguments,function*(){const Ce=me.getReader();try{for(;;){const{value:ye,done:De}=yield(0,h.qq)(Ce.read());if(De)return yield(0,h.qq)(void 0);yield yield(0,h.qq)(ye)}}finally{Ce.releaseLock()}})}function ve(me){return(0,W.m)(me?.getReader)}},9360:(Ot,Le,U)=>{U.d(Le,{A:()=>W,e:()=>K});var h=U(4674);function W(ve){return(0,h.m)(ve?.lift)}function K(ve){return me=>{if(W(me))return me.lift(function(we){try{return ve(we,this)}catch(Ce){this.error(Ce)}});throw new TypeError("Unable to lift unknown Observable type")}}},7400:(Ot,Le,U)=>{U.d(Le,{Z:()=>ve});var h=U(7398);const{isArray:W}=Array;function ve(me){return(0,h.U)(we=>function K(me,we){return W(we)?me(...we):me(we)}(me,we))}},2420:(Ot,Le,U)=>{function h(){}U.d(Le,{Z:()=>h})},8407:(Ot,Le,U)=>{U.d(Le,{U:()=>K,z:()=>W});var h=U(2737);function W(...ve){return K(ve)}function K(ve){return 0===ve.length?h.y:1===ve.length?ve[0]:function(we){return ve.reduce((Ce,ye)=>ye(Ce),we)}}},3894:(Ot,Le,U)=>{U.d(Le,{h:()=>K});var h=U(2653),W=U(7599);function K(ve){W.z.setTimeout(()=>{const{onUnhandledError:me}=h.config;if(!me)throw ve;me(ve)})}},9853:(Ot,Le,U)=>{function h(W){return new TypeError(`You provided ${null!==W&&"object"==typeof W?"an invalid object":`'${W}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}U.d(Le,{z:()=>h})},6825:(Ot,Le,U)=>{U.d(Le,{LC:()=>W,SB:()=>De,X$:()=>ve,ZE:()=>nt,ZN:()=>mt,_7:()=>Ve,_j:()=>h,eR:()=>ie,jt:()=>me,k1:()=>Vt,l3:()=>K,oB:()=>ye,oQ:()=>pe,vP:()=>Ce});class h{}class W{}const K="*";function ve(ut,ce){return{type:7,name:ut,definitions:ce,options:{}}}function me(ut,ce=null){return{type:4,styles:ce,timings:ut}}function Ce(ut,ce=null){return{type:2,steps:ut,options:ce}}function ye(ut){return{type:6,styles:ut,offset:null}}function De(ut,ce,Be){return{type:0,name:ut,styles:ce,options:Be}}function ie(ut,ce,Be=null){return{type:1,expr:ut,animation:ce,options:Be}}function pe(ut,ce=null){return{type:8,animation:ut,options:ce}}function Ve(ut,ce=null){return{type:10,animation:ut,options:ce}}class mt{constructor(ce=0,Be=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=ce+Be}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(ce=>ce()),this._onDoneFns=[])}onStart(ce){this._originalOnStartFns.push(ce),this._onStartFns.push(ce)}onDone(ce){this._originalOnDoneFns.push(ce),this._onDoneFns.push(ce)}onDestroy(ce){this._onDestroyFns.push(ce)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(ce=>ce()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(ce=>ce()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(ce){this._position=this.totalTime?ce*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(ce){const Be="start"==ce?this._onStartFns:this._onDoneFns;Be.forEach(be=>be()),Be.length=0}}class nt{constructor(ce){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=ce;let Be=0,be=0,Ie=0;const Je=this.players.length;0==Je?queueMicrotask(()=>this._onFinish()):this.players.forEach(Te=>{Te.onDone(()=>{++Be==Je&&this._onFinish()}),Te.onDestroy(()=>{++be==Je&&this._onDestroy()}),Te.onStart(()=>{++Ie==Je&&this._onStart()})}),this.totalTime=this.players.reduce((Te,Oe)=>Math.max(Te,Oe.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(ce=>ce()),this._onDoneFns=[])}init(){this.players.forEach(ce=>ce.init())}onStart(ce){this._onStartFns.push(ce)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(ce=>ce()),this._onStartFns=[])}onDone(ce){this._onDoneFns.push(ce)}onDestroy(ce){this._onDestroyFns.push(ce)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(ce=>ce.play())}pause(){this.players.forEach(ce=>ce.pause())}restart(){this.players.forEach(ce=>ce.restart())}finish(){this._onFinish(),this.players.forEach(ce=>ce.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(ce=>ce.destroy()),this._onDestroyFns.forEach(ce=>ce()),this._onDestroyFns=[])}reset(){this.players.forEach(ce=>ce.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(ce){const Be=ce*this.totalTime;this.players.forEach(be=>{const Ie=be.totalTime?Math.min(1,Be/be.totalTime):1;be.setPosition(Ie)})}getPosition(){const ce=this.players.reduce((Be,be)=>null===Be||be.totalTime>Be.totalTime?be:Be,null);return null!=ce?ce.getPosition():0}beforeDestroy(){this.players.forEach(ce=>{ce.beforeDestroy&&ce.beforeDestroy()})}triggerCallback(ce){const Be="start"==ce?this._onStartFns:this._onDoneFns;Be.forEach(be=>be()),Be.length=0}}const Vt="!"},6814:(Ot,Le,U)=>{U.d(Le,{Do:()=>Qe,EM:()=>mr,HT:()=>ve,JF:()=>ms,K0:()=>we,Mx:()=>tn,NF:()=>Ai,Nd:()=>rs,O5:()=>ds,PC:()=>hs,PM:()=>ks,S$:()=>ze,V_:()=>ye,Ye:()=>mt,b0:()=>ot,bD:()=>er,ez:()=>Ki,mk:()=>lr,q:()=>K,sg:()=>tr,tP:()=>fs,w_:()=>me});var h=U(5879);let W=null;function K(){return W}function ve(A){W||(W=A)}class me{}const we=new h.OlP("DocumentToken");let Ce=(()=>{class A{historyGo(L){throw new Error("Not implemented")}static#e=this.\u0275fac=function(Q){return new(Q||A)};static#t=this.\u0275prov=h.Yz7({token:A,factory:function(){return(0,h.f3M)(De)},providedIn:"platform"})}return A})();const ye=new h.OlP("Location Initialized");let De=(()=>{class A extends Ce{constructor(){super(),this._doc=(0,h.f3M)(we),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return K().getBaseHref(this._doc)}onPopState(L){const Q=K().getGlobalEventTarget(this._doc,"window");return Q.addEventListener("popstate",L,!1),()=>Q.removeEventListener("popstate",L)}onHashChange(L){const Q=K().getGlobalEventTarget(this._doc,"window");return Q.addEventListener("hashchange",L,!1),()=>Q.removeEventListener("hashchange",L)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(L){this._location.pathname=L}pushState(L,Q,ge){this._history.pushState(L,Q,ge)}replaceState(L,Q,ge){this._history.replaceState(L,Q,ge)}forward(){this._history.forward()}back(){this._history.back()}historyGo(L=0){this._history.go(L)}getState(){return this._history.state}static#e=this.\u0275fac=function(Q){return new(Q||A)};static#t=this.\u0275prov=h.Yz7({token:A,factory:function(){return new A},providedIn:"platform"})}return A})();function X(A,J){if(0==A.length)return J;if(0==J.length)return A;let L=0;return A.endsWith("/")&&L++,J.startsWith("/")&&L++,2==L?A+J.substring(1):1==L?A+J:A+"/"+J}function ie(A){const J=A.match(/#|\?|$/),L=J&&J.index||A.length;return A.slice(0,L-("/"===A[L-1]?1:0))+A.slice(L)}function pe(A){return A&&"?"!==A[0]?"?"+A:A}let ze=(()=>{class A{historyGo(L){throw new Error("Not implemented")}static#e=this.\u0275fac=function(Q){return new(Q||A)};static#t=this.\u0275prov=h.Yz7({token:A,factory:function(){return(0,h.f3M)(ot)},providedIn:"root"})}return A})();const Ve=new h.OlP("appBaseHref");let ot=(()=>{class A extends ze{constructor(L,Q){super(),this._platformLocation=L,this._removeListenerFns=[],this._baseHref=Q??this._platformLocation.getBaseHrefFromDOM()??(0,h.f3M)(we).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(L){this._removeListenerFns.push(this._platformLocation.onPopState(L),this._platformLocation.onHashChange(L))}getBaseHref(){return this._baseHref}prepareExternalUrl(L){return X(this._baseHref,L)}path(L=!1){const Q=this._platformLocation.pathname+pe(this._platformLocation.search),ge=this._platformLocation.hash;return ge&&L?`${Q}${ge}`:Q}pushState(L,Q,ge,Ye){const lt=this.prepareExternalUrl(ge+pe(Ye));this._platformLocation.pushState(L,Q,lt)}replaceState(L,Q,ge,Ye){const lt=this.prepareExternalUrl(ge+pe(Ye));this._platformLocation.replaceState(L,Q,lt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(L=0){this._platformLocation.historyGo?.(L)}static#e=this.\u0275fac=function(Q){return new(Q||A)(h.LFG(Ce),h.LFG(Ve,8))};static#t=this.\u0275prov=h.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"})}return A})(),Qe=(()=>{class A extends ze{constructor(L,Q){super(),this._platformLocation=L,this._baseHref="",this._removeListenerFns=[],null!=Q&&(this._baseHref=Q)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(L){this._removeListenerFns.push(this._platformLocation.onPopState(L),this._platformLocation.onHashChange(L))}getBaseHref(){return this._baseHref}path(L=!1){let Q=this._platformLocation.hash;return null==Q&&(Q="#"),Q.length>0?Q.substring(1):Q}prepareExternalUrl(L){const Q=X(this._baseHref,L);return Q.length>0?"#"+Q:Q}pushState(L,Q,ge,Ye){let lt=this.prepareExternalUrl(ge+pe(Ye));0==lt.length&&(lt=this._platformLocation.pathname),this._platformLocation.pushState(L,Q,lt)}replaceState(L,Q,ge,Ye){let lt=this.prepareExternalUrl(ge+pe(Ye));0==lt.length&&(lt=this._platformLocation.pathname),this._platformLocation.replaceState(L,Q,lt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(L=0){this._platformLocation.historyGo?.(L)}static#e=this.\u0275fac=function(Q){return new(Q||A)(h.LFG(Ce),h.LFG(Ve,8))};static#t=this.\u0275prov=h.Yz7({token:A,factory:A.\u0275fac})}return A})(),mt=(()=>{class A{constructor(L){this._subject=new h.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=L;const Q=this._locationStrategy.getBaseHref();this._basePath=function ce(A){if(new RegExp("^(https?:)?//").test(A)){const[,L]=A.split(/\/\/[^\/]+/);return L}return A}(ie(ut(Q))),this._locationStrategy.onPopState(ge=>{this._subject.emit({url:this.path(!0),pop:!0,state:ge.state,type:ge.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(L=!1){return this.normalize(this._locationStrategy.path(L))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(L,Q=""){return this.path()==this.normalize(L+pe(Q))}normalize(L){return A.stripTrailingSlash(function Vt(A,J){if(!A||!J.startsWith(A))return J;const L=J.substring(A.length);return""===L||["/",";","?","#"].includes(L[0])?L:J}(this._basePath,ut(L)))}prepareExternalUrl(L){return L&&"/"!==L[0]&&(L="/"+L),this._locationStrategy.prepareExternalUrl(L)}go(L,Q="",ge=null){this._locationStrategy.pushState(ge,"",L,Q),this._notifyUrlChangeListeners(this.prepareExternalUrl(L+pe(Q)),ge)}replaceState(L,Q="",ge=null){this._locationStrategy.replaceState(ge,"",L,Q),this._notifyUrlChangeListeners(this.prepareExternalUrl(L+pe(Q)),ge)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(L=0){this._locationStrategy.historyGo?.(L)}onUrlChange(L){return this._urlChangeListeners.push(L),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(Q=>{this._notifyUrlChangeListeners(Q.url,Q.state)})),()=>{const Q=this._urlChangeListeners.indexOf(L);this._urlChangeListeners.splice(Q,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(L="",Q){this._urlChangeListeners.forEach(ge=>ge(L,Q))}subscribe(L,Q,ge){return this._subject.subscribe({next:L,error:Q,complete:ge})}static#e=this.normalizeQueryParams=pe;static#t=this.joinWithSlash=X;static#n=this.stripTrailingSlash=ie;static#r=this.\u0275fac=function(Q){return new(Q||A)(h.LFG(ze))};static#i=this.\u0275prov=h.Yz7({token:A,factory:function(){return function nt(){return new mt((0,h.LFG)(ze))}()},providedIn:"root"})}return A})();function ut(A){return A.replace(/\/index.html$/,"")}function tn(A,J){J=encodeURIComponent(J);for(const L of A.split(";")){const Q=L.indexOf("="),[ge,Ye]=-1==Q?[L,""]:[L.slice(0,Q),L.slice(Q+1)];if(ge.trim()===J)return decodeURIComponent(Ye)}return null}const yn=/\s+/,kn=[];let lr=(()=>{class A{constructor(L,Q,ge,Ye){this._iterableDiffers=L,this._keyValueDiffers=Q,this._ngEl=ge,this._renderer=Ye,this.initialClasses=kn,this.stateMap=new Map}set klass(L){this.initialClasses=null!=L?L.trim().split(yn):kn}set ngClass(L){this.rawClass="string"==typeof L?L.trim().split(yn):L}ngDoCheck(){for(const Q of this.initialClasses)this._updateState(Q,!0);const L=this.rawClass;if(Array.isArray(L)||L instanceof Set)for(const Q of L)this._updateState(Q,!0);else if(null!=L)for(const Q of Object.keys(L))this._updateState(Q,!!L[Q]);this._applyStateDiff()}_updateState(L,Q){const ge=this.stateMap.get(L);void 0!==ge?(ge.enabled!==Q&&(ge.changed=!0,ge.enabled=Q),ge.touched=!0):this.stateMap.set(L,{enabled:Q,changed:!0,touched:!0})}_applyStateDiff(){for(const L of this.stateMap){const Q=L[0],ge=L[1];ge.changed?(this._toggleClass(Q,ge.enabled),ge.changed=!1):ge.touched||(ge.enabled&&this._toggleClass(Q,!1),this.stateMap.delete(Q)),ge.touched=!1}}_toggleClass(L,Q){(L=L.trim()).length>0&&L.split(yn).forEach(ge=>{Q?this._renderer.addClass(this._ngEl.nativeElement,ge):this._renderer.removeClass(this._ngEl.nativeElement,ge)})}static#e=this.\u0275fac=function(Q){return new(Q||A)(h.Y36(h.ZZ4),h.Y36(h.aQg),h.Y36(h.SBq),h.Y36(h.Qsj))};static#t=this.\u0275dir=h.lG2({type:A,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0})}return A})();class Mo{constructor(J,L,Q,ge){this.$implicit=J,this.ngForOf=L,this.index=Q,this.count=ge}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let tr=(()=>{class A{set ngForOf(L){this._ngForOf=L,this._ngForOfDirty=!0}set ngForTrackBy(L){this._trackByFn=L}get ngForTrackBy(){return this._trackByFn}constructor(L,Q,ge){this._viewContainer=L,this._template=Q,this._differs=ge,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(L){L&&(this._template=L)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const L=this._ngForOf;!this._differ&&L&&(this._differ=this._differs.find(L).create(this.ngForTrackBy))}if(this._differ){const L=this._differ.diff(this._ngForOf);L&&this._applyChanges(L)}}_applyChanges(L){const Q=this._viewContainer;L.forEachOperation((ge,Ye,lt)=>{if(null==ge.previousIndex)Q.createEmbeddedView(this._template,new Mo(ge.item,this._ngForOf,-1,-1),null===lt?void 0:lt);else if(null==lt)Q.remove(null===Ye?void 0:Ye);else if(null!==Ye){const Xt=Q.get(Ye);Q.move(Xt,lt),cs(Xt,ge)}});for(let ge=0,Ye=Q.length;ge<Ye;ge++){const Xt=Q.get(ge).context;Xt.index=ge,Xt.count=Ye,Xt.ngForOf=this._ngForOf}L.forEachIdentityChange(ge=>{cs(Q.get(ge.currentIndex),ge)})}static ngTemplateContextGuard(L,Q){return!0}static#e=this.\u0275fac=function(Q){return new(Q||A)(h.Y36(h.s_b),h.Y36(h.Rgc),h.Y36(h.ZZ4))};static#t=this.\u0275dir=h.lG2({type:A,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return A})();function cs(A,J){A.context.$implicit=J.item}let ds=(()=>{class A{constructor(L,Q){this._viewContainer=L,this._context=new Qs,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=Q}set ngIf(L){this._context.$implicit=this._context.ngIf=L,this._updateView()}set ngIfThen(L){Ys("ngIfThen",L),this._thenTemplateRef=L,this._thenViewRef=null,this._updateView()}set ngIfElse(L){Ys("ngIfElse",L),this._elseTemplateRef=L,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(L,Q){return!0}static#e=this.\u0275fac=function(Q){return new(Q||A)(h.Y36(h.s_b),h.Y36(h.Rgc))};static#t=this.\u0275dir=h.lG2({type:A,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return A})();class Qs{constructor(){this.$implicit=null,this.ngIf=null}}function Ys(A,J){if(J&&!J.createEmbeddedView)throw new Error(`${A} must be a TemplateRef, but received '${(0,h.AaK)(J)}'.`)}let hs=(()=>{class A{constructor(L,Q,ge){this._ngEl=L,this._differs=Q,this._renderer=ge,this._ngStyle=null,this._differ=null}set ngStyle(L){this._ngStyle=L,!this._differ&&L&&(this._differ=this._differs.find(L).create())}ngDoCheck(){if(this._differ){const L=this._differ.diff(this._ngStyle);L&&this._applyChanges(L)}}_setStyle(L,Q){const[ge,Ye]=L.split("."),lt=-1===ge.indexOf("-")?void 0:h.JOm.DashCase;null!=Q?this._renderer.setStyle(this._ngEl.nativeElement,ge,Ye?`${Q}${Ye}`:Q,lt):this._renderer.removeStyle(this._ngEl.nativeElement,ge,lt)}_applyChanges(L){L.forEachRemovedItem(Q=>this._setStyle(Q.key,null)),L.forEachAddedItem(Q=>this._setStyle(Q.key,Q.currentValue)),L.forEachChangedItem(Q=>this._setStyle(Q.key,Q.currentValue))}static#e=this.\u0275fac=function(Q){return new(Q||A)(h.Y36(h.SBq),h.Y36(h.aQg),h.Y36(h.Qsj))};static#t=this.\u0275dir=h.lG2({type:A,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0})}return A})(),fs=(()=>{class A{constructor(L){this._viewContainerRef=L,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(L){if(L.ngTemplateOutlet||L.ngTemplateOutletInjector){const Q=this._viewContainerRef;if(this._viewRef&&Q.remove(Q.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:ge,ngTemplateOutletContext:Ye,ngTemplateOutletInjector:lt}=this;this._viewRef=Q.createEmbeddedView(ge,Ye,lt?{injector:lt}:void 0)}else this._viewRef=null}else this._viewRef&&L.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}static#e=this.\u0275fac=function(Q){return new(Q||A)(h.Y36(h.s_b))};static#t=this.\u0275dir=h.lG2({type:A,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[h.TTD]})}return A})(),rs=(()=>{class A{constructor(L){this.differs=L,this.keyValues=[],this.compareFn=ps}transform(L,Q=ps){if(!L||!(L instanceof Map)&&"object"!=typeof L)return null;this.differ||(this.differ=this.differs.find(L).create());const ge=this.differ.diff(L),Ye=Q!==this.compareFn;return ge&&(this.keyValues=[],ge.forEachItem(lt=>{this.keyValues.push(function Bn(A,J){return{key:A,value:J}}(lt.key,lt.currentValue))})),(ge||Ye)&&(this.keyValues.sort(Q),this.compareFn=Q),this.keyValues}static#e=this.\u0275fac=function(Q){return new(Q||A)(h.Y36(h.aQg,16))};static#t=this.\u0275pipe=h.Yjl({name:"keyvalue",type:A,pure:!1,standalone:!0})}return A})();function ps(A,J){const L=A.key,Q=J.key;if(L===Q)return 0;if(void 0===L)return 1;if(void 0===Q)return-1;if(null===L)return 1;if(null===Q)return-1;if("string"==typeof L&&"string"==typeof Q)return L<Q?-1:1;if("number"==typeof L&&"number"==typeof Q)return L-Q;if("boolean"==typeof L&&"boolean"==typeof Q)return L<Q?-1:1;const ge=String(L),Ye=String(Q);return ge==Ye?0:ge<Ye?-1:1}let Ki=(()=>{class A{static#e=this.\u0275fac=function(Q){return new(Q||A)};static#t=this.\u0275mod=h.oAB({type:A});static#n=this.\u0275inj=h.cJS({})}return A})();const er="browser",hi="server";function Ai(A){return A===er}function ks(A){return A===hi}let mr=(()=>{class A{static#e=this.\u0275prov=(0,h.Yz7)({token:A,providedIn:"root",factory:()=>new Or((0,h.LFG)(we),window)})}return A})();class Or{constructor(J,L){this.document=J,this.window=L,this.offset=()=>[0,0]}setOffset(J){this.offset=Array.isArray(J)?()=>J:J}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(J){this.supportsScrolling()&&this.window.scrollTo(J[0],J[1])}scrollToAnchor(J){if(!this.supportsScrolling())return;const L=function _i(A,J){const L=A.getElementById(J)||A.getElementsByName(J)[0];if(L)return L;if("function"==typeof A.createTreeWalker&&A.body&&"function"==typeof A.body.attachShadow){const Q=A.createTreeWalker(A.body,NodeFilter.SHOW_ELEMENT);let ge=Q.currentNode;for(;ge;){const Ye=ge.shadowRoot;if(Ye){const lt=Ye.getElementById(J)||Ye.querySelector(`[name="${J}"]`);if(lt)return lt}ge=Q.nextNode()}}return null}(this.document,J);L&&(this.scrollToElement(L),L.focus())}setHistoryScrollRestoration(J){this.supportsScrolling()&&(this.window.history.scrollRestoration=J)}scrollToElement(J){const L=J.getBoundingClientRect(),Q=L.left+this.window.pageXOffset,ge=L.top+this.window.pageYOffset,Ye=this.offset();this.window.scrollTo(Q-Ye[0],ge-Ye[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class ms{}},5879:(Ot,Le,U)=>{U.d(Le,{$8M:()=>En,$WT:()=>mi,$Z:()=>A_,AFp:()=>Jh,ALo:()=>D0,AaK:()=>pe,Akn:()=>vl,AsE:()=>tE,BQk:()=>jf,CHM:()=>Dl,CRH:()=>B0,DdM:()=>p0,EJc:()=>OA,EiD:()=>$m,EpF:()=>sy,F$t:()=>fy,F4k:()=>oy,FYo:()=>af,FiY:()=>Ja,Flj:()=>ta,Gf:()=>V0,GfV:()=>Zp,GkF:()=>iy,Gpc:()=>ot,HDt:()=>lw,HOy:()=>rE,Hsn:()=>py,JOm:()=>nl,JVY:()=>Hy,JZr:()=>ut,KtG:()=>Ws,L6k:()=>km,LAX:()=>Hd,LFG:()=>vt,LSH:()=>Cp,Lbi:()=>Yd,Lck:()=>TD,MAs:()=>ry,MMx:()=>o0,MR2:()=>Rp,NdJ:()=>ay,O4$:()=>xa,Ojb:()=>Xh,OlP:()=>Ht,Oqu:()=>eE,P3R:()=>zm,PXZ:()=>uC,Q6J:()=>Wg,QGY:()=>Kg,QbO:()=>Jd,Qsj:()=>tv,R0b:()=>Ro,RDi:()=>vc,Rgc:()=>am,SBq:()=>fd,Sil:()=>FA,Suo:()=>U0,TTD:()=>pn,TgZ:()=>Uf,Tol:()=>rI,Udp:()=>Hf,VKq:()=>g0,VuI:()=>zC,W1O:()=>z0,WLB:()=>m0,X6Q:()=>mC,XFs:()=>Zt,Xpm:()=>mo,Xq5:()=>xg,Xts:()=>Tc,Y36:()=>gd,YKP:()=>r0,YNc:()=>ey,Yjl:()=>zs,Yz7:()=>Wt,Z0I:()=>xt,ZZ4:()=>LE,_Bn:()=>n0,_UZ:()=>wh,_c5:()=>NC,_uU:()=>cI,aQg:()=>VE,c2e:()=>uw,cEC:()=>Sg,cJS:()=>Hn,cg1:()=>iE,dDg:()=>iC,dqk:()=>Mn,eBb:()=>id,eFA:()=>vw,eJc:()=>IE,ekj:()=>Jv,eoX:()=>gw,evT:()=>ff,f3M:()=>At,g9A:()=>Up,h0i:()=>Ah,hGG:()=>OC,hYB:()=>my,hij:()=>vy,iGM:()=>L0,ifc:()=>ur,ip1:()=>aw,jDz:()=>a0,kEZ:()=>_0,kL8:()=>SI,lG2:()=>xs,lcZ:()=>A0,lnq:()=>nE,lqb:()=>Fu,lri:()=>fw,mCW:()=>Ec,n5z:()=>Tn,oAB:()=>Os,oJD:()=>Ap,oxw:()=>hy,pB0:()=>sd,q3G:()=>Iu,q4F:()=>u_,qFp:()=>WC,qLn:()=>zl,qOj:()=>Ng,qZA:()=>_l,qzn:()=>Fl,rFY:()=>y0,rWj:()=>pw,rg0:()=>Ye,s9C:()=>Zg,sBO:()=>_C,s_b:()=>Cy,soG:()=>Sy,tb:()=>ME,tdS:()=>Au,tp0:()=>Pu,uIk:()=>_h,vHH:()=>ce,vpe:()=>Lu,wAp:()=>Gf,xp6:()=>D_,ynx:()=>Bf,z2F:()=>Zf,z3N:()=>ul,zSh:()=>Zd,zs3:()=>da});var h=U(8645),W=U(7394),K=U(5592),ve=U(3019),me=U(5619),we=U(2096),Ce=U(3020),ye=U(4664),De=U(3997);function X(t){for(let r in t)if(t[r]===X)return r;throw Error("Could not find renamed property on target object.")}function ie(t,r){for(const s in r)r.hasOwnProperty(s)&&!t.hasOwnProperty(s)&&(t[s]=r[s])}function pe(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(pe).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const r=t.toString();if(null==r)return""+r;const s=r.indexOf("\n");return-1===s?r:r.substring(0,s)}function ze(t,r){return null==t||""===t?null===r?"":r:null==r||""===r?t:t+" "+r}const Ve=X({__forward_ref__:X});function ot(t){return t.__forward_ref__=ot,t.toString=function(){return pe(this())},t}function Qe(t){return mt(t)?t():t}function mt(t){return"function"==typeof t&&t.hasOwnProperty(Ve)&&t.__forward_ref__===ot}function nt(t){return t&&!!t.\u0275providers}const ut="https://g.co/ng/security#xss";class ce extends Error{constructor(r,s){super(function Be(t,r){return`NG0${Math.abs(t)}${r?": "+r:""}`}(r,s)),this.code=r}}function be(t){return"string"==typeof t?t:null==t?"":String(t)}function et(t,r){throw new ce(-201,!1)}function Et(t,r){null==t&&function It(t,r,s,a){throw new Error(`ASSERTION ERROR: ${t}`+(null==a?"":` [Expected=> ${s} ${a} ${r} <=Actual]`))}(r,t,null,"!=")}function Wt(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Hn(t){return{providers:t.providers||[],imports:t.imports||[]}}function Ln(t){return zn(t,Vn)||zn(t,xn)}function xt(t){return null!==Ln(t)}function zn(t,r){return t.hasOwnProperty(r)?t[r]:null}function Ir(t){return t&&(t.hasOwnProperty(Zn)||t.hasOwnProperty(Yr))?t[Zn]:null}const Vn=X({\u0275prov:X}),Zn=X({\u0275inj:X}),xn=X({ngInjectableDef:X}),Yr=X({ngInjectorDef:X});var Zt=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(Zt||{});let un;function an(){return un}function Kn(t){const r=un;return un=t,r}function Fr(t,r,s){const a=Ln(t);return a&&"root"==a.providedIn?void 0===a.value?a.value=a.factory():a.value:s&Zt.Optional?null:void 0!==r?r:void et(pe(t))}const Mn=globalThis;class Ht{constructor(r,s){this._desc=r,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof s?this.__NG_ELEMENT_ID__=s:void 0!==s&&(this.\u0275prov=Wt({token:this,providedIn:s.providedIn||"root",factory:s.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const gr={},Mr="__NG_DI_FLAG__",ir="ngTempTokenPath",re=/\n/gm,F="__source";let k;function Ne(t){const r=k;return k=t,r}function at(t,r=Zt.Default){if(void 0===k)throw new ce(-203,!1);return null===k?Fr(t,void 0,r):k.get(t,r&Zt.Optional?null:void 0,r)}function vt(t,r=Zt.Default){return(an()||at)(Qe(t),r)}function At(t,r=Zt.Default){return vt(t,Kt(r))}function Kt(t){return typeof t>"u"||"number"==typeof t?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Gn(t){const r=[];for(let s=0;s<t.length;s++){const a=Qe(t[s]);if(Array.isArray(a)){if(0===a.length)throw new ce(900,!1);let l,p=Zt.Default;for(let y=0;y<a.length;y++){const w=a[y],P=ni(w);"number"==typeof P?-1===P?l=w.token:p|=P:l=w}r.push(vt(l,p))}else r.push(vt(a))}return r}function dn(t,r){return t[Mr]=r,t.prototype[Mr]=r,t}function ni(t){return t[Mr]}function Di(t){return{toString:t}.toString()}var Kr=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(Kr||{}),ur=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(ur||{});const ri={},Fe=[],ke=X({\u0275cmp:X}),st=X({\u0275dir:X}),Dt=X({\u0275pipe:X}),_n=X({\u0275mod:X}),tn=X({\u0275fac:X}),yn=X({__NG_ELEMENT_ID__:X}),kn=X({__NG_ENV_ID__:X});function lr(t,r,s){let a=t.length;for(;;){const l=t.indexOf(r,s);if(-1===l)return l;if(0===l||t.charCodeAt(l-1)<=32){const p=r.length;if(l+p===a||t.charCodeAt(l+p)<=32)return l}s=l+1}}function ii(t,r,s){let a=0;for(;a<s.length;){const l=s[a];if("number"==typeof l){if(0!==l)break;a++;const p=s[a++],y=s[a++],w=s[a++];t.setAttribute(r,y,w,p)}else{const p=l,y=s[++a];Mo(p)?t.setProperty(r,p,y):t.setAttribute(r,p,y),a++}}return a}function Ts(t){return 3===t||4===t||6===t}function Mo(t){return 64===t.charCodeAt(0)}function tr(t,r){if(null!==r&&0!==r.length)if(null===t||0===t.length)t=r.slice();else{let s=-1;for(let a=0;a<r.length;a++){const l=r[a];"number"==typeof l?s=l:0===s||cs(t,s,l,null,-1===s||2===s?r[++a]:null)}}return t}function cs(t,r,s,a,l){let p=0,y=t.length;if(-1===r)y=-1;else for(;p<t.length;){const w=t[p++];if("number"==typeof w){if(w===r){y=-1;break}if(w>r){y=p-1;break}}}for(;p<t.length;){const w=t[p];if("number"==typeof w)break;if(w===s){if(null===a)return void(null!==l&&(t[p+1]=l));if(a===t[p+1])return void(t[p+2]=l)}p++,null!==a&&p++,null!==l&&p++}-1!==y&&(t.splice(y,0,r),p=y+1),t.splice(p++,0,s),null!==a&&t.splice(p++,0,a),null!==l&&t.splice(p++,0,l)}const Oi="ng-template";function ds(t,r,s){let a=0,l=!0;for(;a<t.length;){let p=t[a++];if("string"==typeof p&&l){const y=t[a++];if(s&&"class"===p&&-1!==lr(y.toLowerCase(),r,0))return!0}else{if(1===p){for(;a<t.length&&"string"==typeof(p=t[a++]);)if(p.toLowerCase()===r)return!0;return!1}"number"==typeof p&&(l=!1)}}return!1}function Qs(t){return 4===t.type&&t.value!==Oi}function Ys(t,r,s){return r===(4!==t.type||s?t.value:Oi)}function go(t,r,s){let a=4;const l=t.attrs||[],p=function gi(t){for(let r=0;r<t.length;r++)if(Ts(t[r]))return r;return t.length}(l);let y=!1;for(let w=0;w<r.length;w++){const P=r[w];if("number"!=typeof P){if(!y)if(4&a){if(a=2|1&a,""!==P&&!Ys(t,P,s)||""===P&&1===r.length){if(Wr(a))return!1;y=!0}}else{const $=8&a?P:r[++w];if(8&a&&null!==t.attrs){if(!ds(t.attrs,$,s)){if(Wr(a))return!1;y=!0}continue}const he=cr(8&a?"class":P,l,Qs(t),s);if(-1===he){if(Wr(a))return!1;y=!0;continue}if(""!==$){let xe;xe=he>p?"":l[he+1].toLowerCase();const $e=8&a?xe:null;if($e&&-1!==lr($e,$,0)||2&a&&$!==xe){if(Wr(a))return!1;y=!0}}}}else{if(!y&&!Wr(a)&&!Wr(P))return!1;if(y&&Wr(P))continue;y=!1,a=P|1&a}}return Wr(a)||y}function Wr(t){return 0==(1&t)}function cr(t,r,s,a){if(null===r)return-1;let l=0;if(a||!s){let p=!1;for(;l<r.length;){const y=r[l];if(y===t)return l;if(3===y||6===y)p=!0;else{if(1===y||2===y){let w=r[++l];for(;"string"==typeof w;)w=r[++l];continue}if(4===y)break;if(0===y){l+=4;continue}}l+=p?1:2}return-1}return function $s(t,r){let s=t.indexOf(4);if(s>-1)for(s++;s<t.length;){const a=t[s];if("number"==typeof a)return-1;if(a===r)return s;s++}return-1}(r,t)}function js(t,r,s=!1){for(let a=0;a<r.length;a++)if(go(t,r[a],s))return!0;return!1}function hs(t,r){e:for(let s=0;s<r.length;s++){const a=r[s];if(t.length===a.length){for(let l=0;l<t.length;l++)if(t[l]!==a[l])continue e;return!0}}return!1}function fs(t,r){return t?":not("+r.trim()+")":r}function xi(t){let r=t[0],s=1,a=2,l="",p=!1;for(;s<t.length;){let y=t[s];if("string"==typeof y)if(2&a){const w=t[++s];l+="["+y+(w.length>0?'="'+w+'"':"")+"]"}else 8&a?l+="."+y:4&a&&(l+=" "+y);else""!==l&&!Wr(y)&&(r+=fs(p,l),l=""),a=y,p=p||!Wr(a);s++}return""!==l&&(r+=fs(p,l)),r}function mo(t){return Di(()=>{const r=oo(t),s={...r,decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===Kr.OnPush,directiveDefs:null,pipeDefs:null,dependencies:r.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||ur.Emulated,styles:t.styles||Fe,_:null,schemas:t.schemas||null,tView:null,id:""};Xs(s);const a=t.dependencies;return s.directiveDefs=Bn(a,!1),s.pipeDefs=Bn(a,!0),s.id=function ps(t){let r=0;const s=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(const l of s)r=Math.imul(31,r)+l.charCodeAt(0)<<0;return r+=2147483648,"c"+r}(s),s})}function Hs(t){return Wn(t)||ki(t)}function As(t){return null!==t}function Os(t){return Di(()=>({type:t.type,bootstrap:t.bootstrap||Fe,declarations:t.declarations||Fe,imports:t.imports||Fe,exports:t.exports||Fe,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function No(t,r){if(null==t)return ri;const s={};for(const a in t)if(t.hasOwnProperty(a)){let l=t[a],p=l;Array.isArray(l)&&(p=l[1],l=l[0]),s[l]=a,r&&(r[l]=p)}return s}function xs(t){return Di(()=>{const r=oo(t);return Xs(r),r})}function zs(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,standalone:!0===t.standalone,onDestroy:t.type.prototype.ngOnDestroy||null}}function Wn(t){return t[ke]||null}function ki(t){return t[st]||null}function Nr(t){return t[Dt]||null}function mi(t){const r=Wn(t)||ki(t)||Nr(t);return null!==r&&r.standalone}function ci(t,r){const s=t[_n]||null;if(!s&&!0===r)throw new Error(`Type ${pe(t)} does not have '\u0275mod' property.`);return s}function oo(t){const r={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:r,inputTransforms:null,inputConfig:t.inputs||ri,exportAs:t.exportAs||null,standalone:!0===t.standalone,signals:!0===t.signals,selectors:t.selectors||Fe,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:No(t.inputs,r),outputs:No(t.outputs)}}function Xs(t){t.features?.forEach(r=>r(t))}function Bn(t,r){if(!t)return null;const s=r?Nr:Hs;return()=>("function"==typeof t?t():t).map(a=>s(a)).filter(As)}const vr=0,Lt=1,fn=2,Er=3,Hi=4,gs=5,di=6,Ki=7,er=8,hi=9,is=10,mn=11,Ai=12,ks=13,zi=14,Lr=15,wr=16,mr=17,Or=18,_i=19,Oo=20,ms=21,Fi=22,yi=23,Gs=24,Qn=25,Zi=1,eo=2,Li=7,xo=9,Tr=11;function vn(t){return Array.isArray(t)&&"object"==typeof t[Zi]}function Vi(t){return Array.isArray(t)&&!0===t[Zi]}function ys(t){return 0!=(4&t.flags)}function ko(t){return t.componentOffset>-1}function Ea(t){return 1==(1&t.flags)}function Ui(t){return!!t.template}function ao(t){return 0!=(512&t[fn])}function nr(t,r){return t.hasOwnProperty(tn)?t[tn]:null}const si=Symbol("SIGNAL");function ss(t,r){return(null===t||"object"!=typeof t)&&Object.is(t,r)}let Br=null,bi=!1;function Ar(t){const r=Br;return Br=t,r}const Fs={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function vs(t){if(bi)throw new Error("");if(null===Br)return;const r=Br.nextProducerIndex++;ea(Br),r<Br.producerNode.length&&Br.producerNode[r]!==t&&Vs(Br)&&Xo(Br.producerNode[r],Br.producerIndexOfThis[r]),Br.producerNode[r]!==t&&(Br.producerNode[r]=t,Br.producerIndexOfThis[r]=Vs(Br)?Vo(t,Br,r):0),Br.producerLastReadVersion[r]=t.version}function oi(t){if(!Vs(t)||t.dirty){if(!t.producerMustRecompute(t)&&!wa(t))return void(t.dirty=!1);t.producerRecomputeValue(t),t.dirty=!1}}function to(t){if(void 0===t.liveConsumerNode)return;const r=bi;bi=!0;try{for(const s of t.liveConsumerNode)s.dirty||Si(s)}finally{bi=r}}function bs(){return!1!==Br?.consumerAllowSignalWrites}function Si(t){t.dirty=!0,to(t),t.consumerMarkedDirty?.(t)}function Ia(t){return t&&(t.nextProducerIndex=0),Ar(t)}function Ls(t,r){if(Ar(r),t&&void 0!==t.producerNode&&void 0!==t.producerIndexOfThis&&void 0!==t.producerLastReadVersion){if(Vs(t))for(let s=t.nextProducerIndex;s<t.producerNode.length;s++)Xo(t.producerNode[s],t.producerIndexOfThis[s]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function wa(t){ea(t);for(let r=0;r<t.producerNode.length;r++){const s=t.producerNode[r],a=t.producerLastReadVersion[r];if(a!==s.version||(oi(s),a!==s.version))return!0}return!1}function _r(t){if(ea(t),Vs(t))for(let r=0;r<t.producerNode.length;r++)Xo(t.producerNode[r],t.producerIndexOfThis[r]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function Vo(t,r,s){if(Pa(t),ea(t),0===t.liveConsumerNode.length)for(let a=0;a<t.producerNode.length;a++)t.producerIndexOfThis[a]=Vo(t.producerNode[a],t,a);return t.liveConsumerIndexOfThis.push(s),t.liveConsumerNode.push(r)-1}function Xo(t,r){if(Pa(t),ea(t),1===t.liveConsumerNode.length)for(let a=0;a<t.producerNode.length;a++)Xo(t.producerNode[a],t.producerIndexOfThis[a]);const s=t.liveConsumerNode.length-1;if(t.liveConsumerNode[r]=t.liveConsumerNode[s],t.liveConsumerIndexOfThis[r]=t.liveConsumerIndexOfThis[s],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,r<t.liveConsumerNode.length){const a=t.liveConsumerIndexOfThis[r],l=t.liveConsumerNode[r];ea(l),l.producerIndexOfThis[a]=r}}function Vs(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function ea(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function Pa(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function ta(t,r){const s=Object.create(uo);s.computation=t,r?.equal&&(s.equal=r.equal);const a=()=>{if(oi(s),vs(s),s.value===os)throw s.error;return s.value};return a[si]=s,a}const Ma=Symbol("UNSET"),vo=Symbol("COMPUTING"),os=Symbol("ERRORED"),uo=(()=>({...Fs,value:Ma,dirty:!0,error:null,equal:ss,producerMustRecompute:t=>t.value===Ma||t.value===vo,producerRecomputeValue(t){if(t.value===vo)throw new Error("Detected cycle in computations.");const r=t.value;t.value=vo;const s=Ia(t);let a;try{a=t.computation()}catch(l){a=os,t.error=l}finally{Ls(t,s)}r!==Ma&&r!==os&&a!==os&&t.equal(r,a)?t.value=r:(t.value=a,t.version++)}}))();let Wa=function Ss(){throw new Error};function na(){Wa()}let ha=null;function Au(t,r){const s=Object.create(ra);function a(){return vs(s),s.value}return s.value=t,r?.equal&&(s.equal=r.equal),a.set=J,a.update=L,a.mutate=Q,a.asReadonly=ge,a[si]=s,a}const ra=(()=>({...Fs,equal:ss,readonlyFn:void 0}))();function A(t){t.version++,to(t),ha?.()}function J(t){const r=this[si];bs()||na(),r.equal(r.value,t)||(r.value=t,A(r))}function L(t){bs()||na(),J.call(this,t(this[si].value))}function Q(t){const r=this[si];bs()||na(),t(r.value),A(r)}function ge(){const t=this[si];if(void 0===t.readonlyFn){const r=()=>this();r[si]=t,t.readonlyFn=r}return t.readonlyFn}function Ye(t){const r=Ar(null);try{return t()}finally{Ar(r)}}const Xt=()=>{},Vr=(()=>({...Fs,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:t=>{t.schedule(t.ref)},hasRun:!1,cleanupFn:Xt}))();class jr{constructor(r,s,a){this.previousValue=r,this.currentValue=s,this.firstChange=a}isFirstChange(){return this.firstChange}}function pn(){return Qr}function Qr(t){return t.type.prototype.ngOnChanges&&(t.setInput=vi),rr}function rr(){const t=dt(this),r=t?.current;if(r){const s=t.previous;if(s===ri)t.previous=r;else for(let a in r)s[a]=r[a];t.current=null,this.ngOnChanges(r)}}function vi(t,r,s,a){const l=this.declaredInputs[s],p=dt(t)||function $r(t,r){return t[Us]=r}(t,{previous:ri,current:null}),y=p.current||(p.current={}),w=p.previous,P=w[l];y[l]=new jr(P&&P.currentValue,r,w===ri),t[a]=r}pn.ngInherit=!0;const Us="__ngSimpleChanges__";function dt(t){return t[Us]||null}const Rt=function(t,r,s){},en="svg";function _t(t){for(;Array.isArray(t);)t=t[vr];return t}function gt(t,r){return _t(r[t])}function qr(t,r){return _t(r[t.index])}function ec(t,r){return t.data[r]}function Rs(t,r){return t[r]}function Uo(t,r){const s=r[t];return vn(s)?s:s[vr]}function Yo(t,r){return null==r?null:t[r]}function ia(t){t[mr]=0}function Tl(t){1024&t[fn]||(t[fn]|=1024,Fn(t,1))}function Hu(t){1024&t[fn]&&(t[fn]&=-1025,Fn(t,-1))}function Fn(t,r){let s=t[Er];if(null===s)return;s[gs]+=r;let a=s;for(s=s[Er];null!==s&&(1===r&&1===a[gs]||-1===r&&0===a[gs]);)s[gs]+=r,a=s,s=s[Er]}function sa(t,r){if(256==(256&t[fn]))throw new ce(911,!1);null===t[ms]&&(t[ms]=[]),t[ms].push(r)}const Qt={lFrame:fe(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Ut(){return Qt.bindingsEnabled}function Io(){return null!==Qt.skipHydrationRootTNode}function ht(){return Qt.lFrame.lView}function xr(){return Qt.lFrame.tView}function Dl(t){return Qt.lFrame.contextLView=t,t[er]}function Ws(t){return Qt.lFrame.contextLView=null,t}function Qi(){let t=Gi();for(;null!==t&&64===t.type;)t=t.parent;return t}function Gi(){return Qt.lFrame.currentTNode}function as(t,r){const s=Qt.lFrame;s.currentTNode=t,s.isParent=r}function lu(){return Qt.lFrame.isParent}function je(){Qt.lFrame.isParent=!1}function Hr(){const t=Qt.lFrame;let r=t.bindingRootIndex;return-1===r&&(r=t.bindingRootIndex=t.tView.bindingStartIndex),r}function Ei(){return Qt.lFrame.bindingIndex}function Es(){return Qt.lFrame.bindingIndex++}function wo(t){const r=Qt.lFrame,s=r.bindingIndex;return r.bindingIndex=r.bindingIndex+t,s}function Ku(t,r){const s=Qt.lFrame;s.bindingIndex=s.bindingRootIndex=t,du(r)}function du(t){Qt.lFrame.currentDirectiveIndex=t}function v(){return Qt.lFrame.currentQueryIndex}function R(t){Qt.lFrame.currentQueryIndex=t}function I(t){const r=t[Lt];return 2===r.type?r.declTNode:1===r.type?t[di]:null}function M(t,r,s){if(s&Zt.SkipSelf){let l=r,p=t;for(;!(l=l.parent,null!==l||s&Zt.Host||(l=I(p),null===l||(p=p[zi],10&l.type))););if(null===l)return!1;r=l,t=p}const a=Qt.lFrame=ne();return a.currentTNode=r,a.lView=t,!0}function B(t){const r=ne(),s=t[Lt];Qt.lFrame=r,r.currentTNode=s.firstChild,r.lView=t,r.tView=s,r.contextLView=t,r.bindingIndex=s.bindingStartIndex,r.inI18n=!1}function ne(){const t=Qt.lFrame,r=null===t?null:t.child;return null===r?fe(t):r}function fe(t){const r={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=r),r}function Ke(){const t=Qt.lFrame;return Qt.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const We=Ke;function Bt(){const t=Ke();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function On(){return Qt.lFrame.selectedIndex}function Ps(t){Qt.lFrame.selectedIndex=t}function Xr(){const t=Qt.lFrame;return ec(t.tView,t.selectedIndex)}function xa(){Qt.lFrame.currentNamespace=en}let nc=!0;function Zu(){return nc}function oa(t){nc=t}function qs(t,r){for(let s=r.directiveStart,a=r.directiveEnd;s<a;s++){const p=t.data[s].type.prototype,{ngAfterContentInit:y,ngAfterContentChecked:w,ngAfterViewInit:P,ngAfterViewChecked:$,ngOnDestroy:ee}=p;y&&(t.contentHooks??=[]).push(-s,y),w&&((t.contentHooks??=[]).push(s,w),(t.contentCheckHooks??=[]).push(s,w)),P&&(t.viewHooks??=[]).push(-s,P),$&&((t.viewHooks??=[]).push(s,$),(t.viewCheckHooks??=[]).push(s,$)),null!=ee&&(t.destroyHooks??=[]).push(s,ee)}}function hu(t,r,s){Ca(t,r,3,s)}function fu(t,r,s,a){(3&t[fn])===s&&Ca(t,r,s,a)}function Aa(t,r){let s=t[fn];(3&s)===r&&(s&=8191,s+=1,t[fn]=s)}function Ca(t,r,s,a){const p=a??-1,y=r.length-1;let w=0;for(let P=void 0!==a?65535&t[mr]:0;P<y;P++)if("number"==typeof r[P+1]){if(w=r[P],null!=a&&w>=a)break}else r[P]<0&&(t[mr]+=65536),(w<p||-1==p)&&(fa(t,s,r,P),t[mr]=(4294901760&t[mr])+P+2),P++}function Yi(t,r){Rt(4,t,r);const s=Ar(null);try{r.call(t)}finally{Ar(s),Rt(5,t,r)}}function fa(t,r,s,a){const l=s[a]<0,p=s[a+1],w=t[l?-s[a]:s[a]];l?t[fn]>>13<t[mr]>>16&&(3&t[fn])===r&&(t[fn]+=8192,Yi(w,p)):Yi(w,p)}const To=-1;class Su{constructor(r,s,a){this.factory=r,this.resolving=!1,this.canSeeViewProviders=s,this.injectImpl=a}}function Qu(t){return t!==To}function Ji(t){return 32767&t}function Ho(t,r){let s=function ic(t){return t>>16}(t),a=r;for(;s>0;)a=a[zi],s--;return a}let $i=!0;function Do(t){const r=$i;return $i=t,r}const Qa=255,ka=5;let Md=0;const Is={};function pu(t,r){const s=zo(t,r);if(-1!==s)return s;const a=r[Lt];a.firstCreatePass&&(t.injectorIndex=r.length,aa(a.data,t),aa(r,null),aa(a.blueprint,null));const l=pa(t,r),p=t.injectorIndex;if(Qu(l)){const y=Ji(l),w=Ho(l,r),P=w[Lt].data;for(let $=0;$<8;$++)r[p+$]=w[y+$]|P[y+$]}return r[p+8]=l,p}function aa(t,r){t.push(0,0,0,0,0,0,0,0,r)}function zo(t,r){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===r[t.injectorIndex+8]?-1:t.injectorIndex}function pa(t,r){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let s=0,a=null,l=r;for(;null!==l;){if(a=bt(l),null===a)return To;if(s++,l=l[zi],-1!==a.injectorIndex)return a.injectorIndex|s<<16}return To}function ua(t,r,s){!function Fa(t,r,s){let a;"string"==typeof s?a=s.charCodeAt(0)||0:s.hasOwnProperty(yn)&&(a=s[yn]),null==a&&(a=s[yn]=Md++);const l=a&Qa;r.data[t+(l>>ka)]|=1<<l}(t,r,s)}function La(t,r,s){if(s&Zt.Optional||void 0!==t)return t;et()}function Yu(t,r,s,a){if(s&Zt.Optional&&void 0===a&&(a=null),!(s&(Zt.Self|Zt.Host))){const l=t[hi],p=Kn(void 0);try{return l?l.get(r,a,s&Zt.Optional):Fr(r,a,s&Zt.Optional)}finally{Kn(p)}}return La(a,0,s)}function N(t,r,s,a=Zt.Default,l){if(null!==t){if(2048&r[fn]&&!(a&Zt.Self)){const y=function cn(t,r,s,a,l){let p=t,y=r;for(;null!==p&&null!==y&&2048&y[fn]&&!(512&y[fn]);){const w=d(p,y,s,a|Zt.Self,Is);if(w!==Is)return w;let P=p.parent;if(!P){const $=y[Oo];if($){const ee=$.get(s,Is,a);if(ee!==Is)return ee}P=bt(y),y=y[zi]}p=P}return l}(t,r,s,a,Is);if(y!==Is)return y}const p=d(t,r,s,a,Is);if(p!==Is)return p}return Yu(r,s,a,l)}function d(t,r,s,a,l){const p=function Y(t){if("string"==typeof t)return t.charCodeAt(0)||0;const r=t.hasOwnProperty(yn)?t[yn]:void 0;return"number"==typeof r?r>=0?r&Qa:Pt:r}(s);if("function"==typeof p){if(!M(r,t,a))return a&Zt.Host?La(l,0,a):Yu(r,s,a,l);try{let y;if(y=p(a),null!=y||a&Zt.Optional)return y;et()}finally{We()}}else if("number"==typeof p){let y=null,w=zo(t,r),P=To,$=a&Zt.Host?r[Lr][di]:null;for((-1===w||a&Zt.SkipSelf)&&(P=-1===w?pa(t,r):r[w+8],P!==To&&_e(a,!1)?(y=r[Lt],w=Ji(P),r=Ho(P,r)):w=-1);-1!==w;){const ee=r[Lt];if(le(p,w,ee.data)){const he=m(w,r,s,y,a,$);if(he!==Is)return he}P=r[w+8],P!==To&&_e(a,r[Lt].data[w+8]===$)&&le(p,w,r)?(y=ee,w=Ji(P),r=Ho(P,r)):w=-1}}return l}function m(t,r,s,a,l,p){const y=r[Lt],w=y.data[t+8],ee=T(w,y,s,null==a?ko(w)&&$i:a!=y&&0!=(3&w.type),l&Zt.Host&&p===w);return null!==ee?V(r,y,ee,w):Is}function T(t,r,s,a,l){const p=t.providerIndexes,y=r.data,w=1048575&p,P=t.directiveStart,ee=p>>20,xe=l?w+ee:t.directiveEnd;for(let $e=a?w:w+ee;$e<xe;$e++){const ct=y[$e];if($e<P&&s===ct||$e>=P&&ct.type===s)return $e}if(l){const $e=y[P];if($e&&Ui($e)&&$e.type===s)return P}return null}function V(t,r,s,a){let l=t[s];const p=r.data;if(function wi(t){return t instanceof Su}(l)){const y=l;y.resolving&&function Je(t,r){const s=r?`. Dependency path: ${r.join(" > ")} > ${t}`:"";throw new ce(-200,`Circular dependency in DI detected for ${t}${s}`)}(function Ie(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():be(t)}(p[s]));const w=Do(y.canSeeViewProviders);y.resolving=!0;const $=y.injectImpl?Kn(y.injectImpl):null;M(t,a,Zt.Default);try{l=t[s]=y.factory(void 0,p,t,a),r.firstCreatePass&&s>=a.directiveStart&&function Ka(t,r,s){const{ngOnChanges:a,ngOnInit:l,ngDoCheck:p}=r.type.prototype;if(a){const y=Qr(r);(s.preOrderHooks??=[]).push(t,y),(s.preOrderCheckHooks??=[]).push(t,y)}l&&(s.preOrderHooks??=[]).push(0-t,l),p&&((s.preOrderHooks??=[]).push(t,p),(s.preOrderCheckHooks??=[]).push(t,p))}(s,p[s],r)}finally{null!==$&&Kn($),Do(w),y.resolving=!1,We()}}return l}function le(t,r,s){return!!(s[r+(t>>ka)]&1<<t)}function _e(t,r){return!(t&Zt.Self||t&Zt.Host&&r)}class Tt{constructor(r,s){this._tNode=r,this._lView=s}get(r,s,a){return N(this._tNode,this._lView,r,Kt(a),s)}}function Pt(){return new Tt(Qi(),ht())}function Tn(t){return Di(()=>{const r=t.prototype.constructor,s=r[tn]||nn(r),a=Object.prototype;let l=Object.getPrototypeOf(t.prototype).constructor;for(;l&&l!==a;){const p=l[tn]||nn(l);if(p&&p!==s)return p;l=Object.getPrototypeOf(l)}return p=>new p})}function nn(t){return mt(t)?()=>{const r=nn(Qe(t));return r&&r()}:nr(t)}function bt(t){const r=t[Lt],s=r.type;return 2===s?r.declTNode:1===s?t[di]:null}function En(t){return function oc(t,r){if("class"===r)return t.classes;if("style"===r)return t.styles;const s=t.attrs;if(s){const a=s.length;let l=0;for(;l<a;){const p=s[l];if(Ts(p))break;if(0===p)l+=2;else if("number"==typeof p)for(l++;l<a&&"string"==typeof s[l];)l++;else{if(p===r)return s[l+1];l+=2}}}return null}(Qi(),t)}const ui="__parameters__";function In(t,r,s){return Di(()=>{const a=function Ms(t){return function(...s){if(t){const a=t(...s);for(const l in a)this[l]=a[l]}}}(r);function l(...p){if(this instanceof l)return a.apply(this,p),this;const y=new l(...p);return w.annotation=y,w;function w(P,$,ee){const he=P.hasOwnProperty(ui)?P[ui]:Object.defineProperty(P,ui,{value:[]})[ui];for(;he.length<=ee;)he.push(null);return(he[ee]=he[ee]||[]).push(y),P}}return s&&(l.prototype=Object.create(s.prototype)),l.prototype.ngMetadataName=t,l.annotationCls=l,l})}function Co(t,r){t.forEach(s=>Array.isArray(s)?Co(s,r):r(s))}function qi(t,r,s){r>=t.length?t.push(s):t.splice(r,0,s)}function _u(t,r){return r>=t.length-1?t.pop():t.splice(r,1)[0]}function ma(t,r){const s=[];for(let a=0;a<t;a++)s.push(r);return s}function ho(t,r,s){let a=Xu(t,r);return a>=0?t[1|a]=s:(a=~a,function co(t,r,s,a){let l=t.length;if(l==r)t.push(s,a);else if(1===l)t.push(a,t[0]),t[0]=s;else{for(l--,t.push(t[l-1],t[l]);l>r;)t[l]=t[l-2],l--;t[r]=s,t[r+1]=a}}(t,a,r,s)),a}function Ua(t,r){const s=Xu(t,r);if(s>=0)return t[1|s]}function Xu(t,r){return function uc(t,r,s){let a=0,l=t.length>>s;for(;l!==a;){const p=a+(l-a>>1),y=t[p<<s];if(r===y)return p<<s;y>r?l=p:a=p+1}return~(l<<s)}(t,r,1)}const Ja=dn(In("Optional"),8),Pu=dn(In("SkipSelf"),4);function kd(t){return 128==(128&t.flags)}var nl=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(nl||{});const tp=/^>|^->|<!--|-->|--!>|<!-$/g,np=/(<|>)/g,rp="\u200b$1\u200b";const ip=new Map;let xy=0;const xh="__ngContext__";function Wo(t,r){vn(r)?(t[xh]=r[_i],function li(t){ip.set(t[_i],t)}(r)):t[xh]=r}let dp;function hp(t,r){return dp(t,r)}function gc(t){const r=t[Er];return Vi(r)?r[Er]:r}function mm(t){return Fh(t[Ai])}function Ks(t){return Fh(t[Hi])}function Fh(t){for(;null!==t&&!Vi(t);)t=t[Hi];return t}function Pl(t,r,s,a,l){if(null!=a){let p,y=!1;Vi(a)?p=a:vn(a)&&(y=!0,a=a[vr]);const w=_t(a);0===t&&null!==s?null==l?Dm(r,s,w):Nl(r,s,w,l||null,!0):1===t&&null!==s?Nl(r,s,w,l||null,!0):2===t?function Ou(t,r,s){const a=il(t,r);a&&function Uy(t,r,s,a){t.removeChild(r,s,a)}(t,a,r,s)}(r,w,y):3===t&&r.destroyNode(w),null!=p&&function Rm(t,r,s,a,l){const p=s[Li];p!==_t(s)&&Pl(r,t,a,p,l);for(let w=Tr;w<s.length;w++){const P=s[w];_c(P[Lt],P,t,r,a,p)}}(r,t,p,s,l)}}function eu(t,r){return t.createComment(function Nh(t){return t.replace(tp,r=>r.replace(np,rp))}(r))}function Vd(t,r,s){return t.createElement(r,s)}function Im(t,r){const s=t[xo],a=s.indexOf(r);Hu(r),s.splice(a,1)}function Ml(t,r){if(t.length<=Tr)return;const s=Tr+r,a=t[s];if(a){const l=a[wr];null!==l&&l!==t&&Im(l,a),r>0&&(t[s-1][Hi]=a[Hi]);const p=_u(t,Tr+r);!function _m(t,r){_c(t,r,r[mn],2,null,null),r[vr]=null,r[di]=null}(a[Lt],a);const y=p[Or];null!==y&&y.detachView(p[Lt]),a[Er]=null,a[Hi]=null,a[fn]&=-129}return a}function Ud(t,r){if(!(256&r[fn])){const s=r[mn];r[yi]&&_r(r[yi]),r[Gs]&&_r(r[Gs]),s.destroyNode&&_c(t,r,s,3,null,null),function vm(t){let r=t[Ai];if(!r)return pp(t[Lt],t);for(;r;){let s=null;if(vn(r))s=r[Ai];else{const a=r[Tr];a&&(s=a)}if(!s){for(;r&&!r[Hi]&&r!==t;)vn(r)&&pp(r[Lt],r),r=r[Er];null===r&&(r=t),vn(r)&&pp(r[Lt],r),s=r&&r[Hi]}r=s}}(r)}}function pp(t,r){if(!(256&r[fn])){r[fn]&=-129,r[fn]|=256,function gp(t,r){let s;if(null!=t&&null!=(s=t.destroyHooks))for(let a=0;a<s.length;a+=2){const l=r[s[a]];if(!(l instanceof Su)){const p=s[a+1];if(Array.isArray(p))for(let y=0;y<p.length;y+=2){const w=l[p[y]],P=p[y+1];Rt(4,w,P);try{P.call(w)}finally{Rt(5,w,P)}}else{Rt(4,l,p);try{p.call(l)}finally{Rt(5,l,p)}}}}}(t,r),function wm(t,r){const s=t.cleanup,a=r[Ki];if(null!==s)for(let p=0;p<s.length-1;p+=2)if("string"==typeof s[p]){const y=s[p+3];y>=0?a[y]():a[-y].unsubscribe(),p+=2}else s[p].call(a[s[p+1]]);null!==a&&(r[Ki]=null);const l=r[ms];if(null!==l){r[ms]=null;for(let p=0;p<l.length;p++)(0,l[p])()}}(t,r),1===r[Lt].type&&r[mn].destroy();const s=r[wr];if(null!==s&&Vi(r[Er])){s!==r[Er]&&Im(s,r);const a=r[Or];null!==a&&a.detachView(t)}!function hm(t){ip.delete(t[_i])}(r)}}function Lh(t,r,s){return function Tm(t,r,s){let a=r;for(;null!==a&&40&a.type;)a=(r=a).parent;if(null===a)return s[vr];{const{componentOffset:l}=a;if(l>-1){const{encapsulation:p}=t.data[a.directiveStart+l];if(p===ur.None||p===ur.Emulated)return null}return qr(a,s)}}(t,r.parent,s)}function Nl(t,r,s,a,l){t.insertBefore(r,s,a,l)}function Dm(t,r,s){t.appendChild(r,s)}function Am(t,r,s,a,l){null!==a?Nl(t,r,s,a,l):Dm(t,r,s)}function il(t,r){return t.parentNode(r)}function bm(t,r,s){return Nu(t,r,s)}let Vh,kl,yc,$d,Nu=function mp(t,r,s){return 40&t.type?qr(t,s):null};function Bd(t,r,s,a){const l=Lh(t,a,r),p=r[mn],w=bm(a.parent||r[di],a,r);if(null!=l)if(Array.isArray(s))for(let P=0;P<s.length;P++)Am(p,l,s[P],w,!1);else Am(p,l,s,w,!1);void 0!==Vh&&Vh(p,a,r,s,l)}function Ol(t,r){if(null!==r){const s=r.type;if(3&s)return qr(r,t);if(4&s)return sl(-1,t[r.index]);if(8&s){const a=r.child;if(null!==a)return Ol(t,a);{const l=t[r.index];return Vi(l)?sl(-1,l):_t(l)}}if(32&s)return hp(r,t)()||_t(t[r.index]);{const a=xl(t,r);return null!==a?Array.isArray(a)?a[0]:Ol(gc(t[Lr]),a):Ol(t,r.next)}}return null}function xl(t,r){return null!==r?t[Lr][di].projection[r.projection]:null}function sl(t,r){const s=Tr+t+1;if(s<r.length){const a=r[s],l=a[Lt].firstChild;if(null!==l)return Ol(a,l)}return r[Li]}function Uh(t,r,s,a,l,p,y){for(;null!=s;){const w=a[s.index],P=s.type;if(y&&0===r&&(w&&Wo(_t(w),a),s.flags|=2),32!=(32&s.flags))if(8&P)Uh(t,r,s.child,a,l,p,!1),Pl(r,t,l,w,p);else if(32&P){const $=hp(s,a);let ee;for(;ee=$();)Pl(r,t,l,ee,p);Pl(r,t,l,w,p)}else 16&P?yp(t,r,a,s,l,p):Pl(r,t,l,w,p);s=y?s.projectionNext:s.next}}function _c(t,r,s,a,l,p){Uh(s,a,t.firstChild,r,l,p,!1)}function yp(t,r,s,a,l,p){const y=s[Lr],P=y[di].projection[a.projection];if(Array.isArray(P))for(let $=0;$<P.length;$++)Pl(r,t,l,P[$],p);else{let $=P;const ee=y[Er];kd(a)&&($.flags|=128),Uh(t,r,$,ee,l,p,!0)}}function vp(t,r,s){""===s?t.removeAttribute(r,"class"):t.setAttribute(r,"class",s)}function jd(t,r,s){const{mergedAttrs:a,classes:l,styles:p}=s;null!==a&&ii(t,r,a),null!==l&&vp(t,r,l),null!==p&&function Pm(t,r,s){t.setAttribute(r,"style",s)}(t,r,p)}function rd(t){return function ol(){if(void 0===kl&&(kl=null,Mn.trustedTypes))try{kl=Mn.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return kl}()?.createHTML(t)||t}function vc(t){yc=t}function ja(){if(void 0!==yc)return yc;if(typeof document<"u")return document;throw new ce(210,!1)}function Bh(){if(void 0===$d&&($d=null,Mn.trustedTypes))try{$d=Mn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return $d}function Ep(t){return Bh()?.createHTML(t)||t}function jh(t){return Bh()?.createScriptURL(t)||t}class al{constructor(r){this.changingThisBreaksApplicationSecurity=r}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${ut})`}}class Om extends al{getTypeName(){return"HTML"}}class Ip extends al{getTypeName(){return"Style"}}class wp extends al{getTypeName(){return"Script"}}class xm extends al{getTypeName(){return"URL"}}class $h extends al{getTypeName(){return"ResourceURL"}}function ul(t){return t instanceof al?t.changingThisBreaksApplicationSecurity:t}function Fl(t,r){const s=function Hh(t){return t instanceof al&&t.getTypeName()||null}(t);if(null!=s&&s!==r){if("ResourceURL"===s&&"URL"===r)return!0;throw new Error(`Required a safe ${r}, got a ${s} (see ${ut})`)}return s===r}function Hy(t){return new Om(t)}function km(t){return new Ip(t)}function id(t){return new wp(t)}function Hd(t){return new xm(t)}function sd(t){return new $h(t)}class Fm{constructor(r){this.inertDocumentHelper=r}getInertBodyElement(r){r="<body><remove></remove>"+r;try{const s=(new window.DOMParser).parseFromString(rd(r),"text/html").body;return null===s?this.inertDocumentHelper.getInertBodyElement(r):(s.removeChild(s.firstChild),s)}catch{return null}}}class ca{constructor(r){this.defaultDoc=r,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(r){const s=this.inertDocument.createElement("template");return s.innerHTML=rd(r),s}}const zh=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Ec(t){return(t=String(t)).match(zh)?t:"unsafe:"+t}function xu(t){const r={};for(const s of t.split(","))r[s]=!0;return r}function tu(...t){const r={};for(const s of t)for(const a in s)s.hasOwnProperty(a)&&(r[a]=!0);return r}const Ic=xu("area,br,col,hr,img,wbr"),Dp=xu("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Ll=xu("rp,rt"),ku=tu(Ic,tu(Dp,xu("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),tu(Ll,xu("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),tu(Ll,Dp)),Gh=xu("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Vm=tu(Gh,xu("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),xu("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Um=xu("script,style,template");class Wy{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(r){let s=r.firstChild,a=!0;for(;s;)if(s.nodeType===Node.ELEMENT_NODE?a=this.startElement(s):s.nodeType===Node.TEXT_NODE?this.chars(s.nodeValue):this.sanitizedSomething=!0,a&&s.firstChild)s=s.firstChild;else for(;s;){s.nodeType===Node.ELEMENT_NODE&&this.endElement(s);let l=this.checkClobberedElement(s,s.nextSibling);if(l){s=l;break}s=this.checkClobberedElement(s,s.parentNode)}return this.buf.join("")}startElement(r){const s=r.nodeName.toLowerCase();if(!ku.hasOwnProperty(s))return this.sanitizedSomething=!0,!Um.hasOwnProperty(s);this.buf.push("<"),this.buf.push(s);const a=r.attributes;for(let l=0;l<a.length;l++){const p=a.item(l),y=p.name,w=y.toLowerCase();if(!Vm.hasOwnProperty(w)){this.sanitizedSomething=!0;continue}let P=p.value;Gh[w]&&(P=Ec(P)),this.buf.push(" ",y,'="',jm(P),'"')}return this.buf.push(">"),!0}endElement(r){const s=r.nodeName.toLowerCase();ku.hasOwnProperty(s)&&!Ic.hasOwnProperty(s)&&(this.buf.push("</"),this.buf.push(s),this.buf.push(">"))}chars(r){this.buf.push(jm(r))}checkClobberedElement(r,s){if(s&&(r.compareDocumentPosition(s)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${r.outerHTML}`);return s}}const Wh=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Bm=/([^\#-~ |!])/g;function jm(t){return t.replace(/&/g,"&amp;").replace(Wh,function(r){return"&#"+(1024*(r.charCodeAt(0)-55296)+(r.charCodeAt(1)-56320)+65536)+";"}).replace(Bm,function(r){return"&#"+r.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Gd;function $m(t,r){let s=null;try{Gd=Gd||function Tp(t){const r=new ca(t);return function Lm(){try{return!!(new window.DOMParser).parseFromString(rd(""),"text/html")}catch{return!1}}()?new Fm(r):r}(t);let a=r?String(r):"";s=Gd.getInertBodyElement(a);let l=5,p=a;do{if(0===l)throw new Error("Failed to sanitize html because the input is unstable");l--,a=p,p=s.innerHTML,s=Gd.getInertBodyElement(a)}while(a!==p);return rd((new Wy).sanitizeChildren(qh(s)||s))}finally{if(s){const a=qh(s)||s;for(;a.firstChild;)a.removeChild(a.firstChild)}}}function qh(t){return"content"in t&&function wc(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var Iu=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(Iu||{});function Ap(t){const r=Wd();return r?Ep(r.sanitize(Iu.HTML,t)||""):Fl(t,"HTML")?Ep(ul(t)):$m(ja(),be(t))}function Cp(t){const r=Wd();return r?r.sanitize(Iu.URL,t)||"":Fl(t,"URL")?ul(t):Ec(be(t))}function bp(t){const r=Wd();if(r)return jh(r.sanitize(Iu.RESOURCE_URL,t)||"");if(Fl(t,"ResourceURL"))return jh(ul(t));throw new ce(904,!1)}function zm(t,r,s){return function qo(t,r){return"src"===r&&("embed"===t||"frame"===t||"iframe"===t||"media"===t||"script"===t)||"href"===r&&("base"===t||"link"===t)?bp:Cp}(r,s)(t)}function Wd(){const t=ht();return t&&t[is].sanitizer}const Tc=new Ht("ENVIRONMENT_INITIALIZER"),Gm=new Ht("INJECTOR",-1),qd=new Ht("INJECTOR_DEF_TYPES");class od{get(r,s=gr){if(s===gr){const a=new Error(`NullInjectorError: No provider for ${pe(r)}!`);throw a.name="NullInjectorError",a}return s}}function Rp(t){return{\u0275providers:t}}function Wm(...t){return{\u0275providers:Kh(0,t),\u0275fromNgModule:!0}}function Kh(t,...r){const s=[],a=new Set;let l;const p=y=>{s.push(y)};return Co(r,y=>{const w=y;Vl(w,p,[],a)&&(l||=[],l.push(w))}),void 0!==l&&Zh(l,p),s}function Zh(t,r){for(let s=0;s<t.length;s++){const{ngModule:a,providers:l}=t[s];Kd(l,p=>{r(p,a)})}}function Vl(t,r,s,a){if(!(t=Qe(t)))return!1;let l=null,p=Ir(t);const y=!p&&Wn(t);if(p||y){if(y&&!y.standalone)return!1;l=t}else{const P=t.ngModule;if(p=Ir(P),!p)return!1;l=P}const w=a.has(l);if(y){if(w)return!1;if(a.add(l),y.dependencies){const P="function"==typeof y.dependencies?y.dependencies():y.dependencies;for(const $ of P)Vl($,r,s,a)}}else{if(!p)return!1;{if(null!=p.imports&&!w){let $;a.add(l);try{Co(p.imports,ee=>{Vl(ee,r,s,a)&&($||=[],$.push(ee))})}finally{}void 0!==$&&Zh($,r)}if(!w){const $=nr(l)||(()=>new l);r({provide:l,useFactory:$,deps:Fe},l),r({provide:qd,useValue:l,multi:!0},l),r({provide:Tc,useValue:()=>vt(l),multi:!0},l)}const P=p.providers;if(null!=P&&!w){const $=t;Kd(P,ee=>{r(ee,$)})}}}return l!==t&&void 0!==t.providers}function Kd(t,r){for(let s of t)nt(s)&&(s=s.\u0275providers),Array.isArray(s)?Kd(s,r):r(s)}const Mp=X({provide:String,useValue:X});function Np(t){return null!==t&&"object"==typeof t&&Mp in t}function Ul(t){return"function"==typeof t}const Zd=new Ht("Set Injector scope."),Qh={},Zm={};let xp;function Qd(){return void 0===xp&&(xp=new od),xp}class Fu{}class wu extends Fu{get destroyed(){return this._destroyed}constructor(r,s,a,l){super(),this.parent=s,this.source=a,this.scopes=l,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Vp(r,y=>this.processProvider(y)),this.records.set(Gm,Dc(void 0,this)),l.has("environment")&&this.records.set(Fu,Dc(void 0,this));const p=this.records.get(Zd);null!=p&&"string"==typeof p.value&&this.scopes.add(p.value),this.injectorDefTypes=new Set(this.get(qd.multi,Fe,Zt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const s of this._ngOnDestroyHooks)s.ngOnDestroy();const r=this._onDestroyHooks;this._onDestroyHooks=[];for(const s of r)s()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(r){return this.assertNotDestroyed(),this._onDestroyHooks.push(r),()=>this.removeOnDestroy(r)}runInContext(r){this.assertNotDestroyed();const s=Ne(this),a=Kn(void 0);try{return r()}finally{Ne(s),Kn(a)}}get(r,s=gr,a=Zt.Default){if(this.assertNotDestroyed(),r.hasOwnProperty(kn))return r[kn](this);a=Kt(a);const p=Ne(this),y=Kn(void 0);try{if(!(a&Zt.SkipSelf)){let P=this.records.get(r);if(void 0===P){const $=function Lp(t){return"function"==typeof t||"object"==typeof t&&t instanceof Ht}(r)&&Ln(r);P=$&&this.injectableDefInScope($)?Dc(Bl(r),Qh):null,this.records.set(r,P)}if(null!=P)return this.hydrate(r,P)}return(a&Zt.Self?Qd():this.parent).get(r,s=a&Zt.Optional&&s===gr?null:s)}catch(w){if("NullInjectorError"===w.name){if((w[ir]=w[ir]||[]).unshift(pe(r)),p)throw w;return function ws(t,r,s,a){const l=t[ir];throw r[F]&&l.unshift(r[F]),t.message=function ls(t,r,s,a=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.slice(2):t;let l=pe(r);if(Array.isArray(r))l=r.map(pe).join(" -> ");else if("object"==typeof r){let p=[];for(let y in r)if(r.hasOwnProperty(y)){let w=r[y];p.push(y+":"+("string"==typeof w?JSON.stringify(w):pe(w)))}l=`{${p.join(", ")}}`}return`${s}${a?"("+a+")":""}[${l}]: ${t.replace(re,"\n  ")}`}("\n"+t.message,l,s,a),t.ngTokenPath=l,t[ir]=null,t}(w,r,"R3InjectorError",this.source)}throw w}finally{Kn(y),Ne(p)}}resolveInjectorInitializers(){const r=Ne(this),s=Kn(void 0);try{const l=this.get(Tc.multi,Fe,Zt.Self);for(const p of l)p()}finally{Ne(r),Kn(s)}}toString(){const r=[],s=this.records;for(const a of s.keys())r.push(pe(a));return`R3Injector[${r.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ce(205,!1)}processProvider(r){let s=Ul(r=Qe(r))?r:Qe(r&&r.provide);const a=function Yh(t){return Np(t)?Dc(void 0,t.useValue):Dc(Fp(t),Qh)}(r);if(Ul(r)||!0!==r.multi)this.records.get(s);else{let l=this.records.get(s);l||(l=Dc(void 0,Qh,!0),l.factory=()=>Gn(l.multi),this.records.set(s,l)),s=r,l.multi.push(r)}this.records.set(s,a)}hydrate(r,s){return s.value===Qh&&(s.value=Zm,s.value=s.factory()),"object"==typeof s.value&&s.value&&function Zy(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(s.value)&&this._ngOnDestroyHooks.add(s.value),s.value}injectableDefInScope(r){if(!r.providedIn)return!1;const s=Qe(r.providedIn);return"string"==typeof s?"any"===s||this.scopes.has(s):this.injectorDefTypes.has(s)}removeOnDestroy(r){const s=this._onDestroyHooks.indexOf(r);-1!==s&&this._onDestroyHooks.splice(s,1)}}function Bl(t){const r=Ln(t),s=null!==r?r.factory:nr(t);if(null!==s)return s;if(t instanceof Ht)throw new ce(204,!1);if(t instanceof Function)return function kp(t){const r=t.length;if(r>0)throw ma(r,"?"),new ce(204,!1);const s=function Sn(t){return t&&(t[Vn]||t[xn])||null}(t);return null!==s?()=>s.factory(t):()=>new t}(t);throw new ce(204,!1)}function Fp(t,r,s){let a;if(Ul(t)){const l=Qe(t);return nr(l)||Bl(l)}if(Np(t))a=()=>Qe(t.useValue);else if(function qm(t){return!(!t||!t.useFactory)}(t))a=()=>t.useFactory(...Gn(t.deps||[]));else if(function Op(t){return!(!t||!t.useExisting)}(t))a=()=>vt(Qe(t.useExisting));else{const l=Qe(t&&(t.useClass||t.provide));if(!function Qm(t){return!!t.deps}(t))return nr(l)||Bl(l);a=()=>new l(...Gn(t.deps))}return a}function Dc(t,r,s=!1){return{factory:t,value:r,multi:s?[]:void 0}}function Vp(t,r){for(const s of t)Array.isArray(s)?Vp(s,r):s&&nt(s)?Vp(s.\u0275providers,r):r(s)}const Jh=new Ht("AppId",{providedIn:"root",factory:()=>Ym}),Ym="ng",Up=new Ht("Platform Initializer"),Yd=new Ht("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Jd=new Ht("AnimationModuleType"),Xh=new Ht("CSP nonce",{providedIn:"root",factory:()=>ja().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let e_=(t,r,s)=>null;function Wp(t,r,s=!1){return e_(t,r,s)}class r_{}class i_{}class ev{resolveComponentFactory(r){throw function Kp(t){const r=Error(`No component factory found for ${pe(t)}.`);return r.ngComponent=t,r}(r)}}let hd=(()=>{class t{static#e=this.NULL=new ev}return t})();function sf(){return $l(Qi(),ht())}function $l(t,r){return new fd(qr(t,r))}let fd=(()=>{class t{constructor(s){this.nativeElement=s}static#e=this.__NG_ELEMENT_ID__=sf}return t})();function pd(t){return t instanceof fd?t.nativeElement:t}class af{}let tv=(()=>{class t{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function nv(){const t=ht(),s=Uo(Qi().index,t);return(vn(s)?s:t)[mn]}()}return t})(),a_=(()=>{class t{static#e=this.\u0275prov=Wt({token:t,providedIn:"root",factory:()=>null})}return t})();class Zp{constructor(r){this.full=r,this.major=r.split(".")[0],this.minor=r.split(".")[1],this.patch=r.split(".").slice(2).join(".")}}const u_=new Zp("16.2.12"),rh={};function cl(t,r=null,s=null,a){const l=cf(t,r,s,a);return l.resolveInjectorInitializers(),l}function cf(t,r=null,s=null,a,l=new Set){const p=[s||Fe,Wm(t)];return a=a||("object"==typeof t?void 0:pe(t)),new wu(p,r||Qd(),a||null,l)}let da=(()=>{class t{static#e=this.THROW_IF_NOT_FOUND=gr;static#t=this.NULL=new od;static create(s,a){if(Array.isArray(s))return cl({name:""},a,s,"");{const l=s.name??"";return cl({name:l},s.parent,s.providers,l)}}static#n=this.\u0275prov=Wt({token:t,providedIn:"any",factory:()=>vt(Gm)});static#r=this.__NG_ELEMENT_ID__=-1}return t})();function Hl(t){return t.ngOriginalError}class zl{constructor(){this._console=console}handleError(r){const s=this._findOriginalError(r);this._console.error("ERROR",r),s&&this._console.error("ORIGINAL ERROR",s)}_findOriginalError(r){let s=r&&Hl(r);for(;s&&Hl(s);)s=Hl(s);return s||null}}let df=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=eg;static#t=this.__NG_ENV_ID__=s=>s}return t})();class Xp extends df{constructor(r){super(),this._lView=r}onDestroy(r){return sa(this._lView,r),()=>function zu(t,r){if(null===t[ms])return;const s=t[ms].indexOf(r);-1!==s&&t[ms].splice(s,1)}(this._lView,r)}}function eg(){return new Xp(ht())}function oh(t){return r=>{setTimeout(t,void 0,r)}}const Lu=class tg extends h.x{constructor(r=!1){super(),this.__isAsync=r}emit(r){super.next(r)}subscribe(r,s,a){let l=r,p=s||(()=>null),y=a;if(r&&"object"==typeof r){const P=r;l=P.next?.bind(P),p=P.error?.bind(P),y=P.complete?.bind(P)}this.__isAsync&&(p=oh(p),l&&(l=oh(l)),y&&(y=oh(y)));const w=super.subscribe({next:l,error:p,complete:y});return r instanceof W.w0&&r.add(w),w}};function d_(...t){}class Ro{constructor({enableLongStackTrace:r=!1,shouldCoalesceEventChangeDetection:s=!1,shouldCoalesceRunChangeDetection:a=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Lu(!1),this.onMicrotaskEmpty=new Lu(!1),this.onStable=new Lu(!1),this.onError=new Lu(!1),typeof Zone>"u")throw new ce(908,!1);Zone.assertZonePatched();const l=this;l._nesting=0,l._outer=l._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(l._inner=l._inner.fork(new Zone.TaskTrackingZoneSpec)),r&&Zone.longStackTraceZoneSpec&&(l._inner=l._inner.fork(Zone.longStackTraceZoneSpec)),l.shouldCoalesceEventChangeDetection=!a&&s,l.shouldCoalesceRunChangeDetection=a,l.lastRequestAnimationFrameId=-1,l.nativeRequestAnimationFrame=function ng(){const t="function"==typeof Mn.requestAnimationFrame;let r=Mn[t?"requestAnimationFrame":"setTimeout"],s=Mn[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&r&&s){const a=r[Zone.__symbol__("OriginalDelegate")];a&&(r=a);const l=s[Zone.__symbol__("OriginalDelegate")];l&&(s=l)}return{nativeRequestAnimationFrame:r,nativeCancelAnimationFrame:s}}().nativeRequestAnimationFrame,function sv(t){const r=()=>{!function f_(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(Mn,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,hf(t),t.isCheckStableRunning=!0,ig(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),hf(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(s,a,l,p,y,w)=>{if(function ov(t){return!(!Array.isArray(t)||1!==t.length)&&!0===t[0].data?.__ignore_ng_zone__}(w))return s.invokeTask(l,p,y,w);try{return sg(t),s.invokeTask(l,p,y,w)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===p.type||t.shouldCoalesceRunChangeDetection)&&r(),og(t)}},onInvoke:(s,a,l,p,y,w,P)=>{try{return sg(t),s.invoke(l,p,y,w,P)}finally{t.shouldCoalesceRunChangeDetection&&r(),og(t)}},onHasTask:(s,a,l,p)=>{s.hasTask(l,p),a===l&&("microTask"==p.change?(t._hasPendingMicrotasks=p.microTask,hf(t),ig(t)):"macroTask"==p.change&&(t.hasPendingMacrotasks=p.macroTask))},onHandleError:(s,a,l,p)=>(s.handleError(l,p),t.runOutsideAngular(()=>t.onError.emit(p)),!1)})}(l)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ro.isInAngularZone())throw new ce(909,!1)}static assertNotInAngularZone(){if(Ro.isInAngularZone())throw new ce(909,!1)}run(r,s,a){return this._inner.run(r,s,a)}runTask(r,s,a,l){const p=this._inner,y=p.scheduleEventTask("NgZoneEvent: "+l,r,rg,d_,d_);try{return p.runTask(y,s,a)}finally{p.cancelTask(y)}}runGuarded(r,s,a){return this._inner.runGuarded(r,s,a)}runOutsideAngular(r){return this._outer.run(r)}}const rg={};function ig(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function hf(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function sg(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function og(t){t._nesting--,ig(t)}class p_{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Lu,this.onMicrotaskEmpty=new Lu,this.onStable=new Lu,this.onError=new Lu}run(r,s,a){return r.apply(s,a)}runGuarded(r,s,a){return r.apply(s,a)}runOutsideAngular(r){return r()}runTask(r,s,a,l){return r.apply(s,a)}}const g_=new Ht("",{providedIn:"root",factory:m_});function m_(){const t=At(Ro);let r=!0;const s=new K.y(l=>{r=t.isStable&&!t.hasPendingMacrotasks&&!t.hasPendingMicrotasks,t.runOutsideAngular(()=>{l.next(r),l.complete()})}),a=new K.y(l=>{let p;t.runOutsideAngular(()=>{p=t.onStable.subscribe(()=>{Ro.assertNotInAngularZone(),queueMicrotask(()=>{!r&&!t.hasPendingMacrotasks&&!t.hasPendingMicrotasks&&(r=!0,l.next(!0))})})});const y=t.onUnstable.subscribe(()=>{Ro.assertInAngularZone(),r&&(r=!1,t.runOutsideAngular(()=>{l.next(!1)}))});return()=>{p.unsubscribe(),y.unsubscribe()}});return(0,ve.T)(s,a.pipe((0,Ce.B)()))}function ff(t){return t.ownerDocument}function Vu(t){return t instanceof Function?t():t}let lg=(()=>{class t{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static#e=this.\u0275prov=Wt({token:t,providedIn:"root",factory:()=>new t})}return t})();function Sc(t){for(;t;){t[fn]|=64;const r=gc(t);if(ao(t)&&!r)return t;t=r}return null}const cg=new Ht("",{providedIn:"root",factory:()=>!1});let dl=null;function fg(t,r){return t[r]??Uu()}function vf(t,r){const s=Uu();s.producerNode?.length&&(t[r]=dl,s.lView=t,dl=Ef())}const cv={...Fs,consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{Sc(t.lView)},lView:null};function Ef(){return Object.create(cv)}function Uu(){return dl??=Ef(),dl}const or={};function D_(t){If(xr(),ht(),On()+t,!1)}function If(t,r,s,a){if(!a)if(3==(3&r[fn])){const p=t.preOrderCheckHooks;null!==p&&hu(r,p,s)}else{const p=t.preOrderHooks;null!==p&&fu(r,p,0,s)}Ps(s)}function gd(t,r=Zt.Default){const s=ht();return null===s?vt(t,r):N(Qi(),s,Qe(t),r)}function A_(){throw new Error("invalid")}function wf(t,r,s,a,l,p,y,w,P,$,ee){const he=r.blueprint.slice();return he[vr]=l,he[fn]=140|a,(null!==$||t&&2048&t[fn])&&(he[fn]|=2048),ia(he),he[Er]=he[zi]=t,he[er]=s,he[is]=y||t&&t[is],he[mn]=w||t&&t[mn],he[hi]=P||t&&t[hi]||null,he[di]=p,he[_i]=function fo(){return xy++}(),he[Fi]=ee,he[Oo]=$,he[Lr]=2==r.type?t[Lr]:he,he}function ql(t,r,s,a,l){let p=t.data[r];if(null===p)p=function gg(t,r,s,a,l){const p=Gi(),y=lu(),P=t.data[r]=function lh(t,r,s,a,l,p){let y=r?r.injectorIndex:-1,w=0;return Io()&&(w|=128),{type:s,index:a,insertBeforeIndex:null,injectorIndex:y,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:w,providerIndexes:0,value:l,attrs:p,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:r,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,y?p:p&&p.parent,s,r,a,l);return null===t.firstChild&&(t.firstChild=P),null!==p&&(y?null==p.child&&null!==P.parent&&(p.child=P):null===p.next&&(p.next=P,P.prev=p)),P}(t,r,s,a,l),function Al(){return Qt.lFrame.inI18n}()&&(p.flags|=32);else if(64&p.type){p.type=s,p.value=a,p.attrs=l;const y=function uu(){const t=Qt.lFrame,r=t.currentTNode;return t.isParent?r:r.parent}();p.injectorIndex=null===y?-1:y.injectorIndex}return as(p,!0),p}function Rc(t,r,s,a){if(0===s)return-1;const l=r.length;for(let p=0;p<s;p++)r.push(a),t.blueprint.push(a),t.data.push(null);return l}function C_(t,r,s,a,l){const p=fg(r,yi),y=On(),w=2&a;try{Ps(-1),w&&r.length>Qn&&If(t,r,Qn,!1),Rt(w?2:0,l);const $=w?p:null,ee=Ia($);try{null!==$&&($.dirty=!1),s(a,l)}finally{Ls($,ee)}}finally{w&&null===r[yi]&&vf(r,yi),Ps(y),Rt(w?3:1,l)}}function ah(t,r,s){if(ys(r)){const a=Ar(null);try{const p=r.directiveEnd;for(let y=r.directiveStart;y<p;y++){const w=t.data[y];w.contentQueries&&w.contentQueries(1,s[y],y)}}finally{Ar(a)}}}function Tf(t,r,s){Ut()&&(function wg(t,r,s,a){const l=s.directiveStart,p=s.directiveEnd;ko(s)&&function N_(t,r,s){const a=qr(r,t),l=mg(s);let y=16;s.signals?y=4096:s.onPush&&(y=64);const w=dh(t,wf(t,l,null,y,a,r,null,t[is].rendererFactory.createRenderer(a,s),null,null,null));t[r.index]=w}(r,s,t.data[l+s.componentOffset]),t.firstCreatePass||pu(s,r),Wo(a,r);const y=s.initialInputs;for(let w=l;w<p;w++){const P=t.data[w],$=V(r,t,w,s);Wo($,r),null!==y&&yd(0,w-l,$,P,0,y),Ui(P)&&(Uo(s.index,r)[er]=V(r,t,w,s))}}(t,r,s,qr(s,r)),64==(64&s.flags)&&Rf(t,r,s))}function uh(t,r,s=qr){const a=r.localNames;if(null!==a){let l=r.index+1;for(let p=0;p<a.length;p+=2){const y=a[p+1],w=-1===y?s(r,t):t[y];t[l++]=w}}}function mg(t){const r=t.tView;return null===r||r.incompleteFirstPass?t.tView=_g(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):r}function _g(t,r,s,a,l,p,y,w,P,$,ee){const he=Qn+a,xe=he+l,$e=function dv(t,r){const s=[];for(let a=0;a<r;a++)s.push(a<t?null:or);return s}(he,xe),ct="function"==typeof $?$():$;return $e[Lt]={type:t,blueprint:$e,template:s,queries:null,viewQuery:w,declTNode:r,data:$e.slice().fill(null,he),bindingStartIndex:he,expandoStartIndex:xe,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof p?p():p,pipeRegistry:"function"==typeof y?y():y,firstChild:null,schemas:P,consts:ct,incompleteFirstPass:!1,ssrId:ee}}let Df=t=>null;function b_(t,r,s,a){for(let l in t)if(t.hasOwnProperty(l)){s=null===s?{}:s;const p=t[l];null===a?Cf(s,r,l,p):a.hasOwnProperty(l)&&Cf(s,r,a[l],p)}return s}function Cf(t,r,s,a){t.hasOwnProperty(s)?t[s].push(r,a):t[s]=[r,a]}function Sa(t,r,s,a,l,p,y,w){const P=qr(r,s);let ee,$=r.inputs;!w&&null!=$&&(ee=$[a])?(Cg(t,s,ee,a,l),ko(r)&&function bf(t,r){const s=Uo(r,t);16&s[fn]||(s[fn]|=64)}(s,r.index)):3&r.type&&(a=function md(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(a),l=null!=y?y(l,r.value||"",a):l,p.setProperty(P,a,l))}function Eg(t,r,s,a){if(Ut()){const l=null===a?null:{"":-1},p=function Tg(t,r){const s=t.directiveRegistry;let a=null,l=null;if(s)for(let p=0;p<s.length;p++){const y=s[p];if(js(r,y.selectors,!1))if(a||(a=[]),Ui(y))if(null!==y.findHostDirectiveDefs){const w=[];l=l||new Map,y.findHostDirectiveDefs(y,w,l),a.unshift(...w,y),ch(t,r,w.length)}else a.unshift(y),ch(t,r,0);else l=l||new Map,y.findHostDirectiveDefs?.(y,a,l),a.push(y)}return null===a?null:[a,l]}(t,s);let y,w;null===p?y=w=null:[y,w]=p,null!==y&&R_(t,r,s,y,l,w),l&&function Pf(t,r,s){if(r){const a=t.localNames=[];for(let l=0;l<r.length;l+=2){const p=s[r[l+1]];if(null==p)throw new ce(-301,!1);a.push(r[l],p)}}}(s,a,l)}s.mergedAttrs=tr(s.mergedAttrs,s.attrs)}function R_(t,r,s,a,l,p){for(let $=0;$<a.length;$++)ua(pu(s,r),t,a[$].type);!function M_(t,r,s){t.flags|=1,t.directiveStart=r,t.directiveEnd=r+s,t.providerIndexes=r}(s,t.data.length,a.length);for(let $=0;$<a.length;$++){const ee=a[$];ee.providersResolver&&ee.providersResolver(ee)}let y=!1,w=!1,P=Rc(t,r,a.length,null);for(let $=0;$<a.length;$++){const ee=a[$];s.mergedAttrs=tr(s.mergedAttrs,ee.hostAttrs),_d(t,s,r,P,ee),Dg(P,ee,l),null!==ee.contentQueries&&(s.flags|=4),(null!==ee.hostBindings||null!==ee.hostAttrs||0!==ee.hostVars)&&(s.flags|=64);const he=ee.type.prototype;!y&&(he.ngOnChanges||he.ngOnInit||he.ngDoCheck)&&((t.preOrderHooks??=[]).push(s.index),y=!0),!w&&(he.ngOnChanges||he.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(s.index),w=!0),P++}!function S_(t,r,s){const l=r.directiveEnd,p=t.data,y=r.attrs,w=[];let P=null,$=null;for(let ee=r.directiveStart;ee<l;ee++){const he=p[ee],xe=s?s.get(he):null,ct=xe?xe.outputs:null;P=b_(he.inputs,ee,P,xe?xe.inputs:null),$=b_(he.outputs,ee,$,ct);const St=null===P||null===y||Qs(r)?null:gv(P,ee,y);w.push(St)}null!==P&&(P.hasOwnProperty("class")&&(r.flags|=8),P.hasOwnProperty("style")&&(r.flags|=16)),r.initialInputs=w,r.inputs=P,r.outputs=$}(t,s,p)}function Rf(t,r,s){const a=s.directiveStart,l=s.directiveEnd,p=s.index,y=function lo(){return Qt.lFrame.currentDirectiveIndex}();try{Ps(p);for(let w=a;w<l;w++){const P=t.data[w],$=r[w];du(w),(null!==P.hostBindings||0!==P.hostVars||null!==P.hostAttrs)&&P_(P,$)}}finally{Ps(-1),du(y)}}function P_(t,r){null!==t.hostBindings&&t.hostBindings(1,r)}function ch(t,r,s){r.componentOffset=s,(t.components??=[]).push(r.index)}function Dg(t,r,s){if(s){if(r.exportAs)for(let a=0;a<r.exportAs.length;a++)s[r.exportAs[a]]=t;Ui(r)&&(s[""]=t)}}function _d(t,r,s,a,l){t.data[a]=l;const p=l.factory||(l.factory=nr(l.type)),y=new Su(p,Ui(l),gd);t.blueprint[a]=y,s[a]=y,function Sf(t,r,s,a,l){const p=l.hostBindings;if(p){let y=t.hostBindingOpCodes;null===y&&(y=t.hostBindingOpCodes=[]);const w=~r.index;(function Ig(t){let r=t.length;for(;r>0;){const s=t[--r];if("number"==typeof s&&s<0)return s}return 0})(y)!=w&&y.push(w),y.push(s,a,p)}}(t,r,a,Rc(t,s,l.hostVars,or),l)}function nu(t,r,s,a,l,p){const y=qr(t,r);!function Mf(t,r,s,a,l,p,y){if(null==p)t.removeAttribute(r,l,s);else{const w=null==y?be(p):y(p,a||"",l);t.setAttribute(r,l,w,s)}}(r[mn],y,p,t.value,s,a,l)}function yd(t,r,s,a,l,p){const y=p[r];if(null!==y)for(let w=0;w<y.length;)Nf(a,s,y[w++],y[w++],y[w++])}function Nf(t,r,s,a,l){const p=Ar(null);try{const y=t.inputTransforms;null!==y&&y.hasOwnProperty(a)&&(l=y[a].call(r,l)),null!==t.setInput?t.setInput(r,l,s,a):r[a]=l}finally{Ar(p)}}function gv(t,r,s){let a=null,l=0;for(;l<s.length;){const p=s[l];if(0!==p)if(5!==p){if("number"==typeof p)break;if(t.hasOwnProperty(p)){null===a&&(a=[]);const y=t[p];for(let w=0;w<y.length;w+=2)if(y[w]===r){a.push(p,y[w+1],s[l+1]);break}}l+=2}else l+=2;else l+=4}return a}function O_(t,r,s,a){return[t,!0,!1,r,null,0,a,s,null,null,null]}function x_(t,r){const s=t.contentQueries;if(null!==s)for(let a=0;a<s.length;a+=2){const p=s[a+1];if(-1!==p){const y=t.data[p];R(s[a]),y.contentQueries(2,r[p],p)}}}function dh(t,r){return t[Ai]?t[ks][Hi]=r:t[Ai]=r,t[ks]=r,r}function Ag(t,r,s){R(0);const a=Ar(null);try{r(t,s)}finally{Ar(a)}}function k_(t){return t[Ki]||(t[Ki]=[])}function F_(t){return t.cleanup||(t.cleanup=[])}function V_(t,r){const s=t[hi],a=s?s.get(zl,null):null;a&&a.handleError(r)}function Cg(t,r,s,a,l){for(let p=0;p<s.length;){const y=s[p++],w=s[p++];Nf(t.data[y],r[y],a,w,l)}}function hl(t,r,s){const a=gt(r,t);!function td(t,r,s){t.setValue(r,s)}(t[mn],a,s)}function U_(t,r){const s=Uo(r,t),a=s[Lt];!function B_(t,r){for(let s=r.length;s<t.blueprint.length;s++)r.push(t.blueprint[s])}(a,s);const l=s[vr];null!==l&&null===s[Fi]&&(s[Fi]=Wp(l,s[hi])),hh(a,s,s[er])}function hh(t,r,s){B(r);try{const a=t.viewQuery;null!==a&&Ag(1,a,s);const l=t.template;null!==l&&C_(t,r,l,1,s),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&x_(t,r),t.staticViewQueries&&Ag(2,t.viewQuery,s);const p=t.components;null!==p&&function j_(t,r){for(let s=0;s<r.length;s++)U_(t,r[s])}(r,p)}catch(a){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),a}finally{r[fn]&=-5,Bt()}}let bg=(()=>{class t{constructor(){this.all=new Set,this.queue=new Map}create(s,a,l){const p=typeof Zone>"u"?null:Zone.current,y=function lt(t,r,s){const a=Object.create(Vr);s&&(a.consumerAllowSignalWrites=!0),a.fn=t,a.schedule=r;const l=y=>{a.cleanupFn=y};return a.ref={notify:()=>Si(a),run:()=>{if(a.dirty=!1,a.hasRun&&!wa(a))return;a.hasRun=!0;const y=Ia(a);try{a.cleanupFn(),a.cleanupFn=Xt,a.fn(l)}finally{Ls(a,y)}},cleanup:()=>a.cleanupFn()},a.ref}(s,$=>{this.all.has($)&&this.queue.set($,p)},l);let w;this.all.add(y),y.notify();const P=()=>{y.cleanup(),w?.(),this.all.delete(y),this.queue.delete(y)};return w=a?.onDestroy(P),{destroy:P}}flush(){if(0!==this.queue.size)for(const[s,a]of this.queue)this.queue.delete(s),a?a.run(()=>s.run()):s.run()}get isQueueEmpty(){return 0===this.queue.size}static#e=this.\u0275prov=Wt({token:t,providedIn:"root",factory:()=>new t})}return t})();function Sg(t,r){!r?.injector&&function ih(t){if(!an()&&!function oe(){return k}())throw new ce(-203,!1)}();const s=r?.injector??At(da),a=s.get(bg),l=!0!==r?.manualCleanup?s.get(df):null;return a.create(t,l,!!r?.allowSignalWrites)}function Pc(t,r,s){let a=s?t.styles:null,l=s?t.classes:null,p=0;if(null!==r)for(let y=0;y<r.length;y++){const w=r[y];"number"==typeof w?p=w:1==p?l=ze(l,w):2==p&&(a=ze(a,w+": "+r[++y]+";"))}s?t.styles=a:t.stylesWithoutHost=a,s?t.classes=l:t.classesWithoutHost=l}function Rr(t,r,s,a,l=!1){for(;null!==s;){const p=r[s.index];null!==p&&a.push(_t(p)),Vi(p)&&Rg(p,a);const y=s.type;if(8&y)Rr(t,r,s.child,a);else if(32&y){const w=hp(s,r);let P;for(;P=w();)a.push(P)}else if(16&y){const w=xl(r,s);if(Array.isArray(w))a.push(...w);else{const P=gc(r[Lr]);Rr(P[Lt],P,w,a,!0)}}s=l?s.projectionNext:s.next}return a}function Rg(t,r){for(let s=Tr;s<t.length;s++){const a=t[s],l=a[Lt].firstChild;null!==l&&Rr(a[Lt],a,l,r)}t[Li]!==t[vr]&&r.push(t[Li])}function fh(t,r,s,a=!0){const l=r[is],p=l.rendererFactory,y=l.afterRenderEventManager;p.begin?.(),y?.begin();try{Ko(t,r,t.template,s)}catch(P){throw a&&V_(r,P),P}finally{p.end?.(),l.effectManager?.flush(),y?.end()}}function Ko(t,r,s,a){const l=r[fn];if(256!=(256&l)){r[is].effectManager?.flush(),B(r);try{ia(r),function qu(t){return Qt.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==s&&C_(t,r,s,2,a);const y=3==(3&l);if(y){const $=t.preOrderCheckHooks;null!==$&&hu(r,$,null)}else{const $=t.preOrderHooks;null!==$&&fu(r,$,0,null),Aa(r,0)}if(function Bu(t){for(let r=mm(t);null!==r;r=Ks(r)){if(!r[eo])continue;const s=r[xo];for(let a=0;a<s.length;a++){Tl(s[a])}}}(r),Bs(r,2),null!==t.contentQueries&&x_(t,r),y){const $=t.contentCheckHooks;null!==$&&hu(r,$)}else{const $=t.contentHooks;null!==$&&fu(r,$,1),Aa(r,1)}!function pg(t,r){const s=t.hostBindingOpCodes;if(null===s)return;const a=fg(r,Gs);try{for(let l=0;l<s.length;l++){const p=s[l];if(p<0)Ps(~p);else{const y=p,w=s[++l],P=s[++l];Ku(w,y),a.dirty=!1;const $=Ia(a);try{P(2,r[y])}finally{Ls(a,$)}}}}finally{null===r[Gs]&&vf(r,Gs),Ps(-1)}}(t,r);const w=t.components;null!==w&&Pg(r,w,0);const P=t.viewQuery;if(null!==P&&Ag(2,P,a),y){const $=t.viewCheckHooks;null!==$&&hu(r,$)}else{const $=t.viewHooks;null!==$&&fu(r,$,2),Aa(r,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),r[fn]&=-73,Hu(r)}finally{Bt()}}}function Bs(t,r){for(let s=mm(t);null!==s;s=Ks(s))for(let a=Tr;a<s.length;a++)H_(s[a],r)}function _v(t,r,s){H_(Uo(r,t),s)}function H_(t,r){if(!function $u(t){return 128==(128&t[fn])}(t))return;const s=t[Lt],a=t[fn];if(80&a&&0===r||1024&a||2===r)Ko(s,t,s.template,t[er]);else if(t[gs]>0){Bs(t,1);const l=s.components;null!==l&&Pg(t,l,1)}}function Pg(t,r,s){for(let a=0;a<r.length;a++)_v(t,r[a],s)}class ph{get rootNodes(){const r=this._lView,s=r[Lt];return Rr(s,r,s.firstChild,[])}constructor(r,s){this._lView=r,this._cdRefInjectingView=s,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[er]}set context(r){this._lView[er]=r}get destroyed(){return 256==(256&this._lView[fn])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const r=this._lView[Er];if(Vi(r)){const s=r[8],a=s?s.indexOf(this):-1;a>-1&&(Ml(r,a),_u(s,a))}this._attachedToViewContainer=!1}Ud(this._lView[Lt],this._lView)}onDestroy(r){sa(this._lView,r)}markForCheck(){Sc(this._cdRefInjectingView||this._lView)}detach(){this._lView[fn]&=-129}reattach(){this._lView[fn]|=128}detectChanges(){fh(this._lView[Lt],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ce(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function ym(t,r){_c(t,r,r[mn],2,null,null)}(this._lView[Lt],this._lView)}attachToAppRef(r){if(this._attachedToViewContainer)throw new ce(902,!1);this._appRef=r}}class Mg extends ph{constructor(r){super(r),this._view=r}detectChanges(){const r=this._view;fh(r[Lt],r,r[er],!1)}checkNoChanges(){}get context(){return null}}class z_ extends hd{constructor(r){super(),this.ngModule=r}resolveComponentFactory(r){const s=Wn(r);return new Mi(s,this.ngModule)}}function xf(t){const r=[];for(let s in t)t.hasOwnProperty(s)&&r.push({propName:t[s],templateName:s});return r}class vv{constructor(r,s){this.injector=r,this.parentInjector=s}get(r,s,a){a=Kt(a);const l=this.injector.get(r,rh,a);return l!==rh||s===rh?l:this.parentInjector.get(r,s,a)}}class Mi extends i_{get inputs(){const r=this.componentDef,s=r.inputTransforms,a=xf(r.inputs);if(null!==s)for(const l of a)s.hasOwnProperty(l.propName)&&(l.transform=s[l.propName]);return a}get outputs(){return xf(this.componentDef.outputs)}constructor(r,s){super(),this.componentDef=r,this.ngModule=s,this.componentType=r.type,this.selector=function Ds(t){return t.map(xi).join(",")}(r.selectors),this.ngContentSelectors=r.ngContentSelectors?r.ngContentSelectors:[],this.isBoundToModule=!!s}create(r,s,a,l){let p=(l=l||this.ngModule)instanceof Fu?l:l?.injector;p&&null!==this.componentDef.getStandaloneInjector&&(p=this.componentDef.getStandaloneInjector(p)||p);const y=p?new vv(r,p):r,w=y.get(af,null);if(null===w)throw new ce(407,!1);const he={rendererFactory:w,sanitizer:y.get(a_,null),effectManager:y.get(bg,null),afterRenderEventManager:y.get(lg,null)},xe=w.createRenderer(null,this.componentDef),$e=this.componentDef.selectors[0][0]||"div",ct=a?function yg(t,r,s,a){const p=a.get(cg,!1)||s===ur.ShadowDom,y=t.selectRootElement(r,p);return function hv(t){Df(t)}(y),y}(xe,a,this.componentDef.encapsulation,y):Vd(xe,$e,function yv(t){const r=t.toLowerCase();return"svg"===r?en:"math"===r?"math":null}($e)),bn=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let wt=null;null!==ct&&(wt=Wp(ct,y,!0));const pr=_g(0,null,null,1,0,null,null,null,null,null,null),Gr=wf(null,pr,null,bn,null,null,he,xe,y,null,wt);let ts,ou;B(Gr);try{const Bc=this.componentDef;let Qf,BE=null;Bc.findHostDirectiveDefs?(Qf=[],BE=new Map,Bc.findHostDirectiveDefs(Bc,Qf,BE),Qf.push(Bc)):Qf=[Bc];const qC=function Ev(t,r){const s=t[Lt],a=Qn;return t[a]=r,ql(s,a,2,"#host",null)}(Gr,ct),KC=function Zs(t,r,s,a,l,p,y){const w=l[Lt];!function G_(t,r,s,a){for(const l of t)r.mergedAttrs=tr(r.mergedAttrs,l.hostAttrs);null!==r.mergedAttrs&&(Pc(r,r.mergedAttrs,!0),null!==s&&jd(a,s,r))}(a,t,r,y);let P=null;null!==r&&(P=Wp(r,l[hi]));const $=p.rendererFactory.createRenderer(r,s);let ee=16;s.signals?ee=4096:s.onPush&&(ee=64);const he=wf(l,mg(s),null,ee,l[t.index],t,p,$,null,null,P);return w.firstCreatePass&&ch(w,t,a.length-1),dh(l,he),l[t.index]=he}(qC,ct,Bc,Qf,Gr,he,xe);ou=ec(pr,Qn),ct&&function wv(t,r,s,a){if(a)ii(t,s,["ng-version",u_.full]);else{const{attrs:l,classes:p}=function Jo(t){const r=[],s=[];let a=1,l=2;for(;a<t.length;){let p=t[a];if("string"==typeof p)2===l?""!==p&&r.push(p,t[++a]):8===l&&s.push(p);else{if(!Wr(l))break;l=p}a++}return{attrs:r,classes:s}}(r.selectors[0]);l&&ii(t,s,l),p&&p.length>0&&vp(t,s,p.join(" "))}}(xe,Bc,ct,a),void 0!==s&&function W_(t,r,s){const a=t.projection=[];for(let l=0;l<r.length;l++){const p=s[l];a.push(null!=p?Array.from(p):null)}}(ou,this.ngContentSelectors,s),ts=function Iv(t,r,s,a,l,p){const y=Qi(),w=l[Lt],P=qr(y,l);R_(w,l,y,s,null,a);for(let ee=0;ee<s.length;ee++)Wo(V(l,w,y.directiveStart+ee,y),l);Rf(w,l,y),P&&Wo(P,l);const $=V(l,w,y.directiveStart+y.componentOffset,y);if(t[er]=l[er]=$,null!==p)for(const ee of p)ee($,r);return ah(w,y,t),$}(KC,Bc,Qf,BE,Gr,[Tv]),hh(pr,Gr,null)}finally{Bt()}return new ZE(this.componentType,ts,$l(ou,Gr),Gr,ou)}}class ZE extends r_{constructor(r,s,a,l,p){super(),this.location=a,this._rootLView=l,this._tNode=p,this.previousInputValues=null,this.instance=s,this.hostView=this.changeDetectorRef=new Mg(l),this.componentType=r}setInput(r,s){const a=this._tNode.inputs;let l;if(null!==a&&(l=a[r])){if(this.previousInputValues??=new Map,this.previousInputValues.has(r)&&Object.is(this.previousInputValues.get(r),s))return;const p=this._rootLView;Cg(p[Lt],p,l,r,s),this.previousInputValues.set(r,s),Sc(Uo(this._tNode.index,p))}}get injector(){return new Tt(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(r){this.hostView.onDestroy(r)}}function Tv(){const t=Qi();qs(ht()[Lt],t)}function Ng(t){let r=function q_(t){return Object.getPrototypeOf(t.prototype).constructor}(t.type),s=!0;const a=[t];for(;r;){let l;if(Ui(t))l=r.\u0275cmp||r.\u0275dir;else{if(r.\u0275cmp)throw new ce(903,!1);l=r.\u0275dir}if(l){if(s){a.push(l);const y=t;y.inputs=Og(t.inputs),y.inputTransforms=Og(t.inputTransforms),y.declaredInputs=Og(t.declaredInputs),y.outputs=Og(t.outputs);const w=l.hostBindings;w&&K_(t,w);const P=l.viewQuery,$=l.contentQueries;if(P&&Av(t,P),$&&Cv(t,$),ie(t.inputs,l.inputs),ie(t.declaredInputs,l.declaredInputs),ie(t.outputs,l.outputs),null!==l.inputTransforms&&(null===y.inputTransforms&&(y.inputTransforms={}),ie(y.inputTransforms,l.inputTransforms)),Ui(l)&&l.data.animation){const ee=t.data;ee.animation=(ee.animation||[]).concat(l.data.animation)}}const p=l.features;if(p)for(let y=0;y<p.length;y++){const w=p[y];w&&w.ngInherit&&w(t),w===Ng&&(s=!1)}}r=Object.getPrototypeOf(r)}!function Dv(t){let r=0,s=null;for(let a=t.length-1;a>=0;a--){const l=t[a];l.hostVars=r+=l.hostVars,l.hostAttrs=tr(l.hostAttrs,s=tr(s,l.hostAttrs))}}(a)}function Og(t){return t===ri?{}:t===Fe?[]:t}function Av(t,r){const s=t.viewQuery;t.viewQuery=s?(a,l)=>{r(a,l),s(a,l)}:r}function Cv(t,r){const s=t.contentQueries;t.contentQueries=s?(a,l,p)=>{r(a,l,p),s(a,l,p)}:r}function K_(t,r){const s=t.hostBindings;t.hostBindings=s?(a,l)=>{r(a,l),s(a,l)}:r}function xg(t){const r=t.inputConfig,s={};for(const a in r)if(r.hasOwnProperty(a)){const l=r[a];Array.isArray(l)&&l[2]&&(s[a]=l[2])}t.inputTransforms=s}function Mc(t){return!!vd(t)&&(Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t)}function vd(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function Du(t,r,s){return t[r]=s}function Zo(t,r,s){return!Object.is(t[r],s)&&(t[r]=s,!0)}function fl(t,r,s,a){const l=Zo(t,r,s);return Zo(t,r+1,a)||l}function Ed(t,r,s,a,l){const p=fl(t,r,s,a);return Zo(t,r+2,l)||p}function _h(t,r,s,a){const l=ht();return Zo(l,Es(),r)&&(xr(),nu(Xr(),l,t,r,s,a)),_h}function ru(t,r,s,a){return Zo(t,Es(),s)?r+be(s)+a:or}function kc(t,r,s,a,l,p){const w=fl(t,Ei(),s,l);return wo(2),w?r+be(s)+a+be(l)+p:or}function Yl(t,r,s,a,l,p,y,w,P,$){const he=function Ra(t,r,s,a,l,p){const y=fl(t,r,s,a);return fl(t,r+2,l,p)||y}(t,Ei(),s,l,y,P);return wo(4),he?r+be(s)+a+be(l)+p+be(y)+w+be(P)+$:or}function ey(t,r,s,a,l,p,y,w){const P=ht(),$=xr(),ee=t+Qn,he=$.firstCreatePass?function Jl(t,r,s,a,l,p,y,w,P){const $=r.consts,ee=ql(r,t,4,y||null,Yo($,w));Eg(r,s,ee,Yo($,P)),qs(r,ee);const he=ee.tView=_g(2,ee,a,l,p,r.directiveRegistry,r.pipeRegistry,null,r.schemas,$,null);return null!==r.queries&&(r.queries.template(r,ee),he.queries=r.queries.embeddedTView(ee)),ee}(ee,$,P,r,s,a,l,p,y):$.data[ee];as(he,!1);const xe=ty($,P,he,t);Zu()&&Bd($,P,xe,he),Wo(xe,P),dh(P,P[ee]=O_(xe,P,xe,he)),Ea(he)&&Tf($,P,he),null!=y&&uh(P,he,w)}let ty=function ny(t,r,s,a){return oa(!0),r[mn].createComment("")};function ry(t){return Rs(function Gu(){return Qt.lFrame.contextLView}(),Qn+t)}function Wg(t,r,s){const a=ht();return Zo(a,Es(),r)&&Sa(xr(),Xr(),a,t,r,a[mn],s,!1),Wg}function qg(t,r,s,a,l){const y=l?"class":"style";Cg(t,s,r.inputs[y],y,a)}function Uf(t,r,s,a){const l=ht(),p=xr(),y=Qn+t,w=l[mn],P=p.firstCreatePass?function jv(t,r,s,a,l,p){const y=r.consts,P=ql(r,t,2,a,Yo(y,l));return Eg(r,s,P,Yo(y,p)),null!==P.attrs&&Pc(P,P.attrs,!1),null!==P.mergedAttrs&&Pc(P,P.mergedAttrs,!0),null!==r.queries&&r.queries.elementStart(r,P),P}(y,p,l,r,s,a):p.data[y],$=$v(p,l,P,w,r,t);l[y]=$;const ee=Ea(P);return as(P,!0),jd(w,$,P),32!=(32&P.flags)&&Zu()&&Bd(p,l,$,P),0===function qn(){return Qt.lFrame.elementDepthCount}()&&Wo($,l),function qa(){Qt.lFrame.elementDepthCount++}(),ee&&(Tf(p,l,P),ah(p,P,l)),null!==a&&uh(l,P),Uf}function _l(){let t=Qi();lu()?je():(t=t.parent,as(t,!1));const r=t;(function Cu(t){return Qt.skipHydrationRootTNode===t})(r)&&function bh(){Qt.skipHydrationRootTNode=null}(),function pi(){Qt.lFrame.elementDepthCount--}();const s=xr();return s.firstCreatePass&&(qs(s,t),ys(t)&&s.queries.elementEnd(t)),null!=r.classesWithoutHost&&function Hc(t){return 0!=(8&t.flags)}(r)&&qg(s,r,ht(),r.classesWithoutHost,!0),null!=r.stylesWithoutHost&&function Za(t){return 0!=(16&t.flags)}(r)&&qg(s,r,ht(),r.stylesWithoutHost,!1),_l}function wh(t,r,s,a){return Uf(t,r,s,a),_l(),wh}let $v=(t,r,s,a,l,p)=>(oa(!0),Vd(a,l,function io(){return Qt.lFrame.currentNamespace}()));function Bf(t,r,s){const a=ht(),l=xr(),p=t+Qn,y=l.firstCreatePass?function Gv(t,r,s,a,l){const p=r.consts,y=Yo(p,a),w=ql(r,t,8,"ng-container",y);return null!==y&&Pc(w,y,!0),Eg(r,s,w,Yo(p,l)),null!==r.queries&&r.queries.elementStart(r,w),w}(p,l,a,r,s):l.data[p];as(y,!0);const w=Wv(l,a,y,t);return a[p]=w,Zu()&&Bd(l,a,w,y),Wo(w,a),Ea(y)&&(Tf(l,a,y),ah(l,y,a)),null!=s&&uh(a,y),Bf}function jf(){let t=Qi();const r=xr();return lu()?je():(t=t.parent,as(t,!1)),r.firstCreatePass&&(qs(r,t),ys(t)&&r.queries.elementEnd(t)),jf}function iy(t,r,s){return Bf(t,r,s),jf(),iy}let Wv=(t,r,s,a)=>(oa(!0),eu(r[mn],""));function sy(){return ht()}function Kg(t){return!!t&&"function"==typeof t.then}function oy(t){return!!t&&"function"==typeof t.subscribe}function ay(t,r,s,a){const l=ht(),p=xr(),y=Qi();return function yl(t,r,s,a,l,p,y){const w=Ea(a),$=t.firstCreatePass&&F_(t),ee=r[er],he=k_(r);let xe=!0;if(3&a.type||y){const St=qr(a,r),Yt=y?y(St):St,bn=he.length,wt=y?Gr=>y(_t(Gr[a.index])):a.index;let pr=null;if(!y&&w&&(pr=function ly(t,r,s,a){const l=t.cleanup;if(null!=l)for(let p=0;p<l.length-1;p+=2){const y=l[p];if(y===s&&l[p+1]===a){const w=r[Ki],P=l[p+2];return w.length>P?w[P]:null}"string"==typeof y&&(p+=2)}return null}(t,r,l,a.index)),null!==pr)(pr.__ngLastListenerFn__||pr).__ngNextListenerFn__=p,pr.__ngLastListenerFn__=p,xe=!1;else{p=dy(a,r,ee,p,!1);const Gr=s.listen(Yt,l,p);he.push(p,Gr),$&&$.push(l,wt,bn,bn+1)}}else p=dy(a,r,ee,p,!1);const $e=a.outputs;let ct;if(xe&&null!==$e&&(ct=$e[l])){const St=ct.length;if(St)for(let Yt=0;Yt<St;Yt+=2){const ts=r[ct[Yt]][ct[Yt+1]].subscribe(p),ou=he.length;he.push(p,ts),$&&$.push(l,a.index,ou,-(ou+1))}}}(p,l,l[mn],y,t,r,a),ay}function cy(t,r,s,a){try{return Rt(6,r,s),!1!==s(a)}catch(l){return V_(t,l),!1}finally{Rt(7,r,s)}}function dy(t,r,s,a,l){return function p(y){if(y===Function)return a;Sc(t.componentOffset>-1?Uo(t.index,r):r);let P=cy(r,s,a,y),$=p.__ngNextListenerFn__;for(;$;)P=cy(r,s,$,y)&&P,$=$.__ngNextListenerFn__;return l&&!1===P&&y.preventDefault(),P}}function hy(t=1){return function jn(t){return(Qt.lFrame.contextLView=function Ii(t,r){for(;t>0;)r=r[zi],t--;return r}(t,Qt.lFrame.contextLView))[er]}(t)}function qv(t,r){let s=null;const a=function Js(t){const r=t.attrs;if(null!=r){const s=r.indexOf(5);if(!(1&s))return r[s+1]}return null}(t);for(let l=0;l<r.length;l++){const p=r[l];if("*"!==p){if(null===a?js(t,p,!0):hs(a,p))return l}else s=l}return s}function fy(t){const r=ht()[Lr][di];if(!r.projection){const a=r.projection=ma(t?t.length:1,null),l=a.slice();let p=r.child;for(;null!==p;){const y=t?qv(p,t):0;null!==y&&(l[y]?l[y].projectionNext=p:a[y]=p,l[y]=p),p=p.next}}}function py(t,r=0,s){const a=ht(),l=xr(),p=ql(l,Qn+t,16,null,s||null);null===p.projection&&(p.projection=r),je(),(!a[Fi]||Io())&&32!=(32&p.flags)&&function _p(t,r,s){yp(r[mn],0,r,s,Lh(t,s,r),bm(s.parent||r[di],s,r))}(l,a,p)}function Zg(t,r,s){return gy(t,"",r,"",s),Zg}function gy(t,r,s,a,l){const p=ht(),y=ru(p,r,s,a);return y!==or&&Sa(xr(),Xr(),p,t,y,p[mn],l,!1),gy}function my(t,r,s,a,l,p,y){const w=ht(),P=kc(w,r,s,a,l,p);return P!==or&&Sa(xr(),Xr(),w,t,P,w[mn],y,!1),my}function Th(t,r){return t<<17|r<<2}function Uc(t){return t>>17&32767}function i(t){return 2|t}function e(t){return(131068&t)>>2}function n(t,r){return-131069&t|r<<2}function u(t){return 1|t}function G(t,r,s,a,l){const p=t[s+1],y=null===r;let w=a?Uc(p):e(p),P=!1;for(;0!==w&&(!1===P||y);){const ee=t[w+1];te(t[w],r)&&(P=!0,t[w+1]=a?u(ee):i(ee)),w=a?Uc(ee):e(ee)}P&&(t[s+1]=a?i(p):u(p))}function te(t,r){return null===t||null==r||(Array.isArray(t)?t[1]:t)===r||!(!Array.isArray(t)||"string"!=typeof r)&&Xu(t,r)>=0}const ue={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Se(t){return t.substring(ue.key,ue.keyEnd)}function qe(t){return t.substring(ue.value,ue.valueEnd)}function zt(t,r){const s=ue.textEnd;return s===r?-1:(r=ue.keyEnd=function Pr(t,r,s){for(;r<s&&t.charCodeAt(r)>32;)r++;return r}(t,ue.key=r,s),wn(t,r,s))}function An(t,r){const s=ue.textEnd;let a=ue.key=wn(t,r,s);return s===a?-1:(a=ue.keyEnd=function es(t,r,s){let a;for(;r<s&&(45===(a=t.charCodeAt(r))||95===a||(-33&a)>=65&&(-33&a)<=90||a>=48&&a<=57);)r++;return r}(t,a,s),a=Ni(t,a,s),a=ue.value=wn(t,a,s),a=ue.valueEnd=function Po(t,r,s){let a=-1,l=-1,p=-1,y=r,w=y;for(;y<s;){const P=t.charCodeAt(y++);if(59===P)return w;34===P||39===P?w=y=$a(t,P,y,s):r===y-4&&85===p&&82===l&&76===a&&40===P?w=y=$a(t,41,y,s):P>32&&(w=y),p=l,l=a,a=-33&P}return w}(t,a,s),Ni(t,a,s))}function fr(t){ue.key=0,ue.keyEnd=0,ue.value=0,ue.valueEnd=0,ue.textEnd=t.length}function wn(t,r,s){for(;r<s&&t.charCodeAt(r)<=32;)r++;return r}function Ni(t,r,s,a){return(r=wn(t,r,s))<s&&r++,r}function $a(t,r,s,a){let l=-1,p=s;for(;p<a;){const y=t.charCodeAt(p++);if(y==r&&92!==l)return p;l=92==y&&92===l?0:y}throw new Error}function Hf(t,r,s){return El(t,r,s,!1),Hf}function Jv(t,r){return El(t,r,null,!0),Jv}function vl(t){Il(oI,qw,t,!1)}function qw(t,r){for(let s=function jt(t){return fr(t),An(t,wn(t,0,ue.textEnd))}(r);s>=0;s=An(r,s))oI(t,Se(r),qe(r))}function rI(t){Il(Xw,Xl,t,!0)}function Xl(t,r){for(let s=function Nt(t){return fr(t),zt(t,wn(t,0,ue.textEnd))}(r);s>=0;s=zt(r,s))ho(t,Se(r),!0)}function El(t,r,s,a){const l=ht(),p=xr(),y=wo(2);p.firstUpdatePass&&sI(p,t,y,a),r!==or&&Zo(l,y,r)&&aI(p,p.data[On()],l,l[mn],t,l[y+1]=function tT(t,r){return null==t||""===t||("string"==typeof r?t+=r:"object"==typeof t&&(t=pe(ul(t)))),t}(r,s),a,y)}function Il(t,r,s,a){const l=xr(),p=wo(2);l.firstUpdatePass&&sI(l,null,p,a);const y=ht();if(s!==or&&Zo(y,p,s)){const w=l.data[On()];if(lI(w,a)&&!iI(l,p)){let P=a?w.classesWithoutHost:w.stylesWithoutHost;null!==P&&(s=ze(P,s||"")),qg(l,w,y,s,a)}else!function eT(t,r,s,a,l,p,y,w){l===or&&(l=Fe);let P=0,$=0,ee=0<l.length?l[0]:null,he=0<p.length?p[0]:null;for(;null!==ee||null!==he;){const xe=P<l.length?l[P+1]:void 0,$e=$<p.length?p[$+1]:void 0;let St,ct=null;ee===he?(P+=2,$+=2,xe!==$e&&(ct=he,St=$e)):null===he||null!==ee&&ee<he?(P+=2,ct=ee):($+=2,ct=he,St=$e),null!==ct&&aI(t,r,s,a,ct,St,y,w),ee=P<l.length?l[P]:null,he=$<p.length?p[$]:null}}(l,w,y,y[mn],y[p+1],y[p+1]=function Jw(t,r,s){if(null==s||""===s)return Fe;const a=[],l=ul(s);if(Array.isArray(l))for(let p=0;p<l.length;p++)t(a,l[p],!0);else if("object"==typeof l)for(const p in l)l.hasOwnProperty(p)&&t(a,p,l[p]);else"string"==typeof l&&r(a,l);return a}(t,r,s),a,p)}}function iI(t,r){return r>=t.expandoStartIndex}function sI(t,r,s,a){const l=t.data;if(null===l[s+1]){const p=l[On()],y=iI(t,s);lI(p,a)&&null===r&&!y&&(r=!1),r=function Kw(t,r,s,a){const l=function Da(t){const r=Qt.lFrame.currentDirectiveIndex;return-1===r?null:t[r]}(t);let p=a?r.residualClasses:r.residualStyles;if(null===l)0===(a?r.classBindings:r.styleBindings)&&(s=Xg(s=Xv(null,t,r,s,a),r.attrs,a),p=null);else{const y=r.directiveStylingLast;if(-1===y||t[y]!==l)if(s=Xv(l,t,r,s,a),null===p){let P=function Zw(t,r,s){const a=s?r.classBindings:r.styleBindings;if(0!==e(a))return t[Uc(a)]}(t,r,a);void 0!==P&&Array.isArray(P)&&(P=Xv(null,t,r,P[1],a),P=Xg(P,r.attrs,a),function Qw(t,r,s,a){t[Uc(s?r.classBindings:r.styleBindings)]=a}(t,r,a,P))}else p=function Yw(t,r,s){let a;const l=r.directiveEnd;for(let p=1+r.directiveStylingLast;p<l;p++)a=Xg(a,t[p].hostAttrs,s);return Xg(a,r.attrs,s)}(t,r,a)}return void 0!==p&&(a?r.residualClasses=p:r.residualStyles=p),s}(l,p,r,a),function S(t,r,s,a,l,p){let y=p?r.classBindings:r.styleBindings,w=Uc(y),P=e(y);t[a]=s;let ee,$=!1;if(Array.isArray(s)?(ee=s[1],(null===ee||Xu(s,ee)>0)&&($=!0)):ee=s,l)if(0!==P){const xe=Uc(t[w+1]);t[a+1]=Th(xe,w),0!==xe&&(t[xe+1]=n(t[xe+1],a)),t[w+1]=function $f(t,r){return 131071&t|r<<17}(t[w+1],a)}else t[a+1]=Th(w,0),0!==w&&(t[w+1]=n(t[w+1],a)),w=a;else t[a+1]=Th(P,0),0===w?w=a:t[P+1]=n(t[P+1],a),P=a;$&&(t[a+1]=i(t[a+1])),G(t,ee,a,!0),G(t,ee,a,!1),function x(t,r,s,a,l){const p=l?t.residualClasses:t.residualStyles;null!=p&&"string"==typeof r&&Xu(p,r)>=0&&(s[a+1]=u(s[a+1]))}(r,ee,t,a,p),y=Th(w,P),p?r.classBindings=y:r.styleBindings=y}(l,p,r,s,y,a)}}function Xv(t,r,s,a,l){let p=null;const y=s.directiveEnd;let w=s.directiveStylingLast;for(-1===w?w=s.directiveStart:w++;w<y&&(p=r[w],a=Xg(a,p.hostAttrs,l),p!==t);)w++;return null!==t&&(s.directiveStylingLast=w),a}function Xg(t,r,s){const a=s?1:2;let l=-1;if(null!==r)for(let p=0;p<r.length;p++){const y=r[p];"number"==typeof y?l=y:l===a&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),ho(t,y,!!s||r[++p]))}return void 0===t?null:t}function oI(t,r,s){ho(t,r,ul(s))}function Xw(t,r,s){const a=String(r);""!==a&&!a.includes(" ")&&ho(t,a,s)}function aI(t,r,s,a,l,p,y,w){if(!(3&r.type))return;const P=t.data,$=P[w+1],ee=function o(t){return 1==(1&t)}($)?uI(P,r,s,l,e($),y):void 0;yy(ee)||(yy(p)||function Jg(t){return 2==(2&t)}($)&&(p=uI(P,null,s,l,w,y)),function By(t,r,s,a,l){if(r)l?t.addClass(s,a):t.removeClass(s,a);else{let p=-1===a.indexOf("-")?void 0:nl.DashCase;null==l?t.removeStyle(s,a,p):("string"==typeof l&&l.endsWith("!important")&&(l=l.slice(0,-10),p|=nl.Important),t.setStyle(s,a,l,p))}}(a,y,gt(On(),s),l,p))}function uI(t,r,s,a,l,p){const y=null===r;let w;for(;l>0;){const P=t[l],$=Array.isArray(P),ee=$?P[1]:P,he=null===ee;let xe=s[l+1];xe===or&&(xe=he?Fe:void 0);let $e=he?Ua(xe,a):ee===a?xe:void 0;if($&&!yy($e)&&($e=Ua(P,a)),yy($e)&&(w=$e,y))return w;const ct=t[l+1];l=y?Uc(ct):e(ct)}if(null!==r){let P=p?r.residualClasses:r.residualStyles;null!=P&&(w=Ua(P,a))}return w}function yy(t){return void 0!==t}function lI(t,r){return 0!=(t.flags&(r?8:16))}function cI(t,r=""){const s=ht(),a=xr(),l=t+Qn,p=a.firstCreatePass?ql(a,l,1,r,null):a.data[l],y=dI(a,s,p,r,t);s[l]=y,Zu()&&Bd(a,s,y,p),as(p,!1)}let dI=(t,r,s,a,l)=>(oa(!0),function Ld(t,r){return t.createText(r)}(r[mn],a));function eE(t){return vy("",t,""),eE}function vy(t,r,s){const a=ht(),l=ru(a,t,r,s);return l!==or&&hl(a,On(),l),vy}function tE(t,r,s,a,l){const p=ht(),y=kc(p,t,r,s,a,l);return y!==or&&hl(p,On(),y),tE}function nE(t,r,s,a,l,p,y){const w=ht(),P=function Fc(t,r,s,a,l,p,y,w){const $=Ed(t,Ei(),s,l,y);return wo(3),$?r+be(s)+a+be(l)+p+be(y)+w:or}(w,t,r,s,a,l,p,y);return P!==or&&hl(w,On(),P),nE}function rE(t,r,s,a,l,p,y,w,P){const $=ht(),ee=Yl($,t,r,s,a,l,p,y,w,P);return ee!==or&&hl($,On(),ee),rE}const Dh=void 0;var TT=["en",[["a","p"],["AM","PM"],Dh],[["AM","PM"],Dh,Dh],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Dh,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Dh,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Dh,"{1} 'at' {0}",Dh],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function wT(t){const s=Math.floor(Math.abs(t)),a=t.toString().replace(/^[^.]*\.?/,"").length;return 1===s&&0===a?1:5}];let zf={};function iE(t){const r=function DT(t){return t.toLowerCase().replace(/_/g,"-")}(t);let s=RI(r);if(s)return s;const a=r.split("-")[0];if(s=RI(a),s)return s;if("en"===a)return TT;throw new ce(701,!1)}function SI(t){return iE(t)[Gf.PluralCase]}function RI(t){return t in zf||(zf[t]=Mn.ng&&Mn.ng.common&&Mn.ng.common.locales&&Mn.ng.common.locales[t]),zf[t]}var Gf=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}(Gf||{});const Wf="en-US";let PI=Wf;function aE(t,r,s,a,l){if(t=Qe(t),Array.isArray(t))for(let p=0;p<t.length;p++)aE(t[p],r,s,a,l);else{const p=xr(),y=ht(),w=Qi();let P=Ul(t)?t:Qe(t.provide);const $=Fp(t),ee=1048575&w.providerIndexes,he=w.directiveStart,xe=w.providerIndexes>>20;if(Ul(t)||!t.multi){const $e=new Su($,l,gd),ct=lE(P,r,l?ee:ee+xe,he);-1===ct?(ua(pu(w,y),p,P),uE(p,t,r.length),r.push(P),w.directiveStart++,w.directiveEnd++,l&&(w.providerIndexes+=1048576),s.push($e),y.push($e)):(s[ct]=$e,y[ct]=$e)}else{const $e=lE(P,r,ee+xe,he),ct=lE(P,r,ee,ee+xe),Yt=ct>=0&&s[ct];if(l&&!Yt||!l&&!($e>=0&&s[$e])){ua(pu(w,y),p,P);const bn=function wD(t,r,s,a,l){const p=new Su(t,s,gd);return p.multi=[],p.index=r,p.componentProviders=0,t0(p,l,a&&!s),p}(l?ID:ED,s.length,l,a,$);!l&&Yt&&(s[ct].providerFactory=bn),uE(p,t,r.length,0),r.push(P),w.directiveStart++,w.directiveEnd++,l&&(w.providerIndexes+=1048576),s.push(bn),y.push(bn)}else uE(p,t,$e>-1?$e:ct,t0(s[l?ct:$e],$,!l&&a));!l&&a&&Yt&&s[ct].componentProviders++}}}function uE(t,r,s,a){const l=Ul(r),p=function Km(t){return!!t.useClass}(r);if(l||p){const P=(p?Qe(r.useClass):r).prototype.ngOnDestroy;if(P){const $=t.destroyHooks||(t.destroyHooks=[]);if(!l&&r.multi){const ee=$.indexOf(s);-1===ee?$.push(s,[a,P]):$[ee+1].push(a,P)}else $.push(s,P)}}}function t0(t,r,s){return s&&t.componentProviders++,t.multi.push(r)-1}function lE(t,r,s,a){for(let l=s;l<a;l++)if(r[l]===t)return l;return-1}function ED(t,r,s,a){return cE(this.multi,[])}function ID(t,r,s,a){const l=this.multi;let p;if(this.providerFactory){const y=this.providerFactory.componentProviders,w=V(s,s[Lt],this.providerFactory.index,a);p=w.slice(0,y),cE(l,p);for(let P=y;P<w.length;P++)p.push(w[P])}else p=[],cE(l,p);return p}function cE(t,r){for(let s=0;s<t.length;s++)r.push((0,t[s])());return r}function n0(t,r=[]){return s=>{s.providersResolver=(a,l)=>function vD(t,r,s){const a=xr();if(a.firstCreatePass){const l=Ui(t);aE(s,a.data,a.blueprint,l,!0),aE(r,a.data,a.blueprint,l,!1)}}(a,l?l(t):t,r)}}class Ah{}class r0{}function TD(t,r){return new dE(t,r??null,[])}class dE extends Ah{constructor(r,s,a){super(),this._parent=s,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new z_(this);const l=ci(r);this._bootstrapComponents=Vu(l.bootstrap),this._r3Injector=cf(r,s,[{provide:Ah,useValue:this},{provide:hd,useValue:this.componentFactoryResolver},...a],pe(r),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(r)}get injector(){return this._r3Injector}destroy(){const r=this._r3Injector;!r.destroyed&&r.destroy(),this.destroyCbs.forEach(s=>s()),this.destroyCbs=null}onDestroy(r){this.destroyCbs.push(r)}}class hE extends r0{constructor(r){super(),this.moduleType=r}create(r){return new dE(this.moduleType,r,[])}}class s0 extends Ah{constructor(r){super(),this.componentFactoryResolver=new z_(this),this.instance=null;const s=new wu([...r.providers,{provide:Ah,useValue:this},{provide:hd,useValue:this.componentFactoryResolver}],r.parent||Qd(),r.debugName,new Set(["environment"]));this.injector=s,r.runEnvironmentInitializers&&s.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(r){this.injector.onDestroy(r)}}function o0(t,r,s=null){return new s0({providers:t,parent:r,debugName:s,runEnvironmentInitializers:!0}).injector}let AD=(()=>{class t{constructor(s){this._injector=s,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(s){if(!s.standalone)return null;if(!this.cachedInjectors.has(s)){const a=Kh(0,s.type),l=a.length>0?o0([a],this._injector,`Standalone[${s.type.name}]`):null;this.cachedInjectors.set(s,l)}return this.cachedInjectors.get(s)}ngOnDestroy(){try{for(const s of this.cachedInjectors.values())null!==s&&s.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=Wt({token:t,providedIn:"environment",factory:()=>new t(vt(Fu))})}return t})();function a0(t){t.getStandaloneInjector=r=>r.get(AD).getOrCreateStandaloneInjector(t)}function p0(t,r,s){const a=Hr()+t,l=ht();return l[a]===or?Du(l,a,s?r.call(s):r()):function Oc(t,r){return t[r]}(l,a)}function g0(t,r,s,a){return v0(ht(),Hr(),t,r,s,a)}function m0(t,r,s,a,l){return function E0(t,r,s,a,l,p,y){const w=r+s;return fl(t,w,l,p)?Du(t,w+2,y?a.call(y,l,p):a(l,p)):sm(t,w+2)}(ht(),Hr(),t,r,s,a,l)}function _0(t,r,s,a,l,p){return function I0(t,r,s,a,l,p,y,w){const P=r+s;return Ed(t,P,l,p,y)?Du(t,P+3,w?a.call(w,l,p,y):a(l,p,y)):sm(t,P+3)}(ht(),Hr(),t,r,s,a,l,p)}function y0(t,r,s,a){return function T0(t,r,s,a,l,p){let y=r+s,w=!1;for(let P=0;P<l.length;P++)Zo(t,y++,l[P])&&(w=!0);return w?Du(t,y,a.apply(p,l)):sm(t,y)}(ht(),Hr(),t,r,s,a)}function sm(t,r){const s=t[r];return s===or?void 0:s}function v0(t,r,s,a,l,p){const y=r+s;return Zo(t,y,l)?Du(t,y+1,p?a.call(p,l):a(l)):sm(t,y+1)}function D0(t,r){const s=xr();let a;const l=t+Qn;s.firstCreatePass?(a=function UD(t,r){if(r)for(let s=r.length-1;s>=0;s--){const a=r[s];if(t===a.name)return a}}(r,s.pipeRegistry),s.data[l]=a,a.onDestroy&&(s.destroyHooks??=[]).push(l,a.onDestroy)):a=s.data[l];const p=a.factory||(a.factory=nr(a.type)),w=Kn(gd);try{const P=Do(!1),$=p();return Do(P),function Bv(t,r,s,a){s>=t.data.length&&(t.data[s]=null,t.blueprint[s]=null),r[s]=a}(s,ht(),l,$),$}finally{Kn(w)}}function A0(t,r,s){const a=t+Qn,l=ht(),p=Rs(l,a);return function om(t,r){return t[Lt].data[r].pure}(l,a)?v0(l,Hr(),r,p.transform,s,p):p.transform(s)}function zD(){return this._results[Symbol.iterator]()}class pE{static#e=Symbol.iterator;get changes(){return this._changes||(this._changes=new Lu)}constructor(r=!1){this._emitDistinctChangesOnly=r,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const s=pE.prototype;s[Symbol.iterator]||(s[Symbol.iterator]=zD)}get(r){return this._results[r]}map(r){return this._results.map(r)}filter(r){return this._results.filter(r)}find(r){return this._results.find(r)}reduce(r,s){return this._results.reduce(r,s)}forEach(r){this._results.forEach(r)}some(r){return this._results.some(r)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(r,s){const a=this;a.dirty=!1;const l=function Wi(t){return t.flat(Number.POSITIVE_INFINITY)}(r);(this._changesDetected=!function ga(t,r,s){if(t.length!==r.length)return!1;for(let a=0;a<t.length;a++){let l=t[a],p=r[a];if(s&&(l=s(l),p=s(p)),p!==l)return!1}return!0}(a._results,l,s))&&(a._results=l,a.length=l.length,a.last=l[this.length-1],a.first=l[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}function WD(t,r,s,a=!0){const l=r[Lt];if(function Em(t,r,s,a){const l=Tr+a,p=s.length;a>0&&(s[l-1][Hi]=r),a<p-Tr?(r[Hi]=s[l],qi(s,Tr+a,r)):(s.push(r),r[Hi]=null),r[Er]=s;const y=r[wr];null!==y&&s!==y&&function Vy(t,r){const s=t[xo];r[Lr]!==r[Er][Er][Lr]&&(t[eo]=!0),null===s?t[xo]=[r]:s.push(r)}(y,r);const w=r[Or];null!==w&&w.insertView(t),r[fn]|=128}(l,r,t,s),a){const p=sl(s,t),y=r[mn],w=il(y,t[Li]);null!==w&&function fp(t,r,s,a,l,p){a[vr]=l,a[di]=r,_c(t,a,s,1,l,p)}(l,t[di],y,r,w,p)}}let am=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=ZD}return t})();const qD=am,KD=class extends qD{constructor(r,s,a){super(),this._declarationLView=r,this._declarationTContainer=s,this.elementRef=a}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(r,s){return this.createEmbeddedViewImpl(r,s)}createEmbeddedViewImpl(r,s,a){const l=function GD(t,r,s,a){const l=r.tView,w=wf(t,l,s,4096&t[fn]?4096:16,null,r,null,null,null,a?.injector??null,a?.hydrationInfo??null);w[wr]=t[r.index];const $=t[Or];return null!==$&&(w[Or]=$.createEmbeddedView(l)),hh(l,w,s),w}(this._declarationLView,this._declarationTContainer,r,{injector:s,hydrationInfo:a});return new ph(l)}};function ZD(){return Dy(Qi(),ht())}function Dy(t,r){return 4&t.type?new KD(r,t,$l(t,r)):null}let Cy=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=tA}return t})();function tA(){return N0(Qi(),ht())}const nA=Cy,P0=class extends nA{constructor(r,s,a){super(),this._lContainer=r,this._hostTNode=s,this._hostLView=a}get element(){return $l(this._hostTNode,this._hostLView)}get injector(){return new Tt(this._hostTNode,this._hostLView)}get parentInjector(){const r=pa(this._hostTNode,this._hostLView);if(Qu(r)){const s=Ho(r,this._hostLView),a=Ji(r);return new Tt(s[Lt].data[a+8],s)}return new Tt(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(r){const s=M0(this._lContainer);return null!==s&&s[r]||null}get length(){return this._lContainer.length-Tr}createEmbeddedView(r,s,a){let l,p;"number"==typeof a?l=a:null!=a&&(l=a.index,p=a.injector);const w=r.createEmbeddedViewImpl(s||{},p,null);return this.insertImpl(w,l,false),w}createComponent(r,s,a,l,p){const y=r&&!function us(t){return"function"==typeof t}(r);let w;if(y)w=s;else{const St=s||{};w=St.index,a=St.injector,l=St.projectableNodes,p=St.environmentInjector||St.ngModuleRef}const P=y?r:new Mi(Wn(r)),$=a||this.parentInjector;if(!p&&null==P.ngModule){const Yt=(y?$:this.parentInjector).get(Fu,null);Yt&&(p=Yt)}Wn(P.componentType??{});const $e=P.create($,l,null,p);return this.insertImpl($e.hostView,w,false),$e}insert(r,s){return this.insertImpl(r,s,!1)}insertImpl(r,s,a){const l=r._lView;if(function tc(t){return Vi(t[Er])}(l)){const P=this.indexOf(r);if(-1!==P)this.detach(P);else{const $=l[Er],ee=new P0($,$[di],$[Er]);ee.detach(ee.indexOf(r))}}const y=this._adjustIndex(s),w=this._lContainer;return WD(w,l,y,!a),r.attachToViewContainerRef(),qi(gE(w),y,r),r}move(r,s){return this.insert(r,s)}indexOf(r){const s=M0(this._lContainer);return null!==s?s.indexOf(r):-1}remove(r){const s=this._adjustIndex(r,-1),a=Ml(this._lContainer,s);a&&(_u(gE(this._lContainer),s),Ud(a[Lt],a))}detach(r){const s=this._adjustIndex(r,-1),a=Ml(this._lContainer,s);return a&&null!=_u(gE(this._lContainer),s)?new ph(a):null}_adjustIndex(r,s=0){return r??this.length+s}};function M0(t){return t[8]}function gE(t){return t[8]||(t[8]=[])}function N0(t,r){let s;const a=r[t.index];return Vi(a)?s=a:(s=O_(a,r,null,t),r[t.index]=s,dh(r,s)),O0(s,r,t,a),new P0(s,t,r)}let O0=function x0(t,r,s,a){if(t[Li])return;let l;l=8&s.type?_t(a):function rA(t,r){const s=t[mn],a=s.createComment(""),l=qr(r,t);return Nl(s,il(s,l),a,function Cm(t,r){return t.nextSibling(r)}(s,l),!1),a}(r,s),t[Li]=l};class mE{constructor(r){this.queryList=r,this.matches=null}clone(){return new mE(this.queryList)}setDirty(){this.queryList.setDirty()}}class _E{constructor(r=[]){this.queries=r}createEmbeddedView(r){const s=r.queries;if(null!==s){const a=null!==r.contentQueries?r.contentQueries[0]:s.length,l=[];for(let p=0;p<a;p++){const y=s.getByIndex(p);l.push(this.queries[y.indexInDeclarationView].clone())}return new _E(l)}return null}insertView(r){this.dirtyQueriesWithMatches(r)}detachView(r){this.dirtyQueriesWithMatches(r)}dirtyQueriesWithMatches(r){for(let s=0;s<this.queries.length;s++)null!==H0(r,s).matches&&this.queries[s].setDirty()}}class k0{constructor(r,s,a=null){this.predicate=r,this.flags=s,this.read=a}}class yE{constructor(r=[]){this.queries=r}elementStart(r,s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementStart(r,s)}elementEnd(r){for(let s=0;s<this.queries.length;s++)this.queries[s].elementEnd(r)}embeddedTView(r){let s=null;for(let a=0;a<this.length;a++){const l=null!==s?s.length:0,p=this.getByIndex(a).embeddedTView(r,l);p&&(p.indexInDeclarationView=a,null!==s?s.push(p):s=[p])}return null!==s?new yE(s):null}template(r,s){for(let a=0;a<this.queries.length;a++)this.queries[a].template(r,s)}getByIndex(r){return this.queries[r]}get length(){return this.queries.length}track(r){this.queries.push(r)}}class vE{constructor(r,s=-1){this.metadata=r,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=s}elementStart(r,s){this.isApplyingToNode(s)&&this.matchTNode(r,s)}elementEnd(r){this._declarationNodeIndex===r.index&&(this._appliesToNextNode=!1)}template(r,s){this.elementStart(r,s)}embeddedTView(r,s){return this.isApplyingToNode(r)?(this.crossesNgTemplate=!0,this.addMatch(-r.index,s),new vE(this.metadata)):null}isApplyingToNode(r){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const s=this._declarationNodeIndex;let a=r.parent;for(;null!==a&&8&a.type&&a.index!==s;)a=a.parent;return s===(null!==a?a.index:-1)}return this._appliesToNextNode}matchTNode(r,s){const a=this.metadata.predicate;if(Array.isArray(a))for(let l=0;l<a.length;l++){const p=a[l];this.matchTNodeWithReadOption(r,s,oA(s,p)),this.matchTNodeWithReadOption(r,s,T(s,r,p,!1,!1))}else a===am?4&s.type&&this.matchTNodeWithReadOption(r,s,-1):this.matchTNodeWithReadOption(r,s,T(s,r,a,!1,!1))}matchTNodeWithReadOption(r,s,a){if(null!==a){const l=this.metadata.read;if(null!==l)if(l===fd||l===Cy||l===am&&4&s.type)this.addMatch(s.index,-2);else{const p=T(s,r,l,!1,!1);null!==p&&this.addMatch(s.index,p)}else this.addMatch(s.index,a)}}addMatch(r,s){null===this.matches?this.matches=[r,s]:this.matches.push(r,s)}}function oA(t,r){const s=t.localNames;if(null!==s)for(let a=0;a<s.length;a+=2)if(s[a]===r)return s[a+1];return null}function uA(t,r,s,a){return-1===s?function aA(t,r){return 11&t.type?$l(t,r):4&t.type?Dy(t,r):null}(r,t):-2===s?function lA(t,r,s){return s===fd?$l(r,t):s===am?Dy(r,t):s===Cy?N0(r,t):void 0}(t,r,a):V(t,t[Lt],s,r)}function F0(t,r,s,a){const l=r[Or].queries[a];if(null===l.matches){const p=t.data,y=s.matches,w=[];for(let P=0;P<y.length;P+=2){const $=y[P];w.push($<0?null:uA(r,p[$],y[P+1],s.metadata.read))}l.matches=w}return l.matches}function EE(t,r,s,a){const l=t.queries.getByIndex(s),p=l.matches;if(null!==p){const y=F0(t,r,l,s);for(let w=0;w<p.length;w+=2){const P=p[w];if(P>0)a.push(y[w/2]);else{const $=p[w+1],ee=r[-P];for(let he=Tr;he<ee.length;he++){const xe=ee[he];xe[wr]===xe[Er]&&EE(xe[Lt],xe,$,a)}if(null!==ee[xo]){const he=ee[xo];for(let xe=0;xe<he.length;xe++){const $e=he[xe];EE($e[Lt],$e,$,a)}}}}}return a}function L0(t){const r=ht(),s=xr(),a=v();R(a+1);const l=H0(s,a);if(t.dirty&&function $c(t){return 4==(4&t[fn])}(r)===(2==(2&l.metadata.flags))){if(null===l.matches)t.reset([]);else{const p=l.crossesNgTemplate?EE(s,r,a,[]):F0(s,r,l,a);t.reset(p,pd),t.notifyOnChanges()}return!0}return!1}function V0(t,r,s){const a=xr();a.firstCreatePass&&($0(a,new k0(t,r,s),-1),2==(2&r)&&(a.staticViewQueries=!0)),j0(a,ht(),r)}function U0(t,r,s,a){const l=xr();if(l.firstCreatePass){const p=Qi();$0(l,new k0(r,s,a),p.index),function dA(t,r){const s=t.contentQueries||(t.contentQueries=[]);r!==(s.length?s[s.length-1]:-1)&&s.push(t.queries.length-1,r)}(l,t),2==(2&s)&&(l.staticContentQueries=!0)}j0(l,ht(),s)}function B0(){return function cA(t,r){return t[Or].queries[r].queryList}(ht(),v())}function j0(t,r,s){const a=new pE(4==(4&s));(function fv(t,r,s,a){const l=k_(r);l.push(s),t.firstCreatePass&&F_(t).push(a,l.length-1)})(t,r,a,a.destroy),null===r[Or]&&(r[Or]=new _E),r[Or].queries.push(new mE(a))}function $0(t,r,s){null===t.queries&&(t.queries=new yE),t.queries.track(new vE(r,s))}function H0(t,r){return t.queries.getByIndex(r)}function z0(t,r){return Dy(t,r)}function IE(t){return!!ci(t)}const aw=new Ht("Application Initializer");let CE=(()=>{class t{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((s,a)=>{this.resolve=s,this.reject=a}),this.appInits=At(aw,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const s=[];for(const l of this.appInits){const p=l();if(Kg(p))s.push(p);else if(oy(p)){const y=new Promise((w,P)=>{p.subscribe({complete:w,error:P})});s.push(y)}}const a=()=>{this.done=!0,this.resolve()};Promise.all(s).then(()=>{a()}).catch(l=>{this.reject(l)}),0===s.length&&a(),this.initialized=!0}static#e=this.\u0275fac=function(a){return new(a||t)};static#t=this.\u0275prov=Wt({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),uw=(()=>{class t{log(s){console.log(s)}warn(s){console.warn(s)}static#e=this.\u0275fac=function(a){return new(a||t)};static#t=this.\u0275prov=Wt({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();const Sy=new Ht("LocaleId",{providedIn:"root",factory:()=>At(Sy,Zt.Optional|Zt.SkipSelf)||function NA(){return typeof $localize<"u"&&$localize.locale||Wf}()}),OA=new Ht("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});let lw=(()=>{class t{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new me.X(!1)}add(){this.hasPendingTasks.next(!0);const s=this.taskId++;return this.pendingTasks.add(s),s}remove(s){this.pendingTasks.delete(s),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(a){return new(a||t)};static#t=this.\u0275prov=Wt({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();class kA{constructor(r,s){this.ngModuleFactory=r,this.componentFactories=s}}let FA=(()=>{class t{compileModuleSync(s){return new hE(s)}compileModuleAsync(s){return Promise.resolve(this.compileModuleSync(s))}compileModuleAndAllComponentsSync(s){const a=this.compileModuleSync(s),p=Vu(ci(s).declarations).reduce((y,w)=>{const P=Wn(w);return P&&y.push(new Mi(P)),y},[]);return new kA(a,p)}compileModuleAndAllComponentsAsync(s){return Promise.resolve(this.compileModuleAndAllComponentsSync(s))}clearCache(){}clearCacheFor(s){}getModuleId(s){}static#e=this.\u0275fac=function(a){return new(a||t)};static#t=this.\u0275prov=Wt({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const fw=new Ht(""),pw=new Ht("");let RE,iC=(()=>{class t{constructor(s,a,l){this._ngZone=s,this.registry=a,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,RE||(function sC(t){RE=t}(l),l.addToWindow(a)),this._watchAngularEvents(),s.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ro.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let s=this._callbacks.pop();clearTimeout(s.timeoutId),s.doneCb(this._didWork)}this._didWork=!1});else{let s=this.getPendingTasks();this._callbacks=this._callbacks.filter(a=>!a.updateCb||!a.updateCb(s)||(clearTimeout(a.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(s=>({source:s.source,creationLocation:s.creationLocation,data:s.data})):[]}addCallback(s,a,l){let p=-1;a&&a>0&&(p=setTimeout(()=>{this._callbacks=this._callbacks.filter(y=>y.timeoutId!==p),s(this._didWork,this.getPendingTasks())},a)),this._callbacks.push({doneCb:s,timeoutId:p,updateCb:l})}whenStable(s,a,l){if(l&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(s,a,l),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(s){this.registry.registerApplication(s,this)}unregisterApplication(s){this.registry.unregisterApplication(s)}findProviders(s,a,l){return[]}static#e=this.\u0275fac=function(a){return new(a||t)(vt(Ro),vt(gw),vt(pw))};static#t=this.\u0275prov=Wt({token:t,factory:t.\u0275fac})}return t})(),gw=(()=>{class t{constructor(){this._applications=new Map}registerApplication(s,a){this._applications.set(s,a)}unregisterApplication(s){this._applications.delete(s)}unregisterAllApplications(){this._applications.clear()}getTestability(s){return this._applications.get(s)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(s,a=!0){return RE?.findTestabilityInTree(this,s,a)??null}static#e=this.\u0275fac=function(a){return new(a||t)};static#t=this.\u0275prov=Wt({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})(),Rd=null;const mw=new Ht("AllowMultipleToken"),PE=new Ht("PlatformDestroyListeners"),ME=new Ht("appBootstrapListener");class uC{constructor(r,s){this.name=r,this.token=s}}function vw(t,r,s=[]){const a=`Platform: ${r}`,l=new Ht(a);return(p=[])=>{let y=NE();if(!y||y.injector.get(mw,!1)){const w=[...s,...p,{provide:l,useValue:!0}];t?t(w):function lC(t){if(Rd&&!Rd.get(mw,!1))throw new ce(400,!1);(function _w(){!function Na(t){Wa=t}(()=>{throw new ce(600,!1)})})(),Rd=t;const r=t.get(Iw);(function yw(t){t.get(Up,null)?.forEach(s=>s())})(t)}(function Ew(t=[],r){return da.create({name:r,providers:[{provide:Zd,useValue:"platform"},{provide:PE,useValue:new Set([()=>Rd=null])},...t]})}(w,a))}return function dC(t){const r=NE();if(!r)throw new ce(401,!1);return r}()}}function NE(){return Rd?.get(Iw)??null}let Iw=(()=>{class t{constructor(s){this._injector=s,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(s,a){const l=function hC(t="zone.js",r){return"noop"===t?new p_:"zone.js"===t?new Ro(r):t}(a?.ngZone,function ww(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}({eventCoalescing:a?.ngZoneEventCoalescing,runCoalescing:a?.ngZoneRunCoalescing}));return l.run(()=>{const p=function DD(t,r,s){return new dE(t,r,s)}(s.moduleType,this.injector,function bw(t){return[{provide:Ro,useFactory:t},{provide:Tc,multi:!0,useFactory:()=>{const r=At(pC,{optional:!0});return()=>r.initialize()}},{provide:Cw,useFactory:fC},{provide:g_,useFactory:m_}]}(()=>l)),y=p.injector.get(zl,null);return l.runOutsideAngular(()=>{const w=l.onError.subscribe({next:P=>{y.handleError(P)}});p.onDestroy(()=>{Py(this._modules,p),w.unsubscribe()})}),function Tw(t,r,s){try{const a=s();return Kg(a)?a.catch(l=>{throw r.runOutsideAngular(()=>t.handleError(l)),l}):a}catch(a){throw r.runOutsideAngular(()=>t.handleError(a)),a}}(y,l,()=>{const w=p.injector.get(CE);return w.runInitializers(),w.donePromise.then(()=>(function MI(t){Et(t,"Expected localeId to be defined"),"string"==typeof t&&(PI=t.toLowerCase().replace(/_/g,"-"))}(p.injector.get(Sy,Wf)||Wf),this._moduleDoBootstrap(p),p))})})}bootstrapModule(s,a=[]){const l=Dw({},a);return function oC(t,r,s){const a=new hE(s);return Promise.resolve(a)}(0,0,s).then(p=>this.bootstrapModuleFactory(p,l))}_moduleDoBootstrap(s){const a=s.injector.get(Zf);if(s._bootstrapComponents.length>0)s._bootstrapComponents.forEach(l=>a.bootstrap(l));else{if(!s.instance.ngDoBootstrap)throw new ce(-403,!1);s.instance.ngDoBootstrap(a)}this._modules.push(s)}onDestroy(s){this._destroyListeners.push(s)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new ce(404,!1);this._modules.slice().forEach(a=>a.destroy()),this._destroyListeners.forEach(a=>a());const s=this._injector.get(PE,null);s&&(s.forEach(a=>a()),s.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(a){return new(a||t)(vt(da))};static#t=this.\u0275prov=Wt({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();function Dw(t,r){return Array.isArray(r)?r.reduce(Dw,t):{...t,...r}}let Zf=(()=>{class t{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=At(Cw),this.zoneIsStable=At(g_),this.componentTypes=[],this.components=[],this.isStable=At(lw).hasPendingTasks.pipe((0,ye.w)(s=>s?(0,we.of)(!1):this.zoneIsStable),(0,De.x)(),(0,Ce.B)()),this._injector=At(Fu)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(s,a){const l=s instanceof i_;if(!this._injector.get(CE).done)throw!l&&mi(s),new ce(405,!1);let y;y=l?s:this._injector.get(hd).resolveComponentFactory(s),this.componentTypes.push(y.componentType);const w=function aC(t){return t.isBoundToModule}(y)?void 0:this._injector.get(Ah),$=y.create(da.NULL,[],a||y.selector,w),ee=$.location.nativeElement,he=$.injector.get(fw,null);return he?.registerApplication(ee),$.onDestroy(()=>{this.detachView($.hostView),Py(this.components,$),he?.unregisterApplication(ee)}),this._loadComponent($),$}tick(){if(this._runningTick)throw new ce(101,!1);try{this._runningTick=!0;for(let s of this._views)s.detectChanges()}catch(s){this.internalErrorHandler(s)}finally{this._runningTick=!1}}attachView(s){const a=s;this._views.push(a),a.attachToAppRef(this)}detachView(s){const a=s;Py(this._views,a),a.detachFromAppRef()}_loadComponent(s){this.attachView(s.hostView),this.tick(),this.components.push(s);const a=this._injector.get(ME,[]);a.push(...this._bootstrapListeners),a.forEach(l=>l(s))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(s=>s()),this._views.slice().forEach(s=>s.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(s){return this._destroyListeners.push(s),()=>Py(this._destroyListeners,s)}destroy(){if(this._destroyed)throw new ce(406,!1);const s=this._injector;s.destroy&&!s.destroyed&&s.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(a){return new(a||t)};static#t=this.\u0275prov=Wt({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Py(t,r){const s=t.indexOf(r);s>-1&&t.splice(s,1)}const Cw=new Ht("",{providedIn:"root",factory:()=>At(zl).handleError.bind(void 0)});function fC(){const t=At(Ro),r=At(zl);return s=>t.runOutsideAngular(()=>r.handleError(s))}let pC=(()=>{class t{constructor(){this.zone=At(Ro),this.applicationRef=At(Zf)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(a){return new(a||t)};static#t=this.\u0275prov=Wt({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function mC(){return!1}let _C=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=yC}return t})();function yC(t){return function vC(t,r,s){if(ko(t)&&!s){const a=Uo(t.index,r);return new ph(a,a)}return 47&t.type?new ph(r[Lr],r):null}(Qi(),ht(),16==(16&t))}class Mw{constructor(){}supports(r){return Mc(r)}create(r){return new AC(r)}}const DC=(t,r)=>r;class AC{constructor(r){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=r||DC}forEachItem(r){let s;for(s=this._itHead;null!==s;s=s._next)r(s)}forEachOperation(r){let s=this._itHead,a=this._removalsHead,l=0,p=null;for(;s||a;){const y=!a||s&&s.currentIndex<Ow(a,l,p)?s:a,w=Ow(y,l,p),P=y.currentIndex;if(y===a)l--,a=a._nextRemoved;else if(s=s._next,null==y.previousIndex)l++;else{p||(p=[]);const $=w-l,ee=P-l;if($!=ee){for(let xe=0;xe<$;xe++){const $e=xe<p.length?p[xe]:p[xe]=0,ct=$e+xe;ee<=ct&&ct<$&&(p[xe]=$e+1)}p[y.previousIndex]=ee-$}}w!==P&&r(y,w,P)}}forEachPreviousItem(r){let s;for(s=this._previousItHead;null!==s;s=s._nextPrevious)r(s)}forEachAddedItem(r){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)r(s)}forEachMovedItem(r){let s;for(s=this._movesHead;null!==s;s=s._nextMoved)r(s)}forEachRemovedItem(r){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)r(s)}forEachIdentityChange(r){let s;for(s=this._identityChangesHead;null!==s;s=s._nextIdentityChange)r(s)}diff(r){if(null==r&&(r=[]),!Mc(r))throw new ce(900,!1);return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let l,p,y,s=this._itHead,a=!1;if(Array.isArray(r)){this.length=r.length;for(let w=0;w<this.length;w++)p=r[w],y=this._trackByFn(w,p),null!==s&&Object.is(s.trackById,y)?(a&&(s=this._verifyReinsertion(s,p,y,w)),Object.is(s.item,p)||this._addIdentityChange(s,p)):(s=this._mismatch(s,p,y,w),a=!0),s=s._next}else l=0,function Nc(t,r){if(Array.isArray(t))for(let s=0;s<t.length;s++)r(t[s]);else{const s=t[Symbol.iterator]();let a;for(;!(a=s.next()).done;)r(a.value)}}(r,w=>{y=this._trackByFn(l,w),null!==s&&Object.is(s.trackById,y)?(a&&(s=this._verifyReinsertion(s,w,y,l)),Object.is(s.item,w)||this._addIdentityChange(s,w)):(s=this._mismatch(s,w,y,l),a=!0),s=s._next,l++}),this.length=l;return this._truncate(s),this.collection=r,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let r;for(r=this._previousItHead=this._itHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._additionsHead;null!==r;r=r._nextAdded)r.previousIndex=r.currentIndex;for(this._additionsHead=this._additionsTail=null,r=this._movesHead;null!==r;r=r._nextMoved)r.previousIndex=r.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(r,s,a,l){let p;return null===r?p=this._itTail:(p=r._prev,this._remove(r)),null!==(r=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null))?(Object.is(r.item,s)||this._addIdentityChange(r,s),this._reinsertAfter(r,p,l)):null!==(r=null===this._linkedRecords?null:this._linkedRecords.get(a,l))?(Object.is(r.item,s)||this._addIdentityChange(r,s),this._moveAfter(r,p,l)):r=this._addAfter(new CC(s,a),p,l),r}_verifyReinsertion(r,s,a,l){let p=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null);return null!==p?r=this._reinsertAfter(p,r._prev,l):r.currentIndex!=l&&(r.currentIndex=l,this._addToMoves(r,l)),r}_truncate(r){for(;null!==r;){const s=r._next;this._addToRemovals(this._unlink(r)),r=s}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(r,s,a){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(r);const l=r._prevRemoved,p=r._nextRemoved;return null===l?this._removalsHead=p:l._nextRemoved=p,null===p?this._removalsTail=l:p._prevRemoved=l,this._insertAfter(r,s,a),this._addToMoves(r,a),r}_moveAfter(r,s,a){return this._unlink(r),this._insertAfter(r,s,a),this._addToMoves(r,a),r}_addAfter(r,s,a){return this._insertAfter(r,s,a),this._additionsTail=null===this._additionsTail?this._additionsHead=r:this._additionsTail._nextAdded=r,r}_insertAfter(r,s,a){const l=null===s?this._itHead:s._next;return r._next=l,r._prev=s,null===l?this._itTail=r:l._prev=r,null===s?this._itHead=r:s._next=r,null===this._linkedRecords&&(this._linkedRecords=new Nw),this._linkedRecords.put(r),r.currentIndex=a,r}_remove(r){return this._addToRemovals(this._unlink(r))}_unlink(r){null!==this._linkedRecords&&this._linkedRecords.remove(r);const s=r._prev,a=r._next;return null===s?this._itHead=a:s._next=a,null===a?this._itTail=s:a._prev=s,r}_addToMoves(r,s){return r.previousIndex===s||(this._movesTail=null===this._movesTail?this._movesHead=r:this._movesTail._nextMoved=r),r}_addToRemovals(r){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Nw),this._unlinkedRecords.put(r),r.currentIndex=null,r._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=r,r._prevRemoved=null):(r._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=r),r}_addIdentityChange(r,s){return r.item=s,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=r:this._identityChangesTail._nextIdentityChange=r,r}}class CC{constructor(r,s){this.item=r,this.trackById=s,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class bC{constructor(){this._head=null,this._tail=null}add(r){null===this._head?(this._head=this._tail=r,r._nextDup=null,r._prevDup=null):(this._tail._nextDup=r,r._prevDup=this._tail,r._nextDup=null,this._tail=r)}get(r,s){let a;for(a=this._head;null!==a;a=a._nextDup)if((null===s||s<=a.currentIndex)&&Object.is(a.trackById,r))return a;return null}remove(r){const s=r._prevDup,a=r._nextDup;return null===s?this._head=a:s._nextDup=a,null===a?this._tail=s:a._prevDup=s,null===this._head}}class Nw{constructor(){this.map=new Map}put(r){const s=r.trackById;let a=this.map.get(s);a||(a=new bC,this.map.set(s,a)),a.add(r)}get(r,s){const l=this.map.get(r);return l?l.get(r,s):null}remove(r){const s=r.trackById;return this.map.get(s).remove(r)&&this.map.delete(s),r}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Ow(t,r,s){const a=t.previousIndex;if(null===a)return a;let l=0;return s&&a<s.length&&(l=s[a]),a+r+l}class xw{constructor(){}supports(r){return r instanceof Map||vd(r)}create(){return new SC}}class SC{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(r){let s;for(s=this._mapHead;null!==s;s=s._next)r(s)}forEachPreviousItem(r){let s;for(s=this._previousMapHead;null!==s;s=s._nextPrevious)r(s)}forEachChangedItem(r){let s;for(s=this._changesHead;null!==s;s=s._nextChanged)r(s)}forEachAddedItem(r){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)r(s)}forEachRemovedItem(r){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)r(s)}diff(r){if(r){if(!(r instanceof Map||vd(r)))throw new ce(900,!1)}else r=new Map;return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let s=this._mapHead;if(this._appendAfter=null,this._forEach(r,(a,l)=>{if(s&&s.key===l)this._maybeAddToChanges(s,a),this._appendAfter=s,s=s._next;else{const p=this._getOrCreateRecordForKey(l,a);s=this._insertBeforeOrAppend(s,p)}}),s){s._prev&&(s._prev._next=null),this._removalsHead=s;for(let a=s;null!==a;a=a._nextRemoved)a===this._mapHead&&(this._mapHead=null),this._records.delete(a.key),a._nextRemoved=a._next,a.previousValue=a.currentValue,a.currentValue=null,a._prev=null,a._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(r,s){if(r){const a=r._prev;return s._next=r,s._prev=a,r._prev=s,a&&(a._next=s),r===this._mapHead&&(this._mapHead=s),this._appendAfter=r,r}return this._appendAfter?(this._appendAfter._next=s,s._prev=this._appendAfter):this._mapHead=s,this._appendAfter=s,null}_getOrCreateRecordForKey(r,s){if(this._records.has(r)){const l=this._records.get(r);this._maybeAddToChanges(l,s);const p=l._prev,y=l._next;return p&&(p._next=y),y&&(y._prev=p),l._next=null,l._prev=null,l}const a=new RC(r);return this._records.set(r,a),a.currentValue=s,this._addToAdditions(a),a}_reset(){if(this.isDirty){let r;for(this._previousMapHead=this._mapHead,r=this._previousMapHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._changesHead;null!==r;r=r._nextChanged)r.previousValue=r.currentValue;for(r=this._additionsHead;null!=r;r=r._nextAdded)r.previousValue=r.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(r,s){Object.is(s,r.currentValue)||(r.previousValue=r.currentValue,r.currentValue=s,this._addToChanges(r))}_addToAdditions(r){null===this._additionsHead?this._additionsHead=this._additionsTail=r:(this._additionsTail._nextAdded=r,this._additionsTail=r)}_addToChanges(r){null===this._changesHead?this._changesHead=this._changesTail=r:(this._changesTail._nextChanged=r,this._changesTail=r)}_forEach(r,s){r instanceof Map?r.forEach(s):Object.keys(r).forEach(a=>s(r[a],a))}}class RC{constructor(r){this.key=r,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function kw(){return new LE([new Mw])}let LE=(()=>{class t{static#e=this.\u0275prov=Wt({token:t,providedIn:"root",factory:kw});constructor(s){this.factories=s}static create(s,a){if(null!=a){const l=a.factories.slice();s=s.concat(l)}return new t(s)}static extend(s){return{provide:t,useFactory:a=>t.create(s,a||kw()),deps:[[t,new Pu,new Ja]]}}find(s){const a=this.factories.find(l=>l.supports(s));if(null!=a)return a;throw new ce(901,!1)}}return t})();function Fw(){return new VE([new xw])}let VE=(()=>{class t{static#e=this.\u0275prov=Wt({token:t,providedIn:"root",factory:Fw});constructor(s){this.factories=s}static create(s,a){if(a){const l=a.factories.slice();s=s.concat(l)}return new t(s)}static extend(s){return{provide:t,useFactory:a=>t.create(s,a||Fw()),deps:[[t,new Pu,new Ja]]}}find(s){const a=this.factories.find(l=>l.supports(s));if(a)return a;throw new ce(901,!1)}}return t})();const NC=vw(null,"core",[]);let OC=(()=>{class t{constructor(s){}static#e=this.\u0275fac=function(a){return new(a||t)(vt(Zf))};static#t=this.\u0275mod=Os({type:t});static#n=this.\u0275inj=Hn({})}return t})();function zC(t){return"boolean"==typeof t?t:null!=t&&"false"!==t}function WC(t){const r=Wn(t);if(!r)return null;const s=new Mi(r);return{get selector(){return s.selector},get type(){return s.componentType},get inputs(){return s.inputs},get outputs(){return s.outputs},get ngContentSelectors(){return s.ngContentSelectors},get isStandalone(){return r.standalone},get isSignal(){return r.signals}}}},721:(Ot,Le,U)=>{U.d(Le,{Ot:()=>ve,ZF:()=>mt,hX:()=>ze,z6:()=>me});var h=U(3182),W=U(5879),K=U(1920);class ve{constructor(Be){return Be}}class me{constructor(){return(0,h.C6)()}}const ye=new W.OlP("angularfire2._apps"),De={provide:ve,useFactory:function Ce(ce){return ce&&1===ce.length?ce[0]:new ve((0,h.Mq)())},deps:[[new W.FiY,ye]]},X={provide:me,deps:[[new W.FiY,ye]]};function ie(ce){return(Be,be)=>{const Ie=Be.runOutsideAngular(()=>ce(be));return new ve(Ie)}}let pe=(()=>{class ce{constructor(be){(0,h.KN)("angularfire",K.q4.full,"core"),(0,h.KN)("angularfire",K.q4.full,"app"),(0,h.KN)("angular",W.q4F.full,be.toString())}static \u0275fac=function(Ie){return new(Ie||ce)(W.LFG(W.Lbi))};static \u0275mod=W.oAB({type:ce});static \u0275inj=W.cJS({providers:[De,X]})}return ce})();function ze(ce,...Be){return{ngModule:pe,providers:[{provide:ye,useFactory:ie(ce),multi:!0,deps:[W.R0b,W.zs3,K.HU,...Be]}]}}const mt=(0,K.u3)(h.ZF,!0)},7213:(Ot,Le,U)=>{U.d(Le,{zQ:()=>Pn,rT:()=>et,f7:()=>Gt,L6:()=>Te,_Q:()=>Oe,lh:()=>ft,Qv:()=>Je,nw:()=>Jt}),U(6365);var W=U(6814),K=U(5879),ve=U(1920),me=U(7217),we=U(8645),Ce=U(2096),ye=U(5592),De=U(2459),X=U(3019),ie=U(3093),pe=U(4664),ze=U(7398),Ve=U(4552);class ot extends we.x{constructor(Ct=1/0,Ae=1/0,Me=Ve.l){super(),this._bufferSize=Ct,this._windowTime=Ae,this._timestampProvider=Me,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=Ae===1/0,this._bufferSize=Math.max(1,Ct),this._windowTime=Math.max(1,Ae)}next(Ct){const{isStopped:Ae,_buffer:Me,_infiniteTimeWindow:He,_timestampProvider:Ue,_windowTime:Ge}=this;Ae||(Me.push(Ct),!He&&Me.push(Ue.now()+Ge)),this._trimBuffer(),super.next(Ct)}_subscribe(Ct){this._throwIfClosed(),this._trimBuffer();const Ae=this._innerSubscribe(Ct),{_infiniteTimeWindow:Me,_buffer:He}=this,Ue=He.slice();for(let Ge=0;Ge<Ue.length&&!Ct.closed;Ge+=Me?1:2)Ct.next(Ue[Ge]);return this._checkFinalizedStatuses(Ct),Ae}_trimBuffer(){const{_bufferSize:Ct,_timestampProvider:Ae,_buffer:Me,_infiniteTimeWindow:He}=this,Ue=(He?1:2)*Ct;if(Ct<1/0&&Ue<Me.length&&Me.splice(0,Me.length-Ue),!He){const Ge=Ae.now();let rt=0;for(let Et=1;Et<Me.length&&Me[Et]<=Ge;Et+=2)rt=Et;rt&&Me.splice(0,rt+1)}}}var Qe=U(3020);function mt(kt,Ct,Ae){let Me,He=!1;return kt&&"object"==typeof kt?({bufferSize:Me=1/0,windowTime:Ct=1/0,refCount:He=!1,scheduler:Ae}=kt):Me=kt??1/0,(0,Qe.B)({connector:()=>new ot(Me,Ct,Ae),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:He})}var nt=U(1374),Vt=U(4674);function ut(kt,Ct){return(0,Vt.m)(Ct)?(0,pe.w)(()=>kt,Ct):(0,pe.w)(()=>kt)}var ce=U(5137),Be=U(2181);U(7142);const Je=new K.OlP("angularfire2.auth.use-emulator"),Te=new K.OlP("angularfire2.auth.settings"),Oe=new K.OlP("angularfire2.auth.tenant-id"),et=new K.OlP("angularfire2.auth.langugage-code"),ft=new K.OlP("angularfire2.auth.use-device-language"),Gt=new K.OlP("angularfire.auth.persistence"),Jt=(kt,Ct,Ae,Me,He,Ue,Ge,rt)=>(0,me.cc)(`${kt.name}.auth`,"AngularFireAuth",kt.name,()=>{const Et=Ct.runOutsideAngular(()=>kt.auth());if(Ae&&Et.useEmulator(...Ae),Me&&(Et.tenantId=Me),Et.languageCode=He,Ue&&Et.useDeviceLanguage(),Ge)for(const[It,$n]of Object.entries(Ge))Et.settings[It]=$n;return rt&&Et.setPersistence(rt),Et},[Ae,Me,He,Ue,Ge,rt]);let Pn=(()=>{class kt{authState;idToken;user;idTokenResult;credential;constructor(Ae,Me,He,Ue,Ge,rt,Et,It,$n,$t,on,Wt){const ar=new we.x,Hn=(0,Ce.of)(void 0).pipe((0,ie.Q)(Ge.outsideAngular),(0,pe.w)(()=>Ue.runOutsideAngular(()=>Promise.resolve().then(U.bind(U,6365)))),(0,ze.U)(()=>(0,me.on)(Ae,Ue,Me)),(0,ze.U)(Ln=>Jt(Ln,Ue,rt,It,$n,$t,Et,on)),mt({bufferSize:1,refCount:!1}));if((0,W.PM)(He))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,Ce.of)(null);else{Hn.pipe((0,nt.P)()).subscribe();const Ln=Hn.pipe((0,pe.w)(Sn=>Sn.getRedirectResult().then(Ir=>Ir,()=>null)),ve.iC,mt({bufferSize:1,refCount:!1})),xt=Hn.pipe((0,pe.w)(Sn=>new ye.y(Ir=>({unsubscribe:Ue.runOutsideAngular(()=>Sn.onAuthStateChanged(Vn=>Ir.next(Vn),Vn=>Ir.error(Vn),()=>Ir.complete()))})))),zn=Hn.pipe((0,pe.w)(Sn=>new ye.y(Ir=>({unsubscribe:Ue.runOutsideAngular(()=>Sn.onIdTokenChanged(Vn=>Ir.next(Vn),Vn=>Ir.error(Vn),()=>Ir.complete()))}))));this.authState=Ln.pipe(ut(xt),(0,ce.R)(Ge.outsideAngular),(0,ie.Q)(Ge.insideAngular)),this.user=Ln.pipe(ut(zn),(0,ce.R)(Ge.outsideAngular),(0,ie.Q)(Ge.insideAngular)),this.idToken=this.user.pipe((0,pe.w)(Sn=>Sn?(0,De.D)(Sn.getIdToken()):(0,Ce.of)(null))),this.idTokenResult=this.user.pipe((0,pe.w)(Sn=>Sn?(0,De.D)(Sn.getIdTokenResult()):(0,Ce.of)(null))),this.credential=(0,X.T)(Ln,ar,this.authState.pipe((0,Be.h)(Sn=>!Sn))).pipe((0,ze.U)(Sn=>Sn?.user?Sn:null),(0,ce.R)(Ge.outsideAngular),(0,ie.Q)(Ge.insideAngular))}return(0,me.pX)(this,Hn,Ue,{spy:{apply:(Ln,xt,zn)=>{(Ln.startsWith("signIn")||Ln.startsWith("createUser"))&&zn.then(Sn=>ar.next(Sn))}}})}static \u0275fac=function(Me){return new(Me||kt)(K.LFG(me.Dh),K.LFG(me.xv,8),K.LFG(K.Lbi),K.LFG(K.R0b),K.LFG(ve.HU),K.LFG(Je,8),K.LFG(Te,8),K.LFG(Oe,8),K.LFG(et,8),K.LFG(ft,8),K.LFG(Gt,8),K.LFG(ve.Rf,8))};static \u0275prov=K.Yz7({token:kt,factory:kt.\u0275fac,providedIn:"any"})}return kt})()},830:(Ot,Le,U)=>{U.d(Le,{Q1:()=>Ci,TE:()=>Lo});var h=U(1920),W=U(5592),K=U(2096),ve=U(2459),me=U(6321),we=U(9360),Ce=U(8251),De=U(7398),X=U(4664),ie=U(5879),pe=U(7217),ze=U(3106),Ve=U(5861),ot=U(534),Qe=U(9058),mt=U(4537);const nt="firebasestorage.googleapis.com",Vt="storageBucket";class be extends Qe.ZR{constructor(H,ae,b=0){super(Je(H),`Firebase Storage: ${ae} (${Je(H)})`),this.status_=b,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,be.prototype)}get status(){return this.status_}set status(H){this.status_=H}_codeEquals(H){return Je(H)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(H){this.customData.serverResponse=H,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var Ie=function(j){return j.UNKNOWN="unknown",j.OBJECT_NOT_FOUND="object-not-found",j.BUCKET_NOT_FOUND="bucket-not-found",j.PROJECT_NOT_FOUND="project-not-found",j.QUOTA_EXCEEDED="quota-exceeded",j.UNAUTHENTICATED="unauthenticated",j.UNAUTHORIZED="unauthorized",j.UNAUTHORIZED_APP="unauthorized-app",j.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",j.INVALID_CHECKSUM="invalid-checksum",j.CANCELED="canceled",j.INVALID_EVENT_NAME="invalid-event-name",j.INVALID_URL="invalid-url",j.INVALID_DEFAULT_BUCKET="invalid-default-bucket",j.NO_DEFAULT_BUCKET="no-default-bucket",j.CANNOT_SLICE_BLOB="cannot-slice-blob",j.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",j.NO_DOWNLOAD_URL="no-download-url",j.INVALID_ARGUMENT="invalid-argument",j.INVALID_ARGUMENT_COUNT="invalid-argument-count",j.APP_DELETED="app-deleted",j.INVALID_ROOT_OPERATION="invalid-root-operation",j.INVALID_FORMAT="invalid-format",j.INTERNAL_ERROR="internal-error",j.UNSUPPORTED_ENVIRONMENT="unsupported-environment",j}(Ie||{});function Je(j){return"storage/"+j}function Te(){return new be(Ie.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function Pn(){return new be(Ie.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Mt(){return new be(Ie.CANCELED,"User canceled the upload/download.")}function Me(){return new be(Ie.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function rt(j){return new be(Ie.INVALID_ARGUMENT,j)}function Et(){return new be(Ie.APP_DELETED,"The Firebase app was deleted.")}function It(j){return new be(Ie.INVALID_ROOT_OPERATION,"The operation '"+j+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function $n(j,H){return new be(Ie.INVALID_FORMAT,"String does not match format '"+j+"': "+H)}function $t(j){throw new be(Ie.INTERNAL_ERROR,"Internal error: "+j)}class on{constructor(H,ae){this.bucket=H,this.path_=ae}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const H=encodeURIComponent;return"/b/"+H(this.bucket)+"/o/"+H(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(H,ae){let b;try{b=on.makeFromUrl(H,ae)}catch{return new on(H,"")}if(""===b.path)return b;throw function Ct(j){return new be(Ie.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+j+"'.")}(H)}static makeFromUrl(H,ae){let b=null;const O="([A-Za-z0-9.\\-_]+)",de=new RegExp("^gs://"+O+"(/(.*))?$","i");function pt(Ar){Ar.path_=decodeURIComponent(Ar.path)}const sr=ae.replace(/[.]/g,"\\."),bi=[{regex:de,indices:{bucket:1,path:3},postModify:function C(Ar){"/"===Ar.path.charAt(Ar.path.length-1)&&(Ar.path_=Ar.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${sr}/v[A-Za-z0-9_]+/b/${O}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:pt},{regex:new RegExp(`^https?://${ae===nt?"(?:storage.googleapis.com|storage.cloud.google.com)":ae}/${O}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:pt}];for(let Ar=0;Ar<bi.length;Ar++){const Fs=bi[Ar],vs=Fs.regex.exec(H);if(vs){let to=vs[Fs.indices.path];to||(to=""),b=new on(vs[Fs.indices.bucket],to),Fs.postModify(b);break}}if(null==b)throw function kt(j){return new be(Ie.INVALID_URL,"Invalid URL '"+j+"'.")}(H);return b}}class Wt{constructor(H){this.promise_=Promise.reject(H)}getPromise(){return this.promise_}cancel(H=!1){}}function Sn(j){return"string"==typeof j||j instanceof String}function Ir(j){return Vn()&&j instanceof Blob}function Vn(){return typeof Blob<"u"}function Zn(j,H,ae,b){if(b<H)throw rt(`Invalid value for '${j}'. Expected ${H} or greater.`);if(b>ae)throw rt(`Invalid value for '${j}'. Expected ${ae} or less.`)}function xn(j,H,ae){let b=H;return null==ae&&(b=`https://${H}`),`${ae}://${b}/v0${j}`}function Yr(j){const H=encodeURIComponent;let ae="?";for(const b in j)j.hasOwnProperty(b)&&(ae=ae+(H(b)+"=")+H(j[b])+"&");return ae=ae.slice(0,-1),ae}var Zt=function(j){return j[j.NO_ERROR=0]="NO_ERROR",j[j.NETWORK_ERROR=1]="NETWORK_ERROR",j[j.ABORT=2]="ABORT",j}(Zt||{});function un(j,H){const ae=j>=500&&j<600,O=-1!==[408,429].indexOf(j),C=-1!==H.indexOf(j);return ae||O||C}class an{constructor(H,ae,b,O,C,Z,de,tt,pt,ln,sr,dr=!0){this.url_=H,this.method_=ae,this.headers_=b,this.body_=O,this.successCodes_=C,this.additionalRetryCodes_=Z,this.callback_=de,this.errorCallback_=tt,this.timeout_=pt,this.progressCallback_=ln,this.connectionFactory_=sr,this.retry=dr,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((Dr,nr)=>{this.resolve_=Dr,this.reject_=nr,this.start_()})}start_(){const ae=(b,O)=>{const C=this.resolve_,Z=this.reject_,de=O.connection;if(O.wasSuccessCode)try{const tt=this.callback_(de,de.getResponse());!function Ln(j){return void 0!==j}(tt)?C():C(tt)}catch(tt){Z(tt)}else if(null!==de){const tt=Te();tt.serverResponse=de.getErrorText(),Z(this.errorCallback_?this.errorCallback_(de,tt):tt)}else Z(O.canceled?this.appDelete_?Et():Mt():Pn())};this.canceled_?ae(0,new Kn(!1,null,!0)):this.backoffId_=function ar(j,H,ae){let b=1,O=null,C=null,Z=!1,de=0;function tt(){return 2===de}let pt=!1;function ln(...Zr){pt||(pt=!0,H.apply(null,Zr))}function sr(Zr){O=setTimeout(()=>{O=null,j(Dr,tt())},Zr)}function dr(){C&&clearTimeout(C)}function Dr(Zr,...ss){if(pt)return void dr();if(Zr)return dr(),void ln.call(null,Zr,...ss);if(tt()||Z)return dr(),void ln.call(null,Zr,...ss);let bi;b<64&&(b*=2),1===de?(de=2,bi=0):bi=1e3*(b+Math.random()),sr(bi)}let nr=!1;function si(Zr){nr||(nr=!0,dr(),!pt&&(null!==O?(Zr||(de=2),clearTimeout(O),sr(0)):Zr||(de=1)))}return sr(0),C=setTimeout(()=>{Z=!0,si(!0)},ae),si}((b,O)=>{if(O)return void b(!1,new Kn(!1,null,!0));const C=this.connectionFactory_();this.pendingConnection_=C;const Z=de=>{null!==this.progressCallback_&&this.progressCallback_(de.loaded,de.lengthComputable?de.total:-1)};null!==this.progressCallback_&&C.addUploadProgressListener(Z),C.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&C.removeUploadProgressListener(Z),this.pendingConnection_=null;const de=C.getErrorCode()===Zt.NO_ERROR,tt=C.getStatus();if(!de||un(tt,this.additionalRetryCodes_)&&this.retry){const ln=C.getErrorCode()===Zt.ABORT;return void b(!1,new Kn(!1,null,ln))}const pt=-1!==this.successCodes_.indexOf(tt);b(!0,new Kn(pt,C))})},ae,this.timeout_)}getPromise(){return this.promise_}cancel(H){this.canceled_=!0,this.appDelete_=H||!1,null!==this.backoffId_&&function Hn(j){j(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class Kn{constructor(H,ae,b){this.wasSuccessCode=H,this.connection=ae,this.canceled=!!b}}function Ri(...j){const H=function Ht(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==H){const ae=new H;for(let b=0;b<j.length;b++)ae.append(j[b]);return ae.getBlob()}if(Vn())return new Blob(j);throw new be(Ie.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const Xn={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class br{constructor(H,ae){this.data=H,this.contentType=ae||null}}function Un(j,H){switch(j){case Xn.RAW:return new br(Nn(H));case Xn.BASE64:case Xn.BASE64URL:return new br(Pi(j,H));case Xn.DATA_URL:return new br(function Sr(j){const H=new ti(j);return H.base64?Pi(Xn.BASE64,H.rest):function Ur(j){let H;try{H=decodeURIComponent(j)}catch{throw $n(Xn.DATA_URL,"Malformed data URL.")}return Nn(H)}(H.rest)}(H),function gr(j){return new ti(j).contentType}(H))}throw Te()}function Nn(j){const H=[];for(let ae=0;ae<j.length;ae++){let b=j.charCodeAt(ae);b<=127?H.push(b):b<=2047?H.push(192|b>>6,128|63&b):55296==(64512&b)?ae<j.length-1&&56320==(64512&j.charCodeAt(ae+1))?(b=65536|(1023&b)<<10|1023&j.charCodeAt(++ae),H.push(240|b>>18,128|b>>12&63,128|b>>6&63,128|63&b)):H.push(239,191,189):56320==(64512&b)?H.push(239,191,189):H.push(224|b>>12,128|b>>6&63,128|63&b)}return new Uint8Array(H)}function Pi(j,H){switch(j){case Xn.BASE64:{const O=-1!==H.indexOf("-"),C=-1!==H.indexOf("_");if(O||C)throw $n(j,"Invalid character '"+(O?"-":"_")+"' found: is it base64url encoded?");break}case Xn.BASE64URL:{const O=-1!==H.indexOf("+"),C=-1!==H.indexOf("/");if(O||C)throw $n(j,"Invalid character '"+(O?"+":"/")+"' found: is it base64 encoded?");H=H.replace(/-/g,"+").replace(/_/g,"/");break}}let ae;try{ae=function qt(j){if(typeof atob>"u")throw function Ge(j){return new be(Ie.UNSUPPORTED_ENVIRONMENT,`${j} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(j)}(H)}catch(O){throw O.message.includes("polyfill")?O:$n(j,"Invalid character found")}const b=new Uint8Array(ae.length);for(let O=0;O<ae.length;O++)b[O]=ae.charCodeAt(O);return b}class ti{constructor(H){this.base64=!1,this.contentType=null;const ae=H.match(/^data:([^,]+)?,/);if(null===ae)throw $n(Xn.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const b=ae[1]||null;null!=b&&(this.base64=function Mr(j,H){return j.length>=H.length&&j.substring(j.length-H.length)===H}(b,";base64"),this.contentType=this.base64?b.substring(0,b.length-7):b),this.rest=H.substring(H.indexOf(",")+1)}}class ir{constructor(H,ae){let b=0,O="";Ir(H)?(this.data_=H,b=H.size,O=H.type):H instanceof ArrayBuffer?(ae?this.data_=new Uint8Array(H):(this.data_=new Uint8Array(H.byteLength),this.data_.set(new Uint8Array(H))),b=this.data_.length):H instanceof Uint8Array&&(ae?this.data_=H:(this.data_=new Uint8Array(H.length),this.data_.set(H)),b=H.length),this.size_=b,this.type_=O}size(){return this.size_}type(){return this.type_}slice(H,ae){if(Ir(this.data_)){const O=function Rn(j,H,ae){return j.webkitSlice?j.webkitSlice(H,ae):j.mozSlice?j.mozSlice(H,ae):j.slice?j.slice(H,ae):null}(this.data_,H,ae);return null===O?null:new ir(O)}{const b=new Uint8Array(this.data_.buffer,H,ae-H);return new ir(b,!0)}}static getBlob(...H){if(Vn()){const ae=H.map(b=>b instanceof ir?b.data_:b);return new ir(Ri.apply(null,ae))}{const ae=H.map(Z=>Sn(Z)?Un(Xn.RAW,Z).data:Z.data_);let b=0;ae.forEach(Z=>{b+=Z.byteLength});const O=new Uint8Array(b);let C=0;return ae.forEach(Z=>{for(let de=0;de<Z.length;de++)O[C++]=Z[de]}),new ir(O,!0)}}uploadData(){return this.data_}}function Ee(j){let H;try{H=JSON.parse(j)}catch{return null}return function zn(j){return"object"==typeof j&&!Array.isArray(j)}(H)?H:null}function F(j){const H=j.lastIndexOf("/",j.length-2);return-1===H?j:j.slice(H+1)}function k(j,H){return H}class oe{constructor(H,ae,b,O){this.server=H,this.local=ae||H,this.writable=!!b,this.xform=O||k}}let Ne=null;function vt(){if(Ne)return Ne;const j=[];j.push(new oe("bucket")),j.push(new oe("generation")),j.push(new oe("metageneration")),j.push(new oe("name","fullPath",!0));const ae=new oe("name");ae.xform=function H(C,Z){return function at(j){return!Sn(j)||j.length<2?j:F(j)}(Z)},j.push(ae);const O=new oe("size");return O.xform=function b(C,Z){return void 0!==Z?Number(Z):Z},j.push(O),j.push(new oe("timeCreated")),j.push(new oe("updated")),j.push(new oe("md5Hash",null,!0)),j.push(new oe("cacheControl",null,!0)),j.push(new oe("contentDisposition",null,!0)),j.push(new oe("contentEncoding",null,!0)),j.push(new oe("contentLanguage",null,!0)),j.push(new oe("contentType",null,!0)),j.push(new oe("metadata","customMetadata",!0)),Ne=j,Ne}function Kt(j,H,ae){const b=Ee(H);return null===b?null:function At(j,H,ae){const b={type:"file"},O=ae.length;for(let C=0;C<O;C++){const Z=ae[C];b[Z.local]=Z.xform(b,H[Z.server])}return function Ft(j,H){Object.defineProperty(j,"ref",{get:function ae(){const C=new on(j.bucket,j.fullPath);return H._makeStorageReference(C)}})}(b,j),b}(j,b,ae)}function dn(j,H){const ae={},b=H.length;for(let O=0;O<b;O++){const C=H[O];C.writable&&(ae[C.server]=j[C.local])}return JSON.stringify(ae)}const ni="prefixes",ws="items";class Kr{constructor(H,ae,b,O){this.url=H,this.method=ae,this.handler=b,this.timeout=O,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function ur(j){if(!j)throw Te()}function ri(j,H){return function ae(b,O){const C=Kt(j,O,H);return ur(null!==C),C}}function st(j){return function H(ae,b){let O;return O=401===ae.getStatus()?ae.getErrorText().includes("Firebase App Check token is invalid")?function Gt(){return new be(Ie.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function ft(){return new be(Ie.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===ae.getStatus()?function et(j){return new be(Ie.QUOTA_EXCEEDED,"Quota for bucket '"+j+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(j.bucket):403===ae.getStatus()?function Jt(j){return new be(Ie.UNAUTHORIZED,"User does not have permission to access '"+j+"'.")}(j.path):b,O.status=ae.getStatus(),O.serverResponse=b.serverResponse,O}}function Dt(j){const H=st(j);return function ae(b,O){let C=H(b,O);return 404===b.getStatus()&&(C=function Oe(j){return new be(Ie.OBJECT_NOT_FOUND,"Object '"+j+"' does not exist.")}(j.path)),C.serverResponse=O.serverResponse,C}}function _n(j,H,ae){const O=xn(H.fullServerUrl(),j.host,j._protocol),Z=j.maxOperationRetryTime,de=new Kr(O,"GET",ri(j,ae),Z);return de.errorHandler=Dt(H),de}function tn(j,H,ae,b,O){const C={};C.prefix=H.isRoot?"":H.path+"/",ae&&ae.length>0&&(C.delimiter=ae),b&&(C.pageToken=b),O&&(C.maxResults=O);const de=xn(H.bucketOnlyServerUrl(),j.host,j._protocol),pt=j.maxOperationRetryTime,ln=new Kr(de,"GET",function Fe(j,H){return function ae(b,O){const C=function Di(j,H,ae){const b=Ee(ae);return null===b?null:function ls(j,H,ae){const b={prefixes:[],items:[],nextPageToken:ae.nextPageToken};if(ae[ni])for(const O of ae[ni]){const C=O.replace(/\/$/,""),Z=j._makeStorageReference(new on(H,C));b.prefixes.push(Z)}if(ae[ws])for(const O of ae[ws]){const C=j._makeStorageReference(new on(H,O.name));b.items.push(C)}return b}(j,H,b)}(j,H,O);return ur(null!==C),C}}(j,H.bucket),pt);return ln.urlParams=C,ln.errorHandler=st(H),ln}function Mo(j,H,ae){const b=Object.assign({},ae);return b.fullPath=j.path,b.size=H.size(),b.contentType||(b.contentType=function Ts(j,H){return j&&j.contentType||H&&H.type()||"application/octet-stream"}(null,H)),b}class cs{constructor(H,ae,b,O){this.current=H,this.total=ae,this.finalized=!!b,this.metadata=O||null}}function Oi(j,H){let ae=null;try{ae=j.getResponseHeader("X-Goog-Upload-Status")}catch{ur(!1)}return ur(!!ae&&-1!==(H||["active"]).indexOf(ae)),ae}const Wr={STATE_CHANGED:"state_changed"},cr={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function js(j){switch(j){case"running":case"pausing":case"canceling":return cr.RUNNING;case"paused":return cr.PAUSED;case"success":return cr.SUCCESS;case"canceled":return cr.CANCELED;default:return cr.ERROR}}class Js{constructor(H,ae,b){if(function xt(j){return"function"==typeof j}(H)||null!=ae||null!=b)this.next=H,this.error=ae??void 0,this.complete=b??void 0;else{const C=H;this.next=C.next,this.error=C.error,this.complete=C.complete}}}function gi(j){return(...H)=>{Promise.resolve().then(()=>j(...H))}}let $s=null;class hs{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Zt.NO_ERROR,this.sendPromise_=new Promise(H=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Zt.ABORT,H()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Zt.NETWORK_ERROR,H()}),this.xhr_.addEventListener("load",()=>{H()})})}send(H,ae,b,O){if(this.sent_)throw $t("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(ae,H,!0),void 0!==O)for(const C in O)O.hasOwnProperty(C)&&this.xhr_.setRequestHeader(C,O[C].toString());return void 0!==b?this.xhr_.send(b):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw $t("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw $t("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw $t("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw $t("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(H){return this.xhr_.getResponseHeader(H)}addUploadProgressListener(H){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",H)}removeUploadProgressListener(H){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",H)}}class fs extends hs{initXhr(){this.xhr_.responseType="text"}}function xi(){return $s?$s():new fs}class Hs{constructor(H,ae,b=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=H,this._blob=ae,this._metadata=b,this._mappings=vt(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=O=>{if(this._request=void 0,this._chunkMultiplier=1,O._codeEquals(Ie.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const C=this.isExponentialBackoffExpired();if(un(O.status,[])){if(!C)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();O=Pn()}this._error=O,this._transition("error")}},this._metadataErrorHandler=O=>{this._request=void 0,O._codeEquals(Ie.CANCELED)?this.completeTransitions_():(this._error=O,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((O,C)=>{this._resolve=O,this._reject=C,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const H=this._transferred;return ae=>this._updateProgress(H+ae)}_shouldDoResumable(H){return H.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(H){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([ae,b])=>{switch(this._state){case"running":H(ae,b);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((H,ae)=>{const b=function ds(j,H,ae,b,O){const C=H.bucketOnlyServerUrl(),Z=Mo(H,b,O),de={name:Z.fullPath},tt=xn(C,j.host,j._protocol),ln={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${b.size()}`,"X-Goog-Upload-Header-Content-Type":Z.contentType,"Content-Type":"application/json; charset=utf-8"},sr=dn(Z,ae),nr=new Kr(tt,"POST",function Dr(si){let Zr;Oi(si);try{Zr=si.getResponseHeader("X-Goog-Upload-URL")}catch{ur(!1)}return ur(Sn(Zr)),Zr},j.maxUploadRetryTime);return nr.urlParams=de,nr.headers=ln,nr.body=sr,nr.errorHandler=st(H),nr}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),O=this._ref.storage._makeRequest(b,xi,H,ae);this._request=O,O.getPromise().then(C=>{this._request=void 0,this._uploadUrl=C,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const H=this._uploadUrl;this._resolveToken((ae,b)=>{const O=function Qs(j,H,ae,b){const tt=new Kr(ae,"POST",function C(pt){const ln=Oi(pt,["active","final"]);let sr=null;try{sr=pt.getResponseHeader("X-Goog-Upload-Size-Received")}catch{ur(!1)}sr||ur(!1);const dr=Number(sr);return ur(!isNaN(dr)),new cs(dr,b.size(),"final"===ln)},j.maxUploadRetryTime);return tt.headers={"X-Goog-Upload-Command":"query"},tt.errorHandler=st(H),tt}(this._ref.storage,this._ref._location,H,this._blob),C=this._ref.storage._makeRequest(O,xi,ae,b);this._request=C,C.getPromise().then(Z=>{this._request=void 0,this._updateProgress(Z.current),this._needToFetchStatus=!1,Z.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const H=262144*this._chunkMultiplier,ae=new cs(this._transferred,this._blob.size()),b=this._uploadUrl;this._resolveToken((O,C)=>{let Z;try{Z=function go(j,H,ae,b,O,C,Z,de){const tt=new cs(0,0);if(Z?(tt.current=Z.current,tt.total=Z.total):(tt.current=0,tt.total=b.size()),b.size()!==tt.total)throw function He(){return new be(Ie.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}();const pt=tt.total-tt.current;let ln=pt;O>0&&(ln=Math.min(ln,O));const sr=tt.current;let Dr="";Dr=0===ln?"finalize":pt===ln?"upload, finalize":"upload";const nr={"X-Goog-Upload-Command":Dr,"X-Goog-Upload-Offset":`${tt.current}`},si=b.slice(sr,sr+ln);if(null===si)throw Me();const bi=new Kr(ae,"POST",function Zr(Ar,Fs){const vs=Oi(Ar,["active","final"]),oi=tt.current+ln,to=b.size();let bs;return bs="final"===vs?ri(H,C)(Ar,Fs):null,new cs(oi,to,"final"===vs,bs)},H.maxUploadRetryTime);return bi.headers=nr,bi.body=si.uploadData(),bi.progressCallback=de||null,bi.errorHandler=st(j),bi}(this._ref._location,this._ref.storage,b,this._blob,H,this._mappings,ae,this._makeProgressCallback())}catch(tt){return this._error=tt,void this._transition("error")}const de=this._ref.storage._makeRequest(Z,xi,O,C,!1);this._request=de,de.getPromise().then(tt=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(tt.current),tt.finalized?(this._metadata=tt.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((H,ae)=>{const b=_n(this._ref.storage,this._ref._location,this._mappings),O=this._ref.storage._makeRequest(b,xi,H,ae);this._request=O,O.getPromise().then(C=>{this._request=void 0,this._metadata=C,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((H,ae)=>{const b=function tr(j,H,ae,b,O){const C=H.bucketOnlyServerUrl(),Z={"X-Goog-Upload-Protocol":"multipart"},tt=function de(){let bi="";for(let Ar=0;Ar<2;Ar++)bi+=Math.random().toString().slice(2);return bi}();Z["Content-Type"]="multipart/related; boundary="+tt;const pt=Mo(H,b,O),ln=dn(pt,ae),Dr=ir.getBlob("--"+tt+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+ln+"\r\n--"+tt+"\r\nContent-Type: "+pt.contentType+"\r\n\r\n",b,"\r\n--"+tt+"--");if(null===Dr)throw Me();const nr={name:pt.fullPath},si=xn(C,j.host,j._protocol),ss=j.maxUploadRetryTime,Br=new Kr(si,"POST",ri(j,ae),ss);return Br.urlParams=nr,Br.headers=Z,Br.body=Dr.uploadData(),Br.errorHandler=st(H),Br}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),O=this._ref.storage._makeRequest(b,xi,H,ae);this._request=O,O.getPromise().then(C=>{this._request=void 0,this._metadata=C,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(H){const ae=this._transferred;this._transferred=H,this._transferred!==ae&&this._notifyObservers()}_transition(H){if(this._state!==H)switch(H){case"canceling":case"pausing":this._state=H,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const ae="paused"===this._state;this._state=H,ae&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=H,this._notifyObservers();break;case"canceled":this._error=Mt(),this._state=H,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const H=js(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:H,metadata:this._metadata,task:this,ref:this._ref}}on(H,ae,b,O){const C=new Js(ae||void 0,b||void 0,O||void 0);return this._addObserver(C),()=>{this._removeObserver(C)}}then(H,ae){return this._promise.then(H,ae)}catch(H){return this.then(null,H)}_addObserver(H){this._observers.push(H),this._notifyObserver(H)}_removeObserver(H){const ae=this._observers.indexOf(H);-1!==ae&&this._observers.splice(ae,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(ae=>{this._notifyObserver(ae)})}_finishPromise(){if(void 0!==this._resolve){let H=!0;switch(js(this._state)){case cr.SUCCESS:gi(this._resolve.bind(null,this.snapshot))();break;case cr.CANCELED:case cr.ERROR:gi(this._reject.bind(null,this._error))();break;default:H=!1}H&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(H){switch(js(this._state)){case cr.RUNNING:case cr.PAUSED:H.next&&gi(H.next.bind(H,this.snapshot))();break;case cr.SUCCESS:H.complete&&gi(H.complete.bind(H))();break;default:H.error&&gi(H.error.bind(H,this._error))()}}resume(){const H="paused"===this._state||"pausing"===this._state;return H&&this._transition("running"),H}pause(){const H="running"===this._state;return H&&this._transition("pausing"),H}cancel(){const H="running"===this._state||"pausing"===this._state;return H&&this._transition("canceling"),H}}class As{constructor(H,ae){this._service=H,this._location=ae instanceof on?ae:on.makeFromUrl(ae,H.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(H,ae){return new As(H,ae)}get root(){const H=new on(this._location.bucket,"");return this._newRef(this._service,H)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return F(this._location.path)}get storage(){return this._service}get parent(){const H=function re(j){if(0===j.length)return null;const H=j.lastIndexOf("/");return-1===H?"":j.slice(0,H)}(this._location.path);if(null===H)return null;const ae=new on(this._location.bucket,H);return new As(this._service,ae)}_throwIfRoot(H){if(""===this._location.path)throw It(H)}}function ki(j,H,ae){return Nr.apply(this,arguments)}function Nr(){return(Nr=(0,Ve.Z)(function*(j,H,ae){const O=yield mi(j,{pageToken:ae});H.prefixes.push(...O.prefixes),H.items.push(...O.items),null!=O.nextPageToken&&(yield ki(j,H,O.nextPageToken))})).apply(this,arguments)}function mi(j,H){null!=H&&"number"==typeof H.maxResults&&Zn("options.maxResults",1,1e3,H.maxResults);const ae=H||{},b=tn(j.storage,j._location,"/",ae.pageToken,ae.maxResults);return j.storage.makeRequestWithTokens(b,xi)}function Xs(j){j._throwIfRoot("getDownloadURL");const H=function kn(j,H,ae){const O=xn(H.fullServerUrl(),j.host,j._protocol),Z=j.maxOperationRetryTime,de=new Kr(O,"GET",function ke(j,H){return function ae(b,O){const C=Kt(j,O,H);return ur(null!==C),function Gn(j,H,ae,b){const O=Ee(H);if(null===O||!Sn(O.downloadTokens))return null;const C=O.downloadTokens;if(0===C.length)return null;const Z=encodeURIComponent;return C.split(",").map(pt=>{const sr=j.fullPath;return xn("/b/"+Z(j.bucket)+"/o/"+Z(sr),ae,b)+Yr({alt:"media",token:pt})})[0]}(C,O,j.host,j._protocol)}}(j,ae),Z);return de.errorHandler=Dt(H),de}(j.storage,j._location,vt());return j.storage.makeRequestWithTokens(H,xi).then(ae=>{if(null===ae)throw function Ue(){return new be(Ie.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return ae})}function rs(j,H){const ae=function z(j,H){const ae=H.split("/").filter(b=>b.length>0).join("/");return 0===j.length?ae:j+"/"+ae}(j._location.path,H),b=new on(j._location.bucket,ae);return new As(j.storage,b)}function Lt(j,H){if(j instanceof gs){const ae=j;if(null==ae._bucket)throw function Ae(){return new be(Ie.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Vt+"' property when initializing the app?")}();const b=new As(ae,ae._bucket);return null!=H?Lt(b,H):b}return void 0!==H?rs(j,H):j}function fn(j,H){if(H&&function ps(j){return/^[A-Za-z]+:\/\//.test(j)}(H)){if(j instanceof gs)return function vr(j,H){return new As(j,H)}(j,H);throw rt("To use ref(service, url), the first argument must be a Storage instance.")}return Lt(j,H)}function Er(j,H){const ae=H?.[Vt];return null==ae?null:on.makeFromBucketSpec(ae,j)}class gs{constructor(H,ae,b,O,C){this.app=H,this._authProvider=ae,this._appCheckProvider=b,this._url=O,this._firebaseVersion=C,this._bucket=null,this._host=nt,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=O?on.makeFromBucketSpec(O,this._host):Er(this._host,this.app.options)}get host(){return this._host}set host(H){this._host=H,this._bucket=null!=this._url?on.makeFromBucketSpec(this._url,H):Er(H,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(H){Zn("time",0,Number.POSITIVE_INFINITY,H),this._maxUploadRetryTime=H}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(H){Zn("time",0,Number.POSITIVE_INFINITY,H),this._maxOperationRetryTime=H}_getAuthToken(){var H=this;return(0,Ve.Z)(function*(){if(H._overrideAuthToken)return H._overrideAuthToken;const ae=H._authProvider.getImmediate({optional:!0});if(ae){const b=yield ae.getToken();if(null!==b)return b.accessToken}return null})()}_getAppCheckToken(){var H=this;return(0,Ve.Z)(function*(){const ae=H._appCheckProvider.getImmediate({optional:!0});return ae?(yield ae.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(H=>H.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(H){return new As(this,H)}_makeRequest(H,ae,b,O,C=!0){if(this._deleted)return new Wt(Et());{const Z=function ns(j,H,ae,b,O,C,Z=!0){const de=Yr(j.urlParams),tt=j.url+de,pt=Object.assign({},j.headers);return function Mn(j,H){H&&(j["X-Firebase-GMPID"]=H)}(pt,H),function Fr(j,H){null!==H&&H.length>0&&(j.Authorization="Firebase "+H)}(pt,ae),function ei(j,H){j["X-Firebase-Storage-Version"]="webjs/"+(H??"AppManager")}(pt,C),function Cr(j,H){null!==H&&(j["X-Firebase-AppCheck"]=H)}(pt,b),new an(tt,j.method,pt,j.body,j.successCodes,j.additionalRetryCodes,j.handler,j.errorHandler,j.timeout,j.progressCallback,O,Z)}(H,this._appId,b,O,ae,this._firebaseVersion,C);return this._requests.add(Z),Z.getPromise().then(()=>this._requests.delete(Z),()=>this._requests.delete(Z)),Z}}makeRequestWithTokens(H,ae){var b=this;return(0,Ve.Z)(function*(){const[O,C]=yield Promise.all([b._getAuthToken(),b._getAppCheckToken()]);return b._makeRequest(H,ae,O,C).getPromise()})()}}const di="@firebase/storage";function _i(j,H){return fn(j=(0,Qe.m9)(j),H)}function Qn(j,{instanceIdentifier:H}){const ae=j.getProvider("app").getImmediate(),b=j.getProvider("auth-internal"),O=j.getProvider("app-check-internal");return new gs(ae,b,O,H,ot.SDK_VERSION)}!function va(){(0,ot._registerComponent)(new mt.wA("storage",Qn,"PUBLIC").setMultipleInstances(!0)),(0,ot.registerVersion)(di,"0.12.3",""),(0,ot.registerVersion)(di,"0.12.3","esm2017")}();class Zi{constructor(H,ae,b){this._delegate=H,this.task=ae,this.ref=b}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class eo{constructor(H,ae){this._delegate=H,this._ref=ae,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new Zi(this._delegate.snapshot,this,this._ref)}then(H,ae){return this._delegate.then(b=>{if(H)return H(new Zi(b,this,this._ref))},ae)}on(H,ae,b,O){let C;return ae&&(C="function"==typeof ae?Z=>ae(new Zi(Z,this,this._ref)):{next:ae.next?Z=>ae.next(new Zi(Z,this,this._ref)):void 0,complete:ae.complete||void 0,error:ae.error||void 0}),this._delegate.on(H,C,b||void 0,O||void 0)}}class Li{constructor(H,ae){this._delegate=H,this._service=ae}get prefixes(){return this._delegate.prefixes.map(H=>new fi(H,this._service))}get items(){return this._delegate.items.map(H=>new fi(H,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class fi{constructor(H,ae){this._delegate=H,this.storage=ae}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(H){const ae=function Oo(j,H){return rs(j,H)}(this._delegate,H);return new fi(ae,this.storage)}get root(){return new fi(this._delegate.root,this.storage)}get parent(){const H=this._delegate.parent;return null==H?null:new fi(H,this.storage)}put(H,ae){return this._throwIfRoot("put"),new eo(function Ai(j,H,ae){return function xs(j,H,ae){return j._throwIfRoot("uploadBytesResumable"),new Hs(j,new ir(H),ae)}(j=(0,Qe.m9)(j),H,ae)}(this._delegate,H,ae),this)}putString(H,ae=Xn.RAW,b){this._throwIfRoot("putString");const O=Un(ae,H),C=Object.assign({},b);return null==C.contentType&&null!=O.contentType&&(C.contentType=O.contentType),new eo(new Hs(this._delegate,new ir(O.data,!0),C),this)}listAll(){return function wr(j){return function Wn(j){const H={prefixes:[],items:[]};return ki(j,H).then(()=>H)}(j=(0,Qe.m9)(j))}(this._delegate).then(H=>new Li(H,this.storage))}list(H){return function Lr(j,H){return mi(j=(0,Qe.m9)(j),H)}(this._delegate,H||void 0).then(ae=>new Li(ae,this.storage))}getMetadata(){return function ks(j){return function ci(j){j._throwIfRoot("getMetadata");const H=_n(j.storage,j._location,vt());return j.storage.makeRequestWithTokens(H,xi)}(j=(0,Qe.m9)(j))}(this._delegate)}updateMetadata(H){return function zi(j,H){return function oo(j,H){j._throwIfRoot("updateMetadata");const ae=function lr(j,H,ae,b){const C=xn(H.fullServerUrl(),j.host,j._protocol),de=dn(ae,b),pt=j.maxOperationRetryTime,ln=new Kr(C,"PATCH",ri(j,b),pt);return ln.headers={"Content-Type":"application/json; charset=utf-8"},ln.body=de,ln.errorHandler=Dt(H),ln}(j.storage,j._location,H,vt());return j.storage.makeRequestWithTokens(ae,xi)}(j=(0,Qe.m9)(j),H)}(this._delegate,H)}getDownloadURL(){return function mr(j){return Xs(j=(0,Qe.m9)(j))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function Or(j){return function Bn(j){j._throwIfRoot("deleteObject");const H=function ii(j,H){const b=xn(H.fullServerUrl(),j.host,j._protocol),de=new Kr(b,"DELETE",function Z(tt,pt){},j.maxOperationRetryTime);return de.successCodes=[200,204],de.errorHandler=Dt(H),de}(j.storage,j._location);return j.storage.makeRequestWithTokens(H,xi)}(j=(0,Qe.m9)(j))}(this._delegate)}_throwIfRoot(H){if(""===this._delegate._location.path)throw It(H)}}class xo{constructor(H,ae){this.app=H,this._delegate=ae}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(H){if(_s(H))throw rt("ref() expected a child path but got a URL, use refFromURL instead.");return new fi(_i(this._delegate,H),this)}refFromURL(H){if(!_s(H))throw rt("refFromURL() expected a full URL but got a child path, use ref() instead.");try{on.makeFromUrl(H,this._delegate.host)}catch{throw rt("refFromUrl() expected a valid full URL but got an invalid one.")}return new fi(_i(this._delegate,H),this)}setMaxUploadRetryTime(H){this._delegate.maxUploadRetryTime=H}setMaxOperationRetryTime(H){this._delegate.maxOperationRetryTime=H}useEmulator(H,ae,b={}){!function Fi(j,H,ae,b={}){!function Hi(j,H,ae,b={}){j.host=`${H}:${ae}`,j._protocol="http";const{mockUserToken:O}=b;O&&(j._overrideAuthToken="string"==typeof O?O:(0,Qe.Sg)(O,j.app.options.projectId))}(j,H,ae,b)}(this._delegate,H,ae,b)}}function _s(j){return/^[A-Za-z]+:\/\//.test(j)}function Vi(j,{instanceIdentifier:H}){const ae=j.getProvider("app-compat").getImmediate(),b=j.getProvider("storage").getImmediate({identifier:H});return new xo(ae,b)}!function ys(j){const H={TaskState:cr,TaskEvent:Wr,StringFormat:Xn,Storage:xo,Reference:fi};j.INTERNAL.registerComponent(new mt.wA("storage-compat",Vi,"PUBLIC").setServiceProps(H).setMultipleInstances(!0)),j.registerVersion("@firebase/storage-compat","0.3.6")}(ze.Z);var ko=U(7142);function Ui(j){const H=function Ea(j){return new W.y(H=>{const ae=Z=>H.next(Z);ae(j.snapshot);const C=j.on("state_changed",ae);return j.then(Z=>{ae(Z),H.complete()},Z=>{ae(j.snapshot),(Z=>{H.error(Z)})(Z)}),function(){C()}}).pipe(function ye(j,H=me.z){return(0,we.e)((ae,b)=>{let O=null,C=null,Z=null;const de=()=>{if(O){O.unsubscribe(),O=null;const pt=C;C=null,b.next(pt)}};function tt(){const pt=Z+j,ln=H.now();if(ln<pt)return O=this.schedule(void 0,pt-ln),void b.add(O);de()}ae.subscribe((0,Ce.x)(b,pt=>{C=pt,Z=H.now(),O||(O=H.schedule(tt,j),b.add(O))},()=>{de(),b.complete()},void 0,()=>{C=O=null}))})}(0))}(j);return{task:j,then:j.then.bind(j),catch:j.catch.bind(j),pause:j.pause.bind(j),cancel:j.cancel.bind(j),resume:j.resume.bind(j),snapshotChanges:()=>H,percentageChanges:()=>H.pipe((0,De.U)(ae=>ae.bytesTransferred/ae.totalBytes*100))}}function ao(j){return{getDownloadURL:()=>(0,K.of)(void 0).pipe(h.fc,(0,X.w)(()=>j.getDownloadURL()),h.iC),getMetadata:()=>(0,K.of)(void 0).pipe(h.fc,(0,X.w)(()=>j.getMetadata()),h.iC),delete:()=>(0,ve.D)(j.delete()),child:H=>ao(j.child(H)),updateMetadata:H=>(0,ve.D)(j.updateMetadata(H)),put:(H,ae)=>Ui(j.put(H,ae)),putString:(H,ae,b)=>Ui(j.putString(H,ae,b)),list:H=>(0,ve.D)(j.list(H)),listAll:()=>(0,ve.D)(j.listAll())}}const Cs=new ie.OlP("angularfire2.storageBucket"),Fo=new ie.OlP("angularfire2.storage.maxUploadRetryTime"),za=new ie.OlP("angularfire2.storage.maxOperationRetryTime"),Bi=new ie.OlP("angularfire2.storage.use-emulator");let Ci=(()=>{class j{storage;constructor(ae,b,O,C,Z,de,tt,pt,ln,sr){const dr=(0,pe.on)(ae,Z,b);this.storage=(0,pe.cc)(`${dr.name}.storage.${O}`,"AngularFireStorage",dr.name,()=>{const Dr=Z.runOutsideAngular(()=>dr.storage(O||void 0)),nr=ln;return nr&&Dr.useEmulator(...nr),tt&&Dr.setMaxUploadRetryTime(tt),pt&&Dr.setMaxOperationRetryTime(pt),Dr},[tt,pt])}ref(ae){return ao(this.storage.ref(ae))}refFromURL(ae){return ao(this.storage.refFromURL(ae))}upload(ae,b,O){return ao(this.storage.ref(ae)).put(b,O)}static \u0275fac=function(b){return new(b||j)(ie.LFG(pe.Dh),ie.LFG(pe.xv,8),ie.LFG(Cs,8),ie.LFG(ie.Lbi),ie.LFG(ie.R0b),ie.LFG(h.HU),ie.LFG(Fo,8),ie.LFG(za,8),ie.LFG(Bi,8),ie.LFG(h.Rf,8))};static \u0275prov=ie.Yz7({token:j,factory:j.\u0275fac,providedIn:"any"})}return j})(),au=(()=>{class j{static \u0275fac=function(b){return new(b||j)};static \u0275mod=ie.oAB({type:j});static \u0275inj=ie.cJS({})}return j})(),Lo=(()=>{class j{constructor(){ko.Z.registerVersion("angularfire",h.q4.full,"gcs-compat")}static \u0275fac=function(b){return new(b||j)};static \u0275mod=ie.oAB({type:j});static \u0275inj=ie.cJS({providers:[Ci],imports:[au]})}return j})()},7217:(Ot,Le,U)=>{U.d(Le,{Dh:()=>ye,GT:()=>we,cc:()=>Ve,hO:()=>ze,on:()=>X,pX:()=>me,xv:()=>De});var h=U(5879),W=U(1920),K=U(7142);const ve=["ngOnDestroy"],me=(nt,Vt,ut,ce={})=>new Proxy(nt,{get:(Be,be)=>ut.runOutsideAngular(()=>{if(nt[be])return ce?.spy?.get&&ce.spy.get(be,nt[be]),nt[be];if(ve.indexOf(be)>-1)return()=>{};const Ie=Vt.toPromise().then(Je=>{const Te=Je?.[be];return"function"==typeof Te?Te.bind(Je):Te?.then?Te.then(Oe=>ut.run(()=>Oe)):ut.run(()=>Te)});return new Proxy(()=>{},{get:(Je,Te)=>Ie[Te],apply:(Je,Te,Oe)=>Ie.then(et=>{const ft=et?.(...Oe);return ce?.spy?.apply&&ce.spy.apply(be,Oe,ft),ft})})})}),we=(nt,Vt)=>{Vt.forEach(ut=>{Object.getOwnPropertyNames(ut.prototype||ut).forEach(ce=>{Object.defineProperty(nt.prototype,ce,Object.getOwnPropertyDescriptor(ut.prototype||ut,ce))})})};class Ce{constructor(Vt){return Vt}}const ye=new h.OlP("angularfire2.app.options"),De=new h.OlP("angularfire2.app.name");function X(nt,Vt,ut){const Be="object"==typeof ut&&ut||{};Be.name=Be.name||"string"==typeof ut&&ut||"[DEFAULT]";const Ie=K.Z.apps.filter(Je=>Je&&Je.name===Be.name)[0]||Vt.runOutsideAngular(()=>K.Z.initializeApp(nt,Be));try{if(JSON.stringify(nt)!==JSON.stringify(Ie.options)){const Je=!!module.hot;ie("error",`${Ie.name} Firebase App already initialized with different options${Je?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new Ce(Ie)}const ie=(nt,...Vt)=>{(0,h.X6Q)()&&typeof console<"u"&&console[nt](...Vt)},pe={provide:Ce,useFactory:X,deps:[ye,h.R0b,[new h.FiY,De]]};let ze=(()=>{class nt{static initializeApp(ut,ce){return{ngModule:nt,providers:[{provide:ye,useValue:ut},{provide:De,useValue:ce}]}}constructor(ut){K.Z.registerVersion("angularfire",W.q4.full,"core"),K.Z.registerVersion("angularfire",W.q4.full,"app-compat"),K.Z.registerVersion("angular",h.q4F.full,ut.toString())}static \u0275fac=function(ce){return new(ce||nt)(h.LFG(h.Lbi))};static \u0275mod=h.oAB({type:nt});static \u0275inj=h.cJS({providers:[pe]})}return nt})();function Ve(nt,Vt,ut,ce,Be){const[,be,Ie]=globalThis.\u0275AngularfireInstanceCache.find(Je=>Je[0]===nt)||[];if(be)return function ot(nt,Vt){try{return nt.toString()===Vt.toString()}catch{return nt===Vt}}(Be,Ie)||(mt("error",`${Vt} was already initialized on the ${ut} Firebase App with different settings.${Qe?" You may need to reload as Firebase is not HMR aware.":""}`),mt("warn",{is:Be,was:Ie})),be;{const Je=ce();return globalThis.\u0275AngularfireInstanceCache.push([nt,Je,Be]),Je}}const Qe=typeof module<"u"&&!!module.hot,mt=(nt,...Vt)=>{(0,h.X6Q)()&&typeof console<"u"&&console[nt](...Vt)};globalThis.\u0275AngularfireInstanceCache||=[]},7350:(Ot,Le,U)=>{U.d(Le,{gg:()=>Sr,ET:()=>Kr,hJ:()=>tn,JU:()=>Oi,PL:()=>xi,ad:()=>mo,cf:()=>Nr,Cm:()=>Ne,IO:()=>ps,r7:()=>Ai,ar:()=>zi});var h=U(1920),W=U(5879),K=U(721),ve=U(3182);U(9010),U(534),U(9058),U(7879),U(4537);class pe{constructor(){return(0,h.vb)("auth")}}var ti=U(5776);class Sr{constructor(mr){return mr}}const gr="firestore",Ee=new W.OlP("angularfire2.firestore-instances");function z(wr){return(mr,Or)=>{const _i=mr.runOutsideAngular(()=>wr(Or));return new Sr(_i)}}const F={provide:class Mr{constructor(){return(0,h.vb)(gr)}},deps:[[new W.FiY,Ee]]},k={provide:Sr,useFactory:function re(wr,mr){const Or=(0,h.JM)(gr,wr,mr);return Or&&new Sr(Or)},deps:[[new W.FiY,Ee],K.Ot]};let oe=(()=>{class wr{constructor(){(0,ve.KN)("angularfire",h.q4.full,"fst")}static \u0275fac=function(_i){return new(_i||wr)};static \u0275mod=W.oAB({type:wr});static \u0275inj=W.cJS({providers:[k,F]})}return wr})();function Ne(wr,...mr){return{ngModule:oe,providers:[{provide:Ee,useFactory:z(wr),multi:!0,deps:[W.R0b,W.zs3,h.HU,K.z6,[new W.FiY,pe],[new W.FiY,h.Rf],...mr]}]}}const Kr=(0,h.u3)(ti.ET,!0),tn=(0,h.u3)(ti.hJ,!0),Oi=(0,h.u3)(ti.JU,!0),xi=(0,h.u3)(ti.PL,!0),mo=(0,h.u3)(ti.ad,!0),Nr=(0,h.u3)(ti.cf,!0),ps=(0,h.u3)(ti.IO,!0),Ai=(0,h.u3)(ti.r7,!0),zi=(0,h.u3)(ti.ar,!0)},1920:(Ot,Le,U)=>{U.d(Le,{q4:()=>Ve,iC:()=>ft,fc:()=>Oe,HU:()=>be,Rf:()=>nt,vb:()=>mt,JM:()=>Qe,u3:()=>Pn});var h=U(5879),W=U(3182),K=U(1954),me=U(2631);const Ce=new class we extends me.v{}(class ve extends K.o{constructor(kt,Ct){super(kt,Ct),this.scheduler=kt,this.work=Ct}schedule(kt,Ct=0){return Ct>0?super.schedule(kt,Ct):(this.delay=Ct,this.state=kt,this.scheduler.flush(this),this)}execute(kt,Ct){return Ct>0||this.closed?super.execute(kt,Ct):this._execute(kt,Ct)}requestAsyncId(kt,Ct,Ae=0){return null!=Ae&&Ae>0||null==Ae&&this.delay>0?super.requestAsyncId(kt,Ct,Ae):(kt.flush(this),0)}});var De=U(6321),X=U(5592),ie=U(9397),pe=U(3093),ze=U(5137);const Ve=new h.GfV("ANGULARFIRE2_VERSION");function Qe(Mt,kt,Ct){if(kt){if(1===kt.length)return kt[0];const He=kt.filter(Ue=>Ue.app===Ct);if(1===He.length)return He[0]}return Ct.container.getProvider(Mt).getImmediate({optional:!0})}const mt=(Mt,kt)=>{const Ct=kt?[kt]:(0,W.C6)(),Ae=[];return Ct.forEach(Me=>{Me.container.getProvider(Mt).instances.forEach(Ue=>{Ae.includes(Ue)||Ae.push(Ue)})}),Ae};class nt{constructor(){return mt(Vt)}}const Vt="app-check";function ut(){}class ce{zone;delegate;constructor(kt,Ct=Ce){this.zone=kt,this.delegate=Ct}now(){return this.delegate.now()}schedule(kt,Ct,Ae){const Me=this.zone;return this.delegate.schedule(function(Ue){Me.runGuarded(()=>{kt.apply(this,[Ue])})},Ct,Ae)}}class Be{zone;task=null;constructor(kt){this.zone=kt}call(kt,Ct){const Ae=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ut,{},ut,ut)),Ct.pipe((0,ie.b)({next:Ae,complete:Ae,error:Ae})).subscribe(kt).add(Ae)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let be=(()=>{class Mt{ngZone;outsideAngular;insideAngular;constructor(Ct){this.ngZone=Ct,this.outsideAngular=Ct.runOutsideAngular(()=>new ce(Zone.current)),this.insideAngular=Ct.run(()=>new ce(Zone.current,De.z)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(Ae){return new(Ae||Mt)(h.LFG(h.R0b))};static \u0275prov=h.Yz7({token:Mt,factory:Mt.\u0275fac,providedIn:"root"})}return Mt})();function Ie(){const Mt=globalThis.\u0275AngularFireScheduler;if(!Mt)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return Mt}function Te(Mt){return Ie().ngZone.run(()=>Mt())}function Oe(Mt){return Mt.pipe((0,pe.Q)(Ie().outsideAngular))}function ft(Mt){return function Gt(Mt){return function(Ct){return(Ct=Ct.lift(new Be(Mt.ngZone))).pipe((0,ze.R)(Mt.outsideAngular),(0,pe.Q)(Mt.insideAngular))}}(Ie())(Mt)}const Jt=(Mt,kt)=>function(){const Ae=arguments;return kt&&setTimeout(()=>{"scheduled"===kt.state&&kt.invoke()},10),Te(()=>Mt.apply(void 0,Ae))},Pn=(Mt,kt)=>function(){let Ct;const Ae=arguments;for(let He=0;He<arguments.length;He++)"function"==typeof Ae[He]&&(kt&&(Ct||=Te(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ut,{},ut,ut))),Ae[He]=Jt(Ae[He],Ct));const Me=function Je(Mt){return Ie().ngZone.runOutsideAngular(()=>Mt())}(()=>Mt.apply(this,Ae));if(!kt){if(Me instanceof X.y){const He=Ie();return Me.pipe((0,ze.R)(He.outsideAngular),(0,pe.Q)(He.insideAngular))}return Te(()=>Me)}return Me instanceof X.y?Me.pipe(ft):Me instanceof Promise?Te(()=>new Promise((He,Ue)=>Me.then(Ge=>Te(()=>He(Ge)),Ge=>Te(()=>Ue(Ge))))):"function"==typeof Me&&Ct?function(){return setTimeout(()=>{Ct&&"scheduled"===Ct.state&&Ct.invoke()},10),Me.apply(this,arguments)}:Te(()=>Me)}},95:(Ot,Le,U)=>{U.d(Le,{Fj:()=>ce,Oe:()=>Fo,CE:()=>gs,qu:()=>Ga,u:()=>er,sg:()=>Lt,u5:()=>H,JU:()=>ot,JJ:()=>un,JL:()=>an,F:()=>cr,On:()=>_o,YN:()=>ks,wV:()=>zs,UX:()=>ae,Q7:()=>Li,EJ:()=>Ai,kI:()=>Oe,_Y:()=>No,Kr:()=>_i});var h=U(5879),W=U(6814),K=U(2459),ve=U(5592),me=U(7453),we=U(4829),Ce=U(4564),ye=U(8251),De=U(7400),X=U(2714),pe=U(7398);let ze=(()=>{class b{constructor(C,Z){this._renderer=C,this._elementRef=Z,this.onChange=de=>{},this.onTouched=()=>{}}setProperty(C,Z){this._renderer.setProperty(this._elementRef.nativeElement,C,Z)}registerOnTouched(C){this.onTouched=C}registerOnChange(C){this.onChange=C}setDisabledState(C){this.setProperty("disabled",C)}static#e=this.\u0275fac=function(Z){return new(Z||b)(h.Y36(h.Qsj),h.Y36(h.SBq))};static#t=this.\u0275dir=h.lG2({type:b})}return b})(),Ve=(()=>{class b extends ze{static#e=this.\u0275fac=function(){let C;return function(de){return(C||(C=h.n5z(b)))(de||b)}}();static#t=this.\u0275dir=h.lG2({type:b,features:[h.qOj]})}return b})();const ot=new h.OlP("NgValueAccessor"),nt={provide:ot,useExisting:(0,h.Gpc)(()=>ce),multi:!0},ut=new h.OlP("CompositionEventMode");let ce=(()=>{class b extends ze{constructor(C,Z,de){super(C,Z),this._compositionMode=de,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Vt(){const b=(0,W.q)()?(0,W.q)().getUserAgent():"";return/android (\d+)/.test(b.toLowerCase())}())}writeValue(C){this.setProperty("value",C??"")}_handleInput(C){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(C)}_compositionStart(){this._composing=!0}_compositionEnd(C){this._composing=!1,this._compositionMode&&this.onChange(C)}static#e=this.\u0275fac=function(Z){return new(Z||b)(h.Y36(h.Qsj),h.Y36(h.SBq),h.Y36(ut,8))};static#t=this.\u0275dir=h.lG2({type:b,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(Z,de){1&Z&&h.NdJ("input",function(pt){return de._handleInput(pt.target.value)})("blur",function(){return de.onTouched()})("compositionstart",function(){return de._compositionStart()})("compositionend",function(pt){return de._compositionEnd(pt.target.value)})},features:[h._Bn([nt]),h.qOj]})}return b})();function Be(b){return null==b||("string"==typeof b||Array.isArray(b))&&0===b.length}function be(b){return null!=b&&"number"==typeof b.length}const Ie=new h.OlP("NgValidators"),Je=new h.OlP("NgAsyncValidators"),Te=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Oe{static min(O){return function et(b){return O=>{if(Be(O.value)||Be(b))return null;const C=parseFloat(O.value);return!isNaN(C)&&C<b?{min:{min:b,actual:O.value}}:null}}(O)}static max(O){return function ft(b){return O=>{if(Be(O.value)||Be(b))return null;const C=parseFloat(O.value);return!isNaN(C)&&C>b?{max:{max:b,actual:O.value}}:null}}(O)}static required(O){return Gt(O)}static requiredTrue(O){return function Jt(b){return!0===b.value?null:{required:!0}}(O)}static email(O){return function Pn(b){return Be(b.value)||Te.test(b.value)?null:{email:!0}}(O)}static minLength(O){return function Mt(b){return O=>Be(O.value)||!be(O.value)?null:O.value.length<b?{minlength:{requiredLength:b,actualLength:O.value.length}}:null}(O)}static maxLength(O){return function kt(b){return O=>be(O.value)&&O.value.length>b?{maxlength:{requiredLength:b,actualLength:O.value.length}}:null}(O)}static pattern(O){return function Ct(b){if(!b)return Ae;let O,C;return"string"==typeof b?(C="","^"!==b.charAt(0)&&(C+="^"),C+=b,"$"!==b.charAt(b.length-1)&&(C+="$"),O=new RegExp(C)):(C=b.toString(),O=b),Z=>{if(Be(Z.value))return null;const de=Z.value;return O.test(de)?null:{pattern:{requiredPattern:C,actualValue:de}}}}(O)}static nullValidator(O){return null}static compose(O){return It(O)}static composeAsync(O){return $t(O)}}function Gt(b){return Be(b.value)?{required:!0}:null}function Ae(b){return null}function Me(b){return null!=b}function He(b){return(0,h.QGY)(b)?(0,K.D)(b):b}function Ue(b){let O={};return b.forEach(C=>{O=null!=C?{...O,...C}:O}),0===Object.keys(O).length?null:O}function Ge(b,O){return O.map(C=>C(b))}function Et(b){return b.map(O=>function rt(b){return!b.validate}(O)?O:C=>O.validate(C))}function It(b){if(!b)return null;const O=b.filter(Me);return 0==O.length?null:function(C){return Ue(Ge(C,O))}}function $n(b){return null!=b?It(Et(b)):null}function $t(b){if(!b)return null;const O=b.filter(Me);return 0==O.length?null:function(C){return function ie(...b){const O=(0,Ce.jO)(b),{args:C,keys:Z}=(0,me.D)(b),de=new ve.y(tt=>{const{length:pt}=C;if(!pt)return void tt.complete();const ln=new Array(pt);let sr=pt,dr=pt;for(let Dr=0;Dr<pt;Dr++){let nr=!1;(0,we.Xf)(C[Dr]).subscribe((0,ye.x)(tt,si=>{nr||(nr=!0,dr--),ln[Dr]=si},()=>sr--,void 0,()=>{(!sr||!nr)&&(dr||tt.next(Z?(0,X.n)(Z,ln):ln),tt.complete())}))}});return O?de.pipe((0,De.Z)(O)):de}(Ge(C,O).map(He)).pipe((0,pe.U)(Ue))}}function on(b){return null!=b?$t(Et(b)):null}function Wt(b,O){return null===b?[O]:Array.isArray(b)?[...b,O]:[b,O]}function ar(b){return b._rawValidators}function Hn(b){return b._rawAsyncValidators}function Ln(b){return b?Array.isArray(b)?b:[b]:[]}function xt(b,O){return Array.isArray(b)?b.includes(O):b===O}function zn(b,O){const C=Ln(O);return Ln(b).forEach(de=>{xt(C,de)||C.push(de)}),C}function Sn(b,O){return Ln(O).filter(C=>!xt(b,C))}class Ir{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(O){this._rawValidators=O||[],this._composedValidatorFn=$n(this._rawValidators)}_setAsyncValidators(O){this._rawAsyncValidators=O||[],this._composedAsyncValidatorFn=on(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(O){this._onDestroyCallbacks.push(O)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(O=>O()),this._onDestroyCallbacks=[]}reset(O=void 0){this.control&&this.control.reset(O)}hasError(O,C){return!!this.control&&this.control.hasError(O,C)}getError(O,C){return this.control?this.control.getError(O,C):null}}class Vn extends Ir{get formDirective(){return null}get path(){return null}}class Zn extends Ir{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class xn{constructor(O){this._cd=O}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let un=(()=>{class b extends xn{constructor(C){super(C)}static#e=this.\u0275fac=function(Z){return new(Z||b)(h.Y36(Zn,2))};static#t=this.\u0275dir=h.lG2({type:b,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(Z,de){2&Z&&h.ekj("ng-untouched",de.isUntouched)("ng-touched",de.isTouched)("ng-pristine",de.isPristine)("ng-dirty",de.isDirty)("ng-valid",de.isValid)("ng-invalid",de.isInvalid)("ng-pending",de.isPending)},features:[h.qOj]})}return b})(),an=(()=>{class b extends xn{constructor(C){super(C)}static#e=this.\u0275fac=function(Z){return new(Z||b)(h.Y36(Vn,10))};static#t=this.\u0275dir=h.lG2({type:b,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(Z,de){2&Z&&h.ekj("ng-untouched",de.isUntouched)("ng-touched",de.isTouched)("ng-pristine",de.isPristine)("ng-dirty",de.isDirty)("ng-valid",de.isValid)("ng-invalid",de.isInvalid)("ng-pending",de.isPending)("ng-submitted",de.isSubmitted)},features:[h.qOj]})}return b})();const Sr="VALID",gr="INVALID",Mr="PENDING",ir="DISABLED";function Ee(b){return(k(b)?b.validators:b)||null}function z(b,O){return(k(O)?O.asyncValidators:b)||null}function k(b){return null!=b&&!Array.isArray(b)&&"object"==typeof b}function oe(b,O,C){const Z=b.controls;if(!(O?Object.keys(Z):Z).length)throw new h.vHH(1e3,"");if(!Z[C])throw new h.vHH(1001,"")}function Ne(b,O,C){b._forEachChild((Z,de)=>{if(void 0===C[de])throw new h.vHH(1002,"")})}class at{constructor(O,C){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(O),this._assignAsyncValidators(C)}get validator(){return this._composedValidatorFn}set validator(O){this._rawValidators=this._composedValidatorFn=O}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(O){this._rawAsyncValidators=this._composedAsyncValidatorFn=O}get parent(){return this._parent}get valid(){return this.status===Sr}get invalid(){return this.status===gr}get pending(){return this.status==Mr}get disabled(){return this.status===ir}get enabled(){return this.status!==ir}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(O){this._assignValidators(O)}setAsyncValidators(O){this._assignAsyncValidators(O)}addValidators(O){this.setValidators(zn(O,this._rawValidators))}addAsyncValidators(O){this.setAsyncValidators(zn(O,this._rawAsyncValidators))}removeValidators(O){this.setValidators(Sn(O,this._rawValidators))}removeAsyncValidators(O){this.setAsyncValidators(Sn(O,this._rawAsyncValidators))}hasValidator(O){return xt(this._rawValidators,O)}hasAsyncValidator(O){return xt(this._rawAsyncValidators,O)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(O={}){this.touched=!0,this._parent&&!O.onlySelf&&this._parent.markAsTouched(O)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(O=>O.markAllAsTouched())}markAsUntouched(O={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(C=>{C.markAsUntouched({onlySelf:!0})}),this._parent&&!O.onlySelf&&this._parent._updateTouched(O)}markAsDirty(O={}){this.pristine=!1,this._parent&&!O.onlySelf&&this._parent.markAsDirty(O)}markAsPristine(O={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(C=>{C.markAsPristine({onlySelf:!0})}),this._parent&&!O.onlySelf&&this._parent._updatePristine(O)}markAsPending(O={}){this.status=Mr,!1!==O.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!O.onlySelf&&this._parent.markAsPending(O)}disable(O={}){const C=this._parentMarkedDirty(O.onlySelf);this.status=ir,this.errors=null,this._forEachChild(Z=>{Z.disable({...O,onlySelf:!0})}),this._updateValue(),!1!==O.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...O,skipPristineCheck:C}),this._onDisabledChange.forEach(Z=>Z(!0))}enable(O={}){const C=this._parentMarkedDirty(O.onlySelf);this.status=Sr,this._forEachChild(Z=>{Z.enable({...O,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:O.emitEvent}),this._updateAncestors({...O,skipPristineCheck:C}),this._onDisabledChange.forEach(Z=>Z(!1))}_updateAncestors(O){this._parent&&!O.onlySelf&&(this._parent.updateValueAndValidity(O),O.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(O){this._parent=O}getRawValue(){return this.value}updateValueAndValidity(O={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Sr||this.status===Mr)&&this._runAsyncValidator(O.emitEvent)),!1!==O.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!O.onlySelf&&this._parent.updateValueAndValidity(O)}_updateTreeValidity(O={emitEvent:!0}){this._forEachChild(C=>C._updateTreeValidity(O)),this.updateValueAndValidity({onlySelf:!0,emitEvent:O.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?ir:Sr}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(O){if(this.asyncValidator){this.status=Mr,this._hasOwnPendingAsyncValidator=!0;const C=He(this.asyncValidator(this));this._asyncValidationSubscription=C.subscribe(Z=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(Z,{emitEvent:O})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(O,C={}){this.errors=O,this._updateControlsErrors(!1!==C.emitEvent)}get(O){let C=O;return null==C||(Array.isArray(C)||(C=C.split(".")),0===C.length)?null:C.reduce((Z,de)=>Z&&Z._find(de),this)}getError(O,C){const Z=C?this.get(C):this;return Z&&Z.errors?Z.errors[O]:null}hasError(O,C){return!!this.getError(O,C)}get root(){let O=this;for(;O._parent;)O=O._parent;return O}_updateControlsErrors(O){this.status=this._calculateStatus(),O&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(O)}_initObservables(){this.valueChanges=new h.vpe,this.statusChanges=new h.vpe}_calculateStatus(){return this._allControlsDisabled()?ir:this.errors?gr:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Mr)?Mr:this._anyControlsHaveStatus(gr)?gr:Sr}_anyControlsHaveStatus(O){return this._anyControls(C=>C.status===O)}_anyControlsDirty(){return this._anyControls(O=>O.dirty)}_anyControlsTouched(){return this._anyControls(O=>O.touched)}_updatePristine(O={}){this.pristine=!this._anyControlsDirty(),this._parent&&!O.onlySelf&&this._parent._updatePristine(O)}_updateTouched(O={}){this.touched=this._anyControlsTouched(),this._parent&&!O.onlySelf&&this._parent._updateTouched(O)}_registerOnCollectionChange(O){this._onCollectionChange=O}_setUpdateStrategy(O){k(O)&&null!=O.updateOn&&(this._updateOn=O.updateOn)}_parentMarkedDirty(O){return!O&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(O){return null}_assignValidators(O){this._rawValidators=Array.isArray(O)?O.slice():O,this._composedValidatorFn=function re(b){return Array.isArray(b)?$n(b):b||null}(this._rawValidators)}_assignAsyncValidators(O){this._rawAsyncValidators=Array.isArray(O)?O.slice():O,this._composedAsyncValidatorFn=function F(b){return Array.isArray(b)?on(b):b||null}(this._rawAsyncValidators)}}class vt extends at{constructor(O,C,Z){super(Ee(C),z(Z,C)),this.controls=O,this._initObservables(),this._setUpdateStrategy(C),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(O,C){return this.controls[O]?this.controls[O]:(this.controls[O]=C,C.setParent(this),C._registerOnCollectionChange(this._onCollectionChange),C)}addControl(O,C,Z={}){this.registerControl(O,C),this.updateValueAndValidity({emitEvent:Z.emitEvent}),this._onCollectionChange()}removeControl(O,C={}){this.controls[O]&&this.controls[O]._registerOnCollectionChange(()=>{}),delete this.controls[O],this.updateValueAndValidity({emitEvent:C.emitEvent}),this._onCollectionChange()}setControl(O,C,Z={}){this.controls[O]&&this.controls[O]._registerOnCollectionChange(()=>{}),delete this.controls[O],C&&this.registerControl(O,C),this.updateValueAndValidity({emitEvent:Z.emitEvent}),this._onCollectionChange()}contains(O){return this.controls.hasOwnProperty(O)&&this.controls[O].enabled}setValue(O,C={}){Ne(this,0,O),Object.keys(O).forEach(Z=>{oe(this,!0,Z),this.controls[Z].setValue(O[Z],{onlySelf:!0,emitEvent:C.emitEvent})}),this.updateValueAndValidity(C)}patchValue(O,C={}){null!=O&&(Object.keys(O).forEach(Z=>{const de=this.controls[Z];de&&de.patchValue(O[Z],{onlySelf:!0,emitEvent:C.emitEvent})}),this.updateValueAndValidity(C))}reset(O={},C={}){this._forEachChild((Z,de)=>{Z.reset(O?O[de]:null,{onlySelf:!0,emitEvent:C.emitEvent})}),this._updatePristine(C),this._updateTouched(C),this.updateValueAndValidity(C)}getRawValue(){return this._reduceChildren({},(O,C,Z)=>(O[Z]=C.getRawValue(),O))}_syncPendingControls(){let O=this._reduceChildren(!1,(C,Z)=>!!Z._syncPendingControls()||C);return O&&this.updateValueAndValidity({onlySelf:!0}),O}_forEachChild(O){Object.keys(this.controls).forEach(C=>{const Z=this.controls[C];Z&&O(Z,C)})}_setUpControls(){this._forEachChild(O=>{O.setParent(this),O._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(O){for(const[C,Z]of Object.entries(this.controls))if(this.contains(C)&&O(Z))return!0;return!1}_reduceValue(){return this._reduceChildren({},(C,Z,de)=>((Z.enabled||this.disabled)&&(C[de]=Z.value),C))}_reduceChildren(O,C){let Z=O;return this._forEachChild((de,tt)=>{Z=C(Z,de,tt)}),Z}_allControlsDisabled(){for(const O of Object.keys(this.controls))if(this.controls[O].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(O){return this.controls.hasOwnProperty(O)?this.controls[O]:null}}class Kt extends vt{}const dn=new h.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>ni}),ni="always";function ws(b,O){return[...O.path,b]}function ls(b,O,C=ni){ri(b,O),O.valueAccessor.writeValue(b.value),(b.disabled||"always"===C)&&O.valueAccessor.setDisabledState?.(b.disabled),function ke(b,O){O.valueAccessor.registerOnChange(C=>{b._pendingValue=C,b._pendingChange=!0,b._pendingDirty=!0,"change"===b.updateOn&&Dt(b,O)})}(b,O),function _n(b,O){const C=(Z,de)=>{O.valueAccessor.writeValue(Z),de&&O.viewToModelUpdate(Z)};b.registerOnChange(C),O._registerOnDestroy(()=>{b._unregisterOnChange(C)})}(b,O),function st(b,O){O.valueAccessor.registerOnTouched(()=>{b._pendingTouched=!0,"blur"===b.updateOn&&b._pendingChange&&Dt(b,O),"submit"!==b.updateOn&&b.markAsTouched()})}(b,O),function ur(b,O){if(O.valueAccessor.setDisabledState){const C=Z=>{O.valueAccessor.setDisabledState(Z)};b.registerOnDisabledChange(C),O._registerOnDestroy(()=>{b._unregisterOnDisabledChange(C)})}}(b,O)}function Di(b,O,C=!0){const Z=()=>{};O.valueAccessor&&(O.valueAccessor.registerOnChange(Z),O.valueAccessor.registerOnTouched(Z)),Fe(b,O),b&&(O._invokeOnDestroyCallbacks(),b._registerOnCollectionChange(()=>{}))}function Kr(b,O){b.forEach(C=>{C.registerOnValidatorChange&&C.registerOnValidatorChange(O)})}function ri(b,O){const C=ar(b);null!==O.validator?b.setValidators(Wt(C,O.validator)):"function"==typeof C&&b.setValidators([C]);const Z=Hn(b);null!==O.asyncValidator?b.setAsyncValidators(Wt(Z,O.asyncValidator)):"function"==typeof Z&&b.setAsyncValidators([Z]);const de=()=>b.updateValueAndValidity();Kr(O._rawValidators,de),Kr(O._rawAsyncValidators,de)}function Fe(b,O){let C=!1;if(null!==b){if(null!==O.validator){const de=ar(b);if(Array.isArray(de)&&de.length>0){const tt=de.filter(pt=>pt!==O.validator);tt.length!==de.length&&(C=!0,b.setValidators(tt))}}if(null!==O.asyncValidator){const de=Hn(b);if(Array.isArray(de)&&de.length>0){const tt=de.filter(pt=>pt!==O.asyncValidator);tt.length!==de.length&&(C=!0,b.setAsyncValidators(tt))}}}const Z=()=>{};return Kr(O._rawValidators,Z),Kr(O._rawAsyncValidators,Z),C}function Dt(b,O){b._pendingDirty&&b.markAsDirty(),b.setValue(b._pendingValue,{emitModelToViewChange:!1}),O.viewToModelUpdate(b._pendingValue),b._pendingChange=!1}function tn(b,O){ri(b,O)}function tr(b,O){if(!b.hasOwnProperty("model"))return!1;const C=b.model;return!!C.isFirstChange()||!Object.is(O,C.currentValue)}function Oi(b,O){b._syncPendingControls(),O.forEach(C=>{const Z=C.control;"submit"===Z.updateOn&&Z._pendingChange&&(C.viewToModelUpdate(Z._pendingValue),Z._pendingChange=!1)})}function ds(b,O){if(!O)return null;let C,Z,de;return Array.isArray(O),O.forEach(tt=>{tt.constructor===ce?C=tt:function cs(b){return Object.getPrototypeOf(b.constructor)===Ve}(tt)?Z=tt:de=tt}),de||Z||C||null}const go={provide:Vn,useExisting:(0,h.Gpc)(()=>cr)},Wr=(()=>Promise.resolve())();let cr=(()=>{class b extends Vn{constructor(C,Z,de){super(),this.callSetDisabledState=de,this.submitted=!1,this._directives=new Set,this.ngSubmit=new h.vpe,this.form=new vt({},$n(C),on(Z))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(C){Wr.then(()=>{const Z=this._findContainer(C.path);C.control=Z.registerControl(C.name,C.control),ls(C.control,C,this.callSetDisabledState),C.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(C)})}getControl(C){return this.form.get(C.path)}removeControl(C){Wr.then(()=>{const Z=this._findContainer(C.path);Z&&Z.removeControl(C.name),this._directives.delete(C)})}addFormGroup(C){Wr.then(()=>{const Z=this._findContainer(C.path),de=new vt({});tn(de,C),Z.registerControl(C.name,de),de.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(C){Wr.then(()=>{const Z=this._findContainer(C.path);Z&&Z.removeControl(C.name)})}getFormGroup(C){return this.form.get(C.path)}updateModel(C,Z){Wr.then(()=>{this.form.get(C.path).setValue(Z)})}setValue(C){this.control.setValue(C)}onSubmit(C){return this.submitted=!0,Oi(this.form,this._directives),this.ngSubmit.emit(C),"dialog"===C?.target?.method}onReset(){this.resetForm()}resetForm(C=void 0){this.form.reset(C),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(C){return C.pop(),C.length?this.form.get(C):this.form}static#e=this.\u0275fac=function(Z){return new(Z||b)(h.Y36(Ie,10),h.Y36(Je,10),h.Y36(dn,8))};static#t=this.\u0275dir=h.lG2({type:b,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(Z,de){1&Z&&h.NdJ("submit",function(pt){return de.onSubmit(pt)})("reset",function(){return de.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[h._Bn([go]),h.qOj]})}return b})();function js(b,O){const C=b.indexOf(O);C>-1&&b.splice(C,1)}function Js(b){return"object"==typeof b&&null!==b&&2===Object.keys(b).length&&"value"in b&&"disabled"in b}const gi=class extends at{constructor(O=null,C,Z){super(Ee(C),z(Z,C)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(O),this._setUpdateStrategy(C),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),k(C)&&(C.nonNullable||C.initialValueIsDefault)&&(this.defaultValue=Js(O)?O.value:O)}setValue(O,C={}){this.value=this._pendingValue=O,this._onChange.length&&!1!==C.emitModelToViewChange&&this._onChange.forEach(Z=>Z(this.value,!1!==C.emitViewToModelChange)),this.updateValueAndValidity(C)}patchValue(O,C={}){this.setValue(O,C)}reset(O=this.defaultValue,C={}){this._applyFormState(O),this.markAsPristine(C),this.markAsUntouched(C),this.setValue(this.value,C),this._pendingChange=!1}_updateValue(){}_anyControls(O){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(O){this._onChange.push(O)}_unregisterOnChange(O){js(this._onChange,O)}registerOnDisabledChange(O){this._onDisabledChange.push(O)}_unregisterOnDisabledChange(O){js(this._onDisabledChange,O)}_forEachChild(O){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(O){Js(O)?(this.value=this._pendingValue=O.value,O.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=O}};let fs=(()=>{class b extends Vn{ngOnInit(){this._checkParentType(),this.formDirective.addFormGroup(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormGroup(this)}get control(){return this.formDirective.getFormGroup(this)}get path(){return ws(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}static#e=this.\u0275fac=function(){let C;return function(de){return(C||(C=h.n5z(b)))(de||b)}}();static#t=this.\u0275dir=h.lG2({type:b,features:[h.qOj]})}return b})();const As={provide:Zn,useExisting:(0,h.Gpc)(()=>_o)},Os=(()=>Promise.resolve())();let _o=(()=>{class b extends Zn{constructor(C,Z,de,tt,pt,ln){super(),this._changeDetectorRef=pt,this.callSetDisabledState=ln,this.control=new gi,this._registered=!1,this.name="",this.update=new h.vpe,this._parent=C,this._setValidators(Z),this._setAsyncValidators(de),this.valueAccessor=ds(0,tt)}ngOnChanges(C){if(this._checkForErrors(),!this._registered||"name"in C){if(this._registered&&(this._checkName(),this.formDirective)){const Z=C.name.previousValue;this.formDirective.removeControl({name:Z,path:this._getPath(Z)})}this._setUpControl()}"isDisabled"in C&&this._updateDisabled(C),tr(C,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(C){this.viewModel=C,this.update.emit(C)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){ls(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(C){Os.then(()=>{this.control.setValue(C,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(C){const Z=C.isDisabled.currentValue,de=0!==Z&&(0,h.VuI)(Z);Os.then(()=>{de&&!this.control.disabled?this.control.disable():!de&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(C){return this._parent?ws(C,this._parent):[C]}static#e=this.\u0275fac=function(Z){return new(Z||b)(h.Y36(Vn,9),h.Y36(Ie,10),h.Y36(Je,10),h.Y36(ot,10),h.Y36(h.sBO,8),h.Y36(dn,8))};static#t=this.\u0275dir=h.lG2({type:b,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[h._Bn([As]),h.qOj,h.TTD]})}return b})(),No=(()=>{class b{static#e=this.\u0275fac=function(Z){return new(Z||b)};static#t=this.\u0275dir=h.lG2({type:b,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}return b})();const xs={provide:ot,useExisting:(0,h.Gpc)(()=>zs),multi:!0};let zs=(()=>{class b extends Ve{writeValue(C){this.setProperty("value",C??"")}registerOnChange(C){this.onChange=Z=>{C(""==Z?null:parseFloat(Z))}}static#e=this.\u0275fac=function(){let C;return function(de){return(C||(C=h.n5z(b)))(de||b)}}();static#t=this.\u0275dir=h.lG2({type:b,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(Z,de){1&Z&&h.NdJ("input",function(pt){return de.onChange(pt.target.value)})("blur",function(){return de.onTouched()})},features:[h._Bn([xs]),h.qOj]})}return b})(),Nr=(()=>{class b{static#e=this.\u0275fac=function(Z){return new(Z||b)};static#t=this.\u0275mod=h.oAB({type:b});static#n=this.\u0275inj=h.cJS({})}return b})();const Bn=new h.OlP("NgModelWithFormControlWarning"),vr={provide:Vn,useExisting:(0,h.Gpc)(()=>Lt)};let Lt=(()=>{class b extends Vn{constructor(C,Z,de){super(),this.callSetDisabledState=de,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new h.vpe,this._setValidators(C),this._setAsyncValidators(Z)}ngOnChanges(C){this._checkFormPresent(),C.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Fe(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(C){const Z=this.form.get(C.path);return ls(Z,C,this.callSetDisabledState),Z.updateValueAndValidity({emitEvent:!1}),this.directives.push(C),Z}getControl(C){return this.form.get(C.path)}removeControl(C){Di(C.control||null,C,!1),function Qs(b,O){const C=b.indexOf(O);C>-1&&b.splice(C,1)}(this.directives,C)}addFormGroup(C){this._setUpFormContainer(C)}removeFormGroup(C){this._cleanUpFormContainer(C)}getFormGroup(C){return this.form.get(C.path)}addFormArray(C){this._setUpFormContainer(C)}removeFormArray(C){this._cleanUpFormContainer(C)}getFormArray(C){return this.form.get(C.path)}updateModel(C,Z){this.form.get(C.path).setValue(Z)}onSubmit(C){return this.submitted=!0,Oi(this.form,this.directives),this.ngSubmit.emit(C),"dialog"===C?.target?.method}onReset(){this.resetForm()}resetForm(C=void 0){this.form.reset(C),this.submitted=!1}_updateDomValue(){this.directives.forEach(C=>{const Z=C.control,de=this.form.get(C.path);Z!==de&&(Di(Z||null,C),(b=>b instanceof gi)(de)&&(ls(de,C,this.callSetDisabledState),C.control=de))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(C){const Z=this.form.get(C.path);tn(Z,C),Z.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(C){if(this.form){const Z=this.form.get(C.path);Z&&function yn(b,O){return Fe(b,O)}(Z,C)&&Z.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){ri(this.form,this),this._oldForm&&Fe(this._oldForm,this)}_checkFormPresent(){}static#e=this.\u0275fac=function(Z){return new(Z||b)(h.Y36(Ie,10),h.Y36(Je,10),h.Y36(dn,8))};static#t=this.\u0275dir=h.lG2({type:b,selectors:[["","formGroup",""]],hostBindings:function(Z,de){1&Z&&h.NdJ("submit",function(pt){return de.onSubmit(pt)})("reset",function(){return de.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[h._Bn([vr]),h.qOj,h.TTD]})}return b})();const fn={provide:Vn,useExisting:(0,h.Gpc)(()=>Er)};let Er=(()=>{class b extends fs{constructor(C,Z,de){super(),this.name=null,this._parent=C,this._setValidators(Z),this._setAsyncValidators(de)}_checkParentType(){di(this._parent)}static#e=this.\u0275fac=function(Z){return new(Z||b)(h.Y36(Vn,13),h.Y36(Ie,10),h.Y36(Je,10))};static#t=this.\u0275dir=h.lG2({type:b,selectors:[["","formGroupName",""]],inputs:{name:["formGroupName","name"]},features:[h._Bn([fn]),h.qOj]})}return b})();const Hi={provide:Vn,useExisting:(0,h.Gpc)(()=>gs)};let gs=(()=>{class b extends Vn{constructor(C,Z,de){super(),this.name=null,this._parent=C,this._setValidators(Z),this._setAsyncValidators(de)}ngOnInit(){this._checkParentType(),this.formDirective.addFormArray(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormArray(this)}get control(){return this.formDirective.getFormArray(this)}get formDirective(){return this._parent?this._parent.formDirective:null}get path(){return ws(null==this.name?this.name:this.name.toString(),this._parent)}_checkParentType(){di(this._parent)}static#e=this.\u0275fac=function(Z){return new(Z||b)(h.Y36(Vn,13),h.Y36(Ie,10),h.Y36(Je,10))};static#t=this.\u0275dir=h.lG2({type:b,selectors:[["","formArrayName",""]],inputs:{name:["formArrayName","name"]},features:[h._Bn([Hi]),h.qOj]})}return b})();function di(b){return!(b instanceof Er||b instanceof Lt||b instanceof gs)}const Ki={provide:Zn,useExisting:(0,h.Gpc)(()=>er)};let er=(()=>{class b extends Zn{set isDisabled(C){}static#e=this._ngModelWarningSentOnce=!1;constructor(C,Z,de,tt,pt){super(),this._ngModelWarningConfig=pt,this._added=!1,this.name=null,this.update=new h.vpe,this._ngModelWarningSent=!1,this._parent=C,this._setValidators(Z),this._setAsyncValidators(de),this.valueAccessor=ds(0,tt)}ngOnChanges(C){this._added||this._setUpControl(),tr(C,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(C){this.viewModel=C,this.update.emit(C)}get path(){return ws(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}static#t=this.\u0275fac=function(Z){return new(Z||b)(h.Y36(Vn,13),h.Y36(Ie,10),h.Y36(Je,10),h.Y36(ot,10),h.Y36(Bn,8))};static#n=this.\u0275dir=h.lG2({type:b,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[h._Bn([Ki]),h.qOj,h.TTD]})}return b})();const hi={provide:ot,useExisting:(0,h.Gpc)(()=>Ai),multi:!0};function is(b,O){return null==b?`${O}`:(O&&"object"==typeof O&&(O="Object"),`${b}: ${O}`.slice(0,50))}let Ai=(()=>{class b extends Ve{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(C){this._compareWith=C}writeValue(C){this.value=C;const de=is(this._getOptionId(C),C);this.setProperty("value",de)}registerOnChange(C){this.onChange=Z=>{this.value=this._getOptionValue(Z),C(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(C){for(const Z of this._optionMap.keys())if(this._compareWith(this._optionMap.get(Z),C))return Z;return null}_getOptionValue(C){const Z=function mn(b){return b.split(":")[0]}(C);return this._optionMap.has(Z)?this._optionMap.get(Z):C}static#e=this.\u0275fac=function(){let C;return function(de){return(C||(C=h.n5z(b)))(de||b)}}();static#t=this.\u0275dir=h.lG2({type:b,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(Z,de){1&Z&&h.NdJ("change",function(pt){return de.onChange(pt.target.value)})("blur",function(){return de.onTouched()})},inputs:{compareWith:"compareWith"},features:[h._Bn([hi]),h.qOj]})}return b})(),ks=(()=>{class b{constructor(C,Z,de){this._element=C,this._renderer=Z,this._select=de,this._select&&(this.id=this._select._registerOption())}set ngValue(C){null!=this._select&&(this._select._optionMap.set(this.id,C),this._setElementValue(is(this.id,C)),this._select.writeValue(this._select.value))}set value(C){this._setElementValue(C),this._select&&this._select.writeValue(this._select.value)}_setElementValue(C){this._renderer.setProperty(this._element.nativeElement,"value",C)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static#e=this.\u0275fac=function(Z){return new(Z||b)(h.Y36(h.SBq),h.Y36(h.Qsj),h.Y36(Ai,9))};static#t=this.\u0275dir=h.lG2({type:b,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}return b})();const zi={provide:ot,useExisting:(0,h.Gpc)(()=>Or),multi:!0};function Lr(b,O){return null==b?`${O}`:("string"==typeof O&&(O=`'${O}'`),O&&"object"==typeof O&&(O="Object"),`${b}: ${O}`.slice(0,50))}let Or=(()=>{class b extends Ve{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(C){this._compareWith=C}writeValue(C){let Z;if(this.value=C,Array.isArray(C)){const de=C.map(tt=>this._getOptionId(tt));Z=(tt,pt)=>{tt._setSelected(de.indexOf(pt.toString())>-1)}}else Z=(de,tt)=>{de._setSelected(!1)};this._optionMap.forEach(Z)}registerOnChange(C){this.onChange=Z=>{const de=[],tt=Z.selectedOptions;if(void 0!==tt){const pt=tt;for(let ln=0;ln<pt.length;ln++){const dr=this._getOptionValue(pt[ln].value);de.push(dr)}}else{const pt=Z.options;for(let ln=0;ln<pt.length;ln++){const sr=pt[ln];if(sr.selected){const dr=this._getOptionValue(sr.value);de.push(dr)}}}this.value=de,C(de)}}_registerOption(C){const Z=(this._idCounter++).toString();return this._optionMap.set(Z,C),Z}_getOptionId(C){for(const Z of this._optionMap.keys())if(this._compareWith(this._optionMap.get(Z)._value,C))return Z;return null}_getOptionValue(C){const Z=function wr(b){return b.split(":")[0]}(C);return this._optionMap.has(Z)?this._optionMap.get(Z)._value:C}static#e=this.\u0275fac=function(){let C;return function(de){return(C||(C=h.n5z(b)))(de||b)}}();static#t=this.\u0275dir=h.lG2({type:b,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(Z,de){1&Z&&h.NdJ("change",function(pt){return de.onChange(pt.target)})("blur",function(){return de.onTouched()})},inputs:{compareWith:"compareWith"},features:[h._Bn([zi]),h.qOj]})}return b})(),_i=(()=>{class b{constructor(C,Z,de){this._element=C,this._renderer=Z,this._select=de,this._select&&(this.id=this._select._registerOption(this))}set ngValue(C){null!=this._select&&(this._value=C,this._setElementValue(Lr(this.id,C)),this._select.writeValue(this._select.value))}set value(C){this._select?(this._value=C,this._setElementValue(Lr(this.id,C)),this._select.writeValue(this._select.value)):this._setElementValue(C)}_setElementValue(C){this._renderer.setProperty(this._element.nativeElement,"value",C)}_setSelected(C){this._renderer.setProperty(this._element.nativeElement,"selected",C)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static#e=this.\u0275fac=function(Z){return new(Z||b)(h.Y36(h.SBq),h.Y36(h.Qsj),h.Y36(Or,9))};static#t=this.\u0275dir=h.lG2({type:b,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}return b})(),Fi=(()=>{class b{constructor(){this._validator=Ae}ngOnChanges(C){if(this.inputName in C){const Z=this.normalizeInput(C[this.inputName].currentValue);this._enabled=this.enabled(Z),this._validator=this._enabled?this.createValidator(Z):Ae,this._onChange&&this._onChange()}}validate(C){return this._validator(C)}registerOnValidatorChange(C){this._onChange=C}enabled(C){return null!=C}static#e=this.\u0275fac=function(Z){return new(Z||b)};static#t=this.\u0275dir=h.lG2({type:b,features:[h.TTD]})}return b})();const Zi={provide:Ie,useExisting:(0,h.Gpc)(()=>Li),multi:!0};let Li=(()=>{class b extends Fi{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=h.VuI,this.createValidator=C=>Gt}enabled(C){return C}static#e=this.\u0275fac=function(){let C;return function(de){return(C||(C=h.n5z(b)))(de||b)}}();static#t=this.\u0275dir=h.lG2({type:b,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(Z,de){2&Z&&h.uIk("required",de._enabled?"":null)},inputs:{required:"required"},features:[h._Bn([Zi]),h.qOj]})}return b})(),Cs=(()=>{class b{static#e=this.\u0275fac=function(Z){return new(Z||b)};static#t=this.\u0275mod=h.oAB({type:b});static#n=this.\u0275inj=h.cJS({imports:[Nr]})}return b})();class Fo extends at{constructor(O,C,Z){super(Ee(C),z(Z,C)),this.controls=O,this._initObservables(),this._setUpdateStrategy(C),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(O){return this.controls[this._adjustIndex(O)]}push(O,C={}){this.controls.push(O),this._registerControl(O),this.updateValueAndValidity({emitEvent:C.emitEvent}),this._onCollectionChange()}insert(O,C,Z={}){this.controls.splice(O,0,C),this._registerControl(C),this.updateValueAndValidity({emitEvent:Z.emitEvent})}removeAt(O,C={}){let Z=this._adjustIndex(O);Z<0&&(Z=0),this.controls[Z]&&this.controls[Z]._registerOnCollectionChange(()=>{}),this.controls.splice(Z,1),this.updateValueAndValidity({emitEvent:C.emitEvent})}setControl(O,C,Z={}){let de=this._adjustIndex(O);de<0&&(de=0),this.controls[de]&&this.controls[de]._registerOnCollectionChange(()=>{}),this.controls.splice(de,1),C&&(this.controls.splice(de,0,C),this._registerControl(C)),this.updateValueAndValidity({emitEvent:Z.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(O,C={}){Ne(this,0,O),O.forEach((Z,de)=>{oe(this,!1,de),this.at(de).setValue(Z,{onlySelf:!0,emitEvent:C.emitEvent})}),this.updateValueAndValidity(C)}patchValue(O,C={}){null!=O&&(O.forEach((Z,de)=>{this.at(de)&&this.at(de).patchValue(Z,{onlySelf:!0,emitEvent:C.emitEvent})}),this.updateValueAndValidity(C))}reset(O=[],C={}){this._forEachChild((Z,de)=>{Z.reset(O[de],{onlySelf:!0,emitEvent:C.emitEvent})}),this._updatePristine(C),this._updateTouched(C),this.updateValueAndValidity(C)}getRawValue(){return this.controls.map(O=>O.getRawValue())}clear(O={}){this.controls.length<1||(this._forEachChild(C=>C._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:O.emitEvent}))}_adjustIndex(O){return O<0?O+this.length:O}_syncPendingControls(){let O=this.controls.reduce((C,Z)=>!!Z._syncPendingControls()||C,!1);return O&&this.updateValueAndValidity({onlySelf:!0}),O}_forEachChild(O){this.controls.forEach((C,Z)=>{O(C,Z)})}_updateValue(){this.value=this.controls.filter(O=>O.enabled||this.disabled).map(O=>O.value)}_anyControls(O){return this.controls.some(C=>C.enabled&&O(C))}_setUpControls(){this._forEachChild(O=>this._registerControl(O))}_allControlsDisabled(){for(const O of this.controls)if(O.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(O){O.setParent(this),O._registerOnCollectionChange(this._onCollectionChange)}_find(O){return this.at(O)??null}}function Ci(b){return!!b&&(void 0!==b.asyncValidators||void 0!==b.validators||void 0!==b.updateOn)}let Ga=(()=>{class b{constructor(){this.useNonNullable=!1}get nonNullable(){const C=new b;return C.useNonNullable=!0,C}group(C,Z=null){const de=this._reduceControls(C);let tt={};return Ci(Z)?tt=Z:null!==Z&&(tt.validators=Z.validator,tt.asyncValidators=Z.asyncValidator),new vt(de,tt)}record(C,Z=null){const de=this._reduceControls(C);return new Kt(de,Z)}control(C,Z,de){let tt={};return this.useNonNullable?(Ci(Z)?tt=Z:(tt.validators=Z,tt.asyncValidators=de),new gi(C,{...tt,nonNullable:!0})):new gi(C,Z,de)}array(C,Z,de){const tt=C.map(pt=>this._createControl(pt));return new Fo(tt,Z,de)}_reduceControls(C){const Z={};return Object.keys(C).forEach(de=>{Z[de]=this._createControl(C[de])}),Z}_createControl(C){return C instanceof gi||C instanceof at?C:Array.isArray(C)?this.control(C[0],C.length>1?C[1]:null,C.length>2?C[2]:null):this.control(C)}static#e=this.\u0275fac=function(Z){return new(Z||b)};static#t=this.\u0275prov=h.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"})}return b})(),H=(()=>{class b{static withConfig(C){return{ngModule:b,providers:[{provide:dn,useValue:C.callSetDisabledState??ni}]}}static#e=this.\u0275fac=function(Z){return new(Z||b)};static#t=this.\u0275mod=h.oAB({type:b});static#n=this.\u0275inj=h.cJS({imports:[Cs]})}return b})(),ae=(()=>{class b{static withConfig(C){return{ngModule:b,providers:[{provide:Bn,useValue:C.warnOnNgModelWithFormControl??"always"},{provide:dn,useValue:C.callSetDisabledState??ni}]}}static#e=this.\u0275fac=function(Z){return new(Z||b)};static#t=this.\u0275mod=h.oAB({type:b});static#n=this.\u0275inj=h.cJS({imports:[Cs]})}return b})()},6593:(Ot,Le,U)=>{U.d(Le,{Dx:()=>Zn,H7:()=>br,b2:()=>xt,q6:()=>Wt,se:()=>Te});var h=U(5879),W=U(6814);class K extends W.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class ve extends K{static makeCurrent(){(0,W.HT)(new ve)}onAndCancel(z,F,k){return z.addEventListener(F,k),()=>{z.removeEventListener(F,k)}}dispatchEvent(z,F){z.dispatchEvent(F)}remove(z){z.parentNode&&z.parentNode.removeChild(z)}createElement(z,F){return(F=F||this.getDefaultDocument()).createElement(z)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(z){return z.nodeType===Node.ELEMENT_NODE}isShadowRoot(z){return z instanceof DocumentFragment}getGlobalEventTarget(z,F){return"window"===F?window:"document"===F?z:"body"===F?z.body:null}getBaseHref(z){const F=function we(){return me=me||document.querySelector("base"),me?me.getAttribute("href"):null}();return null==F?null:function ye(re){Ce=Ce||document.createElement("a"),Ce.setAttribute("href",re);const z=Ce.pathname;return"/"===z.charAt(0)?z:`/${z}`}(F)}resetBaseElement(){me=null}getUserAgent(){return window.navigator.userAgent}getCookie(z){return(0,W.Mx)(document.cookie,z)}}let Ce,me=null,X=(()=>{class re{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(k){return new(k||re)};static#t=this.\u0275prov=h.Yz7({token:re,factory:re.\u0275fac})}return re})();const ie=new h.OlP("EventManagerPlugins");let pe=(()=>{class re{constructor(F,k){this._zone=k,this._eventNameToPlugin=new Map,F.forEach(oe=>{oe.manager=this}),this._plugins=F.slice().reverse()}addEventListener(F,k,oe){return this._findPluginFor(k).addEventListener(F,k,oe)}getZone(){return this._zone}_findPluginFor(F){let k=this._eventNameToPlugin.get(F);if(k)return k;if(k=this._plugins.find(Ne=>Ne.supports(F)),!k)throw new h.vHH(5101,!1);return this._eventNameToPlugin.set(F,k),k}static#e=this.\u0275fac=function(k){return new(k||re)(h.LFG(ie),h.LFG(h.R0b))};static#t=this.\u0275prov=h.Yz7({token:re,factory:re.\u0275fac})}return re})();class ze{constructor(z){this._doc=z}}const Ve="ng-app-id";let ot=(()=>{class re{constructor(F,k,oe,Ne={}){this.doc=F,this.appId=k,this.nonce=oe,this.platformId=Ne,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=(0,W.PM)(Ne),this.resetHostNodes()}addStyles(F){for(const k of F)1===this.changeUsageCount(k,1)&&this.onStyleAdded(k)}removeStyles(F){for(const k of F)this.changeUsageCount(k,-1)<=0&&this.onStyleRemoved(k)}ngOnDestroy(){const F=this.styleNodesInDOM;F&&(F.forEach(k=>k.remove()),F.clear());for(const k of this.getAllStyles())this.onStyleRemoved(k);this.resetHostNodes()}addHost(F){this.hostNodes.add(F);for(const k of this.getAllStyles())this.addStyleToHost(F,k)}removeHost(F){this.hostNodes.delete(F)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(F){for(const k of this.hostNodes)this.addStyleToHost(k,F)}onStyleRemoved(F){const k=this.styleRef;k.get(F)?.elements?.forEach(oe=>oe.remove()),k.delete(F)}collectServerRenderedStyles(){const F=this.doc.head?.querySelectorAll(`style[${Ve}="${this.appId}"]`);if(F?.length){const k=new Map;return F.forEach(oe=>{null!=oe.textContent&&k.set(oe.textContent,oe)}),k}return null}changeUsageCount(F,k){const oe=this.styleRef;if(oe.has(F)){const Ne=oe.get(F);return Ne.usage+=k,Ne.usage}return oe.set(F,{usage:k,elements:[]}),k}getStyleElement(F,k){const oe=this.styleNodesInDOM,Ne=oe?.get(k);if(Ne?.parentNode===F)return oe.delete(k),Ne.removeAttribute(Ve),Ne;{const at=this.doc.createElement("style");return this.nonce&&at.setAttribute("nonce",this.nonce),at.textContent=k,this.platformIsServer&&at.setAttribute(Ve,this.appId),at}}addStyleToHost(F,k){const oe=this.getStyleElement(F,k);F.appendChild(oe);const Ne=this.styleRef,at=Ne.get(k)?.elements;at?at.push(oe):Ne.set(k,{elements:[oe],usage:1})}resetHostNodes(){const F=this.hostNodes;F.clear(),F.add(this.doc.head)}static#e=this.\u0275fac=function(k){return new(k||re)(h.LFG(W.K0),h.LFG(h.AFp),h.LFG(h.Ojb,8),h.LFG(h.Lbi))};static#t=this.\u0275prov=h.Yz7({token:re,factory:re.\u0275fac})}return re})();const Qe={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},mt=/%COMP%/g,Be=new h.OlP("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function Je(re,z){return z.map(F=>F.replace(mt,re))}let Te=(()=>{class re{constructor(F,k,oe,Ne,at,vt,Ft,At=null){this.eventManager=F,this.sharedStylesHost=k,this.appId=oe,this.removeStylesOnCompDestroy=Ne,this.doc=at,this.platformId=vt,this.ngZone=Ft,this.nonce=At,this.rendererByCompId=new Map,this.platformIsServer=(0,W.PM)(vt),this.defaultRenderer=new Oe(F,at,Ft,this.platformIsServer)}createRenderer(F,k){if(!F||!k)return this.defaultRenderer;this.platformIsServer&&k.encapsulation===h.ifc.ShadowDom&&(k={...k,encapsulation:h.ifc.Emulated});const oe=this.getOrCreateRenderer(F,k);return oe instanceof Mt?oe.applyToHost(F):oe instanceof Pn&&oe.applyStyles(),oe}getOrCreateRenderer(F,k){const oe=this.rendererByCompId;let Ne=oe.get(k.id);if(!Ne){const at=this.doc,vt=this.ngZone,Ft=this.eventManager,At=this.sharedStylesHost,Kt=this.removeStylesOnCompDestroy,Gn=this.platformIsServer;switch(k.encapsulation){case h.ifc.Emulated:Ne=new Mt(Ft,At,k,this.appId,Kt,at,vt,Gn);break;case h.ifc.ShadowDom:return new Jt(Ft,At,F,k,at,vt,this.nonce,Gn);default:Ne=new Pn(Ft,At,k,Kt,at,vt,Gn)}oe.set(k.id,Ne)}return Ne}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(k){return new(k||re)(h.LFG(pe),h.LFG(ot),h.LFG(h.AFp),h.LFG(Be),h.LFG(W.K0),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(h.Ojb))};static#t=this.\u0275prov=h.Yz7({token:re,factory:re.\u0275fac})}return re})();class Oe{constructor(z,F,k,oe){this.eventManager=z,this.doc=F,this.ngZone=k,this.platformIsServer=oe,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(z,F){return F?this.doc.createElementNS(Qe[F]||F,z):this.doc.createElement(z)}createComment(z){return this.doc.createComment(z)}createText(z){return this.doc.createTextNode(z)}appendChild(z,F){(Gt(z)?z.content:z).appendChild(F)}insertBefore(z,F,k){z&&(Gt(z)?z.content:z).insertBefore(F,k)}removeChild(z,F){z&&z.removeChild(F)}selectRootElement(z,F){let k="string"==typeof z?this.doc.querySelector(z):z;if(!k)throw new h.vHH(-5104,!1);return F||(k.textContent=""),k}parentNode(z){return z.parentNode}nextSibling(z){return z.nextSibling}setAttribute(z,F,k,oe){if(oe){F=oe+":"+F;const Ne=Qe[oe];Ne?z.setAttributeNS(Ne,F,k):z.setAttribute(F,k)}else z.setAttribute(F,k)}removeAttribute(z,F,k){if(k){const oe=Qe[k];oe?z.removeAttributeNS(oe,F):z.removeAttribute(`${k}:${F}`)}else z.removeAttribute(F)}addClass(z,F){z.classList.add(F)}removeClass(z,F){z.classList.remove(F)}setStyle(z,F,k,oe){oe&(h.JOm.DashCase|h.JOm.Important)?z.style.setProperty(F,k,oe&h.JOm.Important?"important":""):z.style[F]=k}removeStyle(z,F,k){k&h.JOm.DashCase?z.style.removeProperty(F):z.style[F]=""}setProperty(z,F,k){z[F]=k}setValue(z,F){z.nodeValue=F}listen(z,F,k){if("string"==typeof z&&!(z=(0,W.q)().getGlobalEventTarget(this.doc,z)))throw new Error(`Unsupported event target ${z} for event ${F}`);return this.eventManager.addEventListener(z,F,this.decoratePreventDefault(k))}decoratePreventDefault(z){return F=>{if("__ngUnwrap__"===F)return z;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>z(F)):z(F))&&F.preventDefault()}}}function Gt(re){return"TEMPLATE"===re.tagName&&void 0!==re.content}class Jt extends Oe{constructor(z,F,k,oe,Ne,at,vt,Ft){super(z,Ne,at,Ft),this.sharedStylesHost=F,this.hostEl=k,this.shadowRoot=k.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const At=Je(oe.id,oe.styles);for(const Kt of At){const Gn=document.createElement("style");vt&&Gn.setAttribute("nonce",vt),Gn.textContent=Kt,this.shadowRoot.appendChild(Gn)}}nodeOrShadowRoot(z){return z===this.hostEl?this.shadowRoot:z}appendChild(z,F){return super.appendChild(this.nodeOrShadowRoot(z),F)}insertBefore(z,F,k){return super.insertBefore(this.nodeOrShadowRoot(z),F,k)}removeChild(z,F){return super.removeChild(this.nodeOrShadowRoot(z),F)}parentNode(z){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(z)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Pn extends Oe{constructor(z,F,k,oe,Ne,at,vt,Ft){super(z,Ne,at,vt),this.sharedStylesHost=F,this.removeStylesOnCompDestroy=oe,this.styles=Ft?Je(Ft,k.styles):k.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class Mt extends Pn{constructor(z,F,k,oe,Ne,at,vt,Ft){const At=oe+"-"+k.id;super(z,F,k,Ne,at,vt,Ft,At),this.contentAttr=function be(re){return"_ngcontent-%COMP%".replace(mt,re)}(At),this.hostAttr=function Ie(re){return"_nghost-%COMP%".replace(mt,re)}(At)}applyToHost(z){this.applyStyles(),this.setAttribute(z,this.hostAttr,"")}createElement(z,F){const k=super.createElement(z,F);return super.setAttribute(k,this.contentAttr,""),k}}let kt=(()=>{class re extends ze{constructor(F){super(F)}supports(F){return!0}addEventListener(F,k,oe){return F.addEventListener(k,oe,!1),()=>this.removeEventListener(F,k,oe)}removeEventListener(F,k,oe){return F.removeEventListener(k,oe)}static#e=this.\u0275fac=function(k){return new(k||re)(h.LFG(W.K0))};static#t=this.\u0275prov=h.Yz7({token:re,factory:re.\u0275fac})}return re})();const Ct=["alt","control","meta","shift"],Ae={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Me={alt:re=>re.altKey,control:re=>re.ctrlKey,meta:re=>re.metaKey,shift:re=>re.shiftKey};let He=(()=>{class re extends ze{constructor(F){super(F)}supports(F){return null!=re.parseEventName(F)}addEventListener(F,k,oe){const Ne=re.parseEventName(k),at=re.eventCallback(Ne.fullKey,oe,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,W.q)().onAndCancel(F,Ne.domEventName,at))}static parseEventName(F){const k=F.toLowerCase().split("."),oe=k.shift();if(0===k.length||"keydown"!==oe&&"keyup"!==oe)return null;const Ne=re._normalizeKey(k.pop());let at="",vt=k.indexOf("code");if(vt>-1&&(k.splice(vt,1),at="code."),Ct.forEach(At=>{const Kt=k.indexOf(At);Kt>-1&&(k.splice(Kt,1),at+=At+".")}),at+=Ne,0!=k.length||0===Ne.length)return null;const Ft={};return Ft.domEventName=oe,Ft.fullKey=at,Ft}static matchEventFullKeyCode(F,k){let oe=Ae[F.key]||F.key,Ne="";return k.indexOf("code.")>-1&&(oe=F.code,Ne="code."),!(null==oe||!oe)&&(oe=oe.toLowerCase()," "===oe?oe="space":"."===oe&&(oe="dot"),Ct.forEach(at=>{at!==oe&&(0,Me[at])(F)&&(Ne+=at+".")}),Ne+=oe,Ne===k)}static eventCallback(F,k,oe){return Ne=>{re.matchEventFullKeyCode(Ne,F)&&oe.runGuarded(()=>k(Ne))}}static _normalizeKey(F){return"esc"===F?"escape":F}static#e=this.\u0275fac=function(k){return new(k||re)(h.LFG(W.K0))};static#t=this.\u0275prov=h.Yz7({token:re,factory:re.\u0275fac})}return re})();const Wt=(0,h.eFA)(h._c5,"browser",[{provide:h.Lbi,useValue:W.bD},{provide:h.g9A,useValue:function It(){ve.makeCurrent()},multi:!0},{provide:W.K0,useFactory:function $t(){return(0,h.RDi)(document),document},deps:[]}]),ar=new h.OlP(""),Hn=[{provide:h.rWj,useClass:class De{addToWindow(z){h.dqk.getAngularTestability=(k,oe=!0)=>{const Ne=z.findTestabilityInTree(k,oe);if(null==Ne)throw new h.vHH(5103,!1);return Ne},h.dqk.getAllAngularTestabilities=()=>z.getAllTestabilities(),h.dqk.getAllAngularRootElements=()=>z.getAllRootElements(),h.dqk.frameworkStabilizers||(h.dqk.frameworkStabilizers=[]),h.dqk.frameworkStabilizers.push(k=>{const oe=h.dqk.getAllAngularTestabilities();let Ne=oe.length,at=!1;const vt=function(Ft){at=at||Ft,Ne--,0==Ne&&k(at)};oe.forEach(Ft=>{Ft.whenStable(vt)})})}findTestabilityInTree(z,F,k){return null==F?null:z.getTestability(F)??(k?(0,W.q)().isShadowRoot(F)?this.findTestabilityInTree(z,F.host,!0):this.findTestabilityInTree(z,F.parentElement,!0):null)}},deps:[]},{provide:h.lri,useClass:h.dDg,deps:[h.R0b,h.eoX,h.rWj]},{provide:h.dDg,useClass:h.dDg,deps:[h.R0b,h.eoX,h.rWj]}],Ln=[{provide:h.zSh,useValue:"root"},{provide:h.qLn,useFactory:function $n(){return new h.qLn},deps:[]},{provide:ie,useClass:kt,multi:!0,deps:[W.K0,h.R0b,h.Lbi]},{provide:ie,useClass:He,multi:!0,deps:[W.K0]},Te,ot,pe,{provide:h.FYo,useExisting:Te},{provide:W.JF,useClass:X,deps:[]},[]];let xt=(()=>{class re{constructor(F){}static withServerTransition(F){return{ngModule:re,providers:[{provide:h.AFp,useValue:F.appId}]}}static#e=this.\u0275fac=function(k){return new(k||re)(h.LFG(ar,12))};static#t=this.\u0275mod=h.oAB({type:re});static#n=this.\u0275inj=h.cJS({providers:[...Ln,...Hn],imports:[W.ez,h.hGG]})}return re})(),Zn=(()=>{class re{constructor(F){this._doc=F}getTitle(){return this._doc.title}setTitle(F){this._doc.title=F||""}static#e=this.\u0275fac=function(k){return new(k||re)(h.LFG(W.K0))};static#t=this.\u0275prov=h.Yz7({token:re,factory:function(k){let oe=null;return oe=k?new k:function Vn(){return new Zn((0,h.LFG)(W.K0))}(),oe},providedIn:"root"})}return re})();typeof window<"u"&&window;let br=(()=>{class re{static#e=this.\u0275fac=function(k){return new(k||re)};static#t=this.\u0275prov=h.Yz7({token:re,factory:function(k){let oe=null;return oe=k?new(k||re):h.LFG(Nn),oe},providedIn:"root"})}return re})(),Nn=(()=>{class re extends br{constructor(F){super(),this._doc=F}sanitize(F,k){if(null==k)return null;switch(F){case h.q3G.NONE:return k;case h.q3G.HTML:return(0,h.qzn)(k,"HTML")?(0,h.z3N)(k):(0,h.EiD)(this._doc,String(k)).toString();case h.q3G.STYLE:return(0,h.qzn)(k,"Style")?(0,h.z3N)(k):k;case h.q3G.SCRIPT:if((0,h.qzn)(k,"Script"))return(0,h.z3N)(k);throw new h.vHH(5200,!1);case h.q3G.URL:return(0,h.qzn)(k,"URL")?(0,h.z3N)(k):(0,h.mCW)(String(k));case h.q3G.RESOURCE_URL:if((0,h.qzn)(k,"ResourceURL"))return(0,h.z3N)(k);throw new h.vHH(5201,!1);default:throw new h.vHH(5202,!1)}}bypassSecurityTrustHtml(F){return(0,h.JVY)(F)}bypassSecurityTrustStyle(F){return(0,h.L6k)(F)}bypassSecurityTrustScript(F){return(0,h.eBb)(F)}bypassSecurityTrustUrl(F){return(0,h.LAX)(F)}bypassSecurityTrustResourceUrl(F){return(0,h.pB0)(F)}static#e=this.\u0275fac=function(k){return new(k||re)(h.LFG(W.K0))};static#t=this.\u0275prov=h.Yz7({token:re,factory:function(k){let oe=null;return oe=k?new k:function Un(re){return new Nn(re.get(W.K0))}(h.LFG(h.zs3)),oe},providedIn:"root"})}return re})()},7045:(Ot,Le,U)=>{U.d(Le,{F0:()=>Rs,rH:()=>$u,Bz:()=>Gu,lC:()=>mn});var h=U(5879),W=U(5592),K=U(4674),me=U(2459),we=U(2096),Ce=U(5619),ye=U(7453),De=U(2737),X=U(7400),ie=U(4564),pe=U(2714),ze=U(8251),Ve=U(7103);function ot(...v){const R=(0,ie.yG)(v),I=(0,ie.jO)(v),{args:M,keys:B}=(0,ye.D)(v);if(0===M.length)return(0,me.D)([],R);const ne=new W.y(function Qe(v,R,I=De.y){return M=>{mt(R,()=>{const{length:B}=v,ne=new Array(B);let fe=B,Ke=B;for(let We=0;We<B;We++)mt(R,()=>{const Bt=(0,me.D)(v[We],R);let jn=!1;Bt.subscribe((0,ze.x)(M,Ii=>{ne[We]=Ii,jn||(jn=!0,Ke--),Ke||M.next(I(ne.slice()))},()=>{--fe||M.complete()}))},M)},M)}}(M,R,B?fe=>(0,pe.n)(B,fe):De.y));return I?ne.pipe((0,X.Z)(I)):ne}function mt(v,R,I){v?(0,Ve.f)(I,v,R):R()}var nt=U(6973),Vt=U(5211),ut=U(4829);function ce(v){return new W.y(R=>{(0,ut.Xf)(v()).subscribe(R)})}var Be=U(8407);function be(v,R){const I=(0,K.m)(v)?v:()=>v,M=B=>B.error(I());return new W.y(R?B=>R.schedule(M,0,B):M)}var Ie=U(6232),Je=U(7394),Te=U(9360);function Oe(){return(0,Te.e)((v,R)=>{let I=null;v._refCount++;const M=(0,ze.x)(R,void 0,void 0,void 0,()=>{if(!v||v._refCount<=0||0<--v._refCount)return void(I=null);const B=v._connection,ne=I;I=null,B&&(!ne||B===ne)&&B.unsubscribe(),R.unsubscribe()});v.subscribe(M),M.closed||(I=v.connect())})}class et extends W.y{constructor(R,I){super(),this.source=R,this.subjectFactory=I,this._subject=null,this._refCount=0,this._connection=null,(0,Te.A)(R)&&(this.lift=R.lift)}_subscribe(R){return this.getSubject().subscribe(R)}getSubject(){const R=this._subject;return(!R||R.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:R}=this;this._subject=this._connection=null,R?.unsubscribe()}connect(){let R=this._connection;if(!R){R=this._connection=new Je.w0;const I=this.getSubject();R.add(this.source.subscribe((0,ze.x)(I,void 0,()=>{this._teardown(),I.complete()},M=>{this._teardown(),I.error(M)},()=>this._teardown()))),R.closed&&(this._connection=null,R=Je.w0.EMPTY)}return R}refCount(){return Oe()(this)}}var ft=U(8645),Gt=U(6814),Jt=U(7398),Pn=U(4664),Mt=U(8180),kt=U(7921),Ct=U(2181),Ae=U(1631),Me=U(1374),He=U(6328),Ue=U(9397);function Ge(v){return(0,Te.e)((R,I)=>{let ne,M=null,B=!1;M=R.subscribe((0,ze.x)(I,void 0,void 0,fe=>{ne=(0,ut.Xf)(v(fe,Ge(v)(R))),M?(M.unsubscribe(),M=null,ne.subscribe(I)):B=!0})),B&&(M.unsubscribe(),M=null,ne.subscribe(I))})}var rt=U(6699),Et=U(3572);function It(v){return v<=0?()=>Ie.E:(0,Te.e)((R,I)=>{let M=[];R.subscribe((0,ze.x)(I,B=>{M.push(B),v<M.length&&M.shift()},()=>{for(const B of M)I.next(B);I.complete()},void 0,()=>{M=null}))})}var $n=U(3026),Wt=U(4716),ar=U(9773),Hn=U(7537),Ln=U(6593);const xt="primary",zn=Symbol("RouteTitle");class Sn{constructor(R){this.params=R||{}}has(R){return Object.prototype.hasOwnProperty.call(this.params,R)}get(R){if(this.has(R)){const I=this.params[R];return Array.isArray(I)?I[0]:I}return null}getAll(R){if(this.has(R)){const I=this.params[R];return Array.isArray(I)?I:[I]}return[]}get keys(){return Object.keys(this.params)}}function Ir(v){return new Sn(v)}function Vn(v,R,I){const M=I.path.split("/");if(M.length>v.length||"full"===I.pathMatch&&(R.hasChildren()||M.length<v.length))return null;const B={};for(let ne=0;ne<M.length;ne++){const fe=M[ne],Ke=v[ne];if(fe.startsWith(":"))B[fe.substring(1)]=Ke;else if(fe!==Ke.path)return null}return{consumed:v.slice(0,M.length),posParams:B}}function xn(v,R){const I=v?Object.keys(v):void 0,M=R?Object.keys(R):void 0;if(!I||!M||I.length!=M.length)return!1;let B;for(let ne=0;ne<I.length;ne++)if(B=I[ne],!Yr(v[B],R[B]))return!1;return!0}function Yr(v,R){if(Array.isArray(v)&&Array.isArray(R)){if(v.length!==R.length)return!1;const I=[...v].sort(),M=[...R].sort();return I.every((B,ne)=>M[ne]===B)}return v===R}function Zt(v){return v.length>0?v[v.length-1]:null}function un(v){return function ve(v){return!!v&&(v instanceof W.y||(0,K.m)(v.lift)&&(0,K.m)(v.subscribe))}(v)?v:(0,h.QGY)(v)?(0,me.D)(Promise.resolve(v)):(0,we.of)(v)}const an={exact:function Mn(v,R,I){if(!Un(v.segments,R.segments)||!Ri(v.segments,R.segments,I)||v.numberOfChildren!==R.numberOfChildren)return!1;for(const M in R.children)if(!v.children[M]||!Mn(v.children[M],R.children[M],I))return!1;return!0},subset:ns},Kn={exact:function ei(v,R){return xn(v,R)},subset:function Cr(v,R){return Object.keys(R).length<=Object.keys(v).length&&Object.keys(R).every(I=>Yr(v[I],R[I]))},ignored:()=>!0};function Fr(v,R,I){return an[I.paths](v.root,R.root,I.matrixParams)&&Kn[I.queryParams](v.queryParams,R.queryParams)&&!("exact"===I.fragment&&v.fragment!==R.fragment)}function ns(v,R,I){return Ht(v,R,R.segments,I)}function Ht(v,R,I,M){if(v.segments.length>I.length){const B=v.segments.slice(0,I.length);return!(!Un(B,I)||R.hasChildren()||!Ri(B,I,M))}if(v.segments.length===I.length){if(!Un(v.segments,I)||!Ri(v.segments,I,M))return!1;for(const B in R.children)if(!v.children[B]||!ns(v.children[B],R.children[B],M))return!1;return!0}{const B=I.slice(0,v.segments.length),ne=I.slice(v.segments.length);return!!(Un(v.segments,B)&&Ri(v.segments,B,M)&&v.children[xt])&&Ht(v.children[xt],R,ne,M)}}function Ri(v,R,I){return R.every((M,B)=>Kn[I](v[B].parameters,M.parameters))}class Rn{constructor(R=new qt([],{}),I={},M=null){this.root=R,this.queryParams=I,this.fragment=M}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ir(this.queryParams)),this._queryParamMap}toString(){return ti.serialize(this)}}class qt{constructor(R,I){this.segments=R,this.children=I,this.parent=null,Object.values(I).forEach(M=>M.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Sr(this)}}class Xn{constructor(R,I){this.path=R,this.parameters=I}get parameterMap(){return this._parameterMap||(this._parameterMap=Ir(this.parameters)),this._parameterMap}toString(){return k(this)}}function Un(v,R){return v.length===R.length&&v.every((I,M)=>I.path===R[M].path)}let Ur=(()=>{class v{static#e=this.\u0275fac=function(M){return new(M||v)};static#t=this.\u0275prov=h.Yz7({token:v,factory:function(){return new Pi},providedIn:"root"})}return v})();class Pi{parse(R){const I=new ws(R);return new Rn(I.parseRootSegment(),I.parseQueryParams(),I.parseFragment())}serialize(R){const I=`/${gr(R.root,!0)}`,M=function Ne(v){const R=Object.keys(v).map(I=>{const M=v[I];return Array.isArray(M)?M.map(B=>`${ir(I)}=${ir(B)}`).join("&"):`${ir(I)}=${ir(M)}`}).filter(I=>!!I);return R.length?`?${R.join("&")}`:""}(R.queryParams);return`${I}${M}${"string"==typeof R.fragment?`#${function Ee(v){return encodeURI(v)}(R.fragment)}`:""}`}}const ti=new Pi;function Sr(v){return v.segments.map(R=>k(R)).join("/")}function gr(v,R){if(!v.hasChildren())return Sr(v);if(R){const I=v.children[xt]?gr(v.children[xt],!1):"",M=[];return Object.entries(v.children).forEach(([B,ne])=>{B!==xt&&M.push(`${B}:${gr(ne,!1)}`)}),M.length>0?`${I}(${M.join("//")})`:I}{const I=function Nn(v,R){let I=[];return Object.entries(v.children).forEach(([M,B])=>{M===xt&&(I=I.concat(R(B,M)))}),Object.entries(v.children).forEach(([M,B])=>{M!==xt&&(I=I.concat(R(B,M)))}),I}(v,(M,B)=>B===xt?[gr(v.children[xt],!1)]:[`${B}:${gr(M,!1)}`]);return 1===Object.keys(v.children).length&&null!=v.children[xt]?`${Sr(v)}/${I[0]}`:`${Sr(v)}/(${I.join("//")})`}}function Mr(v){return encodeURIComponent(v).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ir(v){return Mr(v).replace(/%3B/gi,";")}function re(v){return Mr(v).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function z(v){return decodeURIComponent(v)}function F(v){return z(v.replace(/\+/g,"%20"))}function k(v){return`${re(v.path)}${function oe(v){return Object.keys(v).map(R=>`;${re(R)}=${re(v[R])}`).join("")}(v.parameters)}`}const at=/^[^\/()?;#]+/;function vt(v){const R=v.match(at);return R?R[0]:""}const Ft=/^[^\/()?;=#]+/,Kt=/^[^=?&#]+/,dn=/^[^&#]+/;class ws{constructor(R){this.url=R,this.remaining=R}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new qt([],{}):new qt([],this.parseChildren())}parseQueryParams(){const R={};if(this.consumeOptional("?"))do{this.parseQueryParam(R)}while(this.consumeOptional("&"));return R}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const R=[];for(this.peekStartsWith("(")||R.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),R.push(this.parseSegment());let I={};this.peekStartsWith("/(")&&(this.capture("/"),I=this.parseParens(!0));let M={};return this.peekStartsWith("(")&&(M=this.parseParens(!1)),(R.length>0||Object.keys(I).length>0)&&(M[xt]=new qt(R,I)),M}parseSegment(){const R=vt(this.remaining);if(""===R&&this.peekStartsWith(";"))throw new h.vHH(4009,!1);return this.capture(R),new Xn(z(R),this.parseMatrixParams())}parseMatrixParams(){const R={};for(;this.consumeOptional(";");)this.parseParam(R);return R}parseParam(R){const I=function At(v){const R=v.match(Ft);return R?R[0]:""}(this.remaining);if(!I)return;this.capture(I);let M="";if(this.consumeOptional("=")){const B=vt(this.remaining);B&&(M=B,this.capture(M))}R[z(I)]=z(M)}parseQueryParam(R){const I=function Gn(v){const R=v.match(Kt);return R?R[0]:""}(this.remaining);if(!I)return;this.capture(I);let M="";if(this.consumeOptional("=")){const fe=function ni(v){const R=v.match(dn);return R?R[0]:""}(this.remaining);fe&&(M=fe,this.capture(M))}const B=F(I),ne=F(M);if(R.hasOwnProperty(B)){let fe=R[B];Array.isArray(fe)||(fe=[fe],R[B]=fe),fe.push(ne)}else R[B]=ne}parseParens(R){const I={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const M=vt(this.remaining),B=this.remaining[M.length];if("/"!==B&&")"!==B&&";"!==B)throw new h.vHH(4010,!1);let ne;M.indexOf(":")>-1?(ne=M.slice(0,M.indexOf(":")),this.capture(ne),this.capture(":")):R&&(ne=xt);const fe=this.parseChildren();I[ne]=1===Object.keys(fe).length?fe[xt]:new qt([],fe),this.consumeOptional("//")}return I}peekStartsWith(R){return this.remaining.startsWith(R)}consumeOptional(R){return!!this.peekStartsWith(R)&&(this.remaining=this.remaining.substring(R.length),!0)}capture(R){if(!this.consumeOptional(R))throw new h.vHH(4011,!1)}}function ls(v){return v.segments.length>0?new qt([],{[xt]:v}):v}function Di(v){const R={};for(const M of Object.keys(v.children)){const ne=Di(v.children[M]);if(M===xt&&0===ne.segments.length&&ne.hasChildren())for(const[fe,Ke]of Object.entries(ne.children))R[fe]=Ke;else(ne.segments.length>0||ne.hasChildren())&&(R[M]=ne)}return function Kr(v){if(1===v.numberOfChildren&&v.children[xt]){const R=v.children[xt];return new qt(v.segments.concat(R.segments),R.children)}return v}(new qt(v.segments,R))}function ur(v){return v instanceof Rn}function Fe(v){let R;const B=ls(function I(ne){const fe={};for(const We of ne.children){const Bt=I(We);fe[We.outlet]=Bt}const Ke=new qt(ne.url,fe);return ne===v&&(R=Ke),Ke}(v.root));return R??B}function ke(v,R,I,M){let B=v;for(;B.parent;)B=B.parent;if(0===R.length)return _n(B,B,B,I,M);const ne=function kn(v){if("string"==typeof v[0]&&1===v.length&&"/"===v[0])return new yn(!0,0,v);let R=0,I=!1;const M=v.reduce((B,ne,fe)=>{if("object"==typeof ne&&null!=ne){if(ne.outlets){const Ke={};return Object.entries(ne.outlets).forEach(([We,Bt])=>{Ke[We]="string"==typeof Bt?Bt.split("/"):Bt}),[...B,{outlets:Ke}]}if(ne.segmentPath)return[...B,ne.segmentPath]}return"string"!=typeof ne?[...B,ne]:0===fe?(ne.split("/").forEach((Ke,We)=>{0==We&&"."===Ke||(0==We&&""===Ke?I=!0:".."===Ke?R++:""!=Ke&&B.push(Ke))}),B):[...B,ne]},[]);return new yn(I,R,M)}(R);if(ne.toRoot())return _n(B,B,new qt([],{}),I,M);const fe=function ii(v,R,I){if(v.isAbsolute)return new lr(R,!0,0);if(!I)return new lr(R,!1,NaN);if(null===I.parent)return new lr(I,!0,0);const M=st(v.commands[0])?0:1;return function Ts(v,R,I){let M=v,B=R,ne=I;for(;ne>B;){if(ne-=B,M=M.parent,!M)throw new h.vHH(4005,!1);B=M.segments.length}return new lr(M,!1,B-ne)}(I,I.segments.length-1+M,v.numberOfDoubleDots)}(ne,B,v),Ke=fe.processChildren?cs(fe.segmentGroup,fe.index,ne.commands):tr(fe.segmentGroup,fe.index,ne.commands);return _n(B,fe.segmentGroup,Ke,I,M)}function st(v){return"object"==typeof v&&null!=v&&!v.outlets&&!v.segmentPath}function Dt(v){return"object"==typeof v&&null!=v&&v.outlets}function _n(v,R,I,M,B){let fe,ne={};M&&Object.entries(M).forEach(([We,Bt])=>{ne[We]=Array.isArray(Bt)?Bt.map(jn=>`${jn}`):`${Bt}`}),fe=v===R?I:tn(v,R,I);const Ke=ls(Di(fe));return new Rn(Ke,ne,B)}function tn(v,R,I){const M={};return Object.entries(v.children).forEach(([B,ne])=>{M[B]=ne===R?I:tn(ne,R,I)}),new qt(v.segments,M)}class yn{constructor(R,I,M){if(this.isAbsolute=R,this.numberOfDoubleDots=I,this.commands=M,R&&M.length>0&&st(M[0]))throw new h.vHH(4003,!1);const B=M.find(Dt);if(B&&B!==Zt(M))throw new h.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class lr{constructor(R,I,M){this.segmentGroup=R,this.processChildren=I,this.index=M}}function tr(v,R,I){if(v||(v=new qt([],{})),0===v.segments.length&&v.hasChildren())return cs(v,R,I);const M=function Oi(v,R,I){let M=0,B=R;const ne={match:!1,pathIndex:0,commandIndex:0};for(;B<v.segments.length;){if(M>=I.length)return ne;const fe=v.segments[B],Ke=I[M];if(Dt(Ke))break;const We=`${Ke}`,Bt=M<I.length-1?I[M+1]:null;if(B>0&&void 0===We)break;if(We&&Bt&&"object"==typeof Bt&&void 0===Bt.outlets){if(!go(We,Bt,fe))return ne;M+=2}else{if(!go(We,{},fe))return ne;M++}B++}return{match:!0,pathIndex:B,commandIndex:M}}(v,R,I),B=I.slice(M.commandIndex);if(M.match&&M.pathIndex<v.segments.length){const ne=new qt(v.segments.slice(0,M.pathIndex),{});return ne.children[xt]=new qt(v.segments.slice(M.pathIndex),v.children),cs(ne,0,B)}return M.match&&0===B.length?new qt(v.segments,{}):M.match&&!v.hasChildren()?ds(v,R,I):M.match?cs(v,0,B):ds(v,R,I)}function cs(v,R,I){if(0===I.length)return new qt(v.segments,{});{const M=function Mo(v){return Dt(v[0])?v[0].outlets:{[xt]:v}}(I),B={};if(Object.keys(M).some(ne=>ne!==xt)&&v.children[xt]&&1===v.numberOfChildren&&0===v.children[xt].segments.length){const ne=cs(v.children[xt],R,I);return new qt(v.segments,ne.children)}return Object.entries(M).forEach(([ne,fe])=>{"string"==typeof fe&&(fe=[fe]),null!==fe&&(B[ne]=tr(v.children[ne],R,fe))}),Object.entries(v.children).forEach(([ne,fe])=>{void 0===M[ne]&&(B[ne]=fe)}),new qt(v.segments,B)}}function ds(v,R,I){const M=v.segments.slice(0,R);let B=0;for(;B<I.length;){const ne=I[B];if(Dt(ne)){const We=Qs(ne.outlets);return new qt(M,We)}if(0===B&&st(I[0])){M.push(new Xn(v.segments[R].path,Ys(I[0]))),B++;continue}const fe=Dt(ne)?ne.outlets[xt]:`${ne}`,Ke=B<I.length-1?I[B+1]:null;fe&&Ke&&st(Ke)?(M.push(new Xn(fe,Ys(Ke))),B+=2):(M.push(new Xn(fe,{})),B++)}return new qt(M,{})}function Qs(v){const R={};return Object.entries(v).forEach(([I,M])=>{"string"==typeof M&&(M=[M]),null!==M&&(R[I]=ds(new qt([],{}),0,M))}),R}function Ys(v){const R={};return Object.entries(v).forEach(([I,M])=>R[I]=`${M}`),R}function go(v,R,I){return v==I.path&&xn(R,I.parameters)}const Wr="imperative";class cr{constructor(R,I){this.id=R,this.url=I}}class js extends cr{constructor(R,I,M="imperative",B=null){super(R,I),this.type=0,this.navigationTrigger=M,this.restoredState=B}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Js extends cr{constructor(R,I,M){super(R,I),this.urlAfterRedirects=M,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class gi extends cr{constructor(R,I,M,B){super(R,I),this.reason=M,this.code=B,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class $s extends cr{constructor(R,I,M,B){super(R,I),this.reason=M,this.code=B,this.type=16}}class hs extends cr{constructor(R,I,M,B){super(R,I),this.error=M,this.target=B,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class fs extends cr{constructor(R,I,M,B){super(R,I),this.urlAfterRedirects=M,this.state=B,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class xi extends cr{constructor(R,I,M,B){super(R,I),this.urlAfterRedirects=M,this.state=B,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ds extends cr{constructor(R,I,M,B,ne){super(R,I),this.urlAfterRedirects=M,this.state=B,this.shouldActivate=ne,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Jo extends cr{constructor(R,I,M,B){super(R,I),this.urlAfterRedirects=M,this.state=B,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class mo extends cr{constructor(R,I,M,B){super(R,I),this.urlAfterRedirects=M,this.state=B,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ya{constructor(R){this.route=R,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Hs{constructor(R){this.route=R,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class As{constructor(R){this.snapshot=R,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Os{constructor(R){this.snapshot=R,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class _o{constructor(R){this.snapshot=R,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class No{constructor(R){this.snapshot=R,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class xs{constructor(R,I,M){this.routerEvent=R,this.position=I,this.anchor=M,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class zs{}class Wn{constructor(R){this.url=R}}class Nr{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new mi,this.attachRef=null}}let mi=(()=>{class v{constructor(){this.contexts=new Map}onChildOutletCreated(I,M){const B=this.getOrCreateContext(I);B.outlet=M,this.contexts.set(I,B)}onChildOutletDestroyed(I){const M=this.getContext(I);M&&(M.outlet=null,M.attachRef=null)}onOutletDeactivated(){const I=this.contexts;return this.contexts=new Map,I}onOutletReAttached(I){this.contexts=I}getOrCreateContext(I){let M=this.getContext(I);return M||(M=new Nr,this.contexts.set(I,M)),M}getContext(I){return this.contexts.get(I)||null}static#e=this.\u0275fac=function(M){return new(M||v)};static#t=this.\u0275prov=h.Yz7({token:v,factory:v.\u0275fac,providedIn:"root"})}return v})();class ci{constructor(R){this._root=R}get root(){return this._root.value}parent(R){const I=this.pathFromRoot(R);return I.length>1?I[I.length-2]:null}children(R){const I=oo(R,this._root);return I?I.children.map(M=>M.value):[]}firstChild(R){const I=oo(R,this._root);return I&&I.children.length>0?I.children[0].value:null}siblings(R){const I=Xs(R,this._root);return I.length<2?[]:I[I.length-2].children.map(B=>B.value).filter(B=>B!==R)}pathFromRoot(R){return Xs(R,this._root).map(I=>I.value)}}function oo(v,R){if(v===R.value)return R;for(const I of R.children){const M=oo(v,I);if(M)return M}return null}function Xs(v,R){if(v===R.value)return[R];for(const I of R.children){const M=Xs(v,I);if(M.length)return M.unshift(R),M}return[]}class Bn{constructor(R,I){this.value=R,this.children=I}toString(){return`TreeNode(${this.value})`}}function rs(v){const R={};return v&&v.children.forEach(I=>R[I.value.outlet]=I),R}class ps extends ci{constructor(R,I){super(R),this.snapshot=I,Ki(this,R)}toString(){return this.snapshot.toString()}}function vr(v,R){const I=function Lt(v,R){const fe=new gs([],{},{},"",{},xt,R,null,{});return new di("",new Bn(fe,[]))}(0,R),M=new Ce.X([new Xn("",{})]),B=new Ce.X({}),ne=new Ce.X({}),fe=new Ce.X({}),Ke=new Ce.X(""),We=new fn(M,B,fe,Ke,ne,xt,R,I.root);return We.snapshot=I.root,new ps(new Bn(We,[]),I)}class fn{constructor(R,I,M,B,ne,fe,Ke,We){this.urlSubject=R,this.paramsSubject=I,this.queryParamsSubject=M,this.fragmentSubject=B,this.dataSubject=ne,this.outlet=fe,this.component=Ke,this._futureSnapshot=We,this.title=this.dataSubject?.pipe((0,Jt.U)(Bt=>Bt[zn]))??(0,we.of)(void 0),this.url=R,this.params=I,this.queryParams=M,this.fragment=B,this.data=ne}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Jt.U)(R=>Ir(R)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Jt.U)(R=>Ir(R)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Er(v,R="emptyOnly"){const I=v.pathFromRoot;let M=0;if("always"!==R)for(M=I.length-1;M>=1;){const B=I[M],ne=I[M-1];if(B.routeConfig&&""===B.routeConfig.path)M--;else{if(ne.component)break;M--}}return function Hi(v){return v.reduce((R,I)=>({params:{...R.params,...I.params},data:{...R.data,...I.data},resolve:{...I.data,...R.resolve,...I.routeConfig?.data,...I._resolvedData}}),{params:{},data:{},resolve:{}})}(I.slice(M))}class gs{get title(){return this.data?.[zn]}constructor(R,I,M,B,ne,fe,Ke,We,Bt){this.url=R,this.params=I,this.queryParams=M,this.fragment=B,this.data=ne,this.outlet=fe,this.component=Ke,this.routeConfig=We,this._resolve=Bt}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Ir(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ir(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(M=>M.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class di extends ci{constructor(R,I){super(I),this.url=R,Ki(this,I)}toString(){return er(this._root)}}function Ki(v,R){R.value._routerState=v,R.children.forEach(I=>Ki(v,I))}function er(v){const R=v.children.length>0?` { ${v.children.map(er).join(", ")} } `:"";return`${v.value}${R}`}function hi(v){if(v.snapshot){const R=v.snapshot,I=v._futureSnapshot;v.snapshot=I,xn(R.queryParams,I.queryParams)||v.queryParamsSubject.next(I.queryParams),R.fragment!==I.fragment&&v.fragmentSubject.next(I.fragment),xn(R.params,I.params)||v.paramsSubject.next(I.params),function Zn(v,R){if(v.length!==R.length)return!1;for(let I=0;I<v.length;++I)if(!xn(v[I],R[I]))return!1;return!0}(R.url,I.url)||v.urlSubject.next(I.url),xn(R.data,I.data)||v.dataSubject.next(I.data)}else v.snapshot=v._futureSnapshot,v.dataSubject.next(v._futureSnapshot.data)}function is(v,R){const I=xn(v.params,R.params)&&function br(v,R){return Un(v,R)&&v.every((I,M)=>xn(I.parameters,R[M].parameters))}(v.url,R.url);return I&&!(!v.parent!=!R.parent)&&(!v.parent||is(v.parent,R.parent))}let mn=(()=>{class v{constructor(){this.activated=null,this._activatedRoute=null,this.name=xt,this.activateEvents=new h.vpe,this.deactivateEvents=new h.vpe,this.attachEvents=new h.vpe,this.detachEvents=new h.vpe,this.parentContexts=(0,h.f3M)(mi),this.location=(0,h.f3M)(h.s_b),this.changeDetector=(0,h.f3M)(h.sBO),this.environmentInjector=(0,h.f3M)(h.lqb),this.inputBinder=(0,h.f3M)(ks,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(I){if(I.name){const{firstChange:M,previousValue:B}=I.name;if(M)return;this.isTrackedInParentContexts(B)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(B)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(I){return this.parentContexts.getContext(I)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const I=this.parentContexts.getContext(this.name);I?.route&&(I.attachRef?this.attach(I.attachRef,I.route):this.activateWith(I.route,I.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new h.vHH(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new h.vHH(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new h.vHH(4012,!1);this.location.detach();const I=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(I.instance),I}attach(I,M){this.activated=I,this._activatedRoute=M,this.location.insert(I.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(I.instance)}deactivate(){if(this.activated){const I=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(I)}}activateWith(I,M){if(this.isActivated)throw new h.vHH(4013,!1);this._activatedRoute=I;const B=this.location,fe=I.snapshot.component,Ke=this.parentContexts.getOrCreateContext(this.name).children,We=new Ai(I,Ke,B.injector);this.activated=B.createComponent(fe,{index:B.length,injector:We,environmentInjector:M??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(M){return new(M||v)};static#t=this.\u0275dir=h.lG2({type:v,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[h.TTD]})}return v})();class Ai{constructor(R,I,M){this.route=R,this.childContexts=I,this.parent=M}get(R,I){return R===fn?this.route:R===mi?this.childContexts:this.parent.get(R,I)}}const ks=new h.OlP("");let zi=(()=>{class v{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(I){this.unsubscribeFromRouteData(I),this.subscribeToRouteData(I)}unsubscribeFromRouteData(I){this.outletDataSubscriptions.get(I)?.unsubscribe(),this.outletDataSubscriptions.delete(I)}subscribeToRouteData(I){const{activatedRoute:M}=I,B=ot([M.queryParams,M.params,M.data]).pipe((0,Pn.w)(([ne,fe,Ke],We)=>(Ke={...ne,...fe,...Ke},0===We?(0,we.of)(Ke):Promise.resolve(Ke)))).subscribe(ne=>{if(!I.isActivated||!I.activatedComponentRef||I.activatedRoute!==M||null===M.component)return void this.unsubscribeFromRouteData(I);const fe=(0,h.qFp)(M.component);if(fe)for(const{templateName:Ke}of fe.inputs)I.activatedComponentRef.setInput(Ke,ne[Ke]);else this.unsubscribeFromRouteData(I)});this.outletDataSubscriptions.set(I,B)}static#e=this.\u0275fac=function(M){return new(M||v)};static#t=this.\u0275prov=h.Yz7({token:v,factory:v.\u0275fac})}return v})();function wr(v,R,I){if(I&&v.shouldReuseRoute(R.value,I.value.snapshot)){const M=I.value;M._futureSnapshot=R.value;const B=function mr(v,R,I){return R.children.map(M=>{for(const B of I.children)if(v.shouldReuseRoute(M.value,B.value.snapshot))return wr(v,M,B);return wr(v,M)})}(v,R,I);return new Bn(M,B)}{if(v.shouldAttach(R.value)){const ne=v.retrieve(R.value);if(null!==ne){const fe=ne.route;return fe.value._futureSnapshot=R.value,fe.children=R.children.map(Ke=>wr(v,Ke)),fe}}const M=function Or(v){return new fn(new Ce.X(v.url),new Ce.X(v.params),new Ce.X(v.queryParams),new Ce.X(v.fragment),new Ce.X(v.data),v.outlet,v.component,v)}(R.value),B=R.children.map(ne=>wr(v,ne));return new Bn(M,B)}}const _i="ngNavigationCancelingError";function Oo(v,R){const{redirectTo:I,navigationBehaviorOptions:M}=ur(R)?{redirectTo:R,navigationBehaviorOptions:void 0}:R,B=ms(!1,0,R);return B.url=I,B.navigationBehaviorOptions=M,B}function ms(v,R,I){const M=new Error("NavigationCancelingError: "+(v||""));return M[_i]=!0,M.cancellationCode=R,I&&(M.url=I),M}function yi(v){return v&&v[_i]}let Gs=(()=>{class v{static#e=this.\u0275fac=function(M){return new(M||v)};static#t=this.\u0275cmp=h.Xpm({type:v,selectors:[["ng-component"]],standalone:!0,features:[h.jDz],decls:1,vars:0,template:function(M,B){1&M&&h._UZ(0,"router-outlet")},dependencies:[mn],encapsulation:2})}return v})();function yo(v){const R=v.children&&v.children.map(yo),I=R?{...v,children:R}:{...v};return!I.component&&!I.loadComponent&&(R||I.loadChildren)&&I.outlet&&I.outlet!==xt&&(I.component=Gs),I}function vn(v){return v.outlet||xt}function ys(v){if(!v)return null;if(v.routeConfig?._injector)return v.routeConfig._injector;for(let R=v.parent;R;R=R.parent){const I=R.routeConfig;if(I?._loadedInjector)return I._loadedInjector;if(I?._injector)return I._injector}return null}class Ui{constructor(R,I,M,B,ne){this.routeReuseStrategy=R,this.futureState=I,this.currState=M,this.forwardEvent=B,this.inputBindingEnabled=ne}activate(R){const I=this.futureState._root,M=this.currState?this.currState._root:null;this.deactivateChildRoutes(I,M,R),hi(this.futureState.root),this.activateChildRoutes(I,M,R)}deactivateChildRoutes(R,I,M){const B=rs(I);R.children.forEach(ne=>{const fe=ne.value.outlet;this.deactivateRoutes(ne,B[fe],M),delete B[fe]}),Object.values(B).forEach(ne=>{this.deactivateRouteAndItsChildren(ne,M)})}deactivateRoutes(R,I,M){const B=R.value,ne=I?I.value:null;if(B===ne)if(B.component){const fe=M.getContext(B.outlet);fe&&this.deactivateChildRoutes(R,I,fe.children)}else this.deactivateChildRoutes(R,I,M);else ne&&this.deactivateRouteAndItsChildren(I,M)}deactivateRouteAndItsChildren(R,I){R.value.component&&this.routeReuseStrategy.shouldDetach(R.value.snapshot)?this.detachAndStoreRouteSubtree(R,I):this.deactivateRouteAndOutlet(R,I)}detachAndStoreRouteSubtree(R,I){const M=I.getContext(R.value.outlet),B=M&&R.value.component?M.children:I,ne=rs(R);for(const fe of Object.keys(ne))this.deactivateRouteAndItsChildren(ne[fe],B);if(M&&M.outlet){const fe=M.outlet.detach(),Ke=M.children.onOutletDeactivated();this.routeReuseStrategy.store(R.value.snapshot,{componentRef:fe,route:R,contexts:Ke})}}deactivateRouteAndOutlet(R,I){const M=I.getContext(R.value.outlet),B=M&&R.value.component?M.children:I,ne=rs(R);for(const fe of Object.keys(ne))this.deactivateRouteAndItsChildren(ne[fe],B);M&&(M.outlet&&(M.outlet.deactivate(),M.children.onOutletDeactivated()),M.attachRef=null,M.route=null)}activateChildRoutes(R,I,M){const B=rs(I);R.children.forEach(ne=>{this.activateRoutes(ne,B[ne.value.outlet],M),this.forwardEvent(new No(ne.value.snapshot))}),R.children.length&&this.forwardEvent(new Os(R.value.snapshot))}activateRoutes(R,I,M){const B=R.value,ne=I?I.value:null;if(hi(B),B===ne)if(B.component){const fe=M.getOrCreateContext(B.outlet);this.activateChildRoutes(R,I,fe.children)}else this.activateChildRoutes(R,I,M);else if(B.component){const fe=M.getOrCreateContext(B.outlet);if(this.routeReuseStrategy.shouldAttach(B.snapshot)){const Ke=this.routeReuseStrategy.retrieve(B.snapshot);this.routeReuseStrategy.store(B.snapshot,null),fe.children.onOutletReAttached(Ke.contexts),fe.attachRef=Ke.componentRef,fe.route=Ke.route.value,fe.outlet&&fe.outlet.attach(Ke.componentRef,Ke.route.value),hi(Ke.route.value),this.activateChildRoutes(R,null,fe.children)}else{const Ke=ys(B.snapshot);fe.attachRef=null,fe.route=B,fe.injector=Ke,fe.outlet&&fe.outlet.activateWith(B,fe.injector),this.activateChildRoutes(R,null,fe.children)}}else this.activateChildRoutes(R,null,M)}}class ao{constructor(R){this.path=R,this.route=this.path[this.path.length-1]}}class Cs{constructor(R,I){this.component=R,this.route=I}}function Fo(v,R,I){const M=v._root;return Ci(M,R?R._root:null,I,[M.value])}function Bi(v,R){const I=Symbol(),M=R.get(v,I);return M===I?"function"!=typeof v||(0,h.Z0I)(v)?R.get(v):v:M}function Ci(v,R,I,M,B={canDeactivateChecks:[],canActivateChecks:[]}){const ne=rs(R);return v.children.forEach(fe=>{(function Ga(v,R,I,M,B={canDeactivateChecks:[],canActivateChecks:[]}){const ne=v.value,fe=R?R.value:null,Ke=I?I.getContext(v.value.outlet):null;if(fe&&ne.routeConfig===fe.routeConfig){const We=function au(v,R,I){if("function"==typeof I)return I(v,R);switch(I){case"pathParamsChange":return!Un(v.url,R.url);case"pathParamsOrQueryParamsChange":return!Un(v.url,R.url)||!xn(v.queryParams,R.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!is(v,R)||!xn(v.queryParams,R.queryParams);default:return!is(v,R)}}(fe,ne,ne.routeConfig.runGuardsAndResolvers);We?B.canActivateChecks.push(new ao(M)):(ne.data=fe.data,ne._resolvedData=fe._resolvedData),Ci(v,R,ne.component?Ke?Ke.children:null:I,M,B),We&&Ke&&Ke.outlet&&Ke.outlet.isActivated&&B.canDeactivateChecks.push(new Cs(Ke.outlet.component,fe))}else fe&&Lo(R,Ke,B),B.canActivateChecks.push(new ao(M)),Ci(v,null,ne.component?Ke?Ke.children:null:I,M,B)})(fe,ne[fe.value.outlet],I,M.concat([fe.value]),B),delete ne[fe.value.outlet]}),Object.entries(ne).forEach(([fe,Ke])=>Lo(Ke,I.getContext(fe),B)),B}function Lo(v,R,I){const M=rs(v),B=v.value;Object.entries(M).forEach(([ne,fe])=>{Lo(fe,B.component?R?R.children.getContext(ne):null:R,I)}),I.canDeactivateChecks.push(new Cs(B.component&&R&&R.outlet&&R.outlet.isActivated?R.outlet.component:null,B))}function j(v){return"function"==typeof v}function pt(v){return v instanceof nt.K||"EmptyError"===v?.name}const ln=Symbol("INITIAL_VALUE");function sr(){return(0,Pn.w)(v=>ot(v.map(R=>R.pipe((0,Mt.q)(1),(0,kt.O)(ln)))).pipe((0,Jt.U)(R=>{for(const I of R)if(!0!==I){if(I===ln)return ln;if(!1===I||I instanceof Rn)return I}return!0}),(0,Ct.h)(R=>R!==ln),(0,Mt.q)(1)))}function Fs(v){return(0,Be.z)((0,Ue.b)(R=>{if(ur(R))throw Oo(0,R)}),(0,Jt.U)(R=>!0===R))}class oi{constructor(R){this.segmentGroup=R||null}}class to{constructor(R){this.urlTree=R}}function bs(v){return be(new oi(v))}function Si(v){return be(new to(v))}class wa{constructor(R,I){this.urlSerializer=R,this.urlTree=I}noMatchError(R){return new h.vHH(4002,!1)}lineralizeSegments(R,I){let M=[],B=I.root;for(;;){if(M=M.concat(B.segments),0===B.numberOfChildren)return(0,we.of)(M);if(B.numberOfChildren>1||!B.children[xt])return be(new h.vHH(4e3,!1));B=B.children[xt]}}applyRedirectCommands(R,I,M){return this.applyRedirectCreateUrlTree(I,this.urlSerializer.parse(I),R,M)}applyRedirectCreateUrlTree(R,I,M,B){const ne=this.createSegmentGroup(R,I.root,M,B);return new Rn(ne,this.createQueryParams(I.queryParams,this.urlTree.queryParams),I.fragment)}createQueryParams(R,I){const M={};return Object.entries(R).forEach(([B,ne])=>{if("string"==typeof ne&&ne.startsWith(":")){const Ke=ne.substring(1);M[B]=I[Ke]}else M[B]=ne}),M}createSegmentGroup(R,I,M,B){const ne=this.createSegments(R,I.segments,M,B);let fe={};return Object.entries(I.children).forEach(([Ke,We])=>{fe[Ke]=this.createSegmentGroup(R,We,M,B)}),new qt(ne,fe)}createSegments(R,I,M,B){return I.map(ne=>ne.path.startsWith(":")?this.findPosParam(R,ne,B):this.findOrReturn(ne,M))}findPosParam(R,I,M){const B=M[I.path.substring(1)];if(!B)throw new h.vHH(4001,!1);return B}findOrReturn(R,I){let M=0;for(const B of I){if(B.path===R.path)return I.splice(M),B;M++}return R}}const _r={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Vo(v,R,I,M,B){const ne=Xo(v,R,I);return ne.matched?(M=function Qn(v,R){return v.providers&&!v._injector&&(v._injector=(0,h.MMx)(v.providers,R,`Route: ${v.path}`)),v._injector??R}(R,M),function vs(v,R,I,M){const B=R.canMatch;if(!B||0===B.length)return(0,we.of)(!0);const ne=B.map(fe=>{const Ke=Bi(fe,v);return un(function Z(v){return v&&j(v.canMatch)}(Ke)?Ke.canMatch(R,I):v.runInContext(()=>Ke(R,I)))});return(0,we.of)(ne).pipe(sr(),Fs())}(M,R,I).pipe((0,Jt.U)(fe=>!0===fe?ne:{..._r}))):(0,we.of)(ne)}function Xo(v,R,I){if(""===R.path)return"full"===R.pathMatch&&(v.hasChildren()||I.length>0)?{..._r}:{matched:!0,consumedSegments:[],remainingSegments:I,parameters:{},positionalParamSegments:{}};const B=(R.matcher||Vn)(I,v,R);if(!B)return{..._r};const ne={};Object.entries(B.posParams??{}).forEach(([Ke,We])=>{ne[Ke]=We.path});const fe=B.consumed.length>0?{...ne,...B.consumed[B.consumed.length-1].parameters}:ne;return{matched:!0,consumedSegments:B.consumed,remainingSegments:I.slice(B.consumed.length),parameters:fe,positionalParamSegments:B.posParams??{}}}function Vs(v,R,I,M){return I.length>0&&function ta(v,R,I){return I.some(M=>vo(v,R,M)&&vn(M)!==xt)}(v,I,M)?{segmentGroup:new qt(R,Pa(M,new qt(I,v.children))),slicedSegments:[]}:0===I.length&&function Ma(v,R,I){return I.some(M=>vo(v,R,M))}(v,I,M)?{segmentGroup:new qt(v.segments,ea(v,0,I,M,v.children)),slicedSegments:I}:{segmentGroup:new qt(v.segments,v.children),slicedSegments:I}}function ea(v,R,I,M,B){const ne={};for(const fe of M)if(vo(v,I,fe)&&!B[vn(fe)]){const Ke=new qt([],{});ne[vn(fe)]=Ke}return{...B,...ne}}function Pa(v,R){const I={};I[xt]=R;for(const M of v)if(""===M.path&&vn(M)!==xt){const B=new qt([],{});I[vn(M)]=B}return I}function vo(v,R,I){return(!(v.hasChildren()||R.length>0)||"full"!==I.pathMatch)&&""===I.path}class Wa{constructor(R,I,M,B,ne,fe,Ke){this.injector=R,this.configLoader=I,this.rootComponentType=M,this.config=B,this.urlTree=ne,this.paramsInheritanceStrategy=fe,this.urlSerializer=Ke,this.allowRedirects=!0,this.applyRedirects=new wa(this.urlSerializer,this.urlTree)}noMatchError(R){return new h.vHH(4002,!1)}recognize(){const R=Vs(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,R,xt).pipe(Ge(I=>{if(I instanceof to)return this.allowRedirects=!1,this.urlTree=I.urlTree,this.match(I.urlTree);throw I instanceof oi?this.noMatchError(I):I}),(0,Jt.U)(I=>{const M=new gs([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},xt,this.rootComponentType,null,{}),B=new Bn(M,I),ne=new di("",B),fe=function ri(v,R,I=null,M=null){return ke(Fe(v),R,I,M)}(M,[],this.urlTree.queryParams,this.urlTree.fragment);return fe.queryParams=this.urlTree.queryParams,ne.url=this.urlSerializer.serialize(fe),this.inheritParamsAndData(ne._root),{state:ne,tree:fe}}))}match(R){return this.processSegmentGroup(this.injector,this.config,R.root,xt).pipe(Ge(M=>{throw M instanceof oi?this.noMatchError(M):M}))}inheritParamsAndData(R){const I=R.value,M=Er(I,this.paramsInheritanceStrategy);I.params=Object.freeze(M.params),I.data=Object.freeze(M.data),R.children.forEach(B=>this.inheritParamsAndData(B))}processSegmentGroup(R,I,M,B){return 0===M.segments.length&&M.hasChildren()?this.processChildren(R,I,M):this.processSegment(R,I,M,M.segments,B,!0)}processChildren(R,I,M){const B=[];for(const ne of Object.keys(M.children))"primary"===ne?B.unshift(ne):B.push(ne);return(0,me.D)(B).pipe((0,He.b)(ne=>{const fe=M.children[ne],Ke=function Vi(v,R){const I=v.filter(M=>vn(M)===R);return I.push(...v.filter(M=>vn(M)!==R)),I}(I,ne);return this.processSegmentGroup(R,Ke,fe,ne)}),(0,rt.R)((ne,fe)=>(ne.push(...fe),ne)),(0,Et.d)(null),function $t(v,R){const I=arguments.length>=2;return M=>M.pipe(v?(0,Ct.h)((B,ne)=>v(B,ne,M)):De.y,It(1),I?(0,Et.d)(R):(0,$n.T)(()=>new nt.K))}(),(0,Ae.z)(ne=>{if(null===ne)return bs(M);const fe=ha(ne);return function na(v){v.sort((R,I)=>R.value.outlet===xt?-1:I.value.outlet===xt?1:R.value.outlet.localeCompare(I.value.outlet))}(fe),(0,we.of)(fe)}))}processSegment(R,I,M,B,ne,fe){return(0,me.D)(I).pipe((0,He.b)(Ke=>this.processSegmentAgainstRoute(Ke._injector??R,I,Ke,M,B,ne,fe).pipe(Ge(We=>{if(We instanceof oi)return(0,we.of)(null);throw We}))),(0,Me.P)(Ke=>!!Ke),Ge(Ke=>{if(pt(Ke))return function uo(v,R,I){return 0===R.length&&!v.children[I]}(M,B,ne)?(0,we.of)([]):bs(M);throw Ke}))}processSegmentAgainstRoute(R,I,M,B,ne,fe,Ke){return function os(v,R,I,M){return!!(vn(v)===M||M!==xt&&vo(R,I,v))&&("**"===v.path||Xo(R,v,I).matched)}(M,B,ne,fe)?void 0===M.redirectTo?this.matchSegmentAgainstRoute(R,B,M,ne,fe,Ke):Ke&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(R,B,I,M,ne,fe):bs(B):bs(B)}expandSegmentAgainstRouteUsingRedirect(R,I,M,B,ne,fe){return"**"===B.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(R,M,B,fe):this.expandRegularSegmentAgainstRouteUsingRedirect(R,I,M,B,ne,fe)}expandWildCardWithParamsAgainstRouteUsingRedirect(R,I,M,B){const ne=this.applyRedirects.applyRedirectCommands([],M.redirectTo,{});return M.redirectTo.startsWith("/")?Si(ne):this.applyRedirects.lineralizeSegments(M,ne).pipe((0,Ae.z)(fe=>{const Ke=new qt(fe,{});return this.processSegment(R,I,Ke,fe,B,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(R,I,M,B,ne,fe){const{matched:Ke,consumedSegments:We,remainingSegments:Bt,positionalParamSegments:jn}=Xo(I,B,ne);if(!Ke)return bs(I);const Ii=this.applyRedirects.applyRedirectCommands(We,B.redirectTo,jn);return B.redirectTo.startsWith("/")?Si(Ii):this.applyRedirects.lineralizeSegments(B,Ii).pipe((0,Ae.z)(On=>this.processSegment(R,M,I,On.concat(Bt),fe,!1)))}matchSegmentAgainstRoute(R,I,M,B,ne,fe){let Ke;if("**"===M.path){const We=B.length>0?Zt(B).parameters:{},Bt=new gs(B,We,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,no(M),vn(M),M.component??M._loadedComponent??null,M,ra(M));Ke=(0,we.of)({snapshot:Bt,consumedSegments:[],remainingSegments:[]}),I.children={}}else Ke=Vo(I,M,B,R).pipe((0,Jt.U)(({matched:We,consumedSegments:Bt,remainingSegments:jn,parameters:Ii})=>We?{snapshot:new gs(Bt,Ii,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,no(M),vn(M),M.component??M._loadedComponent??null,M,ra(M)),consumedSegments:Bt,remainingSegments:jn}:null));return Ke.pipe((0,Pn.w)(We=>null===We?bs(I):this.getChildConfig(R=M._injector??R,M,B).pipe((0,Pn.w)(({routes:Bt})=>{const jn=M._loadedInjector??R,{snapshot:Ii,consumedSegments:On,remainingSegments:Ps}=We,{segmentGroup:Xr,slicedSegments:xa}=Vs(I,On,Ps,Bt);if(0===xa.length&&Xr.hasChildren())return this.processChildren(jn,Bt,Xr).pipe((0,Jt.U)(Bo=>null===Bo?null:[new Bn(Ii,Bo)]));if(0===Bt.length&&0===xa.length)return(0,we.of)([new Bn(Ii,[])]);const bu=vn(M)===ne;return this.processSegment(jn,Bt,Xr,xa,bu?xt:ne,!0).pipe((0,Jt.U)(Bo=>[new Bn(Ii,Bo)]))}))))}getChildConfig(R,I,M){return I.children?(0,we.of)({routes:I.children,injector:R}):I.loadChildren?void 0!==I._loadedRoutes?(0,we.of)({routes:I._loadedRoutes,injector:I._loadedInjector}):function Ar(v,R,I,M){const B=R.canLoad;if(void 0===B||0===B.length)return(0,we.of)(!0);const ne=B.map(fe=>{const Ke=Bi(fe,v);return un(function ae(v){return v&&j(v.canLoad)}(Ke)?Ke.canLoad(R,I):v.runInContext(()=>Ke(R,I)))});return(0,we.of)(ne).pipe(sr(),Fs())}(R,I,M).pipe((0,Ae.z)(B=>B?this.configLoader.loadChildren(R,I).pipe((0,Ue.b)(ne=>{I._loadedRoutes=ne.routes,I._loadedInjector=ne.injector})):function Ls(v){return be(ms(!1,3))}())):(0,we.of)({routes:[],injector:R})}}function Na(v){const R=v.value.routeConfig;return R&&""===R.path}function ha(v){const R=[],I=new Set;for(const M of v){if(!Na(M)){R.push(M);continue}const B=R.find(ne=>M.value.routeConfig===ne.value.routeConfig);void 0!==B?(B.children.push(...M.children),I.add(B)):R.push(M)}for(const M of I){const B=ha(M.children);R.push(new Bn(M.value,B))}return R.filter(M=>!I.has(M))}function no(v){return v.data||{}}function ra(v){return v.resolve||{}}function lt(v){return"string"==typeof v.title||null===v.title}function Xt(v){return(0,Pn.w)(R=>{const I=v(R);return I?(0,me.D)(I).pipe((0,Jt.U)(()=>R)):(0,we.of)(R)})}const Vr=new h.OlP("ROUTES");let yr=(()=>{class v{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,h.f3M)(h.Sil)}loadComponent(I){if(this.componentLoaders.get(I))return this.componentLoaders.get(I);if(I._loadedComponent)return(0,we.of)(I._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(I);const M=un(I.loadComponent()).pipe((0,Jt.U)(Qr),(0,Ue.b)(ne=>{this.onLoadEndListener&&this.onLoadEndListener(I),I._loadedComponent=ne}),(0,Wt.x)(()=>{this.componentLoaders.delete(I)})),B=new et(M,()=>new ft.x).pipe(Oe());return this.componentLoaders.set(I,B),B}loadChildren(I,M){if(this.childrenLoaders.get(M))return this.childrenLoaders.get(M);if(M._loadedRoutes)return(0,we.of)({routes:M._loadedRoutes,injector:M._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(M);const ne=function jr(v,R,I,M){return un(v.loadChildren()).pipe((0,Jt.U)(Qr),(0,Ae.z)(B=>B instanceof h.YKP||Array.isArray(B)?(0,we.of)(B):(0,me.D)(R.compileModuleAsync(B))),(0,Jt.U)(B=>{M&&M(v);let ne,fe,Ke=!1;return Array.isArray(B)?(fe=B,!0):(ne=B.create(I).injector,fe=ne.get(Vr,[],{optional:!0,self:!0}).flat()),{routes:fe.map(yo),injector:ne}}))}(M,this.compiler,I,this.onLoadEndListener).pipe((0,Wt.x)(()=>{this.childrenLoaders.delete(M)})),fe=new et(ne,()=>new ft.x).pipe(Oe());return this.childrenLoaders.set(M,fe),fe}static#e=this.\u0275fac=function(M){return new(M||v)};static#t=this.\u0275prov=h.Yz7({token:v,factory:v.\u0275fac,providedIn:"root"})}return v})();function Qr(v){return function pn(v){return v&&"object"==typeof v&&"default"in v}(v)?v.default:v}let rr=(()=>{class v{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new ft.x,this.transitionAbortSubject=new ft.x,this.configLoader=(0,h.f3M)(yr),this.environmentInjector=(0,h.f3M)(h.lqb),this.urlSerializer=(0,h.f3M)(Ur),this.rootContexts=(0,h.f3M)(mi),this.inputBindingEnabled=null!==(0,h.f3M)(ks,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>(0,we.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=B=>this.events.next(new Hs(B)),this.configLoader.onLoadStartListener=B=>this.events.next(new ya(B))}complete(){this.transitions?.complete()}handleNavigationRequest(I){const M=++this.navigationId;this.transitions?.next({...this.transitions.value,...I,id:M})}setupNavigations(I,M,B){return this.transitions=new Ce.X({id:0,currentUrlTree:M,currentRawUrl:M,currentBrowserUrl:M,extractedUrl:I.urlHandlingStrategy.extract(M),urlAfterRedirects:I.urlHandlingStrategy.extract(M),rawUrl:M,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Wr,restoredState:null,currentSnapshot:B.snapshot,targetSnapshot:null,currentRouterState:B,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe((0,Ct.h)(ne=>0!==ne.id),(0,Jt.U)(ne=>({...ne,extractedUrl:I.urlHandlingStrategy.extract(ne.rawUrl)})),(0,Pn.w)(ne=>{this.currentTransition=ne;let fe=!1,Ke=!1;return(0,we.of)(ne).pipe((0,Ue.b)(We=>{this.currentNavigation={id:We.id,initialUrl:We.rawUrl,extractedUrl:We.extractedUrl,trigger:We.source,extras:We.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,Pn.w)(We=>{const Bt=We.currentBrowserUrl.toString(),jn=!I.navigated||We.extractedUrl.toString()!==Bt||Bt!==We.currentUrlTree.toString();if(!jn&&"reload"!==(We.extras.onSameUrlNavigation??I.onSameUrlNavigation)){const On="";return this.events.next(new $s(We.id,this.urlSerializer.serialize(We.rawUrl),On,0)),We.resolve(null),Ie.E}if(I.urlHandlingStrategy.shouldProcessUrl(We.rawUrl))return(0,we.of)(We).pipe((0,Pn.w)(On=>{const Ps=this.transitions?.getValue();return this.events.next(new js(On.id,this.urlSerializer.serialize(On.extractedUrl),On.source,On.restoredState)),Ps!==this.transitions?.getValue()?Ie.E:Promise.resolve(On)}),function A(v,R,I,M,B,ne){return(0,Ae.z)(fe=>function Ss(v,R,I,M,B,ne,fe="emptyOnly"){return new Wa(v,R,I,M,B,fe,ne).recognize()}(v,R,I,M,fe.extractedUrl,B,ne).pipe((0,Jt.U)(({state:Ke,tree:We})=>({...fe,targetSnapshot:Ke,urlAfterRedirects:We}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,I.config,this.urlSerializer,I.paramsInheritanceStrategy),(0,Ue.b)(On=>{ne.targetSnapshot=On.targetSnapshot,ne.urlAfterRedirects=On.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:On.urlAfterRedirects};const Ps=new fs(On.id,this.urlSerializer.serialize(On.extractedUrl),this.urlSerializer.serialize(On.urlAfterRedirects),On.targetSnapshot);this.events.next(Ps)}));if(jn&&I.urlHandlingStrategy.shouldProcessUrl(We.currentRawUrl)){const{id:On,extractedUrl:Ps,source:Xr,restoredState:xa,extras:bu}=We,Bo=new js(On,this.urlSerializer.serialize(Ps),Xr,xa);this.events.next(Bo);const jo=vr(0,this.rootComponentType).snapshot;return this.currentTransition=ne={...We,targetSnapshot:jo,urlAfterRedirects:Ps,extras:{...bu,skipLocationChange:!1,replaceUrl:!1}},(0,we.of)(ne)}{const On="";return this.events.next(new $s(We.id,this.urlSerializer.serialize(We.extractedUrl),On,1)),We.resolve(null),Ie.E}}),(0,Ue.b)(We=>{const Bt=new xi(We.id,this.urlSerializer.serialize(We.extractedUrl),this.urlSerializer.serialize(We.urlAfterRedirects),We.targetSnapshot);this.events.next(Bt)}),(0,Jt.U)(We=>(this.currentTransition=ne={...We,guards:Fo(We.targetSnapshot,We.currentSnapshot,this.rootContexts)},ne)),function dr(v,R){return(0,Ae.z)(I=>{const{targetSnapshot:M,currentSnapshot:B,guards:{canActivateChecks:ne,canDeactivateChecks:fe}}=I;return 0===fe.length&&0===ne.length?(0,we.of)({...I,guardsResult:!0}):function Dr(v,R,I,M){return(0,me.D)(v).pipe((0,Ae.z)(B=>function bi(v,R,I,M,B){const ne=R&&R.routeConfig?R.routeConfig.canDeactivate:null;if(!ne||0===ne.length)return(0,we.of)(!0);const fe=ne.map(Ke=>{const We=ys(R)??B,Bt=Bi(Ke,We);return un(function C(v){return v&&j(v.canDeactivate)}(Bt)?Bt.canDeactivate(v,R,I,M):We.runInContext(()=>Bt(v,R,I,M))).pipe((0,Me.P)())});return(0,we.of)(fe).pipe(sr())}(B.component,B.route,I,R,M)),(0,Me.P)(B=>!0!==B,!0))}(fe,M,B,v).pipe((0,Ae.z)(Ke=>Ke&&function H(v){return"boolean"==typeof v}(Ke)?function nr(v,R,I,M){return(0,me.D)(R).pipe((0,He.b)(B=>(0,Vt.z)(function Zr(v,R){return null!==v&&R&&R(new As(v)),(0,we.of)(!0)}(B.route.parent,M),function si(v,R){return null!==v&&R&&R(new _o(v)),(0,we.of)(!0)}(B.route,M),function Br(v,R,I){const M=R[R.length-1],ne=R.slice(0,R.length-1).reverse().map(fe=>function za(v){const R=v.routeConfig?v.routeConfig.canActivateChild:null;return R&&0!==R.length?{node:v,guards:R}:null}(fe)).filter(fe=>null!==fe).map(fe=>ce(()=>{const Ke=fe.guards.map(We=>{const Bt=ys(fe.node)??I,jn=Bi(We,Bt);return un(function O(v){return v&&j(v.canActivateChild)}(jn)?jn.canActivateChild(M,v):Bt.runInContext(()=>jn(M,v))).pipe((0,Me.P)())});return(0,we.of)(Ke).pipe(sr())}));return(0,we.of)(ne).pipe(sr())}(v,B.path,I),function ss(v,R,I){const M=R.routeConfig?R.routeConfig.canActivate:null;if(!M||0===M.length)return(0,we.of)(!0);const B=M.map(ne=>ce(()=>{const fe=ys(R)??I,Ke=Bi(ne,fe);return un(function b(v){return v&&j(v.canActivate)}(Ke)?Ke.canActivate(R,v):fe.runInContext(()=>Ke(R,v))).pipe((0,Me.P)())}));return(0,we.of)(B).pipe(sr())}(v,B.route,I))),(0,Me.P)(B=>!0!==B,!0))}(M,ne,v,R):(0,we.of)(Ke)),(0,Jt.U)(Ke=>({...I,guardsResult:Ke})))})}(this.environmentInjector,We=>this.events.next(We)),(0,Ue.b)(We=>{if(ne.guardsResult=We.guardsResult,ur(We.guardsResult))throw Oo(0,We.guardsResult);const Bt=new Ds(We.id,this.urlSerializer.serialize(We.extractedUrl),this.urlSerializer.serialize(We.urlAfterRedirects),We.targetSnapshot,!!We.guardsResult);this.events.next(Bt)}),(0,Ct.h)(We=>!!We.guardsResult||(this.cancelNavigationTransition(We,"",3),!1)),Xt(We=>{if(We.guards.canActivateChecks.length)return(0,we.of)(We).pipe((0,Ue.b)(Bt=>{const jn=new Jo(Bt.id,this.urlSerializer.serialize(Bt.extractedUrl),this.urlSerializer.serialize(Bt.urlAfterRedirects),Bt.targetSnapshot);this.events.next(jn)}),(0,Pn.w)(Bt=>{let jn=!1;return(0,we.of)(Bt).pipe(function J(v,R){return(0,Ae.z)(I=>{const{targetSnapshot:M,guards:{canActivateChecks:B}}=I;if(!B.length)return(0,we.of)(I);let ne=0;return(0,me.D)(B).pipe((0,He.b)(fe=>function L(v,R,I,M){const B=v.routeConfig,ne=v._resolve;return void 0!==B?.title&&!lt(B)&&(ne[zn]=B.title),function Q(v,R,I,M){const B=function ge(v){return[...Object.keys(v),...Object.getOwnPropertySymbols(v)]}(v);if(0===B.length)return(0,we.of)({});const ne={};return(0,me.D)(B).pipe((0,Ae.z)(fe=>function Ye(v,R,I,M){const B=ys(R)??M,ne=Bi(v,B);return un(ne.resolve?ne.resolve(R,I):B.runInContext(()=>ne(R,I)))}(v[fe],R,I,M).pipe((0,Me.P)(),(0,Ue.b)(Ke=>{ne[fe]=Ke}))),It(1),function on(v){return(0,Jt.U)(()=>v)}(ne),Ge(fe=>pt(fe)?Ie.E:be(fe)))}(ne,v,R,M).pipe((0,Jt.U)(fe=>(v._resolvedData=fe,v.data=Er(v,I).resolve,B&&lt(B)&&(v.data[zn]=B.title),null)))}(fe.route,M,v,R)),(0,Ue.b)(()=>ne++),It(1),(0,Ae.z)(fe=>ne===B.length?(0,we.of)(I):Ie.E))})}(I.paramsInheritanceStrategy,this.environmentInjector),(0,Ue.b)({next:()=>jn=!0,complete:()=>{jn||this.cancelNavigationTransition(Bt,"",2)}}))}),(0,Ue.b)(Bt=>{const jn=new mo(Bt.id,this.urlSerializer.serialize(Bt.extractedUrl),this.urlSerializer.serialize(Bt.urlAfterRedirects),Bt.targetSnapshot);this.events.next(jn)}))}),Xt(We=>{const Bt=jn=>{const Ii=[];jn.routeConfig?.loadComponent&&!jn.routeConfig._loadedComponent&&Ii.push(this.configLoader.loadComponent(jn.routeConfig).pipe((0,Ue.b)(On=>{jn.component=On}),(0,Jt.U)(()=>{})));for(const On of jn.children)Ii.push(...Bt(On));return Ii};return ot(Bt(We.targetSnapshot.root)).pipe((0,Et.d)(),(0,Mt.q)(1))}),Xt(()=>this.afterPreactivation()),(0,Jt.U)(We=>{const Bt=function Lr(v,R,I){const M=wr(v,R._root,I?I._root:void 0);return new ps(M,R)}(I.routeReuseStrategy,We.targetSnapshot,We.currentRouterState);return this.currentTransition=ne={...We,targetRouterState:Bt},ne}),(0,Ue.b)(()=>{this.events.next(new zs)}),((v,R,I,M)=>(0,Jt.U)(B=>(new Ui(R,B.targetRouterState,B.currentRouterState,I,M).activate(v),B)))(this.rootContexts,I.routeReuseStrategy,We=>this.events.next(We),this.inputBindingEnabled),(0,Mt.q)(1),(0,Ue.b)({next:We=>{fe=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Js(We.id,this.urlSerializer.serialize(We.extractedUrl),this.urlSerializer.serialize(We.urlAfterRedirects))),I.titleStrategy?.updateTitle(We.targetRouterState.snapshot),We.resolve(!0)},complete:()=>{fe=!0}}),(0,ar.R)(this.transitionAbortSubject.pipe((0,Ue.b)(We=>{throw We}))),(0,Wt.x)(()=>{fe||Ke||this.cancelNavigationTransition(ne,"",1),this.currentNavigation?.id===ne.id&&(this.currentNavigation=null)}),Ge(We=>{if(Ke=!0,yi(We))this.events.next(new gi(ne.id,this.urlSerializer.serialize(ne.extractedUrl),We.message,We.cancellationCode)),function Fi(v){return yi(v)&&ur(v.url)}(We)?this.events.next(new Wn(We.url)):ne.resolve(!1);else{this.events.next(new hs(ne.id,this.urlSerializer.serialize(ne.extractedUrl),We,ne.targetSnapshot??void 0));try{ne.resolve(I.errorHandler(We))}catch(Bt){ne.reject(Bt)}}return Ie.E}))}))}cancelNavigationTransition(I,M,B){const ne=new gi(I.id,this.urlSerializer.serialize(I.extractedUrl),M,B);this.events.next(ne),I.resolve(!1)}static#e=this.\u0275fac=function(M){return new(M||v)};static#t=this.\u0275prov=h.Yz7({token:v,factory:v.\u0275fac,providedIn:"root"})}return v})();function vi(v){return v!==Wr}let Us=(()=>{class v{buildTitle(I){let M,B=I.root;for(;void 0!==B;)M=this.getResolvedTitleForRoute(B)??M,B=B.children.find(ne=>ne.outlet===xt);return M}getResolvedTitleForRoute(I){return I.data[zn]}static#e=this.\u0275fac=function(M){return new(M||v)};static#t=this.\u0275prov=h.Yz7({token:v,factory:function(){return(0,h.f3M)(dt)},providedIn:"root"})}return v})(),dt=(()=>{class v extends Us{constructor(I){super(),this.title=I}updateTitle(I){const M=this.buildTitle(I);void 0!==M&&this.title.setTitle(M)}static#e=this.\u0275fac=function(M){return new(M||v)(h.LFG(Ln.Dx))};static#t=this.\u0275prov=h.Yz7({token:v,factory:v.\u0275fac,providedIn:"root"})}return v})(),$r=(()=>{class v{static#e=this.\u0275fac=function(M){return new(M||v)};static#t=this.\u0275prov=h.Yz7({token:v,factory:function(){return(0,h.f3M)(Qo)},providedIn:"root"})}return v})();class Jr{shouldDetach(R){return!1}store(R,I){}shouldAttach(R){return!1}retrieve(R){return null}shouldReuseRoute(R,I){return R.routeConfig===I.routeConfig}}let Qo=(()=>{class v extends Jr{static#e=this.\u0275fac=function(){let I;return function(B){return(I||(I=h.n5z(v)))(B||v)}}();static#t=this.\u0275prov=h.Yz7({token:v,factory:v.\u0275fac,providedIn:"root"})}return v})();const Rt=new h.OlP("",{providedIn:"root",factory:()=>({})});let en=(()=>{class v{static#e=this.\u0275fac=function(M){return new(M||v)};static#t=this.\u0275prov=h.Yz7({token:v,factory:function(){return(0,h.f3M)(jc)},providedIn:"root"})}return v})(),jc=(()=>{class v{shouldProcessUrl(I){return!0}extract(I){return I}merge(I,M){return I}static#e=this.\u0275fac=function(M){return new(M||v)};static#t=this.\u0275prov=h.Yz7({token:v,factory:v.\u0275fac,providedIn:"root"})}return v})();var _t=function(v){return v[v.COMPLETE=0]="COMPLETE",v[v.FAILED=1]="FAILED",v[v.REDIRECTING=2]="REDIRECTING",v}(_t||{});function Xe(v,R){v.events.pipe((0,Ct.h)(I=>I instanceof Js||I instanceof gi||I instanceof hs||I instanceof $s),(0,Jt.U)(I=>I instanceof Js||I instanceof $s?_t.COMPLETE:I instanceof gi&&(0===I.code||1===I.code)?_t.REDIRECTING:_t.FAILED),(0,Ct.h)(I=>I!==_t.REDIRECTING),(0,Mt.q)(1)).subscribe(()=>{R()})}function gt(v){throw v}function qr(v,R,I){return R.parse("/")}const wl={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},ec={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Rs=(()=>{class v{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,h.f3M)(h.c2e),this.isNgZoneEnabled=!1,this._events=new ft.x,this.options=(0,h.f3M)(Rt,{optional:!0})||{},this.pendingTasks=(0,h.f3M)(h.HDt),this.errorHandler=this.options.errorHandler||gt,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||qr,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,h.f3M)(en),this.routeReuseStrategy=(0,h.f3M)($r),this.titleStrategy=(0,h.f3M)(Us),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=(0,h.f3M)(Vr,{optional:!0})?.flat()??[],this.navigationTransitions=(0,h.f3M)(rr),this.urlSerializer=(0,h.f3M)(Ur),this.location=(0,h.f3M)(Gt.Ye),this.componentInputBindingEnabled=!!(0,h.f3M)(ks,{optional:!0}),this.eventsSubscription=new Je.w0,this.isNgZoneEnabled=(0,h.f3M)(h.R0b)instanceof h.R0b&&h.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Rn,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=vr(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(I=>{this.lastSuccessfulId=I.id,this.currentPageId=this.browserPageId},I=>{this.console.warn(`Unhandled Navigation Error: ${I}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const I=this.navigationTransitions.events.subscribe(M=>{try{const{currentTransition:B}=this.navigationTransitions;if(null===B)return void($c(M)&&this._events.next(M));if(M instanceof js)vi(B.source)&&(this.browserUrlTree=B.extractedUrl);else if(M instanceof $s)this.rawUrlTree=B.rawUrl;else if(M instanceof fs){if("eager"===this.urlUpdateStrategy){if(!B.extras.skipLocationChange){const ne=this.urlHandlingStrategy.merge(B.urlAfterRedirects,B.rawUrl);this.setBrowserUrl(ne,B)}this.browserUrlTree=B.urlAfterRedirects}}else if(M instanceof zs)this.currentUrlTree=B.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(B.urlAfterRedirects,B.rawUrl),this.routerState=B.targetRouterState,"deferred"===this.urlUpdateStrategy&&(B.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,B),this.browserUrlTree=B.urlAfterRedirects);else if(M instanceof gi)0!==M.code&&1!==M.code&&(this.navigated=!0),(3===M.code||2===M.code)&&this.restoreHistory(B);else if(M instanceof Wn){const ne=this.urlHandlingStrategy.merge(M.url,B.currentRawUrl),fe={skipLocationChange:B.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||vi(B.source)};this.scheduleNavigation(ne,Wr,null,fe,{resolve:B.resolve,reject:B.reject,promise:B.promise})}M instanceof hs&&this.restoreHistory(B,!0),M instanceof Js&&(this.navigated=!0),$c(M)&&this._events.next(M)}catch(B){this.navigationTransitions.transitionAbortSubject.next(B)}});this.eventsSubscription.add(I)}resetRootComponentType(I){this.routerState.root.component=I,this.navigationTransitions.rootComponentType=I}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const I=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),Wr,I)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(I=>{const M="popstate"===I.type?"popstate":"hashchange";"popstate"===M&&setTimeout(()=>{this.navigateToSyncWithBrowser(I.url,M,I.state)},0)}))}navigateToSyncWithBrowser(I,M,B){const ne={replaceUrl:!0},fe=B?.navigationId?B:null;if(B){const We={...B};delete We.navigationId,delete We.\u0275routerPageId,0!==Object.keys(We).length&&(ne.state=We)}const Ke=this.parseUrl(I);this.scheduleNavigation(Ke,M,fe,ne)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(I){this.config=I.map(yo),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(I,M={}){const{relativeTo:B,queryParams:ne,fragment:fe,queryParamsHandling:Ke,preserveFragment:We}=M,Bt=We?this.currentUrlTree.fragment:fe;let Ii,jn=null;switch(Ke){case"merge":jn={...this.currentUrlTree.queryParams,...ne};break;case"preserve":jn=this.currentUrlTree.queryParams;break;default:jn=ne||null}null!==jn&&(jn=this.removeEmptyProps(jn));try{Ii=Fe(B?B.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof I[0]||!I[0].startsWith("/"))&&(I=[]),Ii=this.currentUrlTree.root}return ke(Ii,I,jn,Bt??null)}navigateByUrl(I,M={skipLocationChange:!1}){const B=ur(I)?I:this.parseUrl(I),ne=this.urlHandlingStrategy.merge(B,this.rawUrlTree);return this.scheduleNavigation(ne,Wr,null,M)}navigate(I,M={skipLocationChange:!1}){return function Uo(v){for(let R=0;R<v.length;R++)if(null==v[R])throw new h.vHH(4008,!1)}(I),this.navigateByUrl(this.createUrlTree(I,M),M)}serializeUrl(I){return this.urlSerializer.serialize(I)}parseUrl(I){let M;try{M=this.urlSerializer.parse(I)}catch(B){M=this.malformedUriErrorHandler(B,this.urlSerializer,I)}return M}isActive(I,M){let B;if(B=!0===M?{...wl}:!1===M?{...ec}:M,ur(I))return Fr(this.currentUrlTree,I,B);const ne=this.parseUrl(I);return Fr(this.currentUrlTree,ne,B)}removeEmptyProps(I){return Object.keys(I).reduce((M,B)=>{const ne=I[B];return null!=ne&&(M[B]=ne),M},{})}scheduleNavigation(I,M,B,ne,fe){if(this.disposed)return Promise.resolve(!1);let Ke,We,Bt;fe?(Ke=fe.resolve,We=fe.reject,Bt=fe.promise):Bt=new Promise((Ii,On)=>{Ke=Ii,We=On});const jn=this.pendingTasks.add();return Xe(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(jn))}),this.navigationTransitions.handleNavigationRequest({source:M,restoredState:B,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:I,extras:ne,resolve:Ke,reject:We,promise:Bt,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Bt.catch(Ii=>Promise.reject(Ii))}setBrowserUrl(I,M){const B=this.urlSerializer.serialize(I);if(this.location.isCurrentPathEqualTo(B)||M.extras.replaceUrl){const fe={...M.extras.state,...this.generateNgRouterState(M.id,this.browserPageId)};this.location.replaceState(B,"",fe)}else{const ne={...M.extras.state,...this.generateNgRouterState(M.id,this.browserPageId+1)};this.location.go(B,"",ne)}}restoreHistory(I,M=!1){if("computed"===this.canceledNavigationResolution){const ne=this.currentPageId-this.browserPageId;0!==ne?this.location.historyGo(ne):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===ne&&(this.resetState(I),this.browserUrlTree=I.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(M&&this.resetState(I),this.resetUrlToCurrentUrlTree())}resetState(I){this.routerState=I.currentRouterState,this.currentUrlTree=I.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,I.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(I,M){return"computed"===this.canceledNavigationResolution?{navigationId:I,\u0275routerPageId:M}:{navigationId:I}}static#e=this.\u0275fac=function(M){return new(M||v)};static#t=this.\u0275prov=h.Yz7({token:v,factory:v.\u0275fac,providedIn:"root"})}return v})();function $c(v){return!(v instanceof zs||v instanceof Wn)}let $u=(()=>{class v{constructor(I,M,B,ne,fe,Ke){this.router=I,this.route=M,this.tabIndexAttribute=B,this.renderer=ne,this.el=fe,this.locationStrategy=Ke,this.href=null,this.commands=null,this.onChanges=new ft.x,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const We=fe.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===We||"area"===We,this.isAnchorElement?this.subscription=I.events.subscribe(Bt=>{Bt instanceof Js&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(I){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",I)}ngOnChanges(I){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(I){null!=I?(this.commands=Array.isArray(I)?I:[I],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(I,M,B,ne,fe){return!!(null===this.urlTree||this.isAnchorElement&&(0!==I||M||B||ne||fe||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const I=null===this.href?null:(0,h.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",I)}applyAttributeValue(I,M){const B=this.renderer,ne=this.el.nativeElement;null!==M?B.setAttribute(ne,I,M):B.removeAttribute(ne,I)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static#e=this.\u0275fac=function(M){return new(M||v)(h.Y36(Rs),h.Y36(fn),h.$8M("tabindex"),h.Y36(h.Qsj),h.Y36(h.SBq),h.Y36(Gt.S$))};static#t=this.\u0275dir=h.lG2({type:v,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(M,B){1&M&&h.NdJ("click",function(fe){return B.onClick(fe.button,fe.ctrlKey,fe.shiftKey,fe.altKey,fe.metaKey)}),2&M&&h.uIk("target",B.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:["preserveFragment","preserveFragment",h.VuI],skipLocationChange:["skipLocationChange","skipLocationChange",h.VuI],replaceUrl:["replaceUrl","replaceUrl",h.VuI],routerLink:"routerLink"},standalone:!0,features:[h.Xq5,h.TTD]})}return v})();class ia{}let Fn=(()=>{class v{constructor(I,M,B,ne,fe){this.router=I,this.injector=B,this.preloadingStrategy=ne,this.loader=fe}setUpPreloading(){this.subscription=this.router.events.pipe((0,Ct.h)(I=>I instanceof Js),(0,He.b)(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(I,M){const B=[];for(const ne of M){ne.providers&&!ne._injector&&(ne._injector=(0,h.MMx)(ne.providers,I,`Route: ${ne.path}`));const fe=ne._injector??I,Ke=ne._loadedInjector??fe;(ne.loadChildren&&!ne._loadedRoutes&&void 0===ne.canLoad||ne.loadComponent&&!ne._loadedComponent)&&B.push(this.preloadConfig(fe,ne)),(ne.children||ne._loadedRoutes)&&B.push(this.processRoutes(Ke,ne.children??ne._loadedRoutes))}return(0,me.D)(B).pipe((0,Hn.J)())}preloadConfig(I,M){return this.preloadingStrategy.preload(M,()=>{let B;B=M.loadChildren&&void 0===M.canLoad?this.loader.loadChildren(I,M):(0,we.of)(null);const ne=B.pipe((0,Ae.z)(fe=>null===fe?(0,we.of)(void 0):(M._loadedRoutes=fe.routes,M._loadedInjector=fe.injector,this.processRoutes(fe.injector??I,fe.routes))));if(M.loadComponent&&!M._loadedComponent){const fe=this.loader.loadComponent(M);return(0,me.D)([ne,fe]).pipe((0,Hn.J)())}return ne})}static#e=this.\u0275fac=function(M){return new(M||v)(h.LFG(Rs),h.LFG(h.Sil),h.LFG(h.lqb),h.LFG(ia),h.LFG(yr))};static#t=this.\u0275prov=h.Yz7({token:v,factory:v.\u0275fac,providedIn:"root"})}return v})();const sa=new h.OlP("");let zu=(()=>{class v{constructor(I,M,B,ne,fe={}){this.urlSerializer=I,this.transitions=M,this.viewportScroller=B,this.zone=ne,this.options=fe,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},fe.scrollPositionRestoration=fe.scrollPositionRestoration||"disabled",fe.anchorScrolling=fe.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(I=>{I instanceof js?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=I.navigationTrigger,this.restoredId=I.restoredState?I.restoredState.navigationId:0):I instanceof Js?(this.lastId=I.id,this.scheduleScrollEvent(I,this.urlSerializer.parse(I.urlAfterRedirects).fragment)):I instanceof $s&&0===I.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(I,this.urlSerializer.parse(I.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(I=>{I instanceof xs&&(I.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(I.position):I.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(I.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(I,M){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new xs(I,"popstate"===this.lastSource?this.store[this.restoredId]:null,M))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(M){h.$Z()};static#t=this.\u0275prov=h.Yz7({token:v,factory:v.\u0275fac})}return v})();function Eo(v,R){return{\u0275kind:v,\u0275providers:R}}function Io(){const v=(0,h.f3M)(h.zs3);return R=>{const I=v.get(h.z2F);if(R!==I.components[0])return;const M=v.get(Rs),B=v.get(Cu);1===v.get(Ta)&&M.initialNavigation(),v.get(ht,null,h.XFs.Optional)?.setUpPreloading(),v.get(sa,null,h.XFs.Optional)?.init(),M.resetRootComponentType(I.componentTypes[0]),B.closed||(B.next(),B.complete(),B.unsubscribe())}}const Cu=new h.OlP("",{factory:()=>new ft.x}),Ta=new h.OlP("",{providedIn:"root",factory:()=>1}),ht=new h.OlP("");function xr(v){return Eo(0,[{provide:ht,useExisting:Fn},{provide:ia,useExisting:v}])}const as=new h.OlP("ROUTER_FORROOT_GUARD"),lu=[Gt.Ye,{provide:Ur,useClass:Pi},Rs,mi,{provide:fn,useFactory:function hn(v){return v.routerState.root},deps:[Rs]},yr,[]];function je(){return new h.PXZ("Router",Rs)}let Gu=(()=>{class v{constructor(I){}static forRoot(I,M){return{ngModule:v,providers:[lu,[],{provide:Vr,multi:!0,useValue:I},{provide:as,useFactory:Ei,deps:[[Rs,new h.FiY,new h.tp0]]},{provide:Rt,useValue:M||{}},M?.useHash?{provide:Gt.S$,useClass:Gt.Do}:{provide:Gt.S$,useClass:Gt.b0},{provide:sa,useFactory:()=>{const v=(0,h.f3M)(Gt.EM),R=(0,h.f3M)(h.R0b),I=(0,h.f3M)(Rt),M=(0,h.f3M)(rr),B=(0,h.f3M)(Ur);return I.scrollOffset&&v.setOffset(I.scrollOffset),new zu(B,M,v,R,I)}},M?.preloadingStrategy?xr(M.preloadingStrategy).\u0275providers:[],{provide:h.PXZ,multi:!0,useFactory:je},M?.initialNavigation?qu(M):[],M?.bindToComponentInputs?Eo(8,[zi,{provide:ks,useExisting:zi}]).\u0275providers:[],[{provide:Es,useFactory:Io},{provide:h.tb,multi:!0,useExisting:Es}]]}}static forChild(I){return{ngModule:v,providers:[{provide:Vr,multi:!0,useValue:I}]}}static#e=this.\u0275fac=function(M){return new(M||v)(h.LFG(as,8))};static#t=this.\u0275mod=h.oAB({type:v});static#n=this.\u0275inj=h.cJS({})}return v})();function Ei(v){return"guarded"}function qu(v){return["disabled"===v.initialNavigation?Eo(3,[{provide:h.ip1,multi:!0,useFactory:()=>{const R=(0,h.f3M)(Rs);return()=>{R.setUpLocationChangeListener()}}},{provide:Ta,useValue:2}]).\u0275providers:[],"enabledBlocking"===v.initialNavigation?Eo(2,[{provide:Ta,useValue:0},{provide:h.ip1,multi:!0,deps:[h.zs3],useFactory:R=>{const I=R.get(Gt.V_,Promise.resolve());return()=>I.then(()=>new Promise(M=>{const B=R.get(Rs),ne=R.get(Cu);Xe(B,()=>{M(!0)}),R.get(rr).afterPreactivation=()=>(M(!0),ne.closed?(0,we.of)(void 0):ne),B.initialNavigation()}))}}]).\u0275providers:[]]}const Es=new h.OlP("")},3106:(Ot,Le,U)=>{U.d(Le,{Z:()=>ot});var h=U(9058),W=U(4537),K=U(534),ve=U(7879);class me{constructor(mt,nt){this._delegate=mt,this.firebase=nt,(0,K._addComponent)(mt,new W.wA("app-compat",()=>this,"PUBLIC")),this.container=mt.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(mt){this._delegate.automaticDataCollectionEnabled=mt}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(mt=>{this._delegate.checkDestroyed(),mt()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,K.deleteApp)(this._delegate)))}_getService(mt,nt=K._DEFAULT_ENTRY_NAME){var Vt;this._delegate.checkDestroyed();const ut=this._delegate.container.getProvider(mt);return!ut.isInitialized()&&"EXPLICIT"===(null===(Vt=ut.getComponent())||void 0===Vt?void 0:Vt.instantiationMode)&&ut.initialize(),ut.getImmediate({identifier:nt})}_removeServiceInstance(mt,nt=K._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(mt).clearInstance(nt)}_addComponent(mt){(0,K._addComponent)(this._delegate,mt)}_addOrOverwriteComponent(mt){(0,K._addOrOverwriteComponent)(this._delegate,mt)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Ce=new h.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),X=function De(){const Qe=function ye(Qe){const mt={},nt={__esModule:!0,initializeApp:function ce(Je,Te={}){const Oe=K.initializeApp(Je,Te);if((0,h.r3)(mt,Oe.name))return mt[Oe.name];const et=new Qe(Oe,nt);return mt[Oe.name]=et,et},app:ut,registerVersion:K.registerVersion,setLogLevel:K.setLogLevel,onLog:K.onLog,apps:null,SDK_VERSION:K.SDK_VERSION,INTERNAL:{registerComponent:function be(Je){const Te=Je.name,Oe=Te.replace("-compat","");if(K._registerComponent(Je)&&"PUBLIC"===Je.type){const et=(ft=ut())=>{if("function"!=typeof ft[Oe])throw Ce.create("invalid-app-argument",{appName:Te});return ft[Oe]()};void 0!==Je.serviceProps&&(0,h.ZB)(et,Je.serviceProps),nt[Oe]=et,Qe.prototype[Oe]=function(...ft){return this._getService.bind(this,Te).apply(this,Je.multipleInstances?ft:[])}}return"PUBLIC"===Je.type?nt[Oe]:null},removeApp:function Vt(Je){delete mt[Je]},useAsService:function Ie(Je,Te){return"serverAuth"===Te?null:Te},modularAPIs:K}};function ut(Je){if(!(0,h.r3)(mt,Je=Je||K._DEFAULT_ENTRY_NAME))throw Ce.create("no-app",{appName:Je});return mt[Je]}return nt.default=nt,Object.defineProperty(nt,"apps",{get:function Be(){return Object.keys(mt).map(Je=>mt[Je])}}),ut.App=Qe,nt}(me);return Qe.INTERNAL=Object.assign(Object.assign({},Qe.INTERNAL),{createFirebaseNamespace:De,extendNamespace:function mt(nt){(0,h.ZB)(Qe,nt)},createSubscribe:h.ne,ErrorFactory:h.LL,deepExtend:h.ZB}),Qe}(),ie=new ve.Yd("@firebase/app-compat");if((0,h.jU)()&&void 0!==self.firebase){ie.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Qe=self.firebase.SDK_VERSION;Qe&&Qe.indexOf("LITE")>=0&&ie.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const ot=X;!function Ve(Qe){(0,K.registerVersion)("@firebase/app-compat","0.2.30",Qe)}()},534:(Ot,Le,U)=>{U.r(Le),U.d(Le,{FirebaseError:()=>ve.ZR,SDK_VERSION:()=>Ur,_DEFAULT_ENTRY_NAME:()=>Zt,_addComponent:()=>ei,_addOrOverwriteComponent:()=>Mn,_apps:()=>an,_clearComponents:()=>qt,_components:()=>Fr,_getProvider:()=>ns,_isFirebaseApp:()=>Ri,_isFirebaseServerApp:()=>Rn,_registerComponent:()=>Cr,_removeServiceInstance:()=>Ht,_serverApps:()=>Kn,deleteApp:()=>Mr,getApp:()=>Sr,getApps:()=>gr,initializeApp:()=>Pi,initializeServerApp:()=>ti,onLog:()=>re,registerVersion:()=>Ee,setLogLevel:()=>z});var h=U(5861),W=U(4537),K=U(7879),ve=U(9058);const me=(Fe,ke)=>ke.some(st=>Fe instanceof st);let we,Ce;const X=new WeakMap,ie=new WeakMap,pe=new WeakMap,ze=new WeakMap,Ve=new WeakMap;let mt={get(Fe,ke,st){if(Fe instanceof IDBTransaction){if("done"===ke)return ie.get(Fe);if("objectStoreNames"===ke)return Fe.objectStoreNames||pe.get(Fe);if("store"===ke)return st.objectStoreNames[1]?void 0:st.objectStore(st.objectStoreNames[0])}return ce(Fe[ke])},set:(Fe,ke,st)=>(Fe[ke]=st,!0),has:(Fe,ke)=>Fe instanceof IDBTransaction&&("done"===ke||"store"===ke)||ke in Fe};function ut(Fe){return"function"==typeof Fe?function Vt(Fe){return Fe!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function De(){return Ce||(Ce=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(Fe)?function(...ke){return Fe.apply(Be(this),ke),ce(X.get(this))}:function(...ke){return ce(Fe.apply(Be(this),ke))}:function(ke,...st){const Dt=Fe.call(Be(this),ke,...st);return pe.set(Dt,ke.sort?ke.sort():[ke]),ce(Dt)}}(Fe):(Fe instanceof IDBTransaction&&function Qe(Fe){if(ie.has(Fe))return;const ke=new Promise((st,Dt)=>{const _n=()=>{Fe.removeEventListener("complete",tn),Fe.removeEventListener("error",yn),Fe.removeEventListener("abort",yn)},tn=()=>{st(),_n()},yn=()=>{Dt(Fe.error||new DOMException("AbortError","AbortError")),_n()};Fe.addEventListener("complete",tn),Fe.addEventListener("error",yn),Fe.addEventListener("abort",yn)});ie.set(Fe,ke)}(Fe),me(Fe,function ye(){return we||(we=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(Fe,mt):Fe)}function ce(Fe){if(Fe instanceof IDBRequest)return function ot(Fe){const ke=new Promise((st,Dt)=>{const _n=()=>{Fe.removeEventListener("success",tn),Fe.removeEventListener("error",yn)},tn=()=>{st(ce(Fe.result)),_n()},yn=()=>{Dt(Fe.error),_n()};Fe.addEventListener("success",tn),Fe.addEventListener("error",yn)});return ke.then(st=>{st instanceof IDBCursor&&X.set(st,Fe)}).catch(()=>{}),Ve.set(ke,Fe),ke}(Fe);if(ze.has(Fe))return ze.get(Fe);const ke=ut(Fe);return ke!==Fe&&(ze.set(Fe,ke),Ve.set(ke,Fe)),ke}const Be=Fe=>Ve.get(Fe),Je=["get","getKey","getAll","getAllKeys","count"],Te=["put","add","delete","clear"],Oe=new Map;function et(Fe,ke){if(!(Fe instanceof IDBDatabase)||ke in Fe||"string"!=typeof ke)return;if(Oe.get(ke))return Oe.get(ke);const st=ke.replace(/FromIndex$/,""),Dt=ke!==st,_n=Te.includes(st);if(!(st in(Dt?IDBIndex:IDBObjectStore).prototype)||!_n&&!Je.includes(st))return;const tn=function(){var yn=(0,h.Z)(function*(kn,...lr){const ii=this.transaction(kn,_n?"readwrite":"readonly");let Ts=ii.store;return Dt&&(Ts=Ts.index(lr.shift())),(yield Promise.all([Ts[st](...lr),_n&&ii.done]))[0]});return function(lr){return yn.apply(this,arguments)}}();return Oe.set(ke,tn),tn}!function nt(Fe){mt=Fe(mt)}(Fe=>({...Fe,get:(ke,st,Dt)=>et(ke,st)||Fe.get(ke,st,Dt),has:(ke,st)=>!!et(ke,st)||Fe.has(ke,st)}));class ft{constructor(ke){this.container=ke}getPlatformInfoString(){return this.container.getProviders().map(st=>{if(function Gt(Fe){const ke=Fe.getComponent();return"VERSION"===ke?.type}(st)){const Dt=st.getImmediate();return`${Dt.library}/${Dt.version}`}return null}).filter(st=>st).join(" ")}}const Jt="@firebase/app",Pn="0.10.0",Mt=new K.Yd("@firebase/app"),Zt="[DEFAULT]",un={[Jt]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},an=new Map,Kn=new Map,Fr=new Map;function ei(Fe,ke){try{Fe.container.addComponent(ke)}catch(st){Mt.debug(`Component ${ke.name} failed to register with FirebaseApp ${Fe.name}`,st)}}function Mn(Fe,ke){Fe.container.addOrOverwriteComponent(ke)}function Cr(Fe){const ke=Fe.name;if(Fr.has(ke))return Mt.debug(`There were multiple attempts to register component ${ke}.`),!1;Fr.set(ke,Fe);for(const st of an.values())ei(st,Fe);for(const st of Kn.values())ei(st,Fe);return!0}function ns(Fe,ke){const st=Fe.container.getProvider("heartbeat").getImmediate({optional:!0});return st&&st.triggerHeartbeat(),Fe.container.getProvider(ke)}function Ht(Fe,ke,st=Zt){ns(Fe,ke).clearInstance(st)}function Ri(Fe){return void 0!==Fe.options}function Rn(Fe){return void 0!==Fe.settings}function qt(){Fr.clear()}const br=new ve.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class Un{constructor(ke,st,Dt){this._isDeleted=!1,this._options=Object.assign({},ke),this._config=Object.assign({},st),this._name=st.name,this._automaticDataCollectionEnabled=st.automaticDataCollectionEnabled,this._container=Dt,this.container.addComponent(new W.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ke){this.checkDestroyed(),this._automaticDataCollectionEnabled=ke}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(ke){this._isDeleted=ke}checkDestroyed(){if(this.isDeleted)throw br.create("app-deleted",{appName:this._name})}}class Nn extends Un{constructor(ke,st,Dt,_n){const tn=void 0!==st.automaticDataCollectionEnabled&&st.automaticDataCollectionEnabled,yn={name:Dt,automaticDataCollectionEnabled:tn};super(void 0!==ke.apiKey?ke:ke.options,yn,_n),this._serverConfig=Object.assign({automaticDataCollectionEnabled:tn},st),this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()}),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,st.releaseOnDeref=void 0,Ee(Jt,Pn,"serverapp")}get refCount(){return this._refCount}incRefCount(ke){this.isDeleted||(this._refCount++,void 0!==ke&&this._finalizationRegistry.register(ke,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){Mr(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw br.create("server-app-deleted")}}const Ur="10.10.0";function Pi(Fe,ke={}){let st=Fe;"object"!=typeof ke&&(ke={name:ke});const Dt=Object.assign({name:Zt,automaticDataCollectionEnabled:!1},ke),_n=Dt.name;if("string"!=typeof _n||!_n)throw br.create("bad-app-name",{appName:String(_n)});if(st||(st=(0,ve.aH)()),!st)throw br.create("no-options");const tn=an.get(_n);if(tn){if((0,ve.vZ)(st,tn.options)&&(0,ve.vZ)(Dt,tn.config))return tn;throw br.create("duplicate-app",{appName:_n})}const yn=new W.H0(_n);for(const lr of Fr.values())yn.addComponent(lr);const kn=new Un(st,Dt,yn);return an.set(_n,kn),kn}function ti(Fe,ke){if((0,ve.jU)())throw br.create("invalid-server-app-environment");let st;void 0===ke.automaticDataCollectionEnabled&&(ke.automaticDataCollectionEnabled=!1),st=Ri(Fe)?Fe.options:Fe;const Dt=Object.assign(Object.assign({},ke),st);if(void 0!==Dt.releaseOnDeref&&delete Dt.releaseOnDeref,void 0!==ke.releaseOnDeref&&typeof FinalizationRegistry>"u")throw br.create("finalization-registry-not-supported",{});const tn=""+(ii=JSON.stringify(Dt),[...ii].reduce((Ts,Mo)=>Math.imul(31,Ts)+Mo.charCodeAt(0)|0,0)),yn=Kn.get(tn);var ii;if(yn)return yn.incRefCount(ke.releaseOnDeref),yn;const kn=new W.H0(tn);for(const ii of Fr.values())kn.addComponent(ii);const lr=new Nn(st,ke,tn,kn);return Kn.set(tn,lr),lr}function Sr(Fe=Zt){const ke=an.get(Fe);if(!ke&&Fe===Zt&&(0,ve.aH)())return Pi();if(!ke)throw br.create("no-app",{appName:Fe});return ke}function gr(){return Array.from(an.values())}function Mr(Fe){return ir.apply(this,arguments)}function ir(){return(ir=(0,h.Z)(function*(Fe){let ke=!1;const st=Fe.name;an.has(st)?(ke=!0,an.delete(st)):Kn.has(st)&&Fe.decRefCount()<=0&&(Kn.delete(st),ke=!0),ke&&(yield Promise.all(Fe.container.getProviders().map(Dt=>Dt.delete())),Fe.isDeleted=!0)})).apply(this,arguments)}function Ee(Fe,ke,st){var Dt;let _n=null!==(Dt=un[Fe])&&void 0!==Dt?Dt:Fe;st&&(_n+=`-${st}`);const tn=_n.match(/\s|\//),yn=ke.match(/\s|\//);if(tn||yn){const kn=[`Unable to register library "${_n}" with version "${ke}":`];return tn&&kn.push(`library name "${_n}" contains illegal characters (whitespace or "/")`),tn&&yn&&kn.push("and"),yn&&kn.push(`version name "${ke}" contains illegal characters (whitespace or "/")`),void Mt.warn(kn.join(" "))}Cr(new W.wA(`${_n}-version`,()=>({library:_n,version:ke}),"VERSION"))}function re(Fe,ke){if(null!==Fe&&"function"!=typeof Fe)throw br.create("invalid-log-argument");(0,K.Am)(Fe,ke)}function z(Fe){(0,K.Ub)(Fe)}const F="firebase-heartbeat-database",k=1,oe="firebase-heartbeat-store";let Ne=null;function at(){return Ne||(Ne=function be(Fe,ke,{blocked:st,upgrade:Dt,blocking:_n,terminated:tn}={}){const yn=indexedDB.open(Fe,ke),kn=ce(yn);return Dt&&yn.addEventListener("upgradeneeded",lr=>{Dt(ce(yn.result),lr.oldVersion,lr.newVersion,ce(yn.transaction),lr)}),st&&yn.addEventListener("blocked",lr=>st(lr.oldVersion,lr.newVersion,lr)),kn.then(lr=>{tn&&lr.addEventListener("close",()=>tn()),_n&&lr.addEventListener("versionchange",ii=>_n(ii.oldVersion,ii.newVersion,ii))}).catch(()=>{}),kn}(F,k,{upgrade:(Fe,ke)=>{if(0===ke)try{Fe.createObjectStore(oe)}catch(st){console.warn(st)}}}).catch(Fe=>{throw br.create("idb-open",{originalErrorMessage:Fe.message})})),Ne}function Ft(){return(Ft=(0,h.Z)(function*(Fe){try{const st=(yield at()).transaction(oe),Dt=yield st.objectStore(oe).get(Gn(Fe));return yield st.done,Dt}catch(ke){if(ke instanceof ve.ZR)Mt.warn(ke.message);else{const st=br.create("idb-get",{originalErrorMessage:ke?.message});Mt.warn(st.message)}}})).apply(this,arguments)}function At(Fe,ke){return Kt.apply(this,arguments)}function Kt(){return(Kt=(0,h.Z)(function*(Fe,ke){try{const Dt=(yield at()).transaction(oe,"readwrite");yield Dt.objectStore(oe).put(ke,Gn(Fe)),yield Dt.done}catch(st){if(st instanceof ve.ZR)Mt.warn(st.message);else{const Dt=br.create("idb-set",{originalErrorMessage:st?.message});Mt.warn(Dt.message)}}})).apply(this,arguments)}function Gn(Fe){return`${Fe.name}!${Fe.options.appId}`}class ws{constructor(ke){this.container=ke,this._heartbeatsCache=null;const st=this.container.getProvider("app").getImmediate();this._storage=new Kr(st),this._heartbeatsCachePromise=this._storage.read().then(Dt=>(this._heartbeatsCache=Dt,Dt))}triggerHeartbeat(){var ke=this;return(0,h.Z)(function*(){var st,Dt;const tn=ke.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),yn=ls();if((null!=(null===(st=ke._heartbeatsCache)||void 0===st?void 0:st.heartbeats)||(ke._heartbeatsCache=yield ke._heartbeatsCachePromise,null!=(null===(Dt=ke._heartbeatsCache)||void 0===Dt?void 0:Dt.heartbeats)))&&ke._heartbeatsCache.lastSentHeartbeatDate!==yn&&!ke._heartbeatsCache.heartbeats.some(kn=>kn.date===yn))return ke._heartbeatsCache.heartbeats.push({date:yn,agent:tn}),ke._heartbeatsCache.heartbeats=ke._heartbeatsCache.heartbeats.filter(kn=>{const lr=new Date(kn.date).valueOf();return Date.now()-lr<=2592e6}),ke._storage.overwrite(ke._heartbeatsCache)})()}getHeartbeatsHeader(){var ke=this;return(0,h.Z)(function*(){var st;if(null===ke._heartbeatsCache&&(yield ke._heartbeatsCachePromise),null==(null===(st=ke._heartbeatsCache)||void 0===st?void 0:st.heartbeats)||0===ke._heartbeatsCache.heartbeats.length)return"";const Dt=ls(),{heartbeatsToSend:_n,unsentEntries:tn}=function Di(Fe,ke=1024){const st=[];let Dt=Fe.slice();for(const _n of Fe){const tn=st.find(yn=>yn.agent===_n.agent);if(tn){if(tn.dates.push(_n.date),ur(st)>ke){tn.dates.pop();break}}else if(st.push({agent:_n.agent,dates:[_n.date]}),ur(st)>ke){st.pop();break}Dt=Dt.slice(1)}return{heartbeatsToSend:st,unsentEntries:Dt}}(ke._heartbeatsCache.heartbeats),yn=(0,ve.L)(JSON.stringify({version:2,heartbeats:_n}));return ke._heartbeatsCache.lastSentHeartbeatDate=Dt,tn.length>0?(ke._heartbeatsCache.heartbeats=tn,yield ke._storage.overwrite(ke._heartbeatsCache)):(ke._heartbeatsCache.heartbeats=[],ke._storage.overwrite(ke._heartbeatsCache)),yn})()}}function ls(){return(new Date).toISOString().substring(0,10)}class Kr{constructor(ke){this.app=ke,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,h.Z)(function*(){return!!(0,ve.hl)()&&(0,ve.eu)().then(()=>!0).catch(()=>!1)})()}read(){var ke=this;return(0,h.Z)(function*(){if(yield ke._canUseIndexedDBPromise){const Dt=yield function vt(Fe){return Ft.apply(this,arguments)}(ke.app);return Dt?.heartbeats?Dt:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite(ke){var st=this;return(0,h.Z)(function*(){var Dt;if(yield st._canUseIndexedDBPromise){const tn=yield st.read();return At(st.app,{lastSentHeartbeatDate:null!==(Dt=ke.lastSentHeartbeatDate)&&void 0!==Dt?Dt:tn.lastSentHeartbeatDate,heartbeats:ke.heartbeats})}})()}add(ke){var st=this;return(0,h.Z)(function*(){var Dt;if(yield st._canUseIndexedDBPromise){const tn=yield st.read();return At(st.app,{lastSentHeartbeatDate:null!==(Dt=ke.lastSentHeartbeatDate)&&void 0!==Dt?Dt:tn.lastSentHeartbeatDate,heartbeats:[...tn.heartbeats,...ke.heartbeats]})}})()}}function ur(Fe){return(0,ve.L)(JSON.stringify({version:2,heartbeats:Fe})).length}!function ri(Fe){Cr(new W.wA("platform-logger",ke=>new ft(ke),"PRIVATE")),Cr(new W.wA("heartbeat",ke=>new ws(ke),"PRIVATE")),Ee(Jt,Pn,Fe),Ee(Jt,Pn,"esm2017"),Ee("fire-js","")}("")},4537:(Ot,Le,U)=>{U.d(Le,{H0:()=>ye,wA:()=>K});var h=U(5861),W=U(9058);class K{constructor(X,ie,pe){this.name=X,this.instanceFactory=ie,this.type=pe,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(X){return this.instantiationMode=X,this}setMultipleInstances(X){return this.multipleInstances=X,this}setServiceProps(X){return this.serviceProps=X,this}setInstanceCreatedCallback(X){return this.onInstanceCreated=X,this}}const ve="[DEFAULT]";class me{constructor(X,ie){this.name=X,this.container=ie,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(X){const ie=this.normalizeInstanceIdentifier(X);if(!this.instancesDeferred.has(ie)){const pe=new W.BH;if(this.instancesDeferred.set(ie,pe),this.isInitialized(ie)||this.shouldAutoInitialize())try{const ze=this.getOrInitializeService({instanceIdentifier:ie});ze&&pe.resolve(ze)}catch{}}return this.instancesDeferred.get(ie).promise}getImmediate(X){var ie;const pe=this.normalizeInstanceIdentifier(X?.identifier),ze=null!==(ie=X?.optional)&&void 0!==ie&&ie;if(!this.isInitialized(pe)&&!this.shouldAutoInitialize()){if(ze)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:pe})}catch(Ve){if(ze)return null;throw Ve}}getComponent(){return this.component}setComponent(X){if(X.name!==this.name)throw Error(`Mismatching Component ${X.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=X,this.shouldAutoInitialize()){if(function Ce(De){return"EAGER"===De.instantiationMode}(X))try{this.getOrInitializeService({instanceIdentifier:ve})}catch{}for(const[ie,pe]of this.instancesDeferred.entries()){const ze=this.normalizeInstanceIdentifier(ie);try{const Ve=this.getOrInitializeService({instanceIdentifier:ze});pe.resolve(Ve)}catch{}}}}clearInstance(X=ve){this.instancesDeferred.delete(X),this.instancesOptions.delete(X),this.instances.delete(X)}delete(){var X=this;return(0,h.Z)(function*(){const ie=Array.from(X.instances.values());yield Promise.all([...ie.filter(pe=>"INTERNAL"in pe).map(pe=>pe.INTERNAL.delete()),...ie.filter(pe=>"_delete"in pe).map(pe=>pe._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(X=ve){return this.instances.has(X)}getOptions(X=ve){return this.instancesOptions.get(X)||{}}initialize(X={}){const{options:ie={}}=X,pe=this.normalizeInstanceIdentifier(X.instanceIdentifier);if(this.isInitialized(pe))throw Error(`${this.name}(${pe}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const ze=this.getOrInitializeService({instanceIdentifier:pe,options:ie});for(const[Ve,ot]of this.instancesDeferred.entries())pe===this.normalizeInstanceIdentifier(Ve)&&ot.resolve(ze);return ze}onInit(X,ie){var pe;const ze=this.normalizeInstanceIdentifier(ie),Ve=null!==(pe=this.onInitCallbacks.get(ze))&&void 0!==pe?pe:new Set;Ve.add(X),this.onInitCallbacks.set(ze,Ve);const ot=this.instances.get(ze);return ot&&X(ot,ze),()=>{Ve.delete(X)}}invokeOnInitCallbacks(X,ie){const pe=this.onInitCallbacks.get(ie);if(pe)for(const ze of pe)try{ze(X,ie)}catch{}}getOrInitializeService({instanceIdentifier:X,options:ie={}}){let pe=this.instances.get(X);if(!pe&&this.component&&(pe=this.component.instanceFactory(this.container,{instanceIdentifier:(De=X,De===ve?void 0:De),options:ie}),this.instances.set(X,pe),this.instancesOptions.set(X,ie),this.invokeOnInitCallbacks(pe,X),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,X,pe)}catch{}var De;return pe||null}normalizeInstanceIdentifier(X=ve){return this.component?this.component.multipleInstances?X:ve:X}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ye{constructor(X){this.name=X,this.providers=new Map}addComponent(X){const ie=this.getProvider(X.name);if(ie.isComponentSet())throw new Error(`Component ${X.name} has already been registered with ${this.name}`);ie.setComponent(X)}addOrOverwriteComponent(X){this.getProvider(X.name).isComponentSet()&&this.providers.delete(X.name),this.addComponent(X)}getProvider(X){if(this.providers.has(X))return this.providers.get(X);const ie=new me(X,this);return this.providers.set(X,ie),ie}getProviders(){return Array.from(this.providers.values())}}},7879:(Ot,Le,U)=>{U.d(Le,{Am:()=>De,Ub:()=>ye,Yd:()=>Ce,in:()=>W});const h=[];var W=function(X){return X[X.DEBUG=0]="DEBUG",X[X.VERBOSE=1]="VERBOSE",X[X.INFO=2]="INFO",X[X.WARN=3]="WARN",X[X.ERROR=4]="ERROR",X[X.SILENT=5]="SILENT",X}(W||{});const K={debug:W.DEBUG,verbose:W.VERBOSE,info:W.INFO,warn:W.WARN,error:W.ERROR,silent:W.SILENT},ve=W.INFO,me={[W.DEBUG]:"log",[W.VERBOSE]:"log",[W.INFO]:"info",[W.WARN]:"warn",[W.ERROR]:"error"},we=(X,ie,...pe)=>{if(ie<X.logLevel)return;const ze=(new Date).toISOString(),Ve=me[ie];if(!Ve)throw new Error(`Attempted to log a message with an invalid logType (value: ${ie})`);console[Ve](`[${ze}]  ${X.name}:`,...pe)};class Ce{constructor(ie){this.name=ie,this._logLevel=ve,this._logHandler=we,this._userLogHandler=null,h.push(this)}get logLevel(){return this._logLevel}set logLevel(ie){if(!(ie in W))throw new TypeError(`Invalid value "${ie}" assigned to \`logLevel\``);this._logLevel=ie}setLogLevel(ie){this._logLevel="string"==typeof ie?K[ie]:ie}get logHandler(){return this._logHandler}set logHandler(ie){if("function"!=typeof ie)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=ie}get userLogHandler(){return this._userLogHandler}set userLogHandler(ie){this._userLogHandler=ie}debug(...ie){this._userLogHandler&&this._userLogHandler(this,W.DEBUG,...ie),this._logHandler(this,W.DEBUG,...ie)}log(...ie){this._userLogHandler&&this._userLogHandler(this,W.VERBOSE,...ie),this._logHandler(this,W.VERBOSE,...ie)}info(...ie){this._userLogHandler&&this._userLogHandler(this,W.INFO,...ie),this._logHandler(this,W.INFO,...ie)}warn(...ie){this._userLogHandler&&this._userLogHandler(this,W.WARN,...ie),this._logHandler(this,W.WARN,...ie)}error(...ie){this._userLogHandler&&this._userLogHandler(this,W.ERROR,...ie),this._logHandler(this,W.ERROR,...ie)}}function ye(X){h.forEach(ie=>{ie.setLogLevel(X)})}function De(X,ie){for(const pe of h){let ze=null;ie&&ie.level&&(ze=K[ie.level]),pe.userLogHandler=null===X?null:(Ve,ot,...Qe)=>{const mt=Qe.map(nt=>{if(null==nt)return null;if("string"==typeof nt)return nt;if("number"==typeof nt||"boolean"==typeof nt)return nt.toString();if(nt instanceof Error)return nt.message;try{return JSON.stringify(nt)}catch{return null}}).filter(nt=>nt).join(" ");ot>=(ze??Ve.logLevel)&&X({level:W[ot].toLowerCase(),message:mt,args:Qe,type:Ve.name})}}}},3182:(Ot,Le,U)=>{U.d(Le,{C6:()=>h.getApps,KN:()=>h.registerVersion,Mq:()=>h.getApp,ZF:()=>h.initializeApp});var h=U(534);(0,h.registerVersion)("firebase","10.10.0","app")},7142:(Ot,Le,U)=>{U.d(Le,{Z:()=>h.Z});var h=U(3106);h.Z.registerVersion("firebase","10.10.0","app-compat")},6365:(Ot,Le,U)=>{U.r(Le);var h=U(5861),W=U(3106),K=U(9010),ve=U(9058),Ce=(U(534),U(7879),U(4537));function ye(){return window}function ie(){return ie=(0,h.Z)(function*(z,F,k){var oe;const{BuildInfo:Ne}=ye();(0,K.au)(F.sessionId,"AuthEvent did not contain a session ID");const at=yield function nt(z){return Vt.apply(this,arguments)}(F.sessionId),vt={};return(0,K.av)()?vt.ibi=Ne.packageName:(0,K.aw)()?vt.apn=Ne.packageName:(0,K.ax)(z,"operation-not-supported-in-this-environment"),Ne.displayName&&(vt.appDisplayName=Ne.displayName),vt.sessionId=at,(0,K.ay)(z,k,F.type,void 0,null!==(oe=F.eventId)&&void 0!==oe?oe:void 0,vt)}),ie.apply(this,arguments)}function ze(){return(ze=(0,h.Z)(function*(z){const{BuildInfo:F}=ye(),k={};(0,K.av)()?k.iosBundleId=F.packageName:(0,K.aw)()?k.androidPackageName=F.packageName:(0,K.ax)(z,"operation-not-supported-in-this-environment"),yield(0,K.az)(z,k)})).apply(this,arguments)}function Qe(){return(Qe=(0,h.Z)(function*(z,F,k){const{cordova:oe}=ye();let Ne=()=>{};try{yield new Promise((at,vt)=>{let Ft=null;function At(){var dn;at();const ni=null===(dn=oe.plugins.browsertab)||void 0===dn?void 0:dn.close;"function"==typeof ni&&ni(),"function"==typeof k?.close&&k.close()}function Kt(){Ft||(Ft=window.setTimeout(()=>{vt((0,K.aB)(z,"redirect-cancelled-by-user"))},2e3))}function Gn(){"visible"===document?.visibilityState&&Kt()}F.addPassiveListener(At),document.addEventListener("resume",Kt,!1),(0,K.aw)()&&document.addEventListener("visibilitychange",Gn,!1),Ne=()=>{F.removePassiveListener(At),document.removeEventListener("resume",Kt,!1),document.removeEventListener("visibilitychange",Gn,!1),Ft&&window.clearTimeout(Ft)}})}finally{Ne()}})).apply(this,arguments)}function Vt(){return(Vt=(0,h.Z)(function*(z){const F=function ut(z){if((0,K.au)(/[0-9a-zA-Z]+/.test(z),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(z);const F=new ArrayBuffer(z.length),k=new Uint8Array(F);for(let oe=0;oe<z.length;oe++)k[oe]=z.charCodeAt(oe);return k}(z),k=yield crypto.subtle.digest("SHA-256",F);return Array.from(new Uint8Array(k)).map(Ne=>Ne.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class Be extends K.aD{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(F=>{this.resolveInialized=F})}addPassiveListener(F){this.passiveListeners.add(F)}removePassiveListener(F){this.passiveListeners.delete(F)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(F){return this.resolveInialized(),this.passiveListeners.forEach(k=>k(F)),super.onEvent(F)}initialized(){var F=this;return(0,h.Z)(function*(){yield F.initPromise})()}}function Je(z){return Te.apply(this,arguments)}function Te(){return(Te=(0,h.Z)(function*(z){const F=yield ft()._get(Gt(z));return F&&(yield ft()._remove(Gt(z))),F})).apply(this,arguments)}function et(){const z=[];for(let k=0;k<20;k++){const oe=Math.floor(62*Math.random());z.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(oe))}return z.join("")}function ft(){return(0,K.aE)(K.b)}function Gt(z){return(0,K.aF)("authEvent",z.config.apiKey,z.name)}function Mt(z){if(!z?.includes("?"))return{};const[F,...k]=z.split("?");return(0,ve.zd)(k.join("?"))}const Ae=class Ct{constructor(){this._redirectPersistence=K.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=K.aG,this._overrideRedirectResult=K.aH}_initialize(F){var k=this;return(0,h.Z)(function*(){const oe=F._key();let Ne=k.eventManagers.get(oe);return Ne||(Ne=new Be(F),k.eventManagers.set(oe,Ne),k.attachCallbackListeners(F,Ne)),Ne})()}_openPopup(F){(0,K.ax)(F,"operation-not-supported-in-this-environment")}_openRedirect(F,k,oe,Ne){var at=this;return(0,h.Z)(function*(){!function mt(z){var F,k,oe,Ne,at,vt,Ft,At,Kt,Gn;const dn=ye();(0,K.aC)("function"==typeof(null===(F=dn?.universalLinks)||void 0===F?void 0:F.subscribe),z,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,K.aC)(typeof(null===(k=dn?.BuildInfo)||void 0===k?void 0:k.packageName)<"u",z,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,K.aC)("function"==typeof(null===(at=null===(Ne=null===(oe=dn?.cordova)||void 0===oe?void 0:oe.plugins)||void 0===Ne?void 0:Ne.browsertab)||void 0===at?void 0:at.openUrl),z,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,K.aC)("function"==typeof(null===(At=null===(Ft=null===(vt=dn?.cordova)||void 0===vt?void 0:vt.plugins)||void 0===Ft?void 0:Ft.browsertab)||void 0===At?void 0:At.isAvailable),z,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,K.aC)("function"==typeof(null===(Gn=null===(Kt=dn?.cordova)||void 0===Kt?void 0:Kt.InAppBrowser)||void 0===Gn?void 0:Gn.open),z,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(F);const vt=yield at._initialize(F);yield vt.initialized(),vt.resetRedirect(),(0,K.aI)(),yield at._originValidation(F);const Ft=function be(z,F,k=null){return{type:F,eventId:k,urlResponse:null,sessionId:et(),postBody:null,tenantId:z.tenantId,error:(0,K.aB)(z,"no-auth-event")}}(F,oe,Ne);yield function Ie(z,F){return ft()._set(Gt(z),F)}(F,Ft);const At=yield function X(z,F,k){return ie.apply(this,arguments)}(F,Ft,k),Kt=yield function Ve(z){const{cordova:F}=ye();return new Promise(k=>{F.plugins.browsertab.isAvailable(oe=>{let Ne=null;oe?F.plugins.browsertab.openUrl(z):Ne=F.InAppBrowser.open(z,(0,K.aA)()?"_blank":"_system","location=yes"),k(Ne)})})}(At);return function ot(z,F,k){return Qe.apply(this,arguments)}(F,vt,Kt)})()}_isIframeWebStorageSupported(F,k){throw new Error("Method not implemented.")}_originValidation(F){const k=F._key();return this.originValidationPromises[k]||(this.originValidationPromises[k]=function pe(z){return ze.apply(this,arguments)}(F)),this.originValidationPromises[k]}attachCallbackListeners(F,k){const{universalLinks:oe,handleOpenURL:Ne,BuildInfo:at}=ye(),vt=setTimeout((0,h.Z)(function*(){yield Je(F),k.onEvent(Me())}),500),Ft=function(){var Gn=(0,h.Z)(function*(dn){clearTimeout(vt);const ni=yield Je(F);let ws=null;ni&&dn?.url&&(ws=function Oe(z,F){var k,oe;const Ne=function Pn(z){const F=Mt(z),k=F.link?decodeURIComponent(F.link):void 0,oe=Mt(k).link,Ne=F.deep_link_id?decodeURIComponent(F.deep_link_id):void 0;return Mt(Ne).link||Ne||oe||k||z}(F);if(Ne.includes("/__/auth/callback")){const at=Mt(Ne),vt=at.firebaseError?function Jt(z){try{return JSON.parse(z)}catch{return null}}(decodeURIComponent(at.firebaseError)):null,Ft=null===(oe=null===(k=vt?.code)||void 0===k?void 0:k.split("auth/"))||void 0===oe?void 0:oe[1],At=Ft?(0,K.aB)(Ft):null;return At?{type:z.type,eventId:z.eventId,tenantId:z.tenantId,error:At,urlResponse:null,sessionId:null,postBody:null}:{type:z.type,eventId:z.eventId,tenantId:z.tenantId,sessionId:z.sessionId,urlResponse:Ne,postBody:null}}return null}(ni,dn.url)),k.onEvent(ws||Me())});return function(ni){return Gn.apply(this,arguments)}}();typeof oe<"u"&&"function"==typeof oe.subscribe&&oe.subscribe(null,Ft);const At=Ne,Kt=`${at.packageName.toLowerCase()}://`;ye().handleOpenURL=function(){var Gn=(0,h.Z)(function*(dn){if(dn.toLowerCase().startsWith(Kt)&&Ft({url:dn}),"function"==typeof At)try{At(dn)}catch(ni){console.error(ni)}});return function(dn){return Gn.apply(this,arguments)}}()}};function Me(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,K.aB)("no-auth-event")}}function Et(){var z;return(null===(z=self?.location)||void 0===z?void 0:z.protocol)||null}function $n(z=(0,ve.z$)()){return!("file:"!==Et()&&"ionic:"!==Et()&&"capacitor:"!==Et()||!z.toLowerCase().match(/iphone|ipad|ipod|android/))}function Hn(){try{const z=self.localStorage,F=K.aN();if(z)return z.setItem(F,"1"),z.removeItem(F),!function ar(z=(0,ve.z$)()){return function on(){return(0,ve.w1)()&&11===document?.documentMode}()||function Wt(z=(0,ve.z$)()){return/Edge\/\d+/.test(z)}(z)}()||(0,ve.hl)()}catch{return Ln()&&(0,ve.hl)()}return!1}function Ln(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function xt(){return(function It(){return"http:"===Et()||"https:"===Et()}()||(0,ve.ru)()||$n())&&!function $t(){return(0,ve.b$)()||(0,ve.UG)()}()&&Hn()&&!Ln()}function zn(){return $n()&&typeof document<"u"}function Ir(){return(Ir=(0,h.Z)(function*(){return!!zn()&&new Promise(z=>{const F=setTimeout(()=>{z(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(F),z(!0)})})})).apply(this,arguments)}const Zn={LOCAL:"local",NONE:"none",SESSION:"session"},xn=K.aC,Yr="persistence";function un(z){return an.apply(this,arguments)}function an(){return(an=(0,h.Z)(function*(z){yield z._initializationPromise;const F=Fr(),k=K.aF(Yr,z.config.apiKey,z.name);F&&F.setItem(k,z._getPersistence())})).apply(this,arguments)}function Fr(){var z;try{return(null===(z=function Vn(){return typeof window<"u"?window:null}())||void 0===z?void 0:z.sessionStorage)||null}catch{return null}}const ei=K.aC;class Mn{constructor(){this.browserResolver=K.aE(K.k),this.cordovaResolver=K.aE(Ae),this.underlyingResolver=null,this._redirectPersistence=K.a,this._completeRedirectFn=K.aG,this._overrideRedirectResult=K.aH}_initialize(F){var k=this;return(0,h.Z)(function*(){return yield k.selectUnderlyingResolver(),k.assertedUnderlyingResolver._initialize(F)})()}_openPopup(F,k,oe,Ne){var at=this;return(0,h.Z)(function*(){return yield at.selectUnderlyingResolver(),at.assertedUnderlyingResolver._openPopup(F,k,oe,Ne)})()}_openRedirect(F,k,oe,Ne){var at=this;return(0,h.Z)(function*(){return yield at.selectUnderlyingResolver(),at.assertedUnderlyingResolver._openRedirect(F,k,oe,Ne)})()}_isIframeWebStorageSupported(F,k){this.assertedUnderlyingResolver._isIframeWebStorageSupported(F,k)}_originValidation(F){return this.assertedUnderlyingResolver._originValidation(F)}get _shouldInitProactively(){return zn()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return ei(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var F=this;return(0,h.Z)(function*(){if(F.underlyingResolver)return;const k=yield function Sn(){return Ir.apply(this,arguments)}();F.underlyingResolver=k?F.cordovaResolver:F.browserResolver})()}}function Cr(z){return z.unwrap()}function Ht(z){return Rn(z)}function Rn(z){const{_tokenResponse:F}=z instanceof ve.ZR?z.customData:z;if(!F)return null;if(!(z instanceof ve.ZR)&&"temporaryProof"in F&&"phoneNumber"in F)return K.P.credentialFromResult(z);const k=F.providerId;if(!k||k===K.p.PASSWORD)return null;let oe;switch(k){case K.p.GOOGLE:oe=K.X;break;case K.p.FACEBOOK:oe=K.W;break;case K.p.GITHUB:oe=K.Y;break;case K.p.TWITTER:oe=K.$;break;default:const{oauthIdToken:Ne,oauthAccessToken:at,oauthTokenSecret:vt,pendingToken:Ft,nonce:At}=F;return at||vt||Ne||Ft?Ft?k.startsWith("saml.")?K.aQ._create(k,Ft):K.N._fromParams({providerId:k,signInMethod:k,pendingToken:Ft,idToken:Ne,accessToken:at}):new K.Z(k).credential({idToken:Ne,accessToken:at,rawNonce:At}):null}return z instanceof ve.ZR?oe.credentialFromError(z):oe.credentialFromResult(z)}function qt(z,F){return F.catch(k=>{throw k instanceof ve.ZR&&function Ri(z,F){var k;const oe=null===(k=F.customData)||void 0===k?void 0:k._tokenResponse;if("auth/multi-factor-auth-required"===F?.code)F.resolver=new Un(z,K.as(z,F));else if(oe){const Ne=Rn(F),at=F;Ne&&(at.credential=Ne,at.tenantId=oe.tenantId||void 0,at.email=oe.email||void 0,at.phoneNumber=oe.phoneNumber||void 0)}}(z,k),k}).then(k=>{const Ne=k.user;return{operationType:k.operationType,credential:Ht(k),additionalUserInfo:K.aq(k),user:Nn.getOrCreate(Ne)}})}function Xn(z,F){return br.apply(this,arguments)}function br(){return(br=(0,h.Z)(function*(z,F){const k=yield F;return{verificationId:k.verificationId,confirm:oe=>qt(z,k.confirm(oe))}})).apply(this,arguments)}class Un{constructor(F,k){this.resolver=k,this.auth=function ns(z){return z.wrapped()}(F)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(F){return qt(Cr(this.auth),this.resolver.resolveSignIn(F))}}class Nn{constructor(F){this._delegate=F,this.multiFactor=K.at(F)}static getOrCreate(F){return Nn.USER_MAP.has(F)||Nn.USER_MAP.set(F,new Nn(F)),Nn.USER_MAP.get(F)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(F){return this._delegate.getIdTokenResult(F)}getIdToken(F){return this._delegate.getIdToken(F)}linkAndRetrieveDataWithCredential(F){return this.linkWithCredential(F)}linkWithCredential(F){var k=this;return(0,h.Z)(function*(){return qt(k.auth,K.a2(k._delegate,F))})()}linkWithPhoneNumber(F,k){var oe=this;return(0,h.Z)(function*(){return Xn(oe.auth,K.l(oe._delegate,F,k))})()}linkWithPopup(F){var k=this;return(0,h.Z)(function*(){return qt(k.auth,K.d(k._delegate,F,Mn))})()}linkWithRedirect(F){var k=this;return(0,h.Z)(function*(){return yield un(K.aJ(k.auth)),K.g(k._delegate,F,Mn)})()}reauthenticateAndRetrieveDataWithCredential(F){return this.reauthenticateWithCredential(F)}reauthenticateWithCredential(F){var k=this;return(0,h.Z)(function*(){return qt(k.auth,K.a3(k._delegate,F))})()}reauthenticateWithPhoneNumber(F,k){return Xn(this.auth,K.r(this._delegate,F,k))}reauthenticateWithPopup(F){return qt(this.auth,K.e(this._delegate,F,Mn))}reauthenticateWithRedirect(F){var k=this;return(0,h.Z)(function*(){return yield un(K.aJ(k.auth)),K.h(k._delegate,F,Mn)})()}sendEmailVerification(F){return K.ag(this._delegate,F)}unlink(F){var k=this;return(0,h.Z)(function*(){return yield K.ap(k._delegate,F),k})()}updateEmail(F){return K.al(this._delegate,F)}updatePassword(F){return K.am(this._delegate,F)}updatePhoneNumber(F){return K.u(this._delegate,F)}updateProfile(F){return K.ak(this._delegate,F)}verifyBeforeUpdateEmail(F,k){return K.ah(this._delegate,F,k)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Nn.USER_MAP=new WeakMap;const Ur=K.aC;let Pi=(()=>{class z{constructor(k,oe){if(this.app=k,oe.isInitialized())return this._delegate=oe.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:Ne}=k.options;Ur(Ne,"invalid-api-key",{appName:k.name}),Ur(Ne,"invalid-api-key",{appName:k.name});const at=typeof window<"u"?Mn:void 0;this._delegate=oe.initialize({options:{persistence:Sr(Ne,k.name),popupRedirectResolver:at}}),this._delegate._updateErrorMap(K.G),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Nn.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(k){this._delegate.languageCode=k}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(k){this._delegate.tenantId=k}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(k,oe){K.K(this._delegate,k,oe)}applyActionCode(k){return K.a7(this._delegate,k)}checkActionCode(k){return K.a8(this._delegate,k)}confirmPasswordReset(k,oe){return K.a6(this._delegate,k,oe)}createUserWithEmailAndPassword(k,oe){var Ne=this;return(0,h.Z)(function*(){return qt(Ne._delegate,K.aa(Ne._delegate,k,oe))})()}fetchProvidersForEmail(k){return this.fetchSignInMethodsForEmail(k)}fetchSignInMethodsForEmail(k){return K.af(this._delegate,k)}isSignInWithEmailLink(k){return K.ad(this._delegate,k)}getRedirectResult(){var k=this;return(0,h.Z)(function*(){Ur(xt(),k._delegate,"operation-not-supported-in-this-environment");const oe=yield K.j(k._delegate,Mn);return oe?qt(k._delegate,Promise.resolve(oe)):{credential:null,user:null}})()}addFrameworkForLogging(k){!function He(z,F){(0,K.aJ)(z)._logFramework(F)}(this._delegate,k)}onAuthStateChanged(k,oe,Ne){const{next:at,error:vt,complete:Ft}=ti(k,oe,Ne);return this._delegate.onAuthStateChanged(at,vt,Ft)}onIdTokenChanged(k,oe,Ne){const{next:at,error:vt,complete:Ft}=ti(k,oe,Ne);return this._delegate.onIdTokenChanged(at,vt,Ft)}sendSignInLinkToEmail(k,oe){return K.ac(this._delegate,k,oe)}sendPasswordResetEmail(k,oe){return K.a5(this._delegate,k,oe||void 0)}setPersistence(k){var oe=this;return(0,h.Z)(function*(){let Ne;switch(function Zt(z,F){xn(Object.values(Zn).includes(F),z,"invalid-persistence-type"),(0,ve.b$)()?xn(F!==Zn.SESSION,z,"unsupported-persistence-type"):(0,ve.UG)()?xn(F===Zn.NONE,z,"unsupported-persistence-type"):Ln()?xn(F===Zn.NONE||F===Zn.LOCAL&&(0,ve.hl)(),z,"unsupported-persistence-type"):xn(F===Zn.NONE||Hn(),z,"unsupported-persistence-type")}(oe._delegate,k),k){case Zn.SESSION:Ne=K.a;break;case Zn.LOCAL:Ne=(yield K.aE(K.i)._isAvailable())?K.i:K.b;break;case Zn.NONE:Ne=K.U;break;default:return K.ax("argument-error",{appName:oe._delegate.name})}return oe._delegate.setPersistence(Ne)})()}signInAndRetrieveDataWithCredential(k){return this.signInWithCredential(k)}signInAnonymously(){return qt(this._delegate,K.a0(this._delegate))}signInWithCredential(k){return qt(this._delegate,K.a1(this._delegate,k))}signInWithCustomToken(k){return qt(this._delegate,K.a4(this._delegate,k))}signInWithEmailAndPassword(k,oe){return qt(this._delegate,K.ab(this._delegate,k,oe))}signInWithEmailLink(k,oe){return qt(this._delegate,K.ae(this._delegate,k,oe))}signInWithPhoneNumber(k,oe){return Xn(this._delegate,K.s(this._delegate,k,oe))}signInWithPopup(k){var oe=this;return(0,h.Z)(function*(){return Ur(xt(),oe._delegate,"operation-not-supported-in-this-environment"),qt(oe._delegate,K.c(oe._delegate,k,Mn))})()}signInWithRedirect(k){var oe=this;return(0,h.Z)(function*(){return Ur(xt(),oe._delegate,"operation-not-supported-in-this-environment"),yield un(oe._delegate),K.f(oe._delegate,k,Mn)})()}updateCurrentUser(k){return this._delegate.updateCurrentUser(k)}verifyPasswordResetCode(k){return K.a9(this._delegate,k)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return z.Persistence=Zn,z})();function ti(z,F,k){let oe=z;"function"!=typeof z&&({next:oe,error:F,complete:k}=z);const Ne=oe;return{next:vt=>Ne(vt&&Nn.getOrCreate(vt)),error:F,complete:k}}function Sr(z,F){const k=function Kn(z,F){const k=Fr();if(!k)return[];const oe=K.aF(Yr,z,F);switch(k.getItem(oe)){case Zn.NONE:return[K.U];case Zn.LOCAL:return[K.i,K.a];case Zn.SESSION:return[K.a];default:return[]}}(z,F);if(typeof self<"u"&&!k.includes(K.i)&&k.push(K.i),typeof window<"u")for(const oe of[K.b,K.a])k.includes(oe)||k.push(oe);return k.includes(K.U)||k.push(K.U),k}class gr{constructor(){this.providerId="phone",this._delegate=new K.P(Cr(W.Z.auth()))}static credential(F,k){return K.P.credential(F,k)}verifyPhoneNumber(F,k){return this._delegate.verifyPhoneNumber(F,k)}unwrap(){return this._delegate}}gr.PHONE_SIGN_IN_METHOD=K.P.PHONE_SIGN_IN_METHOD,gr.PROVIDER_ID=K.P.PROVIDER_ID;const Mr=K.aC;class ir{constructor(F,k,oe=W.Z.app()){var Ne;Mr(null===(Ne=oe.options)||void 0===Ne?void 0:Ne.apiKey,"invalid-api-key",{appName:oe.name}),this._delegate=new K.R(oe.auth(),F,k),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function re(z){z.INTERNAL.registerComponent(new Ce.wA("auth-compat",F=>{const k=F.getProvider("app-compat").getImmediate(),oe=F.getProvider("auth");return new Pi(k,oe)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:K.A.EMAIL_SIGNIN,PASSWORD_RESET:K.A.PASSWORD_RESET,RECOVER_EMAIL:K.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:K.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:K.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:K.A.VERIFY_EMAIL}},EmailAuthProvider:K.V,FacebookAuthProvider:K.W,GithubAuthProvider:K.Y,GoogleAuthProvider:K.X,OAuthProvider:K.Z,SAMLAuthProvider:K._,PhoneAuthProvider:gr,PhoneMultiFactorGenerator:K.m,RecaptchaVerifier:ir,TwitterAuthProvider:K.$,Auth:Pi,AuthCredential:K.L,Error:ve.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),z.registerVersion("@firebase/auth-compat","0.5.5")}(W.Z)},7679:(Ot,Le,U)=>{U.d(Le,{BZ:()=>X,Vd:()=>Ie,a:()=>ce,lQ:()=>Je,wT:()=>Vt});var h=U(5879),W=U(6814),K=U(2096),ve=U(5619),me=U(2181),we=U(95);const Ce=new h.OlP("recaptcha-language"),ye=new h.OlP("recaptcha-base-url"),De=new h.OlP("recaptcha-nonce-tag"),X=new h.OlP("recaptcha-settings"),ie=new h.OlP("recaptcha-v3-site-key"),pe=new h.OlP("recaptcha-loader-options"),ot={loadScript:function ze(Te,Oe,et,{url:ft,lang:Gt,nonce:Jt}={}){window.ng2recaptchaloaded=()=>{et(grecaptcha)};const Pn=document.createElement("script");Pn.innerHTML="";const{url:Mt,nonce:kt}=Oe(new URL(ft||"https://www.google.com/recaptcha/api.js"));Mt.searchParams.set("render","explicit"===Te?Te:Te.key),Mt.searchParams.set("onload","ng2recaptchaloaded"),Mt.searchParams.set("trustedtypes","true"),Gt&&Mt.searchParams.set("hl",Gt),Pn.src=Mt.href;const Ct=kt||Jt;Ct&&Pn.setAttribute("nonce",Ct),Pn.async=!0,Pn.defer=!0,document.head.appendChild(Pn)},newLoadScript:function Ve({v3SiteKey:Te,onBeforeLoad:Oe,onLoaded:et}){ot.loadScript(Te?{key:Te}:"explicit",Oe,et)}};let mt=(()=>{class Te{static#e=this.ready=null;constructor(et,ft,Gt,Jt,Pn,Mt){this.platformId=et,this.language=ft,this.baseUrl=Gt,this.nonce=Jt,this.v3SiteKey=Pn,this.options=Mt;const kt=this.init();this.ready=kt?function Qe(Te){return Te.asObservable().pipe((0,me.h)(Oe=>null!==Oe))}(kt):(0,K.of)()}init(){if(Te.ready)return Te.ready;if(!(0,W.NF)(this.platformId))return;const et=new ve.X(null);return Te.ready=et,ot.newLoadScript({v3SiteKey:this.v3SiteKey,onBeforeLoad:ft=>{if(this.options?.onBeforeLoad)return this.options.onBeforeLoad(ft);const Gt=new URL(this.baseUrl??ft);return this.language&&Gt.searchParams.set("hl",this.language),{url:Gt,nonce:this.nonce}},onLoaded:ft=>{let Gt=ft;this.options?.onLoaded&&(Gt=this.options.onLoaded(ft)),et.next(Gt)}}),et}static#t=this.\u0275fac=function(ft){return new(ft||Te)(h.LFG(h.Lbi),h.LFG(Ce,8),h.LFG(ye,8),h.LFG(De,8),h.LFG(ie,8),h.LFG(pe,8))};static#n=this.\u0275prov=h.Yz7({token:Te,factory:Te.\u0275fac})}return Te})(),nt=0,Vt=(()=>{class Te{constructor(et,ft,Gt,Jt){this.elementRef=et,this.loader=ft,this.zone=Gt,this.id="ngrecaptcha-"+nt++,this.errorMode="default",this.resolved=new h.vpe,this.error=new h.vpe,this.errored=new h.vpe,Jt&&(this.siteKey=Jt.siteKey,this.theme=Jt.theme,this.type=Jt.type,this.size=Jt.size,this.badge=Jt.badge)}ngAfterViewInit(){this.subscription=this.loader.ready.subscribe(et=>{null!=et&&et.render instanceof Function&&(this.grecaptcha=et,this.renderRecaptcha())})}ngOnDestroy(){this.grecaptchaReset(),this.subscription&&this.subscription.unsubscribe()}execute(){"invisible"===this.size&&(null!=this.widget?this.grecaptcha.execute(this.widget):this.executeRequested=!0)}reset(){null!=this.widget&&(this.grecaptcha.getResponse(this.widget)&&this.resolved.emit(null),this.grecaptchaReset())}get __unsafe_widgetValue(){return null!=this.widget?this.grecaptcha.getResponse(this.widget):null}expired(){this.resolved.emit(null)}onError(et){this.error.emit(et),this.errored.emit(et)}captchaResponseCallback(et){this.resolved.emit(et)}grecaptchaReset(){null!=this.widget&&this.zone.runOutsideAngular(()=>this.grecaptcha.reset(this.widget))}renderRecaptcha(){const et={badge:this.badge,callback:ft=>{this.zone.run(()=>this.captchaResponseCallback(ft))},"expired-callback":()=>{this.zone.run(()=>this.expired())},sitekey:this.siteKey,size:this.size,tabindex:this.tabIndex,theme:this.theme,type:this.type};"handled"===this.errorMode&&(et["error-callback"]=(...ft)=>{this.zone.run(()=>this.onError(ft))}),this.widget=this.grecaptcha.render(this.elementRef.nativeElement,et),!0===this.executeRequested&&(this.executeRequested=!1,this.execute())}static#e=this.\u0275fac=function(ft){return new(ft||Te)(h.Y36(h.SBq),h.Y36(mt),h.Y36(h.R0b),h.Y36(X,8))};static#t=this.\u0275cmp=h.Xpm({type:Te,selectors:[["re-captcha"]],hostVars:1,hostBindings:function(ft,Gt){2&ft&&h.uIk("id",Gt.id)},inputs:{id:"id",siteKey:"siteKey",theme:"theme",type:"type",size:"size",tabIndex:"tabIndex",badge:"badge",errorMode:"errorMode"},outputs:{resolved:"resolved",error:"error",errored:"errored"},exportAs:["reCaptcha"],decls:0,vars:0,template:function(ft,Gt){},encapsulation:2})}return Te})(),ut=(()=>{class Te{static#e=this.\u0275fac=function(ft){return new(ft||Te)};static#t=this.\u0275mod=h.oAB({type:Te});static#n=this.\u0275inj=h.cJS({})}return Te})(),ce=(()=>{class Te{static#e=this.\u0275fac=function(ft){return new(ft||Te)};static#t=this.\u0275mod=h.oAB({type:Te});static#n=this.\u0275inj=h.cJS({providers:[mt],imports:[ut]})}return Te})(),Ie=(()=>{class Te{constructor(et){this.host=et,this.requiresControllerReset=!1}writeValue(et){et?this.host.__unsafe_widgetValue!==et&&!this.host.__unsafe_widgetValue&&(this.requiresControllerReset=!0):this.host.reset()}registerOnChange(et){this.onChange=et,this.requiresControllerReset&&(this.requiresControllerReset=!1,this.onChange(null))}registerOnTouched(et){this.onTouched=et}onResolve(et){this.onChange&&this.onChange(et),this.onTouched&&this.onTouched()}static#e=this.\u0275fac=function(ft){return new(ft||Te)(h.Y36(Vt))};static#t=this.\u0275dir=h.lG2({type:Te,selectors:[["re-captcha","formControlName",""],["re-captcha","formControl",""],["re-captcha","ngModel",""]],hostBindings:function(ft,Gt){1&ft&&h.NdJ("resolved",function(Pn){return Gt.onResolve(Pn)})},features:[h._Bn([{multi:!0,provide:we.JU,useExisting:(0,h.Gpc)(()=>Te)}])]})}return Te})(),Je=(()=>{class Te{static#e=this.\u0275fac=function(ft){return new(ft||Te)};static#t=this.\u0275mod=h.oAB({type:Te});static#n=this.\u0275inj=h.cJS({imports:[we.u5,ut]})}return Te})()},8672:(Ot,Le,U)=>{U.d(Le,{Ro:()=>Be,ef:()=>be,t2:()=>Vt});var h=U(5879),W=U(5619),K=U(8645),ve=U(2181),me=U(9773),we=U(6825),Ce=U(6814),ye=U(6593);const De=["overlay"];function X(Ie,Je){1&Ie&&h._UZ(0,"div")}function ie(Ie,Je){if(1&Ie&&(h.TgZ(0,"div"),h.YNc(1,X,1,0,"div",6),h.qZA()),2&Ie){const Te=h.oxw(2);h.Tol(Te.spinner.class),h.Udp("color",Te.spinner.color),h.xp6(1),h.Q6J("ngForOf",Te.spinner.divArray)}}function pe(Ie,Je){if(1&Ie&&(h._UZ(0,"div",7),h.ALo(1,"safeHtml")),2&Ie){const Te=h.oxw(2);h.Q6J("innerHTML",h.lcZ(1,1,Te.template),h.oJD)}}function ze(Ie,Je){if(1&Ie&&(h.TgZ(0,"div",1,2),h.YNc(2,ie,2,5,"div",3),h.YNc(3,pe,2,3,"div",4),h.TgZ(4,"div",5),h.Hsn(5),h.qZA()()),2&Ie){const Te=h.oxw();h.Udp("background-color",Te.spinner.bdColor)("z-index",Te.spinner.zIndex)("position",Te.spinner.fullScreen?"fixed":"absolute"),h.Q6J("@.disabled",Te.disableAnimation)("@fadeIn","in"),h.xp6(2),h.Q6J("ngIf",!Te.template),h.xp6(1),h.Q6J("ngIf",Te.template),h.xp6(1),h.Udp("z-index",Te.spinner.zIndex)}}const Ve=["*"],ot={"ball-8bits":16,"ball-atom":4,"ball-beat":3,"ball-circus":5,"ball-climbing-dot":4,"ball-clip-rotate":1,"ball-clip-rotate-multiple":2,"ball-clip-rotate-pulse":2,"ball-elastic-dots":5,"ball-fall":3,"ball-fussion":4,"ball-grid-beat":9,"ball-grid-pulse":9,"ball-newton-cradle":4,"ball-pulse":3,"ball-pulse-rise":5,"ball-pulse-sync":3,"ball-rotate":1,"ball-running-dots":5,"ball-scale":1,"ball-scale-multiple":3,"ball-scale-pulse":2,"ball-scale-ripple":1,"ball-scale-ripple-multiple":3,"ball-spin":8,"ball-spin-clockwise":8,"ball-spin-clockwise-fade":8,"ball-spin-clockwise-fade-rotating":8,"ball-spin-fade":8,"ball-spin-fade-rotating":8,"ball-spin-rotate":2,"ball-square-clockwise-spin":8,"ball-square-spin":8,"ball-triangle-path":3,"ball-zig-zag":2,"ball-zig-zag-deflect":2,cog:1,"cube-transition":2,fire:3,"line-scale":5,"line-scale-party":5,"line-scale-pulse-out":5,"line-scale-pulse-out-rapid":5,"line-spin-clockwise-fade":8,"line-spin-clockwise-fade-rotating":8,"line-spin-fade":8,"line-spin-fade-rotating":8,pacman:6,"square-jelly-box":2,"square-loader":1,"square-spin":1,timer:1,"triangle-skew-spin":1},mt="primary";class nt{constructor(Je){Object.assign(this,Je)}static create(Je){return!Je?.template&&!Je?.type&&console.warn('[ngx-spinner]: Property "type" is missed. Please, provide animation type to <ngx-spinner> component\n        and ensure css is added to angular.json file'),new nt(Je)}}let Vt=(()=>{class Ie{constructor(){this.spinnerObservable=new W.X(null)}getSpinner(Te){return this.spinnerObservable.asObservable().pipe((0,ve.h)(Oe=>Oe&&Oe.name===Te))}show(Te=mt,Oe){return new Promise((et,ft)=>{setTimeout(()=>{Oe&&Object.keys(Oe).length?(Oe.name=Te,this.spinnerObservable.next(new nt({...Oe,show:!0})),et(!0)):(this.spinnerObservable.next(new nt({name:Te,show:!0})),et(!0))},10)})}hide(Te=mt,Oe=10){return new Promise((et,ft)=>{setTimeout(()=>{this.spinnerObservable.next(new nt({name:Te,show:!1})),et(!0)},Oe)})}static#e=this.\u0275fac=function(Oe){return new(Oe||Ie)};static#t=this.\u0275prov=h.Yz7({token:Ie,factory:Ie.\u0275fac,providedIn:"root"})}return Ie})();const ut=new h.OlP("NGX_SPINNER_CONFIG");let ce=(()=>{class Ie{constructor(Te){this._sanitizer=Te}transform(Te){if(Te)return this._sanitizer.bypassSecurityTrustHtml(Te)}static#e=this.\u0275fac=function(Oe){return new(Oe||Ie)(h.Y36(ye.H7,16))};static#t=this.\u0275pipe=h.Yjl({name:"safeHtml",type:Ie,pure:!0})}return Ie})(),Be=(()=>{class Ie{constructor(Te,Oe,et,ft){this.spinnerService=Te,this.changeDetector=Oe,this.elementRef=et,this.globalConfig=ft,this.disableAnimation=!1,this.spinner=new nt,this.ngUnsubscribe=new K.x,this.setDefaultOptions=()=>{const{type:Gt}=this.globalConfig??{};this.spinner=nt.create({name:this.name,bdColor:this.bdColor,size:this.size,color:this.color,type:this.type??Gt,fullScreen:this.fullScreen,divArray:this.divArray,divCount:this.divCount,show:this.show,zIndex:this.zIndex,template:this.template,showSpinner:this.showSpinner})},this.bdColor="rgba(51,51,51,0.8)",this.zIndex=99999,this.color="#fff",this.size="large",this.fullScreen=!0,this.name=mt,this.template=null,this.showSpinner=!1,this.divArray=[],this.divCount=0,this.show=!1}initObservable(){this.spinnerService.getSpinner(this.name).pipe((0,me.R)(this.ngUnsubscribe)).subscribe(Te=>{this.setDefaultOptions(),Object.assign(this.spinner,Te),Te.show&&this.onInputChange(),this.changeDetector.detectChanges()})}ngOnInit(){this.setDefaultOptions(),this.initObservable()}isSpinnerZone(Te){return Te===this.elementRef.nativeElement.parentElement||Te.parentNode&&this.isSpinnerZone(Te.parentNode)}ngOnChanges(Te){for(const Oe in Te)if(Oe){const et=Te[Oe];if(et.isFirstChange())return;typeof et.currentValue<"u"&&et.currentValue!==et.previousValue&&""!==et.currentValue&&(this.spinner[Oe]=et.currentValue,"showSpinner"===Oe&&(et.currentValue?this.spinnerService.show(this.spinner.name,this.spinner):this.spinnerService.hide(this.spinner.name)),"name"===Oe&&this.initObservable())}}getClass(Te,Oe){this.spinner.divCount=ot[Te],this.spinner.divArray=Array(this.spinner.divCount).fill(0).map((ft,Gt)=>Gt);let et="";switch(Oe.toLowerCase()){case"small":et="la-sm";break;case"medium":et="la-2x";break;case"large":et="la-3x"}return"la-"+Te+" "+et}onInputChange(){this.spinner.class=this.getClass(this.spinner.type,this.spinner.size)}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}static#e=this.\u0275fac=function(Oe){return new(Oe||Ie)(h.Y36(Vt),h.Y36(h.sBO),h.Y36(h.SBq),h.Y36(ut,8))};static#t=this.\u0275cmp=h.Xpm({type:Ie,selectors:[["ngx-spinner"]],viewQuery:function(Oe,et){if(1&Oe&&h.Gf(De,5),2&Oe){let ft;h.iGM(ft=h.CRH())&&(et.spinnerDOM=ft.first)}},inputs:{bdColor:"bdColor",size:"size",color:"color",type:"type",fullScreen:"fullScreen",name:"name",zIndex:"zIndex",template:"template",showSpinner:"showSpinner",disableAnimation:"disableAnimation"},features:[h.TTD],ngContentSelectors:Ve,decls:1,vars:1,consts:[["class","ngx-spinner-overlay",3,"background-color","z-index","position",4,"ngIf"],[1,"ngx-spinner-overlay"],["overlay",""],[3,"class","color",4,"ngIf"],[3,"innerHTML",4,"ngIf"],[1,"loading-text"],[4,"ngFor","ngForOf"],[3,"innerHTML"]],template:function(Oe,et){1&Oe&&(h.F$t(),h.YNc(0,ze,6,12,"div",0)),2&Oe&&h.Q6J("ngIf",et.spinner.show)},dependencies:[Ce.sg,Ce.O5,ce],styles:[".ngx-spinner-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%}.ngx-spinner-overlay[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:not(.loading-text){top:50%;left:50%;margin:0;position:absolute;transform:translate(-50%,-50%)}.loading-text[_ngcontent-%COMP%]{position:absolute;top:60%;left:50%;transform:translate(-50%,-60%)}"],data:{animation:[(0,we.X$)("fadeIn",[(0,we.SB)("in",(0,we.oB)({opacity:1})),(0,we.eR)(":enter",[(0,we.oB)({opacity:0}),(0,we.jt)(300)]),(0,we.eR)(":leave",(0,we.jt)(200,(0,we.oB)({opacity:0})))])]},changeDetection:0})}return Ie})(),be=(()=>{class Ie{static forRoot(Te){return{ngModule:Ie,providers:[{provide:ut,useValue:Te}]}}static#e=this.\u0275fac=function(Oe){return new(Oe||Ie)};static#t=this.\u0275mod=h.oAB({type:Ie});static#n=this.\u0275inj=h.cJS({imports:[Ce.ez]})}return Ie})()},5861:(Ot,Le,U)=>{function h(K,ve,me,we,Ce,ye,De){try{var X=K[ye](De),ie=X.value}catch(pe){return void me(pe)}X.done?ve(ie):Promise.resolve(ie).then(we,Ce)}function W(K){return function(){var ve=this,me=arguments;return new Promise(function(we,Ce){var ye=K.apply(ve,me);function De(ie){h(ye,we,Ce,De,X,"next",ie)}function X(ie){h(ye,we,Ce,De,X,"throw",ie)}De(void 0)})}}U.d(Le,{Z:()=>W})},7582:(Ot,Le,U)=>{function ve(Ae,Me){var He={};for(var Ue in Ae)Object.prototype.hasOwnProperty.call(Ae,Ue)&&Me.indexOf(Ue)<0&&(He[Ue]=Ae[Ue]);if(null!=Ae&&"function"==typeof Object.getOwnPropertySymbols){var Ge=0;for(Ue=Object.getOwnPropertySymbols(Ae);Ge<Ue.length;Ge++)Me.indexOf(Ue[Ge])<0&&Object.prototype.propertyIsEnumerable.call(Ae,Ue[Ge])&&(He[Ue[Ge]]=Ae[Ue[Ge]])}return He}function pe(Ae,Me,He,Ue){return new(He||(He=Promise))(function(rt,Et){function It(on){try{$t(Ue.next(on))}catch(Wt){Et(Wt)}}function $n(on){try{$t(Ue.throw(on))}catch(Wt){Et(Wt)}}function $t(on){on.done?rt(on.value):function Ge(rt){return rt instanceof He?rt:new He(function(Et){Et(rt)})}(on.value).then(It,$n)}$t((Ue=Ue.apply(Ae,Me||[])).next())})}function ce(Ae){return this instanceof ce?(this.v=Ae,this):new ce(Ae)}function Be(Ae,Me,He){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ge,Ue=He.apply(Ae,Me||[]),rt=[];return Ge={},Et("next"),Et("throw"),Et("return"),Ge[Symbol.asyncIterator]=function(){return this},Ge;function Et(ar){Ue[ar]&&(Ge[ar]=function(Hn){return new Promise(function(Ln,xt){rt.push([ar,Hn,Ln,xt])>1||It(ar,Hn)})})}function It(ar,Hn){try{!function $n(ar){ar.value instanceof ce?Promise.resolve(ar.value.v).then($t,on):Wt(rt[0][2],ar)}(Ue[ar](Hn))}catch(Ln){Wt(rt[0][3],Ln)}}function $t(ar){It("next",ar)}function on(ar){It("throw",ar)}function Wt(ar,Hn){ar(Hn),rt.shift(),rt.length&&It(rt[0][0],rt[0][1])}}function Ie(Ae){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var He,Me=Ae[Symbol.asyncIterator];return Me?Me.call(Ae):(Ae=function Qe(Ae){var Me="function"==typeof Symbol&&Symbol.iterator,He=Me&&Ae[Me],Ue=0;if(He)return He.call(Ae);if(Ae&&"number"==typeof Ae.length)return{next:function(){return Ae&&Ue>=Ae.length&&(Ae=void 0),{value:Ae&&Ae[Ue++],done:!Ae}}};throw new TypeError(Me?"Object is not iterable.":"Symbol.iterator is not defined.")}(Ae),He={},Ue("next"),Ue("throw"),Ue("return"),He[Symbol.asyncIterator]=function(){return this},He);function Ue(rt){He[rt]=Ae[rt]&&function(Et){return new Promise(function(It,$n){!function Ge(rt,Et,It,$n){Promise.resolve($n).then(function($t){rt({value:$t,done:It})},Et)}(It,$n,(Et=Ae[rt](Et)).done,Et.value)})}}}U.d(Le,{FC:()=>Be,KL:()=>Ie,_T:()=>ve,mG:()=>pe,qq:()=>ce}),"function"==typeof SuppressedError&&SuppressedError}},Ot=>{Ot(Ot.s=510)}]);