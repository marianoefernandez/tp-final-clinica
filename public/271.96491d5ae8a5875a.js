"use strict";(self.webpackChunktp_final_clinica=self.webpackChunktp_final_clinica||[]).push([[271],{271:(H,T,u)=>{u.r(T),u.d(T,{MisTurnosModule:()=>$});var g=u(6814),_=u(7045),l=u(5861),h=u(4036),m=u(3519),s=u.n(m),t=u(5879),x=u(4067),v=u(8672),f=u(95);function C(e,a){if(1&e){const o=t.EpF();t.TgZ(0,"button",9),t.NdJ("click",function(){t.CHM(o);const i=t.oxw();return t.KtG(i.cambiarTipoFiltro("Especialista"))}),t._uU(1,"Especialista"),t.qZA()}}function U(e,a){if(1&e){const o=t.EpF();t.TgZ(0,"button",9),t.NdJ("click",function(){t.CHM(o);const i=t.oxw();return t.KtG(i.cambiarTipoFiltro("Paciente"))}),t._uU(1,"Paciente"),t.qZA()}}function Z(e,a){if(1&e&&(t.TgZ(0,"h3",18),t._uU(1),t.qZA()),2&e){const o=t.oxw(2).$implicit,n=t.oxw();t.xp6(1),t.hij("Especialista: ",n.obtenerApellidoNombre(o.uidEspecialista),"")}}function A(e,a){if(1&e&&(t.TgZ(0,"h3",18),t._uU(1),t.qZA()),2&e){const o=t.oxw(2).$implicit,n=t.oxw();t.xp6(1),t.hij("Paciente: ",n.obtenerApellidoNombre(o.uidPaciente),"")}}function M(e,a){if(1&e&&(t.TgZ(0,"p",18),t._uU(1),t.qZA()),2&e){const o=t.oxw(2).$implicit,n=t.oxw();t.xp6(1),t.hij("Paciente: ",n.obtenerApellidoNombre(o.uidPaciente),"")}}function w(e,a){if(1&e&&(t.TgZ(0,"p",18),t._uU(1),t.qZA()),2&e){const o=t.oxw(2).$implicit,n=t.oxw();t.xp6(1),t.hij("Especialista: ",n.obtenerApellidoNombre(o.uidEspecialista),"")}}function k(e,a){if(1&e&&(t.TgZ(0,"p",18),t._uU(1),t.qZA()),2&e){const o=t.oxw(2).$implicit;t.xp6(1),t.hij("Nro de Consultorio: ",o.consultorio,"")}}function B(e,a){1&e&&(t.TgZ(0,"p",32),t._uU(1,"Estado: Pendiente"),t.qZA())}function y(e,a){1&e&&(t.TgZ(0,"p",33),t._uU(1,"Estado: Aceptado"),t.qZA())}function q(e,a){1&e&&(t.TgZ(0,"p",34),t._uU(1,"Estado: Cancelado"),t.qZA())}function N(e,a){1&e&&(t.TgZ(0,"p",35),t._uU(1,"Estado: Rechazado"),t.qZA())}function E(e,a){1&e&&(t.TgZ(0,"p",36),t._uU(1,"Estado: Realizado"),t.qZA())}function z(e,a){if(1&e){const o=t.EpF();t.TgZ(0,"button",37),t.NdJ("click",function(){t.CHM(o);const i=t.oxw(2).$implicit,r=t.oxw();return t.KtG(r.mostrarComentario(i))}),t._uU(1,"Ver comentario"),t.qZA()}}function I(e,a){if(1&e){const o=t.EpF();t.TgZ(0,"button",38),t.NdJ("click",function(){t.CHM(o);const i=t.oxw(2).$implicit,r=t.oxw();return t.KtG(r.mostrarComentario(i))}),t._uU(1,"Ver rese\xf1a/comentario Especialista"),t.qZA()}}function F(e,a){if(1&e){const o=t.EpF();t.TgZ(0,"button",39),t.NdJ("click",function(){t.CHM(o);const i=t.oxw(2).$implicit,r=t.oxw();return t.KtG(r.calificarAtencion(i))}),t._uU(1,"Calificar Atenci\xf3n"),t.qZA()}}function J(e,a){if(1&e){const o=t.EpF();t.TgZ(0,"button",40),t.NdJ("click",function(){t.CHM(o);const i=t.oxw(2).$implicit,r=t.oxw();return t.KtG(r.cancelarTurno(i))}),t._uU(1,"Cancelar Turno"),t.qZA()}}function P(e,a){if(1&e){const o=t.EpF();t.TgZ(0,"button",41),t.NdJ("click",function(){t.CHM(o);const i=t.oxw(2).$implicit,r=t.oxw();return t.KtG(r.rechazarTurno(i))}),t._uU(1,"Rechazar Turno"),t.qZA()}}function O(e,a){if(1&e){const o=t.EpF();t.TgZ(0,"button",42),t.NdJ("click",function(){t.CHM(o);const i=t.oxw(2).$implicit,r=t.oxw();return t.KtG(r.aceptarTurno(i))}),t._uU(1,"Aceptar Turno"),t.qZA()}}function Y(e,a){if(1&e){const o=t.EpF();t.TgZ(0,"button",43),t.NdJ("click",function(){t.CHM(o);const i=t.oxw(2).$implicit,r=t.oxw();return t.KtG(r.finalizarTurno(i))}),t._uU(1,"Finalizar Turno"),t.qZA()}}function R(e,a){if(1&e&&(t.TgZ(0,"div",16),t.YNc(1,Z,2,1,"h3",17),t.YNc(2,A,2,1,"h3",17),t.TgZ(3,"p",18),t._uU(4),t.qZA(),t.YNc(5,M,2,1,"p",17),t.YNc(6,w,2,1,"p",17),t.TgZ(7,"p",18),t._uU(8),t.qZA(),t.YNc(9,k,2,1,"p",17),t.YNc(10,B,2,0,"p",19),t.YNc(11,y,2,0,"p",20),t.YNc(12,q,2,0,"p",21),t.YNc(13,N,2,0,"p",22),t.YNc(14,E,2,0,"p",23),t._UZ(15,"hr",24),t.YNc(16,z,2,0,"button",25),t.YNc(17,I,2,0,"button",26),t.YNc(18,F,2,0,"button",27),t.YNc(19,J,2,0,"button",28),t.YNc(20,P,2,0,"button",29),t.YNc(21,O,2,0,"button",30),t.YNc(22,Y,2,0,"button",31),t.qZA()),2&e){const o=t.oxw().$implicit,n=t.oxw();t.xp6(1),t.Q6J("ngIf","Paciente"==n.firestore.datosUsuarioActual.tipoUsuario),t.xp6(1),t.Q6J("ngIf","Especialista"==n.firestore.datosUsuarioActual.tipoUsuario),t.xp6(2),t.hij("Especialidad: ",o.especialidad," "),t.xp6(1),t.Q6J("ngIf","Paciente"==n.firestore.datosUsuarioActual.tipoUsuario),t.xp6(1),t.Q6J("ngIf","Especialista"==n.firestore.datosUsuarioActual.tipoUsuario),t.xp6(2),t.hij("Fecha y Hora:",n.obtenerFechaYHora(o.horarioTurno),""),t.xp6(1),t.Q6J("ngIf","Aceptado"==o.estadoTurno||"Realizado"==o.estadoTurno),t.xp6(1),t.Q6J("ngIf","Pendiente"==o.estadoTurno),t.xp6(1),t.Q6J("ngIf","Aceptado"==o.estadoTurno),t.xp6(1),t.Q6J("ngIf","Cancelado"==o.estadoTurno),t.xp6(1),t.Q6J("ngIf","Rechazado"==o.estadoTurno),t.xp6(1),t.Q6J("ngIf","Realizado"==o.estadoTurno),t.xp6(2),t.Q6J("ngIf","Cancelado"==o.estadoTurno||"Rechazado"==o.estadoTurno),t.xp6(1),t.Q6J("ngIf","Realizado"==o.estadoTurno),t.xp6(1),t.Q6J("ngIf","Realizado"==o.estadoTurno&&n.validarResenia(o)),t.xp6(1),t.Q6J("ngIf","Pendiente"==o.estadoTurno),t.xp6(1),t.Q6J("ngIf","Pendiente"==o.estadoTurno&&"Especialista"==n.firestore.datosUsuarioActual.tipoUsuario),t.xp6(1),t.Q6J("ngIf","Pendiente"==o.estadoTurno&&"Especialista"==n.firestore.datosUsuarioActual.tipoUsuario),t.xp6(1),t.Q6J("ngIf","Aceptado"==o.estadoTurno&&"Especialista"==n.firestore.datosUsuarioActual.tipoUsuario)}}function Q(e,a){if(1&e&&(t.TgZ(0,"div",14),t.YNc(1,R,23,19,"div",15),t.qZA()),2&e){const o=a.$implicit,n=t.oxw();t.xp6(1),t.Q6J("ngIf",n.verificarBusqueda(o))}}const D=[{path:"",component:(()=>{class e{constructor(o,n,i){this.firestore=o,this.spinner=n,this.router=i,this.turnosDisponibles=[],this.tipoFiltrado="Especialidad",this.consultoriosRestantes=[],this.palabraBusqueda="",this.todosUsuarios=[]}ngOnInit(){var o=this;this.inicializarPagina(),this.suscripcionTurnos=this.firestore.obtenerTurnosPorUid(this.firestore.datosUsuarioActual.uid,this.firestore.datosUsuarioActual.tipoUsuario).subscribe(function(){var n=(0,l.Z)(function*(i){o.spinner.show(),setTimeout((0,l.Z)(function*(){o.turnosDisponibles=o.verificarId(i[0].idTurno)?o.turnosDisponibles.concat(i):yield(0,h.z)(o.firestore.obtenerTurnosPorUid(o.firestore.datosUsuarioActual.uid,o.firestore.datosUsuarioActual.tipoUsuario)),o.spinner.hide()}),500)});return function(i){return n.apply(this,arguments)}}()),this.suscripcionUsuarios=this.firestore.obtenerUsuarios().subscribe(n=>{this.todosUsuarios=this.todosUsuarios.concat(n)})}ngOnDestroy(){this.suscripcionTurnos.unsubscribe(),this.suscripcionUsuarios.unsubscribe()}inicializarPagina(){return"Administrador"==this.firestore.datosUsuarioActual.tipoUsuario&&this.navigate("bienvenido/turnos/ver-turnos"),!0}verificarBusqueda(o){return"Especialidad"==this.tipoFiltrado?o.especialidad.toLowerCase().indexOf(this.palabraBusqueda.toLowerCase())>=0:"Paciente"==this.tipoFiltrado?this.obtenerApellidoNombre(o.uidPaciente).toLowerCase().indexOf(this.palabraBusqueda.toLowerCase())>=0:this.obtenerApellidoNombre(o.uidEspecialista).toLowerCase().indexOf(this.palabraBusqueda.toLowerCase())>=0}verificarId(o){for(let n=0;n<this.turnosDisponibles.length;n++)if(this.turnosDisponibles[n].idTurno==o)return!1;return!0}cambiarTipoFiltro(o){this.tipoFiltrado=o}obtenerApellidoNombre(o){for(let n=0;n<this.todosUsuarios.length;n++)if(this.todosUsuarios[n].uid==o)return this.todosUsuarios[n].nombre+" "+this.todosUsuarios[n].apellido;return"Usuario no encontrado"}obtenerFechaYHora(o){return o.toDate().toLocaleString().slice(0,-3).replace(",","")}mostrarComentario(o){let n="Cancelado"==o.estadoTurno?"cancelaci\xf3n":"rechazo";"Cancelado"==o.estadoTurno||"Rechazado"==o.estadoTurno?s().fire({title:"Comentario por "+n,text:o.rese\u00f1a,icon:"warning"}):s().fire({title:"Rese\xf1a por finalizaci\xf3n",text:o.rese\u00f1a,icon:"info"})}cancelarTurno(o){var n=this;s().fire({title:"Cancelar Turno",text:"Por favor escriba un comentario del porque cancela el turno",input:"text",showCancelButton:!0,confirmButtonText:"Aceptar",cancelButtonText:"Cancelar",inputValidator:i=>!i&&"Por favor escribe su comentario"}).then(i=>{i.value&&s().fire({title:"\xbfSeguro qu\xe9 desea cancelar el turno? Est\xe1 acci\xf3n no se puede deshacer",text:"Comentario: "+i.value,showCancelButton:!0,confirmButtonText:"Cancelar Turno",confirmButtonColor:"red",cancelButtonText:"Cancelar Operacion"}).then(function(){var r=(0,l.Z)(function*(c){if(c.isConfirmed){const p={rese\u00f1a:'"'+i.value+'"\n(comentario hecho por el '+n.firestore.datosUsuarioActual.tipoUsuario+" "+n.firestore.datosUsuarioActual.nombre+" "+n.firestore.datosUsuarioActual.apellido+" operaci\xf3n: cancelaci\xf3n)",estadoTurno:"Cancelado"};s().fire("Turno cancelado con \xe9xito","","success"),yield n.firestore.editarTurnos(o.idTurno,p)}else s().fire("Operaci\xf3n cancelada con \xe9xito","","error")});return function(c){return r.apply(this,arguments)}}())})}rechazarTurno(o){var n=this;s().fire({title:"Rechazar Turno",text:"Por favor escriba un comentario del porque rechaza el turno",input:"text",showCancelButton:!0,confirmButtonText:"Aceptar",cancelButtonText:"Cancelar",inputValidator:i=>!i&&"Por favor escribe su comentario"}).then(i=>{i.value&&s().fire({title:"\xbfSeguro qu\xe9 desea rechazar el turno? Est\xe1 acci\xf3n no se puede deshacer",text:"Comentario: "+i.value,showCancelButton:!0,confirmButtonText:"Rechazar Turno",confirmButtonColor:"red",cancelButtonText:"Cancelar Operacion"}).then(function(){var r=(0,l.Z)(function*(c){if(c.isConfirmed){const p={rese\u00f1a:'"'+i.value+'"\n(comentario hecho por el '+n.firestore.datosUsuarioActual.tipoUsuario+" "+n.firestore.datosUsuarioActual.nombre+" "+n.firestore.datosUsuarioActual.apellido+" operaci\xf3n: rechazo)",estadoTurno:"Rechazado"};s().fire("Turno rechazado con \xe9xito","","success"),yield n.firestore.editarTurnos(o.idTurno,p)}else s().fire("Operaci\xf3n cancelada con \xe9xito","","error")});return function(c){return r.apply(this,arguments)}}())})}calificarAtencion(o){return(0,l.Z)(function*(){})()}realizarEncuesta(o){return(0,l.Z)(function*(){})()}validarResenia(o){return 0==o.rese\u00f1aPaciente.length}finalizarTurno(o){var n=this;s().fire({title:"Finalizar Turno",text:"Por favor escriba un comentario o rese\xf1a de la atenci\xf3n de su paciente",input:"text",showCancelButton:!0,confirmButtonText:"Aceptar",cancelButtonText:"Cancelar",inputValidator:i=>!i&&"Por favor escribe su comentario"}).then(i=>{i.value&&s().fire({title:"\xbfSeguro qu\xe9 desea finalizar el turno? Est\xe1 acci\xf3n no se puede deshacer",text:"Comentario: "+i.value,showCancelButton:!0,confirmButtonText:"Finalizar Turno",confirmButtonColor:"green",cancelButtonText:"Cancelar Operacion"}).then(function(){var r=(0,l.Z)(function*(c){if(c.isConfirmed){const p={rese\u00f1a:'"'+i.value+'"\n(comentario hecho por el '+n.firestore.datosUsuarioActual.tipoUsuario+" "+n.firestore.datosUsuarioActual.nombre+" "+n.firestore.datosUsuarioActual.apellido+" operaci\xf3n: finalizaci\xf3n)",estadoTurno:"Realizado"};s().fire("Turno finalizado con \xe9xito","","success"),yield n.firestore.editarTurnos(o.idTurno,p)}else s().fire("Operaci\xf3n cancelada con \xe9xito","","error")});return function(c){return r.apply(this,arguments)}}())})}verificarConsultoriosRestantes(o){var n=this;return(0,l.Z)(function*(){let i=yield(0,h.z)(n.firestore.obtenerTurnos()),r=[1,2,3,4,5,6];for(let c=0;c<i.length;c++)o.horarioTurno.seconds==i[c].horarioTurno.seconds&&0!=i[c].consultorio&&r.splice(r.indexOf(i[c].consultorio),1);return r})()}aceptarTurno(o){var n=this;return(0,l.Z)(function*(){let i=yield n.verificarConsultoriosRestantes(o);s().fire({title:"Elegir Consultorio",text:"Por favor elija el consultorio en donde va a llevarse a cabo el turno",input:"select",inputOptions:i,showCancelButton:!0,confirmButtonText:"Aceptar",cancelButtonText:"Cancelar",inputValidator:r=>!r&&"Por favor escribe su comentario"}).then(r=>{r.isConfirmed&&s().fire({title:"\xbfSeguro qu\xe9 desea aceptar el turno en el consultorio "+i[r.value]+"? Est\xe1 acci\xf3n no se puede deshacer",showCancelButton:!0,confirmButtonText:"Aceptar Turno",confirmButtonColor:"green",cancelButtonText:"Cancelar Operacion",cancelButtonColor:"red"}).then(function(){var c=(0,l.Z)(function*(d){if(d.isConfirmed){const b={estadoTurno:"Aceptado",consultorio:i[r.value]};s().fire("Turno aceptado con \xe9xito","","success"),yield n.firestore.editarTurnos(o.idTurno,b)}else s().fire("Operaci\xf3n cancelada con \xe9xito","","error")});return function(d){return c.apply(this,arguments)}}())})})()}navigate(o){this.router.navigateByUrl(o)}static#t=this.\u0275fac=function(n){return new(n||e)(t.Y36(x.C),t.Y36(v.t2),t.Y36(_.F0))};static#o=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-mis-turnos"]],decls:31,vars:8,consts:[["lang","es"],["charset","UTF-8"],["name","viewport","content","width=device-width, initial-scale=1.0"],[1,"bg-dark"],[1,"text-light",2,"text-align","center","margin","auto"],[1,"card","contenido",2,"background-color","yellow"],[1,"contenido-busqueda"],[2,"text-align","center"],[1,"barra-busqueda"],[1,"btn","btn-outline-light","bg-primary",3,"click"],["class","btn btn-outline-light bg-primary",3,"click",4,"ngIf"],["type","text","placeholder","Buscar turno...",1,"busqueda",3,"ngModel","ngModelChange"],[1,"text-dark",2,"text-align","center","margin","auto"],["class","lista-turnos",4,"ngFor","ngForOf"],[1,"lista-turnos"],["class","card bg-primary turno",4,"ngIf"],[1,"card","bg-primary","turno"],["class","text-light texto-turnos",4,"ngIf"],[1,"text-light","texto-turnos"],["class","text-warning bg-dark texto-turnos",4,"ngIf"],["class","text-success bg-dark texto-turnos",4,"ngIf"],["class","text-danger bg-dark texto-turnos",4,"ngIf"],["class","text-secondary bg-dark texto-turnos",4,"ngIf"],["style","color: rgb(55, 198, 246);","class","bg-dark texto-turnos",4,"ngIf"],[1,"mb-4",2,"color","white"],["class","btn btn-outline-light","style","background-color: rgb(195, 141, 14);",3,"click",4,"ngIf"],["class","btn btn-outline-light","style","background-color: rgb(42, 107, 138);",3,"click",4,"ngIf"],["class","btn btn-outline-light","style","background-color: rgb(180, 153, 16);",3,"click",4,"ngIf"],["class","btn btn-outline-light bg-danger boton",3,"click",4,"ngIf"],["class","btn btn-outline-light bg-secondary boton",3,"click",4,"ngIf"],["class","btn btn-outline-light bg-success boton",3,"click",4,"ngIf"],["class","btn btn-outline-light boton","style","background-color: rgb(128, 19, 128);",3,"click",4,"ngIf"],[1,"text-warning","bg-dark","texto-turnos"],[1,"text-success","bg-dark","texto-turnos"],[1,"text-danger","bg-dark","texto-turnos"],[1,"text-secondary","bg-dark","texto-turnos"],[1,"bg-dark","texto-turnos",2,"color","rgb(55, 198, 246)"],[1,"btn","btn-outline-light",2,"background-color","rgb(195, 141, 14)",3,"click"],[1,"btn","btn-outline-light",2,"background-color","rgb(42, 107, 138)",3,"click"],[1,"btn","btn-outline-light",2,"background-color","rgb(180, 153, 16)",3,"click"],[1,"btn","btn-outline-light","bg-danger","boton",3,"click"],[1,"btn","btn-outline-light","bg-secondary","boton",3,"click"],[1,"btn","btn-outline-light","bg-success","boton",3,"click"],[1,"btn","btn-outline-light","boton",2,"background-color","rgb(128, 19, 128)",3,"click"]],template:function(n,i){1&n&&(t.TgZ(0,"html",0)(1,"head"),t._UZ(2,"meta",1)(3,"meta",2),t.TgZ(4,"title"),t._uU(5,"Mis Turnos"),t.qZA()(),t.TgZ(6,"body",3),t._UZ(7,"br"),t.TgZ(8,"h2",4),t._uU(9,"Mis turnos"),t.qZA(),t._UZ(10,"br"),t.TgZ(11,"div",5)(12,"div",6),t._UZ(13,"br"),t.TgZ(14,"h3",7),t._uU(15,"Puede buscar el turno que desee"),t.qZA(),t._UZ(16,"br"),t.TgZ(17,"div",8)(18,"p"),t._uU(19),t.qZA(),t.TgZ(20,"button",9),t.NdJ("click",function(){return i.cambiarTipoFiltro("Especialidad")}),t._uU(21,"Especialidad"),t.qZA(),t.YNc(22,C,2,0,"button",10),t.YNc(23,U,2,0,"button",10),t.TgZ(24,"input",11),t.NdJ("ngModelChange",function(c){return i.palabraBusqueda=c}),t.qZA()(),t._UZ(25,"br"),t.TgZ(26,"h3",12),t._uU(27),t.qZA(),t._UZ(28,"br"),t.YNc(29,Q,2,1,"div",13),t.qZA()()()(),t._UZ(30,"router-outlet")),2&n&&(t.xp6(19),t.hij("Filtrar por: ",i.tipoFiltrado,""),t.xp6(3),t.Q6J("ngIf","Paciente"==i.firestore.datosUsuarioActual.tipoUsuario),t.xp6(1),t.Q6J("ngIf","Especialista"==i.firestore.datosUsuarioActual.tipoUsuario),t.xp6(1),t.Q6J("ngModel",i.palabraBusqueda),t.xp6(3),t.lnq("Turnos en la clinica del ",i.firestore.datosUsuarioActual.tipoUsuario," ",i.firestore.datosUsuarioActual.nombre," ",i.firestore.datosUsuarioActual.apellido,""),t.xp6(2),t.Q6J("ngForOf",i.turnosDisponibles))},dependencies:[g.sg,g.O5,_.lC,f.Fj,f.JJ,f.On],styles:[".contenido[_ngcontent-%COMP%]{overflow-y:scroll;flex-wrap:wrap;min-height:90vh;border-radius:40px;margin-left:2%;margin-right:2%}.barra-busqueda[_ngcontent-%COMP%]{text-align:center}.busqueda[_ngcontent-%COMP%]{width:512px}.boton[_ngcontent-%COMP%]{border-radius:40px;overflow:hidden}.turno[_ngcontent-%COMP%]{border-radius:40px;overflow:hidden;height:380px;width:440px;transition:.5s;text-align:center;border:5px solid;border-color:#000;margin:10px}.texto-turnos[_ngcontent-%COMP%]{text-align:center}.lista-turnos[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;float:left;flex-wrap:wrap;min-height:60vh}"]})}return e})()}];let j=(()=>{class e{static#t=this.\u0275fac=function(n){return new(n||e)};static#o=this.\u0275mod=t.oAB({type:e});static#n=this.\u0275inj=t.cJS({imports:[_.Bz.forChild(D),_.Bz]})}return e})(),$=(()=>{class e{static#t=this.\u0275fac=function(n){return new(n||e)};static#o=this.\u0275mod=t.oAB({type:e});static#n=this.\u0275inj=t.cJS({imports:[g.ez,j,f.u5]})}return e})()}}]);