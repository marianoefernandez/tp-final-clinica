"use strict";(self.webpackChunktp_final_clinica=self.webpackChunktp_final_clinica||[]).push([[292],{7292:(J,u,s)=>{s.r(u),s.d(u,{RegistroModule:()=>y});var d=s(6814),c=s(7045),p=s(5861),r=s(95),f=s(3519),g=s.n(f),e=s(5879),_=s(8672),h=s(5196);function v(i,l){if(1&i&&(e.TgZ(0,"span",40),e._uU(1),e.qZA()),2&i){const o=e.oxw(2);e.xp6(1),e.hij(" ",o.obtenerError("nombre")," ")}}function Z(i,l){if(1&i&&(e.TgZ(0,"span",40),e._uU(1),e.qZA()),2&i){const o=e.oxw(2);e.xp6(1),e.hij(" ",o.obtenerError("apellido")," ")}}function x(i,l){if(1&i&&(e.TgZ(0,"span",40),e._uU(1),e.qZA()),2&i){const o=e.oxw(2);e.xp6(1),e.hij(" ",o.obtenerError("edad")," ")}}function C(i,l){if(1&i&&(e.TgZ(0,"span",40),e._uU(1),e.qZA()),2&i){const o=e.oxw(2);e.xp6(1),e.hij(" ",o.obtenerError("dni")," ")}}function b(i,l){if(1&i&&(e.TgZ(0,"span",40),e._uU(1),e.qZA()),2&i){const o=e.oxw(2);e.xp6(1),e.hij(" ",o.obtenerError("email")," ")}}function U(i,l){if(1&i&&(e.TgZ(0,"span",40),e._uU(1),e.qZA()),2&i){const o=e.oxw(2);e.xp6(1),e.hij(" ",o.obtenerError("clave")," ")}}function T(i,l){1&i&&(e.TgZ(0,"span",40),e._uU(1," Seleccione una imagen por favor "),e.qZA())}function E(i,l){1&i&&(e.TgZ(0,"span",40),e._uU(1," Seleccione una imagen por favor "),e.qZA())}const m=function(){return{standalone:!0}};function q(i,l){if(1&i){const o=e.EpF();e.TgZ(0,"div",34)(1,"label",41),e.NdJ("ngModelChange",function(n){e.CHM(o);const t=e.oxw(2);return e.KtG(t.imagenPerfilDos=n)}),e._uU(2,"Imagen de perfil 2"),e.qZA(),e.TgZ(3,"input",36),e.NdJ("change",function(n){e.CHM(o);const t=e.oxw(2);return e.KtG(t.guardarImagenDos(n))}),e.qZA(),e.YNc(4,E,2,0,"span",22),e.qZA()}if(2&i){const o=e.oxw(2);e.xp6(1),e.Q6J("ngModel",o.imagenPerfilDos)("ngModelOptions",e.DdM(3,m)),e.xp6(3),e.Q6J("ngIf",o.validarImagenDos())}}function M(i,l){if(1&i&&(e.TgZ(0,"span",40),e._uU(1),e.qZA()),2&i){const o=e.oxw(3);e.xp6(1),e.hij(" ",o.obtenerError("obraSocial")," ")}}function A(i,l){if(1&i&&(e.TgZ(0,"div",29)(1,"label",42),e._uU(2,"Obra social"),e.qZA(),e._UZ(3,"input",43),e.YNc(4,M,2,1,"span",22),e.qZA()),2&i){const o=e.oxw(2);e.xp6(4),e.Q6J("ngIf",o.esValidoElCampo("obraSocial"))}}function I(i,l){if(1&i){const o=e.EpF();e.TgZ(0,"input",51),e.NdJ("ngModelChange",function(n){e.CHM(o);const t=e.oxw(3);return e.KtG(t.seleccionEspecialidad=n)}),e.qZA()}if(2&i){const o=e.oxw(3);e.Q6J("ngModel",o.seleccionEspecialidad)("ngModelOptions",e.DdM(2,m))}}function P(i,l){if(1&i&&(e.TgZ(0,"div",29)(1,"label",44),e._uU(2,"Especialidad"),e.qZA(),e._UZ(3,"br")(4,"input",45),e.TgZ(5,"label"),e._uU(6,"Psicologia"),e.qZA(),e._UZ(7,"br")(8,"input",46),e.TgZ(9,"label"),e._uU(10,"Cardiolog\xeda"),e.qZA(),e._UZ(11,"br")(12,"input",47),e.TgZ(13,"label"),e._uU(14,"Neurolog\xeda"),e.qZA(),e._UZ(15,"br")(16,"input",48),e.TgZ(17,"label"),e._uU(18,"Otro (Especifica cual)"),e.qZA(),e.YNc(19,I,1,3,"input",49),e.TgZ(20,"div",50),e._uU(21," Especialidad invalida, seleccione otra "),e.qZA()()),2&i){const o=e.oxw(2);e.xp6(19),e.Q6J("ngIf",o.verificarEspecialidad())}}function R(i,l){if(1&i){const o=e.EpF();e.TgZ(0,"form",16),e.NdJ("ngSubmit",function(){e.CHM(o);const n=e.oxw();return e.KtG(n.registrarse())}),e.TgZ(1,"h4",17),e._uU(2),e.qZA(),e.TgZ(3,"div",18)(4,"div",19)(5,"label",20),e._uU(6,"Nombre"),e.qZA(),e._UZ(7,"input",21),e.YNc(8,v,2,1,"span",22),e.qZA(),e.TgZ(9,"div",19)(10,"label",23),e._uU(11,"Apellido"),e.qZA(),e._UZ(12,"input",24),e.YNc(13,Z,2,1,"span",22),e.qZA(),e.TgZ(14,"div",19)(15,"label",25),e._uU(16,"Edad"),e.qZA(),e._UZ(17,"input",26),e.YNc(18,x,2,1,"span",22),e.qZA(),e.TgZ(19,"div",19)(20,"label",27),e._uU(21,"DNI"),e.qZA(),e._UZ(22,"input",28),e.YNc(23,C,2,1,"span",22),e.qZA(),e.TgZ(24,"div",29)(25,"label",30),e._uU(26,"Email"),e.qZA(),e._UZ(27,"input",31),e.YNc(28,b,2,1,"span",22),e.qZA(),e.TgZ(29,"div",29)(30,"label",32),e._uU(31,"Contrase\xf1a"),e.TgZ(32,"span"),e._uU(33," (Minimo 6 caracteres)"),e.qZA()(),e._UZ(34,"input",33),e.YNc(35,U,2,1,"span",22),e.qZA(),e.TgZ(36,"div",34)(37,"label",35),e.NdJ("ngModelChange",function(n){e.CHM(o);const t=e.oxw();return e.KtG(t.imagenPerfilUno=n)}),e._uU(38,"Imagen de perfil"),e.qZA(),e.TgZ(39,"input",36),e.NdJ("change",function(n){e.CHM(o);const t=e.oxw();return e.KtG(t.guardarImagenUno(n))}),e.qZA(),e.YNc(40,T,2,0,"span",22),e.qZA(),e.YNc(41,q,5,4,"div",37),e.YNc(42,A,5,1,"div",38),e.YNc(43,P,22,1,"div",38),e.qZA(),e.TgZ(44,"button",39),e._uU(45,"Registrarse"),e.qZA()()}if(2&i){const o=e.oxw();e.Q6J("formGroup",o.formulario),e.xp6(2),e.hij("Registro de usuario de tipo : ",o.tipoUsuario,""),e.xp6(6),e.Q6J("ngIf",o.esValidoElCampo("nombre")),e.xp6(5),e.Q6J("ngIf",o.esValidoElCampo("apellido")),e.xp6(5),e.Q6J("ngIf",o.esValidoElCampo("edad")),e.xp6(5),e.Q6J("ngIf",o.esValidoElCampo("dni")),e.xp6(5),e.Q6J("ngIf",o.esValidoElCampo("email")),e.xp6(7),e.Q6J("ngIf",o.esValidoElCampo("clave")),e.xp6(2),e.Q6J("ngModel",o.imagenPerfilUno)("ngModelOptions",e.DdM(14,m)),e.xp6(3),e.Q6J("ngIf",o.validarImagenUno()),e.xp6(1),e.Q6J("ngIf","Paciente"==o.tipoUsuario),e.xp6(1),e.Q6J("ngIf","Paciente"==o.tipoUsuario),e.xp6(1),e.Q6J("ngIf","Especialista"==o.tipoUsuario)}}const N=[{path:"",component:(()=>{class i{constructor(o,a,n,t){this.spinner=o,this.autenticador=a,this.forms=n,this.router=t,this.formulario=this.forms.group({nombre:["",[r.kI.required]],apellido:["",[r.kI.required]],edad:["",[r.kI.required,r.kI.min(1),r.kI.max(100)]],dni:["",[r.kI.required,r.kI.min(1e6),r.kI.max(99999999)]],especialidad:["",[r.kI.required]],email:["",[r.kI.email,r.kI.required]],clave:["",[r.kI.required,r.kI.minLength(6)]],obraSocial:["",[r.kI.required]]}),this.tipoUsuario="",this.seleccionEspecialidad="",this.imagenPerfilUno=null,this.imagenPerfilDos=null,this.mensajeError="",this.flagRegistro=!1}ngOnInit(){this.formulario.reset()}esValidoElCampo(o){return this.formulario.controls[o].errors&&this.formulario.controls[o].touched}validarImagenUno(){return null==this.imagenPerfilUno&&this.flagRegistro}validarImagenDos(){return null==this.imagenPerfilDos&&this.flagRegistro}verificarEspecialidad(){return"Otro"==this.formulario.value.especialidad}obtenerError(o){if(!this.formulario.controls[o]&&!this.formulario.controls[o].errors)return null;const a=this.formulario.controls[o].errors;for(const n of Object.keys(a))switch(n){case"required":return"Este campo es requerido";case"minlength":return`Minimo ${a.minlength.requiredLength} caracteres.`;case"maxlength":return`Maximo ${a.maxlength.requiredLength} caracteres.`;case"min":return`Como minimo debe ser ${a.min.min}.`;case"max":return`Como maximo debe ser ${a.max.max}.`;case"email":return"El formato del mail es incorrecto"}return null}lanzarSpinner(o){var a=this;return(0,p.Z)(function*(){""!=a.tipoUsuario&&(a.spinner.show(),setTimeout(()=>{a.spinner.hide()},o))})()}guardarImagenUno(o){this.imagenPerfilUno=o.target.files[0],console.log("Se guardo imagen 1")}guardarImagenDos(o){this.imagenPerfilDos=o.target.files[0],console.log("Se guardo imagen 2")}validarFormulario(){if(!(this.esValidoElCampo("nombre")||this.esValidoElCampo("apellido")||this.esValidoElCampo("dni")||this.esValidoElCampo("edad")||this.esValidoElCampo("email")||this.esValidoElCampo("clave")||this.validarImagenUno())){if(console.log("Se ingresaron bien los datos basicos del usuario"),"Paciente"==this.tipoUsuario&&!this.esValidoElCampo("obraSocial")&&!this.validarImagenDos())return!0;if(!this.esValidoElCampo("especialidad"))return!0}return!1}registrarse(){var o=this;if(this.flagRegistro=!0,this.validarFormulario()){console.log("DATOS BIEN INGRESADOS"),"Otro"!=this.formulario.value.especialidad&&(this.seleccionEspecialidad=this.formulario.value.especialidad);const a={tipo:this.tipoUsuario,nombre:this.formulario.value.nombre,apellido:this.formulario.value.apellido,edad:this.formulario.value.edad,dni:this.formulario.value.dni,email:this.formulario.value.email,imagenPerfilUno:this.imagenPerfilUno,imagenPerfilDos:this.imagenPerfilDos,obraSocial:this.formulario.value.obraSocial,especialidad:this.seleccionEspecialidad,estaActiva:!1,hora:new Date};this.spinner.show(),this.autenticador.registro(a,this.formulario.value.clave).then(n=>{setTimeout(()=>{if("string"!=typeof n){let t="Paciente"==a.tipo?"Se ha registrado como paciente exitosamente. Se enviado un correo electronico al email: "+a.email+" por favor verifiquelo para poder iniciar sesi\xf3n":"Se ha registrado como especialista exitosamente. Se enviado un correo electronico al email: "+a.email+" por favor verifiquelo para poder iniciar sesi\xf3n. Recuerde que para poder iniciar sesi\xf3n su cuenta debe ser validada por un administrador, proceso que puede llevar hasta 48 hs habiles en resolverse. Tenga paciencia.";g().fire({icon:"success",title:"Usuario registrado con exito",footer:t,showConfirmButton:!0}).then(()=>{this.spinner.show(),setTimeout((0,p.Z)(function*(){o.spinner.hide(),yield o.autenticador.cerrarSesion(),o.navigate("sesiones/login")}),500)})}else this.mostrarError(n),g().fire({icon:"error",title:"Oops...",text:"Error al crear cuenta",footer:this.mensajeError}),"Otro"!=this.formulario.value.especialidad&&(this.seleccionEspecialidad="");this.spinner.hide()},100)})}else console.log("REVISE LOS DATOS INGRESADOS"),this.formulario.markAllAsTouched()}mostrarError(o){switch(o){case"auth/email-already-in-use":this.mensajeError="El correo ya est\xe1 registrado, prueba con otro";break;case"auth/invalid-email":this.mensajeError="El formato de correo es invalido";break;case"dni-duplicado":this.mensajeError="El dni "+this.formulario.value.dni+" ya se encuentra registrado en el sistema por lo tanto no es v\xe1lido para registrarse";break;case"auth/operation-not-allowed":this.mensajeError="Operaci\xf3n no permitida"}}navigate(o){this.router.navigateByUrl(o)}static#e=this.\u0275fac=function(a){return new(a||i)(e.Y36(_.t2),e.Y36(h.T),e.Y36(r.qu),e.Y36(c.F0))};static#o=this.\u0275cmp=e.Xpm({type:i,selectors:[["app-registro"]],decls:31,vars:2,consts:[["lang","es"],[1,"bg-dark"],[1,"container"],[1,"py-5","text-center"],[1,"lead"],[1,"row","g-5"],[1,"col-md-7","col-lg-8"],[1,"formulario"],["id","tipo-usuario",1,"col-md-5"],["for","tipo-usuario",1,"form-label"],["name","tipo-usuario","required","",1,"form-select",3,"ngModel","change","ngModelChange"],["value",""],[1,"mb-4"],["class","needs-validation","novalidate","",3,"formGroup","ngSubmit",4,"ngIf"],[1,"my-5","pt-5","text-muted","text-center","text-small"],[1,"mb-1"],["novalidate","",1,"needs-validation",3,"formGroup","ngSubmit"],[1,"mb-3"],[1,"row","g-3"],[1,"col-sm-6"],["for","nombre",1,"form-label"],["type","text","id","nombre","placeholder","Ingrese nombre","required","","formControlName","nombre",1,"form-control"],["class","form-text text-danger",4,"ngIf"],["for","apellido",1,"form-label"],["type","text","id","apellido","placeholder","Ingrese apellido","required","","formControlName","apellido",1,"form-control"],["for","edad",1,"form-label"],["type","number","id","edad","placeholder","Ingrese edad","required","","formControlName","edad",1,"form-control"],["for","dni",1,"form-label"],["type","number","id","dni","placeholder","Ingrese dni","required","","formControlName","dni",1,"form-control"],[1,"col-12"],["for","email",1,"form-label"],["type","email","id","email","placeholder","Ingrese email (ej: mariano@gmail.com)","required","","formControlName","email",1,"form-control"],["for","clave",1,"form-label"],["type","password","id","clave","placeholder","*********","required","","formControlName","clave",1,"form-control"],[1,"col-6"],["for","archivo","id","foto1","name","imagenPerfilUno",1,"form-label",3,"ngModel","ngModelOptions","ngModelChange"],["type","file",1,"archivo",3,"change"],["class","col-6",4,"ngIf"],["class","col-12",4,"ngIf"],["type","submit",1,"w-100","btn","btn-danger","btn-lg"],[1,"form-text","text-danger"],["for","archivo","id","foto2","name","imagenPerfilDos",1,"form-label",3,"ngModel","ngModelOptions","ngModelChange"],["for","obra-social",1,"form-label"],["type","text","id","obra-social","placeholder","Ingrese obra social","required","","formControlName","obraSocial",1,"form-control"],["for","especialidad",1,"form-label"],["formControlName","especialidad","type","radio","name","especialidad","value","Psicologia",1,"especialidad"],["formControlName","especialidad","type","radio","name","especialidad","value","Cardiolog\xeda",1,"especialidad"],["formControlName","especialidad","type","radio","name","especialidad","value","Neurolog\xeda",1,"especialidad"],["formControlName","especialidad","name","otro","type","radio","name","especialidad","value","Otro",1,"especialidad"],["name","imagenPerfilUno","type","text","class","especialidad","placeholder","Ej:Gen\xe9tica",3,"ngModel","ngModelOptions","ngModelChange",4,"ngIf"],[1,"dato-invalido"],["name","imagenPerfilUno","type","text","placeholder","Ej:Gen\xe9tica",1,"especialidad",3,"ngModel","ngModelOptions","ngModelChange"]],template:function(a,n){1&a&&(e.TgZ(0,"html",0)(1,"head")(2,"title"),e._uU(3,"Registro"),e.qZA()(),e.TgZ(4,"body",1)(5,"div",2)(6,"main")(7,"div",3)(8,"h2"),e._uU(9,"Registrar usuario"),e.qZA(),e.TgZ(10,"p",4),e._uU(11,"Por medio del siguiente formulario se puede registrar un nuevo usuario para la clinica online de Mariano"),e.qZA()(),e.TgZ(12,"div",5)(13,"div",6)(14,"div",7)(15,"div",8)(16,"label",9),e._uU(17,"Tipo de Usuario"),e.qZA(),e.TgZ(18,"select",10),e.NdJ("change",function(){return n.lanzarSpinner(500)})("ngModelChange",function(S){return n.tipoUsuario=S}),e.TgZ(19,"option",11),e._uU(20,"Elegir tipo de usuario..."),e.qZA(),e.TgZ(21,"option"),e._uU(22,"Paciente"),e.qZA(),e.TgZ(23,"option"),e._uU(24,"Especialista"),e.qZA()()()(),e._UZ(25,"hr",12),e.YNc(26,R,46,15,"form",13),e.qZA()()(),e.TgZ(27,"footer",14)(28,"p",15),e._uU(29,"\xa9 2024 Clinica Online Fern\xe1ndez Mariano 4A"),e.qZA()()()()(),e._UZ(30,"router-outlet")),2&a&&(e.xp6(18),e.Q6J("ngModel",n.tipoUsuario),e.xp6(8),e.Q6J("ngIf",""!=n.tipoUsuario))},dependencies:[d.O5,c.lC,r._Y,r.YN,r.Kr,r.Fj,r.wV,r.EJ,r._,r.JJ,r.JL,r.Q7,r.On,r.sg,r.u],styles:["title[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h4[_ngcontent-%COMP%], label[_ngcontent-%COMP%], p[_ngcontent-%COMP%], span[_ngcontent-%COMP%]{color:#fff}body[_ngcontent-%COMP%]{height:180vh}[_ngcontent-%COMP%]::placeholder{color:#28283076;font-size:1.2em}.archivo[_ngcontent-%COMP%]{color:#fff}#tipo-usuario[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:18px}.mb-4[_ngcontent-%COMP%]{color:#fff}#tipo-usuario[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{height:80px;width:300px;background-color:#bd0e0ecf;color:#fff}.especialidad[_ngcontent-%COMP%]{margin:7px}"]})}return i})()}];let O=(()=>{class i{static#e=this.\u0275fac=function(a){return new(a||i)};static#o=this.\u0275mod=e.oAB({type:i});static#i=this.\u0275inj=e.cJS({imports:[c.Bz.forChild(N),c.Bz]})}return i})(),y=(()=>{class i{static#e=this.\u0275fac=function(a){return new(a||i)};static#o=this.\u0275mod=e.oAB({type:i});static#i=this.\u0275inj=e.cJS({imports:[d.ez,O,r.u5,d.ez,r.UX]})}return i})()}}]);