"use strict";(self.webpackChunktp_final_clinica=self.webpackChunktp_final_clinica||[]).push([[292],{7292:(D,g,s)=>{s.r(g),s.d(g,{RegistroModule:()=>k});var p=s(6814),d=s(7045),u=s(5861),n=s(95),h=s(3519),f=s.n(h),e=s(5879),v=s(8672),x=s(7411),_=s(4774),c=s(7679);function C(i,l){if(1&i&&(e.TgZ(0,"span",42),e._uU(1),e.qZA()),2&i){const o=e.oxw(2);e.xp6(1),e.hij(" ",o.obtenerError("nombre")," ")}}function Z(i,l){if(1&i&&(e.TgZ(0,"span",42),e._uU(1),e.qZA()),2&i){const o=e.oxw(2);e.xp6(1),e.hij(" ",o.obtenerError("apellido")," ")}}function b(i,l){if(1&i&&(e.TgZ(0,"span",42),e._uU(1),e.qZA()),2&i){const o=e.oxw(2);e.xp6(1),e.hij(" ",o.obtenerError("edad")," ")}}function T(i,l){if(1&i&&(e.TgZ(0,"span",42),e._uU(1),e.qZA()),2&i){const o=e.oxw(2);e.xp6(1),e.hij(" ",o.obtenerError("dni")," ")}}function A(i,l){if(1&i&&(e.TgZ(0,"span",42),e._uU(1),e.qZA()),2&i){const o=e.oxw(2);e.xp6(1),e.hij(" ",o.obtenerError("email")," ")}}function U(i,l){if(1&i&&(e.TgZ(0,"span",42),e._uU(1),e.qZA()),2&i){const o=e.oxw(2);e.xp6(1),e.hij(" ",o.obtenerError("clave")," ")}}function M(i,l){1&i&&(e.TgZ(0,"span",42),e._uU(1," Seleccione una imagen por favor "),e.qZA())}function q(i,l){1&i&&(e.TgZ(0,"span",42),e._uU(1," Seleccione una imagen por favor "),e.qZA())}const m=function(){return{standalone:!0}};function E(i,l){if(1&i){const o=e.EpF();e.TgZ(0,"div",35)(1,"label",43),e.NdJ("ngModelChange",function(r){e.CHM(o);const t=e.oxw(2);return e.KtG(t.imagenPerfilDos=r)}),e._uU(2,"Imagen de perfil 2"),e.qZA(),e.TgZ(3,"input",37),e.NdJ("change",function(r){e.CHM(o);const t=e.oxw(2);return e.KtG(t.guardarImagenDos(r))}),e.qZA(),e.YNc(4,q,2,0,"span",23),e.qZA()}if(2&i){const o=e.oxw(2);e.xp6(1),e.Q6J("ngModel",o.imagenPerfilDos)("ngModelOptions",e.DdM(3,m)),e.xp6(3),e.Q6J("ngIf",o.validarImagenDos())}}function I(i,l){if(1&i&&(e.TgZ(0,"span",42),e._uU(1),e.qZA()),2&i){const o=e.oxw(3);e.xp6(1),e.hij(" ",o.obtenerError("obraSocial")," ")}}function R(i,l){if(1&i&&(e.TgZ(0,"div",30)(1,"label",44),e._uU(2,"Obra social"),e.qZA(),e._UZ(3,"input",45),e.YNc(4,I,2,1,"span",23),e.qZA()),2&i){const o=e.oxw(2);e.xp6(4),e.Q6J("ngIf",o.esValidoElCampo("obraSocial"))}}function N(i,l){if(1&i&&(e.TgZ(0,"span",42),e._uU(1),e.qZA()),2&i){const o=e.oxw(3);e.xp6(1),e.hij(" ",o.obtenerError("especialidad")," ")}}function P(i,l){if(1&i){const o=e.EpF();e.TgZ(0,"div",30)(1,"label",46),e._uU(2,"Especialidad"),e.qZA(),e._UZ(3,"br")(4,"p-multiSelect",47)(5,"br"),e.TgZ(6,"label",46),e._uU(7,"No encuentras tu especialidad. Agregala a la lista: "),e.qZA(),e.TgZ(8,"input",48),e.NdJ("ngModelChange",function(r){e.CHM(o);const t=e.oxw(2);return e.KtG(t.especialidadAgregada=r)}),e.qZA(),e.TgZ(9,"input",49),e.NdJ("click",function(){e.CHM(o);const r=e.oxw(2);return e.KtG(r.agregarEspecialidad())}),e.qZA(),e.YNc(10,N,2,1,"span",23),e.TgZ(11,"span"),e._uU(12),e.qZA()()}if(2&i){const o=e.oxw(2);e.xp6(4),e.Q6J("options",o.listaEspecialidades),e.xp6(4),e.Q6J("ngModel",o.especialidadAgregada)("ngModelOptions",e.DdM(5,m)),e.xp6(2),e.Q6J("ngIf",o.esValidoElCampo("especialidad")),e.xp6(2),e.hij(" ",o.mensajeConfirmacion," ")}}function J(i,l){1&i&&(e.TgZ(0,"div"),e._uU(1,"This field is required."),e.qZA())}function O(i,l){if(1&i&&(e.TgZ(0,"div",54),e.YNc(1,J,2,0,"div",55),e.qZA()),2&i){e.oxw();const o=e.MAs(2);e.xp6(1),e.Q6J("ngIf",null==o.errors?null:o.errors.required)}}function y(i,l){if(1&i){const o=e.EpF();e.TgZ(0,"div",50)(1,"re-captcha",51,52),e.NdJ("resolved",function(r){e.CHM(o);const t=e.oxw(2);return e.KtG(t.resolverCaptcha(r))})("ngModelChange",function(r){e.CHM(o);const t=e.oxw(2);return e.KtG(t.token=r)}),e.qZA(),e.YNc(3,O,2,1,"div",53),e.qZA()}if(2&i){const o=e.MAs(2),a=e.oxw(2);e.xp6(1),e.ekj("is-invalid",o.invalid&&(o.dirty||o.touched)),e.Q6J("ngModel",a.token),e.xp6(2),e.Q6J("ngIf",o.invalid&&(o.dirty||o.touched))}}function S(i,l){if(1&i){const o=e.EpF();e.TgZ(0,"form",16,17),e.NdJ("ngSubmit",function(){e.CHM(o);const r=e.oxw();return e.KtG(r.registrarse())}),e.TgZ(2,"h4",18),e._uU(3),e.qZA(),e.TgZ(4,"div",19)(5,"div",20)(6,"label",21),e._uU(7,"Nombre"),e.qZA(),e._UZ(8,"input",22),e.YNc(9,C,2,1,"span",23),e.qZA(),e.TgZ(10,"div",20)(11,"label",24),e._uU(12,"Apellido"),e.qZA(),e._UZ(13,"input",25),e.YNc(14,Z,2,1,"span",23),e.qZA(),e.TgZ(15,"div",20)(16,"label",26),e._uU(17,"Edad"),e.qZA(),e._UZ(18,"input",27),e.YNc(19,b,2,1,"span",23),e.qZA(),e.TgZ(20,"div",20)(21,"label",28),e._uU(22,"DNI"),e.qZA(),e._UZ(23,"input",29),e.YNc(24,T,2,1,"span",23),e.qZA(),e.TgZ(25,"div",30)(26,"label",31),e._uU(27,"Email"),e.qZA(),e._UZ(28,"input",32),e.YNc(29,A,2,1,"span",23),e.qZA(),e.TgZ(30,"div",30)(31,"label",33),e._uU(32,"Contrase\xf1a"),e.TgZ(33,"span"),e._uU(34," (Minimo 6 caracteres)"),e.qZA()(),e._UZ(35,"input",34),e.YNc(36,U,2,1,"span",23),e.qZA(),e.TgZ(37,"div",35)(38,"label",36),e.NdJ("ngModelChange",function(r){e.CHM(o);const t=e.oxw();return e.KtG(t.imagenPerfilUno=r)}),e._uU(39,"Imagen de perfil"),e.qZA(),e.TgZ(40,"input",37),e.NdJ("change",function(r){e.CHM(o);const t=e.oxw();return e.KtG(t.guardarImagenUno(r))}),e.qZA(),e.YNc(41,M,2,0,"span",23),e.qZA(),e.YNc(42,E,5,4,"div",38),e.YNc(43,R,5,1,"div",39),e.YNc(44,P,13,6,"div",39),e.qZA(),e.YNc(45,y,4,4,"div",40),e.TgZ(46,"button",41),e._uU(47,"Registrarse"),e.qZA()()}if(2&i){const o=e.oxw();e.Q6J("formGroup",o.formulario),e.xp6(3),e.hij("Registro de usuario de tipo : ",o.tipoUsuario,""),e.xp6(6),e.Q6J("ngIf",o.esValidoElCampo("nombre")),e.xp6(5),e.Q6J("ngIf",o.esValidoElCampo("apellido")),e.xp6(5),e.Q6J("ngIf",o.esValidoElCampo("edad")),e.xp6(5),e.Q6J("ngIf",o.esValidoElCampo("dni")),e.xp6(5),e.Q6J("ngIf",o.esValidoElCampo("email")),e.xp6(7),e.Q6J("ngIf",o.esValidoElCampo("clave")),e.xp6(2),e.Q6J("ngModel",o.imagenPerfilUno)("ngModelOptions",e.DdM(16,m)),e.xp6(3),e.Q6J("ngIf",o.validarImagenUno()),e.xp6(1),e.Q6J("ngIf","Paciente"==o.tipoUsuario),e.xp6(1),e.Q6J("ngIf","Paciente"==o.tipoUsuario),e.xp6(1),e.Q6J("ngIf","Especialista"==o.tipoUsuario),e.xp6(1),e.Q6J("ngIf",o.validarFormulario()),e.xp6(1),e.Q6J("disabled",o.flagCaptcha)}}const w=[{path:"",component:(()=>{class i{constructor(o,a,r,t){this.spinner=o,this.autenticador=a,this.forms=r,this.router=t,this.formulario=this.forms.group({nombre:["",[n.kI.required]],apellido:["",[n.kI.required]],edad:["",[n.kI.required,n.kI.min(1),n.kI.max(100)]],dni:["",[n.kI.required,n.kI.min(1e6),n.kI.max(99999999)]],especialidad:["",[n.kI.required]],email:["",[n.kI.email,n.kI.required]],clave:["",[n.kI.required,n.kI.minLength(6)]],obraSocial:["",[n.kI.required]]}),this.tipoUsuario="",this.imagenPerfilUno=null,this.imagenPerfilDos=null,this.mensajeError="",this.flagRegistro=!1,this.mensajeConfirmacion="",this.especialidadAgregada=null,this.listaEspecialidades=[{especialidad:"Psicologia"},{especialidad:"Cardiolog\xeda"},{especialidad:"Neurolog\xeda"}],this.flagCaptcha=!0,this.token=void 0}resolverCaptcha(o){null!=o&&o.length>0&&(this.flagCaptcha=!1)}send(o){if(o.invalid)for(const a of Object.keys(o.controls))o.controls[a].markAsTouched();else console.debug(`Token [${this.token}] generated`)}ngOnInit(){this.formulario.reset()}esValidoElCampo(o){return this.formulario.controls[o].errors&&this.formulario.controls[o].touched}validarImagenUno(){return null==this.imagenPerfilUno&&this.flagRegistro}validarImagenDos(){return null==this.imagenPerfilDos&&this.flagRegistro}verificarEspecialidad(){return"Otro"==this.formulario.value.especialidad}obtenerError(o){if(!this.formulario.controls[o]&&!this.formulario.controls[o].errors)return null;const a=this.formulario.controls[o].errors;for(const r of Object.keys(a))switch(r){case"required":return"Este campo es requerido";case"minlength":return`Minimo ${a.minlength.requiredLength} caracteres.`;case"maxlength":return`Maximo ${a.maxlength.requiredLength} caracteres.`;case"min":return`Como minimo debe ser ${a.min.min}.`;case"max":return`Como maximo debe ser ${a.max.max}.`;case"email":return"El formato del mail es incorrecto"}return null}lanzarSpinner(o){var a=this;return(0,u.Z)(function*(){""!=a.tipoUsuario&&(a.spinner.show(),setTimeout(()=>{a.spinner.hide()},o))})()}guardarImagenUno(o){this.imagenPerfilUno=o.target.files[0],console.log("Se guardo imagen 1")}guardarImagenDos(o){this.imagenPerfilDos=o.target.files[0],console.log("Se guardo imagen 2")}validarFormulario(){if(!(this.esValidoElCampo("nombre")||this.esValidoElCampo("apellido")||this.esValidoElCampo("dni")||this.esValidoElCampo("edad")||this.esValidoElCampo("email")||this.esValidoElCampo("clave")||this.validarImagenUno())){if("Paciente"==this.tipoUsuario&&!this.esValidoElCampo("obraSocial")&&!this.validarImagenDos())return!0;if(!this.esValidoElCampo("especialidad"))return!0}return!1}registrarse(){var o=this;if(this.flagRegistro=!0,this.validarFormulario()){console.log("DATOS BIEN INGRESADOS");const a={tipo:this.tipoUsuario,nombre:this.formulario.value.nombre,apellido:this.formulario.value.apellido,edad:this.formulario.value.edad,dni:this.formulario.value.dni,email:this.formulario.value.email,imagenPerfilUno:this.imagenPerfilUno,imagenPerfilDos:this.imagenPerfilDos,obraSocial:this.formulario.value.obraSocial,especialidad:this.formulario.value.especialidad,estaActiva:!1,hora:new Date};this.spinner.show(),this.autenticador.registro(a,this.formulario.value.clave).then(r=>{setTimeout(()=>{if("string"!=typeof r){let t="Paciente"==a.tipo?"Se ha registrado como paciente exitosamente. Se enviado un correo electronico al email: "+a.email+" por favor verifiquelo para poder iniciar sesi\xf3n":"Se ha registrado como especialista exitosamente. Se enviado un correo electronico al email: "+a.email+" por favor verifiquelo para poder iniciar sesi\xf3n. Recuerde que para poder iniciar sesi\xf3n su cuenta debe ser validada por un administrador, proceso que puede llevar hasta 48 hs habiles en resolverse. Tenga paciencia.";f().fire({icon:"success",title:"Usuario registrado con exito",footer:t,showConfirmButton:!0}).then(()=>{this.spinner.show(),setTimeout((0,u.Z)(function*(){o.spinner.hide(),yield o.autenticador.cerrarSesion(),o.navigate("sesiones/login")}),500)})}else this.mostrarError(r),f().fire({icon:"error",title:"Oops...",text:"Error al crear cuenta",footer:this.mensajeError});this.spinner.hide()},100)})}else console.log("REVISE LOS DATOS INGRESADOS"),this.formulario.markAllAsTouched()}mostrarError(o){switch(o){case"auth/email-already-in-use":this.mensajeError="El correo ya est\xe1 registrado, prueba con otro";break;case"auth/invalid-email":this.mensajeError="El formato de correo es invalido";break;case"dni-duplicado":this.mensajeError="El dni "+this.formulario.value.dni+" ya se encuentra registrado en el sistema por lo tanto no es v\xe1lido para registrarse";break;case"auth/operation-not-allowed":this.mensajeError="Operaci\xf3n no permitida"}}navigate(o){this.router.navigateByUrl(o)}agregarEspecialidad(){null!=this.especialidadAgregada&&(null==this.listaEspecialidades.find(o=>o.especialidad==this.especialidadAgregada)?(this.listaEspecialidades.push({especialidad:this.especialidadAgregada}),this.mensajeConfirmacion="Especialidad "+this.especialidadAgregada+" agregada con \xe9xito",setTimeout(()=>{this.mensajeConfirmacion=""},2e3)):(this.mensajeConfirmacion="La especialidad "+this.especialidadAgregada+" ya existe en la lista",setTimeout(()=>{this.mensajeConfirmacion=""},2e3)))}static#e=this.\u0275fac=function(a){return new(a||i)(e.Y36(v.t2),e.Y36(x.T),e.Y36(n.qu),e.Y36(d.F0))};static#o=this.\u0275cmp=e.Xpm({type:i,selectors:[["app-registro"]],decls:31,vars:2,consts:[["lang","es"],[1,"bg-dark"],[1,"container"],[1,"py-5","text-center"],[1,"lead"],[1,"row","g-5"],[1,"col-md-7","col-lg-8"],[1,"formulario"],["id","tipo-usuario",1,"col-md-5"],["for","tipo-usuario",1,"form-label"],["name","tipo-usuario","required","",1,"form-select",3,"ngModel","change","ngModelChange"],["value",""],[1,"mb-4"],["class","needs-validation","novalidate","",3,"formGroup","ngSubmit",4,"ngIf"],[1,"my-5","pt-5","text-muted","text-center","text-small"],[1,"mb-1"],["novalidate","",1,"needs-validation",3,"formGroup","ngSubmit"],["form","ngForm"],[1,"mb-3"],[1,"row","g-3"],[1,"col-sm-6"],["for","nombre",1,"form-label"],["type","text","id","nombre","placeholder","Ingrese nombre","required","","formControlName","nombre",1,"form-control"],["class","form-text text-danger",4,"ngIf"],["for","apellido",1,"form-label"],["type","text","id","apellido","placeholder","Ingrese apellido","required","","formControlName","apellido",1,"form-control"],["for","edad",1,"form-label"],["type","number","id","edad","placeholder","Ingrese edad","required","","formControlName","edad",1,"form-control"],["for","dni",1,"form-label"],["type","number","id","dni","placeholder","Ingrese dni","required","","formControlName","dni",1,"form-control"],[1,"col-12"],["for","email",1,"form-label"],["type","email","id","email","placeholder","Ingrese email (ej: mariano@gmail.com)","required","","formControlName","email",1,"form-control"],["for","clave",1,"form-label"],["type","password","id","clave","placeholder","*********","required","","formControlName","clave",1,"form-control"],[1,"col-6"],["for","archivo","id","foto1","name","imagenPerfilUno",1,"form-label",3,"ngModel","ngModelOptions","ngModelChange"],["type","file",1,"archivo",3,"change"],["class","col-6",4,"ngIf"],["class","col-12",4,"ngIf"],["class","captcha",4,"ngIf"],["type","submit",1,"w-100","btn","btn-danger","btn-lg",2,"margin-top","10px",3,"disabled"],[1,"form-text","text-danger"],["for","archivo","id","foto2","name","imagenPerfilDos",1,"form-label",3,"ngModel","ngModelOptions","ngModelChange"],["for","obra-social",1,"form-label"],["type","text","id","obra-social","placeholder","Ingrese obra social","required","","formControlName","obraSocial",1,"form-control"],["for","especialidad",1,"form-label"],["formControlName","especialidad","name","especialidad","optionLabel","especialidad","placeholder","Elige una especialidad",1,"especialidad",3,"options"],["type","text","placeholder","Ej: Gen\xe9tica","name","especialidad-agregada",2,"margin-left","5px",3,"ngModel","ngModelOptions","ngModelChange"],["value","Agregar",1,"btn","btn-primary",2,"margin-left","5px",3,"click"],[1,"captcha"],["id","recaptcha","name","recaptcha","required","",3,"ngModel","resolved","ngModelChange"],["recaptcha","ngModel"],["class","invalid-feedback",4,"ngIf"],[1,"invalid-feedback"],[4,"ngIf"]],template:function(a,r){1&a&&(e.TgZ(0,"html",0)(1,"head")(2,"title"),e._uU(3,"Registro"),e.qZA()(),e.TgZ(4,"body",1)(5,"div",2)(6,"main")(7,"div",3)(8,"h2"),e._uU(9,"Registrar usuario"),e.qZA(),e.TgZ(10,"p",4),e._uU(11,"Por medio del siguiente formulario se puede registrar un nuevo usuario para la clinica online de Mariano"),e.qZA()(),e.TgZ(12,"div",5)(13,"div",6)(14,"div",7)(15,"div",8)(16,"label",9),e._uU(17,"Tipo de Usuario"),e.qZA(),e.TgZ(18,"select",10),e.NdJ("change",function(){return r.lanzarSpinner(500)})("ngModelChange",function(Y){return r.tipoUsuario=Y}),e.TgZ(19,"option",11),e._uU(20,"Elegir tipo de usuario..."),e.qZA(),e.TgZ(21,"option"),e._uU(22,"Paciente"),e.qZA(),e.TgZ(23,"option"),e._uU(24,"Especialista"),e.qZA()()()(),e._UZ(25,"hr",12),e.YNc(26,S,48,17,"form",13),e.qZA()()(),e.TgZ(27,"footer",14)(28,"p",15),e._uU(29,"\xa9 2024 Clinica Online Fern\xe1ndez Mariano 4A"),e.qZA()()()()(),e._UZ(30,"router-outlet")),2&a&&(e.xp6(18),e.Q6J("ngModel",r.tipoUsuario),e.xp6(8),e.Q6J("ngIf",""!=r.tipoUsuario))},dependencies:[p.O5,d.lC,n._Y,n.YN,n.Kr,n.Fj,n.wV,n.EJ,n.JJ,n.JL,n.Q7,n.On,n.sg,n.u,_.NU,c.Vd,c.wT],styles:["title[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h4[_ngcontent-%COMP%], label[_ngcontent-%COMP%], p[_ngcontent-%COMP%], span[_ngcontent-%COMP%]{color:#fff}body[_ngcontent-%COMP%]{height:180vh}[_ngcontent-%COMP%]::placeholder{color:#28283076;font-size:1.2em}.archivo[_ngcontent-%COMP%]{color:#fff}#tipo-usuario[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:18px}.mb-4[_ngcontent-%COMP%]{color:#fff}#tipo-usuario[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{height:80px;width:300px;background-color:#bd0e0ecf;color:#fff}.especialidad[_ngcontent-%COMP%]{margin:7px}.captcha[_ngcontent-%COMP%]{margin-left:50px}re-captcha.is-invalid[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{border:1px solid #dc3545!important;border-radius:.2rem}"]})}return i})()}];let j=(()=>{class i{static#e=this.\u0275fac=function(a){return new(a||i)};static#o=this.\u0275mod=e.oAB({type:i});static#i=this.\u0275inj=e.cJS({imports:[d.Bz.forChild(w),d.Bz]})}return i})();var Q=s(553);let k=(()=>{class i{static#e=this.\u0275fac=function(a){return new(a||i)};static#o=this.\u0275mod=e.oAB({type:i});static#i=this.\u0275inj=e.cJS({providers:[{provide:c.BZ,useValue:{siteKey:Q.N.recaptcha.siteKey}}],imports:[p.ez,j,n.u5,p.ez,n.UX,_.q4,c.lQ,c.a]})}return i})()}}]);