"use strict";(self.webpackChunktp_final_clinica=self.webpackChunktp_final_clinica||[]).push([[95],{7095:(F,g,n)=>{n.r(g),n.d(g,{BienvenidoModule:()=>T});var h=n(6814),l=n(7045),p=n(5861),i=n(5879),v=n(5196),y=n(4067),b=n(8672);let A=(()=>{class e{constructor(t,o){this.document=t,this.platformId=o,this.documentIsAccessible=(0,h.NF)(this.platformId)}static getCookieRegExp(t){const o=t.replace(/([\[\]{}()|=;+?,.*^$])/gi,"\\$1");return new RegExp("(?:^"+o+"|;\\s*"+o+")=(.*?)(?:;|$)","g")}static safeDecodeURIComponent(t){try{return decodeURIComponent(t)}catch{return t}}check(t){return!!this.documentIsAccessible&&(t=encodeURIComponent(t),e.getCookieRegExp(t).test(this.document.cookie))}get(t){if(this.documentIsAccessible&&this.check(t)){t=encodeURIComponent(t);const s=e.getCookieRegExp(t).exec(this.document.cookie);return s[1]?e.safeDecodeURIComponent(s[1]):""}return""}getAll(){if(!this.documentIsAccessible)return{};const t={},o=this.document;return o.cookie&&""!==o.cookie&&o.cookie.split(";").forEach(s=>{const[c,r]=s.split("=");t[e.safeDecodeURIComponent(c.replace(/^ /,""))]=e.safeDecodeURIComponent(r)}),t}set(t,o,s,c,r,d,f,E){if(!this.documentIsAccessible)return;if("number"==typeof s||s instanceof Date||c||r||d||f)return void this.set(t,o,{expires:s,path:c,domain:r,secure:d,sameSite:f||"Lax",partitioned:E});let u=encodeURIComponent(t)+"="+encodeURIComponent(o)+";";const a=s||{};a.expires&&(u+="number"==typeof a.expires?"expires="+new Date((new Date).getTime()+1e3*a.expires*60*60*24).toUTCString()+";":"expires="+a.expires.toUTCString()+";"),a.path&&(u+="path="+a.path+";"),a.domain&&(u+="domain="+a.domain+";"),!1===a.secure&&"None"===a.sameSite&&(a.secure=!0,console.warn(`[ngx-cookie-service] Cookie ${t} was forced with secure flag because sameSite=None.More details : https://github.com/stevermeister/ngx-cookie-service/issues/86#issuecomment-597720130`)),a.secure&&(u+="secure;"),a.sameSite||(a.sameSite="Lax"),u+="sameSite="+a.sameSite+";",a.partitioned&&(u+="Partitioned;"),this.document.cookie=u}delete(t,o,s,c,r="Lax"){this.documentIsAccessible&&this.set(t,"",{expires:new Date("Thu, 01 Jan 1970 00:00:01 GMT"),path:o,domain:s,secure:c,sameSite:r})}deleteAll(t,o,s,c="Lax"){if(!this.documentIsAccessible)return;const r=this.getAll();for(const d in r)r.hasOwnProperty(d)&&this.delete(d,t,o,s,c)}static#t=this.\u0275fac=function(o){return new(o||e)(i.LFG(h.K0),i.LFG(i.Lbi))};static#e=this.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),x=(()=>{class e{constructor(){this.$emisor=new i.vpe,this.modoNocturno=!1}emitirEvento(){this.$emisor.emit()}cambiarModo(){this.modoNocturno=!this.modoNocturno}static#t=this.\u0275fac=function(o){return new(o||e)};static#e=this.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),C=(()=>{class e{constructor(t,o,s,c,r,d){this.autenticacion=t,this.firestore=o,this.spinner=s,this.cookieService=c,this.modo=r,this.router=d,this.fotoUsuario=null,this.emailUsuario=null,this.tipoSeleccionado="Administrador"}ngOnInit(){var t=this;return(0,p.Z)(function*(){null==t.firestore.datosUsuarioActual&&(t.spinner.show(),yield t.firestore.obtenerInfoUsuario(t.autenticacion.usuarioActual.uid),t.spinner.hide()),t.tipoSeleccionado=t.firestore.datosUsuarioActual.tipoUsuario,t.cookieService.check("modo-nocturno")&&"true"==t.cookieService.get("modo-nocturno")&&(t.modo.modoNocturno=!0)})()}cambiarModo(){this.modo.cambiarModo(),this.modo.emitirEvento(),this.cookieService.set("modo-nocturno",this.modo.modoNocturno?"true":"false")}cerrarSesion(){var t=this;this.spinner.show(),setTimeout((0,p.Z)(function*(){yield t.autenticacion.cerrarSesion(),t.spinner.hide(),t.navigate("home")}),500)}navigate(t){this.router.navigateByUrl(t)}static#t=this.\u0275fac=function(o){return new(o||e)(i.Y36(v.T),i.Y36(y.C),i.Y36(b.t2),i.Y36(A),i.Y36(x),i.Y36(l.F0))};static#e=this.\u0275cmp=i.Xpm({type:e,selectors:[["app-navbar"]],decls:9,vars:2,consts:[["id","navbar"],[1,"navbar","navbar-light","bg-primary","fixed-top"],[1,"navbar-brand","text-light"],["src","https://www.delacabeza-rivera.es/wp-content/uploads/2020/06/PERFIL-VACIO.png","width","40","height","40","alt","",1,"d-inline-block","align-top",2,"border-radius","100%"],["type","image","src","https://static.thenounproject.com/png/29386-200.png",1,"btnNavbar",3,"click"],["type","image","src","https://cdn-icons-png.flaticon.com/512/25/25694.png",1,"btnNavbar",3,"click"]],template:function(o,s){1&o&&(i.TgZ(0,"div",0)(1,"nav",1)(2,"a",2),i._UZ(3,"img",3),i._uU(4),i.qZA(),i.TgZ(5,"div")(6,"input",4),i.NdJ("click",function(){return s.cerrarSesion()}),i.qZA(),i.TgZ(7,"input",5),i.NdJ("click",function(){return s.navigate("home")}),i.qZA()()()(),i._UZ(8,"router-outlet")),2&o&&(i.xp6(4),i.AsE(" ",s.autenticacion.usuarioActual.email," (",s.tipoSeleccionado,") "))},dependencies:[l.lC],styles:[".btnNavbar[_ngcontent-%COMP%]{width:40px;height:40px;margin:4px;padding:-2px;filter:invert(100%)}.btnNavbar[_ngcontent-%COMP%]:hover{border:solid;border-color:#ffffffbd;cursor:pointer}#navbar[_ngcontent-%COMP%]{margin:69px}.navbar-brand[_ngcontent-%COMP%]{margin:8px;padding:3px}"]})}return e})();var U=n(3519),I=n.n(U);const N=[{path:"",component:C,children:[{path:"",redirectTo:"mi-perfil",pathMatch:"full"},{path:"turnos",loadChildren:()=>n.e(151).then(n.bind(n,2151)).then(e=>e.TurnosModule)},{path:"mi-perfil",loadChildren:()=>n.e(33).then(n.bind(n,6033)).then(e=>e.MiPerfilModule)},{path:"usuarios",loadChildren:()=>n.e(868).then(n.bind(n,868)).then(e=>e.UsuariosModule),canActivate:[(()=>{class e{constructor(t,o,s,c){var r=this;this.firestore=t,this.autenticacion=o,this.router=s,this.spinner=c,this.canActivate=(0,p.Z)(function*(){return r.spinner.show(),yield r.firestore.obtenerInfoUsuario(r.autenticacion.usuarioActual?.uid),r.spinner.hide(),"Administrador"==r.firestore.datosUsuarioActual.tipoUsuario?(console.log("Es admin"),!0):(yield I().fire({icon:"error",title:"Acceso restringido",text:"El usuario logueado actualmente es de tipo "+r.firestore.datosUsuarioActual.tipoUsuario+" y no tiene permitido el acceso a est\xe1 seccion ya que solo est\xe1 permitida para usuarios administradores."}),r.router.navigateByUrl("bienvenido/mi-perfil"),!1)})}static#t=this.\u0275fac=function(o){return new(o||e)(i.LFG(y.C),i.LFG(v.T),i.LFG(l.F0),i.LFG(b.t2))};static#e=this.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})()]},{path:"pacientes",loadChildren:()=>n.e(635).then(n.bind(n,6635)).then(e=>e.PacientesModule)}]}];let M=(()=>{class e{static#t=this.\u0275fac=function(o){return new(o||e)};static#e=this.\u0275mod=i.oAB({type:e});static#o=this.\u0275inj=i.cJS({imports:[l.Bz.forChild(N),l.Bz]})}return e})(),T=(()=>{class e{static#t=this.\u0275fac=function(o){return new(o||e)};static#e=this.\u0275mod=i.oAB({type:e});static#o=this.\u0275inj=i.cJS({imports:[h.ez,M]})}return e})()}}]);