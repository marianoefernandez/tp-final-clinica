"use strict";(self.webpackChunktp_final_clinica=self.webpackChunktp_final_clinica||[]).push([[179],{9010:(Nt,Ve,U)=>{U.d(Ve,{$:()=>Zo,A:()=>se,G:()=>We,K:()=>Bs,L:()=>Ns,N:()=>gr,P:()=>tc,R:()=>qu,U:()=>Ot,V:()=>fs,W:()=>Bi,X:()=>ps,Y:()=>xo,Z:()=>_n,_:()=>Ds,a:()=>dt,a0:()=>iu,a1:()=>Dr,a2:()=>ci,a3:()=>As,a4:()=>to,a5:()=>Ia,a6:()=>Fo,a7:()=>xs,a8:()=>Ra,a9:()=>Iu,aA:()=>ke,aB:()=>Ue,aC:()=>xe,aD:()=>Zr,aE:()=>st,aF:()=>wt,aG:()=>bn,aH:()=>ic,aI:()=>ga,aJ:()=>Xn,aN:()=>zs,aQ:()=>ji,aa:()=>ks,ab:()=>Fs,ac:()=>Ha,ad:()=>Pa,ae:()=>ha,af:()=>A,ag:()=>L,ah:()=>pe,ak:()=>Ur,al:()=>$r,am:()=>hn,ap:()=>b,aq:()=>Jt,as:()=>ju,at:()=>za,au:()=>zt,av:()=>ai,aw:()=>Ci,ax:()=>ce,ay:()=>oc,az:()=>Ws,b:()=>Ma,c:()=>nc,d:()=>rc,e:()=>zi,f:()=>m,g:()=>Se,h:()=>Y,i:()=>B,j:()=>Mt,k:()=>zc,l:()=>cu,m:()=>uc,p:()=>_e,r:()=>Aa,s:()=>Gs,u:()=>Du});var f=U(5861),Z=U(534),q=U(9058),ye=U(7879),ge=U(7582),we=U(4537);const _e={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},se={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const We=function ve(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},at=function Ye(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},it=new q.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),nt=new ye.Yd("@firebase/auth");function ot(E,...h){nt.logLevel<=ye.in.ERROR&&nt.error(`Auth (${Z.SDK_VERSION}): ${E}`,...h)}function ce(E,...h){throw Fe(E,...h)}function Ue(E,...h){return Fe(E,...h)}function Ae(E,h,_){const D=Object.assign(Object.assign({},at()),{[h]:_});return new q.LL("auth","Firebase",D).create(h,{appName:E.name})}function Ie(E){return Ae(E,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function et(E,h,_){if(!(h instanceof _))throw _.name!==h.constructor.name&&ce(E,"argument-error"),Ae(E,"argument-error",`Type of ${h.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Fe(E,...h){if("string"!=typeof E){const _=h[0],D=[...h.slice(1)];return D[0]&&(D[0].appName=E.name),E._errorFactory.create(_,...D)}return it.create(E,...h)}function xe(E,h,..._){if(!E)throw Fe(h,..._)}function Tt(E){const h="INTERNAL ASSERTION FAILED: "+E;throw ot(h),new Error(h)}function zt(E,h){E||Tt(h)}function In(){var E;return typeof self<"u"&&(null===(E=self.location)||void 0===E?void 0:E.href)||""}function vn(){return"http:"===yr()||"https:"===yr()}function yr(){var E;return typeof self<"u"&&(null===(E=self.location)||void 0===E?void 0:E.protocol)||null}class Dt{constructor(h,_){this.shortDelay=h,this.longDelay=_,zt(_>h,"Short delay should be less than long delay!"),this.isMobile=(0,q.uI)()||(0,q.b$)()}get(){return function kt(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(vn()||(0,q.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Te(E,h){zt(E.emulator,"Emulator should always be set here");const{url:_}=E.emulator;return h?`${_}${h.startsWith("/")?h.slice(1):h}`:_}class Re{static initialize(h,_,D){this.fetchImpl=h,_&&(this.headersImpl=_),D&&(this.responseImpl=D)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void Tt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void Tt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void Tt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const $e={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Le=new Dt(3e4,6e4);function He(E,h){return E.tenantId&&!h.tenantId?Object.assign(Object.assign({},h),{tenantId:E.tenantId}):h}function tt(E,h,_,D){return yt.apply(this,arguments)}function yt(){return(yt=(0,f.Z)(function*(E,h,_,D,W={}){return vt(E,W,(0,f.Z)(function*(){let ie={},be={};D&&("GET"===h?be=D:ie={body:JSON.stringify(D)});const Ke=(0,q.xO)(Object.assign({key:E.config.apiKey},be)).slice(1),gt=yield E._getAdditionalHeaders();return gt["Content-Type"]="application/json",E.languageCode&&(gt["X-Firebase-Locale"]=E.languageCode),Re.fetch()(Gt(E,E.config.apiHost,_,Ke),Object.assign({method:h,headers:gt,referrerPolicy:"no-referrer"},ie))}))})).apply(this,arguments)}function vt(E,h,_){return $n.apply(this,arguments)}function $n(){return($n=(0,f.Z)(function*(E,h,_){E._canInitEmulator=!1;const D=Object.assign(Object.assign({},$e),h);try{const W=new Hn(E),ie=yield Promise.race([_(),W.promise]);W.clearNetworkTimeout();const be=yield ie.json();if("needConfirmation"in be)throw Ln(E,"account-exists-with-different-credential",be);if(ie.ok&&!("errorMessage"in be))return be;{const Ke=ie.ok?be.errorMessage:be.error.message,[gt,tn]=Ke.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===gt)throw Ln(E,"credential-already-in-use",be);if("EMAIL_EXISTS"===gt)throw Ln(E,"email-already-in-use",be);if("USER_DISABLED"===gt)throw Ln(E,"user-disabled",be);const En=D[gt]||gt.toLowerCase().replace(/[_\s]+/g,"-");if(tn)throw Ae(E,En,tn);ce(E,En)}}catch(W){if(W instanceof q.ZR)throw W;ce(E,"network-request-failed",{message:String(W)})}})).apply(this,arguments)}function jt(E,h,_,D){return nn.apply(this,arguments)}function nn(){return(nn=(0,f.Z)(function*(E,h,_,D,W={}){const ie=yield tt(E,h,_,D,W);return"mfaPendingCredential"in ie&&ce(E,"multi-factor-auth-required",{_serverResponse:ie}),ie})).apply(this,arguments)}function Gt(E,h,_,D){const W=`${h}${_}?${D}`;return E.config.emulator?Te(E.config,W):`${E.config.apiScheme}://${W}`}function or(E){switch(E){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Hn{constructor(h){this.auth=h,this.timer=null,this.promise=new Promise((_,D)=>{this.timer=setTimeout(()=>D(Ue(this.auth,"network-request-failed")),Le.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ln(E,h,_){const D={appName:E.name};_.email&&(D.email=_.email),_.phoneNumber&&(D.phoneNumber=_.phoneNumber);const W=Ue(E,h,D);return W.customData._tokenResponse=_,W}function Pt(E){return void 0!==E&&void 0!==E.getResponse}function zn(E){return void 0!==E&&void 0!==E.enterprise}class An{constructor(h){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===h.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=h.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=h.recaptchaEnforcementState}getProviderEnforcementState(h){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const _ of this.recaptchaEnforcementState)if(_.provider&&_.provider===h)return or(_.enforcementState);return null}isProviderEnabled(h){return"ENFORCE"===this.getProviderEnforcementState(h)||"AUDIT"===this.getProviderEnforcementState(h)}}function Vn(){return(Vn=(0,f.Z)(function*(E){return(yield tt(E,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Zn(E,h){return On.apply(this,arguments)}function On(){return(On=(0,f.Z)(function*(E,h){return tt(E,"GET","/v2/recaptchaConfig",He(E,h))})).apply(this,arguments)}function Kt(){return(Kt=(0,f.Z)(function*(E,h){return tt(E,"POST","/v1/accounts:delete",h)})).apply(this,arguments)}function rn(){return(rn=(0,f.Z)(function*(E,h){return tt(E,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function Kn(E,h){return Lr.apply(this,arguments)}function Lr(){return(Lr=(0,f.Z)(function*(E,h){return tt(E,"POST","/v1/accounts:lookup",h)})).apply(this,arguments)}function ii(E){if(E)try{const h=new Date(Number(E));if(!isNaN(h.getTime()))return h.toUTCString()}catch{}}function is(){return(is=(0,f.Z)(function*(E,h=!1){const _=(0,q.m9)(E),D=yield _.getIdToken(h),W=Mi(D);xe(W&&W.exp&&W.auth_time&&W.iat,_.auth,"internal-error");const ie="object"==typeof W.firebase?W.firebase:void 0,be=ie?.sign_in_provider;return{claims:W,token:D,authTime:ii($t(W.auth_time)),issuedAtTime:ii($t(W.iat)),expirationTime:ii($t(W.exp)),signInProvider:be||null,signInSecondFactor:ie?.sign_in_second_factor||null}})).apply(this,arguments)}function $t(E){return 1e3*Number(E)}function Mi(E){const[h,_,D]=E.split(".");if(void 0===h||void 0===_||void 0===D)return ot("JWT malformed, contained fewer than 3 sections"),null;try{const W=(0,q.tV)(_);return W?JSON.parse(W):(ot("Failed to decode base64 JWT payload"),null)}catch(W){return ot("Caught error parsing JWT payload as JSON",W?.toString()),null}}function Cn(E){const h=Mi(E);return xe(h,"internal-error"),xe(typeof h.exp<"u","internal-error"),xe(typeof h.iat<"u","internal-error"),Number(h.exp)-Number(h.iat)}function Wt(E,h){return Yn.apply(this,arguments)}function Yn(){return(Yn=(0,f.Z)(function*(E,h,_=!1){if(_)return h;try{return yield h}catch(D){throw D instanceof q.ZR&&function br({code:E}){return"auth/user-disabled"===E||"auth/user-token-expired"===E}(D)&&E.auth.currentUser===E&&(yield E.auth.signOut()),D}})).apply(this,arguments)}class Un{constructor(h){this.user=h,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(h){var _;if(h){const D=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),D}{this.errorBackoff=3e4;const W=(null!==(_=this.user.stsTokenManager.expirationTime)&&void 0!==_?_:0)-Date.now()-3e5;return Math.max(0,W)}}schedule(h=!1){var _=this;if(!this.isRunning)return;const D=this.getInterval(h);this.timerId=setTimeout((0,f.Z)(function*(){yield _.iteration()}),D)}iteration(){var h=this;return(0,f.Z)(function*(){try{yield h.user.getIdToken(!0)}catch(_){return void("auth/network-request-failed"===_?.code&&h.schedule(!0))}h.schedule()})()}}class Pn{constructor(h,_){this.createdAt=h,this.lastLoginAt=_,this._initializeTime()}_initializeTime(){this.lastSignInTime=ii(this.lastLoginAt),this.creationTime=ii(this.createdAt)}_copy(h){this.createdAt=h.createdAt,this.lastLoginAt=h.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Br(E){return Ni.apply(this,arguments)}function Ni(){return(Ni=(0,f.Z)(function*(E){var h;const _=E.auth,D=yield E.getIdToken(),W=yield Wt(E,Kn(_,{idToken:D}));xe(W?.users.length,_,"internal-error");const ie=W.users[0];E._notifyReloadListener(ie);const be=null!==(h=ie.providerUserInfo)&&void 0!==h&&h.length?Mr(ie.providerUserInfo):[],Ke=function fr(E,h){return[...E.filter(D=>!h.some(W=>W.providerId===D.providerId)),...h]}(E.providerData,be),En=!!E.isAnonymous&&!(E.email&&ie.passwordHash||Ke?.length),cr={uid:ie.localId,displayName:ie.displayName||null,photoURL:ie.photoUrl||null,email:ie.email||null,emailVerified:ie.emailVerified||!1,phoneNumber:ie.phoneNumber||null,tenantId:ie.tenantId||null,providerData:Ke,metadata:new Pn(ie.createdAt,ie.lastLoginAt),isAnonymous:En};Object.assign(E,cr)})).apply(this,arguments)}function Sr(){return(Sr=(0,f.Z)(function*(E){const h=(0,q.m9)(E);yield Br(h),yield h.auth._persistUserIfCurrent(h),h.auth._notifyListenersIfCurrent(h)})).apply(this,arguments)}function Mr(E){return E.map(h=>{var{providerId:_}=h,D=(0,ge._T)(h,["providerId"]);return{providerId:_,uid:D.rawId||"",displayName:D.displayName||null,email:D.email||null,phoneNumber:D.phoneNumber||null,photoURL:D.photoUrl||null}})}function Ee(){return(Ee=(0,f.Z)(function*(E,h){const _=yield vt(E,{},(0,f.Z)(function*(){const D=(0,q.xO)({grant_type:"refresh_token",refresh_token:h}).slice(1),{tokenApiHost:W,apiKey:ie}=E.config,be=Gt(E,W,"/v1/token",`key=${ie}`),Ke=yield E._getAdditionalHeaders();return Ke["Content-Type"]="application/x-www-form-urlencoded",Re.fetch()(be,{method:"POST",headers:Ke,body:D})}));return{accessToken:_.access_token,expiresIn:_.expires_in,refreshToken:_.refresh_token}})).apply(this,arguments)}function z(){return(z=(0,f.Z)(function*(E,h){return tt(E,"POST","/v2/accounts:revokeToken",He(E,h))})).apply(this,arguments)}class F{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(h){xe(h.idToken,"internal-error"),xe(typeof h.idToken<"u","internal-error"),xe(typeof h.refreshToken<"u","internal-error");const _="expiresIn"in h&&typeof h.expiresIn<"u"?Number(h.expiresIn):Cn(h.idToken);this.updateTokensAndExpiration(h.idToken,h.refreshToken,_)}updateFromIdToken(h){xe(0!==h.length,"internal-error");const _=Cn(h);this.updateTokensAndExpiration(h,null,_)}getToken(h,_=!1){var D=this;return(0,f.Z)(function*(){return _||!D.accessToken||D.isExpired?(xe(D.refreshToken,h,"user-token-expired"),D.refreshToken?(yield D.refresh(h,D.refreshToken),D.accessToken):null):D.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(h,_){var D=this;return(0,f.Z)(function*(){const{accessToken:W,refreshToken:ie,expiresIn:be}=yield function rr(E,h){return Ee.apply(this,arguments)}(h,_);D.updateTokensAndExpiration(W,ie,Number(be))})()}updateTokensAndExpiration(h,_,D){this.refreshToken=_||null,this.accessToken=h||null,this.expirationTime=Date.now()+1e3*D}static fromJSON(h,_){const{refreshToken:D,accessToken:W,expirationTime:ie}=_,be=new F;return D&&(xe("string"==typeof D,"internal-error",{appName:h}),be.refreshToken=D),W&&(xe("string"==typeof W,"internal-error",{appName:h}),be.accessToken=W),ie&&(xe("number"==typeof ie,"internal-error",{appName:h}),be.expirationTime=ie),be}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(h){this.accessToken=h.accessToken,this.refreshToken=h.refreshToken,this.expirationTime=h.expirationTime}_clone(){return Object.assign(new F,this.toJSON())}_performRefresh(){return Tt("not implemented")}}function k(E,h){xe("string"==typeof E||typeof E>"u","internal-error",{appName:h})}class oe{constructor(h){var{uid:_,auth:D,stsTokenManager:W}=h,ie=(0,ge._T)(h,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Un(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=_,this.auth=D,this.stsTokenManager=W,this.accessToken=W.accessToken,this.displayName=ie.displayName||null,this.email=ie.email||null,this.emailVerified=ie.emailVerified||!1,this.phoneNumber=ie.phoneNumber||null,this.photoURL=ie.photoURL||null,this.isAnonymous=ie.isAnonymous||!1,this.tenantId=ie.tenantId||null,this.providerData=ie.providerData?[...ie.providerData]:[],this.metadata=new Pn(ie.createdAt||void 0,ie.lastLoginAt||void 0)}getIdToken(h){var _=this;return(0,f.Z)(function*(){const D=yield Wt(_,_.stsTokenManager.getToken(_.auth,h));return xe(D,_.auth,"internal-error"),_.accessToken!==D&&(_.accessToken=D,yield _.auth._persistUserIfCurrent(_),_.auth._notifyListenersIfCurrent(_)),D})()}getIdTokenResult(h){return function Cr(E){return is.apply(this,arguments)}(this,h)}reload(){return function si(E){return Sr.apply(this,arguments)}(this)}_assign(h){this!==h&&(xe(this.uid===h.uid,this.auth,"internal-error"),this.displayName=h.displayName,this.photoURL=h.photoURL,this.email=h.email,this.emailVerified=h.emailVerified,this.phoneNumber=h.phoneNumber,this.isAnonymous=h.isAnonymous,this.tenantId=h.tenantId,this.providerData=h.providerData.map(_=>Object.assign({},_)),this.metadata._copy(h.metadata),this.stsTokenManager._assign(h.stsTokenManager))}_clone(h){const _=new oe(Object.assign(Object.assign({},this),{auth:h,stsTokenManager:this.stsTokenManager._clone()}));return _.metadata._copy(this.metadata),_}_onReload(h){xe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=h,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(h){this.reloadListener?this.reloadListener(h):this.reloadUserInfo=h}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(h,_=!1){var D=this;return(0,f.Z)(function*(){let W=!1;h.idToken&&h.idToken!==D.stsTokenManager.accessToken&&(D.stsTokenManager.updateFromServerResponse(h),W=!0),_&&(yield Br(D)),yield D.auth._persistUserIfCurrent(D),W&&D.auth._notifyListenersIfCurrent(D)})()}delete(){var h=this;return(0,f.Z)(function*(){if((0,Z._isFirebaseServerApp)(h.auth.app))return Promise.reject(Ie(h.auth));const _=yield h.getIdToken();return yield Wt(h,function ti(E,h){return Kt.apply(this,arguments)}(h.auth,{idToken:_})),h.stsTokenManager.clearRefreshToken(),h.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(h=>Object.assign({},h)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(h,_){var D,W,ie,be,Ke,gt,tn,En;const cr=null!==(D=_.displayName)&&void 0!==D?D:void 0,uo=null!==(W=_.email)&&void 0!==W?W:void 0,gu=null!==(ie=_.phoneNumber)&&void 0!==ie?ie:void 0,Qa=null!==(be=_.photoURL)&&void 0!==be?be:void 0,dc=null!==(Ke=_.tenantId)&&void 0!==Ke?Ke:void 0,Yu=null!==(gt=_._redirectEventId)&&void 0!==gt?gt:void 0,Ph=null!==(tn=_.createdAt)&&void 0!==tn?tn:void 0,hc=null!==(En=_.lastLoginAt)&&void 0!==En?En:void 0,{uid:Cl,emailVerified:qf,isAnonymous:Kf,providerData:ts,stsTokenManager:qc}=_;xe(Cl&&qc,h,"internal-error");const Kc=F.fromJSON(this.name,qc);xe("string"==typeof Cl,h,"internal-error"),k(cr,h.name),k(uo,h.name),xe("boolean"==typeof qf,h,"internal-error"),xe("boolean"==typeof Kf,h,"internal-error"),k(gu,h.name),k(Qa,h.name),k(dc,h.name),k(Yu,h.name),k(Ph,h.name),k(hc,h.name);const Ju=new oe({uid:Cl,auth:h,email:uo,emailVerified:qf,displayName:cr,isAnonymous:Kf,photoURL:Qa,phoneNumber:gu,tenantId:dc,stsTokenManager:Kc,createdAt:Ph,lastLoginAt:hc});return ts&&Array.isArray(ts)&&(Ju.providerData=ts.map(Zc=>Object.assign({},Zc))),Yu&&(Ju._redirectEventId=Yu),Ju}static _fromIdTokenResponse(h,_,D=!1){return(0,f.Z)(function*(){const W=new F;W.updateFromServerResponse(_);const ie=new oe({uid:_.localId,auth:h,stsTokenManager:W,isAnonymous:D});return yield Br(ie),ie})()}static _fromGetAccountInfoResponse(h,_,D){return(0,f.Z)(function*(){const W=_.users[0];xe(void 0!==W.localId,"internal-error");const ie=void 0!==W.providerUserInfo?Mr(W.providerUserInfo):[],be=!(W.email&&W.passwordHash||ie?.length),Ke=new F;Ke.updateFromIdToken(D);const gt=new oe({uid:W.localId,auth:h,stsTokenManager:Ke,isAnonymous:be}),tn={uid:W.localId,displayName:W.displayName||null,photoURL:W.photoUrl||null,email:W.email||null,emailVerified:W.emailVerified||!1,phoneNumber:W.phoneNumber||null,tenantId:W.tenantId||null,providerData:ie,metadata:new Pn(W.createdAt,W.lastLoginAt),isAnonymous:!(W.email&&W.passwordHash||ie?.length)};return Object.assign(gt,tn),gt})()}}const Pe=new Map;function st(E){zt(E instanceof Function,"Expected a class definition");let h=Pe.get(E);return h?(zt(h instanceof E,"Instance stored in cache mismatched with class"),h):(h=new E,Pe.set(E,h),h)}const Ot=(()=>{class E{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,f.Z)(function*(){return!0})()}_set(_,D){var W=this;return(0,f.Z)(function*(){W.storage[_]=D})()}_get(_){var D=this;return(0,f.Z)(function*(){const W=D.storage[_];return void 0===W?null:W})()}_remove(_){var D=this;return(0,f.Z)(function*(){delete D.storage[_]})()}_addListener(_,D){}_removeListener(_,D){}}return E.type="NONE",E})();function wt(E,h,_){return`firebase:${E}:${h}:${_}`}class qt{constructor(h,_,D){this.persistence=h,this.auth=_,this.userKey=D;const{config:W,name:ie}=this.auth;this.fullUserKey=wt(this.userKey,W.apiKey,ie),this.fullPersistenceKey=wt("persistence",W.apiKey,ie),this.boundEventHandler=_._onStorageEvent.bind(_),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(h){return this.persistence._set(this.fullUserKey,h.toJSON())}getCurrentUser(){var h=this;return(0,f.Z)(function*(){const _=yield h.persistence._get(h.fullUserKey);return _?oe._fromJSON(h.auth,_):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(h){var _=this;return(0,f.Z)(function*(){if(_.persistence===h)return;const D=yield _.getCurrentUser();return yield _.removeCurrentUser(),_.persistence=h,D?_.setCurrentUser(D):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(h,_,D="authUser"){return(0,f.Z)(function*(){if(!_.length)return new qt(st(Ot),h,D);const W=(yield Promise.all(_.map(function(){var tn=(0,f.Z)(function*(En){if(yield En._isAvailable())return En});return function(En){return tn.apply(this,arguments)}}()))).filter(tn=>tn);let ie=W[0]||st(Ot);const be=wt(D,h.config.apiKey,h.name);let Ke=null;for(const tn of _)try{const En=yield tn._get(be);if(En){const cr=oe._fromJSON(h,En);tn!==ie&&(Ke=cr),ie=tn;break}}catch{}const gt=W.filter(tn=>tn._shouldAllowMigration);return ie._shouldAllowMigration&&gt.length?(ie=gt[0],Ke&&(yield ie._set(be,Ke.toJSON())),yield Promise.all(_.map(function(){var tn=(0,f.Z)(function*(En){if(En!==ie)try{yield En._remove(be)}catch{}});return function(En){return tn.apply(this,arguments)}}())),new qt(ie,h,D)):new qt(ie,h,D)})()}}function Gn(E){const h=E.toLowerCase();if(h.includes("opera/")||h.includes("opr/")||h.includes("opios/"))return"Opera";if(as(h))return"IEMobile";if(h.includes("msie")||h.includes("trident/"))return"IE";if(h.includes("edge/"))return"Edge";if(ln(h))return"Firefox";if(h.includes("silk/"))return"Silk";if(Jr(h))return"Blackberry";if(ar(h))return"Webos";if(oi(h))return"Safari";if((h.includes("chrome/")||vs(h))&&!h.includes("edge/"))return"Chrome";if(Ci(h))return"Android";{const D=E.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===D?.length)return D[1]}return"Other"}function ln(E=(0,q.z$)()){return/firefox\//i.test(E)}function oi(E=(0,q.z$)()){const h=E.toLowerCase();return h.includes("safari/")&&!h.includes("chrome/")&&!h.includes("crios/")&&!h.includes("android")}function vs(E=(0,q.z$)()){return/crios\//i.test(E)}function as(E=(0,q.z$)()){return/iemobile/i.test(E)}function Ci(E=(0,q.z$)()){return/android/i.test(E)}function Jr(E=(0,q.z$)()){return/blackberry/i.test(E)}function ar(E=(0,q.z$)()){return/webos/i.test(E)}function ai(E=(0,q.z$)()){return/iphone|ipad|ipod/i.test(E)||/macintosh/i.test(E)&&/mobile/i.test(E)}function ke(E=(0,q.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(E)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(E)}function It(E=(0,q.z$)()){return ai(E)||Ci(E)||ar(E)||Jr(E)||/windows phone/i.test(E)||as(E)}function Xt(E,h=[]){let _;switch(E){case"Browser":_=Gn((0,q.z$)());break;case"Worker":_=`${Gn((0,q.z$)())}-${E}`;break;default:_=E}const D=h.length?h.join(","):"FirebaseCore-web";return`${_}/JsCore/${Z.SDK_VERSION}/${D}`}class gn{constructor(h){this.auth=h,this.queue=[]}pushCallback(h,_){const D=ie=>new Promise((be,Ke)=>{try{be(h(ie))}catch(gt){Ke(gt)}});D.onAbort=_,this.queue.push(D);const W=this.queue.length-1;return()=>{this.queue[W]=()=>Promise.resolve()}}runMiddleware(h){var _=this;return(0,f.Z)(function*(){if(_.auth.currentUser===h)return;const D=[];try{for(const W of _.queue)yield W(h),W.onAbort&&D.push(W.onAbort)}catch(W){D.reverse();for(const ie of D)try{ie()}catch{}throw _.auth._errorFactory.create("login-blocked",{originalMessage:W?.message})}})()}}function pr(){return(pr=(0,f.Z)(function*(E,h={}){return tt(E,"GET","/v2/passwordPolicy",He(E,h))})).apply(this,arguments)}class Es{constructor(h){var _,D,W,ie;const be=h.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(_=be.minPasswordLength)&&void 0!==_?_:6,be.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=be.maxPasswordLength),void 0!==be.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=be.containsLowercaseCharacter),void 0!==be.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=be.containsUppercaseCharacter),void 0!==be.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=be.containsNumericCharacter),void 0!==be.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=be.containsNonAlphanumericCharacter),this.enforcementState=h.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(W=null===(D=h.allowedNonAlphanumericCharacters)||void 0===D?void 0:D.join(""))&&void 0!==W?W:"",this.forceUpgradeOnSignin=null!==(ie=h.forceUpgradeOnSignin)&&void 0!==ie&&ie,this.schemaVersion=h.schemaVersion}validatePassword(h){var _,D,W,ie,be,Ke;const gt={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(h,gt),this.validatePasswordCharacterOptions(h,gt),gt.isValid&&(gt.isValid=null===(_=gt.meetsMinPasswordLength)||void 0===_||_),gt.isValid&&(gt.isValid=null===(D=gt.meetsMaxPasswordLength)||void 0===D||D),gt.isValid&&(gt.isValid=null===(W=gt.containsLowercaseLetter)||void 0===W||W),gt.isValid&&(gt.isValid=null===(ie=gt.containsUppercaseLetter)||void 0===ie||ie),gt.isValid&&(gt.isValid=null===(be=gt.containsNumericCharacter)||void 0===be||be),gt.isValid&&(gt.isValid=null===(Ke=gt.containsNonAlphanumericCharacter)||void 0===Ke||Ke),gt}validatePasswordLengthOptions(h,_){const D=this.customStrengthOptions.minPasswordLength,W=this.customStrengthOptions.maxPasswordLength;D&&(_.meetsMinPasswordLength=h.length>=D),W&&(_.meetsMaxPasswordLength=h.length<=W)}validatePasswordCharacterOptions(h,_){let D;this.updatePasswordCharacterOptionsStatuses(_,!1,!1,!1,!1);for(let W=0;W<h.length;W++)D=h.charAt(W),this.updatePasswordCharacterOptionsStatuses(_,D>="a"&&D<="z",D>="A"&&D<="Z",D>="0"&&D<="9",this.allowedNonAlphanumericCharacters.includes(D))}updatePasswordCharacterOptionsStatuses(h,_,D,W,ie){this.customStrengthOptions.containsLowercaseLetter&&(h.containsLowercaseLetter||(h.containsLowercaseLetter=_)),this.customStrengthOptions.containsUppercaseLetter&&(h.containsUppercaseLetter||(h.containsUppercaseLetter=D)),this.customStrengthOptions.containsNumericCharacter&&(h.containsNumericCharacter||(h.containsNumericCharacter=W)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(h.containsNonAlphanumericCharacter||(h.containsNonAlphanumericCharacter=ie))}}class Po{constructor(h,_,D,W){this.app=h,this.heartbeatServiceProvider=_,this.appCheckServiceProvider=D,this.config=W,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new us(this),this.idTokenSubscription=new us(this),this.beforeStateQueue=new gn(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=it,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=h.name,this.clientVersion=W.sdkClientVersion}_initializeWithPersistence(h,_){var D=this;return _&&(this._popupRedirectResolver=st(_)),this._initializationPromise=this.queue((0,f.Z)(function*(){var W,ie;if(!D._deleted&&(D.persistenceManager=yield qt.create(D,h),!D._deleted)){if(null!==(W=D._popupRedirectResolver)&&void 0!==W&&W._shouldInitProactively)try{yield D._popupRedirectResolver._initialize(D)}catch{}yield D.initializeCurrentUser(_),D.lastNotifiedUid=(null===(ie=D.currentUser)||void 0===ie?void 0:ie.uid)||null,!D._deleted&&(D._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var h=this;return(0,f.Z)(function*(){if(h._deleted)return;const _=yield h.assertedPersistence.getCurrentUser();if(h.currentUser||_){if(h.currentUser&&_&&h.currentUser.uid===_.uid)return h._currentUser._assign(_),void(yield h.currentUser.getIdToken());yield h._updateCurrentUser(_,!0)}})()}initializeCurrentUserFromIdToken(h){var _=this;return(0,f.Z)(function*(){try{const D=yield Kn(_,{idToken:h}),W=yield oe._fromGetAccountInfoResponse(_,D,h);yield _.directlySetCurrentUser(W)}catch(D){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",D),yield _.directlySetCurrentUser(null)}})()}initializeCurrentUser(h){var _=this;return(0,f.Z)(function*(){var D;if((0,Z._isFirebaseServerApp)(_.app)){const Ke=_.app.settings.authIdToken;return Ke?new Promise(gt=>{setTimeout(()=>_.initializeCurrentUserFromIdToken(Ke).then(gt,gt))}):_.directlySetCurrentUser(null)}const W=yield _.assertedPersistence.getCurrentUser();let ie=W,be=!1;if(h&&_.config.authDomain){yield _.getOrInitRedirectPersistenceManager();const Ke=null===(D=_.redirectUser)||void 0===D?void 0:D._redirectEventId,gt=ie?._redirectEventId,tn=yield _.tryRedirectSignIn(h);(!Ke||Ke===gt)&&tn?.user&&(ie=tn.user,be=!0)}if(!ie)return _.directlySetCurrentUser(null);if(!ie._redirectEventId){if(be)try{yield _.beforeStateQueue.runMiddleware(ie)}catch(Ke){ie=W,_._popupRedirectResolver._overrideRedirectResult(_,()=>Promise.reject(Ke))}return ie?_.reloadAndSetCurrentUserOrClear(ie):_.directlySetCurrentUser(null)}return xe(_._popupRedirectResolver,_,"argument-error"),yield _.getOrInitRedirectPersistenceManager(),_.redirectUser&&_.redirectUser._redirectEventId===ie._redirectEventId?_.directlySetCurrentUser(ie):_.reloadAndSetCurrentUserOrClear(ie)})()}tryRedirectSignIn(h){var _=this;return(0,f.Z)(function*(){let D=null;try{D=yield _._popupRedirectResolver._completeRedirectFn(_,h,!0)}catch{yield _._setRedirectUser(null)}return D})()}reloadAndSetCurrentUserOrClear(h){var _=this;return(0,f.Z)(function*(){try{yield Br(h)}catch(D){if("auth/network-request-failed"!==D?.code)return _.directlySetCurrentUser(null)}return _.directlySetCurrentUser(h)})()}useDeviceLanguage(){this.languageCode=function Ft(){if(typeof navigator>"u")return null;const E=navigator;return E.languages&&E.languages[0]||E.language||null}()}_delete(){var h=this;return(0,f.Z)(function*(){h._deleted=!0})()}updateCurrentUser(h){var _=this;return(0,f.Z)(function*(){if((0,Z._isFirebaseServerApp)(_.app))return Promise.reject(Ie(_));const D=h?(0,q.m9)(h):null;return D&&xe(D.auth.config.apiKey===_.config.apiKey,_,"invalid-user-token"),_._updateCurrentUser(D&&D._clone(_))})()}_updateCurrentUser(h,_=!1){var D=this;return(0,f.Z)(function*(){if(!D._deleted)return h&&xe(D.tenantId===h.tenantId,D,"tenant-id-mismatch"),_||(yield D.beforeStateQueue.runMiddleware(h)),D.queue((0,f.Z)(function*(){yield D.directlySetCurrentUser(h),D.notifyAuthListeners()}))})()}signOut(){var h=this;return(0,f.Z)(function*(){return(0,Z._isFirebaseServerApp)(h.app)?Promise.reject(Ie(h)):(yield h.beforeStateQueue.runMiddleware(null),(h.redirectPersistenceManager||h._popupRedirectResolver)&&(yield h._setRedirectUser(null)),h._updateCurrentUser(null,!0))})()}setPersistence(h){var _=this;return(0,Z._isFirebaseServerApp)(this.app)?Promise.reject(Ie(this)):this.queue((0,f.Z)(function*(){yield _.assertedPersistence.setPersistence(st(h))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(h){var _=this;return(0,f.Z)(function*(){_._getPasswordPolicyInternal()||(yield _._updatePasswordPolicy());const D=_._getPasswordPolicyInternal();return D.schemaVersion!==_.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(_._errorFactory.create("unsupported-password-policy-schema-version",{})):D.validatePassword(h)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var h=this;return(0,f.Z)(function*(){const _=yield function xn(E){return pr.apply(this,arguments)}(h),D=new Es(_);null===h.tenantId?h._projectPasswordPolicy=D:h._tenantPasswordPolicies[h.tenantId]=D})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(h){this._errorFactory=new q.LL("auth","Firebase",h())}onAuthStateChanged(h,_,D){return this.registerStateListener(this.authStateSubscription,h,_,D)}beforeAuthStateChanged(h,_){return this.beforeStateQueue.pushCallback(h,_)}onIdTokenChanged(h,_,D){return this.registerStateListener(this.idTokenSubscription,h,_,D)}authStateReady(){return new Promise((h,_)=>{if(this.currentUser)h();else{const D=this.onAuthStateChanged(()=>{D(),h()},_)}})}revokeAccessToken(h){var _=this;return(0,f.Z)(function*(){if(_.currentUser){const D=yield _.currentUser.getIdToken(),W={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:h,idToken:D};null!=_.tenantId&&(W.tenantId=_.tenantId),yield function ne(E,h){return z.apply(this,arguments)}(_,W)}})()}toJSON(){var h;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(h=this._currentUser)||void 0===h?void 0:h.toJSON()}}_setRedirectUser(h,_){var D=this;return(0,f.Z)(function*(){const W=yield D.getOrInitRedirectPersistenceManager(_);return null===h?W.removeCurrentUser():W.setCurrentUser(h)})()}getOrInitRedirectPersistenceManager(h){var _=this;return(0,f.Z)(function*(){if(!_.redirectPersistenceManager){const D=h&&st(h)||_._popupRedirectResolver;xe(D,_,"argument-error"),_.redirectPersistenceManager=yield qt.create(_,[st(D._redirectPersistence)],"redirectUser"),_.redirectUser=yield _.redirectPersistenceManager.getCurrentUser()}return _.redirectPersistenceManager})()}_redirectUserForId(h){var _=this;return(0,f.Z)(function*(){var D,W;return _._isInitialized&&(yield _.queue((0,f.Z)(function*(){}))),(null===(D=_._currentUser)||void 0===D?void 0:D._redirectEventId)===h?_._currentUser:(null===(W=_.redirectUser)||void 0===W?void 0:W._redirectEventId)===h?_.redirectUser:null})()}_persistUserIfCurrent(h){var _=this;return(0,f.Z)(function*(){if(h===_.currentUser)return _.queue((0,f.Z)(function*(){return _.directlySetCurrentUser(h)}))})()}_notifyListenersIfCurrent(h){h===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var h,_;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const D=null!==(_=null===(h=this.currentUser)||void 0===h?void 0:h.uid)&&void 0!==_?_:null;this.lastNotifiedUid!==D&&(this.lastNotifiedUid=D,this.authStateSubscription.next(this.currentUser))}registerStateListener(h,_,D,W){if(this._deleted)return()=>{};const ie="function"==typeof _?_:_.next.bind(_);let be=!1;const Ke=this._isInitialized?Promise.resolve():this._initializationPromise;if(xe(Ke,this,"internal-error"),Ke.then(()=>{be||ie(this.currentUser)}),"function"==typeof _){const gt=h.addObserver(_,D,W);return()=>{be=!0,gt()}}{const gt=h.addObserver(_);return()=>{be=!0,gt()}}}directlySetCurrentUser(h){var _=this;return(0,f.Z)(function*(){_.currentUser&&_.currentUser!==h&&_._currentUser._stopProactiveRefresh(),h&&_.isProactiveRefreshEnabled&&h._startProactiveRefresh(),_.currentUser=h,h?yield _.assertedPersistence.setCurrentUser(h):yield _.assertedPersistence.removeCurrentUser()})()}queue(h){return this.operations=this.operations.then(h,h),this.operations}get assertedPersistence(){return xe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(h){!h||this.frameworks.includes(h)||(this.frameworks.push(h),this.frameworks.sort(),this.clientVersion=Xt(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var h=this;return(0,f.Z)(function*(){var _;const D={"X-Client-Version":h.clientVersion};h.app.options.appId&&(D["X-Firebase-gmpid"]=h.app.options.appId);const W=yield null===(_=h.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===_?void 0:_.getHeartbeatsHeader();W&&(D["X-Firebase-Client"]=W);const ie=yield h._getAppCheckToken();return ie&&(D["X-Firebase-AppCheck"]=ie),D})()}_getAppCheckToken(){var h=this;return(0,f.Z)(function*(){var _;const D=yield null===(_=h.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===_?void 0:_.getToken();return D?.error&&function Lt(E,...h){nt.logLevel<=ye.in.WARN&&nt.warn(`Auth (${Z.SDK_VERSION}): ${E}`,...h)}(`Error while retrieving App Check token: ${D.error}`),D?.token})()}}function Xn(E){return(0,q.m9)(E)}class us{constructor(h){this.auth=h,this.observer=null,this.addObserver=(0,q.ne)(_=>this.observer=_)}get next(){return xe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let ki={loadJS:()=>(0,f.Z)(function*(){throw new Error("Unable to load external scripts")})(),recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Zs(E){return ki.loadJS(E)}function ur(E){return`__${E}${Math.floor(1e6*Math.random())}`}class yi{constructor(h){this.type="recaptcha-enterprise",this.auth=Xn(h)}verify(h="verify",_=!1){var D=this;return(0,f.Z)(function*(){function ie(){return ie=(0,f.Z)(function*(Ke){if(!_){if(null==Ke.tenantId&&null!=Ke._agentRecaptchaConfig)return Ke._agentRecaptchaConfig.siteKey;if(null!=Ke.tenantId&&void 0!==Ke._tenantRecaptchaConfigs[Ke.tenantId])return Ke._tenantRecaptchaConfigs[Ke.tenantId].siteKey}return new Promise(function(){var gt=(0,f.Z)(function*(tn,En){Zn(Ke,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(cr=>{if(void 0!==cr.recaptchaKey){const uo=new An(cr);return null==Ke.tenantId?Ke._agentRecaptchaConfig=uo:Ke._tenantRecaptchaConfigs[Ke.tenantId]=uo,tn(uo.siteKey)}En(new Error("recaptcha Enterprise site key undefined"))}).catch(cr=>{En(cr)})});return function(tn,En){return gt.apply(this,arguments)}}())}),ie.apply(this,arguments)}function be(Ke,gt,tn){const En=window.grecaptcha;zn(En)?En.enterprise.ready(()=>{En.enterprise.execute(Ke,{action:h}).then(cr=>{gt(cr)}).catch(()=>{gt("NO_RECAPTCHA")})}):tn(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((Ke,gt)=>{(function W(Ke){return ie.apply(this,arguments)})(D.auth).then(tn=>{if(!_&&zn(window.grecaptcha))be(tn,Ke,gt);else{if(typeof window>"u")return void gt(new Error("RecaptchaVerifier is only supported in browser"));let En=function _o(){return ki.recaptchaEnterpriseScript}();0!==En.length&&(En+=tn),Zs(En).then(()=>{be(tn,Ke,gt)}).catch(cr=>{gt(cr)})}}).catch(tn=>{gt(tn)})})})()}}function Js(E,h,_){return Rs.apply(this,arguments)}function Rs(){return(Rs=(0,f.Z)(function*(E,h,_,D=!1){const W=new yi(E);let ie;try{ie=yield W.verify(_)}catch{ie=yield W.verify(_,!0)}const be=Object.assign({},h);return Object.assign(be,D?{captchaResp:ie}:{captchaResponse:ie}),Object.assign(be,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(be,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),be})).apply(this,arguments)}function Ps(E,h,_,D){return Fi.apply(this,arguments)}function Fi(){return Fi=(0,f.Z)(function*(E,h,_,D){var W;if(null!==(W=E._getRecaptchaConfig())&&void 0!==W&&W.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const ie=yield Js(E,h,_,"getOobCode"===_);return D(E,ie)}return D(E,h).catch(function(){var ie=(0,f.Z)(function*(be){if("auth/missing-recaptcha-token"===be.code){console.log(`${_} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const Ke=yield Js(E,h,_,"getOobCode"===_);return D(E,Ke)}return Promise.reject(be)});return function(be){return ie.apply(this,arguments)}}())}),Fi.apply(this,arguments)}function Bs(E,h,_){const D=Xn(E);xe(D._canInitEmulator,D,"emulator-config-failed"),xe(/^https?:\/\//.test(h),D,"invalid-emulator-scheme");const W=!!_?.disableWarnings,ie=ws(h),{host:be,port:Ke}=function Ms(E){const h=ws(E),_=/(\/\/)?([^?#/]+)/.exec(E.substr(h.length));if(!_)return{host:"",port:null};const D=_[2].split("@").pop()||"",W=/^(\[[^\]]+\])(:|$)/.exec(D);if(W){const ie=W[1];return{host:ie,port:vo(D.substr(ie.length+1))}}{const[ie,be]=D.split(":");return{host:ie,port:vo(be)}}}(h);D.config.emulator={url:`${ie}//${be}${null===Ke?"":`:${Ke}`}/`},D.settings.appVerificationDisabledForTesting=!0,D.emulatorConfig=Object.freeze({host:be,port:Ke,protocol:ie.replace(":",""),options:Object.freeze({disableWarnings:W})}),W||function Mo(){function E(){const h=document.createElement("p"),_=h.style;h.innerText="Running in emulator mode. Do not use with production credentials.",_.position="fixed",_.width="100%",_.backgroundColor="#ffffff",_.border=".1em solid #000000",_.color="#b50000",_.bottom="0px",_.left="0px",_.margin="0px",_.zIndex="10000",_.textAlign="center",h.classList.add("firebase-emulator-warning"),document.body.appendChild(h)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",E):E())}()}function ws(E){const h=E.indexOf(":");return h<0?"":E.substr(0,h+1)}function vo(E){if(!E)return null;const h=Number(E);return isNaN(h)?null:h}class Ns{constructor(h,_){this.providerId=h,this.signInMethod=_}toJSON(){return Tt("not implemented")}_getIdTokenResponse(h){return Tt("not implemented")}_linkToIdToken(h,_){return Tt("not implemented")}_getReauthenticationResolver(h){return Tt("not implemented")}}function js(E,h){return Wn.apply(this,arguments)}function Wn(){return(Wn=(0,f.Z)(function*(E,h){return tt(E,"POST","/v1/accounts:resetPassword",He(E,h))})).apply(this,arguments)}function Nr(){return(Nr=(0,f.Z)(function*(E,h){return tt(E,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function vi(E,h){return li.apply(this,arguments)}function li(){return(li=(0,f.Z)(function*(E,h){return tt(E,"POST","/v1/accounts:signUp",h)})).apply(this,arguments)}function Xs(){return(Xs=(0,f.Z)(function*(E,h){return tt(E,"POST","/v1/accounts:update",He(E,h))})).apply(this,arguments)}function Bn(E,h){return cs.apply(this,arguments)}function cs(){return(cs=(0,f.Z)(function*(E,h){return jt(E,"POST","/v1/accounts:signInWithPassword",He(E,h))})).apply(this,arguments)}function ds(E,h){return vr.apply(this,arguments)}function vr(){return(vr=(0,f.Z)(function*(E,h){return tt(E,"POST","/v1/accounts:sendOobCode",He(E,h))})).apply(this,arguments)}function dn(){return(dn=(0,f.Z)(function*(E,h){return ds(E,h)})).apply(this,arguments)}function Er(E,h){return Gi.apply(this,arguments)}function Gi(){return(Gi=(0,f.Z)(function*(E,h){return ds(E,h)})).apply(this,arguments)}function Ts(E,h){return pi.apply(this,arguments)}function pi(){return(pi=(0,f.Z)(function*(E,h){return ds(E,h)})).apply(this,arguments)}function Jn(){return(Jn=(0,f.Z)(function*(E,h){return ds(E,h)})).apply(this,arguments)}function ss(){return(ss=(0,f.Z)(function*(E,h){return jt(E,"POST","/v1/accounts:signInWithEmailLink",He(E,h))})).apply(this,arguments)}function bi(){return(bi=(0,f.Z)(function*(E,h){return jt(E,"POST","/v1/accounts:signInWithEmailLink",He(E,h))})).apply(this,arguments)}class Os extends Ns{constructor(h,_,D,W=null){super("password",D),this._email=h,this._password=_,this._tenantId=W}static _fromEmailAndPassword(h,_){return new Os(h,_,"password")}static _fromEmailAndCode(h,_,D=null){return new Os(h,_,"emailLink",D)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(h){const _="string"==typeof h?JSON.parse(h):h;if(_?.email&&_?.password){if("password"===_.signInMethod)return this._fromEmailAndPassword(_.email,_.password);if("emailLink"===_.signInMethod)return this._fromEmailAndCode(_.email,_.password,_.tenantId)}return null}_getIdTokenResponse(h){var _=this;return(0,f.Z)(function*(){switch(_.signInMethod){case"password":return Ps(h,{returnSecureToken:!0,email:_._email,password:_._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Bn);case"emailLink":return function gi(E,h){return ss.apply(this,arguments)}(h,{email:_._email,oobCode:_._password});default:ce(h,"internal-error")}})()}_linkToIdToken(h,_){var D=this;return(0,f.Z)(function*(){switch(D.signInMethod){case"password":return Ps(h,{idToken:_,returnSecureToken:!0,email:D._email,password:D._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",vi);case"emailLink":return function fn(E,h){return bi.apply(this,arguments)}(h,{idToken:_,email:D._email,oobCode:D._password});default:ce(h,"internal-error")}})()}_getReauthenticationResolver(h){return this._getIdTokenResponse(h)}}function Wi(E,h){return Vr.apply(this,arguments)}function Vr(){return(Vr=(0,f.Z)(function*(E,h){return jt(E,"POST","/v1/accounts:signInWithIdp",He(E,h))})).apply(this,arguments)}class gr extends Ns{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(h){const _=new gr(h.providerId,h.signInMethod);return h.idToken||h.accessToken?(h.idToken&&(_.idToken=h.idToken),h.accessToken&&(_.accessToken=h.accessToken),h.nonce&&!h.pendingToken&&(_.nonce=h.nonce),h.pendingToken&&(_.pendingToken=h.pendingToken)):h.oauthToken&&h.oauthTokenSecret?(_.accessToken=h.oauthToken,_.secret=h.oauthTokenSecret):ce("argument-error"),_}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(h){const _="string"==typeof h?JSON.parse(h):h,{providerId:D,signInMethod:W}=_,ie=(0,ge._T)(_,["providerId","signInMethod"]);if(!D||!W)return null;const be=new gr(D,W);return be.idToken=ie.idToken||void 0,be.accessToken=ie.accessToken||void 0,be.secret=ie.secret,be.nonce=ie.nonce,be.pendingToken=ie.pendingToken||null,be}_getIdTokenResponse(h){return Wi(h,this.buildRequest())}_linkToIdToken(h,_){const D=this.buildRequest();return D.idToken=_,Wi(h,D)}_getReauthenticationResolver(h){const _=this.buildRequest();return _.autoCreate=!1,Wi(h,_)}buildRequest(){const h={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)h.pendingToken=this.pendingToken;else{const _={};this.idToken&&(_.id_token=this.idToken),this.accessToken&&(_.access_token=this.accessToken),this.secret&&(_.oauth_token_secret=this.secret),_.providerId=this.providerId,this.nonce&&!this.pendingToken&&(_.nonce=this.nonce),h.postBody=(0,q.xO)(_)}return h}}function Ei(){return(Ei=(0,f.Z)(function*(E,h){return tt(E,"POST","/v1/accounts:sendVerificationCode",He(E,h))})).apply(this,arguments)}function hs(){return(hs=(0,f.Z)(function*(E,h){return jt(E,"POST","/v1/accounts:signInWithPhoneNumber",He(E,h))})).apply(this,arguments)}function Ii(){return(Ii=(0,f.Z)(function*(E,h){const _=yield jt(E,"POST","/v1/accounts:signInWithPhoneNumber",He(E,h));if(_.temporaryProof)throw Ln(E,"account-exists-with-different-credential",_);return _})).apply(this,arguments)}const $s={USER_NOT_FOUND:"user-not-found"};function va(){return(va=(0,f.Z)(function*(E,h){return jt(E,"POST","/v1/accounts:signInWithPhoneNumber",He(E,Object.assign(Object.assign({},h),{operation:"REAUTH"})),$s)})).apply(this,arguments)}class Qi extends Ns{constructor(h){super("phone","phone"),this.params=h}static _fromVerification(h,_){return new Qi({verificationId:h,verificationCode:_})}static _fromTokenResponse(h,_){return new Qi({phoneNumber:h,temporaryProof:_})}_getIdTokenResponse(h){return function No(E,h){return hs.apply(this,arguments)}(h,this._makeVerificationRequest())}_linkToIdToken(h,_){return function Vi(E,h){return Ii.apply(this,arguments)}(h,Object.assign({idToken:_},this._makeVerificationRequest()))}_getReauthenticationResolver(h){return function Qn(E,h){return va.apply(this,arguments)}(h,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:h,phoneNumber:_,verificationId:D,verificationCode:W}=this.params;return h&&_?{temporaryProof:h,phoneNumber:_}:{sessionInfo:D,code:W}}toJSON(){const h={providerId:this.providerId};return this.params.phoneNumber&&(h.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(h.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(h.verificationCode=this.params.verificationCode),this.params.verificationId&&(h.verificationId=this.params.verificationId),h}static fromJSON(h){"string"==typeof h&&(h=JSON.parse(h));const{verificationId:_,verificationCode:D,phoneNumber:W,temporaryProof:ie}=h;return D||_||W||ie?new Qi({verificationId:_,verificationCode:D,phoneNumber:W,temporaryProof:ie}):null}}class mi{constructor(h){var _,D,W,ie,be,Ke;const gt=(0,q.zd)((0,q.pd)(h)),tn=null!==(_=gt.apiKey)&&void 0!==_?_:null,En=null!==(D=gt.oobCode)&&void 0!==D?D:null,cr=function eo(E){switch(E){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(W=gt.mode)&&void 0!==W?W:null);xe(tn&&En&&cr,"argument-error"),this.apiKey=tn,this.operation=cr,this.code=En,this.continueUrl=null!==(ie=gt.continueUrl)&&void 0!==ie?ie:null,this.languageCode=null!==(be=gt.languageCode)&&void 0!==be?be:null,this.tenantId=null!==(Ke=gt.tenantId)&&void 0!==Ke?Ke:null}static parseLink(h){const _=function Ui(E){const h=(0,q.zd)((0,q.pd)(E)).link,_=h?(0,q.zd)((0,q.pd)(h)).deep_link_id:null,D=(0,q.zd)((0,q.pd)(E)).deep_link_id;return(D?(0,q.zd)((0,q.pd)(D)).link:null)||D||_||h||E}(h);try{return new mi(_)}catch{return null}}}let fs=(()=>{class E{constructor(){this.providerId=E.PROVIDER_ID}static credential(_,D){return Os._fromEmailAndPassword(_,D)}static credentialWithLink(_,D){const W=mi.parseLink(D);return xe(W,"argument-error"),Os._fromEmailAndCode(_,W.code,W.tenantId)}}return E.PROVIDER_ID="password",E.EMAIL_PASSWORD_SIGN_IN_METHOD="password",E.EMAIL_LINK_SIGN_IN_METHOD="emailLink",E})();class Tr{constructor(h){this.providerId=h,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(h){this.defaultLanguageCode=h}setCustomParameters(h){return this.customParameters=h,this}getCustomParameters(){return this.customParameters}}class Eo extends Tr{constructor(){super(...arguments),this.scopes=[]}addScope(h){return this.scopes.includes(h)||this.scopes.push(h),this}getScopes(){return[...this.scopes]}}class _n extends Eo{static credentialFromJSON(h){const _="string"==typeof h?JSON.parse(h):h;return xe("providerId"in _&&"signInMethod"in _,"argument-error"),gr._fromParams(_)}credential(h){return this._credential(Object.assign(Object.assign({},h),{nonce:h.rawNonce}))}_credential(h){return xe(h.idToken||h.accessToken,"argument-error"),gr._fromParams(Object.assign(Object.assign({},h),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(h){return _n.oauthCredentialFromTaggedObject(h)}static credentialFromError(h){return _n.oauthCredentialFromTaggedObject(h.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthIdToken:_,oauthAccessToken:D,oauthTokenSecret:W,pendingToken:ie,nonce:be,providerId:Ke}=h;if(!D&&!W&&!_&&!ie||!Ke)return null;try{return new _n(Ke)._credential({idToken:_,accessToken:D,nonce:be,pendingToken:ie})}catch{return null}}}let Bi=(()=>{class E extends Eo{constructor(){super("facebook.com")}static credential(_){return gr._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.FACEBOOK_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return E.credentialFromTaggedObject(_)}static credentialFromError(_){return E.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return E.credential(_.oauthAccessToken)}catch{return null}}}return E.FACEBOOK_SIGN_IN_METHOD="facebook.com",E.PROVIDER_ID="facebook.com",E})(),ps=(()=>{class E extends Eo{constructor(){super("google.com"),this.addScope("profile")}static credential(_,D){return gr._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.GOOGLE_SIGN_IN_METHOD,idToken:_,accessToken:D})}static credentialFromResult(_){return E.credentialFromTaggedObject(_)}static credentialFromError(_){return E.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthIdToken:D,oauthAccessToken:W}=_;if(!D&&!W)return null;try{return E.credential(D,W)}catch{return null}}}return E.GOOGLE_SIGN_IN_METHOD="google.com",E.PROVIDER_ID="google.com",E})(),xo=(()=>{class E extends Eo{constructor(){super("github.com")}static credential(_){return gr._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.GITHUB_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return E.credentialFromTaggedObject(_)}static credentialFromError(_){return E.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return E.credential(_.oauthAccessToken)}catch{return null}}}return E.GITHUB_SIGN_IN_METHOD="github.com",E.PROVIDER_ID="github.com",E})();class ji extends Ns{constructor(h,_){super(h,h),this.pendingToken=_}_getIdTokenResponse(h){return Wi(h,this.buildRequest())}_linkToIdToken(h,_){const D=this.buildRequest();return D.idToken=_,Wi(h,D)}_getReauthenticationResolver(h){const _=this.buildRequest();return _.autoCreate=!1,Wi(h,_)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(h){const _="string"==typeof h?JSON.parse(h):h,{providerId:D,signInMethod:W,pendingToken:ie}=_;return D&&W&&ie&&D===W?new ji(D,ie):null}static _create(h,_){return new ji(h,_)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Ds extends Tr{constructor(h){xe(h.startsWith("saml."),"argument-error"),super(h)}static credentialFromResult(h){return Ds.samlCredentialFromTaggedObject(h)}static credentialFromError(h){return Ds.samlCredentialFromTaggedObject(h.customData||{})}static credentialFromJSON(h){const _=ji.fromJSON(h);return xe(_,"argument-error"),_}static samlCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{pendingToken:_,providerId:D}=h;if(!_||!D)return null;try{return ji._create(D,_)}catch{return null}}}let Zo=(()=>{class E extends Eo{constructor(){super("twitter.com")}static credential(_,D){return gr._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.TWITTER_SIGN_IN_METHOD,oauthToken:_,oauthTokenSecret:D})}static credentialFromResult(_){return E.credentialFromTaggedObject(_)}static credentialFromError(_){return E.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthAccessToken:D,oauthTokenSecret:W}=_;if(!D||!W)return null;try{return E.credential(D,W)}catch{return null}}}return E.TWITTER_SIGN_IN_METHOD="twitter.com",E.PROVIDER_ID="twitter.com",E})();function ja(E,h){return $i.apply(this,arguments)}function $i(){return($i=(0,f.Z)(function*(E,h){return jt(E,"POST","/v1/accounts:signUp",He(E,h))})).apply(this,arguments)}class Si{constructor(h){this.user=h.user,this.providerId=h.providerId,this._tokenResponse=h._tokenResponse,this.operationType=h.operationType}static _fromIdTokenResponse(h,_,D,W=!1){return(0,f.Z)(function*(){const ie=yield oe._fromIdTokenResponse(h,D,W),be=$a(D);return new Si({user:ie,providerId:be,_tokenResponse:D,operationType:_})})()}static _forOperation(h,_,D){return(0,f.Z)(function*(){yield h._updateTokensIfNecessary(D,!0);const W=$a(D);return new Si({user:h,providerId:W,_tokenResponse:D,operationType:_})})()}}function $a(E){return E.providerId?E.providerId:"phoneNumber"in E?"phone":null}function iu(E){return ko.apply(this,arguments)}function ko(){return(ko=(0,f.Z)(function*(E){var h;if((0,Z._isFirebaseServerApp)(E.app))return Promise.reject(Ie(E));const _=Xn(E);if(yield _._initializationPromise,null!==(h=_.currentUser)&&void 0!==h&&h.isAnonymous)return new Si({user:_.currentUser,providerId:null,operationType:"signIn"});const D=yield ja(_,{returnSecureToken:!0}),W=yield Si._fromIdTokenResponse(_,"signIn",D,!0);return yield _._updateCurrentUser(W.user),W})).apply(this,arguments)}class j extends q.ZR{constructor(h,_,D,W){var ie;super(_.code,_.message),this.operationType=D,this.user=W,Object.setPrototypeOf(this,j.prototype),this.customData={appName:h.name,tenantId:null!==(ie=h.tenantId)&&void 0!==ie?ie:void 0,_serverResponse:_.customData._serverResponse,operationType:D}}static _fromErrorAndOperation(h,_,D,W){return new j(h,_,D,W)}}function H(E,h,_,D){return("reauthenticate"===h?_._getReauthenticationResolver(E):_._getIdTokenResponse(E)).catch(ie=>{throw"auth/multi-factor-auth-required"===ie.code?j._fromErrorAndOperation(E,ie,h,D):ie})}function ae(E){return new Set(E.map(({providerId:h})=>h).filter(h=>!!h))}function b(E,h){return O.apply(this,arguments)}function O(){return O=(0,f.Z)(function*(E,h){const _=(0,q.m9)(E);yield de(!0,_,h);const{providerUserInfo:D}=yield function an(E,h){return rn.apply(this,arguments)}(_.auth,{idToken:yield _.getIdToken(),deleteProvider:[h]}),W=ae(D||[]);return _.providerData=_.providerData.filter(ie=>W.has(ie.providerId)),W.has("phone")||(_.phoneNumber=null),yield _.auth._persistUserIfCurrent(_),_}),O.apply(this,arguments)}function C(E,h){return K.apply(this,arguments)}function K(){return(K=(0,f.Z)(function*(E,h,_=!1){const D=yield Wt(E,h._linkToIdToken(E.auth,yield E.getIdToken()),_);return Si._forOperation(E,"link",D)})).apply(this,arguments)}function de(E,h,_){return Xe.apply(this,arguments)}function Xe(){return(Xe=(0,f.Z)(function*(E,h,_){yield Br(h);const W=!1===E?"provider-already-linked":"no-such-provider";xe(ae(h.providerData).has(_)===E,h.auth,W)})).apply(this,arguments)}function ht(E,h){return un.apply(this,arguments)}function un(){return(un=(0,f.Z)(function*(E,h,_=!1){const{auth:D}=E;if((0,Z._isFirebaseServerApp)(D.app))return Promise.reject(Ie(D));const W="reauthenticate";try{const ie=yield Wt(E,H(D,W,h,E),_);xe(ie.idToken,D,"internal-error");const be=Mi(ie.idToken);xe(be,D,"internal-error");const{sub:Ke}=be;return xe(E.uid===Ke,D,"user-mismatch"),Si._forOperation(E,W,ie)}catch(ie){throw"auth/user-not-found"===ie?.code&&ce(D,"user-mismatch"),ie}})).apply(this,arguments)}function ir(E,h){return lr.apply(this,arguments)}function lr(){return(lr=(0,f.Z)(function*(E,h,_=!1){if((0,Z._isFirebaseServerApp)(E.app))return Promise.reject(Ie(E));const D="signIn",W=yield H(E,D,h),ie=yield Si._fromIdTokenResponse(E,D,W);return _||(yield E._updateCurrentUser(ie.user)),ie})).apply(this,arguments)}function Dr(E,h){return er.apply(this,arguments)}function er(){return(er=(0,f.Z)(function*(E,h){return ir(Xn(E),h)})).apply(this,arguments)}function ci(E,h){return Xr.apply(this,arguments)}function Xr(){return(Xr=(0,f.Z)(function*(E,h){const _=(0,q.m9)(E);return yield de(!1,_,h.providerId),C(_,h)})).apply(this,arguments)}function As(E,h){return jr.apply(this,arguments)}function jr(){return(jr=(0,f.Z)(function*(E,h){return ht((0,q.m9)(E),h)})).apply(this,arguments)}function Ar(){return(Ar=(0,f.Z)(function*(E,h){return jt(E,"POST","/v1/accounts:signInWithCustomToken",He(E,h))})).apply(this,arguments)}function to(E,h){return gs.apply(this,arguments)}function gs(){return gs=(0,f.Z)(function*(E,h){if((0,Z._isFirebaseServerApp)(E.app))return Promise.reject(Ie(E));const _=Xn(E),D=yield function Ri(E,h){return Ar.apply(this,arguments)}(_,{token:h,returnSecureToken:!0}),W=yield Si._fromIdTokenResponse(_,"signIn",D);return yield _._updateCurrentUser(W.user),W}),gs.apply(this,arguments)}class di{constructor(h,_){this.factorId=h,this.uid=_.mfaEnrollmentId,this.enrollmentTime=new Date(_.enrolledAt).toUTCString(),this.displayName=_.displayName}static _fromServerResponse(h,_){return"phoneInfo"in _?no._fromServerResponse(h,_):"totpInfo"in _?Cs._fromServerResponse(h,_):ce(h,"internal-error")}}class no extends di{constructor(h){super("phone",h),this.phoneNumber=h.phoneInfo}static _fromServerResponse(h,_){return new no(_)}}class Cs extends di{constructor(h){super("totp",h)}static _fromServerResponse(h,_){return new Cs(_)}}function Pi(E,h,_){var D;xe((null===(D=_.url)||void 0===D?void 0:D.length)>0,E,"invalid-continue-uri"),xe(typeof _.dynamicLinkDomain>"u"||_.dynamicLinkDomain.length>0,E,"invalid-dynamic-link-domain"),h.continueUrl=_.url,h.dynamicLinkDomain=_.dynamicLinkDomain,h.canHandleCodeInApp=_.handleCodeInApp,_.iOS&&(xe(_.iOS.bundleId.length>0,E,"missing-ios-bundle-id"),h.iOSBundleId=_.iOS.bundleId),_.android&&(xe(_.android.packageName.length>0,E,"missing-android-pkg-name"),h.androidInstallApp=_.android.installApp,h.androidMinimumVersionCode=_.android.minimumVersion,h.androidPackageName=_.android.packageName)}function Sa(E){return Hs.apply(this,arguments)}function Hs(){return(Hs=(0,f.Z)(function*(E){const h=Xn(E);h._getPasswordPolicyInternal()&&(yield h._updatePasswordPolicy())})).apply(this,arguments)}function Ia(E,h,_){return mr.apply(this,arguments)}function mr(){return(mr=(0,f.Z)(function*(E,h,_){const D=Xn(E),W={requestType:"PASSWORD_RESET",email:h,clientType:"CLIENT_TYPE_WEB"};_&&Pi(D,W,_),yield Ps(D,W,"getOobCode",Er)})).apply(this,arguments)}function Fo(E,h,_){return Xo.apply(this,arguments)}function Xo(){return Xo=(0,f.Z)(function*(E,h,_){yield js((0,q.m9)(E),{oobCode:h,newPassword:_}).catch(function(){var D=(0,f.Z)(function*(W){throw"auth/password-does-not-meet-requirements"===W.code&&Sa(E),W});return function(W){return D.apply(this,arguments)}}())}),Xo.apply(this,arguments)}function xs(E,h){return ea.apply(this,arguments)}function ea(){return ea=(0,f.Z)(function*(E,h){yield function lo(E,h){return Xs.apply(this,arguments)}((0,q.m9)(E),{oobCode:h})}),ea.apply(this,arguments)}function Ra(E,h){return da.apply(this,arguments)}function da(){return(da=(0,f.Z)(function*(E,h){const _=(0,q.m9)(E),D=yield js(_,{oobCode:h}),W=D.requestType;switch(xe(W,_,"internal-error"),W){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":xe(D.newEmail,_,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":xe(D.mfaInfo,_,"internal-error");default:xe(D.email,_,"internal-error")}let ie=null;return D.mfaInfo&&(ie=di._fromServerResponse(Xn(_),D.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===D.requestType?D.newEmail:D.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===D.requestType?D.email:D.newEmail)||null,multiFactorInfo:ie},operation:W}})).apply(this,arguments)}function Iu(E,h){return ta.apply(this,arguments)}function ta(){return(ta=(0,f.Z)(function*(E,h){const{data:_}=yield Ra((0,q.m9)(E),h);return _.email})).apply(this,arguments)}function ks(E,h,_){return ho.apply(this,arguments)}function ho(){return(ho=(0,f.Z)(function*(E,h,_){if((0,Z._isFirebaseServerApp)(E.app))return Promise.reject(Ie(E));const D=Xn(E),be=yield Ps(D,{returnSecureToken:!0,email:h,password:_,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",ja).catch(gt=>{throw"auth/password-does-not-meet-requirements"===gt.code&&Sa(E),gt}),Ke=yield Si._fromIdTokenResponse(D,"signIn",be);return yield D._updateCurrentUser(Ke.user),Ke})).apply(this,arguments)}function Fs(E,h,_){return(0,Z._isFirebaseServerApp)(E.app)?Promise.reject(Ie(E)):Dr((0,q.m9)(E),fs.credential(h,_)).catch(function(){var D=(0,f.Z)(function*(W){throw"auth/password-does-not-meet-requirements"===W.code&&Sa(E),W});return function(W){return D.apply(this,arguments)}}())}function Ha(E,h,_){return na.apply(this,arguments)}function na(){return(na=(0,f.Z)(function*(E,h,_){const D=Xn(E),W={requestType:"EMAIL_SIGNIN",email:h,clientType:"CLIENT_TYPE_WEB"};(function ie(be,Ke){xe(Ke.handleCodeInApp,D,"argument-error"),Ke&&Pi(D,be,Ke)})(W,_),yield Ps(D,W,"getOobCode",Ts)})).apply(this,arguments)}function Pa(E,h){const _=mi.parseLink(h);return"EMAIL_SIGNIN"===_?.operation}function ha(E,h,_){return Bu.apply(this,arguments)}function Bu(){return(Bu=(0,f.Z)(function*(E,h,_){if((0,Z._isFirebaseServerApp)(E.app))return Promise.reject(Ie(E));const D=(0,q.m9)(E),W=fs.credentialWithLink(h,_||In());return xe(W._tenantId===(D.tenantId||null),D,"tenant-id-mismatch"),Dr(D,W)})).apply(this,arguments)}function ra(){return(ra=(0,f.Z)(function*(E,h){return tt(E,"POST","/v1/accounts:createAuthUri",He(E,h))})).apply(this,arguments)}function A(E,h){return J.apply(this,arguments)}function J(){return J=(0,f.Z)(function*(E,h){const D={identifier:h,continueUri:vn()?In():"http://localhost"},{signinMethods:W}=yield function ro(E,h){return ra.apply(this,arguments)}((0,q.m9)(E),D);return W||[]}),J.apply(this,arguments)}function L(E,h){return Q.apply(this,arguments)}function Q(){return Q=(0,f.Z)(function*(E,h){const _=(0,q.m9)(E),W={requestType:"VERIFY_EMAIL",idToken:yield E.getIdToken()};h&&Pi(_.auth,W,h);const{email:ie}=yield function xt(E,h){return dn.apply(this,arguments)}(_.auth,W);ie!==E.email&&(yield E.reload())}),Q.apply(this,arguments)}function pe(E,h,_){return Ze.apply(this,arguments)}function Ze(){return Ze=(0,f.Z)(function*(E,h,_){const D=(0,q.m9)(E),ie={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield E.getIdToken(),newEmail:h};_&&Pi(D.auth,ie,_);const{email:be}=yield function Zi(E,h){return Jn.apply(this,arguments)}(D.auth,ie);be!==E.email&&(yield E.reload())}),Ze.apply(this,arguments)}function Yt(){return(Yt=(0,f.Z)(function*(E,h){return tt(E,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function Ur(E,h){return _r.apply(this,arguments)}function _r(){return _r=(0,f.Z)(function*(E,{displayName:h,photoURL:_}){if(void 0===h&&void 0===_)return;const D=(0,q.m9)(E),ie={idToken:yield D.getIdToken(),displayName:h,photoUrl:_,returnSecureToken:!0},be=yield Wt(D,function ut(E,h){return Yt.apply(this,arguments)}(D.auth,ie));D.displayName=be.displayName||null,D.photoURL=be.photoUrl||null;const Ke=D.providerData.find(({providerId:gt})=>"password"===gt);Ke&&(Ke.displayName=D.displayName,Ke.photoURL=D.photoURL),yield D._updateTokensIfNecessary(be)}),_r.apply(this,arguments)}function $r(E,h){const _=(0,q.m9)(E);return(0,Z._isFirebaseServerApp)(_.auth.app)?Promise.reject(Ie(_.auth)):ei(_,h,null)}function hn(E,h){return ei((0,q.m9)(E),null,h)}function ei(E,h,_){return tr.apply(this,arguments)}function tr(){return tr=(0,f.Z)(function*(E,h,_){const{auth:D}=E,ie={idToken:yield E.getIdToken(),returnSecureToken:!0};h&&(ie.email=h),_&&(ie.password=_);const be=yield Wt(E,function Li(E,h){return Nr.apply(this,arguments)}(D,ie));yield E._updateTokensIfNecessary(be,!0)}),tr.apply(this,arguments)}class Ls{constructor(h,_,D={}){this.isNewUser=h,this.providerId=_,this.profile=D}}class ct extends Ls{constructor(h,_,D,W){super(h,_,D),this.username=W}}class Hr extends Ls{constructor(h,_){super(h,"facebook.com",_)}}class ni extends ct{constructor(h,_){super(h,"github.com",_,"string"==typeof _?.login?_?.login:null)}}class Qo extends Ls{constructor(h,_){super(h,"google.com",_)}}class bt extends ct{constructor(h,_,D){super(h,"twitter.com",_,D)}}function Jt(E){const{user:h,_tokenResponse:_}=E;return h.isAnonymous&&!_?{providerId:null,isNewUser:!1,profile:null}:function wi(E){var h,_;if(!E)return null;const{providerId:D}=E,W=E.rawUserInfo?JSON.parse(E.rawUserInfo):{},ie=E.isNewUser||"identitytoolkit#SignupNewUserResponse"===E.kind;if(!D&&E?.idToken){const be=null===(_=null===(h=Mi(E.idToken))||void 0===h?void 0:h.firebase)||void 0===_?void 0:_.sign_in_provider;if(be)return new Ls(ie,"anonymous"!==be&&"custom"!==be?be:null)}if(!D)return null;switch(D){case"facebook.com":return new Hr(ie,W);case"github.com":return new ni(ie,W);case"google.com":return new Qo(ie,W);case"twitter.com":return new bt(ie,W,E.screenName||null);case"custom":case"anonymous":return new Ls(ie,null);default:return new Ls(ie,D,W)}}(_)}class ia{constructor(h,_,D){this.type=h,this.credential=_,this.user=D}static _fromIdtoken(h,_){return new ia("enroll",h,_)}static _fromMfaPendingCredential(h){return new ia("signin",h)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(h){var _,D;if(h?.multiFactorSession){if(null!==(_=h.multiFactorSession)&&void 0!==_&&_.pendingCredential)return ia._fromMfaPendingCredential(h.multiFactorSession.pendingCredential);if(null!==(D=h.multiFactorSession)&&void 0!==D&&D.idToken)return ia._fromIdtoken(h.multiFactorSession.idToken)}return null}}class El{constructor(h,_,D){this.session=h,this.hints=_,this.signInResolver=D}static _fromError(h,_){const D=Xn(h),W=_.customData._serverResponse,ie=(W.mfaInfo||[]).map(Ke=>di._fromServerResponse(D,Ke));xe(W.mfaPendingCredential,D,"internal-error");const be=ia._fromMfaPendingCredential(W.mfaPendingCredential);return new El(be,ie,function(){var Ke=(0,f.Z)(function*(gt){const tn=yield gt._process(D,be);delete W.mfaInfo,delete W.mfaPendingCredential;const En=Object.assign(Object.assign({},W),{idToken:tn.idToken,refreshToken:tn.refreshToken});switch(_.operationType){case"signIn":const cr=yield Si._fromIdTokenResponse(D,_.operationType,En);return yield D._updateCurrentUser(cr.user),cr;case"reauthenticate":return xe(_.user,D,"internal-error"),Si._forOperation(_.user,_.operationType,En);default:ce(D,"internal-error")}});return function(gt){return Ke.apply(this,arguments)}}())}resolveSignIn(h){var _=this;return(0,f.Z)(function*(){return _.signInResolver(h)})()}}function ju(E,h){var _;const D=(0,q.m9)(E),W=h;return xe(h.customData.operationType,D,"argument-error"),xe(null===(_=W.customData._serverResponse)||void 0===_?void 0:_.mfaPendingCredential,D,"argument-error"),El._fromError(D,W)}class Io{constructor(h){this.user=h,this.enrolledFactors=[],h._onReload(_=>{_.mfaInfo&&(this.enrolledFactors=_.mfaInfo.map(D=>di._fromServerResponse(h.auth,D)))})}static _fromUser(h){return new Io(h)}getSession(){var h=this;return(0,f.Z)(function*(){return ia._fromIdtoken(yield h.user.getIdToken(),h.user)})()}enroll(h,_){var D=this;return(0,f.Z)(function*(){const W=h,ie=yield D.getSession(),be=yield Wt(D.user,W._process(D.user.auth,ie,_));return yield D.user._updateTokensIfNecessary(be),D.user.reload()})()}unenroll(h){var _=this;return(0,f.Z)(function*(){const D="string"==typeof h?h:h.uid,W=yield _.user.getIdToken();try{const ie=yield Wt(_.user,function cn(E,h){return tt(E,"POST","/v2/accounts/mfaEnrollment:withdraw",He(E,h))}(_.user.auth,{idToken:W,mfaEnrollmentId:D}));_.enrolledFactors=_.enrolledFactors.filter(({uid:be})=>be!==D),yield _.user._updateTokensIfNecessary(ie),yield _.user.reload()}catch(ie){throw ie}})()}}const qn=new WeakMap;function za(E){const h=(0,q.m9)(E);return qn.has(h)||qn.set(h,Io._fromUser(h)),qn.get(h)}const _i="__sak";class Vt{constructor(h,_){this.storageRetriever=h,this.type=_}_isAvailable(){try{return this.storage?(this.storage.setItem(_i,"1"),this.storage.removeItem(_i),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(h,_){return this.storage.setItem(h,JSON.stringify(_)),Promise.resolve()}_get(h){const _=this.storage.getItem(h);return Promise.resolve(_?JSON.parse(_):null)}_remove(h){return this.storage.removeItem(h),Promise.resolve()}get storage(){return this.storageRetriever()}}const Ma=(()=>{class E extends Vt{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(_,D)=>this.onStorageEvent(_,D),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function wo(){const E=(0,q.z$)();return oi(E)||ai(E)}()&&function pn(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=It(),this._shouldAllowMigration=!0}forAllChangedKeys(_){for(const D of Object.keys(this.listeners)){const W=this.storage.getItem(D),ie=this.localCache[D];W!==ie&&_(D,ie,W)}}onStorageEvent(_,D=!1){if(!_.key)return void this.forAllChangedKeys((Ke,gt,tn)=>{this.notifyListeners(Ke,tn)});const W=_.key;if(D?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Ke=this.storage.getItem(W);if(_.newValue!==Ke)null!==_.newValue?this.storage.setItem(W,_.newValue):this.storage.removeItem(W);else if(this.localCache[W]===_.newValue&&!D)return}const ie=()=>{const Ke=this.storage.getItem(W);!D&&this.localCache[W]===Ke||this.notifyListeners(W,Ke)},be=this.storage.getItem(W);!function rt(){return(0,q.w1)()&&10===document.documentMode}()||be===_.newValue||_.newValue===_.oldValue?ie():setTimeout(ie,10)}notifyListeners(_,D){this.localCache[_]=D;const W=this.listeners[_];if(W)for(const ie of Array.from(W))ie(D&&JSON.parse(D))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((_,D,W)=>{this.onStorageEvent(new StorageEvent("storage",{key:_,oldValue:D,newValue:W}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(_,D){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[_]||(this.listeners[_]=new Set,this.localCache[_]=this.storage.getItem(_)),this.listeners[_].add(D)}_removeListener(_,D){this.listeners[_]&&(this.listeners[_].delete(D),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(_,D){var W=()=>super._set,ie=this;return(0,f.Z)(function*(){yield W().call(ie,_,D),ie.localCache[_]=JSON.stringify(D)})()}_get(_){var D=()=>super._get,W=this;return(0,f.Z)(function*(){const ie=yield D().call(W,_);return W.localCache[_]=JSON.stringify(ie),ie})()}_remove(_){var D=()=>super._remove,W=this;return(0,f.Z)(function*(){yield D().call(W,_),delete W.localCache[_]})()}}return E.type="LOCAL",E})(),dt=(()=>{class E extends Vt{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(_,D){}_removeListener(_,D){}}return E.type="SESSION",E})();let Il=(()=>{class E{constructor(_){this.eventTarget=_,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(_){const D=this.receivers.find(ie=>ie.isListeningto(_));if(D)return D;const W=new E(_);return this.receivers.push(W),W}isListeningto(_){return this.eventTarget===_}handleEvent(_){var D=this;return(0,f.Z)(function*(){const W=_,{eventId:ie,eventType:be,data:Ke}=W.data,gt=D.handlersMap[be];if(!gt?.size)return;W.ports[0].postMessage({status:"ack",eventId:ie,eventType:be});const tn=Array.from(gt).map(function(){var cr=(0,f.Z)(function*(uo){return uo(W.origin,Ke)});return function(uo){return cr.apply(this,arguments)}}()),En=yield function xr(E){return Promise.all(E.map(function(){var h=(0,f.Z)(function*(_){try{return{fulfilled:!0,value:yield _}}catch(D){return{fulfilled:!1,reason:D}}});return function(_){return h.apply(this,arguments)}}()))}(tn);W.ports[0].postMessage({status:"done",eventId:ie,eventType:be,response:En})})()}_subscribe(_,D){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[_]||(this.handlersMap[_]=new Set),this.handlersMap[_].add(D)}_unsubscribe(_,D){this.handlersMap[_]&&D&&this.handlersMap[_].delete(D),(!D||0===this.handlersMap[_].size)&&delete this.handlersMap[_],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return E.receivers=[],E})();function zs(E="",h=10){let _="";for(let D=0;D<h;D++)_+=Math.floor(10*Math.random());return E+_}class Yi{constructor(h){this.target=h,this.handlers=new Set}removeMessageHandler(h){h.messageChannel&&(h.messageChannel.port1.removeEventListener("message",h.onMessage),h.messageChannel.port1.close()),this.handlers.delete(h)}_send(h,_,D=50){var W=this;return(0,f.Z)(function*(){const ie=typeof MessageChannel<"u"?new MessageChannel:null;if(!ie)throw new Error("connection_unavailable");let be,Ke;return new Promise((gt,tn)=>{const En=zs("",20);ie.port1.start();const cr=setTimeout(()=>{tn(new Error("unsupported_event"))},D);Ke={messageChannel:ie,onMessage(uo){const gu=uo;if(gu.data.eventId===En)switch(gu.data.status){case"ack":clearTimeout(cr),be=setTimeout(()=>{tn(new Error("timeout"))},3e3);break;case"done":clearTimeout(be),gt(gu.data.response);break;default:clearTimeout(cr),clearTimeout(be),tn(new Error("invalid_response"))}}},W.handlers.add(Ke),ie.port1.addEventListener("message",Ke.onMessage),W.target.postMessage({eventType:h,eventId:En,data:_},[ie.port2])}).finally(()=>{Ke&&W.removeMessageHandler(Ke)})})()}}function qi(){return window}function os(){return typeof qi().WorkerGlobalScope<"u"&&"function"==typeof qi().importScripts}function Be(){return(Be=(0,f.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const zu="firebaseLocalStorageDb",Ti="firebaseLocalStorage",Gu="fbase_key";class ms{constructor(h){this.request=h}toPromise(){return new Promise((h,_)=>{this.request.addEventListener("success",()=>{h(this.request.result)}),this.request.addEventListener("error",()=>{_(this.request.error)})})}}function To(E,h){return E.transaction([Ti],h?"readwrite":"readonly").objectStore(Ti)}function au(){const E=indexedDB.open(zu,1);return new Promise((h,_)=>{E.addEventListener("error",()=>{_(E.error)}),E.addEventListener("upgradeneeded",()=>{const D=E.result;try{D.createObjectStore(Ti,{keyPath:Gu})}catch(W){_(W)}}),E.addEventListener("success",(0,f.Z)(function*(){const D=E.result;D.objectStoreNames.contains(Ti)?h(D):(D.close(),yield function wl(){const E=indexedDB.deleteDatabase(zu);return new ms(E).toPromise()}(),h(yield au()))}))})}function Wu(E,h,_){return fo.apply(this,arguments)}function fo(){return(fo=(0,f.Z)(function*(E,h,_){const D=To(E,!0).put({[Gu]:h,value:_});return new ms(D).toPromise()})).apply(this,arguments)}function Ta(){return(Ta=(0,f.Z)(function*(E,h){const _=To(E,!1).get(h),D=yield new ms(_).toPromise();return void 0===D?null:D.value})).apply(this,arguments)}function v(E,h){const _=To(E,!0).delete(h);return new ms(_).toPromise()}const B=(()=>{class E{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var _=this;return(0,f.Z)(function*(){return _.db||(_.db=yield au()),_.db})()}_withRetries(_){var D=this;return(0,f.Z)(function*(){let W=0;for(;;)try{const ie=yield D._openDb();return yield _(ie)}catch(ie){if(W++>3)throw ie;D.db&&(D.db.close(),D.db=void 0)}})()}initializeServiceWorkerMessaging(){var _=this;return(0,f.Z)(function*(){return os()?_.initializeReceiver():_.initializeSender()})()}initializeReceiver(){var _=this;return(0,f.Z)(function*(){_.receiver=Il._getInstance(function io(){return os()?self:null}()),_.receiver._subscribe("keyChanged",function(){var D=(0,f.Z)(function*(W,ie){return{keyProcessed:(yield _._poll()).includes(ie.key)}});return function(W,ie){return D.apply(this,arguments)}}()),_.receiver._subscribe("ping",function(){var D=(0,f.Z)(function*(W,ie){return["keyChanged"]});return function(W,ie){return D.apply(this,arguments)}}())})()}initializeSender(){var _=this;return(0,f.Z)(function*(){var D,W;if(_.activeServiceWorker=yield function ou(){return Be.apply(this,arguments)}(),!_.activeServiceWorker)return;_.sender=new Yi(_.activeServiceWorker);const ie=yield _.sender._send("ping",{},800);ie&&null!==(D=ie[0])&&void 0!==D&&D.fulfilled&&null!==(W=ie[0])&&void 0!==W&&W.value.includes("keyChanged")&&(_.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(_){var D=this;return(0,f.Z)(function*(){if(D.sender&&D.activeServiceWorker&&function Hu(){var E;return(null===(E=navigator?.serviceWorker)||void 0===E?void 0:E.controller)||null}()===D.activeServiceWorker)try{yield D.sender._send("keyChanged",{key:_},D.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,f.Z)(function*(){try{if(!indexedDB)return!1;const _=yield au();return yield Wu(_,_i,"1"),yield v(_,_i),!0}catch{}return!1})()}_withPendingWrite(_){var D=this;return(0,f.Z)(function*(){D.pendingWrites++;try{yield _()}finally{D.pendingWrites--}})()}_set(_,D){var W=this;return(0,f.Z)(function*(){return W._withPendingWrite((0,f.Z)(function*(){return yield W._withRetries(ie=>Wu(ie,_,D)),W.localCache[_]=D,W.notifyServiceWorker(_)}))})()}_get(_){var D=this;return(0,f.Z)(function*(){const W=yield D._withRetries(ie=>function uu(E,h){return Ta.apply(this,arguments)}(ie,_));return D.localCache[_]=W,W})()}_remove(_){var D=this;return(0,f.Z)(function*(){return D._withPendingWrite((0,f.Z)(function*(){return yield D._withRetries(W=>v(W,_)),delete D.localCache[_],D.notifyServiceWorker(_)}))})()}_poll(){var _=this;return(0,f.Z)(function*(){const D=yield _._withRetries(be=>{const Ke=To(be,!1).getAll();return new ms(Ke).toPromise()});if(!D)return[];if(0!==_.pendingWrites)return[];const W=[],ie=new Set;if(0!==D.length)for(const{fbase_key:be,value:Ke}of D)ie.add(be),JSON.stringify(_.localCache[be])!==JSON.stringify(Ke)&&(_.notifyListeners(be,Ke),W.push(be));for(const be of Object.keys(_.localCache))_.localCache[be]&&!ie.has(be)&&(_.notifyListeners(be,null),W.push(be));return W})()}notifyListeners(_,D){this.localCache[_]=D;const W=this.listeners[_];if(W)for(const ie of Array.from(W))ie(D)}startPolling(){var _=this;this.stopPolling(),this.pollTimer=setInterval((0,f.Z)(function*(){return _._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(_,D){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[_]||(this.listeners[_]=new Set,this._get(_)),this.listeners[_].add(D)}_removeListener(_,D){this.listeners[_]&&(this.listeners[_].delete(D),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return E.type="LOCAL",E})(),jn=1e12;class Di{constructor(h){this.auth=h,this.counter=jn,this._widgets=new Map}render(h,_){const D=this.counter;return this._widgets.set(D,new Mn(h,this.auth.name,_||{})),this.counter++,D}reset(h){var _;const D=h||jn;null===(_=this._widgets.get(D))||void 0===_||_.delete(),this._widgets.delete(D)}getResponse(h){var _;return(null===(_=this._widgets.get(h||jn))||void 0===_?void 0:_.getResponse())||""}execute(h){var _=this;return(0,f.Z)(function*(){var D;return null===(D=_._widgets.get(h||jn))||void 0===D||D.execute(),""})()}}class Mn{constructor(h,_,D){this.params=D,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const W="string"==typeof h?document.getElementById(h):h;xe(W,"argument-error",{appName:_}),this.container=W,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Ss(E){const h=[],_="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let D=0;D<E;D++)h.push(_.charAt(Math.floor(62*Math.random())));return h.join("")}(50);const{callback:h,"expired-callback":_}=this.params;if(h)try{h(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,_)try{_()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const ri=ur("rcb"),Ga=new Dt(3e4,6e4);class Tu{constructor(){var h;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(h=qi().grecaptcha)||void 0===h||!h.render)}load(h,_=""){return xe(function Vo(E){return E.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(E)}(_),h,"argument-error"),this.shouldResolveImmediately(_)&&Pt(qi().grecaptcha)?Promise.resolve(qi().grecaptcha):new Promise((D,W)=>{const ie=qi().setTimeout(()=>{W(Ue(h,"network-request-failed"))},Ga.get());qi()[ri]=()=>{qi().clearTimeout(ie),delete qi()[ri];const Ke=qi().grecaptcha;if(!Ke||!Pt(Ke))return void W(Ue(h,"internal-error"));const gt=Ke.render;Ke.render=(tn,En)=>{const cr=gt(tn,En);return this.counter++,cr},this.hostLanguage=_,D(Ke)},Zs(`${function Qs(){return ki.recaptchaV2Script}()}?${(0,q.xO)({onload:ri,render:"explicit",hl:_})}`).catch(()=>{clearTimeout(ie),W(Ue(h,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(h){var _;return!(null===(_=qi().grecaptcha)||void 0===_||!_.render)&&(h===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Uo{load(h){return(0,f.Z)(function*(){return new Di(h)})()}clearedOneInstance(){}}const so="recaptcha",ec={theme:"light",type:"image"};class qu{constructor(h,_,D=Object.assign({},ec)){this.parameters=D,this.type=so,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Xn(h),this.isInvisible="invisible"===this.parameters.size,xe(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const W="string"==typeof _?document.getElementById(_):_;xe(W,this.auth,"argument-error"),this.container=W,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Uo:new Tu,this.validateStartingState()}verify(){var h=this;return(0,f.Z)(function*(){h.assertNotDestroyed();const _=yield h.render(),D=h.getAssertedRecaptcha();return D.getResponse(_)||new Promise(ie=>{const be=Ke=>{Ke&&(h.tokenChangeListeners.delete(be),ie(Ke))};h.tokenChangeListeners.add(be),h.isInvisible&&D.execute(_)})})()}render(){try{this.assertNotDestroyed()}catch(h){return Promise.reject(h)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(h=>{throw this.renderPromise=null,h})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(h=>{this.container.removeChild(h)})}validateStartingState(){xe(!this.parameters.sitekey,this.auth,"argument-error"),xe(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),xe(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(h){return _=>{if(this.tokenChangeListeners.forEach(D=>D(_)),"function"==typeof h)h(_);else if("string"==typeof h){const D=qi()[h];"function"==typeof D&&D(_)}}}assertNotDestroyed(){xe(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var h=this;return(0,f.Z)(function*(){if(yield h.init(),!h.widgetId){let _=h.container;if(!h.isInvisible){const D=document.createElement("div");_.appendChild(D),_=D}h.widgetId=h.getAssertedRecaptcha().render(_,h.parameters)}return h.widgetId})()}init(){var h=this;return(0,f.Z)(function*(){xe(vn()&&!os(),h.auth,"internal-error"),yield function oa(){let E=null;return new Promise(h=>{"complete"!==document.readyState?(E=()=>h(),window.addEventListener("load",E)):h()}).catch(h=>{throw E&&window.removeEventListener("load",E),h})}(),h.recaptcha=yield h._recaptchaLoader.load(h.auth,h.auth.languageCode||void 0);const _=yield function Ir(E){return Vn.apply(this,arguments)}(h.auth);xe(_,h.auth,"internal-error"),h.parameters.sitekey=_})()}getAssertedRecaptcha(){return xe(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Wa{constructor(h,_){this.verificationId=h,this.onConfirmation=_}confirm(h){const _=Qi._fromVerification(this.verificationId,h);return this.onConfirmation(_)}}function Gs(E,h,_){return lu.apply(this,arguments)}function lu(){return(lu=(0,f.Z)(function*(E,h,_){if((0,Z._isFirebaseServerApp)(E.app))return Promise.reject(Ie(E));const D=Xn(E),W=yield fa(D,h,(0,q.m9)(_));return new Wa(W,ie=>Dr(D,ie))})).apply(this,arguments)}function cu(E,h,_){return Da.apply(this,arguments)}function Da(){return(Da=(0,f.Z)(function*(E,h,_){const D=(0,q.m9)(E);yield de(!1,D,"phone");const W=yield fa(D.auth,h,(0,q.m9)(_));return new Wa(W,ie=>ci(D,ie))})).apply(this,arguments)}function Aa(E,h,_){return Ji.apply(this,arguments)}function Ji(){return(Ji=(0,f.Z)(function*(E,h,_){const D=(0,q.m9)(E);if((0,Z._isFirebaseServerApp)(D.auth.app))return Promise.reject(Ie(D.auth));const W=yield fa(D.auth,h,(0,q.m9)(_));return new Wa(W,ie=>As(D,ie))})).apply(this,arguments)}function fa(E,h,_){return Do.apply(this,arguments)}function Do(){return Do=(0,f.Z)(function*(E,h,_){var D;const W=yield _.verify();try{let ie;if(xe("string"==typeof W,E,"argument-error"),xe(_.type===so,E,"argument-error"),ie="string"==typeof h?{phoneNumber:h}:h,"session"in ie){const be=ie.session;if("phoneNumber"in ie)return xe("enroll"===be.type,E,"internal-error"),(yield function kn(E,h){return tt(E,"POST","/v2/accounts/mfaEnrollment:start",He(E,h))}(E,{idToken:be.credential,phoneEnrollmentInfo:{phoneNumber:ie.phoneNumber,recaptchaToken:W}})).phoneSessionInfo.sessionInfo;{xe("signin"===be.type,E,"internal-error");const Ke=(null===(D=ie.multiFactorHint)||void 0===D?void 0:D.uid)||ie.multiFactorUid;return xe(Ke,E,"missing-multi-factor-info"),(yield function te(E,h){return tt(E,"POST","/v2/accounts/mfaSignIn:start",He(E,h))}(E,{mfaPendingCredential:be.credential,mfaEnrollmentId:Ke,phoneSignInInfo:{recaptchaToken:W}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:be}=yield function Or(E,h){return Ei.apply(this,arguments)}(E,{phoneNumber:ie.phoneNumber,recaptchaToken:W});return be}}finally{_._reset()}}),Do.apply(this,arguments)}function Du(E,h){return Ai.apply(this,arguments)}function Ai(){return(Ai=(0,f.Z)(function*(E,h){const _=(0,q.m9)(E);if((0,Z._isFirebaseServerApp)(_.auth.app))return Promise.reject(Ie(_.auth));yield C(_,h)})).apply(this,arguments)}let tc=(()=>{class E{constructor(_){this.providerId=E.PROVIDER_ID,this.auth=Xn(_)}verifyPhoneNumber(_,D){return fa(this.auth,_,(0,q.m9)(D))}static credential(_,D){return Qi._fromVerification(_,D)}static credentialFromResult(_){return E.credentialFromTaggedObject(_)}static credentialFromError(_){return E.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{phoneNumber:D,temporaryProof:W}=_;return D&&W?Qi._fromTokenResponse(D,W):null}}return E.PROVIDER_ID="phone",E.PHONE_SIGN_IN_METHOD="phone",E})();function Hi(E,h){return h?st(h):(xe(E._popupRedirectResolver,E,"argument-error"),E._popupRedirectResolver)}class hi extends Ns{constructor(h){super("custom","custom"),this.params=h}_getIdTokenResponse(h){return Wi(h,this._buildIdpRequest())}_linkToIdToken(h,_){return Wi(h,this._buildIdpRequest(_))}_getReauthenticationResolver(h){return Wi(h,this._buildIdpRequest())}_buildIdpRequest(h){const _={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return h&&(_.idToken=h),_}}function jc(E){return ir(E.auth,new hi(E),E.bypassAuthState)}function qa(E){const{auth:h,user:_}=E;return xe(_,h,"internal-error"),ht(_,new hi(E),E.bypassAuthState)}function Bo(E){return Au.apply(this,arguments)}function Au(){return(Au=(0,f.Z)(function*(E){const{auth:h,user:_}=E;return xe(_,h,"internal-error"),C(_,new hi(E),E.bypassAuthState)})).apply(this,arguments)}class Ku{constructor(h,_,D,W,ie=!1){this.auth=h,this.resolver=D,this.user=W,this.bypassAuthState=ie,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(_)?_:[_]}execute(){var h=this;return new Promise(function(){var _=(0,f.Z)(function*(D,W){h.pendingPromise={resolve:D,reject:W};try{h.eventManager=yield h.resolver._initialize(h.auth),yield h.onExecution(),h.eventManager.registerConsumer(h)}catch(ie){h.reject(ie)}});return function(D,W){return _.apply(this,arguments)}}())}onAuthEvent(h){var _=this;return(0,f.Z)(function*(){const{urlResponse:D,sessionId:W,postBody:ie,tenantId:be,error:Ke,type:gt}=h;if(Ke)return void _.reject(Ke);const tn={auth:_.auth,requestUri:D,sessionId:W,tenantId:be||void 0,postBody:ie||void 0,user:_.user,bypassAuthState:_.bypassAuthState};try{_.resolve(yield _.getIdpTask(gt)(tn))}catch(En){_.reject(En)}})()}onError(h){this.reject(h)}getIdpTask(h){switch(h){case"signInViaPopup":case"signInViaRedirect":return jc;case"linkViaPopup":case"linkViaRedirect":return Bo;case"reauthViaPopup":case"reauthViaRedirect":return qa;default:ce(this.auth,"internal-error")}}resolve(h){zt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(h),this.unregisterAndCleanUp()}reject(h){zt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(h),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Xi=new Dt(2e3,1e4);function nc(E,h,_){return jo.apply(this,arguments)}function jo(){return(jo=(0,f.Z)(function*(E,h,_){if((0,Z._isFirebaseServerApp)(E.app))return Promise.reject(Ue(E,"operation-not-supported-in-this-environment"));const D=Xn(E);et(E,h,Tr);const W=Hi(D,_);return new Na(D,"signInViaPopup",h,W).executeNotNull()})).apply(this,arguments)}function zi(E,h,_){return Ao.apply(this,arguments)}function Ao(){return(Ao=(0,f.Z)(function*(E,h,_){const D=(0,q.m9)(E);if((0,Z._isFirebaseServerApp)(D.auth.app))return Promise.reject(Ue(D.auth,"operation-not-supported-in-this-environment"));et(D.auth,h,Tr);const W=Hi(D.auth,_);return new Na(D.auth,"reauthViaPopup",h,W,D).executeNotNull()})).apply(this,arguments)}function rc(E,h,_){return Ka.apply(this,arguments)}function Ka(){return(Ka=(0,f.Z)(function*(E,h,_){const D=(0,q.m9)(E);et(D.auth,h,Tr);const W=Hi(D.auth,_);return new Na(D.auth,"linkViaPopup",h,W,D).executeNotNull()})).apply(this,arguments)}let Na=(()=>{class E extends Ku{constructor(_,D,W,ie,be){super(_,D,ie,be),this.provider=W,this.authWindow=null,this.pollId=null,E.currentPopupAction&&E.currentPopupAction.cancel(),E.currentPopupAction=this}executeNotNull(){var _=this;return(0,f.Z)(function*(){const D=yield _.execute();return xe(D,_.auth,"internal-error"),D})()}onExecution(){var _=this;return(0,f.Z)(function*(){zt(1===_.filter.length,"Popup operations only handle one event");const D=zs();_.authWindow=yield _.resolver._openPopup(_.auth,_.provider,_.filter[0],D),_.authWindow.associatedEvent=D,_.resolver._originValidation(_.auth).catch(W=>{_.reject(W)}),_.resolver._isIframeWebStorageSupported(_.auth,W=>{W||_.reject(Ue(_.auth,"web-storage-unsupported"))}),_.pollUserCancellation()})()}get eventId(){var _;return(null===(_=this.authWindow)||void 0===_?void 0:_.associatedEvent)||null}cancel(){this.reject(Ue(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,E.currentPopupAction=null}pollUserCancellation(){const _=()=>{var D,W;this.pollId=null!==(W=null===(D=this.authWindow)||void 0===D?void 0:D.window)&&void 0!==W&&W.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Ue(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(_,Xi.get())};_()}}return E.currentPopupAction=null,E})();const Pd="pendingRedirect",_s=new Map;class Oa extends Ku{constructor(h,_,D=!1){super(h,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],_,void 0,D),this.eventId=null}execute(){var h=()=>super.execute,_=this;return(0,f.Z)(function*(){let D=_s.get(_.auth._key());if(!D){try{const ie=(yield function du(E,h){return aa.apply(this,arguments)}(_.resolver,_.auth))?yield h().call(_):null;D=()=>Promise.resolve(ie)}catch(W){D=()=>Promise.reject(W)}_s.set(_.auth._key(),D)}return _.bypassAuthState||_s.set(_.auth._key(),()=>Promise.resolve(null)),D()})()}onAuthEvent(h){var _=()=>super.onAuthEvent,D=this;return(0,f.Z)(function*(){if("signInViaRedirect"===h.type)return _().call(D,h);if("unknown"!==h.type){if(h.eventId){const W=yield D.auth._redirectUserForId(h.eventId);if(W)return D.user=W,_().call(D,h);D.resolve(null)}}else D.resolve(null)})()}onExecution(){return(0,f.Z)(function*(){})()}cleanUp(){}}function aa(){return(aa=(0,f.Z)(function*(E,h){const _=d(h),D=N(E);if(!(yield D._isAvailable()))return!1;const W="true"===(yield D._get(_));return yield D._remove(_),W})).apply(this,arguments)}function $o(E,h){return pa.apply(this,arguments)}function pa(){return(pa=(0,f.Z)(function*(E,h){return N(E)._set(d(h),"true")})).apply(this,arguments)}function ga(){_s.clear()}function ic(E,h){_s.set(E._key(),h)}function N(E){return st(E._redirectPersistence)}function d(E){return wt(Pd,E.config.apiKey,E.name)}function m(E,h,_){return function T(E,h,_){return V.apply(this,arguments)}(E,h,_)}function V(){return(V=(0,f.Z)(function*(E,h,_){if((0,Z._isFirebaseServerApp)(E.app))return Promise.reject(Ie(E));const D=Xn(E);et(E,h,Tr),yield D._initializationPromise;const W=Hi(D,_);return yield $o(W,D),W._openRedirect(D,h,"signInViaRedirect")})).apply(this,arguments)}function Y(E,h,_){return function ue(E,h,_){return me.apply(this,arguments)}(E,h,_)}function me(){return(me=(0,f.Z)(function*(E,h,_){const D=(0,q.m9)(E);if(et(D.auth,h,Tr),(0,Z._isFirebaseServerApp)(D.auth.app))return Promise.reject(Ie(D.auth));yield D.auth._initializationPromise;const W=Hi(D.auth,_);yield $o(W,D.auth);const ie=yield St(D);return W._openRedirect(D.auth,h,"reauthViaRedirect",ie)})).apply(this,arguments)}function Se(E,h,_){return function Qe(E,h,_){return At.apply(this,arguments)}(E,h,_)}function At(){return(At=(0,f.Z)(function*(E,h,_){const D=(0,q.m9)(E);et(D.auth,h,Tr),yield D.auth._initializationPromise;const W=Hi(D.auth,_);yield de(!1,D,h.providerId),yield $o(W,D.auth);const ie=yield St(D);return W._openRedirect(D.auth,h,"linkViaRedirect",ie)})).apply(this,arguments)}function Mt(E,h){return en.apply(this,arguments)}function en(){return(en=(0,f.Z)(function*(E,h){return yield Xn(E)._initializationPromise,bn(E,h,!1)})).apply(this,arguments)}function bn(E,h){return sn.apply(this,arguments)}function sn(){return(sn=(0,f.Z)(function*(E,h,_=!1){if((0,Z._isFirebaseServerApp)(E.app))return Promise.reject(Ie(E));const D=Xn(E),W=Hi(D,h),be=yield new Oa(D,W,_).execute();return be&&!_&&(delete be.user._redirectEventId,yield D._persistUserIfCurrent(be.user),yield D._setRedirectUser(null,h)),be})).apply(this,arguments)}function St(E){return Sn.apply(this,arguments)}function Sn(){return(Sn=(0,f.Z)(function*(E){const h=zs(`${E.uid}:::`);return E._redirectEventId=h,yield E.auth._setRedirectUser(E),yield E.auth._persistUserIfCurrent(E),h})).apply(this,arguments)}class Zr{constructor(h){this.auth=h,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(h){this.consumers.add(h),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,h)&&(this.sendToConsumer(this.queuedRedirectEvent,h),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(h){this.consumers.delete(h)}onEvent(h){if(this.hasEventBeenHandled(h))return!1;let _=!1;return this.consumers.forEach(D=>{this.isEventForConsumer(h,D)&&(_=!0,this.sendToConsumer(h,D),this.saveEventToCache(h))}),this.hasHandledPotentialRedirect||!function Ki(E){switch(E.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Qr(E);default:return!1}}(h)||(this.hasHandledPotentialRedirect=!0,_||(this.queuedRedirectEvent=h,_=!0)),_}sendToConsumer(h,_){var D;if(h.error&&!Qr(h)){const W=(null===(D=h.error.code)||void 0===D?void 0:D.split("auth/")[1])||"internal-error";_.onError(Ue(this.auth,W))}else _.onAuthEvent(h)}isEventForConsumer(h,_){const D=null===_.eventId||!!h.eventId&&h.eventId===_.eventId;return _.filter.includes(h.type)&&D}hasEventBeenHandled(h){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(nr(h))}saveEventToCache(h){this.cachedEventUids.add(nr(h)),this.lastProcessedEventTime=Date.now()}}function nr(E){return[E.type,E.eventId,E.sessionId,E.tenantId].filter(h=>h).join("-")}function Qr({type:E,error:h}){return"unknown"===E&&"auth/no-auth-event"===h?.code}function Ws(E){return es.apply(this,arguments)}function es(){return(es=(0,f.Z)(function*(E,h={}){return tt(E,"GET","/v1/projects",h)})).apply(this,arguments)}const Nn=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,kr=/^https?/;function Zu(){return(Zu=(0,f.Z)(function*(E){if(E.config.emulator)return;const{authorizedDomains:h}=yield Ws(E);for(const _ of h)try{if(Cu(_))return}catch{}ce(E,"unauthorized-domain")})).apply(this,arguments)}function Cu(E){const h=In(),{protocol:_,hostname:D}=new URL(h);if(E.startsWith("chrome-extension://")){const be=new URL(E);return""===be.hostname&&""===D?"chrome-extension:"===_&&E.replace("chrome-extension://","")===h.replace("chrome-extension://",""):"chrome-extension:"===_&&be.hostname===D}if(!kr.test(_))return!1;if(Nn.test(E))return D===E;const W=E.replace(/\./g,"\\.");return new RegExp("^(.+\\."+W+"|"+W+")$","i").test(D)}const hu=new Dt(3e4,6e4);function Tl(){const E=qi().___jsl;if(E?.H)for(const h of Object.keys(E.H))if(E.H[h].r=E.H[h].r||[],E.H[h].L=E.H[h].L||[],E.H[h].r=[...E.H[h].L],E.CP)for(let _=0;_<E.CP.length;_++)E.CP[_]=null}let on=null;const Fn=new Dt(5e3,15e3),Yr="__/auth/iframe",Fr="emulator/auth/iframe",ma={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},oo=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function xa(E){const h=E.config;xe(h.authDomain,E,"auth-domain-config-required");const _=h.emulator?Te(h,Fr):`https://${E.config.authDomain}/${Yr}`,D={apiKey:h.apiKey,appName:E.name,v:Z.SDK_VERSION},W=oo.get(E.config.apiHost);W&&(D.eid=W);const ie=E._getFrameworks();return ie.length&&(D.fw=ie.join(",")),`${_}?${(0,q.xO)(D).slice(1)}`}function ka(){return ka=(0,f.Z)(function*(E){const h=yield function mn(E){return on=on||function $c(E){return new Promise((h,_)=>{var D,W,ie;function be(){Tl(),gapi.load("gapi.iframes",{callback:()=>{h(gapi.iframes.getContext())},ontimeout:()=>{Tl(),_(Ue(E,"network-request-failed"))},timeout:hu.get()})}if(null!==(W=null===(D=qi().gapi)||void 0===D?void 0:D.iframes)&&void 0!==W&&W.Iframe)h(gapi.iframes.getContext());else{if(null===(ie=qi().gapi)||void 0===ie||!ie.load){const Ke=ur("iframefcb");return qi()[Ke]=()=>{gapi.load?be():_(Ue(E,"network-request-failed"))},Zs(`${function qr(){return ki.gapiScript}()}?onload=${Ke}`).catch(gt=>_(gt))}be()}}).catch(h=>{throw on=null,h})}(E),on}(E),_=qi().gapi;return xe(_,E,"internal-error"),h.open({where:document.body,url:xa(E),messageHandlersFilter:_.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ma,dontclear:!0},D=>new Promise(function(){var W=(0,f.Z)(function*(ie,be){yield D.restyle({setHideOnLeave:!1});const Ke=Ue(E,"network-request-failed"),gt=qi().setTimeout(()=>{be(Ke)},Fn.get());function tn(){qi().clearTimeout(gt),ie(D)}D.ping(tn).then(tn,()=>{be(Ke)})});return function(ie,be){return W.apply(this,arguments)}}()))}),ka.apply(this,arguments)}const Hc={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class fu{constructor(h){this.window=h,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const Fa="__/auth/handler",Qu="emulator/auth/handler",sc=encodeURIComponent("fac");function oc(E,h,_,D,W,ie){return ac.apply(this,arguments)}function ac(){return(ac=(0,f.Z)(function*(E,h,_,D,W,ie){xe(E.config.authDomain,E,"auth-domain-config-required"),xe(E.config.apiKey,E,"invalid-api-key");const be={apiKey:E.config.apiKey,appName:E.name,authType:_,redirectUrl:D,v:Z.SDK_VERSION,eventId:W};if(h instanceof Tr){h.setDefaultLanguage(E.languageCode),be.providerId=h.providerId||"",(0,q.xb)(h.getCustomParameters())||(be.customParameters=JSON.stringify(h.getCustomParameters()));for(const[En,cr]of Object.entries(ie||{}))be[En]=cr}if(h instanceof Eo){const En=h.getScopes().filter(cr=>""!==cr);En.length>0&&(be.scopes=En.join(","))}E.tenantId&&(be.tid=E.tenantId);const Ke=be;for(const En of Object.keys(Ke))void 0===Ke[En]&&delete Ke[En];const gt=yield E._getAppCheckToken(),tn=gt?`#${sc}=${encodeURIComponent(gt)}`:"";return`${function Dl({config:E}){return E.emulator?Te(E,Qu):`https://${E.authDomain}/${Fa}`}(E)}?${(0,q.xO)(Ke).slice(1)}${tn}`})).apply(this,arguments)}const Co="webStorageSupport",zc=class bh{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=dt,this._completeRedirectFn=bn,this._overrideRedirectResult=ic}_openPopup(h,_,D,W){var ie=this;return(0,f.Z)(function*(){var be;zt(null===(be=ie.eventManagers[h._key()])||void 0===be?void 0:be.manager,"_initialize() not called before _openPopup()");const Ke=yield oc(h,_,D,In(),W);return function Wf(E,h,_,D=500,W=600){const ie=Math.max((window.screen.availHeight-W)/2,0).toString(),be=Math.max((window.screen.availWidth-D)/2,0).toString();let Ke="";const gt=Object.assign(Object.assign({},Hc),{width:D.toString(),height:W.toString(),top:ie,left:be}),tn=(0,q.z$)().toLowerCase();_&&(Ke=vs(tn)?"_blank":_),ln(tn)&&(h=h||"http://localhost",gt.scrollbars="yes");const En=Object.entries(gt).reduce((uo,[gu,Qa])=>`${uo}${gu}=${Qa},`,"");if(function Oe(E=(0,q.z$)()){var h;return ai(E)&&!(null===(h=window.navigator)||void 0===h||!h.standalone)}(tn)&&"_self"!==Ke)return function ua(E,h){const _=document.createElement("a");_.href=E,_.target=h;const D=document.createEvent("MouseEvent");D.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),_.dispatchEvent(D)}(h||"",Ke),new fu(null);const cr=window.open(h||"",Ke,En);xe(cr,E,"popup-blocked");try{cr.focus()}catch{}return new fu(cr)}(h,Ke,zs())})()}_openRedirect(h,_,D,W){var ie=this;return(0,f.Z)(function*(){return yield ie._originValidation(h),function su(E){qi().location.href=E}(yield oc(h,_,D,In(),W)),new Promise(()=>{})})()}_initialize(h){const _=h._key();if(this.eventManagers[_]){const{manager:W,promise:ie}=this.eventManagers[_];return W?Promise.resolve(W):(zt(ie,"If manager is not set, promise should be"),ie)}const D=this.initAndGetManager(h);return this.eventManagers[_]={promise:D},D.catch(()=>{delete this.eventManagers[_]}),D}initAndGetManager(h){var _=this;return(0,f.Z)(function*(){const D=yield function Gr(E){return ka.apply(this,arguments)}(h),W=new Zr(h);return D.register("authEvent",ie=>(xe(ie?.authEvent,h,"invalid-auth-event"),{status:W.onEvent(ie.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),_.eventManagers[h._key()]={manager:W},_.iframes[h._key()]=D,W})()}_isIframeWebStorageSupported(h,_){this.iframes[h._key()].send(Co,{type:Co},W=>{var ie;const be=null===(ie=W?.[0])||void 0===ie?void 0:ie[Co];void 0!==be&&_(!!be),ce(h,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(h){const _=h._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function Ho(E){return Zu.apply(this,arguments)}(h)),this.originValidationPromises[_]}get _shouldInitProactively(){return It()||oi()||ai()}};class Gc{constructor(h){this.factorId=h}_process(h,_,D){switch(_.type){case"enroll":return this._finalizeEnroll(h,_.credential,D);case"signin":return this._finalizeSignIn(h,_.credential);default:return Tt("unexpected MultiFactorSessionType")}}}class pu extends Gc{constructor(h){super("phone"),this.credential=h}static _fromCredential(h){return new pu(h)}_finalizeEnroll(h,_,D){return function sa(E,h){return tt(E,"POST","/v2/accounts/mfaEnrollment:finalize",He(E,h))}(h,{idToken:_,displayName:D,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(h,_){return function fe(E,h){return tt(E,"POST","/v2/accounts/mfaSignIn:finalize",He(E,h))}(h,{mfaPendingCredential:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let uc=(()=>{class E{constructor(){}static assertion(_){return pu._fromCredential(_)}}return E.FACTOR_ID="phone",E})();var Sh="@firebase/auth";class Nd{constructor(h){this.auth=h,this.internalListeners=new Map}getUid(){var h;return this.assertAuthConfigured(),(null===(h=this.auth.currentUser)||void 0===h?void 0:h.uid)||null}getToken(h){var _=this;return(0,f.Z)(function*(){return _.assertAuthConfigured(),yield _.auth._initializationPromise,_.auth.currentUser?{accessToken:yield _.auth.currentUser.getIdToken(h)}:null})()}addAuthTokenListener(h){if(this.assertAuthConfigured(),this.internalListeners.has(h))return;const _=this.auth.onIdTokenChanged(D=>{h(D?.stsTokenManager.accessToken||null)});this.internalListeners.set(h,_),this.updateProactiveRefresh()}removeAuthTokenListener(h){this.assertAuthConfigured();const _=this.internalListeners.get(h);_&&(this.internalListeners.delete(h),_(),this.updateProactiveRefresh())}assertAuthConfigured(){xe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(0,q.Pz)("authIdTokenMaxAge"),function ls(E){ki=E}({loadJS:E=>new Promise((h,_)=>{const D=document.createElement("script");D.setAttribute("src",E),D.onload=h,D.onerror=W=>{const ie=Ue("internal-error");ie.customData=W,_(ie)},D.type="text/javascript",D.charset="UTF-8",function um(){var E,h;return null!==(h=null===(E=document.getElementsByTagName("head"))||void 0===E?void 0:E[0])&&void 0!==h?h:document}().appendChild(D)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),function Od(E){(0,Z._registerComponent)(new we.wA("auth",(h,{options:_})=>{const D=h.getProvider("app").getImmediate(),W=h.getProvider("heartbeat"),ie=h.getProvider("app-check-internal"),{apiKey:be,authDomain:Ke}=D.options;xe(be&&!be.includes(":"),"invalid-api-key",{appName:D.name});const gt={apiKey:be,authDomain:Ke,clientPlatform:E,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Xt(E)},tn=new Po(D,W,ie,gt);return function ya(E,h){const _=h?.persistence||[],D=(Array.isArray(_)?_:[_]).map(st);h?.errorMap&&E._updateErrorMap(h.errorMap),E._initializeWithPersistence(D,h?.popupRedirectResolver)}(tn,_),tn},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((h,_,D)=>{h.getProvider("auth-internal").initialize()})),(0,Z._registerComponent)(new we.wA("auth-internal",h=>{const _=Xn(h.getProvider("auth").getImmediate());return new Nd(_)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,Z.registerVersion)(Sh,"1.7.0",function bo(E){switch(E){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(E)),(0,Z.registerVersion)(Sh,"1.7.0","esm2017")}("Browser")},5776:(Nt,Ve,U)=>{U.d(Ve,{u7:()=>kc,Jj:()=>Gl,IX:()=>_v,my:()=>Vs,xU:()=>Fc,Lz:()=>Wl,WA:()=>ft,F8:()=>Nf,$q:()=>Eh,W:()=>fl,EK:()=>Zt,PU:()=>uy,l7:()=>_s,Ky:()=>Vt,Xb:()=>_i,Cf:()=>Rr,K9:()=>Uc,Me:()=>Ku,yq:()=>ni,Wi:()=>B_,ET:()=>Hg,Ab:()=>fy,vr:()=>hy,Fc:()=>Iv,hJ:()=>gv,B$:()=>H_,at:()=>$_,oe:()=>$g,AK:()=>dy,TF:()=>wv,JU:()=>Cg,ST:()=>vv,fH:()=>Ev,Ix:()=>Sg,Wu:()=>Fg,Lx:()=>yh,qY:()=>Ks,GL:()=>pl,QT:()=>kv,kl:()=>ey,Xk:()=>ty,PL:()=>ny,UQ:()=>Fv,zN:()=>Lv,ad:()=>yv,nP:()=>qg,b9:()=>Pv,vh:()=>ZE,Pb:()=>Tv,L$:()=>Dv,cf:()=>Uv,sc:()=>Ff,Xo:()=>Rv,IO:()=>Y_,iE:()=>bg,Eo:()=>fh,i3:()=>cy,Bt:()=>Wv,pl:()=>Vv,Ub:()=>Ls,qK:()=>X_,TQ:()=>Nv,e0:()=>Mv,r7:()=>ry,Mx:()=>q_,ar:()=>Og});var _e,f=U(5861),Z=U(534),q=U(4537),ye=U(7879),ge=U(9058),we=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},De={},Ne=Ne||{},re=we||self;function se(i){var e=typeof i;return"array"==(e="object"!=e?e:i?Array.isArray(i)?"array":e:"null")||"object"==e&&"number"==typeof i.length}function ve(i){var e=typeof i;return"object"==e&&null!=i||"function"==e}var We="closure_uid_"+(1e9*Math.random()>>>0),at=0;function it(i,e,n){return i.call.apply(i.bind,arguments)}function mt(i,e,n){if(!i)throw Error();if(2<arguments.length){var o=Array.prototype.slice.call(arguments,2);return function(){var u=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(u,o),i.apply(e,u)}}return function(){return i.apply(e,arguments)}}function nt(i,e,n){return(nt=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?it:mt).apply(null,arguments)}function Lt(i,e){var n=Array.prototype.slice.call(arguments,1);return function(){var o=n.slice();return o.push.apply(o,arguments),i.apply(this,o)}}function ot(i,e){function n(){}n.prototype=e.prototype,i.$=e.prototype,i.prototype=new n,i.prototype.constructor=i,i.ac=function(o,u,c){for(var g=Array(arguments.length-2),S=2;S<arguments.length;S++)g[S-2]=arguments[S];return e.prototype[u].apply(o,g)}}function ce(){this.s=this.s,this.o=this.o}ce.prototype.s=!1,ce.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function Ye(i){Object.prototype.hasOwnProperty.call(i,We)&&i[We]||(i[We]=++at)}(this)},ce.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Ae=Array.prototype.indexOf?function(i,e){return Array.prototype.indexOf.call(i,e,void 0)}:function(i,e){if("string"==typeof i)return"string"!=typeof e||1!=e.length?-1:i.indexOf(e,0);for(let n=0;n<i.length;n++)if(n in i&&i[n]===e)return n;return-1};function Ie(i){const e=i.length;if(0<e){const n=Array(e);for(let o=0;o<e;o++)n[o]=i[o];return n}return[]}function et(i,e){for(let n=1;n<arguments.length;n++){const o=arguments[n];if(se(o)){const u=i.length||0,c=o.length||0;i.length=u+c;for(let g=0;g<c;g++)i[u+g]=o[g]}else i.push(o)}}function Fe(i,e){this.type=i,this.g=this.target=e,this.defaultPrevented=!1}Fe.prototype.h=function(){this.defaultPrevented=!0};var xe=function(){if(!re.addEventListener||!Object.defineProperty)return!1;var i=!1,e=Object.defineProperty({},"passive",{get:function(){i=!0}});try{const n=()=>{};re.addEventListener("test",n,e),re.removeEventListener("test",n,e)}catch{}return i}();function Tt(i){return/^[\s\xa0]*$/.test(i)}function zt(){var i=re.navigator;return i&&(i=i.userAgent)?i:""}function In(i){return-1!=zt().indexOf(i)}function vn(i){return vn[" "](i),i}vn[" "]=function(){};var He,i,kt=In("Opera"),Ft=In("Trident")||In("MSIE"),Dt=In("Edge"),Te=Dt||Ft,Re=In("Gecko")&&!(-1!=zt().toLowerCase().indexOf("webkit")&&!In("Edge"))&&!(In("Trident")||In("MSIE"))&&!In("Edge"),$e=-1!=zt().toLowerCase().indexOf("webkit")&&!In("Edge");function Le(){var i=re.document;return i?i.documentMode:void 0}e:{var tt="",yt=(i=zt(),Re?/rv:([^\);]+)(\)|;)/.exec(i):Dt?/Edge\/([\d\.]+)/.exec(i):Ft?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(i):$e?/WebKit\/(\S+)/.exec(i):kt?/(?:Version)[ \/]?(\S+)/.exec(i):void 0);if(yt&&(tt=yt?yt[1]:""),Ft){var vt=Le();if(null!=vt&&vt>parseFloat(tt)){He=String(vt);break e}}He=tt}var nn=re.document&&Ft&&(Le()||parseInt(He,10))||void 0;function Gt(i,e){if(Fe.call(this,i?i.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,i){var n=this.type=i.type,o=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:null;if(this.target=i.target||i.srcElement,this.g=e,e=i.relatedTarget){if(Re){e:{try{vn(e.nodeName);var u=!0;break e}catch{}u=!1}u||(e=null)}}else"mouseover"==n?e=i.fromElement:"mouseout"==n&&(e=i.toElement);this.relatedTarget=e,o?(this.clientX=void 0!==o.clientX?o.clientX:o.pageX,this.clientY=void 0!==o.clientY?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0):(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0),this.button=i.button,this.key=i.key||"",this.ctrlKey=i.ctrlKey,this.altKey=i.altKey,this.shiftKey=i.shiftKey,this.metaKey=i.metaKey,this.pointerId=i.pointerId||0,this.pointerType="string"==typeof i.pointerType?i.pointerType:or[i.pointerType]||"",this.state=i.state,this.i=i,i.defaultPrevented&&Gt.$.h.call(this)}}ot(Gt,Fe);var or={2:"touch",3:"pen",4:"mouse"};Gt.prototype.h=function(){Gt.$.h.call(this);var i=this.i;i.preventDefault?i.preventDefault():i.returnValue=!1};var Hn="closure_listenable_"+(1e6*Math.random()|0),Ln=0;function Pt(i,e,n,o,u){this.listener=i,this.proxy=null,this.src=e,this.type=n,this.capture=!!o,this.la=u,this.key=++Ln,this.fa=this.ia=!1}function zn(i){i.fa=!0,i.listener=null,i.proxy=null,i.src=null,i.la=null}function An(i,e,n){for(const o in i)e.call(n,i[o],o,i)}function Vn(i){const e={};for(const n in i)e[n]=i[n];return e}const Zn="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function On(i,e){let n,o;for(let u=1;u<arguments.length;u++){for(n in o=arguments[u],o)i[n]=o[n];for(let c=0;c<Zn.length;c++)n=Zn[c],Object.prototype.hasOwnProperty.call(o,n)&&(i[n]=o[n])}}function ti(i){this.src=i,this.g={},this.h=0}function Kt(i,e){var n=e.type;if(n in i.g){var c,o=i.g[n],u=Ae(o,e);(c=0<=u)&&Array.prototype.splice.call(o,u,1),c&&(zn(e),0==i.g[n].length&&(delete i.g[n],i.h--))}}function an(i,e,n,o){for(var u=0;u<i.length;++u){var c=i[u];if(!c.fa&&c.listener==e&&c.capture==!!n&&c.la==o)return u}return-1}ti.prototype.add=function(i,e,n,o,u){var c=i.toString();(i=this.g[c])||(i=this.g[c]=[],this.h++);var g=an(i,e,o,u);return-1<g?(e=i[g],n||(e.ia=!1)):((e=new Pt(e,this.src,c,!!o,u)).ia=n,i.push(e)),e};var rn="closure_lm_"+(1e6*Math.random()|0),Kn={};function Lr(i,e,n,o,u){if(o&&o.once)return Cr(i,e,n,o,u);if(Array.isArray(e)){for(var c=0;c<e.length;c++)Lr(i,e[c],n,o,u);return null}return n=br(n),i&&i[Hn]?i.O(e,n,ve(o)?!!o.capture:!!o,u):ii(i,e,n,!1,o,u)}function ii(i,e,n,o,u,c){if(!e)throw Error("Invalid event type");var g=ve(u)?!!u.capture:!!u,S=Wt(i);if(S||(i[rn]=S=new ti(i)),(n=S.add(e,n,o,g,c)).proxy)return n;if(o=function Rn(){const e=Cn;return function i(n){return e.call(i.src,i.listener,n)}}(),n.proxy=o,o.src=i,o.listener=n,i.addEventListener)xe||(u=g),void 0===u&&(u=!1),i.addEventListener(e.toString(),o,u);else if(i.attachEvent)i.attachEvent(Mi(e.toString()),o);else{if(!i.addListener||!i.removeListener)throw Error("addEventListener and attachEvent are unavailable.");i.addListener(o)}return n}function Cr(i,e,n,o,u){if(Array.isArray(e)){for(var c=0;c<e.length;c++)Cr(i,e[c],n,o,u);return null}return n=br(n),i&&i[Hn]?i.P(e,n,ve(o)?!!o.capture:!!o,u):ii(i,e,n,!0,o,u)}function is(i,e,n,o,u){if(Array.isArray(e))for(var c=0;c<e.length;c++)is(i,e[c],n,o,u);else o=ve(o)?!!o.capture:!!o,n=br(n),i&&i[Hn]?(i=i.i,(e=String(e).toString())in i.g&&-1<(n=an(c=i.g[e],n,o,u))&&(zn(c[n]),Array.prototype.splice.call(c,n,1),0==c.length&&(delete i.g[e],i.h--))):i&&(i=Wt(i))&&(e=i.g[e.toString()],i=-1,e&&(i=an(e,n,o,u)),(n=-1<i?e[i]:null)&&$t(n))}function $t(i){if("number"!=typeof i&&i&&!i.fa){var e=i.src;if(e&&e[Hn])Kt(e.i,i);else{var n=i.type,o=i.proxy;e.removeEventListener?e.removeEventListener(n,o,i.capture):e.detachEvent?e.detachEvent(Mi(n),o):e.addListener&&e.removeListener&&e.removeListener(o),(n=Wt(e))?(Kt(n,i),0==n.h&&(n.src=null,e[rn]=null)):zn(i)}}}function Mi(i){return i in Kn?Kn[i]:Kn[i]="on"+i}function Cn(i,e){if(i.fa)i=!0;else{e=new Gt(e,this);var n=i.listener,o=i.la||i.src;i.ia&&$t(i),i=n.call(o,e)}return i}function Wt(i){return(i=i[rn])instanceof ti?i:null}var Yn="__closure_events_fn_"+(1e9*Math.random()>>>0);function br(i){return"function"==typeof i?i:(i[Yn]||(i[Yn]=function(e){return i.handleEvent(e)}),i[Yn])}function Un(){ce.call(this),this.i=new ti(this),this.S=this,this.J=null}function Pn(i,e){var n,o=i.J;if(o)for(n=[];o;o=o.J)n.push(o);if(i=i.S,o=e.type||e,"string"==typeof e)e=new Fe(e,i);else if(e instanceof Fe)e.target=e.target||i;else{var u=e;On(e=new Fe(o,i),u)}if(u=!0,n)for(var c=n.length-1;0<=c;c--){var g=e.g=n[c];u=Br(g,o,!0,e)&&u}if(u=Br(g=e.g=i,o,!0,e)&&u,u=Br(g,o,!1,e)&&u,n)for(c=0;c<n.length;c++)u=Br(g=e.g=n[c],o,!1,e)&&u}function Br(i,e,n,o){if(!(e=i.i.g[String(e)]))return!0;e=e.concat();for(var u=!0,c=0;c<e.length;++c){var g=e[c];if(g&&!g.fa&&g.capture==n){var S=g.listener,x=g.la||g.src;g.ia&&Kt(i.i,g),u=!1!==S.call(x,o)&&u}}return u&&!o.defaultPrevented}ot(Un,ce),Un.prototype[Hn]=!0,Un.prototype.removeEventListener=function(i,e,n,o){is(this,i,e,n,o)},Un.prototype.N=function(){if(Un.$.N.call(this),this.i){var e,i=this.i;for(e in i.g){for(var n=i.g[e],o=0;o<n.length;o++)zn(n[o]);delete i.g[e],i.h--}}this.J=null},Un.prototype.O=function(i,e,n,o){return this.i.add(String(i),e,!1,n,o)},Un.prototype.P=function(i,e,n,o){return this.i.add(String(i),e,!0,n,o)};var Ni=re.JSON.stringify;function Sr(){var i=k;let e=null;return i.g&&(e=i.g,i.g=i.g.next,i.g||(i.h=null),e.next=null),e}var Mr=new class si{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new rr,i=>i.reset());class rr{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function Ee(i){var e=1;i=i.split(":");const n=[];for(;0<e&&i.length;)n.push(i.shift()),e--;return i.length&&n.push(i.join(":")),n}function ne(i){re.setTimeout(()=>{throw i},0)}let z,F=!1,k=new class fr{constructor(){this.h=this.g=null}add(e,n){const o=Mr.get();o.set(e,n),this.h?this.h.next=o:this.g=o,this.h=o}},oe=()=>{const i=re.Promise.resolve(void 0);z=()=>{i.then(Pe)}};var Pe=()=>{for(var i;i=Sr();){try{i.h.call(i.g)}catch(n){ne(n)}var e=Mr;e.j(i),100>e.h&&(e.h++,i.next=e.g,e.g=i)}F=!1};function st(i,e){Un.call(this),this.h=i||1,this.g=e||re,this.j=nt(this.qb,this),this.l=Date.now()}function _t(i){i.ga=!1,i.T&&(i.g.clearTimeout(i.T),i.T=null)}function Ot(i,e,n){if("function"==typeof i)n&&(i=nt(i,n));else{if(!i||"function"!=typeof i.handleEvent)throw Error("Invalid listener argument");i=nt(i.handleEvent,i)}return 2147483647<Number(e)?-1:re.setTimeout(i,e||0)}function wt(i){i.g=Ot(()=>{i.g=null,i.i&&(i.i=!1,wt(i))},i.j);const e=i.h;i.h=null,i.m.apply(null,e)}ot(st,Un),(_e=st.prototype).ga=!1,_e.T=null,_e.qb=function(){if(this.ga){var i=Date.now()-this.l;0<i&&i<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-i):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Pn(this,"tick"),this.ga&&(_t(this),this.start()))}},_e.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},_e.N=function(){st.$.N.call(this),_t(this),delete this.g};class qt extends ce{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:wt(this)}N(){super.N(),this.g&&(re.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Gn(i){ce.call(this),this.h=i,this.g={}}ot(Gn,ce);var ln=[];function oi(i,e,n,o){Array.isArray(n)||(n&&(ln[0]=n.toString()),n=ln);for(var u=0;u<n.length;u++){var c=Lr(e,n[u],o||i.handleEvent,!1,i.h||i);if(!c)break;i.g[c.key]=c}}function vs(i){An(i.g,function(e,n){this.g.hasOwnProperty(n)&&$t(e)},i),i.g={}}function as(){this.g=!0}function ar(i,e,n,o){i.info(function(){return"XMLHTTP TEXT ("+e+"): "+function ke(i,e){if(!i.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(i=0;i<n.length;i++)if(Array.isArray(n[i])){var o=n[i];if(!(2>o.length)){var u=o[1];if(Array.isArray(u)&&!(1>u.length)){var c=u[0];if("noop"!=c&&"stop"!=c&&"close"!=c)for(var g=1;g<u.length;g++)u[g]=""}}}return Ni(n)}catch{return e}}(i,n)+(o?" "+o:"")})}Gn.prototype.N=function(){Gn.$.N.call(this),vs(this)},Gn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},as.prototype.Ea=function(){this.g=!1},as.prototype.info=function(){};var Oe={},rt=null;function It(){return rt=rt||new Un}function pn(i){Fe.call(this,Oe.Ta,i)}function Xt(i){const e=It();Pn(e,new pn(e))}function gn(i,e){Fe.call(this,Oe.STAT_EVENT,i),this.stat=e}function xn(i){const e=It();Pn(e,new gn(e,i))}function pr(i,e){Fe.call(this,Oe.Ua,i),this.size=e}function ui(i,e){if("function"!=typeof i)throw Error("Fn must not be null and must be a function");return re.setTimeout(function(){i()},e)}Oe.Ta="serverreachability",ot(pn,Fe),Oe.STAT_EVENT="statevent",ot(gn,Fe),Oe.Ua="timingevent",ot(pr,Fe);var Es={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Po={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Xn(){}function ki(){}Xn.prototype.h=null;var _o,ls={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Zs(){Fe.call(this,"d")}function Qs(){Fe.call(this,"c")}function qr(){}function ur(i,e,n,o){this.l=i,this.j=e,this.m=n,this.W=o||1,this.U=new Gn(this),this.P=Ys,this.V=new st(i=Te?125:void 0),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new Us}function Us(){this.i=null,this.g="",this.h=!1}ot(Zs,Fe),ot(Qs,Fe),ot(qr,Xn),qr.prototype.g=function(){return new XMLHttpRequest},qr.prototype.i=function(){return{}},_o=new qr;var Ys=45e3,yi={},Js={};function Rs(i,e,n){i.L=1,i.A=cs(vi(e)),i.u=n,i.S=!0,Ps(i,null)}function Ps(i,e){i.G=Date.now(),yo(i),i.B=vi(i.A);var n=i.B,o=i.W;Array.isArray(o)||(o=[String(o)]),fn(n.i,"t",o),i.o=0,n=i.l.J,i.h=new Us,i.g=Ar(i.l,n?e:null,!i.u),0<i.O&&(i.M=new qt(nt(i.Pa,i,i.g),i.O)),oi(i.U,i.g,"readystatechange",i.nb),e=i.I?Vn(i.I):{},i.u?(i.v||(i.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",i.g.ha(i.B,i.v,i.u,e)):(i.v="GET",i.g.ha(i.B,i.v,null,e)),Xt(),function Ci(i,e,n,o,u,c){i.info(function(){if(i.g)if(c)for(var g="",S=c.split("&"),x=0;x<S.length;x++){var G=S[x].split("=");if(1<G.length){var ee=G[0];G=G[1];var le=ee.split("_");g=2<=le.length&&"type"==le[1]?g+(ee+"=")+G+"&":g+(ee+"=redacted&")}}else g=null;else g=c;return"XMLHTTP REQ ("+o+") [attempt "+u+"]: "+e+"\n"+n+"\n"+g})}(i.j,i.v,i.B,i.m,i.W,i.u)}function Fi(i){return!!i.g&&"GET"==i.v&&2!=i.L&&i.l.Ha}function Is(i,e,n){let u,o=!0;for(;!i.J&&i.o<n.length;){if(u=Jo(i,n),u==Js){4==e&&(i.s=4,xn(14),o=!1),ar(i.j,i.m,null,"[Incomplete Response]");break}if(u==yi){i.s=4,xn(15),ar(i.j,i.m,n,"[Invalid Chunk]"),o=!1;break}ar(i.j,i.m,u,null),vo(i,u)}Fi(i)&&0!=i.o&&(i.h.g=i.h.g.slice(i.o),i.o=0),4!=e||0!=n.length||i.h.h||(i.s=1,xn(16),o=!1),i.i=i.i&&o,o?0<n.length&&!i.ba&&(i.ba=!0,(e=i.l).g==i&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),lr(e),e.M=!0,xn(11))):(ar(i.j,i.m,n,"[Invalid Chunked Response]"),Ms(i),ws(i))}function Jo(i,e){var n=i.o,o=e.indexOf("\n",n);return-1==o?Js:(n=Number(e.substring(n,o)),isNaN(n)?yi:(o+=1)+n>e.length?Js:(e=e.slice(o,o+n),i.o=o+n,e))}function yo(i){i.Y=Date.now()+i.P,ya(i,i.P)}function ya(i,e){if(null!=i.C)throw Error("WatchDog timer not null");i.C=ui(nt(i.lb,i),e)}function Bs(i){i.C&&(re.clearTimeout(i.C),i.C=null)}function ws(i){0==i.l.H||i.J||ci(i.l,i)}function Ms(i){Bs(i);var e=i.M;e&&"function"==typeof e.sa&&e.sa(),i.M=null,_t(i.V),vs(i.U),i.g&&(e=i.g,i.g=null,e.abort(),e.sa())}function vo(i,e){try{var n=i.l;if(0!=n.H&&(n.g==i||Ei(n.i,i)))if(!i.K&&Ei(n.i,i)&&3==n.H){try{var o=n.Ja.g.parse(e)}catch{o=null}if(Array.isArray(o)&&3==o.length){var u=o;if(0==u[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<i.G))break e;er(n),b(n)}ir(n),xn(18)}}else n.Fa=u[1],0<n.Fa-n.V&&37500>u[2]&&n.G&&0==n.A&&!n.v&&(n.v=ui(nt(n.ib,n),6e3));if(1>=Or(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else As(n,11)}else if((i.K||n.g==i)&&er(n),!Tt(e))for(u=n.Ja.g.parse(e),e=0;e<u.length;e++){let G=u[e];if(n.V=G[0],G=G[1],2==n.H)if("c"==G[0]){n.K=G[1],n.pa=G[2];const ee=G[3];null!=ee&&(n.ra=ee,n.l.info("VER="+n.ra));const le=G[4];null!=le&&(n.Ga=le,n.l.info("SVER="+n.Ga));const Ce=G[5];null!=Ce&&"number"==typeof Ce&&0<Ce&&(n.L=o=1.5*Ce,n.l.info("backChannelRequestTimeoutMs_="+o)),o=n;const Ge=i.g;if(Ge){const Rt=Ge.g?Ge.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Rt){var c=o.i;c.g||-1==Rt.indexOf("spdy")&&-1==Rt.indexOf("quic")&&-1==Rt.indexOf("h2")||(c.j=c.l,c.g=new Set,c.h&&(No(c,c.h),c.h=null))}if(o.F){const Ht=Ge.g?Ge.g.getResponseHeader("X-HTTP-Session-Id"):null;Ht&&(o.Da=Ht,Bn(o.I,o.F,Ht))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-i.G,n.l.info("Handshake RTT: "+n.S+"ms"));var g=i;if((o=n).wa=Ri(o,o.J?o.pa:null,o.Y),g.K){hs(o.i,g);var S=g,x=o.L;x&&S.setTimeout(x),S.C&&(Bs(S),yo(S)),o.g=g}else un(o);0<n.j.length&&C(n)}else"stop"!=G[0]&&"close"!=G[0]||As(n,7);else 3==n.H&&("stop"==G[0]||"close"==G[0]?"stop"==G[0]?As(n,7):ae(n):"noop"!=G[0]&&n.h&&n.h.Aa(G),n.A=0)}Xt()}catch{}}function js(i,e){if(i.forEach&&"function"==typeof i.forEach)i.forEach(e,void 0);else if(se(i)||"string"==typeof i)Array.prototype.forEach.call(i,e,void 0);else for(var n=function Ns(i){if(i.ta&&"function"==typeof i.ta)return i.ta();if(!i.Z||"function"!=typeof i.Z){if(typeof Map<"u"&&i instanceof Map)return Array.from(i.keys());if(!(typeof Set<"u"&&i instanceof Set)){if(se(i)||"string"==typeof i){var e=[];i=i.length;for(var n=0;n<i;n++)e.push(n);return e}e=[],n=0;for(const o in i)e[n++]=o;return e}}}(i),o=function Mo(i){if(i.Z&&"function"==typeof i.Z)return i.Z();if(typeof Map<"u"&&i instanceof Map||typeof Set<"u"&&i instanceof Set)return Array.from(i.values());if("string"==typeof i)return i.split("");if(se(i)){for(var e=[],n=i.length,o=0;o<n;o++)e.push(i[o]);return e}for(o in e=[],n=0,i)e[n++]=i[o];return e}(i),u=o.length,c=0;c<u;c++)e.call(void 0,o[c],n&&n[c],i)}(_e=ur.prototype).setTimeout=function(i){this.P=i},_e.nb=function(i){i=i.target;const e=this.M;e&&3==$i(i)?e.l():this.Pa(i)},_e.Pa=function(i){try{if(i==this.g)e:{const ee=$i(this.g);var e=this.g.Ia();if(this.g.da(),!(3>ee)&&(3!=ee||Te||this.g&&(this.h.h||this.g.ja()||Si(this.g)))){this.J||4!=ee||7==e||Xt(),Bs(this);var n=this.g.da();this.ca=n;t:if(Fi(this)){var o=Si(this.g);i="";var u=o.length,c=4==$i(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Ms(this),ws(this);var g="";break t}this.h.i=new re.TextDecoder}for(e=0;e<u;e++)this.h.h=!0,i+=this.h.i.decode(o[e],{stream:c&&e==u-1});o.length=0,this.h.g+=i,this.o=0,g=this.h.g}else g=this.g.ja();if(this.i=200==n,function Jr(i,e,n,o,u,c,g){i.info(function(){return"XMLHTTP RESP ("+o+") [ attempt "+u+"]: "+e+"\n"+n+"\n"+c+" "+g})}(this.j,this.v,this.B,this.m,this.W,ee,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var S,x=this.g;if((S=x.g?x.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Tt(S)){var G=S;break t}}G=null}if(!(n=G)){this.i=!1,this.s=3,xn(12),Ms(this),ws(this);break e}ar(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,vo(this,n)}this.S?(Is(this,ee,g),Te&&this.i&&3==ee&&(oi(this.U,this.V,"tick",this.mb),this.V.start())):(ar(this.j,this.m,g,null),vo(this,g)),4==ee&&Ms(this),this.i&&!this.J&&(4==ee?ci(this.l,this):(this.i=!1,yo(this)))}else(function $a(i){const e={};i=(i.g&&2<=$i(i)&&i.g.getAllResponseHeaders()||"").split("\r\n");for(let o=0;o<i.length;o++){if(Tt(i[o]))continue;var n=Ee(i[o]);const u=n[0];if("string"!=typeof(n=n[1]))continue;n=n.trim();const c=e[u]||[];e[u]=c,c.push(n)}!function Ir(i,e){for(const n in i)e.call(void 0,i[n],n,i)}(e,function(o){return o.join(", ")})})(this.g),400==n&&0<g.indexOf("Unknown SID")?(this.s=3,xn(12)):(this.s=0,xn(13)),Ms(this),ws(this)}}}catch{}},_e.mb=function(){if(this.g){var i=$i(this.g),e=this.g.ja();this.o<e.length&&(Bs(this),Is(this,i,e),this.i&&4!=i&&yo(this))}},_e.cancel=function(){this.J=!0,Ms(this)},_e.lb=function(){this.C=null;const i=Date.now();0<=i-this.Y?(function ai(i,e){i.info(function(){return"TIMEOUT: "+e})}(this.j,this.B),2!=this.L&&(Xt(),xn(17)),Ms(this),this.s=2,ws(this)):ya(this,this.Y-i)};var Wn=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Nr(i){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,i instanceof Nr){this.h=i.h,li(this,i.j),this.s=i.s,this.g=i.g,lo(this,i.m),this.l=i.l;var e=i.i,n=new Zi;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),Xs(this,n),this.o=i.o}else i&&(e=String(i).match(Wn))?(this.h=!1,li(this,e[1]||"",!0),this.s=ds(e[2]||""),this.g=ds(e[3]||"",!0),lo(this,e[4]),this.l=ds(e[5]||"",!0),Xs(this,e[6]||"",!0),this.o=ds(e[7]||"")):(this.h=!1,this.i=new Zi(null,this.h))}function vi(i){return new Nr(i)}function li(i,e,n){i.j=n?ds(e,!0):e,i.j&&(i.j=i.j.replace(/:$/,""))}function lo(i,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);i.m=e}else i.m=null}function Xs(i,e,n){e instanceof Zi?(i.i=e,function Os(i,e){e&&!i.j&&(Jn(i),i.i=null,i.g.forEach(function(n,o){var u=o.toLowerCase();o!=u&&(gi(this,o),fn(this,u,n))},i)),i.j=e}(i.i,i.h)):(n||(e=vr(e,Ts)),i.i=new Zi(e,i.h))}function Bn(i,e,n){i.i.set(e,n)}function cs(i){return Bn(i,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),i}function ds(i,e){return i?e?decodeURI(i.replace(/%25/g,"%2525")):decodeURIComponent(i):""}function vr(i,e,n){return"string"==typeof i?(i=encodeURI(i).replace(e,xt),n&&(i=i.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),i):null}function xt(i){return"%"+((i=i.charCodeAt(0))>>4&15).toString(16)+(15&i).toString(16)}Nr.prototype.toString=function(){var i=[],e=this.j;e&&i.push(vr(e,dn,!0),":");var n=this.g;return(n||"file"==e)&&(i.push("//"),(e=this.s)&&i.push(vr(e,dn,!0),"@"),i.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&i.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&i.push("/"),i.push(vr(n,"/"==n.charAt(0)?Gi:Er,!0))),(n=this.i.toString())&&i.push("?",n),(n=this.o)&&i.push("#",vr(n,pi)),i.join("")};var dn=/[#\/\?@]/g,Er=/[#\?:]/g,Gi=/[#\?]/g,Ts=/[#\?@]/g,pi=/#/g;function Zi(i,e){this.h=this.g=null,this.i=i||null,this.j=!!e}function Jn(i){i.g||(i.g=new Map,i.h=0,i.i&&function Li(i,e){if(i){i=i.split("&");for(var n=0;n<i.length;n++){var o=i[n].indexOf("="),u=null;if(0<=o){var c=i[n].substring(0,o);u=i[n].substring(o+1)}else c=i[n];e(c,u?decodeURIComponent(u.replace(/\+/g," ")):"")}}}(i.i,function(e,n){i.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function gi(i,e){Jn(i),e=bi(i,e),i.g.has(e)&&(i.i=null,i.h-=i.g.get(e).length,i.g.delete(e))}function ss(i,e){return Jn(i),e=bi(i,e),i.g.has(e)}function fn(i,e,n){gi(i,e),0<n.length&&(i.i=null,i.g.set(bi(i,e),Ie(n)),i.h+=n.length)}function bi(i,e){return e=String(e),i.j&&(e=e.toLowerCase()),e}function Vr(i){this.l=i||wr,i=re.PerformanceNavigationTiming?0<(i=re.performance.getEntriesByType("navigation")).length&&("hq"==i[0].nextHopProtocol||"h2"==i[0].nextHopProtocol):!!(re.g&&re.g.Ka&&re.g.Ka()&&re.g.Ka().dc),this.j=i?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(_e=Zi.prototype).add=function(i,e){Jn(this),this.i=null,i=bi(this,i);var n=this.g.get(i);return n||this.g.set(i,n=[]),n.push(e),this.h+=1,this},_e.forEach=function(i,e){Jn(this),this.g.forEach(function(n,o){n.forEach(function(u){i.call(e,u,o,this)},this)},this)},_e.ta=function(){Jn(this);const i=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let o=0;o<e.length;o++){const u=i[o];for(let c=0;c<u.length;c++)n.push(e[o])}return n},_e.Z=function(i){Jn(this);let e=[];if("string"==typeof i)ss(this,i)&&(e=e.concat(this.g.get(bi(this,i))));else{i=Array.from(this.g.values());for(let n=0;n<i.length;n++)e=e.concat(i[n])}return e},_e.set=function(i,e){return Jn(this),this.i=null,ss(this,i=bi(this,i))&&(this.h-=this.g.get(i).length),this.g.set(i,[e]),this.h+=1,this},_e.get=function(i,e){return i&&0<(i=this.Z(i)).length?String(i[0]):e},_e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const i=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var o=e[n];const c=encodeURIComponent(String(o)),g=this.Z(o);for(o=0;o<g.length;o++){var u=c;""!==g[o]&&(u+="="+encodeURIComponent(String(g[o]))),i.push(u)}}return this.i=i.join("&")};var wr=10;function gr(i){return!!i.h||!!i.g&&i.g.size>=i.j}function Or(i){return i.h?1:i.g?i.g.size:0}function Ei(i,e){return i.h?i.h==e:!!i.g&&i.g.has(e)}function No(i,e){i.g?i.g.add(e):i.h=e}function hs(i,e){i.h&&i.h==e?i.h=null:i.g&&i.g.has(e)&&i.g.delete(e)}function Vi(i){if(null!=i.h)return i.i.concat(i.h.F);if(null!=i.g&&0!==i.g.size){let e=i.i;for(const n of i.g.values())e=e.concat(n.F);return e}return Ie(i.i)}Vr.prototype.cancel=function(){if(this.i=Vi(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const i of this.g.values())i.cancel();this.g.clear()}};var Ii=class{stringify(i){return re.JSON.stringify(i,void 0)}parse(i){return re.JSON.parse(i,void 0)}};function $s(){this.g=new Ii}function Qn(i,e,n){const o=n||"";try{js(i,function(u,c){let g=u;ve(u)&&(g=Ni(u)),e.push(o+c+"="+encodeURIComponent(g))})}catch(u){throw e.push(o+"type="+encodeURIComponent("_badmap")),u}}function Qi(i,e,n,o,u){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,u(o)}catch{}}function eo(i){this.l=i.ec||null,this.j=i.ob||!1}function Ui(i,e){Un.call(this),this.F=i,this.u=e,this.m=void 0,this.readyState=mi,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}ot(eo,Xn),eo.prototype.g=function(){return new Ui(this.l,this.j)},eo.prototype.i=function(i){return function(){return i}}({}),ot(Ui,Un);var mi=0;function Oo(i){i.j.read().then(i.Xa.bind(i)).catch(i.ka.bind(i))}function fs(i){i.readyState=4,i.l=null,i.j=null,i.A=null,Tr(i)}function Tr(i){i.onreadystatechange&&i.onreadystatechange.call(i)}(_e=Ui.prototype).open=function(i,e){if(this.readyState!=mi)throw this.abort(),Error("Error reopening a connection");this.C=i,this.B=e,this.readyState=1,Tr(this)},_e.send=function(i){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};i&&(e.body=i),(this.F||re).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},_e.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,fs(this)),this.readyState=mi},_e.$a=function(i){if(this.g&&(this.l=i,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=i.headers,this.readyState=2,Tr(this)),this.g&&(this.readyState=3,Tr(this),this.g)))if("arraybuffer"===this.responseType)i.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof re.ReadableStream<"u"&&"body"in i){if(this.j=i.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Oo(this)}else i.text().then(this.Za.bind(this),this.ka.bind(this))},_e.Xa=function(i){if(this.g){if(this.u&&i.value)this.response.push(i.value);else if(!this.u){var e=i.value?i.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!i.done}))&&(this.response=this.responseText+=e)}i.done?fs(this):Tr(this),3==this.readyState&&Oo(this)}},_e.Za=function(i){this.g&&(this.response=this.responseText=i,fs(this))},_e.Ya=function(i){this.g&&(this.response=i,fs(this))},_e.ka=function(){this.g&&fs(this)},_e.setRequestHeader=function(i,e){this.v.append(i,e)},_e.getResponseHeader=function(i){return this.h&&this.h.get(i.toLowerCase())||""},_e.getAllResponseHeaders=function(){if(!this.h)return"";const i=[],e=this.h.entries();for(var n=e.next();!n.done;)i.push((n=n.value)[0]+": "+n[1]),n=e.next();return i.join("\r\n")},Object.defineProperty(Ui.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(i){this.m=i?"include":"same-origin"}});var Eo=re.JSON.parse;function _n(i){Un.call(this),this.headers=new Map,this.u=i||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=Bi,this.L=this.M=!1}ot(_n,Un);var Bi="",ps=/^https?$/i,xo=["POST","PUT"];function ji(i,e){i.h=!1,i.g&&(i.l=!0,i.g.abort(),i.l=!1),i.j=e,i.m=5,co(i),Zo(i)}function co(i){i.F||(i.F=!0,Pn(i,"complete"),Pn(i,"error"))}function Ds(i){if(i.h&&typeof Ne<"u"&&(!i.C[1]||4!=$i(i)||2!=i.da()))if(i.v&&4==$i(i))Ot(i.La,0,i);else if(Pn(i,"readystatechange"),4==$i(i)){i.h=!1;try{const g=i.da();e:switch(g){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var o;if(o=0===g){var u=String(i.I).match(Wn)[1]||null;!u&&re.self&&re.self.location&&(u=re.self.location.protocol.slice(0,-1)),o=!ps.test(u?u.toLowerCase():"")}n=o}if(n)Pn(i,"complete"),Pn(i,"success");else{i.m=6;try{var c=2<$i(i)?i.g.statusText:""}catch{c=""}i.j=c+" ["+i.da()+"]",co(i)}}finally{Zo(i)}}}function Zo(i,e){if(i.g){ja(i);const n=i.g,o=i.C[0]?()=>{}:null;i.g=null,i.C=null,e||Pn(i,"ready");try{n.onreadystatechange=o}catch{}}}function ja(i){i.g&&i.L&&(i.g.ontimeout=null),i.A&&(re.clearTimeout(i.A),i.A=null)}function $i(i){return i.g?i.g.readyState:0}function Si(i){try{if(!i.g)return null;if("response"in i.g)return i.g.response;switch(i.K){case Bi:case"text":return i.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in i.g)return i.g.mozResponseArrayBuffer}return null}catch{return null}}function iu(i){let e="";return An(i,function(n,o){e+=o,e+=":",e+=n,e+="\r\n"}),e}function ko(i,e,n){e:{for(o in n){var o=!1;break e}o=!0}o||(n=iu(n),"string"==typeof i?null!=n&&encodeURIComponent(String(n)):Bn(i,e,n))}function j(i,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[i]||e}function H(i){this.Ga=0,this.j=[],this.l=new as,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=j("failFast",!1,i),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=j("baseRetryDelayMs",5e3,i),this.hb=j("retryDelaySeedMs",1e4,i),this.eb=j("forwardChannelMaxRetries",2,i),this.xa=j("forwardChannelRequestTimeoutMs",2e4,i),this.va=i&&i.xmlHttpFactory||void 0,this.Ha=i&&i.useFetchStreams||!1,this.L=void 0,this.J=i&&i.supportsCrossDomainXhr||!1,this.K="",this.i=new Vr(i&&i.concurrentRequestLimit),this.Ja=new $s,this.P=i&&i.fastHandshake||!1,this.O=i&&i.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=i&&i.bc||!1,i&&i.Ea&&this.l.Ea(),i&&i.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&i&&i.detectBufferingProxy||!1,this.qa=void 0,i&&i.longPollingTimeout&&0<i.longPollingTimeout&&(this.qa=i.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function ae(i){if(O(i),3==i.H){var e=i.W++,n=vi(i.I);if(Bn(n,"SID",i.K),Bn(n,"RID",e),Bn(n,"TYPE","terminate"),Xe(i,n),(e=new ur(i,i.l,e)).L=2,e.A=cs(vi(n)),n=!1,re.navigator&&re.navigator.sendBeacon)try{n=re.navigator.sendBeacon(e.A.toString(),"")}catch{}!n&&re.Image&&((new Image).src=e.A,n=!0),n||(e.g=Ar(e.l,null),e.g.ha(e.A)),e.G=Date.now(),yo(e)}jr(i)}function b(i){i.g&&(lr(i),i.g.cancel(),i.g=null)}function O(i){b(i),i.u&&(re.clearTimeout(i.u),i.u=null),er(i),i.i.cancel(),i.m&&("number"==typeof i.m&&re.clearTimeout(i.m),i.m=null)}function C(i){if(!gr(i.i)&&!i.m){i.m=!0;var e=i.Na;z||oe(),F||(z(),F=!0),k.add(e,i),i.C=0}}function de(i,e){var n;n=e?e.m:i.W++;const o=vi(i.I);Bn(o,"SID",i.K),Bn(o,"RID",n),Bn(o,"AID",i.V),Xe(i,o),i.o&&i.s&&ko(o,i.o,i.s),n=new ur(i,i.l,n,i.C+1),null===i.o&&(n.I=i.s),e&&(i.j=e.F.concat(i.j)),e=ht(i,n,1e3),n.setTimeout(Math.round(.5*i.xa)+Math.round(.5*i.xa*Math.random())),No(i.i,n),Rs(n,o,e)}function Xe(i,e){i.na&&An(i.na,function(n,o){Bn(e,o,n)}),i.h&&js({},function(n,o){Bn(e,o,n)})}function ht(i,e,n){n=Math.min(i.j.length,n);var o=i.h?nt(i.h.Va,i.h,i):null;e:{var u=i.j;let c=-1;for(;;){const g=["count="+n];-1==c?0<n?(c=u[0].g,g.push("ofs="+c)):c=0:g.push("ofs="+c);let S=!0;for(let x=0;x<n;x++){let G=u[x].g;const ee=u[x].map;if(G-=c,0>G)c=Math.max(0,u[x].g-100),S=!1;else try{Qn(ee,g,"req"+G+"_")}catch{o&&o(ee)}}if(S){o=g.join("&");break e}}}return i=i.j.splice(0,n),e.F=i,o}function un(i){if(!i.g&&!i.u){i.ba=1;var e=i.Ma;z||oe(),F||(z(),F=!0),k.add(e,i),i.A=0}}function ir(i){return!(i.g||i.u||3<=i.A||(i.ba++,i.u=ui(nt(i.Ma,i),Xr(i,i.A)),i.A++,0))}function lr(i){null!=i.B&&(re.clearTimeout(i.B),i.B=null)}function Dr(i){i.g=new ur(i,i.l,"rpc",i.ba),null===i.o&&(i.g.I=i.s),i.g.O=0;var e=vi(i.wa);Bn(e,"RID","rpc"),Bn(e,"SID",i.K),Bn(e,"AID",i.V),Bn(e,"CI",i.G?"0":"1"),!i.G&&i.qa&&Bn(e,"TO",i.qa),Bn(e,"TYPE","xmlhttp"),Xe(i,e),i.o&&i.s&&ko(e,i.o,i.s),i.L&&i.g.setTimeout(i.L);var n=i.g;i=i.pa,n.L=1,n.A=cs(vi(e)),n.u=null,n.S=!0,Ps(n,i)}function er(i){null!=i.v&&(re.clearTimeout(i.v),i.v=null)}function ci(i,e){var n=null;if(i.g==e){er(i),lr(i),i.g=null;var o=2}else{if(!Ei(i.i,e))return;n=e.F,hs(i.i,e),o=1}if(0!=i.H)if(e.i)if(1==o){n=e.u?e.u.length:0,e=Date.now()-e.G;var u=i.C;Pn(o=It(),new pr(o,n)),C(i)}else un(i);else if(3==(u=e.s)||0==u&&0<e.ca||!(1==o&&function K(i,e){return!(Or(i.i)>=i.i.j-(i.m?1:0)||(i.m?(i.j=e.F.concat(i.j),0):1==i.H||2==i.H||i.C>=(i.cb?0:i.eb)||(i.m=ui(nt(i.Na,i,e),Xr(i,i.C)),i.C++,0)))}(i,e)||2==o&&ir(i)))switch(n&&0<n.length&&(e=i.i,e.i=e.i.concat(n)),u){case 1:As(i,5);break;case 4:As(i,10);break;case 3:As(i,6);break;default:As(i,2)}}function Xr(i,e){let n=i.ab+Math.floor(Math.random()*i.hb);return i.isActive()||(n*=2),n*e}function As(i,e){if(i.l.info("Error code "+e),2==e){var n=null;i.h&&(n=null);var o=nt(i.pb,i);n||(n=new Nr("//www.google.com/images/cleardot.gif"),re.location&&"http"==re.location.protocol||li(n,"https"),cs(n)),function va(i,e){const n=new as;if(re.Image){const o=new Image;o.onload=Lt(Qi,n,o,"TestLoadImage: loaded",!0,e),o.onerror=Lt(Qi,n,o,"TestLoadImage: error",!1,e),o.onabort=Lt(Qi,n,o,"TestLoadImage: abort",!1,e),o.ontimeout=Lt(Qi,n,o,"TestLoadImage: timeout",!1,e),re.setTimeout(function(){o.ontimeout&&o.ontimeout()},1e4),o.src=i}else e(!1)}(n.toString(),o)}else xn(2);i.H=0,i.h&&i.h.za(e),jr(i),O(i)}function jr(i){if(i.H=0,i.ma=[],i.h){const e=Vi(i.i);(0!=e.length||0!=i.j.length)&&(et(i.ma,e),et(i.ma,i.j),i.i.i.length=0,Ie(i.j),i.j.length=0),i.h.ya()}}function Ri(i,e,n){var o=n instanceof Nr?vi(n):new Nr(n);if(""!=o.g)e&&(o.g=e+"."+o.g),lo(o,o.m);else{var u=re.location;o=u.protocol,e=e?e+"."+u.hostname:u.hostname,u=+u.port;var c=new Nr(null);o&&li(c,o),e&&(c.g=e),u&&lo(c,u),n&&(c.l=n),o=c}return e=i.Da,(n=i.F)&&e&&Bn(o,n,e),Bn(o,"VER",i.ra),Xe(i,o),o}function Ar(i,e,n){if(e&&!i.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new _n(i.Ha&&!i.va?new eo({ob:n}):i.va)).Oa(i.J),e}function to(){}function gs(){if(Ft&&!(10<=Number(nn)))throw Error("Environmental error: no available transport.")}function di(i,e){Un.call(this),this.g=new H(e),this.l=i,this.h=e&&e.messageUrlParams||null,i=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(i?i["X-Client-Protocol"]="webchannel":i={"X-Client-Protocol":"webchannel"}),this.g.s=i,i=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(i?i["X-WebChannel-Content-Type"]=e.messageContentType:i={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(i?i["X-WebChannel-Client-Profile"]=e.Ca:i={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=i,(i=e&&e.cc)&&!Tt(i)&&(this.g.o=i),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Tt(e)&&(this.g.F=e,null!==(i=this.h)&&e in i&&e in(i=this.h)&&delete i[e]),this.j=new Pi(this)}function no(i){Zs.call(this),i.__headers__&&(this.headers=i.__headers__,this.statusCode=i.__status__,delete i.__headers__,delete i.__status__);var e=i.__sm__;if(e){e:{for(const n in e){i=n;break e}i=void 0}(this.i=i)&&(i=this.i,e=null!==e&&i in e?e[i]:void 0),this.data=e}else this.data=i}function Cs(){Qs.call(this),this.status=1}function Pi(i){this.g=i}function Hs(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function Ia(i,e,n){n||(n=0);var o=Array(16);if("string"==typeof e)for(var u=0;16>u;++u)o[u]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(u=0;16>u;++u)o[u]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;var c=i.g[3],g=(e=i.g[0])+(c^(n=i.g[1])&((u=i.g[2])^c))+o[0]+3614090360&4294967295;g=(n=(u=(c=(e=(n=(u=(c=(e=(n=(u=(c=(e=(n=(u=(c=(e=(n=(u=(c=(e=(n=(u=(c=(e=(n=(u=(c=(e=(n=(u=(c=(e=(n=(u=(c=(e=(n=(u=(c=(e=(n=(u=(c=(e=(n=(u=(c=(e=(n=(u=(c=(e=(n=(u=(c=(e=(n=(u=(c=(e=n+(g<<7&4294967295|g>>>25))+((g=c+(u^e&(n^u))+o[1]+3905402710&4294967295)<<12&4294967295|g>>>20))+((g=u+(n^c&(e^n))+o[2]+606105819&4294967295)<<17&4294967295|g>>>15))+((g=n+(e^u&(c^e))+o[3]+3250441966&4294967295)<<22&4294967295|g>>>10))+((g=e+(c^n&(u^c))+o[4]+4118548399&4294967295)<<7&4294967295|g>>>25))+((g=c+(u^e&(n^u))+o[5]+1200080426&4294967295)<<12&4294967295|g>>>20))+((g=u+(n^c&(e^n))+o[6]+2821735955&4294967295)<<17&4294967295|g>>>15))+((g=n+(e^u&(c^e))+o[7]+4249261313&4294967295)<<22&4294967295|g>>>10))+((g=e+(c^n&(u^c))+o[8]+1770035416&4294967295)<<7&4294967295|g>>>25))+((g=c+(u^e&(n^u))+o[9]+2336552879&4294967295)<<12&4294967295|g>>>20))+((g=u+(n^c&(e^n))+o[10]+4294925233&4294967295)<<17&4294967295|g>>>15))+((g=n+(e^u&(c^e))+o[11]+2304563134&4294967295)<<22&4294967295|g>>>10))+((g=e+(c^n&(u^c))+o[12]+1804603682&4294967295)<<7&4294967295|g>>>25))+((g=c+(u^e&(n^u))+o[13]+4254626195&4294967295)<<12&4294967295|g>>>20))+((g=u+(n^c&(e^n))+o[14]+2792965006&4294967295)<<17&4294967295|g>>>15))+((g=n+(e^u&(c^e))+o[15]+1236535329&4294967295)<<22&4294967295|g>>>10))+((g=e+(u^c&(n^u))+o[1]+4129170786&4294967295)<<5&4294967295|g>>>27))+((g=c+(n^u&(e^n))+o[6]+3225465664&4294967295)<<9&4294967295|g>>>23))+((g=u+(e^n&(c^e))+o[11]+643717713&4294967295)<<14&4294967295|g>>>18))+((g=n+(c^e&(u^c))+o[0]+3921069994&4294967295)<<20&4294967295|g>>>12))+((g=e+(u^c&(n^u))+o[5]+3593408605&4294967295)<<5&4294967295|g>>>27))+((g=c+(n^u&(e^n))+o[10]+38016083&4294967295)<<9&4294967295|g>>>23))+((g=u+(e^n&(c^e))+o[15]+3634488961&4294967295)<<14&4294967295|g>>>18))+((g=n+(c^e&(u^c))+o[4]+3889429448&4294967295)<<20&4294967295|g>>>12))+((g=e+(u^c&(n^u))+o[9]+568446438&4294967295)<<5&4294967295|g>>>27))+((g=c+(n^u&(e^n))+o[14]+3275163606&4294967295)<<9&4294967295|g>>>23))+((g=u+(e^n&(c^e))+o[3]+4107603335&4294967295)<<14&4294967295|g>>>18))+((g=n+(c^e&(u^c))+o[8]+1163531501&4294967295)<<20&4294967295|g>>>12))+((g=e+(u^c&(n^u))+o[13]+2850285829&4294967295)<<5&4294967295|g>>>27))+((g=c+(n^u&(e^n))+o[2]+4243563512&4294967295)<<9&4294967295|g>>>23))+((g=u+(e^n&(c^e))+o[7]+1735328473&4294967295)<<14&4294967295|g>>>18))+((g=n+(c^e&(u^c))+o[12]+2368359562&4294967295)<<20&4294967295|g>>>12))+((g=e+(n^u^c)+o[5]+4294588738&4294967295)<<4&4294967295|g>>>28))+((g=c+(e^n^u)+o[8]+2272392833&4294967295)<<11&4294967295|g>>>21))+((g=u+(c^e^n)+o[11]+1839030562&4294967295)<<16&4294967295|g>>>16))+((g=n+(u^c^e)+o[14]+4259657740&4294967295)<<23&4294967295|g>>>9))+((g=e+(n^u^c)+o[1]+2763975236&4294967295)<<4&4294967295|g>>>28))+((g=c+(e^n^u)+o[4]+1272893353&4294967295)<<11&4294967295|g>>>21))+((g=u+(c^e^n)+o[7]+4139469664&4294967295)<<16&4294967295|g>>>16))+((g=n+(u^c^e)+o[10]+3200236656&4294967295)<<23&4294967295|g>>>9))+((g=e+(n^u^c)+o[13]+681279174&4294967295)<<4&4294967295|g>>>28))+((g=c+(e^n^u)+o[0]+3936430074&4294967295)<<11&4294967295|g>>>21))+((g=u+(c^e^n)+o[3]+3572445317&4294967295)<<16&4294967295|g>>>16))+((g=n+(u^c^e)+o[6]+76029189&4294967295)<<23&4294967295|g>>>9))+((g=e+(n^u^c)+o[9]+3654602809&4294967295)<<4&4294967295|g>>>28))+((g=c+(e^n^u)+o[12]+3873151461&4294967295)<<11&4294967295|g>>>21))+((g=u+(c^e^n)+o[15]+530742520&4294967295)<<16&4294967295|g>>>16))+((g=n+(u^c^e)+o[2]+3299628645&4294967295)<<23&4294967295|g>>>9))+((g=e+(u^(n|~c))+o[0]+4096336452&4294967295)<<6&4294967295|g>>>26))+((g=c+(n^(e|~u))+o[7]+1126891415&4294967295)<<10&4294967295|g>>>22))+((g=u+(e^(c|~n))+o[14]+2878612391&4294967295)<<15&4294967295|g>>>17))+((g=n+(c^(u|~e))+o[5]+4237533241&4294967295)<<21&4294967295|g>>>11))+((g=e+(u^(n|~c))+o[12]+1700485571&4294967295)<<6&4294967295|g>>>26))+((g=c+(n^(e|~u))+o[3]+2399980690&4294967295)<<10&4294967295|g>>>22))+((g=u+(e^(c|~n))+o[10]+4293915773&4294967295)<<15&4294967295|g>>>17))+((g=n+(c^(u|~e))+o[1]+2240044497&4294967295)<<21&4294967295|g>>>11))+((g=e+(u^(n|~c))+o[8]+1873313359&4294967295)<<6&4294967295|g>>>26))+((g=c+(n^(e|~u))+o[15]+4264355552&4294967295)<<10&4294967295|g>>>22))+((g=u+(e^(c|~n))+o[6]+2734768916&4294967295)<<15&4294967295|g>>>17))+((g=n+(c^(u|~e))+o[13]+1309151649&4294967295)<<21&4294967295|g>>>11))+((c=(e=n+((g=e+(u^(n|~c))+o[4]+4149444226&4294967295)<<6&4294967295|g>>>26))+((g=c+(n^(e|~u))+o[11]+3174756917&4294967295)<<10&4294967295|g>>>22))^((u=c+((g=u+(e^(c|~n))+o[2]+718787259&4294967295)<<15&4294967295|g>>>17))|~e))+o[9]+3951481745&4294967295,i.g[0]=i.g[0]+e&4294967295,i.g[1]=i.g[1]+(u+(g<<21&4294967295|g>>>11))&4294967295,i.g[2]=i.g[2]+u&4294967295,i.g[3]=i.g[3]+c&4294967295}function mr(i,e){this.h=e;for(var n=[],o=!0,u=i.length-1;0<=u;u--){var c=0|i[u];o&&c==e||(n[u]=c,o=!1)}this.g=n}(_e=_n.prototype).Oa=function(i){this.M=i},_e.ha=function(i,e,n,o){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+i);e=e?e.toUpperCase():"GET",this.I=i,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():_o.g(),this.C=function us(i){return i.h||(i.h=i.i())}(this.u?this.u:_o),this.g.onreadystatechange=nt(this.La,this);try{this.G=!0,this.g.open(e,String(i),!0),this.G=!1}catch(c){return void ji(this,c)}if(i=n||"",n=new Map(this.headers),o)if(Object.getPrototypeOf(o)===Object.prototype)for(var u in o)n.set(u,o[u]);else{if("function"!=typeof o.keys||"function"!=typeof o.get)throw Error("Unknown input type for opt_headers: "+String(o));for(const c of o.keys())n.set(c,o.get(c))}o=Array.from(n.keys()).find(c=>"content-type"==c.toLowerCase()),u=re.FormData&&i instanceof re.FormData,!(0<=Ae(xo,e))||o||u||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[c,g]of n)this.g.setRequestHeader(c,g);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{ja(this),0<this.B&&((this.L=function Ea(i){return Ft&&"number"==typeof i.timeout&&void 0!==i.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=nt(this.ua,this)):this.A=Ot(this.ua,this.B,this)),this.v=!0,this.g.send(i),this.v=!1}catch(c){ji(this,c)}},_e.ua=function(){typeof Ne<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Pn(this,"timeout"),this.abort(8))},_e.abort=function(i){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=i||7,Pn(this,"complete"),Pn(this,"abort"),Zo(this))},_e.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Zo(this,!0)),_n.$.N.call(this)},_e.La=function(){this.s||(this.G||this.v||this.l?Ds(this):this.kb())},_e.kb=function(){Ds(this)},_e.isActive=function(){return!!this.g},_e.da=function(){try{return 2<$i(this)?this.g.status:-1}catch{return-1}},_e.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},_e.Wa=function(i){if(this.g){var e=this.g.responseText;return i&&0==e.indexOf(i)&&(e=e.substring(i.length)),Eo(e)}},_e.Ia=function(){return this.m},_e.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(_e=H.prototype).ra=8,_e.H=1,_e.Na=function(i){if(this.m)if(this.m=null,1==this.H){if(!i){this.W=Math.floor(1e5*Math.random()),i=this.W++;const u=new ur(this,this.l,i);let c=this.s;if(this.U&&(c?(c=Vn(c),On(c,this.U)):c=this.U),null!==this.o||this.O||(u.I=c,c=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){var o=this.j[n];if(void 0===(o="__data__"in o.map&&"string"==typeof(o=o.map.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=n;break e}if(4096===e||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=ht(this,u,e),Bn(n=vi(this.I),"RID",i),Bn(n,"CVER",22),this.F&&Bn(n,"X-HTTP-Session-Id",this.F),Xe(this,n),c&&(this.O?e="headers="+encodeURIComponent(String(iu(c)))+"&"+e:this.o&&ko(n,this.o,c)),No(this.i,u),this.bb&&Bn(n,"TYPE","init"),this.P?(Bn(n,"$req",e),Bn(n,"SID","null"),u.aa=!0,Rs(u,n,null)):Rs(u,n,e),this.H=2}}else 3==this.H&&(i?de(this,i):0==this.j.length||gr(this.i)||de(this))},_e.Ma=function(){if(this.u=null,Dr(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var i=2*this.S;this.l.info("BP detection timer enabled: "+i),this.B=ui(nt(this.jb,this),i)}},_e.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,xn(10),b(this),Dr(this))},_e.ib=function(){null!=this.v&&(this.v=null,b(this),ir(this),xn(19))},_e.pb=function(i){i?(this.l.info("Successfully pinged google.com"),xn(2)):(this.l.info("Failed to ping google.com"),xn(1))},_e.isActive=function(){return!!this.h&&this.h.isActive(this)},(_e=to.prototype).Ba=function(){},_e.Aa=function(){},_e.za=function(){},_e.ya=function(){},_e.isActive=function(){return!0},_e.Va=function(){},gs.prototype.g=function(i,e){return new di(i,e)},ot(di,Un),di.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var i=this.g,e=this.l,n=this.h||void 0;xn(0),i.Y=e,i.na=n||{},i.G=i.aa,i.I=Ri(i,null,i.Y),C(i)},di.prototype.close=function(){ae(this.g)},di.prototype.u=function(i){var e=this.g;if("string"==typeof i){var n={};n.__data__=i,i=n}else this.v&&((n={}).__data__=Ni(i),i=n);e.j.push(new class{constructor(i,e){this.g=i,this.map=e}}(e.fb++,i)),3==e.H&&C(e)},di.prototype.N=function(){this.g.h=null,delete this.j,ae(this.g),delete this.g,di.$.N.call(this)},ot(no,Zs),ot(Cs,Qs),ot(Pi,to),Pi.prototype.Ba=function(){Pn(this.g,"a")},Pi.prototype.Aa=function(i){Pn(this.g,new no(i))},Pi.prototype.za=function(i){Pn(this.g,new Cs)},Pi.prototype.ya=function(){Pn(this.g,"b")},ot(Hs,function Sa(){this.blockSize=-1}),Hs.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Hs.prototype.j=function(i,e){void 0===e&&(e=i.length);for(var n=e-this.blockSize,o=this.m,u=this.h,c=0;c<e;){if(0==u)for(;c<=n;)Ia(this,i,c),c+=this.blockSize;if("string"==typeof i){for(;c<e;)if(o[u++]=i.charCodeAt(c++),u==this.blockSize){Ia(this,o),u=0;break}}else for(;c<e;)if(o[u++]=i[c++],u==this.blockSize){Ia(this,o),u=0;break}}this.h=u,this.i+=e},Hs.prototype.l=function(){var i=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);i[0]=128;for(var e=1;e<i.length-8;++e)i[e]=0;var n=8*this.i;for(e=i.length-8;e<i.length;++e)i[e]=255&n,n/=256;for(this.j(i),i=Array(16),e=n=0;4>e;++e)for(var o=0;32>o;o+=8)i[n++]=this.g[e]>>>o&255;return i};var Fo={};function Xo(i){return-128<=i&&128>i?function yr(i,e){var n=Fo;return Object.prototype.hasOwnProperty.call(n,i)?n[i]:n[i]=e(i)}(i,function(e){return new mr([0|e],0>e?-1:0)}):new mr([0|i],0>i?-1:0)}function xs(i){if(isNaN(i)||!isFinite(i))return da;if(0>i)return Fs(xs(-i));for(var e=[],n=1,o=0;i>=n;o++)e[o]=i/n|0,n*=Ra;return new mr(e,0)}var Ra=4294967296,da=Xo(0),Iu=Xo(1),ta=Xo(16777216);function ks(i){if(0!=i.h)return!1;for(var e=0;e<i.g.length;e++)if(0!=i.g[e])return!1;return!0}function ho(i){return-1==i.h}function Fs(i){for(var e=i.g.length,n=[],o=0;o<e;o++)n[o]=~i.g[o];return new mr(n,~i.h).add(Iu)}function Ha(i,e){return i.add(Fs(e))}function na(i,e){for(;(65535&i[e])!=i[e];)i[e+1]+=i[e]>>>16,i[e]&=65535,e++}function Pa(i,e){this.g=i,this.h=e}function ha(i,e){if(ks(e))throw Error("division by zero");if(ks(i))return new Pa(da,da);if(ho(i))return e=ha(Fs(i),e),new Pa(Fs(e.g),Fs(e.h));if(ho(e))return e=ha(i,Fs(e)),new Pa(Fs(e.g),e.h);if(30<i.g.length){if(ho(i)||ho(e))throw Error("slowDivide_ only works with positive integers.");for(var n=Iu,o=e;0>=o.X(i);)n=Bu(n),o=Bu(o);var u=ro(n,1),c=ro(o,1);for(o=ro(o,2),n=ro(n,2);!ks(o);){var g=c.add(o);0>=g.X(i)&&(u=u.add(n),c=g),o=ro(o,1),n=ro(n,1)}return e=Ha(i,u.R(e)),new Pa(u,e)}for(u=da;0<=i.X(e);){for(n=Math.max(1,Math.floor(i.ea()/e.ea())),o=48>=(o=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,o-48),g=(c=xs(n)).R(e);ho(g)||0<g.X(i);)g=(c=xs(n-=o)).R(e);ks(c)&&(c=Iu),u=u.add(c),i=Ha(i,g)}return new Pa(u,i)}function Bu(i){for(var e=i.g.length+1,n=[],o=0;o<e;o++)n[o]=i.D(o)<<1|i.D(o-1)>>>31;return new mr(n,i.h)}function ro(i,e){var n=e>>5;e%=32;for(var o=i.g.length-n,u=[],c=0;c<o;c++)u[c]=0<e?i.D(c+n)>>>e|i.D(c+n+1)<<32-e:i.D(c+n);return new mr(u,i.h)}(_e=mr.prototype).ea=function(){if(ho(this))return-Fs(this).ea();for(var i=0,e=1,n=0;n<this.g.length;n++){var o=this.D(n);i+=(0<=o?o:Ra+o)*e,e*=Ra}return i},_e.toString=function(i){if(2>(i=i||10)||36<i)throw Error("radix out of range: "+i);if(ks(this))return"0";if(ho(this))return"-"+Fs(this).toString(i);for(var e=xs(Math.pow(i,6)),n=this,o="";;){var u=ha(n,e).g,c=((0<(n=Ha(n,u.R(e))).g.length?n.g[0]:n.h)>>>0).toString(i);if(ks(n=u))return c+o;for(;6>c.length;)c="0"+c;o=c+o}},_e.D=function(i){return 0>i?0:i<this.g.length?this.g[i]:this.h},_e.X=function(i){return ho(i=Ha(this,i))?-1:ks(i)?0:1},_e.abs=function(){return ho(this)?Fs(this):this},_e.add=function(i){for(var e=Math.max(this.g.length,i.g.length),n=[],o=0,u=0;u<=e;u++){var c=o+(65535&this.D(u))+(65535&i.D(u)),g=(c>>>16)+(this.D(u)>>>16)+(i.D(u)>>>16);o=g>>>16,n[u]=(g&=65535)<<16|(c&=65535)}return new mr(n,-2147483648&n[n.length-1]?-1:0)},_e.R=function(i){if(ks(this)||ks(i))return da;if(ho(this))return ho(i)?Fs(this).R(Fs(i)):Fs(Fs(this).R(i));if(ho(i))return Fs(this.R(Fs(i)));if(0>this.X(ta)&&0>i.X(ta))return xs(this.ea()*i.ea());for(var e=this.g.length+i.g.length,n=[],o=0;o<2*e;o++)n[o]=0;for(o=0;o<this.g.length;o++)for(var u=0;u<i.g.length;u++){var c=this.D(o)>>>16,g=65535&this.D(o),S=i.D(u)>>>16,x=65535&i.D(u);n[2*o+2*u]+=g*x,na(n,2*o+2*u),n[2*o+2*u+1]+=c*x,na(n,2*o+2*u+1),n[2*o+2*u+1]+=g*S,na(n,2*o+2*u+1),n[2*o+2*u+2]+=c*S,na(n,2*o+2*u+2)}for(o=0;o<e;o++)n[o]=n[2*o+1]<<16|n[2*o];for(o=e;o<2*e;o++)n[o]=0;return new mr(n,0)},_e.gb=function(i){return ha(this,i).h},_e.and=function(i){for(var e=Math.max(this.g.length,i.g.length),n=[],o=0;o<e;o++)n[o]=this.D(o)&i.D(o);return new mr(n,this.h&i.h)},_e.or=function(i){for(var e=Math.max(this.g.length,i.g.length),n=[],o=0;o<e;o++)n[o]=this.D(o)|i.D(o);return new mr(n,this.h|i.h)},_e.xor=function(i){for(var e=Math.max(this.g.length,i.g.length),n=[],o=0;o<e;o++)n[o]=this.D(o)^i.D(o);return new mr(n,this.h^i.h)},gs.prototype.createWebChannel=gs.prototype.g,di.prototype.send=di.prototype.u,di.prototype.open=di.prototype.m,di.prototype.close=di.prototype.close,Es.NO_ERROR=0,Es.TIMEOUT=8,Es.HTTP_ERROR=6,Po.COMPLETE="complete",ki.EventType=ls,ls.OPEN="a",ls.CLOSE="b",ls.ERROR="c",ls.MESSAGE="d",Un.prototype.listen=Un.prototype.O,_n.prototype.listenOnce=_n.prototype.P,_n.prototype.getLastError=_n.prototype.Sa,_n.prototype.getLastErrorCode=_n.prototype.Ia,_n.prototype.getStatus=_n.prototype.da,_n.prototype.getResponseJson=_n.prototype.Wa,_n.prototype.getResponseText=_n.prototype.ja,_n.prototype.send=_n.prototype.ha,_n.prototype.setWithCredentials=_n.prototype.Oa,Hs.prototype.digest=Hs.prototype.l,Hs.prototype.reset=Hs.prototype.reset,Hs.prototype.update=Hs.prototype.j,mr.prototype.add=mr.prototype.add,mr.prototype.multiply=mr.prototype.R,mr.prototype.modulo=mr.prototype.gb,mr.prototype.compare=mr.prototype.X,mr.prototype.toNumber=mr.prototype.ea,mr.prototype.toString=mr.prototype.toString,mr.prototype.getBits=mr.prototype.D,mr.fromNumber=xs,mr.fromString=function ea(i,e){if(0==i.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==i.charAt(0))return Fs(ea(i.substring(1),e));if(0<=i.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=xs(Math.pow(e,8)),o=da,u=0;u<i.length;u+=8){var c=Math.min(8,i.length-u),g=parseInt(i.substring(u,u+c),e);8>c?(c=xs(Math.pow(e,c)),o=o.R(c).add(xs(g))):o=(o=o.R(n)).add(xs(g))}return o};var ra=De.createWebChannelTransport=function(){return new gs},A=De.getStatEventTarget=function(){return It()},J=De.ErrorCode=Es,L=De.EventType=Po,Q=De.Event=Oe,pe=De.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},ut=(De.FetchXmlHttpFactory=eo,De.WebChannel=ki),Yt=De.XhrIo=_n,Ur=De.Md5=Hs,_r=De.Integer=mr;const $r="@firebase/firestore";class hn{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}hn.UNAUTHENTICATED=new hn(null),hn.GOOGLE_CREDENTIALS=new hn("google-credentials-uid"),hn.FIRST_PARTY=new hn("first-party-uid"),hn.MOCK_USER=new hn("mock-user");let ei="10.10.0";const tr=new ye.Yd("@firebase/firestore");function wi(){return tr.logLevel}function Ls(i){tr.setLogLevel(i)}function ct(i,...e){if(tr.logLevel<=ye.in.DEBUG){const n=e.map(Qo);tr.debug(`Firestore (${ei}): ${i}`,...n)}}function Hr(i,...e){if(tr.logLevel<=ye.in.ERROR){const n=e.map(Qo);tr.error(`Firestore (${ei}): ${i}`,...n)}}function ni(i,...e){if(tr.logLevel<=ye.in.WARN){const n=e.map(Qo);tr.warn(`Firestore (${ei}): ${i}`,...n)}}function Qo(i){if("string"==typeof i)return i;try{return JSON.stringify(i)}catch{return i}}function bt(i="Unexpected state"){const e=`FIRESTORE (${ei}) INTERNAL ASSERTION FAILED: `+i;throw Hr(e),new Error(e)}function Jt(i,e){i||bt()}function Uc(i,e){i||bt()}function pt(i,e){return i}const Je={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ft extends ge.ZR{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Kr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}class yl{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Jl{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(hn.UNAUTHENTICATED))}shutdown(){}}class bs{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class Lo{constructor(e){this.t=e,this.currentUser=hn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){var o=this;let u=this.i;const c=G=>this.i!==u?(u=this.i,n(G)):Promise.resolve();let g=new Kr;this.o=()=>{this.i++,this.currentUser=this.u(),g.resolve(),g=new Kr,e.enqueueRetryable(()=>c(this.currentUser))};const S=()=>{const G=g;e.enqueueRetryable((0,f.Z)(function*(){yield G.promise,yield c(o.currentUser)}))},x=G=>{ct("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=G,this.auth.addAuthTokenListener(this.o),S()};this.t.onInit(G=>x(G)),setTimeout(()=>{if(!this.auth){const G=this.t.getImmediate({optional:!0});G?x(G):(ct("FirebaseAuthCredentialsProvider","Auth not yet detected"),g.resolve(),g=new Kr)}},0),S()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(o=>this.i!==e?(ct("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):o?(Jt("string"==typeof o.accessToken),new yl(o.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Jt(null===e||"string"==typeof e),new hn(e)}}class Bc{constructor(e,n,o){this.l=e,this.h=n,this.P=o,this.type="FirstParty",this.user=hn.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class vl{constructor(e,n,o){this.l=e,this.h=n,this.P=o}getToken(){return Promise.resolve(new Bc(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(hn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Xl{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Yo{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const o=c=>{null!=c.error&&ct("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const g=c.token!==this.R;return this.R=c.token,ct("FirebaseAppCheckTokenProvider",`Received ${g?"new":"existing"} token.`),g?n(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable(()=>o(c))};const u=c=>{ct("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.appCheck.addTokenListener(this.o)};this.A.onInit(c=>u(c)),setTimeout(()=>{if(!this.appCheck){const c=this.A.getImmediate({optional:!0});c?u(c):ct("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Jt("string"==typeof n.token),this.R=n.token,new Xl(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function El(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(i);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let o=0;o<i;o++)n[o]=Math.floor(256*Math.random());return n}class ju{static newId(){const n=62*Math.floor(256/62);let o="";for(;o.length<20;){const u=El(40);for(let c=0;c<u.length;++c)o.length<20&&u[c]<n&&(o+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(u[c]%62))}return o}}function kn(i,e){return i<e?-1:i>e?1:0}function sa(i,e,n){return i.length===e.length&&i.every((o,u)=>n(o,e[u]))}function $u(i){return i+"\0"}class Zt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ft(Je.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ft(Je.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new ft(Je.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ft(Je.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Zt.fromMillis(Date.now())}static fromDate(e){return Zt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),o=Math.floor(1e6*(e-1e3*n));return new Zt(n,o)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?kn(this.nanoseconds,e.nanoseconds):kn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class cn{constructor(e){this.timestamp=e}static fromTimestamp(e){return new cn(e)}static min(){return new cn(new Zt(0,0))}static max(){return new cn(new Zt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Io{constructor(e,n,o){void 0===n?n=0:n>e.length&&bt(),void 0===o?o=e.length-n:o>e.length-n&&bt(),this.segments=e,this.offset=n,this.len=o}get length(){return this.len}isEqual(e){return 0===Io.comparator(this,e)}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Io?e.forEach(o=>{n.push(o)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,o=this.limit();n<o;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const o=Math.min(e.length,n.length);for(let u=0;u<o;u++){const c=e.get(u),g=n.get(u);if(c<g)return-1;if(c>g)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class qn extends Io{construct(e,n,o){return new qn(e,n,o)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const o of e){if(o.indexOf("//")>=0)throw new ft(Je.INVALID_ARGUMENT,`Invalid segment (${o}). Paths must not contain // in them.`);n.push(...o.split("/").filter(u=>u.length>0))}return new qn(n)}static emptyPath(){return new qn([])}}const za=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class _i extends Io{construct(e,n,o){return new _i(e,n,o)}static isValidIdentifier(e){return za.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),_i.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new _i(["__name__"])}static fromServerFormat(e){const n=[];let o="",u=0;const c=()=>{if(0===o.length)throw new ft(Je.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(o),o=""};let g=!1;for(;u<e.length;){const S=e[u];if("\\"===S){if(u+1===e.length)throw new ft(Je.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const x=e[u+1];if("\\"!==x&&"."!==x&&"`"!==x)throw new ft(Je.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);o+=x,u+=2}else"`"===S?(g=!g,u++):"."!==S||g?(o+=S,u++):(c(),u++)}if(c(),g)throw new ft(Je.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new _i(n)}static emptyPath(){return new _i([])}}class Vt{constructor(e){this.path=e}static fromPath(e){return new Vt(qn.fromString(e))}static fromName(e){return new Vt(qn.fromString(e).popFirst(5))}static empty(){return new Vt(qn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===qn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,n){return qn.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Vt(new qn(e.slice()))}}class wo{constructor(e,n,o,u){this.indexId=e,this.collectionGroup=n,this.fields=o,this.indexState=u}}function wu(i){return i.fields.find(e=>2===e.kind)}function wa(i){return i.fields.filter(e=>2!==e.kind)}wo.UNKNOWN_ID=-1;class Ma{constructor(e,n){this.fieldPath=e,this.kind=n}}class dt{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new dt(0,zs.min())}}function xr(i,e){const n=i.toTimestamp().seconds,o=i.toTimestamp().nanoseconds+1,u=cn.fromTimestamp(1e9===o?new Zt(n+1,0):new Zt(n,o));return new zs(u,Vt.empty(),e)}function Il(i){return new zs(i.readTime,i.key,-1)}class zs{constructor(e,n,o){this.readTime=e,this.documentKey=n,this.largestBatchId=o}static min(){return new zs(cn.min(),Vt.empty(),-1)}static max(){return new zs(cn.max(),Vt.empty(),-1)}}function Yi(i,e){let n=i.readTime.compareTo(e.readTime);return 0!==n?n:(n=Vt.comparator(i.documentKey,e.documentKey),0!==n?n:kn(i.largestBatchId,e.largestBatchId))}const qi="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class su{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function os(i){return ou.apply(this,arguments)}function ou(){return ou=(0,f.Z)(function*(i){if(i.code!==Je.FAILED_PRECONDITION||i.message!==qi)throw i;ct("LocalStore","Unexpectedly lost primary lease")}),ou.apply(this,arguments)}class Be{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&bt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Be((o,u)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(o,u)},this.catchCallback=c=>{this.wrapFailure(n,c).next(o,u)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof Be?n:Be.resolve(n)}catch(n){return Be.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):Be.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):Be.reject(n)}static resolve(e){return new Be((n,o)=>{n(e)})}static reject(e){return new Be((n,o)=>{o(e)})}static waitFor(e){return new Be((n,o)=>{let u=0,c=0,g=!1;e.forEach(S=>{++u,S.next(()=>{++c,g&&c===u&&n()},x=>o(x))}),g=!0,c===u&&n()})}static or(e){let n=Be.resolve(!1);for(const o of e)n=n.next(u=>u?Be.resolve(u):o());return n}static forEach(e,n){const o=[];return e.forEach((u,c)=>{o.push(n.call(this,u,c))}),this.waitFor(o)}static mapArray(e,n){return new Be((o,u)=>{const c=e.length,g=new Array(c);let S=0;for(let x=0;x<c;x++){const G=x;n(e[G]).next(ee=>{g[G]=ee,++S,S===c&&o(g)},ee=>u(ee))}})}static doWhile(e,n){return new Be((o,u)=>{const c=()=>{!0===e()?n().next(()=>{c()},u):o()};c()})}}class Hu{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new Kr,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new zr(e,n.error)):this.V.resolve()},this.transaction.onerror=o=>{const u=wl(o.target.error);this.V.reject(new zr(e,u))}}static open(e,n,o,u){try{return new Hu(n,e.transaction(u,o))}catch(c){throw new zr(n,c)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(ct("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const n=this.transaction.objectStore(e);return new Gu(n)}}class io{constructor(e,n,o){this.name=e,this.version=n,this.p=o,12.2===io.S((0,ge.z$)())&&Hr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return ct("SimpleDb","Removing database:",e),ms(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,ge.hl)())return!1;if(io.C())return!0;const e=(0,ge.z$)(),n=io.S(e),o=0<n&&n<10,u=io.v(e),c=0<u&&u<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||o||c)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.F)}static M(e,n){return e.store(n)}static S(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),o=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(o)}static v(e){const n=e.match(/Android ([\d.]+)/i),o=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(o)}O(e){var n=this;return(0,f.Z)(function*(){return n.db||(ct("SimpleDb","Opening database:",n.name),n.db=yield new Promise((o,u)=>{const c=indexedDB.open(n.name,n.version);c.onsuccess=g=>{o(g.target.result)},c.onblocked=()=>{u(new zr(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},c.onerror=g=>{const S=g.target.error;u("VersionError"===S.name?new ft(Je.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===S.name?new ft(Je.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+S):new zr(e,S))},c.onupgradeneeded=g=>{ct("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',g.oldVersion),n.p.N(g.target.result,c.transaction,g.oldVersion,n.version).next(()=>{ct("SimpleDb","Database upgrade to version "+n.version+" complete")})}})),n.L&&(n.db.onversionchange=o=>n.L(o)),n.db})()}B(e){this.L=e,this.db&&(this.db.onversionchange=n=>e(n))}runTransaction(e,n,o,u){var c=this;return(0,f.Z)(function*(){const g="readonly"===n;let S=0;for(;;){++S;try{c.db=yield c.O(e);const x=Hu.open(c.db,e,g?"readonly":"readwrite",o),G=u(x).next(ee=>(x.g(),ee)).catch(ee=>(x.abort(ee),Be.reject(ee))).toPromise();return G.catch(()=>{}),yield x.m,G}catch(x){const G=x,ee="FirebaseError"!==G.name&&S<3;if(ct("SimpleDb","Transaction failed with error:",G.message,"Retrying:",ee),c.close(),!ee)return Promise.reject(G)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class zu{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return ms(this.k.delete())}}class zr extends ft{constructor(e,n){super(Je.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function Ti(i){return"IndexedDbTransactionError"===i.name}class Gu{constructor(e){this.store=e}put(e,n){let o;return void 0!==n?(ct("SimpleDb","PUT",this.store.name,e,n),o=this.store.put(n,e)):(ct("SimpleDb","PUT",this.store.name,"<auto-key>",e),o=this.store.put(e)),ms(o)}add(e){return ct("SimpleDb","ADD",this.store.name,e,e),ms(this.store.add(e))}get(e){return ms(this.store.get(e)).next(n=>(void 0===n&&(n=null),ct("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return ct("SimpleDb","DELETE",this.store.name,e),ms(this.store.delete(e))}count(){return ct("SimpleDb","COUNT",this.store.name),ms(this.store.count())}W(e,n){const o=this.options(e,n),u=o.index?this.store.index(o.index):this.store;if("function"==typeof u.getAll){const c=u.getAll(o.range);return new Be((g,S)=>{c.onerror=x=>{S(x.target.error)},c.onsuccess=x=>{g(x.target.result)}})}{const c=this.cursor(o),g=[];return this.G(c,(S,x)=>{g.push(x)}).next(()=>g)}}j(e,n){const o=this.store.getAll(e,null===n?void 0:n);return new Be((u,c)=>{o.onerror=g=>{c(g.target.error)},o.onsuccess=g=>{u(g.target.result)}})}H(e,n){ct("SimpleDb","DELETE ALL",this.store.name);const o=this.options(e,n);o.J=!1;const u=this.cursor(o);return this.G(u,(c,g,S)=>S.delete())}Y(e,n){let o;n?o=e:(o={},n=e);const u=this.cursor(o);return this.G(u,n)}Z(e){const n=this.cursor({});return new Be((o,u)=>{n.onerror=c=>{const g=wl(c.target.error);u(g)},n.onsuccess=c=>{const g=c.target.result;g?e(g.primaryKey,g.value).next(S=>{S?g.continue():o()}):o()}})}G(e,n){const o=[];return new Be((u,c)=>{e.onerror=g=>{c(g.target.error)},e.onsuccess=g=>{const S=g.target.result;if(!S)return void u();const x=new zu(S),G=n(S.primaryKey,S.value,x);if(G instanceof Be){const ee=G.catch(le=>(x.done(),Be.reject(le)));o.push(ee)}x.isDone?u():null===x.$?S.continue():S.continue(x.$)}}).next(()=>Be.waitFor(o))}options(e,n){let o;return void 0!==e&&("string"==typeof e?o=e:n=e),{index:o,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const o=this.store.index(e.index);return e.J?o.openKeyCursor(e.range,n):o.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function ms(i){return new Be((e,n)=>{i.onsuccess=o=>{e(o.target.result)},i.onerror=o=>{const u=wl(o.target.error);n(u)}})}let To=!1;function wl(i){const e=io.S((0,ge.z$)());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(i.message.indexOf(n)>=0){const o=new ft("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return To||(To=!0,setTimeout(()=>{throw o},0)),o}}return i}class au{constructor(e,n){this.asyncQueue=e,this.X=n,this.task=null}start(){this.ee(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}ee(e){var n=this;ct("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,f.Z)(function*(){n.task=null;try{ct("IndexBackfiller",`Documents written: ${yield n.X.te()}`)}catch(o){Ti(o)?ct("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",o):yield os(o)}yield n.ee(6e4)}))}}class Wu{constructor(e,n){this.localStore=e,this.persistence=n}te(e=50){var n=this;return(0,f.Z)(function*(){return n.persistence.runTransaction("Backfill Indexes","readwrite-primary",o=>n.ne(o,e))})()}ne(e,n){const o=new Set;let u=n,c=!0;return Be.doWhile(()=>!0===c&&u>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(g=>{if(null!==g&&!o.has(g))return ct("IndexBackfiller",`Processing collection: ${g}`),this.re(e,g,u).next(S=>{u-=S,o.add(g)});c=!1})).next(()=>n-u)}re(e,n,o){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(u=>this.localStore.localDocuments.getNextDocuments(e,n,u,o).next(c=>{const g=c.changes;return this.localStore.indexManager.updateIndexEntries(e,g).next(()=>this.ie(u,c)).next(S=>(ct("IndexBackfiller",`Updating offset: ${S}`),this.localStore.indexManager.updateCollectionGroup(e,n,S))).next(()=>g.size)}))}ie(e,n){let o=e;return n.changes.forEach((u,c)=>{const g=Il(c);Yi(g,o)>0&&(o=g)}),new zs(o.readTime,o.documentKey,Math.max(n.batchId,e.largestBatchId))}}let fo=(()=>{class i{constructor(n,o){this.previousValue=n,o&&(o.sequenceNumberHandler=u=>this.se(u),this.oe=u=>o.writeSequenceNumber(u))}se(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){const n=++this.previousValue;return this.oe&&this.oe(n),n}}return i._e=-1,i})();function uu(i){return null==i}function Ta(i){return 0===i&&1/i==-1/0}function v(i){return"number"==typeof i&&Number.isInteger(i)&&!Ta(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}function R(i){let e="";for(let n=0;n<i.length;n++)e.length>0&&(e=M(e)),e=I(i.get(n),e);return M(e)}function I(i,e){let n=e;const o=i.length;for(let u=0;u<o;u++){const c=i.charAt(u);switch(c){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=c}}return n}function M(i){return i+"\x01\x01"}function B(i){const e=i.length;if(Jt(e>=2),2===e)return Jt("\x01"===i.charAt(0)&&"\x01"===i.charAt(1)),qn.emptyPath();const n=e-2,o=[];let u="";for(let c=0;c<e;){const g=i.indexOf("\x01",c);switch((g<0||g>n)&&bt(),i.charAt(g+1)){case"\x01":const S=i.substring(c,g);let x;0===u.length?x=S:(u+=S,x=u,u=""),o.push(x);break;case"\x10":u+=i.substring(c,g),u+="\0";break;case"\x11":u+=i.substring(c,g+1);break;default:bt()}c=g+2}return new qn(o)}const te=["userId","batchId"];function fe(i,e){return[i,R(e)]}function qe(i,e,n){return[i,R(e),n]}const ze={},Ut=["prefixPath","collectionGroup","readTime","documentId"],jn=["prefixPath","collectionGroup","documentId"],Di=["collectionGroup","readTime","prefixPath","documentId"],Mn=["canonicalId","targetId"],Ss=["targetId","path"],ri=["path","targetId"],Ga=["collectionId","parent"],Tu=["indexId","uid"],Vo=["uid","sequenceNumber"],Uo=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],so=["indexId","uid","orderedDocumentKey"],ec=["userId","collectionPath","documentId"],qu=["userId","collectionPath","largestBatchId"],oa=["userId","collectionGroup","largestBatchId"],Wa=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Gs=[...Wa,"documentOverlays"],lu=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],cu=lu,Da=[...cu,"indexConfiguration","indexState","indexEntries"];class Aa extends su{constructor(e,n){super(),this.ae=e,this.currentSequenceNumber=n}}function Ji(i,e){const n=pt(i);return io.M(n.ae,e)}function fa(i){let e=0;for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e++;return e}function Do(i,e){for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e(n,i[n])}function Du(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}class Ai{constructor(e,n){this.comparator=e,this.root=n||Hi.EMPTY}insert(e,n){return new Ai(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Hi.BLACK,null,null))}remove(e){return new Ai(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Hi.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const o=this.comparator(e,n.key);if(0===o)return n.value;o<0?n=n.left:o>0&&(n=n.right)}return null}indexOf(e){let n=0,o=this.root;for(;!o.isEmpty();){const u=this.comparator(e,o.key);if(0===u)return n+o.left.size;u<0?o=o.left:(n+=o.left.size+1,o=o.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,o)=>(e(n,o),!1))}toString(){const e=[];return this.inorderTraversal((n,o)=>(e.push(`${n}:${o}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new tc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new tc(this.root,e,this.comparator,!1)}getReverseIterator(){return new tc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new tc(this.root,e,this.comparator,!0)}}class tc{constructor(e,n,o,u){this.isReverse=u,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=n?o(e.key,n):1,n&&u&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(0===c){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Hi{constructor(e,n,o,u,c){this.key=e,this.value=n,this.color=o??Hi.RED,this.left=u??Hi.EMPTY,this.right=c??Hi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,o,u,c){return new Hi(e??this.key,n??this.value,o??this.color,u??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,o){let u=this;const c=o(e,u.key);return u=c<0?u.copy(null,null,null,u.left.insert(e,n,o),null):0===c?u.copy(null,n,null,null,null):u.copy(null,null,null,null,u.right.insert(e,n,o)),u.fixUp()}removeMin(){if(this.left.isEmpty())return Hi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let o,u=this;if(n(e,u.key)<0)u.left.isEmpty()||u.left.isRed()||u.left.left.isRed()||(u=u.moveRedLeft()),u=u.copy(null,null,null,u.left.remove(e,n),null);else{if(u.left.isRed()&&(u=u.rotateRight()),u.right.isEmpty()||u.right.isRed()||u.right.left.isRed()||(u=u.moveRedRight()),0===n(e,u.key)){if(u.right.isEmpty())return Hi.EMPTY;o=u.right.min(),u=u.copy(o.key,o.value,null,null,u.right.removeMin())}u=u.copy(null,null,null,null,u.right.remove(e,n))}return u.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Hi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Hi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw bt();const e=this.left.check();if(e!==this.right.check())throw bt();return e+(this.isRed()?0:1)}}Hi.EMPTY=null,Hi.RED=!0,Hi.BLACK=!1,Hi.EMPTY=new class{constructor(){this.size=0}get key(){throw bt()}get value(){throw bt()}get color(){throw bt()}get left(){throw bt()}get right(){throw bt()}copy(e,n,o,u,c){return this}insert(e,n,o){return new Hi(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class hi{constructor(e){this.comparator=e,this.data=new Ai(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,o)=>(e(n),!1))}forEachInRange(e,n){const o=this.data.getIteratorFrom(e[0]);for(;o.hasNext();){const u=o.getNext();if(this.comparator(u.key,e[1])>=0)return;n(u.key)}}forEachWhile(e,n){let o;for(o=void 0!==n?this.data.getIteratorFrom(n):this.data.getIterator();o.hasNext();)if(!e(o.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new jc(this.data.getIterator())}getIteratorFrom(e){return new jc(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(o=>{n=n.add(o)}),n}isEqual(e){if(!(e instanceof hi)||this.size!==e.size)return!1;const n=this.data.getIterator(),o=e.data.getIterator();for(;n.hasNext();){const u=n.getNext().key,c=o.getNext().key;if(0!==this.comparator(u,c))return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new hi(this.comparator);return n.data=e,n}}class jc{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function qa(i){return i.hasNext()?i.getNext():void 0}class Bo{constructor(e){this.fields=e,e.sort(_i.comparator)}static empty(){return new Bo([])}unionWith(e){let n=new hi(_i.comparator);for(const o of this.fields)n=n.add(o);for(const o of e)n=n.add(o);return new Bo(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return sa(this.fields,e.fields,(n,o)=>n.isEqual(o))}}class Au extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}function Ku(){return typeof atob<"u"}class Xi{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(u){try{return atob(u)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new Au("Invalid base64 string: "+c):c}}(e);return new Xi(n)}static fromUint8Array(e){const n=function(u){let c="";for(let g=0;g<u.length;++g)c+=String.fromCharCode(u[g]);return c}(e);return new Xi(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(n){const o=new Uint8Array(n.length);for(let u=0;u<n.length;u++)o[u]=n.charCodeAt(u);return o}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return kn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Xi.EMPTY_BYTE_STRING=new Xi("");const nc=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function jo(i){if(Jt(!!i),"string"==typeof i){let e=0;const n=nc.exec(i);if(Jt(!!n),n[1]){let u=n[1];u=(u+"000000000").substr(0,9),e=Number(u)}const o=new Date(i);return{seconds:Math.floor(o.getTime()/1e3),nanos:e}}return{seconds:zi(i.seconds),nanos:zi(i.nanos)}}function zi(i){return"number"==typeof i?i:"string"==typeof i?Number(i):0}function Ao(i){return"string"==typeof i?Xi.fromBase64String(i):Xi.fromUint8Array(i)}function rc(i){var e,n;return"server_timestamp"===(null===(n=((null===(e=i?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Ka(i){const e=i.mapValue.fields.__previous_value__;return rc(e)?Ka(e):e}function Na(i){const e=jo(i.mapValue.fields.__local_write_time__.timestampValue);return new Zt(e.seconds,e.nanos)}class Pd{constructor(e,n,o,u,c,g,S,x,G){this.databaseId=e,this.appId=n,this.persistenceKey=o,this.host=u,this.ssl=c,this.forceLongPolling=g,this.autoDetectLongPolling=S,this.longPollingOptions=x,this.useFetchStreams=G}}class _s{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new _s("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof _s&&e.projectId===this.projectId&&e.database===this.database}}const Oa={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},du={nullValue:"NULL_VALUE"};function aa(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?rc(i)?4:At(i)?9007199254740991:10:bt()}function $o(i,e){if(i===e)return!0;const n=aa(i);if(n!==aa(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return Na(i).isEqual(Na(e));case 3:return function(u,c){if("string"==typeof u.timestampValue&&"string"==typeof c.timestampValue&&u.timestampValue.length===c.timestampValue.length)return u.timestampValue===c.timestampValue;const g=jo(u.timestampValue),S=jo(c.timestampValue);return g.seconds===S.seconds&&g.nanos===S.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return c=e,Ao(i.bytesValue).isEqual(Ao(c.bytesValue));case 7:return i.referenceValue===e.referenceValue;case 8:return function(u,c){return zi(u.geoPointValue.latitude)===zi(c.geoPointValue.latitude)&&zi(u.geoPointValue.longitude)===zi(c.geoPointValue.longitude)}(i,e);case 2:return function(u,c){if("integerValue"in u&&"integerValue"in c)return zi(u.integerValue)===zi(c.integerValue);if("doubleValue"in u&&"doubleValue"in c){const g=zi(u.doubleValue),S=zi(c.doubleValue);return g===S?Ta(g)===Ta(S):isNaN(g)&&isNaN(S)}return!1}(i,e);case 9:return sa(i.arrayValue.values||[],e.arrayValue.values||[],$o);case 10:return function(u,c){const g=u.mapValue.fields||{},S=c.mapValue.fields||{};if(fa(g)!==fa(S))return!1;for(const x in g)if(g.hasOwnProperty(x)&&(void 0===S[x]||!$o(g[x],S[x])))return!1;return!0}(i,e);default:return bt()}var c}function pa(i,e){return void 0!==(i.values||[]).find(n=>$o(n,e))}function ga(i,e){if(i===e)return 0;const n=aa(i),o=aa(e);if(n!==o)return kn(n,o);switch(n){case 0:case 9007199254740991:return 0;case 1:return kn(i.booleanValue,e.booleanValue);case 2:return function(c,g){const S=zi(c.integerValue||c.doubleValue),x=zi(g.integerValue||g.doubleValue);return S<x?-1:S>x?1:S===x?0:isNaN(S)?isNaN(x)?0:-1:1}(i,e);case 3:return ic(i.timestampValue,e.timestampValue);case 4:return ic(Na(i),Na(e));case 5:return kn(i.stringValue,e.stringValue);case 6:return function(c,g){const S=Ao(c),x=Ao(g);return S.compareTo(x)}(i.bytesValue,e.bytesValue);case 7:return function(c,g){const S=c.split("/"),x=g.split("/");for(let G=0;G<S.length&&G<x.length;G++){const ee=kn(S[G],x[G]);if(0!==ee)return ee}return kn(S.length,x.length)}(i.referenceValue,e.referenceValue);case 8:return function(c,g){const S=kn(zi(c.latitude),zi(g.latitude));return 0!==S?S:kn(zi(c.longitude),zi(g.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return function(c,g){const S=c.values||[],x=g.values||[];for(let G=0;G<S.length&&G<x.length;++G){const ee=ga(S[G],x[G]);if(ee)return ee}return kn(S.length,x.length)}(i.arrayValue,e.arrayValue);case 10:return function(c,g){if(c===Oa.mapValue&&g===Oa.mapValue)return 0;if(c===Oa.mapValue)return 1;if(g===Oa.mapValue)return-1;const S=c.fields||{},x=Object.keys(S),G=g.fields||{},ee=Object.keys(G);x.sort(),ee.sort();for(let le=0;le<x.length&&le<ee.length;++le){const Ce=kn(x[le],ee[le]);if(0!==Ce)return Ce;const Ge=ga(S[x[le]],G[ee[le]]);if(0!==Ge)return Ge}return kn(x.length,ee.length)}(i.mapValue,e.mapValue);default:throw bt()}}function ic(i,e){if("string"==typeof i&&"string"==typeof e&&i.length===e.length)return kn(i,e);const n=jo(i),o=jo(e),u=kn(n.seconds,o.seconds);return 0!==u?u:kn(n.nanos,o.nanos)}function N(i){return d(i)}function d(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(n){const o=jo(n);return`time(${o.seconds},${o.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?Ao(i.bytesValue).toBase64():"referenceValue"in i?Vt.fromName(i.referenceValue).toString():"geoPointValue"in i?function(n){return`geo(${n.latitude},${n.longitude})`}(i.geoPointValue):"arrayValue"in i?function(n){let o="[",u=!0;for(const c of n.values||[])u?u=!1:o+=",",o+=d(c);return o+"]"}(i.arrayValue):"mapValue"in i?function(n){const o=Object.keys(n.fields||{}).sort();let u="{",c=!0;for(const g of o)c?c=!1:u+=",",u+=`${g}:${d(n.fields[g])}`;return u+"}"}(i.mapValue):bt()}function T(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function V(i){return!!i&&"integerValue"in i}function Y(i){return!!i&&"arrayValue"in i}function ue(i){return!!i&&"nullValue"in i}function me(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function Se(i){return!!i&&"mapValue"in i}function Qe(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&"object"==typeof i.timestampValue)return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return Do(i.mapValue.fields,(n,o)=>e.mapValue.fields[n]=Qe(o)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(i.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Qe(i.arrayValue.values[n]);return e}return Object.assign({},i)}function At(i){return"__max__"===(((i.mapValue||{}).fields||{}).__type__||{}).stringValue}function Mt(i){return"nullValue"in i?du:"booleanValue"in i?{booleanValue:!1}:"integerValue"in i||"doubleValue"in i?{doubleValue:NaN}:"timestampValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in i?{stringValue:""}:"bytesValue"in i?{bytesValue:""}:"referenceValue"in i?T(_s.empty(),Vt.empty()):"geoPointValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in i?{arrayValue:{}}:"mapValue"in i?{mapValue:{}}:bt()}function en(i){return"nullValue"in i?{booleanValue:!1}:"booleanValue"in i?{doubleValue:NaN}:"integerValue"in i||"doubleValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in i?{stringValue:""}:"stringValue"in i?{bytesValue:""}:"bytesValue"in i?T(_s.empty(),Vt.empty()):"referenceValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in i?{arrayValue:{}}:"arrayValue"in i?{mapValue:{}}:"mapValue"in i?Oa:bt()}function bn(i,e){const n=ga(i.value,e.value);return 0!==n?n:i.inclusive&&!e.inclusive?-1:!i.inclusive&&e.inclusive?1:0}function sn(i,e){const n=ga(i.value,e.value);return 0!==n?n:i.inclusive&&!e.inclusive?1:!i.inclusive&&e.inclusive?-1:0}class St{constructor(e){this.value=e}static empty(){return new St({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let o=0;o<e.length-1;++o)if(n=(n.mapValue.fields||{})[e.get(o)],!Se(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Qe(n)}setAll(e){let n=_i.emptyPath(),o={},u=[];e.forEach((g,S)=>{if(!n.isImmediateParentOf(S)){const x=this.getFieldsMap(n);this.applyChanges(x,o,u),o={},u=[],n=S.popLast()}g?o[S.lastSegment()]=Qe(g):u.push(S.lastSegment())});const c=this.getFieldsMap(n);this.applyChanges(c,o,u)}delete(e){const n=this.field(e.popLast());Se(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return $o(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let o=0;o<e.length;++o){let u=n.mapValue.fields[e.get(o)];Se(u)&&u.mapValue.fields||(u={mapValue:{fields:{}}},n.mapValue.fields[e.get(o)]=u),n=u}return n.mapValue.fields}applyChanges(e,n,o){Do(n,(u,c)=>e[u]=c);for(const u of o)delete e[u]}clone(){return new St(Qe(this.value))}}function Sn(i){const e=[];return Do(i.fields,(n,o)=>{const u=new _i([n]);if(Se(o)){const c=Sn(o.mapValue).fields;if(0===c.length)e.push(u);else for(const g of c)e.push(u.child(g))}else e.push(u)}),new Bo(e)}class wn{constructor(e,n,o,u,c,g,S){this.key=e,this.documentType=n,this.version=o,this.readTime=u,this.createTime=c,this.data=g,this.documentState=S}static newInvalidDocument(e){return new wn(e,0,cn.min(),cn.min(),cn.min(),St.empty(),0)}static newFoundDocument(e,n,o,u){return new wn(e,1,n,cn.min(),o,u,0)}static newNoDocument(e,n){return new wn(e,2,n,cn.min(),cn.min(),St.empty(),0)}static newUnknownDocument(e,n){return new wn(e,3,n,cn.min(),cn.min(),St.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(cn.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=St.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=St.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=cn.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof wn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new wn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Zr{constructor(e,n){this.position=e,this.inclusive=n}}function nr(i,e,n){let o=0;for(let u=0;u<i.position.length;u++){const c=e[u],g=i.position[u];if(o=c.field.isKeyField()?Vt.comparator(Vt.fromName(g.referenceValue),n.key):ga(g,n.data.field(c.field)),"desc"===c.dir&&(o*=-1),0!==o)break}return o}function Qr(i,e){if(null===i)return null===e;if(null===e||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let n=0;n<i.position.length;n++)if(!$o(i.position[n],e.position[n]))return!1;return!0}class Ki{constructor(e,n="asc"){this.field=e,this.dir=n}}function Ws(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}class es{}class Nn extends es{constructor(e,n,o){super(),this.field=e,this.op=n,this.value=o}static create(e,n,o){return e.isKeyField()?"in"===n||"not-in"===n?this.createKeyFieldInFilter(e,n,o):new Fn(e,n,o):"array-contains"===n?new oo(e,o):"in"===n?new xa(e,o):"not-in"===n?new Gr(e,o):"array-contains-any"===n?new ka(e,o):new Nn(e,n,o)}static createKeyFieldInFilter(e,n,o){return"in"===n?new Yr(e,o):new Fr(e,o)}matches(e){const n=e.data.field(this.field);return"!="===this.op?null!==n&&this.matchesComparison(ga(n,this.value)):null!==n&&aa(this.value)===aa(n)&&this.matchesComparison(ga(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return bt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class kr extends es{constructor(e,n){super(),this.filters=e,this.op=n,this.ue=null}static create(e,n){return new kr(e,n)}matches(e){return Ho(this)?void 0===this.filters.find(n=>!n.matches(e)):void 0!==this.filters.find(n=>n.matches(e))}getFlattenedFilters(){return null!==this.ue||(this.ue=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function Ho(i){return"and"===i.op}function Zu(i){return"or"===i.op}function Cu(i){return hu(i)&&Ho(i)}function hu(i){for(const e of i.filters)if(e instanceof kr)return!1;return!0}function Tl(i){if(i instanceof Nn)return i.field.canonicalString()+i.op.toString()+N(i.value);if(Cu(i))return i.filters.map(e=>Tl(e)).join(",");{const e=i.filters.map(n=>Tl(n)).join(",");return`${i.op}(${e})`}}function $c(i,e){return i instanceof Nn?(o=i,(u=e)instanceof Nn&&o.op===u.op&&o.field.isEqual(u.field)&&$o(o.value,u.value)):i instanceof kr?function(o,u){return u instanceof kr&&o.op===u.op&&o.filters.length===u.filters.length&&o.filters.reduce((c,g,S)=>c&&$c(g,u.filters[S]),!0)}(i,e):void bt();var o,u}function on(i,e){const n=i.filters.concat(e);return kr.create(n,i.op)}function mn(i){return i instanceof Nn?`${(n=i).field.canonicalString()} ${n.op} ${N(n.value)}`:i instanceof kr?function(n){return n.op.toString()+" {"+n.getFilters().map(mn).join(" ,")+"}"}(i):"Filter";var n}class Fn extends Nn{constructor(e,n,o){super(e,n,o),this.key=Vt.fromName(o.referenceValue)}matches(e){const n=Vt.comparator(e.key,this.key);return this.matchesComparison(n)}}class Yr extends Nn{constructor(e,n){super(e,"in",n),this.keys=ma(0,n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class Fr extends Nn{constructor(e,n){super(e,"not-in",n),this.keys=ma(0,n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function ma(i,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(o=>Vt.fromName(o.referenceValue))}class oo extends Nn{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Y(n)&&pa(n.arrayValue,this.value)}}class xa extends Nn{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return null!==n&&pa(this.value.arrayValue,n)}}class Gr extends Nn{constructor(e,n){super(e,"not-in",n)}matches(e){if(pa(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return null!==n&&!pa(this.value.arrayValue,n)}}class ka extends Nn{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Y(n)||!n.arrayValue.values)&&n.arrayValue.values.some(o=>pa(this.value.arrayValue,o))}}class Hc{constructor(e,n=null,o=[],u=[],c=null,g=null,S=null){this.path=e,this.collectionGroup=n,this.orderBy=o,this.filters=u,this.limit=c,this.startAt=g,this.endAt=S,this.ce=null}}function ys(i,e=null,n=[],o=[],u=null,c=null,g=null){return new Hc(i,e,n,o,u,c,g)}function ao(i){const e=pt(i);if(null===e.ce){let n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(o=>Tl(o)).join(","),n+="|ob:",n+=e.orderBy.map(o=>{return(c=o).field.canonicalString()+c.dir;var c}).join(","),uu(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(o=>N(o)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(o=>N(o)).join(",")),e.ce=n}return e.ce}function po(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<i.orderBy.length;n++)if(!Ws(i.orderBy[n],e.orderBy[n]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let n=0;n<i.filters.length;n++)if(!$c(i.filters[n],e.filters[n]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!Qr(i.startAt,e.startAt)&&Qr(i.endAt,e.endAt)}function bu(i){return Vt.isDocumentKey(i.path)&&null===i.collectionGroup&&0===i.filters.length}function fu(i,e){return i.filters.filter(n=>n instanceof Nn&&n.field.isEqual(e))}function Wf(i,e,n){let o=du,u=!0;for(const c of fu(i,e)){let g=du,S=!0;switch(c.op){case"<":case"<=":g=Mt(c.value);break;case"==":case"in":case">=":g=c.value;break;case">":g=c.value,S=!1;break;case"!=":case"not-in":g=du}bn({value:o,inclusive:u},{value:g,inclusive:S})<0&&(o=g,u=S)}if(null!==n)for(let c=0;c<i.orderBy.length;++c)if(i.orderBy[c].field.isEqual(e)){const g=n.position[c];bn({value:o,inclusive:u},{value:g,inclusive:n.inclusive})<0&&(o=g,u=n.inclusive);break}return{value:o,inclusive:u}}function ua(i,e,n){let o=Oa,u=!0;for(const c of fu(i,e)){let g=Oa,S=!0;switch(c.op){case">=":case">":g=en(c.value),S=!1;break;case"==":case"in":case"<=":g=c.value;break;case"<":g=c.value,S=!1;break;case"!=":case"not-in":g=Oa}sn({value:o,inclusive:u},{value:g,inclusive:S})>0&&(o=g,u=S)}if(null!==n)for(let c=0;c<i.orderBy.length;++c)if(i.orderBy[c].field.isEqual(e)){const g=n.position[c];sn({value:o,inclusive:u},{value:g,inclusive:n.inclusive})>0&&(o=g,u=n.inclusive);break}return{value:o,inclusive:u}}class Fa{constructor(e,n=null,o=[],u=[],c=null,g="F",S=null,x=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=o,this.filters=u,this.limit=c,this.limitType=g,this.startAt=S,this.endAt=x,this.le=null,this.he=null,this.Pe=null}}function Qu(i,e,n,o,u,c,g,S){return new Fa(i,e,n,o,u,c,g,S)}function sc(i){return new Fa(i)}function oc(i){return 0===i.filters.length&&null===i.limit&&null==i.startAt&&null==i.endAt&&(0===i.explicitOrderBy.length||1===i.explicitOrderBy.length&&i.explicitOrderBy[0].field.isKeyField())}function ac(i){return null!==i.collectionGroup}function Dl(i){const e=pt(i);if(null===e.le){e.le=[];const n=new Set;for(const c of e.explicitOrderBy)e.le.push(c),n.add(c.field.canonicalString());const o=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(g){let S=new hi(_i.comparator);return g.filters.forEach(x=>{x.getFlattenedFilters().forEach(G=>{G.isInequality()&&(S=S.add(G.field))})}),S})(e).forEach(c=>{n.has(c.canonicalString())||c.isKeyField()||e.le.push(new Ki(c,o))}),n.has(_i.keyField().canonicalString())||e.le.push(new Ki(_i.keyField(),o))}return e.le}function Co(i){const e=pt(i);return e.he||(e.he=function bh(i,e){if("F"===i.limitType)return ys(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map(u=>new Ki(u.field,"desc"===u.dir?"asc":"desc"));const n=i.endAt?new Zr(i.endAt.position,i.endAt.inclusive):null,o=i.startAt?new Zr(i.startAt.position,i.startAt.inclusive):null;return ys(i.path,i.collectionGroup,e,i.filters,i.limit,n,o)}}(e,Dl(i))),e.he}function zc(i,e){const n=i.filters.concat([e]);return new Fa(i.path,i.collectionGroup,i.explicitOrderBy.slice(),n,i.limit,i.limitType,i.startAt,i.endAt)}function Gc(i,e,n){return new Fa(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,n,i.startAt,i.endAt)}function pu(i,e){return po(Co(i),Co(e))&&i.limitType===e.limitType}function uc(i){return`${ao(Co(i))}|lt:${i.limitType}`}function lc(i){return`Query(target=${function(n){let o=n.path.canonicalString();return null!==n.collectionGroup&&(o+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(o+=`, filters: [${n.filters.map(u=>mn(u)).join(", ")}]`),uu(n.limit)||(o+=", limit: "+n.limit),n.orderBy.length>0&&(o+=`, orderBy: [${n.orderBy.map(u=>{return`${(g=u).field.canonicalString()} (${g.dir})`;var g}).join(", ")}]`),n.startAt&&(o+=", startAt: ",o+=n.startAt.inclusive?"b:":"a:",o+=n.startAt.position.map(u=>N(u)).join(",")),n.endAt&&(o+=", endAt: ",o+=n.endAt.inclusive?"a:":"b:",o+=n.endAt.position.map(u=>N(u)).join(",")),`Target(${o})`}(Co(i))}; limitType=${i.limitType})`}function Za(i,e){return e.isFoundDocument()&&function(o,u){const c=u.key.path;return null!==o.collectionGroup?u.key.hasCollectionId(o.collectionGroup)&&o.path.isPrefixOf(c):Vt.isDocumentKey(o.path)?o.path.isEqual(c):o.path.isImmediateParentOf(c)}(i,e)&&function(o,u){for(const c of Dl(o))if(!c.field.isKeyField()&&null===u.data.field(c.field))return!1;return!0}(i,e)&&function(o,u){for(const c of o.filters)if(!c.matches(u))return!1;return!0}(i,e)&&(u=e,!((o=i).startAt&&!function(g,S,x){const G=nr(g,S,x);return g.inclusive?G<=0:G<0}(o.startAt,Dl(o),u)||o.endAt&&!function(g,S,x){const G=nr(g,S,x);return g.inclusive?G>=0:G>0}(o.endAt,Dl(o),u)));var o,u}function Md(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function Su(i){return(e,n)=>{let o=!1;for(const u of Dl(i)){const c=Sh(u,e,n);if(0!==c)return c;o=o||u.field.isKeyField()}return 0}}function Sh(i,e,n){const o=i.field.isKeyField()?Vt.comparator(e.key,n.key):function(c,g,S){const x=g.data.field(c),G=S.data.field(c);return null!==x&&null!==G?ga(x,G):bt()}(i.field,e,n);switch(i.dir){case"asc":return o;case"desc":return-1*o;default:return bt()}}class La{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),o=this.inner[n];if(void 0!==o)for(const[u,c]of o)if(this.equalsFn(u,e))return c}has(e){return void 0!==this.get(e)}set(e,n){const o=this.mapKeyFn(e),u=this.inner[o];if(void 0===u)return this.inner[o]=[[e,n]],void this.innerSize++;for(let c=0;c<u.length;c++)if(this.equalsFn(u[c][0],e))return void(u[c]=[e,n]);u.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),o=this.inner[n];if(void 0===o)return!1;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return 1===o.length?delete this.inner[n]:o.splice(u,1),this.innerSize--,!0;return!1}forEach(e){Do(this.inner,(n,o)=>{for(const[u,c]of o)e(u,c)})}isEmpty(){return Du(this.inner)}size(){return this.innerSize}}const Nd=new Ai(Vt.comparator);function bo(){return Nd}const Od=new Ai(Vt.comparator);function cc(...i){let e=Od;for(const n of i)e=e.insert(n.key,n);return e}function Rh(i){let e=Od;return i.forEach((n,o)=>e=e.insert(n,o.overlayedDocument)),e}function zo(){return Wc()}function Al(){return Wc()}function Wc(){return new La(i=>i.toString(),(i,e)=>i.isEqual(e))}const um=new Ai(Vt.comparator),E=new hi(Vt.comparator);function h(...i){let e=E;for(const n of i)e=e.add(n);return e}const _=new hi(kn);function D(){return _}function W(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ta(e)?"-0":e}}function ie(i){return{integerValue:""+i}}function be(i,e){return v(e)?ie(e):W(i,e)}class Ke{constructor(){this._=void 0}}function gt(i,e,n){return i instanceof cr?function(u,c){const g={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:u.seconds,nanos:u.nanoseconds}}}};return c&&rc(c)&&(c=Ka(c)),c&&(g.fields.__previous_value__=c),{mapValue:g}}(n,e):i instanceof uo?gu(i,e):i instanceof Qa?dc(i,e):function(u,c){const g=En(u,c),S=Ph(g)+Ph(u.Ie);return V(g)&&V(u.Ie)?ie(S):W(u.serializer,S)}(i,e)}function tn(i,e,n){return i instanceof uo?gu(i,e):i instanceof Qa?dc(i,e):n}function En(i,e){return i instanceof Yu?V(o=e)||(c=o)&&"doubleValue"in c?e:{integerValue:0}:null;var o,c}class cr extends Ke{}class uo extends Ke{constructor(e){super(),this.elements=e}}function gu(i,e){const n=hc(e);for(const o of i.elements)n.some(u=>$o(u,o))||n.push(o);return{arrayValue:{values:n}}}class Qa extends Ke{constructor(e){super(),this.elements=e}}function dc(i,e){let n=hc(e);for(const o of i.elements)n=n.filter(u=>!$o(u,o));return{arrayValue:{values:n}}}class Yu extends Ke{constructor(e,n){super(),this.serializer=e,this.Ie=n}}function Ph(i){return zi(i.integerValue||i.doubleValue)}function hc(i){return Y(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}class Cl{constructor(e,n){this.field=e,this.transform=n}}class Kf{constructor(e,n){this.version=e,this.transformResults=n}}class ts{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new ts}static exists(e){return new ts(void 0,e)}static updateTime(e){return new ts(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function qc(i,e){return void 0!==i.updateTime?e.isFoundDocument()&&e.version.isEqual(i.updateTime):void 0===i.exists||i.exists===e.isFoundDocument()}class Kc{}function Ju(i,e){if(!i.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return i.isNoDocument()?new Xu(i.key,ts.none()):new mu(i.key,i.data,ts.none());{const n=i.data,o=St.empty();let u=new hi(_i.comparator);for(let c of e.fields)if(!u.has(c)){let g=n.field(c);null===g&&c.length>1&&(c=c.popLast(),g=n.field(c)),null===g?o.delete(c):o.set(c,g),u=u.add(c)}return new Ru(i.key,o,new Bo(u.toArray()),ts.none())}}function Zc(i,e,n){i instanceof mu?function(u,c,g){const S=u.value.clone(),x=xd(u.fieldTransforms,c,g.transformResults);S.setAll(x),c.convertToFoundDocument(g.version,S).setHasCommittedMutations()}(i,e,n):i instanceof Ru?function(u,c,g){if(!qc(u.precondition,c))return void c.convertToUnknownDocument(g.version);const S=xd(u.fieldTransforms,c,g.transformResults),x=c.data;x.setAll(Qf(u)),x.setAll(S),c.convertToFoundDocument(g.version,x).setHasCommittedMutations()}(i,e,n):e.convertToNoDocument(n.version).setHasCommittedMutations()}function Qc(i,e,n,o){return i instanceof mu?function(c,g,S,x){if(!qc(c.precondition,g))return S;const G=c.value.clone(),ee=kd(c.fieldTransforms,x,g);return G.setAll(ee),g.convertToFoundDocument(g.version,G).setHasLocalMutations(),null}(i,e,n,o):i instanceof Ru?function(c,g,S,x){if(!qc(c.precondition,g))return S;const G=kd(c.fieldTransforms,x,g),ee=g.data;return ee.setAll(Qf(c)),ee.setAll(G),g.convertToFoundDocument(g.version,ee).setHasLocalMutations(),null===S?null:S.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map(le=>le.field))}(i,e,n,o):(S=n,qc(i.precondition,g=e)?(g.convertToNoDocument(g.version).setHasLocalMutations(),null):S);var g,S}function lm(i,e){let n=null;for(const o of i.fieldTransforms){const u=e.data.field(o.field),c=En(o.transform,u||null);null!=c&&(null===n&&(n=St.empty()),n.set(o.field,c))}return n||null}function Zf(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&(u=e.fieldTransforms,!!(void 0===(o=i.fieldTransforms)&&void 0===u||o&&u&&sa(o,u,(c,g)=>function qf(i,e){return i.field.isEqual(e.field)&&(u=e.transform,(o=i.transform)instanceof uo&&u instanceof uo||o instanceof Qa&&u instanceof Qa?sa(o.elements,u.elements,$o):o instanceof Yu&&u instanceof Yu?$o(o.Ie,u.Ie):o instanceof cr&&u instanceof cr);var o,u}(c,g))))&&(0===i.type?i.value.isEqual(e.value):1!==i.type||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask));var o,u}class mu extends Kc{constructor(e,n,o,u=[]){super(),this.key=e,this.value=n,this.precondition=o,this.fieldTransforms=u,this.type=0}getFieldMask(){return null}}class Ru extends Kc{constructor(e,n,o,u,c=[]){super(),this.key=e,this.data=n,this.fieldMask=o,this.precondition=u,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function Qf(i){const e=new Map;return i.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const o=i.data.field(n);e.set(n,o)}}),e}function xd(i,e,n){const o=new Map;Jt(i.length===n.length);for(let u=0;u<n.length;u++){const c=i[u],g=c.transform,S=e.data.field(c.field);o.set(c.field,tn(g,S,n[u]))}return o}function kd(i,e,n){const o=new Map;for(const u of i){const c=u.transform,g=n.data.field(u.field);o.set(u.field,gt(c,g,e))}return o}class Xu extends Kc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Yf extends Kc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Jf{constructor(e,n,o,u){this.batchId=e,this.localWriteTime=n,this.baseMutations=o,this.mutations=u}applyToRemoteDocument(e,n){const o=n.mutationResults;for(let u=0;u<this.mutations.length;u++){const c=this.mutations[u];c.key.isEqual(e.key)&&Zc(c,e,o[u])}}applyToLocalView(e,n){for(const o of this.baseMutations)o.key.isEqual(e.key)&&(n=Qc(o,e,n,this.localWriteTime));for(const o of this.mutations)o.key.isEqual(e.key)&&(n=Qc(o,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const o=Al();return this.mutations.forEach(u=>{const c=e.get(u.key),g=c.overlayedDocument;let S=this.applyToLocalView(g,c.mutatedFields);S=n.has(u.key)?null:S;const x=Ju(g,S);null!==x&&o.set(u.key,x),g.isValidDocument()||g.convertToNoDocument(cn.min())}),o}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),h())}isEqual(e){return this.batchId===e.batchId&&sa(this.mutations,e.mutations,(n,o)=>Zf(n,o))&&sa(this.baseMutations,e.baseMutations,(n,o)=>Zf(n,o))}}class Xf{constructor(e,n,o,u){this.batch=e,this.commitVersion=n,this.mutationResults=o,this.docVersions=u}static from(e,n,o){Jt(e.mutations.length===o.length);let u=um;const c=e.mutations;for(let g=0;g<c.length;g++)u=u.insert(c[g].key,o[g].version);return new Xf(e,n,o,u)}}class Mh{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Ny{constructor(e,n){this.count=e,this.unchangedNames=n}}var go,fi;function tp(i){switch(i){default:return bt();case Je.CANCELLED:case Je.UNKNOWN:case Je.DEADLINE_EXCEEDED:case Je.RESOURCE_EXHAUSTED:case Je.INTERNAL:case Je.UNAVAILABLE:case Je.UNAUTHENTICATED:return!1;case Je.INVALID_ARGUMENT:case Je.NOT_FOUND:case Je.ALREADY_EXISTS:case Je.PERMISSION_DENIED:case Je.FAILED_PRECONDITION:case Je.ABORTED:case Je.OUT_OF_RANGE:case Je.UNIMPLEMENTED:case Je.DATA_LOSS:return!0}}function cm(i){if(void 0===i)return Hr("GRPC error has no .code"),Je.UNKNOWN;switch(i){case go.OK:return Je.OK;case go.CANCELLED:return Je.CANCELLED;case go.UNKNOWN:return Je.UNKNOWN;case go.DEADLINE_EXCEEDED:return Je.DEADLINE_EXCEEDED;case go.RESOURCE_EXHAUSTED:return Je.RESOURCE_EXHAUSTED;case go.INTERNAL:return Je.INTERNAL;case go.UNAVAILABLE:return Je.UNAVAILABLE;case go.UNAUTHENTICATED:return Je.UNAUTHENTICATED;case go.INVALID_ARGUMENT:return Je.INVALID_ARGUMENT;case go.NOT_FOUND:return Je.NOT_FOUND;case go.ALREADY_EXISTS:return Je.ALREADY_EXISTS;case go.PERMISSION_DENIED:return Je.PERMISSION_DENIED;case go.FAILED_PRECONDITION:return Je.FAILED_PRECONDITION;case go.ABORTED:return Je.ABORTED;case go.OUT_OF_RANGE:return Je.OUT_OF_RANGE;case go.UNIMPLEMENTED:return Je.UNIMPLEMENTED;case go.DATA_LOSS:return Je.DATA_LOSS;default:return bt()}}(fi=go||(go={}))[fi.OK=0]="OK",fi[fi.CANCELLED=1]="CANCELLED",fi[fi.UNKNOWN=2]="UNKNOWN",fi[fi.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",fi[fi.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",fi[fi.NOT_FOUND=5]="NOT_FOUND",fi[fi.ALREADY_EXISTS=6]="ALREADY_EXISTS",fi[fi.PERMISSION_DENIED=7]="PERMISSION_DENIED",fi[fi.UNAUTHENTICATED=16]="UNAUTHENTICATED",fi[fi.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",fi[fi.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",fi[fi.ABORTED=10]="ABORTED",fi[fi.OUT_OF_RANGE=11]="OUT_OF_RANGE",fi[fi.UNIMPLEMENTED=12]="UNIMPLEMENTED",fi[fi.INTERNAL=13]="INTERNAL",fi[fi.UNAVAILABLE=14]="UNAVAILABLE",fi[fi.DATA_LOSS=15]="DATA_LOSS";function _a(){return new TextEncoder}const np=new _r([4294967295,4294967295],0);function rp(i){const e=_a().encode(i),n=new Ur;return n.update(e),new Uint8Array(n.digest())}function Oh(i){const e=new DataView(i.buffer),n=e.getUint32(0,!0),o=e.getUint32(4,!0),u=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new _r([n,o],0),new _r([u,c],0)]}class Go{constructor(e,n,o){if(this.bitmap=e,this.padding=n,this.hashCount=o,n<0||n>=8)throw new el(`Invalid padding: ${n}`);if(o<0)throw new el(`Invalid hash count: ${o}`);if(e.length>0&&0===this.hashCount)throw new el(`Invalid hash count: ${o}`);if(0===e.length&&0!==n)throw new el(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*e.length-n,this.Ee=_r.fromNumber(this.Te)}de(e,n,o){let u=e.add(n.multiply(_r.fromNumber(o)));return 1===u.compare(np)&&(u=new _r([u.getBits(0),u.getBits(1)],0)),u.modulo(this.Ee).toNumber()}Ae(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Te)return!1;const n=rp(e),[o,u]=Oh(n);for(let c=0;c<this.hashCount;c++){const g=this.de(o,u,c);if(!this.Ae(g))return!1}return!0}static create(e,n,o){const u=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),g=new Go(c,u,n);return o.forEach(S=>g.insert(S)),g}insert(e){if(0===this.Te)return;const n=rp(e),[o,u]=Oh(n);for(let c=0;c<this.hashCount;c++){const g=this.de(o,u,c);this.Re(g)}}Re(e){const n=Math.floor(e/8);this.bitmap[n]|=1<<e%8}}class el extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Yc{constructor(e,n,o,u,c){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=o,this.documentUpdates=u,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,n,o){const u=new Map;return u.set(e,Jc.createSynthesizedTargetChangeForCurrentChange(e,n,o)),new Yc(cn.min(),u,new Ai(kn),bo(),h())}}class Jc{constructor(e,n,o,u,c){this.resumeToken=e,this.current=n,this.addedDocuments=o,this.modifiedDocuments=u,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,n,o){return new Jc(o,n,h(),h(),h())}}class xh{constructor(e,n,o,u){this.Ve=e,this.removedTargetIds=n,this.key=o,this.me=u}}class ip{constructor(e,n){this.targetId=e,this.fe=n}}class dm{constructor(e,n,o=Xi.EMPTY_BYTE_STRING,u=null){this.state=e,this.targetIds=n,this.resumeToken=o,this.cause=u}}class sp{constructor(){this.ge=0,this.pe=hm(),this.ye=Xi.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return 0!==this.ge}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=h(),n=h(),o=h();return this.pe.forEach((u,c)=>{switch(c){case 0:e=e.add(u);break;case 2:n=n.add(u);break;case 1:o=o.add(u);break;default:bt()}}),new Jc(this.ye,this.we,e,n,o)}Fe(){this.Se=!1,this.pe=hm()}Me(e,n){this.Se=!0,this.pe=this.pe.insert(e,n)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,Jt(this.ge>=0)}Le(){this.Se=!0,this.we=!0}}class Oy{constructor(e){this.Be=e,this.ke=new Map,this.qe=bo(),this.Qe=op(),this.Ke=new Ai(kn)}$e(e){for(const n of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(n,e.me):this.We(n,e.key,e.me);for(const n of e.removedTargetIds)this.We(n,e.key,e.me)}Ge(e){this.forEachTarget(e,n=>{const o=this.ze(n);switch(e.state){case 0:this.je(n)&&o.Ce(e.resumeToken);break;case 1:o.Ne(),o.be||o.Fe(),o.Ce(e.resumeToken);break;case 2:o.Ne(),o.be||this.removeTarget(n);break;case 3:this.je(n)&&(o.Le(),o.Ce(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),o.Ce(e.resumeToken));break;default:bt()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ke.forEach((o,u)=>{this.je(u)&&n(u)})}Je(e){const n=e.targetId,o=e.fe.count,u=this.Ye(n);if(u){const c=u.target;if(bu(c))if(0===o){const g=new Vt(c.path);this.We(n,g,wn.newNoDocument(g,cn.min()))}else Jt(1===o);else{const g=this.Ze(n);if(g!==o){const S=this.Xe(e),x=S?this.et(S,e,g):1;0!==x&&(this.He(n),this.Ke=this.Ke.insert(n,2===x?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Xe(e){const n=e.fe.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:o="",padding:u=0},hashCount:c=0}=n;let g,S;try{g=Ao(o).toUint8Array()}catch(x){if(x instanceof Au)return ni("Decoding the base64 bloom filter in existence filter failed ("+x.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw x}try{S=new Go(g,u,c)}catch(x){return ni(x instanceof el?"BloomFilter error: ":"Applying bloom filter failed: ",x),null}return 0===S.Te?null:S}et(e,n,o){return n.fe.count===o-this.rt(e,n.targetId)?0:2}rt(e,n){const o=this.Be.getRemoteKeysForTarget(n);let u=0;return o.forEach(c=>{const g=this.Be.nt(),S=`projects/${g.projectId}/databases/${g.database}/documents/${c.path.canonicalString()}`;e.mightContain(S)||(this.We(n,c,null),u++)}),u}it(e){const n=new Map;this.ke.forEach((c,g)=>{const S=this.Ye(g);if(S){if(c.current&&bu(S.target)){const x=new Vt(S.target.path);null!==this.qe.get(x)||this.st(g,x)||this.We(g,x,wn.newNoDocument(x,e))}c.De&&(n.set(g,c.ve()),c.Fe())}});let o=h();this.Qe.forEach((c,g)=>{let S=!0;g.forEachWhile(x=>{const G=this.Ye(x);return!G||"TargetPurposeLimboResolution"===G.purpose||(S=!1,!1)}),S&&(o=o.add(c))}),this.qe.forEach((c,g)=>g.setReadTime(e));const u=new Yc(e,n,this.Ke,this.qe,o);return this.qe=bo(),this.Qe=op(),this.Ke=new Ai(kn),u}Ue(e,n){if(!this.je(e))return;const o=this.st(e,n.key)?2:0;this.ze(e).Me(n.key,o),this.qe=this.qe.insert(n.key,n),this.Qe=this.Qe.insert(n.key,this.ot(n.key).add(e))}We(e,n,o){if(!this.je(e))return;const u=this.ze(e);this.st(e,n)?u.Me(n,1):u.xe(n),this.Qe=this.Qe.insert(n,this.ot(n).delete(e)),o&&(this.qe=this.qe.insert(n,o))}removeTarget(e){this.ke.delete(e)}Ze(e){const n=this.ze(e).ve();return this.Be.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let n=this.ke.get(e);return n||(n=new sp,this.ke.set(e,n)),n}ot(e){let n=this.Qe.get(e);return n||(n=new hi(kn),this.Qe=this.Qe.insert(e,n)),n}je(e){const n=null!==this.Ye(e);return n||ct("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){const n=this.ke.get(e);return n&&n.be?null:this.Be._t(e)}He(e){this.ke.set(e,new sp),this.Be.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}st(e,n){return this.Be.getRemoteKeysForTarget(e).has(n)}}function op(){return new Ai(Vt.comparator)}function hm(){return new Ai(Vt.comparator)}const xy={asc:"ASCENDING",desc:"DESCENDING"},ap={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},up={and:"AND",or:"OR"};class ky{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function fc(i,e){return i.useProto3Json||uu(e)?e:{value:e}}function Xc(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function fm(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function pm(i,e){return Xc(i,e.toTimestamp())}function qs(i){return Jt(!!i),cn.fromTimestamp(function(n){const o=jo(n);return new Zt(o.seconds,o.nanos)}(i))}function kh(i,e){return bl(i,e).canonicalString()}function bl(i,e){const n=(u=i,new qn(["projects",u.projectId,"databases",u.database])).child("documents");var u;return void 0===e?n:n.child(e)}function Fd(i){const e=qn.fromString(i);return Jt(hp(e)),e}function ed(i,e){return kh(i.databaseId,e.path)}function Ya(i,e){const n=Fd(e);if(n.get(1)!==i.databaseId.projectId)throw new ft(Je.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+i.databaseId.projectId);if(n.get(3)!==i.databaseId.database)throw new ft(Je.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+i.databaseId.database);return new Vt(mm(n))}function Ld(i,e){return kh(i.databaseId,e)}function gm(i){const e=Fd(i);return 4===e.length?qn.emptyPath():mm(e)}function lp(i){return new qn(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function mm(i){return Jt(i.length>4&&"documents"===i.get(4)),i.popFirst(5)}function _m(i,e,n){return{name:ed(i,e),fields:n.value.mapValue.fields}}function ym(i,e,n){const o=Ya(i,e.name),u=qs(e.updateTime),c=e.createTime?qs(e.createTime):cn.min(),g=new St({mapValue:{fields:e.fields}}),S=wn.newFoundDocument(o,u,c,g);return n&&S.setHasCommittedMutations(),n?S.setHasCommittedMutations():S}function Sl(i,e){let n;if(e instanceof mu)n={update:_m(i,e.key,e.value)};else if(e instanceof Xu)n={delete:ed(i,e.key)};else if(e instanceof Ru)n={update:_m(i,e.key,e.data),updateMask:Am(e.fieldMask)};else{if(!(e instanceof Yf))return bt();n={verify:ed(i,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(o=>function(c,g){const S=g.transform;if(S instanceof cr)return{fieldPath:g.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(S instanceof uo)return{fieldPath:g.field.canonicalString(),appendMissingElements:{values:S.elements}};if(S instanceof Qa)return{fieldPath:g.field.canonicalString(),removeAllFromArray:{values:S.elements}};if(S instanceof Yu)return{fieldPath:g.field.canonicalString(),increment:S.Ie};throw bt()}(0,o))),e.precondition.isNone||(n.currentDocument=void 0!==(c=e.precondition).updateTime?{updateTime:pm(i,c.updateTime)}:void 0!==c.exists?{exists:c.exists}:bt()),n;var c}function Vd(i,e){const n=e.currentDocument?void 0!==(c=e.currentDocument).updateTime?ts.updateTime(qs(c.updateTime)):void 0!==c.exists?ts.exists(c.exists):ts.none():ts.none(),o=e.updateTransforms?e.updateTransforms.map(u=>function(g,S){let x=null;"setToServerValue"in S?(Jt("REQUEST_TIME"===S.setToServerValue),x=new cr):"appendMissingElements"in S?x=new uo(S.appendMissingElements.values||[]):"removeAllFromArray"in S?x=new Qa(S.removeAllFromArray.values||[]):"increment"in S?x=new Yu(g,S.increment):bt();const G=_i.fromServerFormat(S.fieldPath);return new Cl(G,x)}(i,u)):[];var c;if(e.update){const u=Ya(i,e.update.name),c=new St({mapValue:{fields:e.update.fields}});if(e.updateMask){const g=new Bo((e.updateMask.fieldPaths||[]).map(ee=>_i.fromServerFormat(ee)));return new Ru(u,c,g,n,o)}return new mu(u,c,n,o)}if(e.delete){const u=Ya(i,e.delete);return new Xu(u,n)}if(e.verify){const u=Ya(i,e.verify);return new Yf(u,n)}return bt()}function Em(i,e){return{documents:[Ld(i,e.path)]}}function dp(i,e){const n={structuredQuery:{}},o=e.path;let u;null!==e.collectionGroup?(u=o,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(u=o.popLast(),n.structuredQuery.from=[{collectionId:o.lastSegment()}]),n.parent=Ld(i,u);const c=function(G){if(0!==G.length)return Dm(kr.create(G,"and"))}(e.filters);c&&(n.structuredQuery.where=c);const g=function(G){if(0!==G.length)return G.map(ee=>{return{field:pc((Ce=ee).field),direction:wm(Ce.dir)};var Ce})}(e.orderBy);g&&(n.structuredQuery.orderBy=g);const S=fc(i,e.limit);return null!==S&&(n.structuredQuery.limit=S),e.startAt&&(n.structuredQuery.startAt={before:(G=e.startAt).inclusive,values:G.position}),e.endAt&&(n.structuredQuery.endAt=function(G){return{before:!G.inclusive,values:G.position}}(e.endAt)),{ut:n,parent:u};var G}function Fh(i){let e=gm(i.parent);const n=i.structuredQuery,o=n.from?n.from.length:0;let u=null;if(o>0){Jt(1===o);const ee=n.from[0];ee.allDescendants?u=ee.collectionId:e=e.child(ee.collectionId)}let c=[];n.where&&(c=function(le){const Ce=Rl(le);return Ce instanceof kr&&Cu(Ce)?Ce.getFilters():[Ce]}(n.where));let g=[];n.orderBy&&(g=n.orderBy.map(Ce=>{return new Ki(tl((Rt=Ce).field),function(Bt){switch(Bt){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(Rt.direction));var Rt}));let S=null;n.limit&&(S=function(le){let Ce;return Ce="object"==typeof le?le.value:le,uu(Ce)?null:Ce}(n.limit));let x=null;var le;n.startAt&&(x=new Zr((le=n.startAt).values||[],!!le.before));let G=null;return n.endAt&&(G=function(le){return new Zr(le.values||[],!le.before)}(n.endAt)),Qu(e,u,g,c,S,"F",x,G)}function Rl(i){return void 0!==i.unaryFilter?function(n){switch(n.unaryFilter.op){case"IS_NAN":const o=tl(n.unaryFilter.field);return Nn.create(o,"==",{doubleValue:NaN});case"IS_NULL":const u=tl(n.unaryFilter.field);return Nn.create(u,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=tl(n.unaryFilter.field);return Nn.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const g=tl(n.unaryFilter.field);return Nn.create(g,"!=",{nullValue:"NULL_VALUE"});default:return bt()}}(i):void 0!==i.fieldFilter?Nn.create(tl((n=i).fieldFilter.field),function(u){switch(u){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return bt()}}(n.fieldFilter.op),n.fieldFilter.value):void 0!==i.compositeFilter?function(n){return kr.create(n.compositeFilter.filters.map(o=>Rl(o)),function(u){switch(u){case"AND":return"and";case"OR":return"or";default:return bt()}}(n.compositeFilter.op))}(i):bt();var n}function wm(i){return xy[i]}function Tm(i){return ap[i]}function Ly(i){return up[i]}function pc(i){return{fieldPath:i.canonicalString()}}function tl(i){return _i.fromServerFormat(i.fieldPath)}function Dm(i){return i instanceof Nn?function(n){if("=="===n.op){if(me(n.value))return{unaryFilter:{field:pc(n.field),op:"IS_NAN"}};if(ue(n.value))return{unaryFilter:{field:pc(n.field),op:"IS_NULL"}}}else if("!="===n.op){if(me(n.value))return{unaryFilter:{field:pc(n.field),op:"IS_NOT_NAN"}};if(ue(n.value))return{unaryFilter:{field:pc(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:pc(n.field),op:Tm(n.op),value:n.value}}}(i):i instanceof kr?function(n){const o=n.getFilters().map(u=>Dm(u));return 1===o.length?o[0]:{compositeFilter:{op:Ly(n.op),filters:o}}}(i):bt()}function Am(i){const e=[];return i.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function hp(i){return i.length>=4&&"projects"===i.get(0)&&"databases"===i.get(2)}class Pu{constructor(e,n,o,u,c=cn.min(),g=cn.min(),S=Xi.EMPTY_BYTE_STRING,x=null){this.target=e,this.targetId=n,this.purpose=o,this.sequenceNumber=u,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=g,this.resumeToken=S,this.expectedCount=x}withSequenceNumber(e){return new Pu(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Pu(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Pu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Pu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Lh{constructor(e){this.ct=e}}function Ud(i,e){const n=e.key,o={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Pl(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())o.document={name:ed(c=i.ct,(g=e).key),fields:g.data.value.mapValue.fields,updateTime:Xc(c,g.version.toTimestamp()),createTime:Xc(c,g.createTime.toTimestamp())};else if(e.isNoDocument())o.noDocument={path:n.path.toArray(),readTime:Ml(e.version)};else{if(!e.isUnknownDocument())return bt();o.unknownDocument={path:n.path.toArray(),version:Ml(e.version)}}var c,g;return o}function Pl(i){const e=i.toTimestamp();return[e.seconds,e.nanoseconds]}function Ml(i){const e=i.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function nl(i){const e=new Zt(i.seconds,i.nanoseconds);return cn.fromTimestamp(e)}function Mu(i,e){const n=(e.baseMutations||[]).map(c=>Vd(i.ct,c));for(let c=0;c<e.mutations.length-1;++c)c+1<e.mutations.length&&void 0!==e.mutations[c+1].transform&&(e.mutations[c].updateTransforms=e.mutations[c+1].transform.fieldTransforms,e.mutations.splice(c+1,1),++c);const o=e.mutations.map(c=>Vd(i.ct,c)),u=Zt.fromMillis(e.localWriteTimeMs);return new Jf(e.batchId,u,n,o)}function td(i){const e=nl(i.readTime),n=void 0!==i.lastLimboFreeSnapshotVersion?nl(i.lastLimboFreeSnapshotVersion):cn.min();let o;return o=void 0!==i.query.documents?(Jt(1===(c=i.query).documents.length),Co(sc(gm(c.documents[0])))):function(c){return Co(Fh(c))}(i.query),new Pu(o,i.targetId,"TargetPurposeListen",i.lastListenSequenceNumber,e,n,Xi.fromBase64String(i.resumeToken));var c}function Vh(i,e){const n=Ml(e.snapshotVersion),o=Ml(e.lastLimboFreeSnapshotVersion);let u;u=bu(e.target)?Em(i.ct,e.target):dp(i.ct,e.target).ut;const c=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:ao(e.target),readTime:n,resumeToken:c,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:o,query:u}}function gc(i){const e=Fh({parent:i.parent,structuredQuery:i.structuredQuery});return"LAST"===i.limitType?Gc(e,e.limit,"L"):e}function fp(i,e){return new Mh(e.largestBatchId,Vd(i.ct,e.overlayMutation))}function pp(i,e){const n=e.path.lastSegment();return[i,R(e.path.popLast()),n]}function bm(i,e,n,o){return{indexId:i,uid:e,sequenceNumber:n,readTime:Ml(o.readTime),documentKey:R(o.documentKey.path),largestBatchId:o.largestBatchId}}class Vy{getBundleMetadata(e,n){return Sm(e).get(n).next(o=>{if(o)return{id:(c=o).bundleId,createTime:nl(c.createTime),version:c.version};var c})}saveBundleMetadata(e,n){return Sm(e).put({bundleId:(u=n).id,createTime:Ml(qs(u.createTime)),version:u.version});var u}getNamedQuery(e,n){return gp(e).get(n).next(o=>{if(o)return{name:(c=o).name,query:gc(c.bundledQuery),readTime:nl(c.readTime)};var c})}saveNamedQuery(e,n){return gp(e).put({name:(u=n).name,readTime:Ml(qs(u.readTime)),bundledQuery:u.bundledQuery});var u}}function Sm(i){return Ji(i,"bundles")}function gp(i){return Ji(i,"namedQueries")}class Bd{constructor(e,n){this.serializer=e,this.userId=n}static lt(e,n){return new Bd(e,n.uid||"")}getOverlay(e,n){return Nl(e).get(pp(this.userId,n)).next(o=>o?fp(this.serializer,o):null)}getOverlays(e,n){const o=zo();return Be.forEach(n,u=>this.getOverlay(e,u).next(c=>{null!==c&&o.set(u,c)})).next(()=>o)}saveOverlays(e,n,o){const u=[];return o.forEach((c,g)=>{const S=new Mh(n,g);u.push(this.ht(e,S))}),Be.waitFor(u)}removeOverlaysForBatchId(e,n,o){const u=new Set;n.forEach(g=>u.add(R(g.getCollectionPath())));const c=[];return u.forEach(g=>{const S=IDBKeyRange.bound([this.userId,g,o],[this.userId,g,o+1],!1,!0);c.push(Nl(e).H("collectionPathOverlayIndex",S))}),Be.waitFor(c)}getOverlaysForCollection(e,n,o){const u=zo(),c=R(n),g=IDBKeyRange.bound([this.userId,c,o],[this.userId,c,Number.POSITIVE_INFINITY],!0);return Nl(e).W("collectionPathOverlayIndex",g).next(S=>{for(const x of S){const G=fp(this.serializer,x);u.set(G.getKey(),G)}return u})}getOverlaysForCollectionGroup(e,n,o,u){const c=zo();let g;const S=IDBKeyRange.bound([this.userId,n,o],[this.userId,n,Number.POSITIVE_INFINITY],!0);return Nl(e).Y({index:"collectionGroupOverlayIndex",range:S},(x,G,ee)=>{const le=fp(this.serializer,G);c.size()<u||le.largestBatchId===g?(c.set(le.getKey(),le),g=le.largestBatchId):ee.done()}).next(()=>c)}ht(e,n){return Nl(e).put(function(u,c,g){const[S,x,G]=pp(c,g.mutation.key);return{userId:c,collectionPath:x,documentId:G,collectionGroup:g.mutation.key.getCollectionGroup(),largestBatchId:g.largestBatchId,overlayMutation:Sl(u.ct,g.mutation)}}(this.serializer,this.userId,n))}}function Nl(i){return Ji(i,"documentOverlays")}class rl{constructor(){}Pt(e,n){this.It(e,n),n.Tt()}It(e,n){if("nullValue"in e)this.Et(n,5);else if("booleanValue"in e)this.Et(n,10),n.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(n,15),n.dt(zi(e.integerValue));else if("doubleValue"in e){const o=zi(e.doubleValue);isNaN(o)?this.Et(n,13):(this.Et(n,15),Ta(o)?n.dt(0):n.dt(o))}else if("timestampValue"in e){const o=e.timestampValue;this.Et(n,20),"string"==typeof o?n.At(o):(n.At(`${o.seconds||""}`),n.dt(o.nanos||0))}else if("stringValue"in e)this.Rt(e.stringValue,n),this.Vt(n);else if("bytesValue"in e)this.Et(n,30),n.ft(Ao(e.bytesValue)),this.Vt(n);else if("referenceValue"in e)this.gt(e.referenceValue,n);else if("geoPointValue"in e){const o=e.geoPointValue;this.Et(n,45),n.dt(o.latitude||0),n.dt(o.longitude||0)}else"mapValue"in e?At(e)?this.Et(n,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,n),this.Vt(n)):"arrayValue"in e?(this.wt(e.arrayValue,n),this.Vt(n)):bt()}Rt(e,n){this.Et(n,25),this.St(e,n)}St(e,n){n.At(e)}yt(e,n){const o=e.fields||{};this.Et(n,55);for(const u of Object.keys(o))this.Rt(u,n),this.It(o[u],n)}wt(e,n){const o=e.values||[];this.Et(n,50);for(const u of o)this.It(u,n)}gt(e,n){this.Et(n,37),Vt.fromName(e).path.forEach(o=>{this.Et(n,60),this.St(o,n)})}Et(e,n){e.dt(n)}Vt(e){e.dt(2)}}function nd(i){if(0===i)return 8;let e=0;return!(i>>4)&&(e+=4,i<<=4),!(i>>6)&&(e+=2,i<<=2),!(i>>7)&&(e+=1),e}function Rm(i){const e=64-function(o){let u=0;for(let c=0;c<8;++c){const g=nd(255&o[c]);if(u+=g,8!==g)break}return u}(i);return Math.ceil(e/8)}rl.bt=new rl;class Uy{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(e){const n=e[Symbol.iterator]();let o=n.next();for(;!o.done;)this.Ct(o.value),o=n.next();this.vt()}Ft(e){const n=e[Symbol.iterator]();let o=n.next();for(;!o.done;)this.Mt(o.value),o=n.next();this.xt()}Ot(e){for(const n of e){const o=n.charCodeAt(0);if(o<128)this.Ct(o);else if(o<2048)this.Ct(960|o>>>6),this.Ct(128|63&o);else if(n<"\ud800"||"\udbff"<n)this.Ct(480|o>>>12),this.Ct(128|63&o>>>6),this.Ct(128|63&o);else{const u=n.codePointAt(0);this.Ct(240|u>>>18),this.Ct(128|63&u>>>12),this.Ct(128|63&u>>>6),this.Ct(128|63&u)}}this.vt()}Nt(e){for(const n of e){const o=n.charCodeAt(0);if(o<128)this.Mt(o);else if(o<2048)this.Mt(960|o>>>6),this.Mt(128|63&o);else if(n<"\ud800"||"\udbff"<n)this.Mt(480|o>>>12),this.Mt(128|63&o>>>6),this.Mt(128|63&o);else{const u=n.codePointAt(0);this.Mt(240|u>>>18),this.Mt(128|63&u>>>12),this.Mt(128|63&u>>>6),this.Mt(128|63&u)}}this.xt()}Lt(e){const n=this.Bt(e),o=Rm(n);this.kt(1+o),this.buffer[this.position++]=255&o;for(let u=n.length-o;u<n.length;++u)this.buffer[this.position++]=255&n[u]}qt(e){const n=this.Bt(e),o=Rm(n);this.kt(1+o),this.buffer[this.position++]=~(255&o);for(let u=n.length-o;u<n.length;++u)this.buffer[this.position++]=~(255&n[u])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(e){this.kt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Wt(){return this.buffer.slice(0,this.position)}Bt(e){const n=function(c){const g=new DataView(new ArrayBuffer(8));return g.setFloat64(0,c,!1),new Uint8Array(g.buffer)}(e),o=0!=(128&n[0]);n[0]^=o?255:128;for(let u=1;u<n.length;++u)n[u]^=o?255:0;return n}Ct(e){const n=255&e;0===n?(this.Kt(0),this.Kt(255)):255===n?(this.Kt(255),this.Kt(0)):this.Kt(n)}Mt(e){const n=255&e;0===n?(this.Ut(0),this.Ut(255)):255===n?(this.Ut(255),this.Ut(0)):this.Ut(e)}vt(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(e){this.kt(1),this.buffer[this.position++]=e}Ut(e){this.kt(1),this.buffer[this.position++]=~e}kt(e){const n=e+this.position;if(n<=this.buffer.length)return;let o=2*this.buffer.length;o<n&&(o=n);const u=new Uint8Array(o);u.set(this.buffer),this.buffer=u}}class UE{constructor(e){this.Gt=e}ft(e){this.Gt.Dt(e)}At(e){this.Gt.Ot(e)}dt(e){this.Gt.Lt(e)}Tt(){this.Gt.Qt()}}class By{constructor(e){this.Gt=e}ft(e){this.Gt.Ft(e)}At(e){this.Gt.Nt(e)}dt(e){this.Gt.qt(e)}Tt(){this.Gt.$t()}}class mc{constructor(){this.Gt=new Uy,this.zt=new UE(this.Gt),this.jt=new By(this.Gt)}seed(e){this.Gt.seed(e)}Ht(e){return 0===e?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}}class _c{constructor(e,n,o,u){this.indexId=e,this.documentKey=n,this.arrayValue=o,this.directionalValue=u}Jt(){const e=this.directionalValue.length,n=0===e||255===this.directionalValue[e-1]?e+1:e,o=new Uint8Array(n);return o.set(this.directionalValue,0),n!==e?o.set([0],this.directionalValue.length):++o[o.length-1],new _c(this.indexId,this.documentKey,this.arrayValue,o)}}function Va(i,e){let n=i.indexId-e.indexId;return 0!==n?n:(n=jd(i.arrayValue,e.arrayValue),0!==n?n:(n=jd(i.directionalValue,e.directionalValue),0!==n?n:Vt.comparator(i.documentKey,e.documentKey)))}function jd(i,e){for(let n=0;n<i.length&&n<e.length;++n){const o=i[n]-e[n];if(0!==o)return o}return i.length-e.length}class Uh{constructor(e){this.Yt=new hi((n,o)=>_i.comparator(n.field,o.field)),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Zt=e.orderBy,this.Xt=[];for(const n of e.filters){const o=n;o.isInequality()?this.Yt=this.Yt.add(o):this.Xt.push(o)}}get en(){return this.Yt.size>1}tn(e){if(Jt(e.collectionGroup===this.collectionId),this.en)return!1;const n=wu(e);if(void 0!==n&&!this.nn(n))return!1;const o=wa(e);let u=new Set,c=0,g=0;for(;c<o.length&&this.nn(o[c]);++c)u=u.add(o[c].fieldPath.canonicalString());if(c===o.length)return!0;if(this.Yt.size>0){const S=this.Yt.getIterator().getNext();if(!u.has(S.field.canonicalString())){const x=o[c];if(!this.rn(S,x)||!this.sn(this.Zt[g++],x))return!1}++c}for(;c<o.length;++c)if(g>=this.Zt.length||!this.sn(this.Zt[g++],o[c]))return!1;return!0}on(){if(this.en)return null;let e=new hi(_i.comparator);const n=[];for(const o of this.Xt)if(!o.field.isKeyField())if("array-contains"===o.op||"array-contains-any"===o.op)n.push(new Ma(o.field,2));else{if(e.has(o.field))continue;e=e.add(o.field),n.push(new Ma(o.field,0))}for(const o of this.Zt)o.field.isKeyField()||e.has(o.field)||(e=e.add(o.field),n.push(new Ma(o.field,"asc"===o.dir?0:1)));return new wo(wo.UNKNOWN_ID,this.collectionId,n,dt.empty())}nn(e){for(const n of this.Xt)if(this.rn(n,e))return!0;return!1}rn(e,n){return!(void 0===e||!e.field.isEqual(n.fieldPath))&&2===n.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,n){return!!e.field.isEqual(n.fieldPath)&&(0===n.kind&&"asc"===e.dir||1===n.kind&&"desc"===e.dir)}}function mp(i){var e,n;if(Jt(i instanceof Nn||i instanceof kr),i instanceof Nn){if(i instanceof xa){const u=(null===(n=null===(e=i.value.arrayValue)||void 0===e?void 0:e.values)||void 0===n?void 0:n.map(c=>Nn.create(i.field,"==",c)))||[];return kr.create(u,"or")}return i}const o=i.filters.map(u=>mp(u));return kr.create(o,i.op)}function Pm(i){if(0===i.getFilters().length)return[];const e=_p(mp(i));return Jt(Mm(e)),Bh(e)||il(e)?[e]:e.getFilters()}function Bh(i){return i instanceof Nn}function il(i){return i instanceof kr&&Cu(i)}function Mm(i){return Bh(i)||il(i)||function(n){if(n instanceof kr&&Zu(n)){for(const o of n.getFilters())if(!Bh(o)&&!il(o))return!1;return!0}return!1}(i)}function _p(i){if(Jt(i instanceof Nn||i instanceof kr),i instanceof Nn)return i;if(1===i.filters.length)return _p(i.filters[0]);const e=i.filters.map(o=>_p(o));let n=kr.create(e,i.op);return n=jh(n),Mm(n)?n:(Jt(n instanceof kr),Jt(Ho(n)),Jt(n.filters.length>1),n.filters.reduce((o,u)=>yp(o,u)))}function yp(i,e){let n;return Jt(i instanceof Nn||i instanceof kr),Jt(e instanceof Nn||e instanceof kr),n=i instanceof Nn?e instanceof Nn?kr.create([i,e],"and"):Nm(i,e):e instanceof Nn?Nm(e,i):function(u,c){if(Jt(u.filters.length>0&&c.filters.length>0),Ho(u)&&Ho(c))return on(u,c.getFilters());const g=Zu(u)?u:c,S=Zu(u)?c:u,x=g.filters.map(G=>yp(G,S));return kr.create(x,"or")}(i,e),jh(n)}function Nm(i,e){if(Ho(e))return on(e,i.getFilters());{const n=e.filters.map(o=>yp(i,o));return kr.create(n,"or")}}function jh(i){if(Jt(i instanceof Nn||i instanceof kr),i instanceof Nn)return i;const e=i.getFilters();if(1===e.length)return jh(e[0]);if(hu(i))return i;const n=e.map(u=>jh(u)),o=[];return n.forEach(u=>{u instanceof Nn?o.push(u):u instanceof kr&&(u.op===i.op?o.push(...u.filters):o.push(u))}),1===o.length?o[0]:kr.create(o,i.op)}class sl{constructor(){this._n=new Ol}addToCollectionParentIndex(e,n){return this._n.add(n),Be.resolve()}getCollectionParents(e,n){return Be.resolve(this._n.getEntries(n))}addFieldIndex(e,n){return Be.resolve()}deleteFieldIndex(e,n){return Be.resolve()}deleteAllFieldIndexes(e){return Be.resolve()}createTargetIndexes(e,n){return Be.resolve()}getDocumentsMatchingTarget(e,n){return Be.resolve(null)}getIndexType(e,n){return Be.resolve(0)}getFieldIndexes(e,n){return Be.resolve([])}getNextCollectionGroupToUpdate(e){return Be.resolve(null)}getMinOffset(e,n){return Be.resolve(zs.min())}getMinOffsetFromCollectionGroup(e,n){return Be.resolve(zs.min())}updateCollectionGroup(e,n,o){return Be.resolve()}updateIndexEntries(e,n){return Be.resolve()}}class Ol{constructor(){this.index={}}add(e){const n=e.lastSegment(),o=e.popLast(),u=this.index[n]||new hi(qn.comparator),c=!u.has(o);return this.index[n]=u.add(o),c}has(e){const n=e.lastSegment(),o=e.popLast(),u=this.index[n];return u&&u.has(o)}getEntries(e){return(this.index[e]||new hi(qn.comparator)).toArray()}}const $h=new Uint8Array(0);class jy{constructor(e,n){this.databaseId=n,this.an=new Ol,this.un=new La(o=>ao(o),(o,u)=>po(o,u)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.an.has(n)){const o=n.lastSegment(),u=n.popLast();e.addOnCommittedListener(()=>{this.an.add(n)});const c={collectionId:o,parent:R(u)};return Om(e).put(c)}return Be.resolve()}getCollectionParents(e,n){const o=[],u=IDBKeyRange.bound([n,""],[$u(n),""],!1,!0);return Om(e).W(u).next(c=>{for(const g of c){if(g.collectionId!==n)break;o.push(B(g.parent))}return o})}addFieldIndex(e,n){const o=$d(e),u={indexId:(S=n).indexId,collectionGroup:S.collectionGroup,fields:S.fields.map(x=>[x.fieldPath.canonicalString(),x.kind])};var S;delete u.indexId;const c=o.add(u);if(n.indexState){const g=id(e);return c.next(S=>{g.put(bm(S,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return c.next()}deleteFieldIndex(e,n){const o=$d(e),u=id(e),c=rd(e);return o.delete(n.indexId).next(()=>u.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>c.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=$d(e),o=rd(e),u=id(e);return n.H().next(()=>o.H()).next(()=>u.H())}createTargetIndexes(e,n){return Be.forEach(this.cn(n),o=>this.getIndexType(e,o).next(u=>{if(0===u||1===u){const c=new Uh(o).on();if(null!=c)return this.addFieldIndex(e,c)}}))}getDocumentsMatchingTarget(e,n){const o=rd(e);let u=!0;const c=new Map;return Be.forEach(this.cn(n),g=>this.ln(e,g).next(S=>{u&&(u=!!S),c.set(g,S)})).next(()=>{if(u){let g=h();const S=[];return Be.forEach(c,(x,G)=>{var yn;ct("IndexedDbIndexManager",`Using index ${yn=x,`id=${yn.indexId}|cg=${yn.collectionGroup}|f=${yn.fields.map(Pr=>`${Pr.fieldPath}:${Pr.kind}`).join(",")}`} to execute ${ao(n)}`);const ee=function(yn,Pr){const ns=wu(Pr);if(void 0===ns)return null;for(const xi of fu(yn,ns.fieldPath))switch(xi.op){case"array-contains-any":return xi.value.arrayValue.values||[];case"array-contains":return[xi.value]}return null}(G,x),le=function(yn,Pr){const ns=new Map;for(const xi of wa(Pr))for(const Ro of fu(yn,xi.fieldPath))switch(Ro.op){case"==":case"in":ns.set(xi.fieldPath.canonicalString(),Ro.value);break;case"not-in":case"!=":return ns.set(xi.fieldPath.canonicalString(),Ro.value),Array.from(ns.values())}return null}(G,x),Ce=function(yn,Pr){const ns=[];let xi=!0;for(const Ro of wa(Pr)){const Ua=0===Ro.kind?Wf(yn,Ro.fieldPath,yn.startAt):ua(yn,Ro.fieldPath,yn.startAt);ns.push(Ua.value),xi&&(xi=Ua.inclusive)}return new Zr(ns,xi)}(G,x),Ge=function(yn,Pr){const ns=[];let xi=!0;for(const Ro of wa(Pr)){const Ua=0===Ro.kind?ua(yn,Ro.fieldPath,yn.endAt):Wf(yn,Ro.fieldPath,yn.endAt);ns.push(Ua.value),xi&&(xi=Ua.inclusive)}return new Zr(ns,xi)}(G,x),Rt=this.hn(x,G,Ce),Ht=this.hn(x,G,Ge),Bt=this.Pn(x,G,le),Tn=this.In(x.indexId,ee,Rt,Ce.inclusive,Ht,Ge.inclusive,Bt);return Be.forEach(Tn,dr=>o.j(dr,n.limit).next(yn=>{yn.forEach(Pr=>{const ns=Vt.fromSegments(Pr.documentKey);g.has(ns)||(g=g.add(ns),S.push(ns))})}))}).next(()=>S)}return Be.resolve(null)})}cn(e){let n=this.un.get(e);return n||(n=0===e.filters.length?[e]:Pm(kr.create(e.filters,"and")).map(o=>ys(e.path,e.collectionGroup,e.orderBy,o.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,n),n)}In(e,n,o,u,c,g,S){const x=(null!=n?n.length:1)*Math.max(o.length,c.length),G=x/(null!=n?n.length:1),ee=[];for(let le=0;le<x;++le){const Ce=n?this.Tn(n[le/G]):$h,Ge=this.En(e,Ce,o[le%G],u),Rt=this.dn(e,Ce,c[le%G],g),Ht=S.map(Bt=>this.En(e,Ce,Bt,!0));ee.push(...this.createRange(Ge,Rt,Ht))}return ee}En(e,n,o,u){const c=new _c(e,Vt.empty(),n,o);return u?c:c.Jt()}dn(e,n,o,u){const c=new _c(e,Vt.empty(),n,o);return u?c.Jt():c}ln(e,n){const o=new Uh(n),u=null!=n.collectionGroup?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,u).next(c=>{let g=null;for(const S of c)o.tn(S)&&(!g||S.fields.length>g.fields.length)&&(g=S);return g})}getIndexType(e,n){let o=2;const u=this.cn(n);return Be.forEach(u,c=>this.ln(e,c).next(g=>{g?0!==o&&g.fields.length<function(x){let G=new hi(_i.comparator),ee=!1;for(const le of x.filters)for(const Ce of le.getFlattenedFilters())Ce.field.isKeyField()||("array-contains"===Ce.op||"array-contains-any"===Ce.op?ee=!0:G=G.add(Ce.field));for(const le of x.orderBy)le.field.isKeyField()||(G=G.add(le.field));return G.size+(ee?1:0)}(c)&&(o=1):o=0})).next(()=>null!==n.limit&&u.length>1&&2===o?1:o)}An(e,n){const o=new mc;for(const u of wa(e)){const c=n.data.field(u.fieldPath);if(null==c)return null;const g=o.Ht(u.kind);rl.bt.Pt(c,g)}return o.Wt()}Tn(e){const n=new mc;return rl.bt.Pt(e,n.Ht(0)),n.Wt()}Rn(e,n){const o=new mc;return rl.bt.Pt(T(this.databaseId,n),o.Ht(function(c){const g=wa(c);return 0===g.length?0:g[g.length-1].kind}(e))),o.Wt()}Pn(e,n,o){if(null===o)return[];let u=[];u.push(new mc);let c=0;for(const g of wa(e)){const S=o[c++];for(const x of u)if(this.Vn(n,g.fieldPath)&&Y(S))u=this.mn(u,g,S);else{const G=x.Ht(g.kind);rl.bt.Pt(S,G)}}return this.fn(u)}hn(e,n,o){return this.Pn(e,n,o.position)}fn(e){const n=[];for(let o=0;o<e.length;++o)n[o]=e[o].Wt();return n}mn(e,n,o){const u=[...e],c=[];for(const g of o.arrayValue.values||[])for(const S of u){const x=new mc;x.seed(S.Wt()),rl.bt.Pt(g,x.Ht(n.kind)),c.push(x)}return c}Vn(e,n){return!!e.filters.find(o=>o instanceof Nn&&o.field.isEqual(n)&&("in"===o.op||"not-in"===o.op))}getFieldIndexes(e,n){const o=$d(e),u=id(e);return(n?o.W("collectionGroupIndex",IDBKeyRange.bound(n,n)):o.W()).next(c=>{const g=[];return Be.forEach(c,S=>u.get([S.indexId,this.uid]).next(x=>{g.push(function(ee,le){const Ce=le?new dt(le.sequenceNumber,new zs(nl(le.readTime),new Vt(B(le.documentKey)),le.largestBatchId)):dt.empty(),Ge=ee.fields.map(([Rt,Ht])=>new Ma(_i.fromServerFormat(Rt),Ht));return new wo(ee.indexId,ee.collectionGroup,Ge,Ce)}(S,x))})).next(()=>g)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>0===n.length?null:(n.sort((o,u)=>{const c=o.indexState.sequenceNumber-u.indexState.sequenceNumber;return 0!==c?c:kn(o.collectionGroup,u.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,o){const u=$d(e),c=id(e);return this.gn(e).next(g=>u.W("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(S=>Be.forEach(S,x=>c.put(bm(x.indexId,this.uid,g,o)))))}updateIndexEntries(e,n){const o=new Map;return Be.forEach(n,(u,c)=>{const g=o.get(u.collectionGroup);return(g?Be.resolve(g):this.getFieldIndexes(e,u.collectionGroup)).next(S=>(o.set(u.collectionGroup,S),Be.forEach(S,x=>this.pn(e,u,x).next(G=>{const ee=this.yn(c,x);return G.isEqual(ee)?Be.resolve():this.wn(e,c,x,G,ee)}))))})}Sn(e,n,o,u){return rd(e).put({indexId:u.indexId,uid:this.uid,arrayValue:u.arrayValue,directionalValue:u.directionalValue,orderedDocumentKey:this.Rn(o,n.key),documentKey:n.key.path.toArray()})}bn(e,n,o,u){return rd(e).delete([u.indexId,this.uid,u.arrayValue,u.directionalValue,this.Rn(o,n.key),n.key.path.toArray()])}pn(e,n,o){const u=rd(e);let c=new hi(Va);return u.Y({index:"documentKeyIndex",range:IDBKeyRange.only([o.indexId,this.uid,this.Rn(o,n)])},(g,S)=>{c=c.add(new _c(o.indexId,n,S.arrayValue,S.directionalValue))}).next(()=>c)}yn(e,n){let o=new hi(Va);const u=this.An(n,e);if(null==u)return o;const c=wu(n);if(null!=c){const g=e.data.field(c.fieldPath);if(Y(g))for(const S of g.arrayValue.values||[])o=o.add(new _c(n.indexId,e.key,this.Tn(S),u))}else o=o.add(new _c(n.indexId,e.key,$h,u));return o}wn(e,n,o,u,c){ct("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const g=[];return function(x,G,ee,le,Ce){const Ge=x.getIterator(),Rt=G.getIterator();let Ht=qa(Ge),Bt=qa(Rt);for(;Ht||Bt;){let Tn=!1,dr=!1;if(Ht&&Bt){const yn=ee(Ht,Bt);yn<0?dr=!0:yn>0&&(Tn=!0)}else null!=Ht?dr=!0:Tn=!0;Tn?(le(Bt),Bt=qa(Rt)):dr?(Ce(Ht),Ht=qa(Ge)):(Ht=qa(Ge),Bt=qa(Rt))}}(u,c,Va,S=>{g.push(this.Sn(e,n,o,S))},S=>{g.push(this.bn(e,n,o,S))}),Be.waitFor(g)}gn(e){let n=1;return id(e).Y({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(o,u,c)=>{c.done(),n=u.sequenceNumber+1}).next(()=>n)}createRange(e,n,o){o=o.sort((g,S)=>Va(g,S)).filter((g,S,x)=>!S||0!==Va(g,x[S-1]));const u=[];u.push(e);for(const g of o){const S=Va(g,e),x=Va(g,n);if(0===S)u[0]=e.Jt();else if(S>0&&x<0)u.push(g),u.push(g.Jt());else if(x>0)break}u.push(n);const c=[];for(let g=0;g<u.length;g+=2){if(this.Dn(u[g],u[g+1]))return[];c.push(IDBKeyRange.bound([u[g].indexId,this.uid,u[g].arrayValue,u[g].directionalValue,$h,[]],[u[g+1].indexId,this.uid,u[g+1].arrayValue,u[g+1].directionalValue,$h,[]]))}return c}Dn(e,n){return Va(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(vp)}getMinOffset(e,n){return Be.mapArray(this.cn(n),o=>this.ln(e,o).next(u=>u||bt())).next(vp)}}function Om(i){return Ji(i,"collectionParents")}function rd(i){return Ji(i,"indexEntries")}function $d(i){return Ji(i,"indexConfiguration")}function id(i){return Ji(i,"indexState")}function vp(i){Jt(0!==i.length);let e=i[0].indexState.offset,n=e.largestBatchId;for(let o=1;o<i.length;o++){const u=i[o].indexState.offset;Yi(u,e)<0&&(e=u),n<u.largestBatchId&&(n=u.largestBatchId)}return new zs(e.readTime,e.documentKey,n)}const xm={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class la{constructor(e,n,o){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=o}static withCacheSize(e){return new la(e,la.DEFAULT_COLLECTION_PERCENTILE,la.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function km(i,e,n){const o=i.store("mutations"),u=i.store("documentMutations"),c=[],g=IDBKeyRange.only(n.batchId);let S=0;const x=o.Y({range:g},(ee,le,Ce)=>(S++,Ce.delete()));c.push(x.next(()=>{Jt(1===S)}));const G=[];for(const ee of n.mutations){const le=qe(e,ee.key.path,n.batchId);c.push(u.delete(le)),G.push(ee.key)}return Be.waitFor(c).next(()=>G)}function Hh(i){if(!i)return 0;let e;if(i.document)e=i.document;else if(i.unknownDocument)e=i.unknownDocument;else{if(!i.noDocument)throw bt();e=i.noDocument}return JSON.stringify(e).length}la.DEFAULT_COLLECTION_PERCENTILE=10,la.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,la.DEFAULT=new la(41943040,la.DEFAULT_COLLECTION_PERCENTILE,la.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),la.DISABLED=new la(-1,0,0);class yc{constructor(e,n,o,u){this.userId=e,this.serializer=n,this.indexManager=o,this.referenceDelegate=u,this.Cn={}}static lt(e,n,o,u){Jt(""!==e.uid);const c=e.isAuthenticated()?e.uid:"";return new yc(c,n,o,u)}checkEmpty(e){let n=!0;const o=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ja(e).Y({index:"userMutationsIndex",range:o},(u,c,g)=>{n=!1,g.done()}).next(()=>n)}addMutationBatch(e,n,o,u){const c=vc(e),g=Ja(e);return g.add({}).next(S=>{Jt("number"==typeof S);const x=new Jf(S,n,o,u),G=function(Ge,Rt,Ht){const Bt=Ht.baseMutations.map(dr=>Sl(Ge.ct,dr)),Tn=Ht.mutations.map(dr=>Sl(Ge.ct,dr));return{userId:Rt,batchId:Ht.batchId,localWriteTimeMs:Ht.localWriteTime.toMillis(),baseMutations:Bt,mutations:Tn}}(this.serializer,this.userId,x),ee=[];let le=new hi((Ce,Ge)=>kn(Ce.canonicalString(),Ge.canonicalString()));for(const Ce of u){const Ge=qe(this.userId,Ce.key.path,S);le=le.add(Ce.key.path.popLast()),ee.push(g.put(G)),ee.push(c.put(Ge,ze))}return le.forEach(Ce=>{ee.push(this.indexManager.addToCollectionParentIndex(e,Ce))}),e.addOnCommittedListener(()=>{this.Cn[S]=x.keys()}),Be.waitFor(ee).next(()=>x)})}lookupMutationBatch(e,n){return Ja(e).get(n).next(o=>o?(Jt(o.userId===this.userId),Mu(this.serializer,o)):null)}vn(e,n){return this.Cn[n]?Be.resolve(this.Cn[n]):this.lookupMutationBatch(e,n).next(o=>{if(o){const u=o.keys();return this.Cn[n]=u,u}return null})}getNextMutationBatchAfterBatchId(e,n){const o=n+1,u=IDBKeyRange.lowerBound([this.userId,o]);let c=null;return Ja(e).Y({index:"userMutationsIndex",range:u},(g,S,x)=>{S.userId===this.userId&&(Jt(S.batchId>=o),c=Mu(this.serializer,S)),x.done()}).next(()=>c)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let o=-1;return Ja(e).Y({index:"userMutationsIndex",range:n,reverse:!0},(u,c,g)=>{o=c.batchId,g.done()}).next(()=>o)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Ja(e).W("userMutationsIndex",n).next(o=>o.map(u=>Mu(this.serializer,u)))}getAllMutationBatchesAffectingDocumentKey(e,n){const o=fe(this.userId,n.path),u=IDBKeyRange.lowerBound(o),c=[];return vc(e).Y({range:u},(g,S,x)=>{const[G,ee,le]=g,Ce=B(ee);if(G===this.userId&&n.path.isEqual(Ce))return Ja(e).get(le).next(Ge=>{if(!Ge)throw bt();Jt(Ge.userId===this.userId),c.push(Mu(this.serializer,Ge))});x.done()}).next(()=>c)}getAllMutationBatchesAffectingDocumentKeys(e,n){let o=new hi(kn);const u=[];return n.forEach(c=>{const g=fe(this.userId,c.path),S=IDBKeyRange.lowerBound(g),x=vc(e).Y({range:S},(G,ee,le)=>{const[Ce,Ge,Rt]=G,Ht=B(Ge);Ce===this.userId&&c.path.isEqual(Ht)?o=o.add(Rt):le.done()});u.push(x)}),Be.waitFor(u).next(()=>this.Fn(e,o))}getAllMutationBatchesAffectingQuery(e,n){const o=n.path,u=o.length+1,c=fe(this.userId,o),g=IDBKeyRange.lowerBound(c);let S=new hi(kn);return vc(e).Y({range:g},(x,G,ee)=>{const[le,Ce,Ge]=x,Rt=B(Ce);le===this.userId&&o.isPrefixOf(Rt)?Rt.length===u&&(S=S.add(Ge)):ee.done()}).next(()=>this.Fn(e,S))}Fn(e,n){const o=[],u=[];return n.forEach(c=>{u.push(Ja(e).get(c).next(g=>{if(null===g)throw bt();Jt(g.userId===this.userId),o.push(Mu(this.serializer,g))}))}),Be.waitFor(u).next(()=>o)}removeMutationBatch(e,n){return km(e.ae,this.userId,n).next(o=>(e.addOnCommittedListener(()=>{this.Mn(n.batchId)}),Be.forEach(o,u=>this.referenceDelegate.markPotentiallyOrphaned(e,u))))}Mn(e){delete this.Cn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return Be.resolve();const o=IDBKeyRange.lowerBound([this.userId]),u=[];return vc(e).Y({range:o},(c,g,S)=>{if(c[0]===this.userId){const x=B(c[1]);u.push(x)}else S.done()}).next(()=>{Jt(0===u.length)})})}containsKey(e,n){return Nu(e,this.userId,n)}xn(e){return Ep(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Nu(i,e,n){const o=fe(e,n.path),u=o[1],c=IDBKeyRange.lowerBound(o);let g=!1;return vc(i).Y({range:c,J:!0},(S,x,G)=>{const[ee,le,Ce]=S;ee===e&&le===u&&(g=!0),G.done()}).next(()=>g)}function Ja(i){return Ji(i,"mutations")}function vc(i){return Ji(i,"documentMutations")}function Ep(i){return Ji(i,"mutationQueues")}class xl{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new xl(0)}static Ln(){return new xl(-1)}}class BE{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.Bn(e).next(n=>{const o=new xl(n.highestTargetId);return n.highestTargetId=o.next(),this.kn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Bn(e).next(n=>cn.fromTimestamp(new Zt(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Bn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,o){return this.Bn(e).next(u=>(u.highestListenSequenceNumber=n,o&&(u.lastRemoteSnapshotVersion=o.toTimestamp()),n>u.highestListenSequenceNumber&&(u.highestListenSequenceNumber=n),this.kn(e,u)))}addTargetData(e,n){return this.qn(e,n).next(()=>this.Bn(e).next(o=>(o.targetCount+=1,this.Qn(n,o),this.kn(e,o))))}updateTargetData(e,n){return this.qn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>Hd(e).delete(n.targetId)).next(()=>this.Bn(e)).next(o=>(Jt(o.targetCount>0),o.targetCount-=1,this.kn(e,o)))}removeTargets(e,n,o){let u=0;const c=[];return Hd(e).Y((g,S)=>{const x=td(S);x.sequenceNumber<=n&&null===o.get(x.targetId)&&(u++,c.push(this.removeTargetData(e,x)))}).next(()=>Be.waitFor(c)).next(()=>u)}forEachTarget(e,n){return Hd(e).Y((o,u)=>{const c=td(u);n(c)})}Bn(e){return $y(e).get("targetGlobalKey").next(n=>(Jt(null!==n),n))}kn(e,n){return $y(e).put("targetGlobalKey",n)}qn(e,n){return Hd(e).put(Vh(this.serializer,n))}Qn(e,n){let o=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,o=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,o=!0),o}getTargetCount(e){return this.Bn(e).next(n=>n.targetCount)}getTargetData(e,n){const o=ao(n),u=IDBKeyRange.bound([o,Number.NEGATIVE_INFINITY],[o,Number.POSITIVE_INFINITY]);let c=null;return Hd(e).Y({range:u,index:"queryTargetsIndex"},(g,S,x)=>{const G=td(S);po(n,G.target)&&(c=G,x.done())}).next(()=>c)}addMatchingKeys(e,n,o){const u=[],c=Ou(e);return n.forEach(g=>{const S=R(g.path);u.push(c.put({targetId:o,path:S})),u.push(this.referenceDelegate.addReference(e,o,g))}),Be.waitFor(u)}removeMatchingKeys(e,n,o){const u=Ou(e);return Be.forEach(n,c=>{const g=R(c.path);return Be.waitFor([u.delete([o,g]),this.referenceDelegate.removeReference(e,o,c)])})}removeMatchingKeysForTargetId(e,n){const o=Ou(e),u=IDBKeyRange.bound([n],[n+1],!1,!0);return o.delete(u)}getMatchingKeysForTargetId(e,n){const o=IDBKeyRange.bound([n],[n+1],!1,!0),u=Ou(e);let c=h();return u.Y({range:o,J:!0},(g,S,x)=>{const G=B(g[1]),ee=new Vt(G);c=c.add(ee)}).next(()=>c)}containsKey(e,n){const o=R(n.path),u=IDBKeyRange.bound([o],[$u(o)],!1,!0);let c=0;return Ou(e).Y({index:"documentTargetsIndex",J:!0,range:u},([g,S],x,G)=>{0!==g&&(c++,G.done())}).next(()=>c>0)}_t(e,n){return Hd(e).get(n).next(o=>o?td(o):null)}}function Hd(i){return Ji(i,"targets")}function $y(i){return Ji(i,"targetGlobal")}function Ou(i){return Ji(i,"targetDocuments")}function zh([i,e],[n,o]){const u=kn(i,n);return 0===u?kn(e,o):u}class jE{constructor(e){this.Kn=e,this.buffer=new hi(zh),this.$n=0}Un(){return++this.$n}Wn(e){const n=[e,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(n);else{const o=this.buffer.last();zh(n,o)<0&&(this.buffer=this.buffer.delete(o).add(n))}}get maxValue(){return this.buffer.last()[0]}}class Hy{constructor(e,n,o){this.garbageCollector=e,this.asyncQueue=n,this.localStore=o,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.zn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}zn(e){var n=this;ct("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,f.Z)(function*(){n.Gn=null;try{yield n.localStore.collectGarbage(n.garbageCollector)}catch(o){Ti(o)?ct("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",o):yield os(o)}yield n.zn(3e5)}))}}class Fm{constructor(e,n){this.jn=e,this.params=n}calculateTargetCount(e,n){return this.jn.Hn(e).next(o=>Math.floor(n/100*o))}nthSequenceNumber(e,n){if(0===n)return Be.resolve(fo._e);const o=new jE(n);return this.jn.forEachTarget(e,u=>o.Wn(u.sequenceNumber)).next(()=>this.jn.Jn(e,u=>o.Wn(u))).next(()=>o.maxValue)}removeTargets(e,n,o){return this.jn.removeTargets(e,n,o)}removeOrphanedDocuments(e,n){return this.jn.removeOrphanedDocuments(e,n)}collect(e,n){return-1===this.params.cacheSizeCollectionThreshold?(ct("LruGarbageCollector","Garbage collection skipped; disabled"),Be.resolve(xm)):this.getCacheSize(e).next(o=>o<this.params.cacheSizeCollectionThreshold?(ct("LruGarbageCollector",`Garbage collection skipped; Cache size ${o} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),xm):this.Yn(e,n))}getCacheSize(e){return this.jn.getCacheSize(e)}Yn(e,n){let o,u,c,g,S,x,G;const ee=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(le=>(le>this.params.maximumSequenceNumbersToCollect?(ct("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${le}`),u=this.params.maximumSequenceNumbersToCollect):u=le,g=Date.now(),this.nthSequenceNumber(e,u))).next(le=>(o=le,S=Date.now(),this.removeTargets(e,o,n))).next(le=>(c=le,x=Date.now(),this.removeOrphanedDocuments(e,o))).next(le=>(G=Date.now(),wi()<=ye.in.DEBUG&&ct("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${g-ee}ms\n\tDetermined least recently used ${u} in `+(S-g)+`ms\n\tRemoved ${c} targets in `+(x-S)+`ms\n\tRemoved ${le} documents in `+(G-x)+`ms\nTotal Duration: ${G-ee}ms`),Be.resolve({didRun:!0,sequenceNumbersCollected:u,targetsRemoved:c,documentsRemoved:le})))}}class zy{constructor(e,n){this.db=e,this.garbageCollector=function Lm(i,e){return new Fm(i,e)}(this,n)}Hn(e){const n=this.Zn(e);return this.db.getTargetCache().getTargetCount(e).next(o=>n.next(u=>o+u))}Zn(e){let n=0;return this.Jn(e,o=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Jn(e,n){return this.Xn(e,(o,u)=>n(u))}addReference(e,n,o){return Gh(e,o)}removeReference(e,n,o){return Gh(e,o)}removeTargets(e,n,o){return this.db.getTargetCache().removeTargets(e,n,o)}markPotentiallyOrphaned(e,n){return Gh(e,n)}er(e,n){return function(u,c){let g=!1;return Ep(u).Z(S=>Nu(u,S,c).next(x=>(x&&(g=!0),Be.resolve(!x)))).next(()=>g)}(e,n)}removeOrphanedDocuments(e,n){const o=this.db.getRemoteDocumentCache().newChangeBuffer(),u=[];let c=0;return this.Xn(e,(g,S)=>{if(S<=n){const x=this.er(e,g).next(G=>{if(!G)return c++,o.getEntry(e,g).next(()=>(o.removeEntry(g,cn.min()),Ou(e).delete([0,R(g.path)])))});u.push(x)}}).next(()=>Be.waitFor(u)).next(()=>o.apply(e)).next(()=>c)}removeTarget(e,n){const o=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,o)}updateLimboDocument(e,n){return Gh(e,n)}Xn(e,n){const o=Ou(e);let u,c=fo._e;return o.Y({index:"documentTargetsIndex"},([g,S],{path:x,sequenceNumber:G})=>{0===g?(c!==fo._e&&n(new Vt(B(u)),c),c=G,u=x):c=fo._e}).next(()=>{c!==fo._e&&n(new Vt(B(u)),c)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Gh(i,e){return Ou(i).put((u=i.currentSequenceNumber,{targetId:0,path:R(e.path),sequenceNumber:u}));var u}class Vm{constructor(){this.changes=new La(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,wn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const o=this.changes.get(n);return void 0!==o?Be.resolve(o):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Um{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,o){return Ec(e).put(o)}removeEntry(e,n,o){return Ec(e).delete(function(c,g){const S=c.path.toArray();return[S.slice(0,S.length-2),S[S.length-2],Pl(g),S[S.length-1]]}(n,o))}updateMetadata(e,n){return this.getMetadata(e).next(o=>(o.byteSize+=n,this.tr(e,o)))}getEntry(e,n){let o=wn.newInvalidDocument(n);return Ec(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(_u(n))},(u,c)=>{o=this.nr(n,c)}).next(()=>o)}rr(e,n){let o={size:0,document:wn.newInvalidDocument(n)};return Ec(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(_u(n))},(u,c)=>{o={document:this.nr(n,c),size:Hh(c)}}).next(()=>o)}getEntries(e,n){let o=bo();return this.ir(e,n,(u,c)=>{const g=this.nr(u,c);o=o.insert(u,g)}).next(()=>o)}sr(e,n){let o=bo(),u=new Ai(Vt.comparator);return this.ir(e,n,(c,g)=>{const S=this.nr(c,g);o=o.insert(c,S),u=u.insert(c,Hh(g))}).next(()=>({documents:o,_r:u}))}ir(e,n,o){if(n.isEmpty())return Be.resolve();let u=new hi(jm);n.forEach(x=>u=u.add(x));const c=IDBKeyRange.bound(_u(u.first()),_u(u.last())),g=u.getIterator();let S=g.getNext();return Ec(e).Y({index:"documentKeyIndex",range:c},(x,G,ee)=>{const le=Vt.fromSegments([...G.prefixPath,G.collectionGroup,G.documentId]);for(;S&&jm(S,le)<0;)o(S,null),S=g.getNext();S&&S.isEqual(le)&&(o(S,G),S=g.hasNext()?g.getNext():null),S?ee.U(_u(S)):ee.done()}).next(()=>{for(;S;)o(S,null),S=g.hasNext()?g.getNext():null})}getDocumentsMatchingQuery(e,n,o,u,c){const g=n.path,S=[g.popLast().toArray(),g.lastSegment(),Pl(o.readTime),o.documentKey.path.isEmpty()?"":o.documentKey.path.lastSegment()],x=[g.popLast().toArray(),g.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ec(e).W(IDBKeyRange.bound(S,x,!0)).next(G=>{c?.incrementDocumentReadCount(G.length);let ee=bo();for(const le of G){const Ce=this.nr(Vt.fromSegments(le.prefixPath.concat(le.collectionGroup,le.documentId)),le);Ce.isFoundDocument()&&(Za(n,Ce)||u.has(Ce.key))&&(ee=ee.insert(Ce.key,Ce))}return ee})}getAllFromCollectionGroup(e,n,o,u){let c=bo();const g=Ip(n,o),S=Ip(n,zs.max());return Ec(e).Y({index:"collectionGroupIndex",range:IDBKeyRange.bound(g,S,!0)},(x,G,ee)=>{const le=this.nr(Vt.fromSegments(G.prefixPath.concat(G.collectionGroup,G.documentId)),G);c=c.insert(le.key,le),c.size===u&&ee.done()}).next(()=>c)}newChangeBuffer(e){return new Bm(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return Wh(e).get("remoteDocumentGlobalKey").next(n=>(Jt(!!n),n))}tr(e,n){return Wh(e).put("remoteDocumentGlobalKey",n)}nr(e,n){if(n){const o=function Cm(i,e){let n;if(e.document)n=ym(i.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const o=Vt.fromSegments(e.noDocument.path),u=nl(e.noDocument.readTime);n=wn.newNoDocument(o,u),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return bt();{const o=Vt.fromSegments(e.unknownDocument.path),u=nl(e.unknownDocument.version);n=wn.newUnknownDocument(o,u)}}return e.readTime&&n.setReadTime(function(u){const c=new Zt(u[0],u[1]);return cn.fromTimestamp(c)}(e.readTime)),n}(this.serializer,n);if(!o.isNoDocument()||!o.version.isEqual(cn.min()))return o}return wn.newInvalidDocument(e)}}function zd(i){return new Um(i)}class Bm extends Vm{constructor(e,n){super(),this.ar=e,this.trackRemovals=n,this.ur=new La(o=>o.toString(),(o,u)=>o.isEqual(u))}applyChanges(e){const n=[];let o=0,u=new hi((c,g)=>kn(c.canonicalString(),g.canonicalString()));return this.changes.forEach((c,g)=>{const S=this.ur.get(c);if(n.push(this.ar.removeEntry(e,c,S.readTime)),g.isValidDocument()){const x=Ud(this.ar.serializer,g);u=u.add(c.path.popLast());const G=Hh(x);o+=G-S.size,n.push(this.ar.addEntry(e,c,x))}else if(o-=S.size,this.trackRemovals){const x=Ud(this.ar.serializer,g.convertToNoDocument(cn.min()));n.push(this.ar.addEntry(e,c,x))}}),u.forEach(c=>{n.push(this.ar.indexManager.addToCollectionParentIndex(e,c))}),n.push(this.ar.updateMetadata(e,o)),Be.waitFor(n)}getFromCache(e,n){return this.ar.rr(e,n).next(o=>(this.ur.set(n,{size:o.size,readTime:o.document.readTime}),o.document))}getAllFromCache(e,n){return this.ar.sr(e,n).next(({documents:o,_r:u})=>(u.forEach((c,g)=>{this.ur.set(c,{size:g,readTime:o.get(c).readTime})}),o))}}function Wh(i){return Ji(i,"remoteDocumentGlobal")}function Ec(i){return Ji(i,"remoteDocumentsV14")}function _u(i){const e=i.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Ip(i,e){const n=e.documentKey.path.toArray();return[i,Pl(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function jm(i,e){const n=i.path.toArray(),o=e.path.toArray();let u=0;for(let c=0;c<n.length-2&&c<o.length-2;++c)if(u=kn(n[c],o[c]),u)return u;return u=kn(n.length,o.length),u||(u=kn(n[n.length-2],o[o.length-2]),u||kn(n[n.length-1],o[o.length-1]))}class wp{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class Tp{constructor(e,n,o,u){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=o,this.indexManager=u}getDocument(e,n){let o=null;return this.documentOverlayCache.getOverlay(e,n).next(u=>(o=u,this.remoteDocumentCache.getEntry(e,n))).next(u=>(null!==o&&Qc(o.mutation,u,Bo.empty(),Zt.now()),u))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(o=>this.getLocalViewOfDocuments(e,o,h()).next(()=>o))}getLocalViewOfDocuments(e,n,o=h()){const u=zo();return this.populateOverlays(e,u,n).next(()=>this.computeViews(e,n,u,o).next(c=>{let g=cc();return c.forEach((S,x)=>{g=g.insert(S,x.overlayedDocument)}),g}))}getOverlayedDocuments(e,n){const o=zo();return this.populateOverlays(e,o,n).next(()=>this.computeViews(e,n,o,h()))}populateOverlays(e,n,o){const u=[];return o.forEach(c=>{n.has(c)||u.push(c)}),this.documentOverlayCache.getOverlays(e,u).next(c=>{c.forEach((g,S)=>{n.set(g,S)})})}computeViews(e,n,o,u){let c=bo();const g=Wc(),S=Wc();return n.forEach((x,G)=>{const ee=o.get(G.key);u.has(G.key)&&(void 0===ee||ee.mutation instanceof Ru)?c=c.insert(G.key,G):void 0!==ee?(g.set(G.key,ee.mutation.getFieldMask()),Qc(ee.mutation,G,ee.mutation.getFieldMask(),Zt.now())):g.set(G.key,Bo.empty())}),this.recalculateAndSaveOverlays(e,c).next(x=>(x.forEach((G,ee)=>g.set(G,ee)),n.forEach((G,ee)=>{var le;return S.set(G,new wp(ee,null!==(le=g.get(G))&&void 0!==le?le:null))}),S))}recalculateAndSaveOverlays(e,n){const o=Wc();let u=new Ai((g,S)=>g-S),c=h();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(g=>{for(const S of g)S.keys().forEach(x=>{const G=n.get(x);if(null===G)return;let ee=o.get(x)||Bo.empty();ee=S.applyToLocalView(G,ee),o.set(x,ee);const le=(u.get(S.batchId)||h()).add(x);u=u.insert(S.batchId,le)})}).next(()=>{const g=[],S=u.getReverseIterator();for(;S.hasNext();){const x=S.getNext(),G=x.key,ee=x.value,le=Al();ee.forEach(Ce=>{if(!c.has(Ce)){const Ge=Ju(n.get(Ce),o.get(Ce));null!==Ge&&le.set(Ce,Ge),c=c.add(Ce)}}),g.push(this.documentOverlayCache.saveOverlays(e,G,le))}return Be.waitFor(g)}).next(()=>o)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(o=>this.recalculateAndSaveOverlays(e,o))}getDocumentsMatchingQuery(e,n,o,u){return Vt.isDocumentKey((g=n).path)&&null===g.collectionGroup&&0===g.filters.length?this.getDocumentsMatchingDocumentQuery(e,n.path):ac(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,o,u):this.getDocumentsMatchingCollectionQuery(e,n,o,u);var g}getNextDocuments(e,n,o,u){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,o,u).next(c=>{const g=u-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,o.largestBatchId,u-c.size):Be.resolve(zo());let S=-1,x=c;return g.next(G=>Be.forEach(G,(ee,le)=>(S<le.largestBatchId&&(S=le.largestBatchId),c.get(ee)?Be.resolve():this.remoteDocumentCache.getEntry(e,ee).next(Ce=>{x=x.insert(ee,Ce)}))).next(()=>this.populateOverlays(e,G,c)).next(()=>this.computeViews(e,x,G,h())).next(ee=>({batchId:S,changes:Rh(ee)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Vt(n)).next(o=>{let u=cc();return o.isFoundDocument()&&(u=u.insert(o.key,o)),u})}getDocumentsMatchingCollectionGroupQuery(e,n,o,u){const c=n.collectionGroup;let g=cc();return this.indexManager.getCollectionParents(e,c).next(S=>Be.forEach(S,x=>{const G=(le=n,Ce=x.child(c),new Fa(Ce,null,le.explicitOrderBy.slice(),le.filters.slice(),le.limit,le.limitType,le.startAt,le.endAt));var le,Ce;return this.getDocumentsMatchingCollectionQuery(e,G,o,u).next(ee=>{ee.forEach((le,Ce)=>{g=g.insert(le,Ce)})})}).next(()=>g))}getDocumentsMatchingCollectionQuery(e,n,o,u){let c;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,o.largestBatchId).next(g=>(c=g,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,o,c,u))).next(g=>{c.forEach((x,G)=>{const ee=G.getKey();null===g.get(ee)&&(g=g.insert(ee,wn.newInvalidDocument(ee)))});let S=cc();return g.forEach((x,G)=>{const ee=c.get(x);void 0!==ee&&Qc(ee.mutation,G,Bo.empty(),Zt.now()),Za(n,G)&&(S=S.insert(x,G))}),S})}}class Gy{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,n){return Be.resolve(this.cr.get(n))}saveBundleMetadata(e,n){return this.cr.set(n.id,{id:(u=n).id,version:u.version,createTime:qs(u.createTime)}),Be.resolve();var u}getNamedQuery(e,n){return Be.resolve(this.lr.get(n))}saveNamedQuery(e,n){return this.lr.set(n.name,{name:(u=n).name,query:gc(u.bundledQuery),readTime:qs(u.readTime)}),Be.resolve();var u}}class Wy{constructor(){this.overlays=new Ai(Vt.comparator),this.hr=new Map}getOverlay(e,n){return Be.resolve(this.overlays.get(n))}getOverlays(e,n){const o=zo();return Be.forEach(n,u=>this.getOverlay(e,u).next(c=>{null!==c&&o.set(u,c)})).next(()=>o)}saveOverlays(e,n,o){return o.forEach((u,c)=>{this.ht(e,n,c)}),Be.resolve()}removeOverlaysForBatchId(e,n,o){const u=this.hr.get(o);return void 0!==u&&(u.forEach(c=>this.overlays=this.overlays.remove(c)),this.hr.delete(o)),Be.resolve()}getOverlaysForCollection(e,n,o){const u=zo(),c=n.length+1,g=new Vt(n.child("")),S=this.overlays.getIteratorFrom(g);for(;S.hasNext();){const x=S.getNext().value,G=x.getKey();if(!n.isPrefixOf(G.path))break;G.path.length===c&&x.largestBatchId>o&&u.set(x.getKey(),x)}return Be.resolve(u)}getOverlaysForCollectionGroup(e,n,o,u){let c=new Ai((G,ee)=>G-ee);const g=this.overlays.getIterator();for(;g.hasNext();){const G=g.getNext().value;if(G.getKey().getCollectionGroup()===n&&G.largestBatchId>o){let ee=c.get(G.largestBatchId);null===ee&&(ee=zo(),c=c.insert(G.largestBatchId,ee)),ee.set(G.getKey(),G)}}const S=zo(),x=c.getIterator();for(;x.hasNext()&&(x.getNext().value.forEach((G,ee)=>S.set(G,ee)),!(S.size()>=u)););return Be.resolve(S)}ht(e,n,o){const u=this.overlays.get(o.key);if(null!==u){const g=this.hr.get(u.largestBatchId).delete(o.key);this.hr.set(u.largestBatchId,g)}this.overlays=this.overlays.insert(o.key,new Mh(n,o));let c=this.hr.get(n);void 0===c&&(c=h(),this.hr.set(n,c)),this.hr.set(n,c.add(o.key))}}class Dp{constructor(){this.Pr=new hi(Wo.Ir),this.Tr=new hi(Wo.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,n){const o=new Wo(e,n);this.Pr=this.Pr.add(o),this.Tr=this.Tr.add(o)}dr(e,n){e.forEach(o=>this.addReference(o,n))}removeReference(e,n){this.Ar(new Wo(e,n))}Rr(e,n){e.forEach(o=>this.removeReference(o,n))}Vr(e){const n=new Vt(new qn([])),o=new Wo(n,e),u=new Wo(n,e+1),c=[];return this.Tr.forEachInRange([o,u],g=>{this.Ar(g),c.push(g.key)}),c}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const n=new Vt(new qn([])),o=new Wo(n,e),u=new Wo(n,e+1);let c=h();return this.Tr.forEachInRange([o,u],g=>{c=c.add(g.key)}),c}containsKey(e){const n=new Wo(e,0),o=this.Pr.firstAfterOrEqual(n);return null!==o&&e.isEqual(o.key)}}class Wo{constructor(e,n){this.key=e,this.pr=n}static Ir(e,n){return Vt.comparator(e.key,n.key)||kn(e.pr,n.pr)}static Er(e,n){return kn(e.pr,n.pr)||Vt.comparator(e.key,n.key)}}class $m{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new hi(Wo.Ir)}checkEmpty(e){return Be.resolve(0===this.mutationQueue.length)}addMutationBatch(e,n,o,u){const c=this.yr;this.yr++;const g=new Jf(c,n,o,u);this.mutationQueue.push(g);for(const S of u)this.wr=this.wr.add(new Wo(S.key,c)),this.indexManager.addToCollectionParentIndex(e,S.key.path.popLast());return Be.resolve(g)}lookupMutationBatch(e,n){return Be.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(e,n){const u=this.br(n+1),c=u<0?0:u;return Be.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return Be.resolve(0===this.mutationQueue.length?-1:this.yr-1)}getAllMutationBatches(e){return Be.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const o=new Wo(n,0),u=new Wo(n,Number.POSITIVE_INFINITY),c=[];return this.wr.forEachInRange([o,u],g=>{const S=this.Sr(g.pr);c.push(S)}),Be.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,n){let o=new hi(kn);return n.forEach(u=>{const c=new Wo(u,0),g=new Wo(u,Number.POSITIVE_INFINITY);this.wr.forEachInRange([c,g],S=>{o=o.add(S.pr)})}),Be.resolve(this.Dr(o))}getAllMutationBatchesAffectingQuery(e,n){const o=n.path,u=o.length+1;let c=o;Vt.isDocumentKey(c)||(c=c.child(""));const g=new Wo(new Vt(c),0);let S=new hi(kn);return this.wr.forEachWhile(x=>{const G=x.key.path;return!!o.isPrefixOf(G)&&(G.length===u&&(S=S.add(x.pr)),!0)},g),Be.resolve(this.Dr(S))}Dr(e){const n=[];return e.forEach(o=>{const u=this.Sr(o);null!==u&&n.push(u)}),n}removeMutationBatch(e,n){Jt(0===this.Cr(n.batchId,"removed")),this.mutationQueue.shift();let o=this.wr;return Be.forEach(n.mutations,u=>{const c=new Wo(u.key,n.batchId);return o=o.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,u.key)}).next(()=>{this.wr=o})}Mn(e){}containsKey(e,n){const o=new Wo(n,0),u=this.wr.firstAfterOrEqual(o);return Be.resolve(n.isEqual(u&&u.key))}performConsistencyCheck(e){return Be.resolve()}Cr(e,n){return this.br(e)}br(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Sr(e){const n=this.br(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class $E{constructor(e){this.vr=e,this.docs=new Ai(Vt.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const o=n.key,u=this.docs.get(o),c=u?u.size:0,g=this.vr(n);return this.docs=this.docs.insert(o,{document:n.mutableCopy(),size:g}),this.size+=g-c,this.indexManager.addToCollectionParentIndex(e,o.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const o=this.docs.get(n);return Be.resolve(o?o.document.mutableCopy():wn.newInvalidDocument(n))}getEntries(e,n){let o=bo();return n.forEach(u=>{const c=this.docs.get(u);o=o.insert(u,c?c.document.mutableCopy():wn.newInvalidDocument(u))}),Be.resolve(o)}getDocumentsMatchingQuery(e,n,o,u){let c=bo();const g=n.path,S=new Vt(g.child("")),x=this.docs.getIteratorFrom(S);for(;x.hasNext();){const{key:G,value:{document:ee}}=x.getNext();if(!g.isPrefixOf(G.path))break;G.path.length>g.length+1||Yi(Il(ee),o)<=0||(u.has(ee.key)||Za(n,ee))&&(c=c.insert(ee.key,ee.mutableCopy()))}return Be.resolve(c)}getAllFromCollectionGroup(e,n,o,u){bt()}Fr(e,n){return Be.forEach(this.docs,o=>n(o))}newChangeBuffer(e){return new HE(this)}getSize(e){return Be.resolve(this.size)}}class HE extends Vm{constructor(e){super(),this.ar=e}applyChanges(e){const n=[];return this.changes.forEach((o,u)=>{u.isValidDocument()?n.push(this.ar.addEntry(e,u)):this.ar.removeEntry(o)}),Be.waitFor(n)}getFromCache(e,n){return this.ar.getEntry(e,n)}getAllFromCache(e,n){return this.ar.getEntries(e,n)}}class Gd{constructor(e){this.persistence=e,this.Mr=new La(n=>ao(n),po),this.lastRemoteSnapshotVersion=cn.min(),this.highestTargetId=0,this.Or=0,this.Nr=new Dp,this.targetCount=0,this.Lr=xl.Nn()}forEachTarget(e,n){return this.Mr.forEach((o,u)=>n(u)),Be.resolve()}getLastRemoteSnapshotVersion(e){return Be.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Be.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),Be.resolve(this.highestTargetId)}setTargetsMetadata(e,n,o){return o&&(this.lastRemoteSnapshotVersion=o),n>this.Or&&(this.Or=n),Be.resolve()}qn(e){this.Mr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Lr=new xl(n),this.highestTargetId=n),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,n){return this.qn(n),this.targetCount+=1,Be.resolve()}updateTargetData(e,n){return this.qn(n),Be.resolve()}removeTargetData(e,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,Be.resolve()}removeTargets(e,n,o){let u=0;const c=[];return this.Mr.forEach((g,S)=>{S.sequenceNumber<=n&&null===o.get(S.targetId)&&(this.Mr.delete(g),c.push(this.removeMatchingKeysForTargetId(e,S.targetId)),u++)}),Be.waitFor(c).next(()=>u)}getTargetCount(e){return Be.resolve(this.targetCount)}getTargetData(e,n){const o=this.Mr.get(n)||null;return Be.resolve(o)}addMatchingKeys(e,n,o){return this.Nr.dr(n,o),Be.resolve()}removeMatchingKeys(e,n,o){this.Nr.Rr(n,o);const u=this.persistence.referenceDelegate,c=[];return u&&n.forEach(g=>{c.push(u.markPotentiallyOrphaned(e,g))}),Be.waitFor(c)}removeMatchingKeysForTargetId(e,n){return this.Nr.Vr(n),Be.resolve()}getMatchingKeysForTargetId(e,n){const o=this.Nr.gr(n);return Be.resolve(o)}containsKey(e,n){return Be.resolve(this.Nr.containsKey(n))}}class Ic{constructor(e,n){this.Br={},this.overlays={},this.kr=new fo(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new Gd(this),this.indexManager=new sl,this.remoteDocumentCache=new $E(o=>this.referenceDelegate.Kr(o)),this.serializer=new Lh(n),this.$r=new Gy(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Wy,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let o=this.Br[e.toKey()];return o||(o=new $m(n,this.referenceDelegate),this.Br[e.toKey()]=o),o}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,n,o){ct("MemoryPersistence","Starting transaction:",e);const u=new Hm(this.kr.next());return this.referenceDelegate.Ur(),o(u).next(c=>this.referenceDelegate.Wr(u).next(()=>c)).toPromise().then(c=>(u.raiseOnCommittedEvent(),c))}Gr(e,n){return Be.or(Object.values(this.Br).map(o=>()=>o.containsKey(e,n)))}}class Hm extends su{constructor(e){super(),this.currentSequenceNumber=e}}class Wd{constructor(e){this.persistence=e,this.zr=new Dp,this.jr=null}static Hr(e){return new Wd(e)}get Jr(){if(this.jr)return this.jr;throw bt()}addReference(e,n,o){return this.zr.addReference(o,n),this.Jr.delete(o.toString()),Be.resolve()}removeReference(e,n,o){return this.zr.removeReference(o,n),this.Jr.add(o.toString()),Be.resolve()}markPotentiallyOrphaned(e,n){return this.Jr.add(n.toString()),Be.resolve()}removeTarget(e,n){this.zr.Vr(n.targetId).forEach(u=>this.Jr.add(u.toString()));const o=this.persistence.getTargetCache();return o.getMatchingKeysForTargetId(e,n.targetId).next(u=>{u.forEach(c=>this.Jr.add(c.toString()))}).next(()=>o.removeTargetData(e,n))}Ur(){this.jr=new Set}Wr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Be.forEach(this.Jr,o=>{const u=Vt.fromPath(o);return this.Yr(e,u).next(c=>{c||n.removeEntry(u,cn.min())})}).next(()=>(this.jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Yr(e,n).next(o=>{o?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(e){return 0}Yr(e,n){return Be.or([()=>Be.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gr(e,n)])}}class Ap{constructor(e){this.serializer=e}N(e,n,o,u){const c=new Hu("createOrUpgrade",n);var x;o<1&&u>=1&&(e.createObjectStore("owner"),(x=e).createObjectStore("mutationQueues",{keyPath:"userId"}),x.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",te,{unique:!0}),x.createObjectStore("documentMutations"),zm(e),function(x){x.createObjectStore("remoteDocuments")}(e));let g=Be.resolve();return o<3&&u>=3&&(0!==o&&(function(x){x.deleteObjectStore("targetDocuments"),x.deleteObjectStore("targets"),x.deleteObjectStore("targetGlobal")}(e),zm(e)),g=g.next(()=>function(x){const G=x.store("targetGlobal"),ee={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:cn.min().toTimestamp(),targetCount:0};return G.put("targetGlobalKey",ee)}(c))),o<4&&u>=4&&(0!==o&&(g=g.next(()=>function(x,G){return G.store("mutations").W().next(ee=>{x.deleteObjectStore("mutations"),x.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",te,{unique:!0});const le=G.store("mutations"),Ce=ee.map(Ge=>le.put(Ge));return Be.waitFor(Ce)})}(e,c))),g=g.next(()=>{!function(x){x.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),o<5&&u>=5&&(g=g.next(()=>this.Xr(c))),o<6&&u>=6&&(g=g.next(()=>(function(x){x.createObjectStore("remoteDocumentGlobal")}(e),this.ei(c)))),o<7&&u>=7&&(g=g.next(()=>this.ti(c))),o<8&&u>=8&&(g=g.next(()=>this.ni(e,c))),o<9&&u>=9&&(g=g.next(()=>{!function(x){x.objectStoreNames.contains("remoteDocumentChanges")&&x.deleteObjectStore("remoteDocumentChanges")}(e)})),o<10&&u>=10&&(g=g.next(()=>this.ri(c))),o<11&&u>=11&&(g=g.next(()=>{(function(x){x.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(x){x.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),o<12&&u>=12&&(g=g.next(()=>{!function(x){const G=x.createObjectStore("documentOverlays",{keyPath:ec});G.createIndex("collectionPathOverlayIndex",qu,{unique:!1}),G.createIndex("collectionGroupOverlayIndex",oa,{unique:!1})}(e)})),o<13&&u>=13&&(g=g.next(()=>function(x){const G=x.createObjectStore("remoteDocumentsV14",{keyPath:Ut});G.createIndex("documentKeyIndex",jn),G.createIndex("collectionGroupIndex",Di)}(e)).next(()=>this.ii(e,c)).next(()=>e.deleteObjectStore("remoteDocuments"))),o<14&&u>=14&&(g=g.next(()=>this.si(e,c))),o<15&&u>=15&&(g=g.next(()=>function(x){x.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),x.createObjectStore("indexState",{keyPath:Tu}).createIndex("sequenceNumberIndex",Vo,{unique:!1}),x.createObjectStore("indexEntries",{keyPath:Uo}).createIndex("documentKeyIndex",so,{unique:!1})}(e))),g}ei(e){let n=0;return e.store("remoteDocuments").Y((o,u)=>{n+=Hh(u)}).next(()=>{const o={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",o)})}Xr(e){const n=e.store("mutationQueues"),o=e.store("mutations");return n.W().next(u=>Be.forEach(u,c=>{const g=IDBKeyRange.bound([c.userId,-1],[c.userId,c.lastAcknowledgedBatchId]);return o.W("userMutationsIndex",g).next(S=>Be.forEach(S,x=>{Jt(x.userId===c.userId);const G=Mu(this.serializer,x);return km(e,c.userId,G).next(()=>{})}))}))}ti(e){const n=e.store("targetDocuments"),o=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(u=>{const c=[];return o.Y((g,S)=>{const x=new qn(g),G=[0,R(x)];c.push(n.get(G).next(ee=>ee?Be.resolve():n.put({targetId:0,path:R(x),sequenceNumber:u.highestListenSequenceNumber})))}).next(()=>Be.waitFor(c))})}ni(e,n){e.createObjectStore("collectionParents",{keyPath:Ga});const o=n.store("collectionParents"),u=new Ol,c=g=>{if(u.add(g)){const S=g.lastSegment(),x=g.popLast();return o.put({collectionId:S,parent:R(x)})}};return n.store("remoteDocuments").Y({J:!0},(g,S)=>{const x=new qn(g);return c(x.popLast())}).next(()=>n.store("documentMutations").Y({J:!0},([g,S,x],G)=>{const ee=B(S);return c(ee.popLast())}))}ri(e){const n=e.store("targets");return n.Y((o,u)=>{const c=td(u),g=Vh(this.serializer,c);return n.put(g)})}ii(e,n){const o=n.store("remoteDocuments"),u=[];return o.Y((c,g)=>{const S=n.store("remoteDocumentsV14"),x=(le=g,le.document?new Vt(qn.fromString(le.document.name).popFirst(5)):le.noDocument?Vt.fromSegments(le.noDocument.path):le.unknownDocument?Vt.fromSegments(le.unknownDocument.path):bt()).path.toArray(),G={prefixPath:x.slice(0,x.length-2),collectionGroup:x[x.length-2],documentId:x[x.length-1],readTime:g.readTime||[0,0],unknownDocument:g.unknownDocument,noDocument:g.noDocument,document:g.document,hasCommittedMutations:!!g.hasCommittedMutations};var le;u.push(S.put(G))}).next(()=>Be.waitFor(u))}si(e,n){const o=n.store("mutations"),u=zd(this.serializer),c=new Ic(Wd.Hr,this.serializer.ct);return o.W().next(g=>{const S=new Map;return g.forEach(x=>{var G;let ee=null!==(G=S.get(x.userId))&&void 0!==G?G:h();Mu(this.serializer,x).keys().forEach(le=>ee=ee.add(le)),S.set(x.userId,ee)}),Be.forEach(S,(x,G)=>{const ee=new hn(G),le=Bd.lt(this.serializer,ee),Ce=c.getIndexManager(ee),Ge=yc.lt(ee,this.serializer,Ce,c.referenceDelegate);return new Tp(u,Ge,le,Ce).recalculateAndSaveOverlaysForDocumentKeys(new Aa(n,fo._e),x).next()})})}}function zm(i){i.createObjectStore("targetDocuments",{keyPath:Ss}).createIndex("documentTargetsIndex",ri,{unique:!0}),i.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Mn,{unique:!0}),i.createObjectStore("targetGlobal")}const qh="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Kh{constructor(e,n,o,u,c,g,S,x,G,ee,le=15){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=o,this.oi=c,this.window=g,this.document=S,this._i=G,this.ai=ee,this.ui=le,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=Ce=>Promise.resolve(),!Kh.D())throw new ft(Je.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new zy(this,u),this.Ti=n+"main",this.serializer=new Lh(x),this.Ei=new io(this.Ti,this.ui,new Ap(this.serializer)),this.Qr=new BE(this.referenceDelegate,this.serializer),this.remoteDocumentCache=zd(this.serializer),this.$r=new Vy,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,!1===ee&&Hr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ai().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ft(Je.FAILED_PRECONDITION,qh);return this.Ri(),this.Vi(),this.mi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Qr.getHighestSequenceNumber(e))}).then(e=>{this.kr=new fo(e,this._i)}).then(()=>{this.qr=!0}).catch(e=>(this.Ei&&this.Ei.close(),Promise.reject(e)))}fi(e){var n=this;return this.Ii=function(){var o=(0,f.Z)(function*(u){if(n.started)return e(u)});return function(u){return o.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ei.B(function(){var n=(0,f.Z)(function*(o){null===o.newVersion&&(yield e())});return function(o){return n.apply(this,arguments)}}())}setNetworkEnabled(e){var n=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.oi.enqueueAndForget((0,f.Z)(function*(){n.started&&(yield n.Ai())})))}Ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Cp(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.gi(e).next(n=>{n||(this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)))})}).next(()=>this.pi(e)).next(n=>this.isPrimary&&!n?this.yi(e).next(()=>!1):!!n&&this.wi(e).next(()=>!0))).catch(e=>{if(Ti(e))return ct("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ct("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.oi.enqueueRetryable(()=>this.Ii(e)),this.isPrimary=e})}gi(e){return kl(e).get("owner").next(n=>Be.resolve(this.Si(n)))}bi(e){return Cp(e).delete(this.clientId)}Di(){var e=this;return(0,f.Z)(function*(){if(e.isPrimary&&!e.Ci(e.Pi,18e5)){e.Pi=Date.now();const n=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",o=>{const u=Ji(o,"clientMetadata");return u.W().next(c=>{const g=e.vi(c,18e5),S=c.filter(x=>-1===g.indexOf(x));return Be.forEach(S,x=>u.delete(x.clientId)).next(()=>S)})}).catch(()=>[]);if(e.di)for(const o of n)e.di.removeItem(e.Fi(o.clientId))}})()}mi(){this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ai().then(()=>this.Di()).then(()=>this.mi()))}Si(e){return!!e&&e.ownerId===this.clientId}pi(e){return this.ai?Be.resolve(!0):kl(e).get("owner").next(n=>{if(null!==n&&this.Ci(n.leaseTimestampMs,5e3)&&!this.Mi(n.ownerId)){if(this.Si(n)&&this.networkEnabled)return!0;if(!this.Si(n)){if(!n.allowTabSynchronization)throw new ft(Je.FAILED_PRECONDITION,qh);return!1}}return!(!this.networkEnabled||!this.inForeground)||Cp(e).W().next(o=>void 0===this.vi(o,5e3).find(u=>!(this.clientId===u.clientId||!(!this.networkEnabled&&u.networkEnabled||!this.inForeground&&u.inForeground&&this.networkEnabled===u.networkEnabled))))}).next(n=>(this.isPrimary!==n&&ct("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}shutdown(){var e=this;return(0,f.Z)(function*(){e.qr=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Oi(),e.Ni(),yield e.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],n=>{const o=new Aa(n,fo._e);return e.yi(o).next(()=>e.bi(o))}),e.Ei.close(),e.Li()})()}vi(e,n){return e.filter(o=>this.Ci(o.updateTimeMs,n)&&!this.Mi(o.clientId))}Bi(){return this.runTransaction("getActiveClients","readonly",e=>Cp(e).W().next(n=>this.vi(n,18e5).map(o=>o.clientId)))}get started(){return this.qr}getMutationQueue(e,n){return yc.lt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new jy(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return Bd.lt(this.serializer,e)}getBundleCache(){return this.$r}runTransaction(e,n,o){ct("IndexedDbPersistence","Starting transaction:",e);const u="readonly"===n?"readonly":"readwrite",c=15===(x=this.ui)?Da:14===x?cu:13===x?lu:12===x?Gs:11===x?Wa:void bt();var x;let g;return this.Ei.runTransaction(e,u,c,S=>(g=new Aa(S,this.kr?this.kr.next():fo._e),"readwrite-primary"===n?this.gi(g).next(x=>!!x||this.pi(g)).next(x=>{if(!x)throw Hr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)),new ft(Je.FAILED_PRECONDITION,qi);return o(g)}).next(x=>this.wi(g).next(()=>x)):this.ki(g).next(()=>o(g)))).then(S=>(g.raiseOnCommittedEvent(),S))}ki(e){return kl(e).get("owner").next(n=>{if(null!==n&&this.Ci(n.leaseTimestampMs,5e3)&&!this.Mi(n.ownerId)&&!this.Si(n)&&!(this.ai||this.allowTabSynchronization&&n.allowTabSynchronization))throw new ft(Je.FAILED_PRECONDITION,qh)})}wi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return kl(e).put("owner",n)}static D(){return io.D()}yi(e){const n=kl(e);return n.get("owner").next(o=>this.Si(o)?(ct("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):Be.resolve())}Ci(e,n){const o=Date.now();return!(e<o-n||e>o&&(Hr(`Detected an update time that is in the future: ${e} > ${o}`),1))}Ri(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.li=()=>{this.oi.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.Ai()))},this.document.addEventListener("visibilitychange",this.li),this.inForeground="visible"===this.document.visibilityState)}Oi(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}Vi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const n=/(?:Version|Mobile)\/1[456]/;(0,ge.G6)()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.oi.enterRestrictedMode(!0),this.oi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}Ni(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Mi(e){var n;try{const o=null!==(null===(n=this.di)||void 0===n?void 0:n.getItem(this.Fi(e)));return ct("IndexedDbPersistence",`Client '${e}' ${o?"is":"is not"} zombied in LocalStorage`),o}catch(o){return Hr("IndexedDbPersistence","Failed to get zombied client id.",o),!1}}xi(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(e){Hr("Failed to set zombie client id.",e)}}Li(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch{}}Fi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function kl(i){return Ji(i,"owner")}function Cp(i){return Ji(i,"clientMetadata")}function qd(i,e){let n=i.projectId;return i.isDefaultDatabase||(n+="."+i.database),"firestore/"+e+"/"+n+"/"}class bp{constructor(e,n,o,u){this.targetId=e,this.fromCache=n,this.qi=o,this.Qi=u}static Ki(e,n){let o=h(),u=h();for(const c of n.docChanges)switch(c.type){case 0:o=o.add(c.doc.key);break;case 1:u=u.add(c.doc.key)}return new bp(e,n.fromCache,o,u)}}class Sp{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class Rp{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=(0,ge.G6)()?8:io.v((0,ge.z$)())>0?6:4}initialize(e,n){this.zi=e,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(e,n,o,u){const c={result:null};return this.ji(e,n).next(g=>{c.result=g}).next(()=>{if(!c.result)return this.Hi(e,n,u,o).next(g=>{c.result=g})}).next(()=>{if(c.result)return;const g=new Sp;return this.Ji(e,n,g).next(S=>{if(c.result=S,this.Ui)return this.Yi(e,n,g,S.size)})}).next(()=>c.result)}Yi(e,n,o,u){return o.documentReadCount<this.Wi?(wi()<=ye.in.DEBUG&&ct("QueryEngine","SDK will not create cache indexes for query:",lc(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),Be.resolve()):(wi()<=ye.in.DEBUG&&ct("QueryEngine","Query:",lc(n),"scans",o.documentReadCount,"local documents and returns",u,"documents as results."),o.documentReadCount>this.Gi*u?(wi()<=ye.in.DEBUG&&ct("QueryEngine","The SDK decides to create cache indexes for query:",lc(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Co(n))):Be.resolve())}ji(e,n){if(oc(n))return Be.resolve(null);let o=Co(n);return this.indexManager.getIndexType(e,o).next(u=>0===u?null:(null!==n.limit&&1===u&&(n=Gc(n,null,"F"),o=Co(n)),this.indexManager.getDocumentsMatchingTarget(e,o).next(c=>{const g=h(...c);return this.zi.getDocuments(e,g).next(S=>this.indexManager.getMinOffset(e,o).next(x=>{const G=this.Zi(n,S);return this.Xi(n,G,g,x.readTime)?this.ji(e,Gc(n,null,"F")):this.es(e,G,n,x)}))})))}Hi(e,n,o,u){return oc(n)||u.isEqual(cn.min())?Be.resolve(null):this.zi.getDocuments(e,o).next(c=>{const g=this.Zi(n,c);return this.Xi(n,g,o,u)?Be.resolve(null):(wi()<=ye.in.DEBUG&&ct("QueryEngine","Re-using previous result from %s to execute query: %s",u.toString(),lc(n)),this.es(e,g,n,xr(u,-1)).next(S=>S))})}Zi(e,n){let o=new hi(Su(e));return n.forEach((u,c)=>{Za(e,c)&&(o=o.add(c))}),o}Xi(e,n,o,u){if(null===e.limit)return!1;if(o.size!==n.size)return!0;const c="F"===e.limitType?n.last():n.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(u)>0)}Ji(e,n,o){return wi()<=ye.in.DEBUG&&ct("QueryEngine","Using full collection scan to execute query:",lc(n)),this.zi.getDocumentsMatchingQuery(e,n,zs.min(),o)}es(e,n,o,u){return this.zi.getDocumentsMatchingQuery(e,o,u).next(c=>(n.forEach(g=>{c=c.insert(g.key,g)}),c))}}class Gm{constructor(e,n,o,u){this.persistence=e,this.ts=n,this.serializer=u,this.ns=new Ai(kn),this.rs=new La(c=>ao(c),po),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(o)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Tp(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ns))}}function Fl(i,e,n,o){return new Gm(i,e,n,o)}function Wm(i,e){return Kd.apply(this,arguments)}function Kd(){return Kd=(0,f.Z)(function*(i,e){const n=pt(i);return yield n.persistence.runTransaction("Handle user change","readonly",o=>{let u;return n.mutationQueue.getAllMutationBatches(o).next(c=>(u=c,n._s(e),n.mutationQueue.getAllMutationBatches(o))).next(c=>{const g=[],S=[];let x=h();for(const G of u){g.push(G.batchId);for(const ee of G.mutations)x=x.add(ee.key)}for(const G of c){S.push(G.batchId);for(const ee of G.mutations)x=x.add(ee.key)}return n.localDocuments.getDocuments(o,x).next(G=>({us:G,removedBatchIds:g,addedBatchIds:S}))})})}),Kd.apply(this,arguments)}function qm(i){const e=pt(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Qr.getLastRemoteSnapshotVersion(n))}function Zd(i,e,n){let o=h(),u=h();return n.forEach(c=>o=o.add(c)),e.getEntries(i,o).next(c=>{let g=bo();return n.forEach((S,x)=>{const G=c.get(S);x.isFoundDocument()!==G.isFoundDocument()&&(u=u.add(S)),x.isNoDocument()&&x.version.isEqual(cn.min())?(e.removeEntry(S,x.readTime),g=g.insert(S,x)):!G.isValidDocument()||x.version.compareTo(G.version)>0||0===x.version.compareTo(G.version)&&G.hasPendingWrites?(e.addEntry(x),g=g.insert(S,x)):ct("LocalStore","Ignoring outdated watch update for ",S,". Current version:",G.version," Watch version:",x.version)}),{cs:g,ls:u}})}function xu(i,e){const n=pt(i);return n.persistence.runTransaction("Get next mutation batch","readonly",o=>(void 0===e&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(o,e)))}function yu(i,e){const n=pt(i);return n.persistence.runTransaction("Allocate target","readwrite",o=>{let u;return n.Qr.getTargetData(o,e).next(c=>c?(u=c,Be.resolve(u)):n.Qr.allocateTargetId(o).next(g=>(u=new Pu(e,g,"TargetPurposeListen",o.currentSequenceNumber),n.Qr.addTargetData(o,u).next(()=>u))))}).then(o=>{const u=n.ns.get(o.targetId);return(null===u||o.snapshotVersion.compareTo(u.snapshotVersion)>0)&&(n.ns=n.ns.insert(o.targetId,o),n.rs.set(e,o.targetId)),o})}function Ll(i,e,n){return Mp.apply(this,arguments)}function Mp(){return Mp=(0,f.Z)(function*(i,e,n){const o=pt(i),u=o.ns.get(e),c=n?"readwrite":"readwrite-primary";try{n||(yield o.persistence.runTransaction("Release target",c,g=>o.persistence.referenceDelegate.removeTarget(g,u)))}catch(g){if(!Ti(g))throw g;ct("LocalStore",`Failed to update sequence numbers for target ${e}: ${g}`)}o.ns=o.ns.remove(e),o.rs.delete(u.target)}),Mp.apply(this,arguments)}function Qh(i,e,n){const o=pt(i);let u=cn.min(),c=h();return o.persistence.runTransaction("Execute query","readwrite",g=>function(x,G,ee){const le=pt(x),Ce=le.rs.get(ee);return void 0!==Ce?Be.resolve(le.ns.get(Ce)):le.Qr.getTargetData(G,ee)}(o,g,Co(e)).next(S=>{if(S)return u=S.lastLimboFreeSnapshotVersion,o.Qr.getMatchingKeysForTargetId(g,S.targetId).next(x=>{c=x})}).next(()=>o.ts.getDocumentsMatchingQuery(g,e,n?u:cn.min(),n?c:h())).next(S=>(Km(o,Md(e),S),{documents:S,hs:c})))}function Np(i,e){const n=pt(i),o=pt(n.Qr),u=n.ns.get(e);return u?Promise.resolve(u.target):n.persistence.runTransaction("Get target data","readonly",c=>o._t(c,e).next(g=>g?g.target:null))}function wc(i,e){const n=pt(i),o=n.ss.get(e)||cn.min();return n.persistence.runTransaction("Get new document changes","readonly",u=>n.os.getAllFromCollectionGroup(u,e,xr(o,-1),Number.MAX_SAFE_INTEGER)).then(u=>(Km(n,e,u),u))}function Km(i,e,n){let o=i.ss.get(e)||cn.min();n.forEach((u,c)=>{c.readTime.compareTo(o)>0&&(o=c.readTime)}),i.ss.set(e,o)}function Op(){return Op=(0,f.Z)(function*(i,e,n,o){const u=pt(i);let c=h(),g=bo();for(const G of n){const ee=e.Ps(G.metadata.name);G.document&&(c=c.add(ee));const le=e.Is(G);le.setReadTime(e.Ts(G.metadata.readTime)),g=g.insert(ee,le)}const S=u.os.newChangeBuffer({trackRemovals:!0}),x=yield yu(u,(ee=o,Co(sc(qn.fromString(`__bundle__/docs/${ee}`)))));var ee;return u.persistence.runTransaction("Apply bundle documents","readwrite",G=>Zd(G,S,g).next(ee=>(S.apply(G),ee)).next(ee=>u.Qr.removeMatchingKeysForTargetId(G,x.targetId).next(()=>u.Qr.addMatchingKeys(G,c,x.targetId)).next(()=>u.localDocuments.getLocalViewOfDocuments(G,ee.cs,ee.ls)).next(()=>ee.cs)))}),Op.apply(this,arguments)}function xp(i,e){return Yh.apply(this,arguments)}function Yh(){return Yh=(0,f.Z)(function*(i,e,n=h()){const o=yield yu(i,Co(gc(e.bundledQuery))),u=pt(i);return u.persistence.runTransaction("Save named query","readwrite",c=>{const g=qs(e.readTime);if(o.snapshotVersion.compareTo(g)>=0)return u.$r.saveNamedQuery(c,e);const S=o.withResumeToken(Xi.EMPTY_BYTE_STRING,g);return u.ns=u.ns.insert(S.targetId,S),u.Qr.updateTargetData(c,S).next(()=>u.Qr.removeMatchingKeysForTargetId(c,o.targetId)).next(()=>u.Qr.addMatchingKeys(c,n,o.targetId)).next(()=>u.$r.saveNamedQuery(c,e))})}),Yh.apply(this,arguments)}function Zm(i,e){return`firestore_clients_${i}_${e}`}function kp(i,e,n){let o=`firestore_mutations_${i}_${n}`;return e.isAuthenticated()&&(o+=`_${e.uid}`),o}function Qd(i,e){return`firestore_targets_${i}_${e}`}class Fp{constructor(e,n,o,u){this.user=e,this.batchId=n,this.state=o,this.error=u}static Es(e,n,o){const u=JSON.parse(o);let c,g="object"==typeof u&&-1!==["pending","acknowledged","rejected"].indexOf(u.state)&&(void 0===u.error||"object"==typeof u.error);return g&&u.error&&(g="string"==typeof u.error.message&&"string"==typeof u.error.code,g&&(c=new ft(u.error.code,u.error.message))),g?new Fp(e,n,u.state,c):(Hr("SharedClientState",`Failed to parse mutation state for ID '${n}': ${o}`),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Yd{constructor(e,n,o){this.targetId=e,this.state=n,this.error=o}static Es(e,n){const o=JSON.parse(n);let u,c="object"==typeof o&&-1!==["not-current","current","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return c&&o.error&&(c="string"==typeof o.error.message&&"string"==typeof o.error.code,c&&(u=new ft(o.error.code,o.error.message))),c?new Yd(e,o.state,u):(Hr("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Jh{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Es(e,n){const o=JSON.parse(n);let u="object"==typeof o&&o.activeTargetIds instanceof Array,c=D();for(let g=0;u&&g<o.activeTargetIds.length;++g)u=v(o.activeTargetIds[g]),c=c.add(o.activeTargetIds[g]);return u?new Jh(e,c):(Hr("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}}class Lp{constructor(e,n){this.clientId=e,this.onlineState=n}static Es(e){const n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new Lp(n.clientId,n.onlineState):(Hr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Qm{constructor(){this.activeTargetIds=D()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Ym{constructor(e,n,o,u,c){this.window=e,this.oi=n,this.persistenceKey=o,this.Vs=u,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.fs=this.gs.bind(this),this.ps=new Ai(kn),this.started=!1,this.ys=[];const g=o.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=c,this.ws=Zm(this.persistenceKey,this.Vs),this.Ss=`firestore_sequence_number_${this.persistenceKey}`,this.ps=this.ps.insert(this.Vs,new Qm),this.bs=new RegExp(`^firestore_clients_${g}_([^_]*)$`),this.Ds=new RegExp(`^firestore_mutations_${g}_(\\d+)(?:_(.*))?$`),this.Cs=new RegExp(`^firestore_targets_${g}_(\\d+)$`),this.vs=`firestore_online_state_${this.persistenceKey}`,this.Fs=function(x){return`firestore_bundle_loaded_v2_${x}`}(this.persistenceKey),this.window.addEventListener("storage",this.fs)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,f.Z)(function*(){const n=yield e.syncEngine.Bi();for(const u of n){if(u===e.Vs)continue;const c=e.getItem(Zm(e.persistenceKey,u));if(c){const g=Jh.Es(u,c);g&&(e.ps=e.ps.insert(g.clientId,g))}}e.Ms();const o=e.storage.getItem(e.vs);if(o){const u=e.xs(o);u&&e.Os(u)}for(const u of e.ys)e.gs(u);e.ys=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ss,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ns(this.ps)}isActiveQueryTarget(e){let n=!1;return this.ps.forEach((o,u)=>{u.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.Ls(e,"pending")}updateMutationState(e,n,o){this.Ls(e,n,o),this.Bs(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){const o=this.storage.getItem(Qd(this.persistenceKey,e));if(o){const u=Yd.Es(e,o);u&&(n=u.state)}}return this.ks.As(e),this.Ms(),n}removeLocalQueryTarget(e){this.ks.Rs(e),this.Ms()}isLocalQueryTarget(e){return this.ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Qd(this.persistenceKey,e))}updateQueryState(e,n,o){this.qs(e,n,o)}handleUserChange(e,n,o){n.forEach(u=>{this.Bs(u)}),this.currentUser=e,o.forEach(u=>{this.addPendingMutation(u)})}setOnlineState(e){this.Qs(e)}notifyBundleLoaded(e){this.Ks(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.fs),this.removeItem(this.ws),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return ct("SharedClientState","READ",e,n),n}setItem(e,n){ct("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){ct("SharedClientState","REMOVE",e),this.storage.removeItem(e)}gs(e){var n=this;const o=e;if(o.storageArea===this.storage){if(ct("SharedClientState","EVENT",o.key,o.newValue),o.key===this.ws)return void Hr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.oi.enqueueRetryable((0,f.Z)(function*(){if(n.started){if(null!==o.key)if(n.bs.test(o.key)){if(null==o.newValue){const u=n.$s(o.key);return n.Us(u,null)}{const u=n.Ws(o.key,o.newValue);if(u)return n.Us(u.clientId,u)}}else if(n.Ds.test(o.key)){if(null!==o.newValue){const u=n.Gs(o.key,o.newValue);if(u)return n.zs(u)}}else if(n.Cs.test(o.key)){if(null!==o.newValue){const u=n.js(o.key,o.newValue);if(u)return n.Hs(u)}}else if(o.key===n.vs){if(null!==o.newValue){const u=n.xs(o.newValue);if(u)return n.Os(u)}}else if(o.key===n.Ss){const u=function(g){let S=fo._e;if(null!=g)try{const x=JSON.parse(g);Jt("number"==typeof x),S=x}catch(x){Hr("SharedClientState","Failed to read sequence number from WebStorage",x)}return S}(o.newValue);u!==fo._e&&n.sequenceNumberHandler(u)}else if(o.key===n.Fs){const u=n.Js(o.newValue);yield Promise.all(u.map(c=>n.syncEngine.Ys(c)))}}else n.ys.push(o)}))}}get ks(){return this.ps.get(this.Vs)}Ms(){this.setItem(this.ws,this.ks.ds())}Ls(e,n,o){const u=new Fp(this.currentUser,e,n,o),c=kp(this.persistenceKey,this.currentUser,e);this.setItem(c,u.ds())}Bs(e){const n=kp(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Qs(e){this.storage.setItem(this.vs,JSON.stringify({clientId:this.Vs,onlineState:e}))}qs(e,n,o){const u=Qd(this.persistenceKey,e),c=new Yd(e,n,o);this.setItem(u,c.ds())}Ks(e){const n=JSON.stringify(Array.from(e));this.setItem(this.Fs,n)}$s(e){const n=this.bs.exec(e);return n?n[1]:null}Ws(e,n){const o=this.$s(e);return Jh.Es(o,n)}Gs(e,n){const o=this.Ds.exec(e),u=Number(o[1]);return Fp.Es(new hn(void 0!==o[2]?o[2]:null),u,n)}js(e,n){const o=this.Cs.exec(e),u=Number(o[1]);return Yd.Es(u,n)}xs(e){return Lp.Es(e)}Js(e){return JSON.parse(e)}zs(e){var n=this;return(0,f.Z)(function*(){if(e.user.uid===n.currentUser.uid)return n.syncEngine.Zs(e.batchId,e.state,e.error);ct("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Hs(e){return this.syncEngine.Xs(e.targetId,e.state,e.error)}Us(e,n){const o=n?this.ps.insert(e,n):this.ps.remove(e),u=this.Ns(this.ps),c=this.Ns(o),g=[],S=[];return c.forEach(x=>{u.has(x)||g.push(x)}),u.forEach(x=>{c.has(x)||S.push(x)}),this.syncEngine.eo(g,S).then(()=>{this.ps=o})}Os(e){this.ps.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ns(e){let n=D();return e.forEach((o,u)=>{n=n.unionWith(u.activeTargetIds)}),n}}class Jd{constructor(){this.no=new Qm,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,o){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,n,o){this.ro[e]=n}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new Qm,Promise.resolve()}handleUserChange(e,n,o){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Ky{io(e){}shutdown(){}}class Xh{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){ct("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){ct("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let od=null;function Vl(){return null===od?od=268435456+Math.round(2147483648*Math.random()):od++,"0x"+od.toString(16)}const Vp={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Up{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}onMessage(e){this.Ao=e}close(){this.ho()}send(e){this.lo(e)}Ro(){this.Io()}Vo(e){this.Eo(e)}mo(e){this.Ao(e)}}const mo="WebChannelConnection";class ef extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const o=n.ssl?"https":"http",u=encodeURIComponent(this.databaseId.projectId),c=encodeURIComponent(this.databaseId.database);this.fo=o+"://"+n.host,this.po=`projects/${u}/databases/${c}`,this.yo="(default)"===this.databaseId.database?`project_id=${u}`:`project_id=${u}&database_id=${c}`}get wo(){return!1}So(n,o,u,c,g){const S=Vl(),x=this.bo(n,o.toUriEncodedString());ct("RestConnection",`Sending RPC '${n}' ${S}:`,x,u);const G={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(G,c,g),this.Co(n,x,G,u).then(ee=>(ct("RestConnection",`Received RPC '${n}' ${S}: `,ee),ee),ee=>{throw ni("RestConnection",`RPC '${n}' ${S} failed with error: `,ee,"url: ",x,"request:",u),ee})}vo(n,o,u,c,g,S){return this.So(n,o,u,c,g)}Do(n,o,u){n["X-Goog-Api-Client"]="gl-js/ fire/"+ei,n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),o&&o.headers.forEach((c,g)=>n[g]=c),u&&u.headers.forEach((c,g)=>n[g]=c)}bo(n,o){return`${this.fo}/v1/${o}:${Vp[n]}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Co(e,n,o,u){const c=Vl();return new Promise((g,S)=>{const x=new Yt;x.setWithCredentials(!0),x.listenOnce(L.COMPLETE,()=>{try{switch(x.getLastErrorCode()){case J.NO_ERROR:const ee=x.getResponseJson();ct(mo,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(ee)),g(ee);break;case J.TIMEOUT:ct(mo,`RPC '${e}' ${c} timed out`),S(new ft(Je.DEADLINE_EXCEEDED,"Request time out"));break;case J.HTTP_ERROR:const le=x.getStatus();if(ct(mo,`RPC '${e}' ${c} failed with status:`,le,"response text:",x.getResponseText()),le>0){let Ce=x.getResponseJson();Array.isArray(Ce)&&(Ce=Ce[0]);const Ge=Ce?.error;if(Ge&&Ge.status&&Ge.message){const Rt=function(Bt){const Tn=Bt.toLowerCase().replace(/_/g,"-");return Object.values(Je).indexOf(Tn)>=0?Tn:Je.UNKNOWN}(Ge.status);S(new ft(Rt,Ge.message))}else S(new ft(Je.UNKNOWN,"Server responded with status "+x.getStatus()))}else S(new ft(Je.UNAVAILABLE,"Connection failed."));break;default:bt()}}finally{ct(mo,`RPC '${e}' ${c} completed.`)}});const G=JSON.stringify(u);ct(mo,`RPC '${e}' ${c} sending request:`,u),x.send(n,"POST",G,o,15)})}Fo(e,n,o){const u=Vl(),c=[this.fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],g=ra(),S=A(),x={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},G=this.longPollingOptions.timeoutSeconds;void 0!==G&&(x.longPollingTimeout=Math.round(1e3*G)),this.useFetchStreams&&(x.useFetchStreams=!0),this.Do(x.initMessageHeaders,n,o),x.encodeInitMessageHeaders=!0;const ee=c.join("");ct(mo,`Creating RPC '${e}' stream ${u}: ${ee}`,x);const le=g.createWebChannel(ee,x);let Ce=!1,Ge=!1;const Rt=new Up({lo:Bt=>{Ge?ct(mo,`Not sending because RPC '${e}' stream ${u} is closed:`,Bt):(Ce||(ct(mo,`Opening RPC '${e}' stream ${u} transport.`),le.open(),Ce=!0),ct(mo,`RPC '${e}' stream ${u} sending:`,Bt),le.send(Bt))},ho:()=>le.close()}),Ht=(Bt,Tn,dr)=>{Bt.listen(Tn,yn=>{try{dr(yn)}catch(Pr){setTimeout(()=>{throw Pr},0)}})};return Ht(le,ut.EventType.OPEN,()=>{Ge||ct(mo,`RPC '${e}' stream ${u} transport opened.`)}),Ht(le,ut.EventType.CLOSE,()=>{Ge||(Ge=!0,ct(mo,`RPC '${e}' stream ${u} transport closed`),Rt.Vo())}),Ht(le,ut.EventType.ERROR,Bt=>{Ge||(Ge=!0,ni(mo,`RPC '${e}' stream ${u} transport errored:`,Bt),Rt.Vo(new ft(Je.UNAVAILABLE,"The operation could not be completed")))}),Ht(le,ut.EventType.MESSAGE,Bt=>{var Tn;if(!Ge){const dr=Bt.data[0];Jt(!!dr);const Pr=dr.error||(null===(Tn=dr[0])||void 0===Tn?void 0:Tn.error);if(Pr){ct(mo,`RPC '${e}' stream ${u} received error:`,Pr);const ns=Pr.status;let xi=function(eI){const Vf=go[eI];if(void 0!==Vf)return cm(Vf)}(ns),Ro=Pr.message;void 0===xi&&(xi=Je.INTERNAL,Ro="Unknown error status: "+ns+" with message "+Pr.message),Ge=!0,Rt.Vo(new ft(xi,Ro)),le.close()}else ct(mo,`RPC '${e}' stream ${u} received:`,dr),Rt.mo(dr)}}),Ht(S,Q.STAT_EVENT,Bt=>{Bt.stat===pe.PROXY?ct(mo,`RPC '${e}' stream ${u} detected buffering proxy`):Bt.stat===pe.NOPROXY&&ct(mo,`RPC '${e}' stream ${u} detected no buffering proxy`)}),setTimeout(()=>{Rt.Ro()},0),Rt}}function Tc(){return typeof window<"u"?window:null}function ad(){return typeof document<"u"?document:null}function Dc(i){return new ky(i,!0)}class ud{constructor(e,n,o=1e3,u=1.5,c=6e4){this.oi=e,this.timerId=n,this.Mo=o,this.xo=u,this.Oo=c,this.No=0,this.Lo=null,this.Bo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(e){this.cancel();const n=Math.floor(this.No+this.Qo()),o=Math.max(0,Date.now()-this.Bo),u=Math.max(0,n-o);u>0&&ct("ExponentialBackoff",`Backing off for ${u} ms (base delay: ${this.No} ms, delay with jitter: ${n} ms, last attempt: ${o} ms ago)`),this.Lo=this.oi.enqueueAfterDelay(this.timerId,u,()=>(this.Bo=Date.now(),e())),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){null!==this.Lo&&(this.Lo.skipDelay(),this.Lo=null)}cancel(){null!==this.Lo&&(this.Lo.cancel(),this.Lo=null)}Qo(){return(Math.random()-.5)*this.No}}class Zy{constructor(e,n,o,u,c,g,S,x){this.oi=e,this.$o=o,this.Uo=u,this.connection=c,this.authCredentialsProvider=g,this.appCheckCredentialsProvider=S,this.listener=x,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new ud(e,n)}Ho(){return 1===this.state||5===this.state||this.Jo()}Jo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Yo()}stop(){var e=this;return(0,f.Z)(function*(){e.Ho()&&(yield e.close(0))})()}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&null===this.Go&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,()=>this.e_()))}t_(e){this.n_(),this.stream.send(e)}e_(){var e=this;return(0,f.Z)(function*(){if(e.Jo())return e.close(0)})()}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}close(e,n){var o=this;return(0,f.Z)(function*(){o.n_(),o.r_(),o.jo.cancel(),o.Wo++,4!==e?o.jo.reset():n&&n.code===Je.RESOURCE_EXHAUSTED?(Hr(n.toString()),Hr("Using maximum backoff delay to prevent overloading the backend."),o.jo.ko()):n&&n.code===Je.UNAUTHENTICATED&&3!==o.state&&(o.authCredentialsProvider.invalidateToken(),o.appCheckCredentialsProvider.invalidateToken()),null!==o.stream&&(o.i_(),o.stream.close(),o.stream=null),o.state=e,yield o.listener.To(n)})()}i_(){}auth(){this.state=1;const e=this.s_(this.Wo),n=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([o,u])=>{this.Wo===n&&this.o_(o,u)},o=>{e(()=>{const u=new ft(Je.UNKNOWN,"Fetching auth token failed: "+o.message);return this.__(u)})})}o_(e,n){const o=this.s_(this.Wo);this.stream=this.a_(e,n),this.stream.Po(()=>{o(()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,()=>(this.Jo()&&(this.state=3),Promise.resolve())),this.listener.Po()))}),this.stream.To(u=>{o(()=>this.__(u))}),this.stream.onMessage(u=>{o(()=>this.onMessage(u))})}Yo(){var e=this;this.state=5,this.jo.qo((0,f.Z)(function*(){e.state=0,e.start()}))}__(e){return ct("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}s_(e){return n=>{this.oi.enqueueAndForget(()=>this.Wo===e?n():(ct("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Bp extends Zy{constructor(e,n,o,u,c,g){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,o,u,g),this.serializer=c}a_(e,n){return this.connection.Fo("Listen",e,n)}onMessage(e){this.jo.reset();const n=function vm(i,e){let n;if("targetChange"in e){const o="NO_CHANGE"===(G=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===G?1:"REMOVE"===G?2:"CURRENT"===G?3:"RESET"===G?4:bt(),u=e.targetChange.targetIds||[],c=function(G,ee){return G.useProto3Json?(Jt(void 0===ee||"string"==typeof ee),Xi.fromBase64String(ee||"")):(Jt(void 0===ee||ee instanceof Uint8Array),Xi.fromUint8Array(ee||new Uint8Array))}(i,e.targetChange.resumeToken),g=e.targetChange.cause,S=g&&function(G){const ee=void 0===G.code?Je.UNKNOWN:cm(G.code);return new ft(ee,G.message||"")}(g);n=new dm(o,u,c,S||null)}else if("documentChange"in e){const o=e.documentChange,u=Ya(i,o.document.name),c=qs(o.document.updateTime),g=o.document.createTime?qs(o.document.createTime):cn.min(),S=new St({mapValue:{fields:o.document.fields}}),x=wn.newFoundDocument(u,c,g,S);n=new xh(o.targetIds||[],o.removedTargetIds||[],x.key,x)}else if("documentDelete"in e){const o=e.documentDelete,u=Ya(i,o.document),c=o.readTime?qs(o.readTime):cn.min(),g=wn.newNoDocument(u,c);n=new xh([],o.removedTargetIds||[],g.key,g)}else if("documentRemove"in e){const o=e.documentRemove,u=Ya(i,o.document);n=new xh([],o.removedTargetIds||[],u,null)}else{if(!("filter"in e))return bt();{const o=e.filter,{count:u=0,unchangedNames:c}=o,g=new Ny(u,c);n=new ip(o.targetId,g)}}var G;return n}(this.serializer,e),o=function(c){if(!("targetChange"in c))return cn.min();const g=c.targetChange;return g.targetIds&&g.targetIds.length?cn.min():g.readTime?qs(g.readTime):cn.min()}(e);return this.listener.u_(n,o)}c_(e){const n={};n.database=lp(this.serializer),n.addTarget=function(c,g){let S;const x=g.target;if(S=bu(x)?{documents:Em(c,x)}:{query:dp(c,x).ut},S.targetId=g.targetId,g.resumeToken.approximateByteSize()>0){S.resumeToken=fm(c,g.resumeToken);const G=fc(c,g.expectedCount);null!==G&&(S.expectedCount=G)}else if(g.snapshotVersion.compareTo(cn.min())>0){S.readTime=Xc(c,g.snapshotVersion.toTimestamp());const G=fc(c,g.expectedCount);null!==G&&(S.expectedCount=G)}return S}(this.serializer,e);const o=function Im(i,e){const n=function(u){switch(u){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return bt()}}(e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,e);o&&(n.labels=o),this.t_(n)}l_(e){const n={};n.database=lp(this.serializer),n.removeTarget=e,this.t_(n)}}class Xd extends Zy{constructor(e,n,o,u,c,g){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,o,u,g),this.serializer=c,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(e,n){return this.connection.Fo("Write",e,n)}onMessage(e){if(Jt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.h_){this.jo.reset();const n=function cp(i,e){return i&&i.length>0?(Jt(void 0!==e),i.map(n=>function(u,c){let g=qs(u.updateTime?u.updateTime:c);return g.isEqual(cn.min())&&(g=qs(c)),new Kf(g,u.transformResults||[])}(n,e))):[]}(e.writeResults,e.commitTime),o=qs(e.commitTime);return this.listener.T_(o,n)}return Jt(!e.writeResults||0===e.writeResults.length),this.h_=!0,this.listener.E_()}d_(){const e={};e.database=lp(this.serializer),this.t_(e)}I_(e){const n={streamToken:this.lastStreamToken,writes:e.map(o=>Sl(this.serializer,o))};this.t_(n)}}class Qy extends class{}{constructor(e,n,o,u){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=o,this.serializer=u,this.A_=!1}R_(){if(this.A_)throw new ft(Je.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,n,o,u){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,g])=>this.connection.So(e,bl(n,o),u,c,g)).catch(c=>{throw"FirebaseError"===c.name?(c.code===Je.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ft(Je.UNKNOWN,c.toString())})}vo(e,n,o,u,c){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([g,S])=>this.connection.vo(e,bl(n,o),u,g,S,c)).catch(g=>{throw"FirebaseError"===g.name?(g.code===Je.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),g):new ft(Je.UNKNOWN,g.toString())})}terminate(){this.A_=!0,this.connection.terminate()}}class Yy{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){0===this.m_&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve())))}S_(e){"Online"===this.state?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.y_("Offline")))}set(e){this.b_(),this.m_=0,"Online"===e&&(this.g_=!1),this.y_(e)}y_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}w_(e){const n=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.g_?(Hr(n),this.g_=!1):ct("OnlineStateTracker",n)}b_(){null!==this.f_&&(this.f_.cancel(),this.f_=null)}}class $p{constructor(e,n,o,u,c){var g=this;this.localStore=e,this.datastore=n,this.asyncQueue=o,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=c,this.M_.io(S=>{o.enqueueAndForget((0,f.Z)(function*(){var x;vu(g)&&(ct("RemoteStore","Restarting streams for network reachability change."),yield(x=(0,f.Z)(function*(ee){const le=pt(ee);le.v_.add(4),yield cd(le),le.x_.set("Unknown"),le.v_.delete(4),yield ld(le)}),function G(ee){return x.apply(this,arguments)})(g))}))}),this.x_=new Yy(o,u)}}function ld(i){return Hp.apply(this,arguments)}function Hp(){return Hp=(0,f.Z)(function*(i){if(vu(i))for(const e of i.F_)yield e(!0)}),Hp.apply(this,arguments)}function cd(i){return Xm.apply(this,arguments)}function Xm(){return Xm=(0,f.Z)(function*(i){for(const e of i.F_)yield e(!1)}),Xm.apply(this,arguments)}function tf(i,e){const n=pt(i);n.C_.has(e.targetId)||(n.C_.set(e.targetId,e),th(n)?nf(n):ih(n).Jo()&&eh(n,e))}function ol(i,e){const n=pt(i),o=ih(n);n.C_.delete(e),o.Jo()&&e_(n,e),0===n.C_.size&&(o.Jo()?o.Xo():vu(n)&&n.x_.set("Unknown"))}function eh(i,e){if(i.O_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(cn.min())>0){const n=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ih(i).c_(e)}function e_(i,e){i.O_.Oe(e),ih(i).l_(e)}function nf(i){i.O_=new Oy({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>i.C_.get(e)||null,nt:()=>i.datastore.serializer.databaseId}),ih(i).start(),i.x_.p_()}function th(i){return vu(i)&&!ih(i).Ho()&&i.C_.size>0}function vu(i){return 0===pt(i).v_.size}function t_(i){i.O_=void 0}function n_(i){return zp.apply(this,arguments)}function zp(){return zp=(0,f.Z)(function*(i){i.C_.forEach((e,n)=>{eh(i,e)})}),zp.apply(this,arguments)}function r_(i,e){return i_.apply(this,arguments)}function i_(){return i_=(0,f.Z)(function*(i,e){t_(i),th(i)?(i.x_.S_(e),nf(i)):i.x_.set("Unknown")}),i_.apply(this,arguments)}function Jy(i,e,n){return dd.apply(this,arguments)}function dd(){return dd=(0,f.Z)(function*(i,e,n){if(i.x_.set("Online"),e instanceof dm&&2===e.state&&e.cause)try{yield(o=(0,f.Z)(function*(c,g){const S=g.cause;for(const x of g.targetIds)c.C_.has(x)&&(yield c.remoteSyncer.rejectListen(x,S),c.C_.delete(x),c.O_.removeTarget(x))}),function u(c,g){return o.apply(this,arguments)})(i,e)}catch(o){ct("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),o),yield rf(i,o)}else if(e instanceof xh?i.O_.$e(e):e instanceof ip?i.O_.Je(e):i.O_.Ge(e),!n.isEqual(cn.min()))try{const o=yield qm(i.localStore);n.compareTo(o)>=0&&(yield function(c,g){const S=c.O_.it(g);return S.targetChanges.forEach((x,G)=>{if(x.resumeToken.approximateByteSize()>0){const ee=c.C_.get(G);ee&&c.C_.set(G,ee.withResumeToken(x.resumeToken,g))}}),S.targetMismatches.forEach((x,G)=>{const ee=c.C_.get(x);if(!ee)return;c.C_.set(x,ee.withResumeToken(Xi.EMPTY_BYTE_STRING,ee.snapshotVersion)),e_(c,x);const le=new Pu(ee.target,x,G,ee.sequenceNumber);eh(c,le)}),c.remoteSyncer.applyRemoteEvent(S)}(i,n))}catch(o){ct("RemoteStore","Failed to raise snapshot:",o),yield rf(i,o)}var o}),dd.apply(this,arguments)}function rf(i,e,n){return Ul.apply(this,arguments)}function Ul(){return Ul=(0,f.Z)(function*(i,e,n){if(!Ti(e))throw e;i.v_.add(1),yield cd(i),i.x_.set("Offline"),n||(n=()=>qm(i.localStore)),i.asyncQueue.enqueueRetryable((0,f.Z)(function*(){ct("RemoteStore","Retrying IndexedDB access"),yield n(),i.v_.delete(1),yield ld(i)}))}),Ul.apply(this,arguments)}function hd(i,e){return e().catch(n=>rf(i,n,e))}function fd(i){return sf.apply(this,arguments)}function sf(){return sf=(0,f.Z)(function*(i){const e=pt(i),n=al(e);let o=e.D_.length>0?e.D_[e.D_.length-1].batchId:-1;for(;Xy(e);)try{const u=yield xu(e.localStore,o);if(null===u){0===e.D_.length&&n.Xo();break}o=u.batchId,ev(e,u)}catch(u){yield rf(e,u)}s_(e)&&Gp(e)}),sf.apply(this,arguments)}function Xy(i){return vu(i)&&i.D_.length<10}function ev(i,e){i.D_.push(e);const n=al(i);n.Jo()&&n.P_&&n.I_(e.mutations)}function s_(i){return vu(i)&&!al(i).Ho()&&i.D_.length>0}function Gp(i){al(i).start()}function o_(i){return nh.apply(this,arguments)}function nh(){return nh=(0,f.Z)(function*(i){al(i).d_()}),nh.apply(this,arguments)}function zE(i){return rh.apply(this,arguments)}function rh(){return rh=(0,f.Z)(function*(i){const e=al(i);for(const n of i.D_)e.I_(n.mutations)}),rh.apply(this,arguments)}function a_(i,e,n){return Wp.apply(this,arguments)}function Wp(){return Wp=(0,f.Z)(function*(i,e,n){const o=i.D_.shift(),u=Xf.from(o,e,n);yield hd(i,()=>i.remoteSyncer.applySuccessfulWrite(u)),yield fd(i)}),Wp.apply(this,arguments)}function tv(i,e){return af.apply(this,arguments)}function af(){return af=(0,f.Z)(function*(i,e){var n;e&&al(i).P_&&(yield(n=(0,f.Z)(function*(u,c){if(tp(S=c.code)&&S!==Je.ABORTED){const g=u.D_.shift();al(u).Zo(),yield hd(u,()=>u.remoteSyncer.rejectFailedWrite(g.batchId,c)),yield fd(u)}var S}),function o(u,c){return n.apply(this,arguments)})(i,e)),s_(i)&&Gp(i)}),af.apply(this,arguments)}function u_(i,e){return uf.apply(this,arguments)}function uf(){return uf=(0,f.Z)(function*(i,e){const n=pt(i);n.asyncQueue.verifyOperationInProgress(),ct("RemoteStore","RemoteStore received new credentials");const o=vu(n);n.v_.add(3),yield cd(n),o&&n.x_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.v_.delete(3),yield ld(n)}),uf.apply(this,arguments)}function qp(i,e){return Kp.apply(this,arguments)}function Kp(){return Kp=(0,f.Z)(function*(i,e){const n=pt(i);e?(n.v_.delete(2),yield ld(n)):e||(n.v_.add(2),yield cd(n),n.x_.set("Unknown"))}),Kp.apply(this,arguments)}function ih(i){return i.N_||(i.N_=function(n,o,u){const c=pt(n);return c.R_(),new Bp(o,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,u)}(i.datastore,i.asyncQueue,{Po:n_.bind(null,i),To:r_.bind(null,i),u_:Jy.bind(null,i)}),i.F_.push(function(){var e=(0,f.Z)(function*(n){n?(i.N_.Zo(),th(i)?nf(i):i.x_.set("Unknown")):(yield i.N_.stop(),t_(i))});return function(n){return e.apply(this,arguments)}}())),i.N_}function al(i){return i.L_||(i.L_=function(n,o,u){const c=pt(n);return c.R_(),new Xd(o,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,u)}(i.datastore,i.asyncQueue,{Po:o_.bind(null,i),To:tv.bind(null,i),E_:zE.bind(null,i),T_:a_.bind(null,i)}),i.F_.push(function(){var e=(0,f.Z)(function*(n){n?(i.L_.Zo(),yield fd(i)):(yield i.L_.stop(),i.D_.length>0&&(ct("RemoteStore",`Stopping write stream with ${i.D_.length} pending writes`),i.D_=[]))});return function(n){return e.apply(this,arguments)}}())),i.L_}class lf{constructor(e,n,o,u,c){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=o,this.op=u,this.removalCallback=c,this.deferred=new Kr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(g=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,o,u,c){const g=Date.now()+o,S=new lf(e,n,g,u,c);return S.start(o),S}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new ft(Je.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ca(i,e){if(Hr("AsyncQueue",`${e}: ${i}`),Ti(i))return new ft(Je.UNAVAILABLE,`${e}: ${i}`);throw i}class Ac{constructor(e){this.comparator=e?(n,o)=>e(n,o)||Vt.comparator(n.key,o.key):(n,o)=>Vt.comparator(n.key,o.key),this.keyedMap=cc(),this.sortedSet=new Ai(this.comparator)}static emptySet(e){return new Ac(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,o)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ac)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),o=e.sortedSet.getIterator();for(;n.hasNext();){const u=n.getNext().key,c=o.getNext().key;if(!u.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,n){const o=new Ac;return o.comparator=this.comparator,o.keyedMap=e,o.sortedSet=n,o}}class nv{constructor(){this.B_=new Ai(Vt.comparator)}track(e){const n=e.doc.key,o=this.B_.get(n);o?0!==e.type&&3===o.type?this.B_=this.B_.insert(n,e):3===e.type&&1!==o.type?this.B_=this.B_.insert(n,{type:o.type,doc:e.doc}):2===e.type&&2===o.type?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):2===e.type&&0===o.type?this.B_=this.B_.insert(n,{type:0,doc:e.doc}):1===e.type&&0===o.type?this.B_=this.B_.remove(n):1===e.type&&2===o.type?this.B_=this.B_.insert(n,{type:1,doc:o.doc}):0===e.type&&1===o.type?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):bt():this.B_=this.B_.insert(n,e)}k_(){const e=[];return this.B_.inorderTraversal((n,o)=>{e.push(o)}),e}}class Bl{constructor(e,n,o,u,c,g,S,x,G){this.query=e,this.docs=n,this.oldDocs=o,this.docChanges=u,this.mutatedKeys=c,this.fromCache=g,this.syncStateChanged=S,this.excludesMetadataChanges=x,this.hasCachedResults=G}static fromInitialDocuments(e,n,o,u,c){const g=[];return n.forEach(S=>{g.push({type:0,doc:S})}),new Bl(e,n,Ac.emptySet(n),g,o,u,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&pu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,o=e.docChanges;if(n.length!==o.length)return!1;for(let u=0;u<n.length;u++)if(n[u].type!==o[u].type||!n[u].doc.isEqual(o[u].doc))return!1;return!0}}class jl{constructor(){this.q_=void 0,this.Q_=[]}K_(){return this.Q_.some(e=>e.U_())}}class Zp{constructor(){this.queries=new La(e=>uc(e),pu),this.onlineState="Unknown",this.W_=new Set}}function Qp(i,e){return l_.apply(this,arguments)}function l_(){return l_=(0,f.Z)(function*(i,e){const n=pt(i);let o=3;const u=e.query;let c=n.queries.get(u);c?!c.K_()&&e.U_()&&(o=2):(c=new jl,o=e.U_()?0:1);try{switch(o){case 0:c.q_=yield n.onListen(u,!0);break;case 1:c.q_=yield n.onListen(u,!1);break;case 2:yield n.onFirstRemoteStoreListen(u)}}catch(g){const S=ca(g,`Initialization of query '${lc(e.query)}' failed`);return void e.onError(S)}n.queries.set(u,c),c.Q_.push(e),e.G_(n.onlineState),c.q_&&e.z_(c.q_)&&Jp(n)}),l_.apply(this,arguments)}function Yp(i,e){return sh.apply(this,arguments)}function sh(){return sh=(0,f.Z)(function*(i,e){const n=pt(i),o=e.query;let u=3;const c=n.queries.get(o);if(c){const g=c.Q_.indexOf(e);g>=0&&(c.Q_.splice(g,1),0===c.Q_.length?u=e.U_()?0:1:!c.K_()&&e.U_()&&(u=2))}switch(u){case 0:return n.queries.delete(o),n.onUnlisten(o,!0);case 1:return n.queries.delete(o),n.onUnlisten(o,!1);case 2:return n.onLastRemoteStoreUnlisten(o);default:return}}),sh.apply(this,arguments)}function ku(i,e){const n=pt(i);let o=!1;for(const u of e){const g=n.queries.get(u.query);if(g){for(const S of g.Q_)S.z_(u)&&(o=!0);g.q_=u}}o&&Jp(n)}function c_(i,e,n){const o=pt(i),u=o.queries.get(e);if(u)for(const c of u.Q_)c.onError(n);o.queries.delete(e)}function Jp(i){i.W_.forEach(e=>{e.next()})}var d_,So;(So=d_||(d_={})).j_="default",So.Cache="cache";class Xp{constructor(e,n,o){this.query=e,this.H_=n,this.J_=!1,this.Y_=null,this.onlineState="Unknown",this.options=o||{}}z_(e){if(!this.options.includeMetadataChanges){const o=[];for(const u of e.docChanges)3!==u.type&&o.push(u);e=new Bl(e.query,e.docs,e.oldDocs,o,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.J_?this.Z_(e)&&(this.H_.next(e),n=!0):this.X_(e,this.onlineState)&&(this.ea(e),n=!0),this.Y_=e,n}onError(e){this.H_.error(e)}G_(e){this.onlineState=e;let n=!1;return this.Y_&&!this.J_&&this.X_(this.Y_,e)&&(this.ea(this.Y_),n=!0),n}X_(e,n){return!e.fromCache||!this.U_()||(!this.options.ta||!("Offline"!==n))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===n)}Z_(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Y_&&this.Y_.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}ea(e){e=Bl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.J_=!0,this.H_.next(e)}U_(){return this.options.source!==d_.Cache}}class eg{constructor(e,n){this.na=e,this.byteLength=n}ra(){return"metadata"in this.na}}class h_{constructor(e){this.serializer=e}Ps(e){return Ya(this.serializer,e)}Is(e){return e.metadata.exists?ym(this.serializer,e.document,!1):wn.newNoDocument(this.Ps(e.metadata.name),this.Ts(e.metadata.readTime))}Ts(e){return qs(e)}}class rv{constructor(e,n,o){this.ia=e,this.localStore=n,this.serializer=o,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=cf(e)}sa(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.na.namedQuery)this.queries.push(e.na.namedQuery);else if(e.na.documentMetadata){this.documents.push({metadata:e.na.documentMetadata}),e.na.documentMetadata.exists||++n;const o=qn.fromString(e.na.documentMetadata.name);this.collectionGroups.add(o.get(o.length-2))}else e.na.document&&(this.documents[this.documents.length-1].document=e.na.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}oa(e){const n=new Map,o=new h_(this.serializer);for(const u of e)if(u.metadata.queries){const c=o.Ps(u.metadata.name);for(const g of u.metadata.queries){const S=(n.get(g)||h()).add(c);n.set(g,S)}}return n}complete(){var e=this;return(0,f.Z)(function*(){const n=yield function qy(i,e,n,o){return Op.apply(this,arguments)}(e.localStore,new h_(e.serializer),e.documents,e.ia.id),o=e.oa(e.documents);for(const u of e.queries)yield xp(e.localStore,u,o.get(u.name));return e.progress.taskState="Success",{progress:e.progress,_a:e.collectionGroups,aa:n}})()}}function cf(i){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:i.totalDocuments,totalBytes:i.totalBytes}}class tg{constructor(e){this.key=e}}class ng{constructor(e){this.key=e}}class f_{constructor(e,n){this.query=e,this.ua=n,this.ca=null,this.hasCachedResults=!1,this.current=!1,this.la=h(),this.mutatedKeys=h(),this.ha=Su(e),this.Pa=new Ac(this.ha)}get Ia(){return this.ua}Ta(e,n){const o=n?n.Ea:new nv,u=n?n.Pa:this.Pa;let c=n?n.mutatedKeys:this.mutatedKeys,g=u,S=!1;const x="F"===this.query.limitType&&u.size===this.query.limit?u.last():null,G="L"===this.query.limitType&&u.size===this.query.limit?u.first():null;if(e.inorderTraversal((ee,le)=>{const Ce=u.get(ee),Ge=Za(this.query,le)?le:null,Rt=!!Ce&&this.mutatedKeys.has(Ce.key),Ht=!!Ge&&(Ge.hasLocalMutations||this.mutatedKeys.has(Ge.key)&&Ge.hasCommittedMutations);let Bt=!1;Ce&&Ge?Ce.data.isEqual(Ge.data)?Rt!==Ht&&(o.track({type:3,doc:Ge}),Bt=!0):this.da(Ce,Ge)||(o.track({type:2,doc:Ge}),Bt=!0,(x&&this.ha(Ge,x)>0||G&&this.ha(Ge,G)<0)&&(S=!0)):!Ce&&Ge?(o.track({type:0,doc:Ge}),Bt=!0):Ce&&!Ge&&(o.track({type:1,doc:Ce}),Bt=!0,(x||G)&&(S=!0)),Bt&&(Ge?(g=g.add(Ge),c=Ht?c.add(ee):c.delete(ee)):(g=g.delete(ee),c=c.delete(ee)))}),null!==this.query.limit)for(;g.size>this.query.limit;){const ee="F"===this.query.limitType?g.last():g.first();g=g.delete(ee.key),c=c.delete(ee.key),o.track({type:1,doc:ee})}return{Pa:g,Ea:o,Xi:S,mutatedKeys:c}}da(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,o,u){const c=this.Pa;this.Pa=e.Pa,this.mutatedKeys=e.mutatedKeys;const g=e.Ea.k_();g.sort((ee,le)=>function(Ge,Rt){const Ht=Bt=>{switch(Bt){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return bt()}};return Ht(Ge)-Ht(Rt)}(ee.type,le.type)||this.ha(ee.doc,le.doc)),this.Aa(o),u=null!=u&&u;const S=n&&!u?this.Ra():[],x=0===this.la.size&&this.current&&!u?1:0,G=x!==this.ca;return this.ca=x,0!==g.length||G?{snapshot:new Bl(this.query,e.Pa,c,g,e.mutatedKeys,0===x,G,!1,!!o&&o.resumeToken.approximateByteSize()>0),Va:S}:{Va:S}}G_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Pa:this.Pa,Ea:new nv,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{Va:[]}}ma(e){return!this.ua.has(e)&&!!this.Pa.has(e)&&!this.Pa.get(e).hasLocalMutations}Aa(e){e&&(e.addedDocuments.forEach(n=>this.ua=this.ua.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.ua=this.ua.delete(n)),this.current=e.current)}Ra(){if(!this.current)return[];const e=this.la;this.la=h(),this.Pa.forEach(o=>{this.ma(o.key)&&(this.la=this.la.add(o.key))});const n=[];return e.forEach(o=>{this.la.has(o)||n.push(new ng(o))}),this.la.forEach(o=>{e.has(o)||n.push(new tg(o))}),n}fa(e){this.ua=e.hs,this.la=h();const n=this.Ta(e.documents);return this.applyChanges(n,!0)}ga(){return Bl.fromInitialDocuments(this.query,this.Pa,this.mutatedKeys,0===this.ca,this.hasCachedResults)}}class p_{constructor(e,n,o){this.query=e,this.targetId=n,this.view=o}}class g_{constructor(e){this.key=e,this.pa=!1}}class iv{constructor(e,n,o,u,c,g){this.localStore=e,this.remoteStore=n,this.eventManager=o,this.sharedClientState=u,this.currentUser=c,this.maxConcurrentLimboResolutions=g,this.ya={},this.wa=new La(S=>uc(S),pu),this.Sa=new Map,this.ba=new Set,this.Da=new Ai(Vt.comparator),this.Ca=new Map,this.va=new Dp,this.Fa={},this.Ma=new Map,this.xa=xl.Ln(),this.onlineState="Unknown",this.Oa=void 0}get isPrimaryClient(){return!0===this.Oa}}function sv(i,e){return rg.apply(this,arguments)}function rg(){return rg=(0,f.Z)(function*(i,e,n=!0){const o=wf(i);let u;const c=o.wa.get(e);return c?(o.sharedClientState.addLocalQueryTarget(c.targetId),u=c.view.ga()):u=yield Fu(o,e,n,!0),u}),rg.apply(this,arguments)}function m_(i,e){return $l.apply(this,arguments)}function $l(){return $l=(0,f.Z)(function*(i,e){const n=wf(i);yield Fu(n,e,!0,!1)}),$l.apply(this,arguments)}function Fu(i,e,n,o){return Hl.apply(this,arguments)}function Hl(){return Hl=(0,f.Z)(function*(i,e,n,o){const u=yield yu(i.localStore,Co(e)),c=u.targetId,g=n?i.sharedClientState.addLocalQueryTarget(c):"not-current";let S;return o&&(S=yield ig(i,e,c,"current"===g,u.resumeToken)),i.isPrimaryClient&&n&&tf(i.remoteStore,u),S}),Hl.apply(this,arguments)}function ig(i,e,n,o,u){return sg.apply(this,arguments)}function sg(){return sg=(0,f.Z)(function*(i,e,n,o,u){i.Na=(le,Ce,Ge)=>{return(Rt=(0,f.Z)(function*(Bt,Tn,dr,yn){let Pr=Tn.view.Ta(dr);Pr.Xi&&(Pr=yield Qh(Bt.localStore,Tn.query,!1).then(({documents:Ua})=>Tn.view.Ta(Ua,Pr)));const ns=yn&&yn.targetChanges.get(Tn.targetId),xi=yn&&null!=yn.targetMismatches.get(Tn.targetId),Ro=Tn.view.applyChanges(Pr,Bt.isPrimaryClient,ns,xi);return mf(Bt,Tn.targetId,Ro.Va),Ro.snapshot}),function Ht(Bt,Tn,dr,yn){return Rt.apply(this,arguments)})(i,le,Ce,Ge);var Rt};const c=yield Qh(i.localStore,e,!0),g=new f_(e,c.hs),S=g.Ta(c.documents),x=Jc.createSynthesizedTargetChangeForCurrentChange(n,o&&"Offline"!==i.onlineState,u),G=g.applyChanges(S,i.isPrimaryClient,x);mf(i,n,G.Va);const ee=new p_(e,n,g);return i.wa.set(e,ee),i.Sa.has(n)?i.Sa.get(n).push(e):i.Sa.set(n,[e]),G.snapshot}),sg.apply(this,arguments)}function __(i,e,n){return df.apply(this,arguments)}function df(){return df=(0,f.Z)(function*(i,e,n){const o=pt(i),u=o.wa.get(e),c=o.Sa.get(u.targetId);if(c.length>1)return o.Sa.set(u.targetId,c.filter(g=>!pu(g,e))),void o.wa.delete(e);o.isPrimaryClient?(o.sharedClientState.removeLocalQueryTarget(u.targetId),o.sharedClientState.isActiveQueryTarget(u.targetId)||(yield Ll(o.localStore,u.targetId,!1).then(()=>{o.sharedClientState.clearQueryState(u.targetId),n&&ol(o.remoteStore,u.targetId),ul(o,u.targetId)}).catch(os))):(ul(o,u.targetId),yield Ll(o.localStore,u.targetId,!0))}),df.apply(this,arguments)}function og(i,e){return Cc.apply(this,arguments)}function Cc(){return Cc=(0,f.Z)(function*(i,e){const n=pt(i),o=n.wa.get(e),u=n.Sa.get(o.targetId);n.isPrimaryClient&&1===u.length&&(n.sharedClientState.removeLocalQueryTarget(o.targetId),ol(n.remoteStore,o.targetId))}),Cc.apply(this,arguments)}function ff(){return ff=(0,f.Z)(function*(i,e,n){const o=mg(i);try{const u=yield function(g,S){const x=pt(g),G=Zt.now(),ee=S.reduce((Ge,Rt)=>Ge.add(Rt.key),h());let le,Ce;return x.persistence.runTransaction("Locally write mutations","readwrite",Ge=>{let Rt=bo(),Ht=h();return x.os.getEntries(Ge,ee).next(Bt=>{Rt=Bt,Rt.forEach((Tn,dr)=>{dr.isValidDocument()||(Ht=Ht.add(Tn))})}).next(()=>x.localDocuments.getOverlayedDocuments(Ge,Rt)).next(Bt=>{le=Bt;const Tn=[];for(const dr of S){const yn=lm(dr,le.get(dr.key).overlayedDocument);null!=yn&&Tn.push(new Ru(dr.key,yn,Sn(yn.value.mapValue),ts.exists(!0)))}return x.mutationQueue.addMutationBatch(Ge,G,Tn,S)}).next(Bt=>{Ce=Bt;const Tn=Bt.applyToLocalDocumentSet(le,Ht);return x.documentOverlayCache.saveOverlays(Ge,Bt.batchId,Tn)})}).then(()=>({batchId:Ce.batchId,changes:Rh(le)}))}(o.localStore,e);o.sharedClientState.addPendingMutation(u.batchId),function(g,S,x){let G=g.Fa[g.currentUser.toKey()];G||(G=new Ai(kn)),G=G.insert(S,x),g.Fa[g.currentUser.toKey()]=G}(o,u.batchId,n),yield Lu(o,u.changes),yield fd(o.remoteStore)}catch(u){const c=ca(u,"Failed to persist write");n.reject(c)}}),ff.apply(this,arguments)}function ag(i,e){return ug.apply(this,arguments)}function ug(){return ug=(0,f.Z)(function*(i,e){const n=pt(i);try{const o=yield function Pp(i,e){const n=pt(i),o=e.snapshotVersion;let u=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",c=>{const g=n.os.newChangeBuffer({trackRemovals:!0});u=n.ns;const S=[];e.targetChanges.forEach((ee,le)=>{const Ce=u.get(le);if(!Ce)return;S.push(n.Qr.removeMatchingKeys(c,ee.removedDocuments,le).next(()=>n.Qr.addMatchingKeys(c,ee.addedDocuments,le)));let Ge=Ce.withSequenceNumber(c.currentSequenceNumber);var Ht,Bt,Tn;null!==e.targetMismatches.get(le)?Ge=Ge.withResumeToken(Xi.EMPTY_BYTE_STRING,cn.min()).withLastLimboFreeSnapshotVersion(cn.min()):ee.resumeToken.approximateByteSize()>0&&(Ge=Ge.withResumeToken(ee.resumeToken,o)),u=u.insert(le,Ge),Bt=Ge,Tn=ee,(0===(Ht=Ce).resumeToken.approximateByteSize()||Bt.snapshotVersion.toMicroseconds()-Ht.snapshotVersion.toMicroseconds()>=3e8||Tn.addedDocuments.size+Tn.modifiedDocuments.size+Tn.removedDocuments.size>0)&&S.push(n.Qr.updateTargetData(c,Ge))});let x=bo(),G=h();if(e.documentUpdates.forEach(ee=>{e.resolvedLimboDocuments.has(ee)&&S.push(n.persistence.referenceDelegate.updateLimboDocument(c,ee))}),S.push(Zd(c,g,e.documentUpdates).next(ee=>{x=ee.cs,G=ee.ls})),!o.isEqual(cn.min())){const ee=n.Qr.getLastRemoteSnapshotVersion(c).next(le=>n.Qr.setTargetsMetadata(c,c.currentSequenceNumber,o));S.push(ee)}return Be.waitFor(S).next(()=>g.apply(c)).next(()=>n.localDocuments.getLocalViewOfDocuments(c,x,G)).next(()=>x)}).then(c=>(n.ns=u,c))}(n.localStore,e);e.targetChanges.forEach((u,c)=>{const g=n.Ca.get(c);g&&(Jt(u.addedDocuments.size+u.modifiedDocuments.size+u.removedDocuments.size<=1),u.addedDocuments.size>0?g.pa=!0:u.modifiedDocuments.size>0?Jt(g.pa):u.removedDocuments.size>0&&(Jt(g.pa),g.pa=!1))}),yield Lu(n,o,e)}catch(o){yield os(o)}}),ug.apply(this,arguments)}function y_(i,e,n){const o=pt(i);if(o.isPrimaryClient&&0===n||!o.isPrimaryClient&&1===n){const u=[];o.wa.forEach((c,g)=>{const S=g.view.G_(e);S.snapshot&&u.push(S.snapshot)}),function(g,S){const x=pt(g);x.onlineState=S;let G=!1;x.queries.forEach((ee,le)=>{for(const Ce of le.Q_)Ce.G_(S)&&(G=!0)}),G&&Jp(x)}(o.eventManager,e),u.length&&o.ya.u_(u),o.onlineState=e,o.isPrimaryClient&&o.sharedClientState.setOnlineState(e)}}function ov(i,e,n){return lg.apply(this,arguments)}function lg(){return lg=(0,f.Z)(function*(i,e,n){const o=pt(i);o.sharedClientState.updateQueryState(e,"rejected",n);const u=o.Ca.get(e),c=u&&u.key;if(c){let g=new Ai(Vt.comparator);g=g.insert(c,wn.newNoDocument(c,cn.min()));const S=h().add(c),x=new Yc(cn.min(),new Map,new Ai(kn),g,S);yield ag(o,x),o.Da=o.Da.remove(c),o.Ca.delete(e),_f(o)}else yield Ll(o.localStore,e,!1).then(()=>ul(o,e,n)).catch(os)}),lg.apply(this,arguments)}function v_(i,e){return E_.apply(this,arguments)}function E_(){return E_=(0,f.Z)(function*(i,e){const n=pt(i),o=e.batch.batchId;try{const u=yield function Zh(i,e){const n=pt(i);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",o=>{const u=e.batch.keys(),c=n.os.newChangeBuffer({trackRemovals:!0});return function(S,x,G,ee){const le=G.batch,Ce=le.keys();let Ge=Be.resolve();return Ce.forEach(Rt=>{Ge=Ge.next(()=>ee.getEntry(x,Rt)).next(Ht=>{const Bt=G.docVersions.get(Rt);Jt(null!==Bt),Ht.version.compareTo(Bt)<0&&(le.applyToRemoteDocument(Ht,G),Ht.isValidDocument()&&(Ht.setReadTime(G.commitVersion),ee.addEntry(Ht)))})}),Ge.next(()=>S.mutationQueue.removeMutationBatch(x,le))}(n,o,e,c).next(()=>c.apply(o)).next(()=>n.mutationQueue.performConsistencyCheck(o)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(o,u,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(o,function(S){let x=h();for(let G=0;G<S.mutationResults.length;++G)S.mutationResults[G].transformResults.length>0&&(x=x.add(S.batch.mutations[G].key));return x}(e))).next(()=>n.localDocuments.getDocuments(o,u))})}(n.localStore,e);w_(n,o,null),gf(n,o),n.sharedClientState.updateMutationState(o,"acknowledged"),yield Lu(n,u)}catch(u){yield os(u)}}),E_.apply(this,arguments)}function av(i,e,n){return I_.apply(this,arguments)}function I_(){return I_=(0,f.Z)(function*(i,e,n){const o=pt(i);try{const u=yield function(g,S){const x=pt(g);return x.persistence.runTransaction("Reject batch","readwrite-primary",G=>{let ee;return x.mutationQueue.lookupMutationBatch(G,S).next(le=>(Jt(null!==le),ee=le.keys(),x.mutationQueue.removeMutationBatch(G,le))).next(()=>x.mutationQueue.performConsistencyCheck(G)).next(()=>x.documentOverlayCache.removeOverlaysForBatchId(G,ee,S)).next(()=>x.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(G,ee)).next(()=>x.localDocuments.getDocuments(G,ee))})}(o.localStore,e);w_(o,e,n),gf(o,e),o.sharedClientState.updateMutationState(e,"rejected",n),yield Lu(o,u)}catch(u){yield os(u)}}),I_.apply(this,arguments)}function pf(){return pf=(0,f.Z)(function*(i,e){const n=pt(i);vu(n.remoteStore)||ct("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const o=yield function(g){const S=pt(g);return S.persistence.runTransaction("Get highest unacknowledged batch id","readonly",x=>S.mutationQueue.getHighestUnacknowledgedBatchId(x))}(n.localStore);if(-1===o)return void e.resolve();const u=n.Ma.get(o)||[];u.push(e),n.Ma.set(o,u)}catch(o){const u=ca(o,"Initialization of waitForPendingWrites() operation failed");e.reject(u)}}),pf.apply(this,arguments)}function gf(i,e){(i.Ma.get(e)||[]).forEach(n=>{n.resolve()}),i.Ma.delete(e)}function w_(i,e,n){const o=pt(i);let u=o.Fa[o.currentUser.toKey()];if(u){const c=u.get(e);c&&(n?c.reject(n):c.resolve(),u=u.remove(e)),o.Fa[o.currentUser.toKey()]=u}}function ul(i,e,n=null){i.sharedClientState.removeLocalQueryTarget(e);for(const o of i.Sa.get(e))i.wa.delete(o),n&&i.ya.La(o,n);i.Sa.delete(e),i.isPrimaryClient&&i.va.Vr(e).forEach(o=>{i.va.containsKey(o)||cg(i,o)})}function cg(i,e){i.ba.delete(e.path.canonicalString());const n=i.Da.get(e);null!==n&&(ol(i.remoteStore,n),i.Da=i.Da.remove(e),i.Ca.delete(n),_f(i))}function mf(i,e,n){for(const o of n)o instanceof tg?(i.va.addReference(o.key,e),uv(i,o)):o instanceof ng?(ct("SyncEngine","Document no longer in limbo: "+o.key),i.va.removeReference(o.key,e),i.va.containsKey(o.key)||cg(i,o.key)):bt()}function uv(i,e){const n=e.key,o=n.path.canonicalString();i.Da.get(n)||i.ba.has(o)||(ct("SyncEngine","New document in limbo: "+n),i.ba.add(o),_f(i))}function _f(i){for(;i.ba.size>0&&i.Da.size<i.maxConcurrentLimboResolutions;){const e=i.ba.values().next().value;i.ba.delete(e);const n=new Vt(qn.fromString(e)),o=i.xa.next();i.Ca.set(o,new g_(n)),i.Da=i.Da.insert(n,o),tf(i.remoteStore,new Pu(Co(sc(n.path)),o,"TargetPurposeLimboResolution",fo._e))}}function Lu(i,e,n){return sr.apply(this,arguments)}function sr(){return sr=(0,f.Z)(function*(i,e,n){const o=pt(i),u=[],c=[],g=[];var S;o.wa.isEmpty()||(o.wa.forEach((S,x)=>{g.push(o.Na(x,e,n).then(G=>{if((G||n)&&o.isPrimaryClient&&o.sharedClientState.updateQueryState(x.targetId,G?.fromCache?"not-current":"current"),G){u.push(G);const ee=bp.Ki(x.targetId,G);c.push(ee)}}))}),yield Promise.all(g),o.ya.u_(u),yield(S=(0,f.Z)(function*(G,ee){const le=pt(G);try{yield le.persistence.runTransaction("notifyLocalViewChanges","readwrite",Ce=>Be.forEach(ee,Ge=>Be.forEach(Ge.qi,Rt=>le.persistence.referenceDelegate.addReference(Ce,Ge.targetId,Rt)).next(()=>Be.forEach(Ge.Qi,Rt=>le.persistence.referenceDelegate.removeReference(Ce,Ge.targetId,Rt)))))}catch(Ce){if(!Ti(Ce))throw Ce;ct("LocalStore","Failed to update sequence numbers: "+Ce)}for(const Ce of ee){const Ge=Ce.targetId;if(!Ce.fromCache){const Rt=le.ns.get(Ge),Bt=Rt.withLastLimboFreeSnapshotVersion(Rt.snapshotVersion);le.ns=le.ns.insert(Ge,Bt)}}}),function x(G,ee){return S.apply(this,arguments)})(o.localStore,c))}),sr.apply(this,arguments)}function T_(i,e){return yf.apply(this,arguments)}function yf(){return yf=(0,f.Z)(function*(i,e){const n=pt(i);if(!n.currentUser.isEqual(e)){ct("SyncEngine","User change. New user:",e.toKey());const o=yield Wm(n.localStore,e);n.currentUser=e,(c=n).Ma.forEach(S=>{S.forEach(x=>{x.reject(new ft(Je.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),c.Ma.clear(),n.sharedClientState.handleUserChange(e,o.removedBatchIds,o.addedBatchIds),yield Lu(n,o.us)}var c}),yf.apply(this,arguments)}function pd(i,e){const n=pt(i),o=n.Ca.get(e);if(o&&o.pa)return h().add(o.key);{let u=h();const c=n.Sa.get(e);if(!c)return u;for(const g of c){const S=n.wa.get(g);u=u.unionWith(S.view.Ia)}return u}}function D_(i,e){return dg.apply(this,arguments)}function dg(){return dg=(0,f.Z)(function*(i,e){const n=pt(i),o=yield Qh(n.localStore,e.query,!0),u=e.view.fa(o);return n.isPrimaryClient&&mf(n,e.targetId,u.Va),u}),dg.apply(this,arguments)}function vf(i,e){return zl.apply(this,arguments)}function zl(){return zl=(0,f.Z)(function*(i,e){const n=pt(i);return wc(n.localStore,e).then(o=>Lu(n,o))}),zl.apply(this,arguments)}function hg(i,e,n,o){return bc.apply(this,arguments)}function bc(){return bc=(0,f.Z)(function*(i,e,n,o){const u=pt(i),c=yield function(S,x){const G=pt(S),ee=pt(G.mutationQueue);return G.persistence.runTransaction("Lookup mutation documents","readonly",le=>ee.vn(le,x).next(Ce=>Ce?G.localDocuments.getDocuments(le,Ce):Be.resolve(null)))}(u.localStore,e);var x;null!==c?("pending"===n?yield fd(u.remoteStore):"acknowledged"===n||"rejected"===n?(w_(u,e,o||null),gf(u,e),x=e,pt(pt(u.localStore).mutationQueue).Mn(x)):bt(),yield Lu(u,c)):ct("SyncEngine","Cannot apply mutation batch with id: "+e)}),bc.apply(this,arguments)}function oh(){return oh=(0,f.Z)(function*(i,e){const n=pt(i);if(wf(n),mg(n),!0===e&&!0!==n.Oa){const o=n.sharedClientState.getAllActiveQueryTargets(),u=yield Ef(n,o.toArray());n.Oa=!0,yield qp(n.remoteStore,!0);for(const c of u)tf(n.remoteStore,c)}else if(!1===e&&!1!==n.Oa){const o=[];let u=Promise.resolve();n.Sa.forEach((c,g)=>{n.sharedClientState.isLocalQueryTarget(g)?o.push(g):u=u.then(()=>(ul(n,g),Ll(n.localStore,g,!0))),ol(n.remoteStore,g)}),yield u,yield Ef(n,o),function(g){const S=pt(g);S.Ca.forEach((x,G)=>{ol(S.remoteStore,G)}),S.va.mr(),S.Ca=new Map,S.Da=new Ai(Vt.comparator)}(n),n.Oa=!1,yield qp(n.remoteStore,!1)}}),oh.apply(this,arguments)}function Ef(i,e,n){return ah.apply(this,arguments)}function ah(){return ah=(0,f.Z)(function*(i,e,n){const o=pt(i),u=[],c=[];for(const g of e){let S;const x=o.Sa.get(g);if(x&&0!==x.length){S=yield yu(o.localStore,Co(x[0]));for(const G of x){const ee=o.wa.get(G),le=yield D_(o,ee);le.snapshot&&c.push(le.snapshot)}}else{const G=yield Np(o.localStore,g);S=yield yu(o.localStore,G),yield ig(o,fg(G),g,!1,S.resumeToken)}u.push(S)}return o.ya.u_(c),u}),ah.apply(this,arguments)}function fg(i){return Qu(i.path,i.collectionGroup,i.orderBy,i.filters,i.limit,"F",i.startAt,i.endAt)}function pg(i){return n=pt(i).localStore,pt(pt(n).persistence).Bi();var n}function lv(i,e,n,o){return gg.apply(this,arguments)}function gg(){return gg=(0,f.Z)(function*(i,e,n,o){const u=pt(i);if(u.Oa)return void ct("SyncEngine","Ignoring unexpected query state notification.");const c=u.Sa.get(e);if(c&&c.length>0)switch(n){case"current":case"not-current":{const g=yield wc(u.localStore,Md(c[0])),S=Yc.createSynthesizedRemoteEventForCurrentChange(e,"current"===n,Xi.EMPTY_BYTE_STRING);yield Lu(u,g,S);break}case"rejected":yield Ll(u.localStore,e,!0),ul(u,e,o);break;default:bt()}}),gg.apply(this,arguments)}function cv(i,e,n){return If.apply(this,arguments)}function If(){return If=(0,f.Z)(function*(i,e,n){const o=wf(i);if(o.Oa){for(const u of e){if(o.Sa.has(u)&&o.sharedClientState.isActiveQueryTarget(u)){ct("SyncEngine","Adding an already active target "+u);continue}const c=yield Np(o.localStore,u),g=yield yu(o.localStore,c);yield ig(o,fg(c),g.targetId,!1,g.resumeToken),tf(o.remoteStore,g)}for(const u of n)o.Sa.has(u)&&(yield Ll(o.localStore,u,!1).then(()=>{ol(o.remoteStore,u),ul(o,u)}).catch(os))}}),If.apply(this,arguments)}function wf(i){const e=pt(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=ag.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=pd.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=ov.bind(null,e),e.ya.u_=ku.bind(null,e.eventManager),e.ya.La=c_.bind(null,e.eventManager),e}function mg(i){const e=pt(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=v_.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=av.bind(null,e),e}class uh{constructor(){this.synchronizeTabs=!1}initialize(e){var n=this;return(0,f.Z)(function*(){n.serializer=Dc(e.databaseInfo.databaseId),n.sharedClientState=n.createSharedClientState(e),n.persistence=n.createPersistence(e),yield n.persistence.start(),n.localStore=n.createLocalStore(e),n.gcScheduler=n.createGarbageCollectionScheduler(e,n.localStore),n.indexBackfillerScheduler=n.createIndexBackfillerScheduler(e,n.localStore)})()}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return Fl(this.persistence,new Rp,e.initialUser,this.serializer)}createPersistence(e){return new Ic(Wd.Hr,this.serializer)}createSharedClientState(e){return new Jd}terminate(){var e=this;return(0,f.Z)(function*(){var n,o;null===(n=e.gcScheduler)||void 0===n||n.stop(),null===(o=e.indexBackfillerScheduler)||void 0===o||o.stop(),e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Tf extends uh{constructor(e,n,o){super(),this.ka=e,this.cacheSizeBytes=n,this.forceOwnership=o,this.synchronizeTabs=!1}initialize(e){var n=()=>super.initialize,o=this;return(0,f.Z)(function*(){yield n().call(o,e),yield o.ka.initialize(o,e),yield mg(o.ka.syncEngine),yield fd(o.ka.remoteStore),yield o.persistence.fi(()=>(o.gcScheduler&&!o.gcScheduler.started&&o.gcScheduler.start(),o.indexBackfillerScheduler&&!o.indexBackfillerScheduler.started&&o.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return Fl(this.persistence,new Rp,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,n){return new Hy(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,n)}createIndexBackfillerScheduler(e,n){const o=new Wu(n,this.persistence);return new au(e.asyncQueue,o)}createPersistence(e){const n=qd(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),o=void 0!==this.cacheSizeBytes?la.withCacheSize(this.cacheSizeBytes):la.DEFAULT;return new Kh(this.synchronizeTabs,n,e.clientId,o,e.asyncQueue,Tc(),ad(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new Jd}}class b_ extends Tf{constructor(e,n){super(e,n,!1),this.ka=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}initialize(e){var n=()=>super.initialize,o=this;return(0,f.Z)(function*(){yield n().call(o,e);const u=o.ka.syncEngine;o.sharedClientState instanceof Ym&&(o.sharedClientState.syncEngine={Zs:hg.bind(null,u),Xs:lv.bind(null,u),eo:cv.bind(null,u),Bi:pg.bind(null,u),Ys:vf.bind(null,u)},yield o.sharedClientState.start()),yield o.persistence.fi(function(){var c=(0,f.Z)(function*(g){yield function A_(i,e){return oh.apply(this,arguments)}(o.ka.syncEngine,g),o.gcScheduler&&(g&&!o.gcScheduler.started?o.gcScheduler.start():g||o.gcScheduler.stop()),o.indexBackfillerScheduler&&(g&&!o.indexBackfillerScheduler.started?o.indexBackfillerScheduler.start():g||o.indexBackfillerScheduler.stop())});return function(g){return c.apply(this,arguments)}}())})()}createSharedClientState(e){const n=Tc();if(!Ym.D(n))throw new ft(Je.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const o=qd(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Ym(n,e.asyncQueue,o,e.clientId,e.initialUser)}}class gd{initialize(e,n){var o=this;return(0,f.Z)(function*(){o.localStore||(o.localStore=e.localStore,o.sharedClientState=e.sharedClientState,o.datastore=o.createDatastore(n),o.remoteStore=o.createRemoteStore(n),o.eventManager=o.createEventManager(n),o.syncEngine=o.createSyncEngine(n,!e.synchronizeTabs),o.sharedClientState.onlineStateHandler=u=>y_(o.syncEngine,u,1),o.remoteStore.remoteSyncer.handleCredentialChange=T_.bind(null,o.syncEngine),yield qp(o.remoteStore,o.syncEngine.isPrimaryClient))})()}createEventManager(e){return new Zp}createDatastore(e){const n=Dc(e.databaseInfo.databaseId),o=new ef(e.databaseInfo);return new Qy(e.authCredentials,e.appCheckCredentials,o,n)}createRemoteStore(e){return o=this.localStore,u=this.datastore,c=e.asyncQueue,g=n=>y_(this.syncEngine,n,0),S=Xh.D()?new Xh:new Ky,new $p(o,u,c,g,S);var o,u,c,g,S}createSyncEngine(e,n){return function(u,c,g,S,x,G,ee){const le=new iv(u,c,g,S,x,G);return ee&&(le.Oa=!0),le}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){var e=this;return(0,f.Z)(function*(){var n,o;yield(o=(0,f.Z)(function*(c){const g=pt(c);ct("RemoteStore","RemoteStore shutting down."),g.v_.add(5),yield cd(g),g.M_.shutdown(),g.x_.set("Unknown")}),function u(c){return o.apply(this,arguments)})(e.remoteStore),null===(n=e.datastore)||void 0===n||n.terminate()})()}}function Ca(i,e=10240){let n=0;return{read:()=>(0,f.Z)(function*(){if(n<i.byteLength){const o={value:i.slice(n,n+e),done:!1};return n+=e,o}return{done:!0}})(),cancel:()=>(0,f.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class Df{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.qa(this.observer.next,e)}error(e){this.observer.error?this.qa(this.observer.error,e):Hr("Uncaught Error in snapshot listener:",e.toString())}Qa(){this.muted=!0}qa(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}class hv{constructor(e,n){this.Ka=e,this.serializer=n,this.metadata=new Kr,this.buffer=new Uint8Array,this.$a=new TextDecoder("utf-8"),this.Ua().then(o=>{o&&o.ra()?this.metadata.resolve(o.na.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(o?.na)}`))},o=>this.metadata.reject(o))}close(){return this.Ka.cancel()}getMetadata(){var e=this;return(0,f.Z)(function*(){return e.metadata.promise})()}Ba(){var e=this;return(0,f.Z)(function*(){return yield e.getMetadata(),e.Ua()})()}Ua(){var e=this;return(0,f.Z)(function*(){const n=yield e.Wa();if(null===n)return null;const o=e.$a.decode(n),u=Number(o);isNaN(u)&&e.Ga(`length string (${o}) is not valid number`);const c=yield e.za(u);return new eg(JSON.parse(c),n.length+u)})()}ja(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Wa(){var e=this;return(0,f.Z)(function*(){for(;e.ja()<0&&!(yield e.Ha()););if(0===e.buffer.length)return null;const n=e.ja();n<0&&e.Ga("Reached the end of bundle when a length string is expected.");const o=e.buffer.slice(0,n);return e.buffer=e.buffer.slice(n),o})()}za(e){var n=this;return(0,f.Z)(function*(){for(;n.buffer.length<e;)(yield n.Ha())&&n.Ga("Reached the end of bundle when more is expected.");const o=n.$a.decode(n.buffer.slice(0,e));return n.buffer=n.buffer.slice(e),o})()}Ga(e){throw this.Ka.cancel(),new Error(`Invalid bundle format: ${e}`)}Ha(){var e=this;return(0,f.Z)(function*(){const n=yield e.Ka.read();if(!n.done){const o=new Uint8Array(e.buffer.length+n.value.length);o.set(e.buffer),o.set(n.value,e.buffer.length),e.buffer=o}return n.done})()}}class WE{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){var n=this;return(0,f.Z)(function*(){if(n.ensureCommitNotCalled(),n.mutations.length>0)throw n.lastTransactionError=new ft(Je.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),n.lastTransactionError;const o=yield(u=(0,f.Z)(function*(g,S){const x=pt(g),G={documents:S.map(Ge=>ed(x.serializer,Ge))},ee=yield x.vo("BatchGetDocuments",x.serializer.databaseId,qn.emptyPath(),G,S.length),le=new Map;ee.forEach(Ge=>{const Rt=function Fy(i,e){return"found"in e?function(o,u){Jt(!!u.found);const c=Ya(o,u.found.name),g=qs(u.found.updateTime),S=u.found.createTime?qs(u.found.createTime):cn.min(),x=new St({mapValue:{fields:u.found.fields}});return wn.newFoundDocument(c,g,S,x)}(i,e):"missing"in e?function(o,u){Jt(!!u.missing),Jt(!!u.readTime);const c=Ya(o,u.missing),g=qs(u.readTime);return wn.newNoDocument(c,g)}(i,e):bt()}(x.serializer,Ge);le.set(Rt.key.toString(),Rt)});const Ce=[];return S.forEach(Ge=>{const Rt=le.get(Ge.toString());Jt(!!Rt),Ce.push(Rt)}),Ce}),function c(g,S){return u.apply(this,arguments)})(n.datastore,e);var u;return o.forEach(u=>n.recordVersion(u)),o})()}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(o){this.lastTransactionError=o}this.writtenDocs.add(e.toString())}delete(e){this.write(new Xu(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,f.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastTransactionError)throw e.lastTransactionError;const n=e.readVersions;var o;e.mutations.forEach(o=>{n.delete(o.key.toString())}),n.forEach((o,u)=>{const c=Vt.fromPath(u);e.mutations.push(new Yf(c,e.precondition(c)))}),yield(o=(0,f.Z)(function*(c,g){const S=pt(c),x={writes:g.map(G=>Sl(S.serializer,G))};yield S.So("Commit",S.serializer.databaseId,qn.emptyPath(),x)}),function u(c,g){return o.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw bt();n=cn.min()}const o=this.readVersions.get(e.key.toString());if(o){if(!n.isEqual(o))throw new ft(Je.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(cn.min())?ts.exists(!1):ts.updateTime(n):ts.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(cn.min()))throw new ft(Je.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ts.updateTime(n)}return ts.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class _g{constructor(e,n,o,u,c){this.asyncQueue=e,this.datastore=n,this.options=o,this.updateFunction=u,this.deferred=c,this.Ja=o.maxAttempts,this.jo=new ud(this.asyncQueue,"transaction_retry")}Ya(){this.Ja-=1,this.Za()}Za(){var e=this;this.jo.qo((0,f.Z)(function*(){const n=new WE(e.datastore),o=e.Xa(n);o&&o.then(u=>{e.asyncQueue.enqueueAndForget(()=>n.commit().then(()=>{e.deferred.resolve(u)}).catch(c=>{e.eu(c)}))}).catch(u=>{e.eu(u)})}))}Xa(e){try{const n=this.updateFunction(e);return!uu(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}eu(e){this.Ja>0&&this.tu(e)?(this.Ja-=1,this.asyncQueue.enqueueAndForget(()=>(this.Za(),Promise.resolve()))):this.deferred.reject(e)}tu(e){if("FirebaseError"===e.name){const n=e.code;return"aborted"===n||"failed-precondition"===n||"already-exists"===n||!tp(n)}return!1}}class S_{constructor(e,n,o,u){var c=this;this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=o,this.databaseInfo=u,this.user=hn.UNAUTHENTICATED,this.clientId=ju.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(o,function(){var g=(0,f.Z)(function*(S){ct("FirestoreClient","Received user=",S.uid),yield c.authCredentialListener(S),c.user=S});return function(S){return g.apply(this,arguments)}}()),this.appCheckCredentials.start(o,g=>(ct("FirestoreClient","Received new app check token=",g),this.appCheckCredentialListener(g,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new ft(Je.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const n=new Kr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,f.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),n.resolve()}catch(o){const u=ca(o,"Failed to shutdown persistence");n.reject(u)}})),n.promise}}function Af(i,e){return yg.apply(this,arguments)}function yg(){return yg=(0,f.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress(),ct("FirestoreClient","Initializing OfflineComponentProvider");const n=i.configuration;yield e.initialize(n);let o=n.initialUser;i.setCredentialChangeListener(function(){var u=(0,f.Z)(function*(c){o.isEqual(c)||(yield Wm(e.localStore,c),o=c)});return function(c){return u.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i._offlineComponents=e}),yg.apply(this,arguments)}function vg(i,e){return Cf.apply(this,arguments)}function Cf(){return Cf=(0,f.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress();const n=yield Eg(i);ct("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(n,i.configuration),i.setCredentialChangeListener(o=>u_(e.remoteStore,o)),i.setAppCheckTokenChangeListener((o,u)=>u_(e.remoteStore,u)),i._onlineComponents=e}),Cf.apply(this,arguments)}function R_(i){return"FirebaseError"===i.name?i.code===Je.FAILED_PRECONDITION||i.code===Je.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||22===i.code||20===i.code||11===i.code}function Eg(i){return lh.apply(this,arguments)}function lh(){return lh=(0,f.Z)(function*(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){ct("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Af(i,i._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!R_(n))throw n;ni("Error using user provided cache. Falling back to memory cache: "+n),yield Af(i,new uh)}}else ct("FirestoreClient","Using default OfflineComponentProvider"),yield Af(i,new uh);return i._offlineComponents}),lh.apply(this,arguments)}function bf(i){return Ig.apply(this,arguments)}function Ig(){return Ig=(0,f.Z)(function*(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(ct("FirestoreClient","Using user provided OnlineComponentProvider"),yield vg(i,i._uninitializedComponentsProvider._online)):(ct("FirestoreClient","Using default OnlineComponentProvider"),yield vg(i,new gd))),i._onlineComponents}),Ig.apply(this,arguments)}function P_(i){return Eg(i).then(e=>e.persistence)}function md(i){return Eg(i).then(e=>e.localStore)}function M_(i){return bf(i).then(e=>e.remoteStore)}function Xa(i){return bf(i).then(e=>e.syncEngine)}function _d(i){return Rf.apply(this,arguments)}function Rf(){return Rf=(0,f.Z)(function*(i){const e=yield bf(i),n=e.eventManager;return n.onListen=sv.bind(null,e.syncEngine),n.onUnlisten=__.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=m_.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=og.bind(null,e.syncEngine),n}),Rf.apply(this,arguments)}function ch(i,e,n={}){const o=new Kr;return i.asyncQueue.enqueueAndForget((0,f.Z)(function*(){return function(c,g,S,x,G){const ee=new Df({next:Ce=>{g.enqueueAndForget(()=>Yp(c,le));const Ge=Ce.docs.has(S);!Ge&&Ce.fromCache?G.reject(new ft(Je.UNAVAILABLE,"Failed to get document because the client is offline.")):Ge&&Ce.fromCache&&x&&"server"===x.source?G.reject(new ft(Je.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):G.resolve(Ce)},error:Ce=>G.reject(Ce)}),le=new Xp(sc(S.path),ee,{includeMetadataChanges:!0,ta:!0});return Qp(c,le)}(yield _d(i),i.asyncQueue,e,n,o)})),o.promise}function pv(i,e,n={}){const o=new Kr;return i.asyncQueue.enqueueAndForget((0,f.Z)(function*(){return function(c,g,S,x,G){const ee=new Df({next:Ce=>{g.enqueueAndForget(()=>Yp(c,le)),Ce.fromCache&&"server"===x.source?G.reject(new ft(Je.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):G.resolve(Ce)},error:Ce=>G.reject(Ce)}),le=new Xp(S,ee,{includeMetadataChanges:!0,ta:!0});return Qp(c,le)}(yield _d(i),i.asyncQueue,e,n,o)})),o.promise}function V_(i){const e={};return void 0!==i.timeoutSeconds&&(e.timeoutSeconds=i.timeoutSeconds),e}const U_=new Map;function dh(i,e,n){if(!n)throw new ft(Je.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function B_(i,e,n,o){if(!0===e&&!0===o)throw new ft(Je.INVALID_ARGUMENT,`${i} and ${n} cannot be used together.`)}function Dg(i){if(!Vt.isDocumentKey(i))throw new ft(Je.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function j_(i){if(Vt.isDocumentKey(i))throw new ft(Je.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function Sc(i){if(void 0===i)return"undefined";if(null===i)return"null";if("string"==typeof i)return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if("number"==typeof i||"boolean"==typeof i)return""+i;if("object"==typeof i){if(i instanceof Array)return"an array";{const e=(o=i).constructor?o.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var o;return"function"==typeof i?"a function":bt()}function Rr(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new ft(Je.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Sc(i);throw new ft(Je.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return i}function Ag(i,e){if(e<=0)throw new ft(Je.INVALID_ARGUMENT,`Function ${i}() requires a positive number, but it was: ${e}.`)}class hh{constructor(e){var n,o;if(void 0===e.host){if(void 0!==e.ssl)throw new ft(Je.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(n=e.ssl)||void 0===n||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new ft(Je.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}B_("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=V_(null!==(o=e.experimentalLongPollingOptions)&&void 0!==o?o:{}),function(c){if(void 0!==c.timeoutSeconds){if(isNaN(c.timeoutSeconds))throw new ft(Je.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (must not be NaN)`);if(c.timeoutSeconds<5)throw new ft(Je.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (minimum allowed value is 5)`);if(c.timeoutSeconds>30)throw new ft(Je.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Pf{constructor(e,n,o,u){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=o,this._app=u,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new hh({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new ft(Je.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new ft(Je.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new hh(e),void 0!==e.credentials&&(this._authCredentials=function(o){if(!o)return new Jl;switch(o.type){case"firstParty":return new vl(o.sessionIndex||"0",o.iamToken||null,o.authTokenFactory||null);case"provider":return o.client;default:throw new ft(Je.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const o=U_.get(n);o&&(ct("ComponentProvider","Removing Datastore"),U_.delete(n),o.terminate())}(this),Promise.resolve()}}function $_(i,e,n,o={}){var u;const c=(i=Rr(i,Pf))._getSettings(),g=`${e}:${n}`;if("firestore.googleapis.com"!==c.host&&c.host!==g&&ni("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),i._setSettings(Object.assign(Object.assign({},c),{host:g,ssl:!1})),o.mockUserToken){let S,x;if("string"==typeof o.mockUserToken)S=o.mockUserToken,x=hn.MOCK_USER;else{S=(0,ge.Sg)(o.mockUserToken,null===(u=i._app)||void 0===u?void 0:u.options.projectId);const G=o.mockUserToken.sub||o.mockUserToken.user_id;if(!G)throw new ft(Je.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");x=new hn(G)}i._authCredentials=new bs(new yl(S,x))}}class qo{constructor(e,n,o){this.converter=n,this._query=o,this.type="query",this.firestore=e}withConverter(e){return new qo(this.firestore,e,this._query)}}class Vs{constructor(e,n,o){this.converter=n,this._key=o,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Vu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Vs(this.firestore,e,this._key)}}class Vu extends qo{constructor(e,n,o){super(e,n,sc(o)),this._path=o,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Vs(this.firestore,null,new Vt(e))}withConverter(e){return new Vu(this.firestore,e,this._path)}}function gv(i,e,...n){if(i=(0,ge.m9)(i),dh("collection","path",e),i instanceof Pf){const o=qn.fromString(e,...n);return j_(o),new Vu(i,null,o)}{if(!(i instanceof Vs||i instanceof Vu))throw new ft(Je.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=i._path.child(qn.fromString(e,...n));return j_(o),new Vu(i.firestore,null,o)}}function H_(i,e){if(i=Rr(i,Pf),dh("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new ft(Je.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new qo(i,null,(o=e,new Fa(qn.emptyPath(),o)));var o}function Cg(i,e,...n){if(i=(0,ge.m9)(i),1===arguments.length&&(e=ju.newId()),dh("doc","path",e),i instanceof Pf){const o=qn.fromString(e,...n);return Dg(o),new Vs(i,null,new Vt(o))}{if(!(i instanceof Vs||i instanceof Vu))throw new ft(Je.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=i._path.child(qn.fromString(e,...n));return Dg(o),new Vs(i.firestore,i instanceof Vu?i.converter:null,new Vt(o))}}function fh(i,e){return i=(0,ge.m9)(i),e=(0,ge.m9)(e),(i instanceof Vs||i instanceof Vu)&&(e instanceof Vs||e instanceof Vu)&&i.firestore===e.firestore&&i.path===e.path&&i.converter===e.converter}function bg(i,e){return i=(0,ge.m9)(i),e=(0,ge.m9)(e),i instanceof qo&&e instanceof qo&&i.firestore===e.firestore&&pu(i._query,e._query)&&i.converter===e.converter}class z_{constructor(){this.nu=Promise.resolve(),this.ru=[],this.iu=!1,this.su=[],this.ou=null,this._u=!1,this.au=!1,this.uu=[],this.jo=new ud(this,"async_queue_retry"),this.cu=()=>{const n=ad();n&&ct("AsyncQueue","Visibility state changed to "+n.visibilityState),this.jo.Ko()};const e=ad();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.cu)}get isShuttingDown(){return this.iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.lu(),this.hu(e)}enterRestrictedMode(e){if(!this.iu){this.iu=!0,this.au=e||!1;const n=ad();n&&"function"==typeof n.removeEventListener&&n.removeEventListener("visibilitychange",this.cu)}}enqueue(e){if(this.lu(),this.iu)return new Promise(()=>{});const n=new Kr;return this.hu(()=>this.iu&&this.au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.ru.push(e),this.Pu()))}Pu(){var e=this;return(0,f.Z)(function*(){if(0!==e.ru.length){try{yield e.ru[0](),e.ru.shift(),e.jo.reset()}catch(n){if(!Ti(n))throw n;ct("AsyncQueue","Operation failed with retryable error: "+n)}e.ru.length>0&&e.jo.qo(()=>e.Pu())}})()}hu(e){const n=this.nu.then(()=>(this._u=!0,e().catch(o=>{throw this.ou=o,this._u=!1,Hr("INTERNAL UNHANDLED ERROR: ",function(g){let S=g.message||"";return g.stack&&(S=g.stack.includes(g.message)?g.stack:g.message+"\n"+g.stack),S}(o)),o}).then(o=>(this._u=!1,o))));return this.nu=n,n}enqueueAfterDelay(e,n,o){this.lu(),this.uu.indexOf(e)>-1&&(n=0);const u=lf.createAndSchedule(this,e,n,o,c=>this.Iu(c));return this.su.push(u),u}lu(){this.ou&&bt()}verifyOperationInProgress(){}Tu(){var e=this;return(0,f.Z)(function*(){let n;do{n=e.nu,yield n}while(n!==e.nu)})()}Eu(e){for(const n of this.su)if(n.timerId===e)return!0;return!1}du(e){return this.Tu().then(()=>{this.su.sort((n,o)=>n.targetTimeMs-o.targetTimeMs);for(const n of this.su)if(n.skipDelay(),"all"!==e&&n.timerId===e)break;return this.Tu()})}Au(e){this.uu.push(e)}Iu(e){const n=this.su.indexOf(e);this.su.splice(n,1)}}function Mf(i){return function(n,o){if("object"!=typeof n||null===n)return!1;const u=n;for(const c of["next","error","complete"])if(c in u&&"function"==typeof u[c])return!0;return!1}(i)}class mv{constructor(){this._progressObserver={},this._taskCompletionResolver=new Kr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,o){this._progressObserver={next:e,error:n,complete:o}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}const _v=-1;class Oi extends Pf{constructor(e,n,o,u){super(e,n,o,u),this.type="firestore",this._queue=new z_,this._persistenceKey=u?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||G_(this),this._firestoreClient.terminate()}}function yv(i,e){const n="object"==typeof i?i:(0,Z.getApp)(),o="string"==typeof i?i:e||"(default)",u=(0,Z._getProvider)(n,"firestore").getImmediate({identifier:o});if(!u._initialized){const c=(0,ge.P0)("firestore");c&&$_(u,...c)}return u}function Ks(i){return i._firestoreClient||G_(i),i._firestoreClient.verifyNotTerminated(),i._firestoreClient}function G_(i){var e,n,o;const u=i._freezeSettings(),c=(x=(null===(e=i._app)||void 0===e?void 0:e.options.appId)||"",new Pd(i._databaseId,x,i._persistenceKey,(ee=u).host,ee.ssl,ee.experimentalForceLongPolling,ee.experimentalAutoDetectLongPolling,V_(ee.experimentalLongPollingOptions),ee.useFetchStreams));var x,ee;i._firestoreClient=new S_(i._authCredentials,i._appCheckCredentials,i._queue,c),null!==(n=u.localCache)&&void 0!==n&&n._offlineComponentProvider&&null!==(o=u.localCache)&&void 0!==o&&o._onlineComponentProvider&&(i._firestoreClient._uninitializedComponentsProvider={_offlineKind:u.localCache.kind,_offline:u.localCache._offlineComponentProvider,_online:u.localCache._onlineComponentProvider})}function vv(i,e){K_(i=Rr(i,Oi));const n=Ks(i);if(n._uninitializedComponentsProvider)throw new ft(Je.FAILED_PRECONDITION,"SDK cache is already specified.");ni("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const o=i._freezeSettings(),u=new gd;return W_(n,u,new Tf(u,o.cacheSizeBytes,e?.forceOwnership))}function Ev(i){K_(i=Rr(i,Oi));const e=Ks(i);if(e._uninitializedComponentsProvider)throw new ft(Je.FAILED_PRECONDITION,"SDK cache is already specified.");ni("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=i._freezeSettings(),o=new gd;return W_(e,o,new b_(o,n.cacheSizeBytes))}function W_(i,e,n){const o=new Kr;return i.asyncQueue.enqueue((0,f.Z)(function*(){try{yield Af(i,n),yield vg(i,e),o.resolve()}catch(u){const c=u;if(!R_(c))throw c;ni("Error enabling indexeddb cache. Falling back to memory cache: "+c),o.reject(c)}})).then(()=>o.promise)}function Iv(i){if(i._initialized&&!i._terminated)throw new ft(Je.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Kr;return i._queue.enqueueAndForgetEvenWhileRestricted((0,f.Z)(function*(){try{yield(n=(0,f.Z)(function*(u){if(!io.D())return Promise.resolve();const c=u+"main";yield io.delete(c)}),function o(u){return n.apply(this,arguments)})(qd(i._databaseId,i._persistenceKey)),e.resolve()}catch(n){e.reject(n)}var n})),e.promise}function q_(i){return function(n){const o=new Kr;return n.asyncQueue.enqueueAndForget((0,f.Z)(function*(){return function GE(i,e){return pf.apply(this,arguments)}(yield Xa(n),o)})),o.promise}(Ks(i=Rr(i,Oi)))}function Sg(i){return function fv(i){return i.asyncQueue.enqueue((0,f.Z)(function*(){const e=yield P_(i),n=yield M_(i);return e.setNetworkEnabled(!0),function(u){const c=pt(u);return c.v_.delete(0),ld(c)}(n)}))}(Ks(i=Rr(i,Oi)))}function wv(i){return function N_(i){return i.asyncQueue.enqueue((0,f.Z)(function*(){const e=yield P_(i),n=yield M_(i);return e.setNetworkEnabled(!1),(o=(0,f.Z)(function*(c){const g=pt(c);g.v_.add(0),yield cd(g),g.x_.set("Offline")}),function u(c){return o.apply(this,arguments)})(n);var o}))}(Ks(i=Rr(i,Oi)))}function Tv(i,e){const n=Ks(i=Rr(i,Oi)),o=new mv;return function k_(i,e,n,o){const u=function(g,S){let x;return x="string"==typeof g?_a().encode(g):g,ee=function(ee,le){if(ee instanceof Uint8Array)return Ca(ee,void 0);if(ee instanceof ArrayBuffer)return Ca(new Uint8Array(ee),void 0);if(ee instanceof ReadableStream)return ee.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(x),new hv(ee,S);var ee}(n,Dc(e));i.asyncQueue.enqueueAndForget((0,f.Z)(function*(){!function dv(i,e,n){const o=pt(i);var u;(u=(0,f.Z)(function*(g,S,x){try{const G=yield S.getMetadata();if(yield function(Rt,Ht){const Bt=pt(Rt),Tn=qs(Ht.createTime);return Bt.persistence.runTransaction("hasNewerBundle","readonly",dr=>Bt.$r.getBundleMetadata(dr,Ht.id)).then(dr=>!!dr&&dr.createTime.compareTo(Tn)>=0)}(g.localStore,G))return yield S.close(),x._completeWith({taskState:"Success",documentsLoaded:(Rt=G).totalDocuments,bytesLoaded:Rt.totalBytes,totalDocuments:Rt.totalDocuments,totalBytes:Rt.totalBytes}),Promise.resolve(new Set);x._updateProgress(cf(G));const ee=new rv(G,g.localStore,S.serializer);let le=yield S.Ba();for(;le;){const Ge=yield ee.sa(le);Ge&&x._updateProgress(Ge),le=yield S.Ba()}const Ce=yield ee.complete();return yield Lu(g,Ce.aa,void 0),yield function(Rt,Ht){const Bt=pt(Rt);return Bt.persistence.runTransaction("Save bundle","readwrite",Tn=>Bt.$r.saveBundleMetadata(Tn,Ht))}(g.localStore,G),x._completeWith(Ce.progress),Promise.resolve(Ce._a)}catch(G){return ni("SyncEngine",`Loading bundle failed with ${G}`),x._failWith(G),Promise.resolve(new Set)}var Rt}),function c(g,S,x){return u.apply(this,arguments)})(o,e,n).then(u=>{o.sharedClientState.notifyBundleLoaded(u)})}(yield Xa(i),u,o)}))}(n,i._databaseId,e,o),o}function Dv(i,e){return function F_(i,e){return i.asyncQueue.enqueue((0,f.Z)(function*(){return function(o,u){const c=pt(o);return c.persistence.runTransaction("Get named query","readonly",g=>c.$r.getNamedQuery(g,u))}(yield md(i),e)}))}(Ks(i=Rr(i,Oi)),e).then(n=>n?new qo(i,null,n.query):null)}function K_(i){if(i._initialized||i._terminated)throw new ft(Je.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Gl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Gl(Xi.fromBase64String(e))}catch(n){throw new ft(Je.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Gl(Xi.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Wl{constructor(...e){for(let n=0;n<e.length;++n)if(0===e[n].length)throw new ft(Je.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new _i(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class ql{constructor(e){this._methodName=e}}class Nf{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ft(Je.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ft(Je.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return kn(this._lat,e._lat)||kn(this._long,e._long)}}const KE=/^__.*__$/;class Z_{constructor(e,n,o){this.data=e,this.fieldMask=n,this.fieldTransforms=o}toMutation(e,n){return null!==this.fieldMask?new Ru(e,this.data,this.fieldMask,n,this.fieldTransforms):new mu(e,this.data,n,this.fieldTransforms)}}class Pg{constructor(e,n,o){this.data=e,this.fieldMask=n,this.fieldTransforms=o}toMutation(e,n){return new Ru(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function bv(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw bt()}}class Rc{constructor(e,n,o,u,c,g){this.settings=e,this.databaseId=n,this.serializer=o,this.ignoreUndefinedProperties=u,void 0===c&&this.Ru(),this.fieldTransforms=c||[],this.fieldMask=g||[]}get path(){return this.settings.path}get Vu(){return this.settings.Vu}mu(e){return new Rc(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}fu(e){var n;const o=null===(n=this.path)||void 0===n?void 0:n.child(e),u=this.mu({path:o,gu:!1});return u.pu(e),u}yu(e){var n;const o=null===(n=this.path)||void 0===n?void 0:n.child(e),u=this.mu({path:o,gu:!1});return u.Ru(),u}wu(e){return this.mu({path:void 0,gu:!0})}Su(e){return hl(e,this.settings.methodName,this.settings.bu||!1,this.path,this.settings.Du)}contains(e){return void 0!==this.fieldMask.find(n=>e.isPrefixOf(n))||void 0!==this.fieldTransforms.find(n=>e.isPrefixOf(n.field))}Ru(){if(this.path)for(let e=0;e<this.path.length;e++)this.pu(this.path.get(e))}pu(e){if(0===e.length)throw this.Su("Document fields must not be empty");if(bv(this.Vu)&&KE.test(e))throw this.Su('Document fields cannot begin and end with "__"')}}class Sv{constructor(e,n,o){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=o||Dc(e)}Cu(e,n,o,u=!1){return new Rc({Vu:e,methodName:n,Du:o,path:_i.emptyPath(),gu:!1,bu:u},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Pc(i){const e=i._freezeSettings(),n=Dc(i._databaseId);return new Sv(i._databaseId,!!e.ignoreUndefinedProperties,n)}function yd(i,e,n,o,u,c={}){const g=i.Cu(c.merge||c.mergeFields?2:0,e,n,u);Kl("Data must be an object, but it was:",g,o);const S=Oc(o,g);let x,G;if(c.merge)x=new Bo(g.fieldMask),G=g.fieldTransforms;else if(c.mergeFields){const ee=[];for(const le of c.mergeFields){const Ce=Uu(e,le,n);if(!g.contains(Ce))throw new ft(Je.INVALID_ARGUMENT,`Field '${Ce}' is specified in your field mask but missing from your input data.`);Mg(ee,Ce)||ee.push(Ce)}x=new Bo(ee),G=g.fieldTransforms.filter(le=>x.covers(le.field))}else x=null,G=g.fieldTransforms;return new Z_(new St(S),x,G)}class gh extends ql{_toFieldTransform(e){if(2!==e.Vu)throw e.Su(1===e.Vu?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof gh}}function Eu(i,e,n){return new Rc({Vu:3,Du:e.settings.Du,methodName:i._methodName,gu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Mc extends ql{_toFieldTransform(e){return new Cl(e.path,new cr)}isEqual(e){return e instanceof Mc}}class Ko extends ql{constructor(e,n){super(e),this.vu=n}_toFieldTransform(e){const n=Eu(this,e,!0),o=this.vu.map(c=>eu(c,n)),u=new uo(o);return new Cl(e.path,u)}isEqual(e){return e instanceof Ko&&(0,ge.vZ)(this.vu,e.vu)}}class cl extends ql{constructor(e,n){super(e),this.vu=n}_toFieldTransform(e){const n=Eu(this,e,!0),o=this.vu.map(c=>eu(c,n)),u=new Qa(o);return new Cl(e.path,u)}isEqual(e){return e instanceof cl&&(0,ge.vZ)(this.vu,e.vu)}}class vd extends ql{constructor(e,n){super(e),this.Fu=n}_toFieldTransform(e){const n=new Yu(e.serializer,be(e.serializer,this.Fu));return new Cl(e.path,n)}isEqual(e){return e instanceof vd&&this.Fu===e.Fu}}function ba(i,e,n,o){const u=i.Cu(1,e,n);Kl("Data must be an object, but it was:",u,o);const c=[],g=St.empty();Do(o,(x,G)=>{const ee=dl(e,x,n);G=(0,ge.m9)(G);const le=u.yu(ee);if(G instanceof gh)c.push(ee);else{const Ce=eu(G,le);null!=Ce&&(c.push(ee),g.set(ee,Ce))}});const S=new Bo(c);return new Pg(g,S,u.fieldTransforms)}function mh(i,e,n,o,u,c){const g=i.Cu(1,e,n),S=[Uu(e,o,n)],x=[u];if(c.length%2!=0)throw new ft(Je.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let Ce=0;Ce<c.length;Ce+=2)S.push(Uu(e,c[Ce])),x.push(c[Ce+1]);const G=[],ee=St.empty();for(let Ce=S.length-1;Ce>=0;--Ce)if(!Mg(G,S[Ce])){const Ge=S[Ce];let Rt=x[Ce];Rt=(0,ge.m9)(Rt);const Ht=g.yu(Ge);if(Rt instanceof gh)G.push(Ge);else{const Bt=eu(Rt,Ht);null!=Bt&&(G.push(Ge),ee.set(Ge,Bt))}}const le=new Bo(G);return new Pg(ee,le,g.fieldTransforms)}function Nc(i,e,n,o=!1){return eu(n,i.Cu(o?4:3,e))}function eu(i,e){if(xc(i=(0,ge.m9)(i)))return Kl("Unsupported field value:",e,i),Oc(i,e);if(i instanceof ql)return function(o,u){if(!bv(u.Vu))throw u.Su(`${o._methodName}() can only be used with update() and set()`);if(!u.path)throw u.Su(`${o._methodName}() is not currently supported inside arrays`);const c=o._toFieldTransform(u);c&&u.fieldTransforms.push(c)}(i,e),null;if(void 0===i&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.gu&&4!==e.Vu)throw e.Su("Nested arrays are not supported");return function(o,u){const c=[];let g=0;for(const S of o){let x=eu(S,u.wu(g));null==x&&(x={nullValue:"NULL_VALUE"}),c.push(x),g++}return{arrayValue:{values:c}}}(i,e)}return function(o,u){if(null===(o=(0,ge.m9)(o)))return{nullValue:"NULL_VALUE"};if("number"==typeof o)return be(u.serializer,o);if("boolean"==typeof o)return{booleanValue:o};if("string"==typeof o)return{stringValue:o};if(o instanceof Date){const c=Zt.fromDate(o);return{timestampValue:Xc(u.serializer,c)}}if(o instanceof Zt){const c=new Zt(o.seconds,1e3*Math.floor(o.nanoseconds/1e3));return{timestampValue:Xc(u.serializer,c)}}if(o instanceof Nf)return{geoPointValue:{latitude:o.latitude,longitude:o.longitude}};if(o instanceof Gl)return{bytesValue:fm(u.serializer,o._byteString)};if(o instanceof Vs){const c=u.databaseId,g=o.firestore._databaseId;if(!g.isEqual(c))throw u.Su(`Document reference is for database ${g.projectId}/${g.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:kh(o.firestore._databaseId||u.databaseId,o._key.path)}}throw u.Su(`Unsupported field value: ${Sc(o)}`)}(i,e)}function Oc(i,e){const n={};return Du(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Do(i,(o,u)=>{const c=eu(u,e.fu(o));null!=c&&(n[o]=c)}),{mapValue:{fields:n}}}function xc(i){return!("object"!=typeof i||null===i||i instanceof Array||i instanceof Date||i instanceof Zt||i instanceof Nf||i instanceof Gl||i instanceof Vs||i instanceof ql)}function Kl(i,e,n){if(!xc(n)||"object"!=typeof(u=n)||null===u||Object.getPrototypeOf(u)!==Object.prototype&&null!==Object.getPrototypeOf(u)){const o=Sc(n);throw e.Su("an object"===o?i+" a custom object":i+" "+o)}var u}function Uu(i,e,n){if((e=(0,ge.m9)(e))instanceof Wl)return e._internalPath;if("string"==typeof e)return dl(i,e);throw hl("Field path arguments must be of type string or ",i,!1,void 0,n)}const Ed=new RegExp("[~\\*/\\[\\]]");function dl(i,e,n){if(e.search(Ed)>=0)throw hl(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,n);try{return new Wl(...e.split("."))._internalPath}catch{throw hl(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,n)}}function hl(i,e,n,o,u){const c=o&&!o.isEmpty(),g=void 0!==u;let S=`Function ${e}() called with invalid data`;n&&(S+=" (via `toFirestore()`)"),S+=". ";let x="";return(c||g)&&(x+=" (found",c&&(x+=` in field ${o}`),g&&(x+=` in document ${u}`),x+=")"),new ft(Je.INVALID_ARGUMENT,S+i+x)}function Mg(i,e){return i.some(n=>n.isEqual(e))}class Id{constructor(e,n,o,u,c){this._firestore=e,this._userDataWriter=n,this._key=o,this._document=u,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new Vs(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Q_(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(_h("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n)}}}class Q_ extends Id{data(){return super.data()}}function _h(i,e){return"string"==typeof e?dl(i,e):e instanceof Wl?e._internalPath:e._delegate._internalPath}function Ng(i){if("L"===i.limitType&&0===i.explicitOrderBy.length)throw new ft(Je.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Of{}class wd extends Of{}function Y_(i,e,...n){let o=[];e instanceof Of&&o.push(e),o=o.concat(n),function(c){const g=c.filter(x=>x instanceof Dd).length,S=c.filter(x=>x instanceof Td).length;if(g>1||g>0&&S>0)throw new ft(Je.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(o);for(const u of o)i=u._apply(i);return i}class Td extends wd{constructor(e,n,o){super(),this._field=e,this._op=n,this._value=o,this.type="where"}static _create(e,n,o){return new Td(e,n,o)}_apply(e){const n=this._parse(e);return Vg(e._query,n),new qo(e.firestore,e.converter,zc(e._query,n))}_parse(e){const n=Pc(e.firestore);return function(c,g,S,x,G,ee,le){let Ce;if(G.isKeyField()){if("array-contains"===ee||"array-contains-any"===ee)throw new ft(Je.INVALID_ARGUMENT,`Invalid Query. You can't perform '${ee}' queries on documentId().`);if("in"===ee||"not-in"===ee){Cd(le,ee);const Ge=[];for(const Rt of le)Ge.push(Lg(x,c,Rt));Ce={arrayValue:{values:Ge}}}else Ce=Lg(x,c,le)}else"in"!==ee&&"not-in"!==ee&&"array-contains-any"!==ee||Cd(le,ee),Ce=Nc(S,"where",le,"in"===ee||"not-in"===ee);return Nn.create(G,ee,Ce)}(e._query,0,n,e.firestore._databaseId,this._field,this._op,this._value)}}function Og(i,e,n){const o=e,u=_h("where",i);return Td._create(u,o,n)}class Dd extends Of{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Dd(e,n)}_parse(e){const n=this._queryConstraints.map(o=>o._parse(e)).filter(o=>o.getFilters().length>0);return 1===n.length?n[0]:kr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return 0===n.getFilters().length?e:(function(u,c){let g=u;const S=c.getFlattenedFilters();for(const x of S)Vg(g,x),g=zc(g,x)}(e._query,n),new qo(e.firestore,e.converter,zc(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class xg extends wd{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new xg(e,n)}_apply(e){const n=function(u,c,g){if(null!==u.startAt)throw new ft(Je.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==u.endAt)throw new ft(Je.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ki(c,g)}(e._query,this._field,this._direction);return new qo(e.firestore,e.converter,function(u,c){const g=u.explicitOrderBy.concat([c]);return new Fa(u.path,u.collectionGroup,g,u.filters.slice(),u.limit,u.limitType,u.startAt,u.endAt)}(e._query,n))}}function Rv(i,e="asc"){const n=e,o=_h("orderBy",i);return xg._create(o,n)}class kg extends wd{constructor(e,n,o){super(),this.type=e,this._limit=n,this._limitType=o}static _create(e,n,o){return new kg(e,n,o)}_apply(e){return new qo(e.firestore,e.converter,Gc(e._query,this._limit,this._limitType))}}function Pv(i){return Ag("limit",i),kg._create("limit",i,"F")}function ZE(i){return Ag("limitToLast",i),kg._create("limitToLast",i,"L")}class xf extends wd{constructor(e,n,o){super(),this.type=e,this._docOrFields=n,this._inclusive=o}static _create(e,n,o){return new xf(e,n,o)}_apply(e){const n=vh(e,this.type,this._docOrFields,this._inclusive);return new qo(e.firestore,e.converter,(c=n,new Fa((u=e._query).path,u.collectionGroup,u.explicitOrderBy.slice(),u.filters.slice(),u.limit,u.limitType,c,u.endAt)));var u,c}}function Mv(...i){return xf._create("startAt",i,!0)}function Nv(...i){return xf._create("startAfter",i,!1)}class Ad extends wd{constructor(e,n,o){super(),this.type=e,this._docOrFields=n,this._inclusive=o}static _create(e,n,o){return new Ad(e,n,o)}_apply(e){const n=vh(e,this.type,this._docOrFields,this._inclusive);return new qo(e.firestore,e.converter,(c=n,new Fa((u=e._query).path,u.collectionGroup,u.explicitOrderBy.slice(),u.filters.slice(),u.limit,u.limitType,u.startAt,c)));var u,c}}function yh(...i){return Ad._create("endBefore",i,!1)}function Fg(...i){return Ad._create("endAt",i,!0)}function vh(i,e,n,o){if(n[0]=(0,ge.m9)(n[0]),n[0]instanceof Id)return function(c,g,S,x,G){if(!x)throw new ft(Je.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${S}().`);const ee=[];for(const le of Dl(c))if(le.field.isKeyField())ee.push(T(g,x.key));else{const Ce=x.data.field(le.field);if(rc(Ce))throw new ft(Je.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+le.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===Ce){const Ge=le.field.canonicalString();throw new ft(Je.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${Ge}' (used as the orderBy) does not exist.`)}ee.push(Ce)}return new Zr(ee,G)}(i._query,i.firestore._databaseId,e,n[0]._document,o);{const u=Pc(i.firestore);return function(g,S,x,G,ee,le){const Ce=g.explicitOrderBy;if(ee.length>Ce.length)throw new ft(Je.INVALID_ARGUMENT,`Too many arguments provided to ${G}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const Ge=[];for(let Rt=0;Rt<ee.length;Rt++){const Ht=ee[Rt];if(Ce[Rt].field.isKeyField()){if("string"!=typeof Ht)throw new ft(Je.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${G}(), but got a ${typeof Ht}`);if(!ac(g)&&-1!==Ht.indexOf("/"))throw new ft(Je.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${G}() must be a plain document ID, but '${Ht}' contains a slash.`);const Bt=g.path.child(qn.fromString(Ht));if(!Vt.isDocumentKey(Bt))throw new ft(Je.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${G}() must result in a valid document path, but '${Bt}' is not because it contains an odd number of segments.`);const Tn=new Vt(Bt);Ge.push(T(S,Tn))}else{const Bt=Nc(x,G,Ht);Ge.push(Bt)}}return new Zr(Ge,le)}(i._query,i.firestore._databaseId,u,e,n,o)}}function Lg(i,e,n){if("string"==typeof(n=(0,ge.m9)(n))){if(""===n)throw new ft(Je.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ac(e)&&-1!==n.indexOf("/"))throw new ft(Je.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const o=e.path.child(qn.fromString(n));if(!Vt.isDocumentKey(o))throw new ft(Je.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${o}' is not because it has an odd number of segments (${o.length}).`);return T(i,new Vt(o))}if(n instanceof Vs)return T(i,n._key);throw new ft(Je.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Sc(n)}.`)}function Cd(i,e){if(!Array.isArray(i)||0===i.length)throw new ft(Je.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Vg(i,e){const n=function(u,c){for(const g of u)for(const S of g.getFlattenedFilters())if(c.indexOf(S.op)>=0)return S.op;return null}(i.filters,function(u){switch(u){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==n)throw new ft(Je.INVALID_ARGUMENT,n===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class kc{convertValue(e,n="none"){switch(aa(e)){case 0:return null;case 1:return e.booleanValue;case 2:return zi(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ao(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw bt()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const o={};return Do(e,(u,c)=>{o[u]=this.convertValue(c,n)}),o}convertGeoPoint(e){return new Nf(zi(e.latitude),zi(e.longitude))}convertArray(e,n){return(e.values||[]).map(o=>this.convertValue(o,n))}convertServerTimestamp(e,n){switch(n){case"previous":const o=Ka(e);return null==o?null:this.convertValue(o,n);case"estimate":return this.convertTimestamp(Na(e));default:return null}}convertTimestamp(e){const n=jo(e);return new Zt(n.seconds,n.nanos)}convertDocumentKey(e,n){const o=qn.fromString(e);Jt(hp(o));const u=new _s(o.get(1),o.get(3)),c=new Vt(o.popFirst(5));return u.isEqual(n)||Hr(`Document ${c} contains a document reference within a different database (${u.projectId}/${u.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),c}}function kf(i,e,n){let o;return o=i?n&&(n.merge||n.mergeFields)?i.toFirestore(e,n):i.toFirestore(e):e,o}class Ov extends kc{constructor(e){super(),this.firestore=e}convertBytes(e){return new Gl(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Vs(this.firestore,null,n)}}class bd{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Fc extends Id{constructor(e,n,o,u,c,g){super(e,n,o,u,g),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Eh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const o=this._document.data.field(_h("DocumentSnapshot.get",e));if(null!==o)return this._userDataWriter.convertValue(o,n.serverTimestamps)}}}class Eh extends Fc{data(e={}){return super.data(e)}}class fl{constructor(e,n,o,u){this._firestore=e,this._userDataWriter=n,this._snapshot=u,this.metadata=new bd(u.hasPendingWrites,u.fromCache),this.query=o}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,n){this._snapshot.docs.forEach(o=>{e.call(n,new Eh(this._firestore,this._userDataWriter,o.key,o,new bd(this._snapshot.mutatedKeys.has(o.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ft(Je.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(u,c){if(u._snapshot.oldDocs.isEmpty()){let g=0;return u._snapshot.docChanges.map(S=>({type:"added",doc:new Eh(u._firestore,u._userDataWriter,S.doc.key,S.doc,new bd(u._snapshot.mutatedKeys.has(S.doc.key),u._snapshot.fromCache),u.query.converter),oldIndex:-1,newIndex:g++}))}{let g=u._snapshot.oldDocs;return u._snapshot.docChanges.filter(S=>c||3!==S.type).map(S=>{const x=new Eh(u._firestore,u._userDataWriter,S.doc.key,S.doc,new bd(u._snapshot.mutatedKeys.has(S.doc.key),u._snapshot.fromCache),u.query.converter);let G=-1,ee=-1;return 0!==S.type&&(G=g.indexOf(S.doc.key),g=g.delete(S.doc.key)),1!==S.type&&(g=g.add(S.doc),ee=g.indexOf(S.doc.key)),{type:xv(S.type),doc:x,oldIndex:G,newIndex:ee}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function xv(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return bt()}}function X_(i,e){return i instanceof Fc&&e instanceof Fc?i._firestore===e._firestore&&i._key.isEqual(e._key)&&(null===i._document?null===e._document:i._document.isEqual(e._document))&&i._converter===e._converter:i instanceof fl&&e instanceof fl&&i._firestore===e._firestore&&bg(i.query,e.query)&&i.metadata.isEqual(e.metadata)&&i._snapshot.isEqual(e._snapshot)}function kv(i){i=Rr(i,Vs);const e=Rr(i.firestore,Oi);return ch(Ks(e),i._key).then(n=>Ih(e,i,n))}class Zl extends kc{constructor(e){super(),this.firestore=e}convertBytes(e){return new Gl(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Vs(this.firestore,null,n)}}function ey(i){i=Rr(i,Vs);const e=Rr(i.firestore,Oi),n=Ks(e),o=new Zl(e);return function O_(i,e){const n=new Kr;return i.asyncQueue.enqueueAndForget((0,f.Z)(function*(){return(o=(0,f.Z)(function*(c,g,S){try{const x=yield function(ee,le){const Ce=pt(ee);return Ce.persistence.runTransaction("read document","readonly",Ge=>Ce.localDocuments.getDocument(Ge,le))}(c,g);x.isFoundDocument()?S.resolve(x):x.isNoDocument()?S.resolve(null):S.reject(new ft(Je.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(x){const G=ca(x,`Failed to get document '${g} from cache`);S.reject(G)}}),function u(c,g,S){return o.apply(this,arguments)})(yield md(i),e,n);var o})),n.promise}(n,i._key).then(u=>new Fc(e,o,i._key,u,new bd(null!==u&&u.hasLocalMutations,!0),i.converter))}function ty(i){i=Rr(i,Vs);const e=Rr(i.firestore,Oi);return ch(Ks(e),i._key,{source:"server"}).then(n=>Ih(e,i,n))}function ny(i){i=Rr(i,qo);const e=Rr(i.firestore,Oi),n=Ks(e),o=new Zl(e);return Ng(i._query),pv(n,i._query).then(u=>new fl(e,o,i,u))}function Fv(i){i=Rr(i,qo);const e=Rr(i.firestore,Oi),n=Ks(e),o=new Zl(e);return function wg(i,e){const n=new Kr;return i.asyncQueue.enqueueAndForget((0,f.Z)(function*(){return(o=(0,f.Z)(function*(c,g,S){try{const x=yield Qh(c,g,!0),G=new f_(g,x.hs),ee=G.Ta(x.documents),le=G.applyChanges(ee,!1);S.resolve(le.snapshot)}catch(x){const G=ca(x,`Failed to execute query '${g} against cache`);S.reject(G)}}),function u(c,g,S){return o.apply(this,arguments)})(yield md(i),e,n);var o})),n.promise}(n,i._query).then(u=>new fl(e,o,i,u))}function Lv(i){i=Rr(i,qo);const e=Rr(i.firestore,Oi),n=Ks(e),o=new Zl(e);return pv(n,i._query,{source:"server"}).then(u=>new fl(e,o,i,u))}function Vv(i,e,n){i=Rr(i,Vs);const o=Rr(i.firestore,Oi),u=kf(i.converter,e,n);return pl(o,[yd(Pc(o),"setDoc",i._key,u,null!==i.converter,n).toMutation(i._key,ts.none())])}function ry(i,e,n,...o){i=Rr(i,Vs);const u=Rr(i.firestore,Oi),c=Pc(u);let g;return g="string"==typeof(e=(0,ge.m9)(e))||e instanceof Wl?mh(c,"updateDoc",i._key,e,n,o):ba(c,"updateDoc",i._key,e),pl(u,[g.toMutation(i._key,ts.exists(!0))])}function $g(i){return pl(Rr(i.firestore,Oi),[new Xu(i._key,ts.none())])}function Hg(i,e){const n=Rr(i.firestore,Oi),o=Cg(i),u=kf(i.converter,e);return pl(n,[yd(Pc(i.firestore),"addDoc",o._key,u,null!==i.converter,{}).toMutation(o._key,ts.exists(!1))]).then(()=>o)}function Uv(i,...e){var n,o,u;i=(0,ge.m9)(i);let c={includeMetadataChanges:!1,source:"default"},g=0;"object"!=typeof e[g]||Mf(e[g])||(c=e[g],g++);const S={includeMetadataChanges:c.includeMetadataChanges,source:c.source};if(Mf(e[g])){const le=e[g];e[g]=null===(n=le.next)||void 0===n?void 0:n.bind(le),e[g+1]=null===(o=le.error)||void 0===o?void 0:o.bind(le),e[g+2]=null===(u=le.complete)||void 0===u?void 0:u.bind(le)}let x,G,ee;if(i instanceof Vs)G=Rr(i.firestore,Oi),ee=sc(i._key.path),x={next:le=>{e[g]&&e[g](Ih(G,i,le))},error:e[g+1],complete:e[g+2]};else{const le=Rr(i,qo);G=Rr(le.firestore,Oi),ee=le._query;const Ce=new Zl(G);x={next:Ge=>{e[g]&&e[g](new fl(G,Ce,le,Ge))},error:e[g+1],complete:e[g+2]},Ng(i._query)}return function(Ce,Ge,Rt,Ht){const Bt=new Df(Ht),Tn=new Xp(Ge,Bt,Rt);return Ce.asyncQueue.enqueueAndForget((0,f.Z)(function*(){return Qp(yield _d(Ce),Tn)})),()=>{Bt.Qa(),Ce.asyncQueue.enqueueAndForget((0,f.Z)(function*(){return Yp(yield _d(Ce),Tn)}))}}(Ks(G),ee,S,x)}function Ff(i,e){return function x_(i,e){const n=new Df(e);return i.asyncQueue.enqueueAndForget((0,f.Z)(function*(){return u=yield _d(i),c=n,pt(u).W_.add(c),void c.next();var u,c})),()=>{n.Qa(),i.asyncQueue.enqueueAndForget((0,f.Z)(function*(){return u=yield _d(i),c=n,void pt(u).W_.delete(c);var u,c}))}}(Ks(i=Rr(i,Oi)),Mf(e)?e:{next:e})}function pl(i,e){return function(o,u){const c=new Kr;return o.asyncQueue.enqueueAndForget((0,f.Z)(function*(){return function hf(i,e,n){return ff.apply(this,arguments)}(yield Xa(o),u,c)})),c.promise}(Ks(i),e)}function Ih(i,e,n){const o=n.docs.get(e._key),u=new Zl(i);return new Fc(i,u,e._key,o,new bd(n.hasPendingWrites,n.fromCache),e.converter)}const ay={maxAttempts:5};class uy{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Pc(e)}set(e,n,o){this._verifyNotCommitted();const u=gl(e,this._firestore),c=kf(u.converter,n,o),g=yd(this._dataReader,"WriteBatch.set",u._key,c,null!==u.converter,o);return this._mutations.push(g.toMutation(u._key,ts.none())),this}update(e,n,o,...u){this._verifyNotCommitted();const c=gl(e,this._firestore);let g;return g="string"==typeof(n=(0,ge.m9)(n))||n instanceof Wl?mh(this._dataReader,"WriteBatch.update",c._key,n,o,u):ba(this._dataReader,"WriteBatch.update",c._key,n),this._mutations.push(g.toMutation(c._key,ts.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=gl(e,this._firestore);return this._mutations=this._mutations.concat(new Xu(n._key,ts.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ft(Je.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function gl(i,e){if((i=(0,ge.m9)(i)).firestore!==e)throw new ft(Je.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}class ly extends class{constructor(n,o){this._firestore=n,this._transaction=o,this._dataReader=Pc(n)}get(n){const o=gl(n,this._firestore),u=new Ov(this._firestore);return this._transaction.lookup([o._key]).then(c=>{if(!c||1!==c.length)return bt();const g=c[0];if(g.isFoundDocument())return new Id(this._firestore,u,g.key,g,o.converter);if(g.isNoDocument())return new Id(this._firestore,u,o._key,null,o.converter);throw bt()})}set(n,o,u){const c=gl(n,this._firestore),g=kf(c.converter,o,u),S=yd(this._dataReader,"Transaction.set",c._key,g,null!==c.converter,u);return this._transaction.set(c._key,S),this}update(n,o,u,...c){const g=gl(n,this._firestore);let S;return S="string"==typeof(o=(0,ge.m9)(o))||o instanceof Wl?mh(this._dataReader,"Transaction.update",g._key,o,u,c):ba(this._dataReader,"Transaction.update",g._key,o),this._transaction.update(g._key,S),this}delete(n){const o=gl(n,this._firestore);return this._transaction.delete(o._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=gl(e,this._firestore),o=new Zl(this._firestore);return super.get(e).then(u=>new Fc(this._firestore,o,n._key,u._document,new bd(!1,!1),n.converter))}}function cy(i,e,n){i=Rr(i,Oi);const o=Object.assign(Object.assign({},ay),n);return function(c){if(c.maxAttempts<1)throw new ft(Je.INVALID_ARGUMENT,"Max attempts must be at least 1")}(o),function(c,g,S){const x=new Kr;return c.asyncQueue.enqueueAndForget((0,f.Z)(function*(){const G=yield function Sf(i){return bf(i).then(e=>e.datastore)}(c);new _g(c.asyncQueue,G,S,g,x).Ya()})),x.promise}(Ks(i),u=>e(new ly(i,u)),o)}function dy(){return new gh("deleteField")}function Wv(){return new Mc("serverTimestamp")}function hy(...i){return new Ko("arrayUnion",i)}function fy(...i){return new cl("arrayRemove",i)}function qg(i){return new vd("increment",i)}!function(e,n=!0){ei=Z.SDK_VERSION,(0,Z._registerComponent)(new q.wA("firestore",(o,{instanceIdentifier:u,options:c})=>{const g=o.getProvider("app").getImmediate(),S=new Oi(new Lo(o.getProvider("auth-internal")),new Yo(o.getProvider("app-check-internal")),function(G,ee){if(!Object.prototype.hasOwnProperty.apply(G.options,["projectId"]))throw new ft(Je.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new _s(G.options.projectId,ee)}(g,u),g);return c=Object.assign({useFetchStreams:n},c),S._setSettings(c),S},"PUBLIC").setMultipleInstances(!0)),(0,Z.registerVersion)($r,"4.5.1",e),(0,Z.registerVersion)($r,"4.5.1","esm2017")}()},9058:(Nt,Ve,U)=>{U.d(Ve,{BH:()=>Ae,G6:()=>Dt,L:()=>Ne,LL:()=>tt,P0:()=>ot,Pz:()=>Ue,Sg:()=>Ie,UG:()=>xe,ZB:()=>ve,ZR:()=>He,aH:()=>ce,b$:()=>In,eu:()=>Re,hl:()=>Te,jU:()=>Tt,m9:()=>rr,ne:()=>Kn,pd:()=>an,r3:()=>Pt,ru:()=>zt,tV:()=>re,uI:()=>Fe,vZ:()=>Vn,w1:()=>yr,xO:()=>ti,xb:()=>An,z$:()=>et,zd:()=>Kt});const ye=function(Ee){const ne=[];let z=0;for(let F=0;F<Ee.length;F++){let k=Ee.charCodeAt(F);k<128?ne[z++]=k:k<2048?(ne[z++]=k>>6|192,ne[z++]=63&k|128):55296==(64512&k)&&F+1<Ee.length&&56320==(64512&Ee.charCodeAt(F+1))?(k=65536+((1023&k)<<10)+(1023&Ee.charCodeAt(++F)),ne[z++]=k>>18|240,ne[z++]=k>>12&63|128,ne[z++]=k>>6&63|128,ne[z++]=63&k|128):(ne[z++]=k>>12|224,ne[z++]=k>>6&63|128,ne[z++]=63&k|128)}return ne},we={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(Ee,ne){if(!Array.isArray(Ee))throw Error("encodeByteArray takes an array as a parameter");this.init_();const z=ne?this.byteToCharMapWebSafe_:this.byteToCharMap_,F=[];for(let k=0;k<Ee.length;k+=3){const oe=Ee[k],Pe=k+1<Ee.length,st=Pe?Ee[k+1]:0,_t=k+2<Ee.length,Ot=_t?Ee[k+2]:0;let Gn=(15&st)<<2|Ot>>6,ln=63&Ot;_t||(ln=64,Pe||(Gn=64)),F.push(z[oe>>2],z[(3&oe)<<4|st>>4],z[Gn],z[ln])}return F.join("")},encodeString(Ee,ne){return this.HAS_NATIVE_SUPPORT&&!ne?btoa(Ee):this.encodeByteArray(ye(Ee),ne)},decodeString(Ee,ne){return this.HAS_NATIVE_SUPPORT&&!ne?atob(Ee):function(Ee){const ne=[];let z=0,F=0;for(;z<Ee.length;){const k=Ee[z++];if(k<128)ne[F++]=String.fromCharCode(k);else if(k>191&&k<224){const oe=Ee[z++];ne[F++]=String.fromCharCode((31&k)<<6|63&oe)}else if(k>239&&k<365){const _t=((7&k)<<18|(63&Ee[z++])<<12|(63&Ee[z++])<<6|63&Ee[z++])-65536;ne[F++]=String.fromCharCode(55296+(_t>>10)),ne[F++]=String.fromCharCode(56320+(1023&_t))}else{const oe=Ee[z++],Pe=Ee[z++];ne[F++]=String.fromCharCode((15&k)<<12|(63&oe)<<6|63&Pe)}}return ne.join("")}(this.decodeStringToByteArray(Ee,ne))},decodeStringToByteArray(Ee,ne){this.init_();const z=ne?this.charToByteMapWebSafe_:this.charToByteMap_,F=[];for(let k=0;k<Ee.length;){const oe=z[Ee.charAt(k++)],st=k<Ee.length?z[Ee.charAt(k)]:0;++k;const Ot=k<Ee.length?z[Ee.charAt(k)]:64;++k;const qt=k<Ee.length?z[Ee.charAt(k)]:64;if(++k,null==oe||null==st||null==Ot||null==qt)throw new De;F.push(oe<<2|st>>4),64!==Ot&&(F.push(st<<4&240|Ot>>2),64!==qt&&F.push(Ot<<6&192|qt))}return F},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let Ee=0;Ee<this.ENCODED_VALS.length;Ee++)this.byteToCharMap_[Ee]=this.ENCODED_VALS.charAt(Ee),this.charToByteMap_[this.byteToCharMap_[Ee]]=Ee,this.byteToCharMapWebSafe_[Ee]=this.ENCODED_VALS_WEBSAFE.charAt(Ee),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[Ee]]=Ee,Ee>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(Ee)]=Ee,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(Ee)]=Ee)}}};class De extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Ne=function(Ee){return function(Ee){const ne=ye(Ee);return we.encodeByteArray(ne,!0)}(Ee).replace(/\./g,"")},re=function(Ee){try{return we.decodeString(Ee,!0)}catch(ne){console.error("base64Decode failed: ",ne)}return null};function ve(Ee,ne){if(!(ne instanceof Object))return ne;switch(ne.constructor){case Date:return new Date(ne.getTime());case Object:void 0===Ee&&(Ee={});break;case Array:Ee=[];break;default:return ne}for(const z in ne)!ne.hasOwnProperty(z)||!Ye(z)||(Ee[z]=ve(Ee[z],ne[z]));return Ee}function Ye(Ee){return"__proto__"!==Ee}const nt=()=>{try{return function We(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const Ee=process.env.__FIREBASE_DEFAULTS__;return Ee?JSON.parse(Ee):void 0})()||(()=>{if(typeof document>"u")return;let Ee;try{Ee=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const ne=Ee&&re(Ee[1]);return ne&&JSON.parse(ne)})()}catch(Ee){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${Ee}`)}},ot=Ee=>{const ne=(Ee=>{var ne,z;return null===(z=null===(ne=nt())||void 0===ne?void 0:ne.emulatorHosts)||void 0===z?void 0:z[Ee]})(Ee);if(!ne)return;const z=ne.lastIndexOf(":");if(z<=0||z+1===ne.length)throw new Error(`Invalid host ${ne} with no separate hostname and port!`);const F=parseInt(ne.substring(z+1),10);return"["===ne[0]?[ne.substring(1,z-1),F]:[ne.substring(0,z),F]},ce=()=>{var Ee;return null===(Ee=nt())||void 0===Ee?void 0:Ee.config},Ue=Ee=>{var ne;return null===(ne=nt())||void 0===ne?void 0:ne[`_${Ee}`]};class Ae{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((ne,z)=>{this.resolve=ne,this.reject=z})}wrapCallback(ne){return(z,F)=>{z?this.reject(z):this.resolve(F),"function"==typeof ne&&(this.promise.catch(()=>{}),1===ne.length?ne(z):ne(z,F))}}}function Ie(Ee,ne){if(Ee.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const F=ne||"demo-project",k=Ee.iat||0,oe=Ee.sub||Ee.user_id;if(!oe)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Pe=Object.assign({iss:`https://securetoken.google.com/${F}`,aud:F,iat:k,exp:k+3600,auth_time:k,sub:oe,user_id:oe,firebase:{sign_in_provider:"custom",identities:{}}},Ee);return[Ne(JSON.stringify({alg:"none",type:"JWT"})),Ne(JSON.stringify(Pe)),""].join(".")}function et(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Fe(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(et())}function xe(){var Ee;const ne=null===(Ee=nt())||void 0===Ee?void 0:Ee.forceEnvironment;if("node"===ne)return!0;if("browser"===ne)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Tt(){return"object"==typeof self&&self.self===self}function zt(){const Ee="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof Ee&&void 0!==Ee.id}function In(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function yr(){const Ee=et();return Ee.indexOf("MSIE ")>=0||Ee.indexOf("Trident/")>=0}function Dt(){return!xe()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Te(){try{return"object"==typeof indexedDB}catch{return!1}}function Re(){return new Promise((Ee,ne)=>{try{let z=!0;const F="validate-browser-context-for-indexeddb-analytics-module",k=self.indexedDB.open(F);k.onsuccess=()=>{k.result.close(),z||self.indexedDB.deleteDatabase(F),Ee(!0)},k.onupgradeneeded=()=>{z=!1},k.onerror=()=>{var oe;ne((null===(oe=k.error)||void 0===oe?void 0:oe.message)||"")}}catch(z){ne(z)}})}class He extends Error{constructor(ne,z,F){super(z),this.code=ne,this.customData=F,this.name="FirebaseError",Object.setPrototypeOf(this,He.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,tt.prototype.create)}}class tt{constructor(ne,z,F){this.service=ne,this.serviceName=z,this.errors=F}create(ne,...z){const F=z[0]||{},k=`${this.service}/${ne}`,oe=this.errors[ne],Pe=oe?function yt(Ee,ne){return Ee.replace(vt,(z,F)=>{const k=ne[F];return null!=k?String(k):`<${F}?>`})}(oe,F):"Error";return new He(k,`${this.serviceName}: ${Pe} (${k}).`,F)}}const vt=/\{\$([^}]+)}/g;function Pt(Ee,ne){return Object.prototype.hasOwnProperty.call(Ee,ne)}function An(Ee){for(const ne in Ee)if(Object.prototype.hasOwnProperty.call(Ee,ne))return!1;return!0}function Vn(Ee,ne){if(Ee===ne)return!0;const z=Object.keys(Ee),F=Object.keys(ne);for(const k of z){if(!F.includes(k))return!1;const oe=Ee[k],Pe=ne[k];if(Zn(oe)&&Zn(Pe)){if(!Vn(oe,Pe))return!1}else if(oe!==Pe)return!1}for(const k of F)if(!z.includes(k))return!1;return!0}function Zn(Ee){return null!==Ee&&"object"==typeof Ee}function ti(Ee){const ne=[];for(const[z,F]of Object.entries(Ee))Array.isArray(F)?F.forEach(k=>{ne.push(encodeURIComponent(z)+"="+encodeURIComponent(k))}):ne.push(encodeURIComponent(z)+"="+encodeURIComponent(F));return ne.length?"&"+ne.join("&"):""}function Kt(Ee){const ne={};return Ee.replace(/^\?/,"").split("&").forEach(F=>{if(F){const[k,oe]=F.split("=");ne[decodeURIComponent(k)]=decodeURIComponent(oe)}}),ne}function an(Ee){const ne=Ee.indexOf("?");if(!ne)return"";const z=Ee.indexOf("#",ne);return Ee.substring(ne,z>0?z:void 0)}function Kn(Ee,ne){const z=new Lr(Ee,ne);return z.subscribe.bind(z)}class Lr{constructor(ne,z){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=z,this.task.then(()=>{ne(this)}).catch(F=>{this.error(F)})}next(ne){this.forEachObserver(z=>{z.next(ne)})}error(ne){this.forEachObserver(z=>{z.error(ne)}),this.close(ne)}complete(){this.forEachObserver(ne=>{ne.complete()}),this.close()}subscribe(ne,z,F){let k;if(void 0===ne&&void 0===z&&void 0===F)throw new Error("Missing Observer.");k=function Rn(Ee,ne){if("object"!=typeof Ee||null===Ee)return!1;for(const z of ne)if(z in Ee&&"function"==typeof Ee[z])return!0;return!1}(ne,["next","error","complete"])?ne:{next:ne,error:z,complete:F},void 0===k.next&&(k.next=Cr),void 0===k.error&&(k.error=Cr),void 0===k.complete&&(k.complete=Cr);const oe=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?k.error(this.finalError):k.complete()}catch{}}),this.observers.push(k),oe}unsubscribeOne(ne){void 0===this.observers||void 0===this.observers[ne]||(delete this.observers[ne],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(ne){if(!this.finalized)for(let z=0;z<this.observers.length;z++)this.sendOne(z,ne)}sendOne(ne,z){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[ne])try{z(this.observers[ne])}catch(F){typeof console<"u"&&console.error&&console.error(F)}})}close(ne){this.finalized||(this.finalized=!0,void 0!==ne&&(this.finalError=ne),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Cr(){}function rr(Ee){return Ee&&Ee._delegate?Ee._delegate:Ee}},5196:(Nt,Ve,U)=>{U.d(Ve,{T:()=>De});var f=U(5861),Z=U(7142);class q extends Error{constructor(Ne){super(),this.code="",this.code=Ne,Error.captureStackTrace&&Error.captureStackTrace(this,q),this.name="dniDuplicadoError"}}var ye=U(5879),ge=U(7213),we=U(4067);let De=(()=>{class _e{constructor(re,se){this.autenticador=re,this.firestore=se,this.usuarioActual=null}registro(re,se){var ve=this;return(0,f.Z)(function*(){try{if(yield ve.firestore.verificarDNI(re.dni))throw new q("dni-duplicado");const We=yield ve.autenticador.createUserWithEmailAndPassword(re.email,se);We.user?.sendEmailVerification();const at=yield ve.obtenerInfoUsuario(We,re);return ve.firestore.agregarInformacionUsuario(at),!1}catch(Ye){return Ye.code}})()}obtenerInfoUsuario(re,se){var ve=this;return(0,f.Z)(function*(){switch(se.tipo){case"Administrador":return{uid:re.user?.uid,email:re.user?.email,fechaRegistro:(new Date).toLocaleString(),nombre:se.nombre,apellido:se.apellido,dni:se.dni,tipoUsuario:se.tipo,edad:se.edad,imagenUno:yield ve.firestore.agregarImagenUsuario("1",se)};case"Paciente":return{uid:re.user?.uid,email:re.user?.email,fechaRegistro:(new Date).toLocaleString(),nombre:se.nombre,apellido:se.apellido,dni:se.dni,tipoUsuario:se.tipo,edad:se.edad,obraSocial:se.obraSocial,imagenUno:yield ve.firestore.agregarImagenUsuario("1",se),imagenDos:yield ve.firestore.agregarImagenUsuario("2",se)};default:return{uid:re.user?.uid,email:re.user?.email,fechaRegistro:(new Date).toLocaleString(),nombre:se.nombre,apellido:se.apellido,dni:se.dni,tipoUsuario:se.tipo,edad:se.edad,especialidad:se.especialidad,estaActivo:se.estaActiva,imagenUno:yield ve.firestore.agregarImagenUsuario("1",se)}}})()}login(re,se){var ve=this;return(0,f.Z)(function*(){try{return yield ve.autenticador.signInWithEmailAndPassword(re,se)}catch(Ye){return Ye.code}})()}loginConGoogle(re,se){var ve=this;return(0,f.Z)(function*(){try{return yield ve.autenticador.signInWithPopup(new Z.Z.auth.GoogleAuthProvider)}catch(Ye){return console.log("Error en google con google",Ye),!1}})()}obtenerUsuarioLogueado(){return this.autenticador.authState}cerrarSesion(){return this.autenticador.signOut()}reeviarEmail(){null!=this.usuarioActual&&this.usuarioActual?.sendEmailVerification()}static#e=this.\u0275fac=function(se){return new(se||_e)(ye.LFG(ge.zQ),ye.LFG(we.C))};static#t=this.\u0275prov=ye.Yz7({token:_e,factory:_e.\u0275fac,providedIn:"root"})}return _e})()},4067:(Nt,Ve,U)=>{U.d(Ve,{C:()=>we});var f=U(5861),Z=U(7350),q=U(5592),ye=U(5879),ge=U(830);let we=(()=>{class De{constructor(Ne,re){this.firestore=Ne,this.firestorage=re,this.usuarios=(0,Z.hJ)(this.firestore,"usuarios")}agregarInformacionUsuario(Ne){try{return(0,Z.ET)(this.usuarios,Ne)}catch(re){return console.log(re.code),null}}verificarDNI(Ne){var re=this;return(0,f.Z)(function*(){let se=!1;const ve=(0,Z.IO)(re.usuarios,(0,Z.ar)("dni","==",Ne));return(yield(0,Z.PL)(ve)).forEach(We=>{se=!0}),se})()}obtenerInfoUsuario(Ne){var re=this;return(0,f.Z)(function*(){try{const se=(0,Z.IO)(re.usuarios,(0,Z.ar)("uid","==",Ne));return(yield(0,Z.PL)(se)).forEach(We=>(re.datosUsuarioActual=We.data(),!0)),!1}catch(se){return console.log(se.code),null}})()}actualizarEstadoEspecialista(Ne,re){var se=this;return(0,f.Z)(function*(){try{const ve=(0,Z.IO)(se.usuarios,(0,Z.ar)("uid","==",Ne));return(yield(0,Z.PL)(ve)).forEach(function(){var We=(0,f.Z)(function*(at){const it=at.id;yield(0,Z.r7)((0,Z.JU)(se.firestore,"usuarios",it),{estaActivo:re})});return function(at){return We.apply(this,arguments)}}()),!0}catch(ve){return console.log(ve.code),null}})()}agregarImagenUsuario(Ne,re){var se=this;return(0,f.Z)(function*(){const ve="1"==Ne?re.imagenPerfilUno:re.imagenPerfilDos,Ye=`imagenes-usuarios/foto-perfil-${Ne}-${re.dni}`;return(yield se.firestorage.upload(Ye,ve)).ref.getDownloadURL()})()}obtenerUsuarios(){return new q.y(Ne=>{(0,Z.cf)(this.usuarios,re=>{const se=[];re.docChanges().forEach(ve=>{const Ye=ve.doc.data();se.push(Ye)}),Ne.next(se)})})}static#e=this.\u0275fac=function(re){return new(re||De)(ye.LFG(Z.gg),ye.LFG(ge.Q1))};static#t=this.\u0275prov=ye.Yz7({token:De,factory:De.\u0275fac,providedIn:"root"})}return De})()},510:(Nt,Ve,U)=>{var f=U(6593),Z=U(5879),q=U(6825);function ge(N){return new Z.vHH(3e3,!1)}function yt(N){switch(N.length){case 0:return new q.ZN;case 1:return N[0];default:return new q.ZE(N)}}function vt(N,d,m=new Map,T=new Map){const V=[],Y=[];let ue=-1,me=null;if(d.forEach(Se=>{const Qe=Se.get("offset"),At=Qe==ue,Mt=At&&me||new Map;Se.forEach((en,bn)=>{let sn=bn,St=en;if("offset"!==bn)switch(sn=N.normalizePropertyName(sn,V),St){case q.k1:St=m.get(bn);break;case q.l3:St=T.get(bn);break;default:St=N.normalizeStyleValue(bn,sn,St,V)}Mt.set(sn,St)}),At||Y.push(Mt),me=Mt,ue=Qe}),V.length)throw function zt(N){return new Z.vHH(3502,!1)}();return Y}function $n(N,d,m,T){switch(d){case"start":N.onStart(()=>T(m&&jt(m,"start",N)));break;case"done":N.onDone(()=>T(m&&jt(m,"done",N)));break;case"destroy":N.onDestroy(()=>T(m&&jt(m,"destroy",N)))}}function jt(N,d,m){const Y=nn(N.element,N.triggerName,N.fromState,N.toState,d||N.phaseName,m.totalTime??N.totalTime,!!m.disabled),ue=N._data;return null!=ue&&(Y._data=ue),Y}function nn(N,d,m,T,V="",Y=0,ue){return{element:N,triggerName:d,fromState:m,toState:T,phaseName:V,totalTime:Y,disabled:!!ue}}function Gt(N,d,m){let T=N.get(d);return T||N.set(d,T=m),T}function or(N){const d=N.indexOf(":");return[N.substring(1,d),N.slice(d+1)]}const Hn=(()=>typeof document>"u"?null:document.documentElement)();function Ln(N){const d=N.parentNode||N.host||null;return d===Hn?null:d}let zn=null,An=!1;function On(N,d){for(;d;){if(d===N)return!0;d=Ln(d)}return!1}function ti(N,d,m){if(m)return Array.from(N.querySelectorAll(d));const T=N.querySelector(d);return T?[T]:[]}let an=(()=>{class N{validateStyleProperty(m){return function Ir(N){zn||(zn=function Zn(){return typeof document<"u"?document.body:null}()||{},An=!!zn.style&&"WebkitAppearance"in zn.style);let d=!0;return zn.style&&!function Pt(N){return"ebkit"==N.substring(1,6)}(N)&&(d=N in zn.style,!d&&An&&(d="Webkit"+N.charAt(0).toUpperCase()+N.slice(1)in zn.style)),d}(m)}matchesElement(m,T){return!1}containsElement(m,T){return On(m,T)}getParentElement(m){return Ln(m)}query(m,T,V){return ti(m,T,V)}computeStyle(m,T,V){return V||""}animate(m,T,V,Y,ue,me=[],Se){return new q.ZN(V,Y)}static#e=this.\u0275fac=function(T){return new(T||N)};static#t=this.\u0275prov=Z.Yz7({token:N,factory:N.\u0275fac})}return N})(),rn=(()=>{class N{static#e=this.NOOP=new an}return N})();const Kn=1e3,Rn="ng-enter",Cr="ng-leave",is="ng-trigger",$t=".ng-trigger",Mi="ng-animating",Cn=".ng-animating";function Wt(N){if("number"==typeof N)return N;const d=N.match(/^(-?[\.\d]+)(m?s)/);return!d||d.length<2?0:Yn(parseFloat(d[1]),d[2])}function Yn(N,d){return"s"===d?N*Kn:N}function br(N,d,m){return N.hasOwnProperty("duration")?N:function Un(N,d,m){let V,Y=0,ue="";if("string"==typeof N){const me=N.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===me)return d.push(ge()),{duration:0,delay:0,easing:""};V=Yn(parseFloat(me[1]),me[2]);const Se=me[3];null!=Se&&(Y=Yn(parseFloat(Se),me[4]));const Qe=me[5];Qe&&(ue=Qe)}else V=N;if(!m){let me=!1,Se=d.length;V<0&&(d.push(function we(){return new Z.vHH(3100,!1)}()),me=!0),Y<0&&(d.push(function De(){return new Z.vHH(3101,!1)}()),me=!0),me&&d.splice(Se,0,ge())}return{duration:V,delay:Y,easing:ue}}(N,d,m)}function Pn(N,d={}){return Object.keys(N).forEach(m=>{d[m]=N[m]}),d}function Br(N){const d=new Map;return Object.keys(N).forEach(m=>{d.set(m,N[m])}),d}function Sr(N,d=new Map,m){if(m)for(let[T,V]of m)d.set(T,V);for(let[T,V]of N)d.set(T,V);return d}function fr(N,d,m){d.forEach((T,V)=>{const Y=Pe(V);m&&!m.has(V)&&m.set(V,N.style[Y]),N.style[Y]=T})}function Mr(N,d){d.forEach((m,T)=>{const V=Pe(T);N.style[V]=""})}function rr(N){return Array.isArray(N)?1==N.length?N[0]:(0,q.vP)(N):N}const ne=new RegExp("{{\\s*(.+?)\\s*}}","g");function z(N){let d=[];if("string"==typeof N){let m;for(;m=ne.exec(N);)d.push(m[1]);ne.lastIndex=0}return d}function F(N,d,m){const T=N.toString(),V=T.replace(ne,(Y,ue)=>{let me=d[ue];return null==me&&(m.push(function Ne(N){return new Z.vHH(3003,!1)}()),me=""),me.toString()});return V==T?N:V}function k(N){const d=[];let m=N.next();for(;!m.done;)d.push(m.value),m=N.next();return d}const oe=/-+([a-z0-9])/g;function Pe(N){return N.replace(oe,(...d)=>d[1].toUpperCase())}function wt(N,d,m){switch(d.type){case 7:return N.visitTrigger(d,m);case 0:return N.visitState(d,m);case 1:return N.visitTransition(d,m);case 2:return N.visitSequence(d,m);case 3:return N.visitGroup(d,m);case 4:return N.visitAnimate(d,m);case 5:return N.visitKeyframes(d,m);case 6:return N.visitStyle(d,m);case 8:return N.visitReference(d,m);case 9:return N.visitAnimateChild(d,m);case 10:return N.visitAnimateRef(d,m);case 11:return N.visitQuery(d,m);case 12:return N.visitStagger(d,m);default:throw function re(N){return new Z.vHH(3004,!1)}()}}function qt(N,d){return window.getComputedStyle(N)[d]}const Jr="*";function ar(N,d){const m=[];return"string"==typeof N?N.split(/\s*,\s*/).forEach(T=>function ai(N,d,m){if(":"==N[0]){const Se=function ke(N,d){switch(N){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(m,T)=>parseFloat(T)>parseFloat(m);case":decrement":return(m,T)=>parseFloat(T)<parseFloat(m);default:return d.push(function et(N){return new Z.vHH(3016,!1)}()),"* => *"}}(N,m);if("function"==typeof Se)return void d.push(Se);N=Se}const T=N.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==T||T.length<4)return m.push(function Ie(N){return new Z.vHH(3015,!1)}()),d;const V=T[1],Y=T[2],ue=T[3];d.push(It(V,ue));"<"==Y[0]&&!(V==Jr&&ue==Jr)&&d.push(It(ue,V))}(T,m,d)):m.push(N),m}const Oe=new Set(["true","1"]),rt=new Set(["false","0"]);function It(N,d){const m=Oe.has(N)||rt.has(N),T=Oe.has(d)||rt.has(d);return(V,Y)=>{let ue=N==Jr||N==V,me=d==Jr||d==Y;return!ue&&m&&"boolean"==typeof V&&(ue=V?Oe.has(N):rt.has(N)),!me&&T&&"boolean"==typeof Y&&(me=Y?Oe.has(d):rt.has(d)),ue&&me}}const Xt=new RegExp("s*:selfs*,?","g");function gn(N,d,m,T){return new pr(N).build(d,m,T)}class pr{constructor(d){this._driver=d}build(d,m,T){const V=new Po(m);return this._resetContextStyleTimingState(V),wt(this,rr(d),V)}_resetContextStyleTimingState(d){d.currentQuerySelector="",d.collectedStyles=new Map,d.collectedStyles.set("",new Map),d.currentTime=0}visitTrigger(d,m){let T=m.queryCount=0,V=m.depCount=0;const Y=[],ue=[];return"@"==d.name.charAt(0)&&m.errors.push(function ve(){return new Z.vHH(3006,!1)}()),d.definitions.forEach(me=>{if(this._resetContextStyleTimingState(m),0==me.type){const Se=me,Qe=Se.name;Qe.toString().split(/\s*,\s*/).forEach(At=>{Se.name=At,Y.push(this.visitState(Se,m))}),Se.name=Qe}else if(1==me.type){const Se=this.visitTransition(me,m);T+=Se.queryCount,V+=Se.depCount,ue.push(Se)}else m.errors.push(function Ye(){return new Z.vHH(3007,!1)}())}),{type:7,name:d.name,states:Y,transitions:ue,queryCount:T,depCount:V,options:null}}visitState(d,m){const T=this.visitStyle(d.styles,m),V=d.options&&d.options.params||null;if(T.containsDynamicStyles){const Y=new Set,ue=V||{};T.styles.forEach(me=>{me instanceof Map&&me.forEach(Se=>{z(Se).forEach(Qe=>{ue.hasOwnProperty(Qe)||Y.add(Qe)})})}),Y.size&&(k(Y.values()),m.errors.push(function We(N,d){return new Z.vHH(3008,!1)}()))}return{type:0,name:d.name,style:T,options:V?{params:V}:null}}visitTransition(d,m){m.queryCount=0,m.depCount=0;const T=wt(this,rr(d.animation),m);return{type:1,matchers:ar(d.expr,m.errors),animation:T,queryCount:m.queryCount,depCount:m.depCount,options:ki(d.options)}}visitSequence(d,m){return{type:2,steps:d.steps.map(T=>wt(this,T,m)),options:ki(d.options)}}visitGroup(d,m){const T=m.currentTime;let V=0;const Y=d.steps.map(ue=>{m.currentTime=T;const me=wt(this,ue,m);return V=Math.max(V,m.currentTime),me});return m.currentTime=V,{type:3,steps:Y,options:ki(d.options)}}visitAnimate(d,m){const T=function us(N,d){if(N.hasOwnProperty("duration"))return N;if("number"==typeof N)return ls(br(N,d).duration,0,"");const m=N;if(m.split(/\s+/).some(Y=>"{"==Y.charAt(0)&&"{"==Y.charAt(1))){const Y=ls(0,0,"");return Y.dynamic=!0,Y.strValue=m,Y}const V=br(m,d);return ls(V.duration,V.delay,V.easing)}(d.timings,m.errors);m.currentAnimateTimings=T;let V,Y=d.styles?d.styles:(0,q.oB)({});if(5==Y.type)V=this.visitKeyframes(Y,m);else{let ue=d.styles,me=!1;if(!ue){me=!0;const Qe={};T.easing&&(Qe.easing=T.easing),ue=(0,q.oB)(Qe)}m.currentTime+=T.duration+T.delay;const Se=this.visitStyle(ue,m);Se.isEmptyStep=me,V=Se}return m.currentAnimateTimings=null,{type:4,timings:T,style:V,options:null}}visitStyle(d,m){const T=this._makeStyleAst(d,m);return this._validateStyleAst(T,m),T}_makeStyleAst(d,m){const T=[],V=Array.isArray(d.styles)?d.styles:[d.styles];for(let me of V)"string"==typeof me?me===q.l3?T.push(me):m.errors.push(new Z.vHH(3002,!1)):T.push(Br(me));let Y=!1,ue=null;return T.forEach(me=>{if(me instanceof Map&&(me.has("easing")&&(ue=me.get("easing"),me.delete("easing")),!Y))for(let Se of me.values())if(Se.toString().indexOf("{{")>=0){Y=!0;break}}),{type:6,styles:T,easing:ue,offset:d.offset,containsDynamicStyles:Y,options:null}}_validateStyleAst(d,m){const T=m.currentAnimateTimings;let V=m.currentTime,Y=m.currentTime;T&&Y>0&&(Y-=T.duration+T.delay),d.styles.forEach(ue=>{"string"!=typeof ue&&ue.forEach((me,Se)=>{const Qe=m.collectedStyles.get(m.currentQuerySelector),At=Qe.get(Se);let Mt=!0;At&&(Y!=V&&Y>=At.startTime&&V<=At.endTime&&(m.errors.push(function mt(N,d,m,T,V){return new Z.vHH(3010,!1)}()),Mt=!1),Y=At.startTime),Mt&&Qe.set(Se,{startTime:Y,endTime:V}),m.options&&function Ee(N,d,m){const T=d.params||{},V=z(N);V.length&&V.forEach(Y=>{T.hasOwnProperty(Y)||m.push(function _e(N){return new Z.vHH(3001,!1)}())})}(me,m.options,m.errors)})})}visitKeyframes(d,m){const T={type:5,styles:[],options:null};if(!m.currentAnimateTimings)return m.errors.push(function nt(){return new Z.vHH(3011,!1)}()),T;let Y=0;const ue=[];let me=!1,Se=!1,Qe=0;const At=d.steps.map(wn=>{const Zr=this._makeStyleAst(wn,m);let nr=null!=Zr.offset?Zr.offset:function Xn(N){if("string"==typeof N)return null;let d=null;if(Array.isArray(N))N.forEach(m=>{if(m instanceof Map&&m.has("offset")){const T=m;d=parseFloat(T.get("offset")),T.delete("offset")}});else if(N instanceof Map&&N.has("offset")){const m=N;d=parseFloat(m.get("offset")),m.delete("offset")}return d}(Zr.styles),Qr=0;return null!=nr&&(Y++,Qr=Zr.offset=nr),Se=Se||Qr<0||Qr>1,me=me||Qr<Qe,Qe=Qr,ue.push(Qr),Zr});Se&&m.errors.push(function Lt(){return new Z.vHH(3012,!1)}()),me&&m.errors.push(function ot(){return new Z.vHH(3200,!1)}());const Mt=d.steps.length;let en=0;Y>0&&Y<Mt?m.errors.push(function ce(){return new Z.vHH(3202,!1)}()):0==Y&&(en=1/(Mt-1));const bn=Mt-1,sn=m.currentTime,St=m.currentAnimateTimings,Sn=St.duration;return At.forEach((wn,Zr)=>{const nr=en>0?Zr==bn?1:en*Zr:ue[Zr],Qr=nr*Sn;m.currentTime=sn+St.delay+Qr,St.duration=Qr,this._validateStyleAst(wn,m),wn.offset=nr,T.styles.push(wn)}),T}visitReference(d,m){return{type:8,animation:wt(this,rr(d.animation),m),options:ki(d.options)}}visitAnimateChild(d,m){return m.depCount++,{type:9,options:ki(d.options)}}visitAnimateRef(d,m){return{type:10,animation:this.visitReference(d.animation,m),options:ki(d.options)}}visitQuery(d,m){const T=m.currentQuerySelector,V=d.options||{};m.queryCount++,m.currentQuery=d;const[Y,ue]=function ui(N){const d=!!N.split(/\s*,\s*/).find(m=>":self"==m);return d&&(N=N.replace(Xt,"")),N=N.replace(/@\*/g,$t).replace(/@\w+/g,m=>$t+"-"+m.slice(1)).replace(/:animating/g,Cn),[N,d]}(d.selector);m.currentQuerySelector=T.length?T+" "+Y:Y,Gt(m.collectedStyles,m.currentQuerySelector,new Map);const me=wt(this,rr(d.animation),m);return m.currentQuery=null,m.currentQuerySelector=T,{type:11,selector:Y,limit:V.limit||0,optional:!!V.optional,includeSelf:ue,animation:me,originalSelector:d.selector,options:ki(d.options)}}visitStagger(d,m){m.currentQuery||m.errors.push(function Ue(){return new Z.vHH(3013,!1)}());const T="full"===d.timings?{duration:0,delay:0,easing:"full"}:br(d.timings,m.errors,!0);return{type:12,animation:wt(this,rr(d.animation),m),timings:T,options:null}}}class Po{constructor(d){this.errors=d,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function ki(N){return N?(N=Pn(N)).params&&(N.params=function Es(N){return N?Pn(N):null}(N.params)):N={},N}function ls(N,d,m){return{duration:N,delay:d,easing:m}}function Zs(N,d,m,T,V,Y,ue=null,me=!1){return{type:1,element:N,keyframes:d,preStyleProps:m,postStyleProps:T,duration:V,delay:Y,totalTime:V+Y,easing:ue,subTimeline:me}}class Qs{constructor(){this._map=new Map}get(d){return this._map.get(d)||[]}append(d,m){let T=this._map.get(d);T||this._map.set(d,T=[]),T.push(...m)}has(d){return this._map.has(d)}clear(){this._map.clear()}}const ur=new RegExp(":enter","g"),Ys=new RegExp(":leave","g");function yi(N,d,m,T,V,Y=new Map,ue=new Map,me,Se,Qe=[]){return(new Js).buildKeyframes(N,d,m,T,V,Y,ue,me,Se,Qe)}class Js{buildKeyframes(d,m,T,V,Y,ue,me,Se,Qe,At=[]){Qe=Qe||new Qs;const Mt=new Ps(d,m,Qe,V,Y,At,[]);Mt.options=Se;const en=Se.delay?Wt(Se.delay):0;Mt.currentTimeline.delayNextStep(en),Mt.currentTimeline.setStyles([ue],null,Mt.errors,Se),wt(this,T,Mt);const bn=Mt.timelines.filter(sn=>sn.containsAnimation());if(bn.length&&me.size){let sn;for(let St=bn.length-1;St>=0;St--){const Sn=bn[St];if(Sn.element===m){sn=Sn;break}}sn&&!sn.allowOnlyTimelineStyles()&&sn.setStyles([me],null,Mt.errors,Se)}return bn.length?bn.map(sn=>sn.buildKeyframes()):[Zs(m,[],[],[],0,en,"",!1)]}visitTrigger(d,m){}visitState(d,m){}visitTransition(d,m){}visitAnimateChild(d,m){const T=m.subInstructions.get(m.element);if(T){const V=m.createSubContext(d.options),Y=m.currentTimeline.currentTime,ue=this._visitSubInstructions(T,V,V.options);Y!=ue&&m.transformIntoNewTimeline(ue)}m.previousNode=d}visitAnimateRef(d,m){const T=m.createSubContext(d.options);T.transformIntoNewTimeline(),this._applyAnimationRefDelays([d.options,d.animation.options],m,T),this.visitReference(d.animation,T),m.transformIntoNewTimeline(T.currentTimeline.currentTime),m.previousNode=d}_applyAnimationRefDelays(d,m,T){for(const V of d){const Y=V?.delay;if(Y){const ue="number"==typeof Y?Y:Wt(F(Y,V?.params??{},m.errors));T.delayNextStep(ue)}}}_visitSubInstructions(d,m,T){let Y=m.currentTimeline.currentTime;const ue=null!=T.duration?Wt(T.duration):null,me=null!=T.delay?Wt(T.delay):null;return 0!==ue&&d.forEach(Se=>{const Qe=m.appendInstructionToTimeline(Se,ue,me);Y=Math.max(Y,Qe.duration+Qe.delay)}),Y}visitReference(d,m){m.updateOptions(d.options,!0),wt(this,d.animation,m),m.previousNode=d}visitSequence(d,m){const T=m.subContextCount;let V=m;const Y=d.options;if(Y&&(Y.params||Y.delay)&&(V=m.createSubContext(Y),V.transformIntoNewTimeline(),null!=Y.delay)){6==V.previousNode.type&&(V.currentTimeline.snapshotCurrentStyles(),V.previousNode=Rs);const ue=Wt(Y.delay);V.delayNextStep(ue)}d.steps.length&&(d.steps.forEach(ue=>wt(this,ue,V)),V.currentTimeline.applyStylesToKeyframe(),V.subContextCount>T&&V.transformIntoNewTimeline()),m.previousNode=d}visitGroup(d,m){const T=[];let V=m.currentTimeline.currentTime;const Y=d.options&&d.options.delay?Wt(d.options.delay):0;d.steps.forEach(ue=>{const me=m.createSubContext(d.options);Y&&me.delayNextStep(Y),wt(this,ue,me),V=Math.max(V,me.currentTimeline.currentTime),T.push(me.currentTimeline)}),T.forEach(ue=>m.currentTimeline.mergeTimelineCollectedStyles(ue)),m.transformIntoNewTimeline(V),m.previousNode=d}_visitTiming(d,m){if(d.dynamic){const T=d.strValue;return br(m.params?F(T,m.params,m.errors):T,m.errors)}return{duration:d.duration,delay:d.delay,easing:d.easing}}visitAnimate(d,m){const T=m.currentAnimateTimings=this._visitTiming(d.timings,m),V=m.currentTimeline;T.delay&&(m.incrementTime(T.delay),V.snapshotCurrentStyles());const Y=d.style;5==Y.type?this.visitKeyframes(Y,m):(m.incrementTime(T.duration),this.visitStyle(Y,m),V.applyStylesToKeyframe()),m.currentAnimateTimings=null,m.previousNode=d}visitStyle(d,m){const T=m.currentTimeline,V=m.currentAnimateTimings;!V&&T.hasCurrentStyleProperties()&&T.forwardFrame();const Y=V&&V.easing||d.easing;d.isEmptyStep?T.applyEmptyStep(Y):T.setStyles(d.styles,Y,m.errors,m.options),m.previousNode=d}visitKeyframes(d,m){const T=m.currentAnimateTimings,V=m.currentTimeline.duration,Y=T.duration,me=m.createSubContext().currentTimeline;me.easing=T.easing,d.styles.forEach(Se=>{me.forwardTime((Se.offset||0)*Y),me.setStyles(Se.styles,Se.easing,m.errors,m.options),me.applyStylesToKeyframe()}),m.currentTimeline.mergeTimelineCollectedStyles(me),m.transformIntoNewTimeline(V+Y),m.previousNode=d}visitQuery(d,m){const T=m.currentTimeline.currentTime,V=d.options||{},Y=V.delay?Wt(V.delay):0;Y&&(6===m.previousNode.type||0==T&&m.currentTimeline.hasCurrentStyleProperties())&&(m.currentTimeline.snapshotCurrentStyles(),m.previousNode=Rs);let ue=T;const me=m.invokeQuery(d.selector,d.originalSelector,d.limit,d.includeSelf,!!V.optional,m.errors);m.currentQueryTotal=me.length;let Se=null;me.forEach((Qe,At)=>{m.currentQueryIndex=At;const Mt=m.createSubContext(d.options,Qe);Y&&Mt.delayNextStep(Y),Qe===m.element&&(Se=Mt.currentTimeline),wt(this,d.animation,Mt),Mt.currentTimeline.applyStylesToKeyframe(),ue=Math.max(ue,Mt.currentTimeline.currentTime)}),m.currentQueryIndex=0,m.currentQueryTotal=0,m.transformIntoNewTimeline(ue),Se&&(m.currentTimeline.mergeTimelineCollectedStyles(Se),m.currentTimeline.snapshotCurrentStyles()),m.previousNode=d}visitStagger(d,m){const T=m.parentContext,V=m.currentTimeline,Y=d.timings,ue=Math.abs(Y.duration),me=ue*(m.currentQueryTotal-1);let Se=ue*m.currentQueryIndex;switch(Y.duration<0?"reverse":Y.easing){case"reverse":Se=me-Se;break;case"full":Se=T.currentStaggerTime}const At=m.currentTimeline;Se&&At.delayNextStep(Se);const Mt=At.currentTime;wt(this,d.animation,m),m.previousNode=d,T.currentStaggerTime=V.currentTime-Mt+(V.startTime-T.currentTimeline.startTime)}}const Rs={};class Ps{constructor(d,m,T,V,Y,ue,me,Se){this._driver=d,this.element=m,this.subInstructions=T,this._enterClassName=V,this._leaveClassName=Y,this.errors=ue,this.timelines=me,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Rs,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=Se||new Fi(this._driver,m,0),me.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(d,m){if(!d)return;const T=d;let V=this.options;null!=T.duration&&(V.duration=Wt(T.duration)),null!=T.delay&&(V.delay=Wt(T.delay));const Y=T.params;if(Y){let ue=V.params;ue||(ue=this.options.params={}),Object.keys(Y).forEach(me=>{(!m||!ue.hasOwnProperty(me))&&(ue[me]=F(Y[me],ue,this.errors))})}}_copyOptions(){const d={};if(this.options){const m=this.options.params;if(m){const T=d.params={};Object.keys(m).forEach(V=>{T[V]=m[V]})}}return d}createSubContext(d=null,m,T){const V=m||this.element,Y=new Ps(this._driver,V,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(V,T||0));return Y.previousNode=this.previousNode,Y.currentAnimateTimings=this.currentAnimateTimings,Y.options=this._copyOptions(),Y.updateOptions(d),Y.currentQueryIndex=this.currentQueryIndex,Y.currentQueryTotal=this.currentQueryTotal,Y.parentContext=this,this.subContextCount++,Y}transformIntoNewTimeline(d){return this.previousNode=Rs,this.currentTimeline=this.currentTimeline.fork(this.element,d),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(d,m,T){const V={duration:m??d.duration,delay:this.currentTimeline.currentTime+(T??0)+d.delay,easing:""},Y=new Is(this._driver,d.element,d.keyframes,d.preStyleProps,d.postStyleProps,V,d.stretchStartingKeyframe);return this.timelines.push(Y),V}incrementTime(d){this.currentTimeline.forwardTime(this.currentTimeline.duration+d)}delayNextStep(d){d>0&&this.currentTimeline.delayNextStep(d)}invokeQuery(d,m,T,V,Y,ue){let me=[];if(V&&me.push(this.element),d.length>0){d=(d=d.replace(ur,"."+this._enterClassName)).replace(Ys,"."+this._leaveClassName);let Qe=this._driver.query(this.element,d,1!=T);0!==T&&(Qe=T<0?Qe.slice(Qe.length+T,Qe.length):Qe.slice(0,T)),me.push(...Qe)}return!Y&&0==me.length&&ue.push(function Ae(N){return new Z.vHH(3014,!1)}()),me}}class Fi{constructor(d,m,T,V){this._driver=d,this.element=m,this.startTime=T,this._elementTimelineStylesLookup=V,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(m),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(m,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(d){const m=1===this._keyframes.size&&this._pendingStyles.size;this.duration||m?(this.forwardTime(this.currentTime+d),m&&this.snapshotCurrentStyles()):this.startTime+=d}fork(d,m){return this.applyStylesToKeyframe(),new Fi(this._driver,d,m||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(d){this.applyStylesToKeyframe(),this.duration=d,this._loadKeyframe()}_updateStyle(d,m){this._localTimelineStyles.set(d,m),this._globalTimelineStyles.set(d,m),this._styleSummary.set(d,{time:this.currentTime,value:m})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(d){d&&this._previousKeyframe.set("easing",d);for(let[m,T]of this._globalTimelineStyles)this._backFill.set(m,T||q.l3),this._currentKeyframe.set(m,q.l3);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(d,m,T,V){m&&this._previousKeyframe.set("easing",m);const Y=V&&V.params||{},ue=function yo(N,d){const m=new Map;let T;return N.forEach(V=>{if("*"===V){T=T||d.keys();for(let Y of T)m.set(Y,q.l3)}else Sr(V,m)}),m}(d,this._globalTimelineStyles);for(let[me,Se]of ue){const Qe=F(Se,Y,T);this._pendingStyles.set(me,Qe),this._localTimelineStyles.has(me)||this._backFill.set(me,this._globalTimelineStyles.get(me)??q.l3),this._updateStyle(me,Qe)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((d,m)=>{this._currentKeyframe.set(m,d)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((d,m)=>{this._currentKeyframe.has(m)||this._currentKeyframe.set(m,d)}))}snapshotCurrentStyles(){for(let[d,m]of this._localTimelineStyles)this._pendingStyles.set(d,m),this._updateStyle(d,m)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const d=[];for(let m in this._currentKeyframe)d.push(m);return d}mergeTimelineCollectedStyles(d){d._styleSummary.forEach((m,T)=>{const V=this._styleSummary.get(T);(!V||m.time>V.time)&&this._updateStyle(T,m.value)})}buildKeyframes(){this.applyStylesToKeyframe();const d=new Set,m=new Set,T=1===this._keyframes.size&&0===this.duration;let V=[];this._keyframes.forEach((me,Se)=>{const Qe=Sr(me,new Map,this._backFill);Qe.forEach((At,Mt)=>{At===q.k1?d.add(Mt):At===q.l3&&m.add(Mt)}),T||Qe.set("offset",Se/this.duration),V.push(Qe)});const Y=d.size?k(d.values()):[],ue=m.size?k(m.values()):[];if(T){const me=V[0],Se=new Map(me);me.set("offset",0),Se.set("offset",1),V=[me,Se]}return Zs(this.element,V,Y,ue,this.duration,this.startTime,this.easing,!1)}}class Is extends Fi{constructor(d,m,T,V,Y,ue,me=!1){super(d,m,ue.delay),this.keyframes=T,this.preStyleProps=V,this.postStyleProps=Y,this._stretchStartingKeyframe=me,this.timings={duration:ue.duration,delay:ue.delay,easing:ue.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let d=this.keyframes,{delay:m,duration:T,easing:V}=this.timings;if(this._stretchStartingKeyframe&&m){const Y=[],ue=T+m,me=m/ue,Se=Sr(d[0]);Se.set("offset",0),Y.push(Se);const Qe=Sr(d[0]);Qe.set("offset",Jo(me)),Y.push(Qe);const At=d.length-1;for(let Mt=1;Mt<=At;Mt++){let en=Sr(d[Mt]);const bn=en.get("offset");en.set("offset",Jo((m+bn*T)/ue)),Y.push(en)}T=ue,m=0,V="",d=Y}return Zs(this.element,d,this.preStyleProps,this.postStyleProps,T,m,V,!0)}}function Jo(N,d=3){const m=Math.pow(10,d-1);return Math.round(N*m)/m}class Bs{}const Ms=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class vo extends Bs{normalizePropertyName(d,m){return Pe(d)}normalizeStyleValue(d,m,T,V){let Y="";const ue=T.toString().trim();if(Ms.has(m)&&0!==T&&"0"!==T)if("number"==typeof T)Y="px";else{const me=T.match(/^[+-]?[\d\.]+([a-z]*)$/);me&&0==me[1].length&&V.push(function se(N,d){return new Z.vHH(3005,!1)}())}return ue+Y}}function Mo(N,d,m,T,V,Y,ue,me,Se,Qe,At,Mt,en){return{type:0,element:N,triggerName:d,isRemovalTransition:V,fromState:m,fromStyles:Y,toState:T,toStyles:ue,timelines:me,queriedElements:Se,preStyleProps:Qe,postStyleProps:At,totalTime:Mt,errors:en}}const Ns={};class js{constructor(d,m,T){this._triggerName=d,this.ast=m,this._stateStyles=T}match(d,m,T,V){return function Li(N,d,m,T,V){return N.some(Y=>Y(d,m,T,V))}(this.ast.matchers,d,m,T,V)}buildStyles(d,m,T){let V=this._stateStyles.get("*");return void 0!==d&&(V=this._stateStyles.get(d?.toString())||V),V?V.buildStyles(m,T):new Map}build(d,m,T,V,Y,ue,me,Se,Qe,At){const Mt=[],en=this.ast.options&&this.ast.options.params||Ns,sn=this.buildStyles(T,me&&me.params||Ns,Mt),St=Se&&Se.params||Ns,Sn=this.buildStyles(V,St,Mt),wn=new Set,Zr=new Map,nr=new Map,Qr="void"===V,Ki={params:Nr(St,en),delay:this.ast.options?.delay},Ws=At?[]:yi(d,m,this.ast.animation,Y,ue,sn,Sn,Ki,Qe,Mt);let es=0;if(Ws.forEach(kr=>{es=Math.max(kr.duration+kr.delay,es)}),Mt.length)return Mo(m,this._triggerName,T,V,Qr,sn,Sn,[],[],Zr,nr,es,Mt);Ws.forEach(kr=>{const Ho=kr.element,Zu=Gt(Zr,Ho,new Set);kr.preStyleProps.forEach(hu=>Zu.add(hu));const Cu=Gt(nr,Ho,new Set);kr.postStyleProps.forEach(hu=>Cu.add(hu)),Ho!==m&&wn.add(Ho)});const Nn=k(wn.values());return Mo(m,this._triggerName,T,V,Qr,sn,Sn,Ws,Nn,Zr,nr,es)}}function Nr(N,d){const m=Pn(d);for(const T in N)N.hasOwnProperty(T)&&null!=N[T]&&(m[T]=N[T]);return m}class vi{constructor(d,m,T){this.styles=d,this.defaultParams=m,this.normalizer=T}buildStyles(d,m){const T=new Map,V=Pn(this.defaultParams);return Object.keys(d).forEach(Y=>{const ue=d[Y];null!==ue&&(V[Y]=ue)}),this.styles.styles.forEach(Y=>{"string"!=typeof Y&&Y.forEach((ue,me)=>{ue&&(ue=F(ue,V,m));const Se=this.normalizer.normalizePropertyName(me,m);ue=this.normalizer.normalizeStyleValue(me,Se,ue,m),T.set(me,ue)})}),T}}class lo{constructor(d,m,T){this.name=d,this.ast=m,this._normalizer=T,this.transitionFactories=[],this.states=new Map,m.states.forEach(V=>{this.states.set(V.name,new vi(V.style,V.options&&V.options.params||{},T))}),Bn(this.states,"true","1"),Bn(this.states,"false","0"),m.transitions.forEach(V=>{this.transitionFactories.push(new js(d,V,this.states))}),this.fallbackTransition=function Xs(N,d,m){return new js(N,{type:1,animation:{type:2,steps:[],options:null},matchers:[(ue,me)=>!0],options:null,queryCount:0,depCount:0},d)}(d,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(d,m,T,V){return this.transitionFactories.find(ue=>ue.match(d,m,T,V))||null}matchStyles(d,m,T){return this.fallbackTransition.buildStyles(d,m,T)}}function Bn(N,d,m){N.has(d)?N.has(m)||N.set(m,N.get(d)):N.has(m)&&N.set(d,N.get(m))}const cs=new Qs;class ds{constructor(d,m,T){this.bodyNode=d,this._driver=m,this._normalizer=T,this._animations=new Map,this._playersById=new Map,this.players=[]}register(d,m){const T=[],Y=gn(this._driver,m,T,[]);if(T.length)throw function In(N){return new Z.vHH(3503,!1)}();this._animations.set(d,Y)}_buildPlayer(d,m,T){const V=d.element,Y=vt(this._normalizer,d.keyframes,m,T);return this._driver.animate(V,Y,d.duration,d.delay,d.easing,[],!0)}create(d,m,T={}){const V=[],Y=this._animations.get(d);let ue;const me=new Map;if(Y?(ue=yi(this._driver,m,Y,Rn,Cr,new Map,new Map,T,cs,V),ue.forEach(At=>{const Mt=Gt(me,At.element,new Map);At.postStyleProps.forEach(en=>Mt.set(en,null))})):(V.push(function vn(){return new Z.vHH(3300,!1)}()),ue=[]),V.length)throw function yr(N){return new Z.vHH(3504,!1)}();me.forEach((At,Mt)=>{At.forEach((en,bn)=>{At.set(bn,this._driver.computeStyle(Mt,bn,q.l3))})});const Qe=yt(ue.map(At=>{const Mt=me.get(At.element);return this._buildPlayer(At,new Map,Mt)}));return this._playersById.set(d,Qe),Qe.onDestroy(()=>this.destroy(d)),this.players.push(Qe),Qe}destroy(d){const m=this._getPlayer(d);m.destroy(),this._playersById.delete(d);const T=this.players.indexOf(m);T>=0&&this.players.splice(T,1)}_getPlayer(d){const m=this._playersById.get(d);if(!m)throw function kt(N){return new Z.vHH(3301,!1)}();return m}listen(d,m,T,V){const Y=nn(m,"","","");return $n(this._getPlayer(d),T,Y,V),()=>{}}command(d,m,T,V){if("register"==T)return void this.register(d,V[0]);if("create"==T)return void this.create(d,m,V[0]||{});const Y=this._getPlayer(d);switch(T){case"play":Y.play();break;case"pause":Y.pause();break;case"reset":Y.reset();break;case"restart":Y.restart();break;case"finish":Y.finish();break;case"init":Y.init();break;case"setPosition":Y.setPosition(parseFloat(V[0]));break;case"destroy":this.destroy(d)}}}const vr="ng-animate-queued",dn="ng-animate-disabled",pi=[],Zi={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Jn={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},gi="__ng_removed";class ss{get params(){return this.options.params}constructor(d,m=""){this.namespaceId=m;const T=d&&d.hasOwnProperty("value");if(this.value=function gr(N){return N??null}(T?d.value:d),T){const Y=Pn(d);delete Y.value,this.options=Y}else this.options={};this.options.params||(this.options.params={})}absorbOptions(d){const m=d.params;if(m){const T=this.options.params;Object.keys(m).forEach(V=>{null==T[V]&&(T[V]=m[V])})}}}const fn="void",bi=new ss(fn);class Os{constructor(d,m,T){this.id=d,this.hostElement=m,this._engine=T,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+d,Ii(m,this._hostClassName)}listen(d,m,T,V){if(!this._triggers.has(m))throw function Ft(N,d){return new Z.vHH(3302,!1)}();if(null==T||0==T.length)throw function Dt(N){return new Z.vHH(3303,!1)}();if(!function Ei(N){return"start"==N||"done"==N}(T))throw function Te(N,d){return new Z.vHH(3400,!1)}();const Y=Gt(this._elementListeners,d,[]),ue={name:m,phase:T,callback:V};Y.push(ue);const me=Gt(this._engine.statesByElement,d,new Map);return me.has(m)||(Ii(d,is),Ii(d,is+"-"+m),me.set(m,bi)),()=>{this._engine.afterFlush(()=>{const Se=Y.indexOf(ue);Se>=0&&Y.splice(Se,1),this._triggers.has(m)||me.delete(m)})}}register(d,m){return!this._triggers.has(d)&&(this._triggers.set(d,m),!0)}_getTrigger(d){const m=this._triggers.get(d);if(!m)throw function Re(N){return new Z.vHH(3401,!1)}();return m}trigger(d,m,T,V=!0){const Y=this._getTrigger(m),ue=new Vr(this.id,m,d);let me=this._engine.statesByElement.get(d);me||(Ii(d,is),Ii(d,is+"-"+m),this._engine.statesByElement.set(d,me=new Map));let Se=me.get(m);const Qe=new ss(T,this.id);if(!(T&&T.hasOwnProperty("value"))&&Se&&Qe.absorbOptions(Se.options),me.set(m,Qe),Se||(Se=bi),Qe.value!==fn&&Se.value===Qe.value){if(!function eo(N,d){const m=Object.keys(N),T=Object.keys(d);if(m.length!=T.length)return!1;for(let V=0;V<m.length;V++){const Y=m[V];if(!d.hasOwnProperty(Y)||N[Y]!==d[Y])return!1}return!0}(Se.params,Qe.params)){const St=[],Sn=Y.matchStyles(Se.value,Se.params,St),wn=Y.matchStyles(Qe.value,Qe.params,St);St.length?this._engine.reportError(St):this._engine.afterFlush(()=>{Mr(d,Sn),fr(d,wn)})}return}const en=Gt(this._engine.playersByElement,d,[]);en.forEach(St=>{St.namespaceId==this.id&&St.triggerName==m&&St.queued&&St.destroy()});let bn=Y.matchTransition(Se.value,Qe.value,d,Qe.params),sn=!1;if(!bn){if(!V)return;bn=Y.fallbackTransition,sn=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:d,triggerName:m,transition:bn,fromState:Se,toState:Qe,player:ue,isFallbackTransition:sn}),sn||(Ii(d,vr),ue.onStart(()=>{$s(d,vr)})),ue.onDone(()=>{let St=this.players.indexOf(ue);St>=0&&this.players.splice(St,1);const Sn=this._engine.playersByElement.get(d);if(Sn){let wn=Sn.indexOf(ue);wn>=0&&Sn.splice(wn,1)}}),this.players.push(ue),en.push(ue),ue}deregister(d){this._triggers.delete(d),this._engine.statesByElement.forEach(m=>m.delete(d)),this._elementListeners.forEach((m,T)=>{this._elementListeners.set(T,m.filter(V=>V.name!=d))})}clearElementCache(d){this._engine.statesByElement.delete(d),this._elementListeners.delete(d);const m=this._engine.playersByElement.get(d);m&&(m.forEach(T=>T.destroy()),this._engine.playersByElement.delete(d))}_signalRemovalForInnerTriggers(d,m){const T=this._engine.driver.query(d,$t,!0);T.forEach(V=>{if(V[gi])return;const Y=this._engine.fetchNamespacesByElement(V);Y.size?Y.forEach(ue=>ue.triggerLeaveAnimation(V,m,!1,!0)):this.clearElementCache(V)}),this._engine.afterFlushAnimationsDone(()=>T.forEach(V=>this.clearElementCache(V)))}triggerLeaveAnimation(d,m,T,V){const Y=this._engine.statesByElement.get(d),ue=new Map;if(Y){const me=[];if(Y.forEach((Se,Qe)=>{if(ue.set(Qe,Se.value),this._triggers.has(Qe)){const At=this.trigger(d,Qe,fn,V);At&&me.push(At)}}),me.length)return this._engine.markElementAsRemoved(this.id,d,!0,m,ue),T&&yt(me).onDone(()=>this._engine.processLeaveNode(d)),!0}return!1}prepareLeaveAnimationListeners(d){const m=this._elementListeners.get(d),T=this._engine.statesByElement.get(d);if(m&&T){const V=new Set;m.forEach(Y=>{const ue=Y.name;if(V.has(ue))return;V.add(ue);const Se=this._triggers.get(ue).fallbackTransition,Qe=T.get(ue)||bi,At=new ss(fn),Mt=new Vr(this.id,ue,d);this._engine.totalQueuedPlayers++,this._queue.push({element:d,triggerName:ue,transition:Se,fromState:Qe,toState:At,player:Mt,isFallbackTransition:!0})})}}removeNode(d,m){const T=this._engine;if(d.childElementCount&&this._signalRemovalForInnerTriggers(d,m),this.triggerLeaveAnimation(d,m,!0))return;let V=!1;if(T.totalAnimations){const Y=T.players.length?T.playersByQueriedElement.get(d):[];if(Y&&Y.length)V=!0;else{let ue=d;for(;ue=ue.parentNode;)if(T.statesByElement.get(ue)){V=!0;break}}}if(this.prepareLeaveAnimationListeners(d),V)T.markElementAsRemoved(this.id,d,!1,m);else{const Y=d[gi];(!Y||Y===Zi)&&(T.afterFlush(()=>this.clearElementCache(d)),T.destroyInnerAnimations(d),T._onRemovalComplete(d,m))}}insertNode(d,m){Ii(d,this._hostClassName)}drainQueuedTransitions(d){const m=[];return this._queue.forEach(T=>{const V=T.player;if(V.destroyed)return;const Y=T.element,ue=this._elementListeners.get(Y);ue&&ue.forEach(me=>{if(me.name==T.triggerName){const Se=nn(Y,T.triggerName,T.fromState.value,T.toState.value);Se._data=d,$n(T.player,me.phase,Se,me.callback)}}),V.markedForDestroy?this._engine.afterFlush(()=>{V.destroy()}):m.push(T)}),this._queue=[],m.sort((T,V)=>{const Y=T.transition.ast.depCount,ue=V.transition.ast.depCount;return 0==Y||0==ue?Y-ue:this._engine.driver.containsElement(T.element,V.element)?1:-1})}destroy(d){this.players.forEach(m=>m.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,d)}}class Wi{_onRemovalComplete(d,m){this.onRemovalComplete(d,m)}constructor(d,m,T){this.bodyNode=d,this.driver=m,this._normalizer=T,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(V,Y)=>{}}get queuedPlayers(){const d=[];return this._namespaceList.forEach(m=>{m.players.forEach(T=>{T.queued&&d.push(T)})}),d}createNamespace(d,m){const T=new Os(d,m,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,m)?this._balanceNamespaceList(T,m):(this.newHostElements.set(m,T),this.collectEnterElement(m)),this._namespaceLookup[d]=T}_balanceNamespaceList(d,m){const T=this._namespaceList,V=this.namespacesByHostElement;if(T.length-1>=0){let ue=!1,me=this.driver.getParentElement(m);for(;me;){const Se=V.get(me);if(Se){const Qe=T.indexOf(Se);T.splice(Qe+1,0,d),ue=!0;break}me=this.driver.getParentElement(me)}ue||T.unshift(d)}else T.push(d);return V.set(m,d),d}register(d,m){let T=this._namespaceLookup[d];return T||(T=this.createNamespace(d,m)),T}registerTrigger(d,m,T){let V=this._namespaceLookup[d];V&&V.register(m,T)&&this.totalAnimations++}destroy(d,m){d&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{const T=this._fetchNamespace(d);this.namespacesByHostElement.delete(T.hostElement);const V=this._namespaceList.indexOf(T);V>=0&&this._namespaceList.splice(V,1),T.destroy(m),delete this._namespaceLookup[d]}))}_fetchNamespace(d){return this._namespaceLookup[d]}fetchNamespacesByElement(d){const m=new Set,T=this.statesByElement.get(d);if(T)for(let V of T.values())if(V.namespaceId){const Y=this._fetchNamespace(V.namespaceId);Y&&m.add(Y)}return m}trigger(d,m,T,V){if(Or(m)){const Y=this._fetchNamespace(d);if(Y)return Y.trigger(m,T,V),!0}return!1}insertNode(d,m,T,V){if(!Or(m))return;const Y=m[gi];if(Y&&Y.setForRemoval){Y.setForRemoval=!1,Y.setForMove=!0;const ue=this.collectedLeaveElements.indexOf(m);ue>=0&&this.collectedLeaveElements.splice(ue,1)}if(d){const ue=this._fetchNamespace(d);ue&&ue.insertNode(m,T)}V&&this.collectEnterElement(m)}collectEnterElement(d){this.collectedEnterElements.push(d)}markElementAsDisabled(d,m){m?this.disabledNodes.has(d)||(this.disabledNodes.add(d),Ii(d,dn)):this.disabledNodes.has(d)&&(this.disabledNodes.delete(d),$s(d,dn))}removeNode(d,m,T){if(Or(m)){const V=d?this._fetchNamespace(d):null;V?V.removeNode(m,T):this.markElementAsRemoved(d,m,!1,T);const Y=this.namespacesByHostElement.get(m);Y&&Y.id!==d&&Y.removeNode(m,T)}else this._onRemovalComplete(m,T)}markElementAsRemoved(d,m,T,V,Y){this.collectedLeaveElements.push(m),m[gi]={namespaceId:d,setForRemoval:V,hasAnimation:T,removedBeforeQueried:!1,previousTriggersValues:Y}}listen(d,m,T,V,Y){return Or(m)?this._fetchNamespace(d).listen(m,T,V,Y):()=>{}}_buildInstruction(d,m,T,V,Y){return d.transition.build(this.driver,d.element,d.fromState.value,d.toState.value,T,V,d.fromState.options,d.toState.options,m,Y)}destroyInnerAnimations(d){let m=this.driver.query(d,$t,!0);m.forEach(T=>this.destroyActiveAnimationsForElement(T)),0!=this.playersByQueriedElement.size&&(m=this.driver.query(d,Cn,!0),m.forEach(T=>this.finishActiveQueriedAnimationOnElement(T)))}destroyActiveAnimationsForElement(d){const m=this.playersByElement.get(d);m&&m.forEach(T=>{T.queued?T.markedForDestroy=!0:T.destroy()})}finishActiveQueriedAnimationOnElement(d){const m=this.playersByQueriedElement.get(d);m&&m.forEach(T=>T.finish())}whenRenderingDone(){return new Promise(d=>{if(this.players.length)return yt(this.players).onDone(()=>d());d()})}processLeaveNode(d){const m=d[gi];if(m&&m.setForRemoval){if(d[gi]=Zi,m.namespaceId){this.destroyInnerAnimations(d);const T=this._fetchNamespace(m.namespaceId);T&&T.clearElementCache(d)}this._onRemovalComplete(d,m.setForRemoval)}d.classList?.contains(dn)&&this.markElementAsDisabled(d,!1),this.driver.query(d,".ng-animate-disabled",!0).forEach(T=>{this.markElementAsDisabled(T,!1)})}flush(d=-1){let m=[];if(this.newHostElements.size&&(this.newHostElements.forEach((T,V)=>this._balanceNamespaceList(T,V)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let T=0;T<this.collectedEnterElements.length;T++)Ii(this.collectedEnterElements[T],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const T=[];try{m=this._flushAnimations(T,d)}finally{for(let V=0;V<T.length;V++)T[V]()}}else for(let T=0;T<this.collectedLeaveElements.length;T++)this.processLeaveNode(this.collectedLeaveElements[T]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(T=>T()),this._flushFns=[],this._whenQuietFns.length){const T=this._whenQuietFns;this._whenQuietFns=[],m.length?yt(m).onDone(()=>{T.forEach(V=>V())}):T.forEach(V=>V())}}reportError(d){throw function $e(N){return new Z.vHH(3402,!1)}()}_flushAnimations(d,m){const T=new Qs,V=[],Y=new Map,ue=[],me=new Map,Se=new Map,Qe=new Map,At=new Set;this.disabledNodes.forEach(on=>{At.add(on);const mn=this.driver.query(on,".ng-animate-queued",!0);for(let Fn=0;Fn<mn.length;Fn++)At.add(mn[Fn])});const Mt=this.bodyNode,en=Array.from(this.statesByElement.keys()),bn=Vi(en,this.collectedEnterElements),sn=new Map;let St=0;bn.forEach((on,mn)=>{const Fn=Rn+St++;sn.set(mn,Fn),on.forEach(Yr=>Ii(Yr,Fn))});const Sn=[],wn=new Set,Zr=new Set;for(let on=0;on<this.collectedLeaveElements.length;on++){const mn=this.collectedLeaveElements[on],Fn=mn[gi];Fn&&Fn.setForRemoval&&(Sn.push(mn),wn.add(mn),Fn.hasAnimation?this.driver.query(mn,".ng-star-inserted",!0).forEach(Yr=>wn.add(Yr)):Zr.add(mn))}const nr=new Map,Qr=Vi(en,Array.from(wn));Qr.forEach((on,mn)=>{const Fn=Cr+St++;nr.set(mn,Fn),on.forEach(Yr=>Ii(Yr,Fn))}),d.push(()=>{bn.forEach((on,mn)=>{const Fn=sn.get(mn);on.forEach(Yr=>$s(Yr,Fn))}),Qr.forEach((on,mn)=>{const Fn=nr.get(mn);on.forEach(Yr=>$s(Yr,Fn))}),Sn.forEach(on=>{this.processLeaveNode(on)})});const Ki=[],Ws=[];for(let on=this._namespaceList.length-1;on>=0;on--)this._namespaceList[on].drainQueuedTransitions(m).forEach(Fn=>{const Yr=Fn.player,Fr=Fn.element;if(Ki.push(Yr),this.collectedEnterElements.length){const ys=Fr[gi];if(ys&&ys.setForMove){if(ys.previousTriggersValues&&ys.previousTriggersValues.has(Fn.triggerName)){const ao=ys.previousTriggersValues.get(Fn.triggerName),po=this.statesByElement.get(Fn.element);if(po&&po.has(Fn.triggerName)){const bu=po.get(Fn.triggerName);bu.value=ao,po.set(Fn.triggerName,bu)}}return void Yr.destroy()}}const ma=!Mt||!this.driver.containsElement(Mt,Fr),oo=nr.get(Fr),xa=sn.get(Fr),Gr=this._buildInstruction(Fn,T,xa,oo,ma);if(Gr.errors&&Gr.errors.length)return void Ws.push(Gr);if(ma)return Yr.onStart(()=>Mr(Fr,Gr.fromStyles)),Yr.onDestroy(()=>fr(Fr,Gr.toStyles)),void V.push(Yr);if(Fn.isFallbackTransition)return Yr.onStart(()=>Mr(Fr,Gr.fromStyles)),Yr.onDestroy(()=>fr(Fr,Gr.toStyles)),void V.push(Yr);const ka=[];Gr.timelines.forEach(ys=>{ys.stretchStartingKeyframe=!0,this.disabledNodes.has(ys.element)||ka.push(ys)}),Gr.timelines=ka,T.append(Fr,Gr.timelines),ue.push({instruction:Gr,player:Yr,element:Fr}),Gr.queriedElements.forEach(ys=>Gt(me,ys,[]).push(Yr)),Gr.preStyleProps.forEach((ys,ao)=>{if(ys.size){let po=Se.get(ao);po||Se.set(ao,po=new Set),ys.forEach((bu,fu)=>po.add(fu))}}),Gr.postStyleProps.forEach((ys,ao)=>{let po=Qe.get(ao);po||Qe.set(ao,po=new Set),ys.forEach((bu,fu)=>po.add(fu))})});if(Ws.length){const on=[];Ws.forEach(mn=>{on.push(function He(N,d){return new Z.vHH(3505,!1)}())}),Ki.forEach(mn=>mn.destroy()),this.reportError(on)}const es=new Map,Nn=new Map;ue.forEach(on=>{const mn=on.element;T.has(mn)&&(Nn.set(mn,mn),this._beforeAnimationBuild(on.player.namespaceId,on.instruction,es))}),V.forEach(on=>{const mn=on.element;this._getPreviousPlayers(mn,!1,on.namespaceId,on.triggerName,null).forEach(Yr=>{Gt(es,mn,[]).push(Yr),Yr.destroy()})});const kr=Sn.filter(on=>Ui(on,Se,Qe)),Ho=new Map;hs(Ho,this.driver,Zr,Qe,q.l3).forEach(on=>{Ui(on,Se,Qe)&&kr.push(on)});const Cu=new Map;bn.forEach((on,mn)=>{hs(Cu,this.driver,new Set(on),Se,q.k1)}),kr.forEach(on=>{const mn=Ho.get(on),Fn=Cu.get(on);Ho.set(on,new Map([...mn?.entries()??[],...Fn?.entries()??[]]))});const hu=[],Tl=[],$c={};ue.forEach(on=>{const{element:mn,player:Fn,instruction:Yr}=on;if(T.has(mn)){if(At.has(mn))return Fn.onDestroy(()=>fr(mn,Yr.toStyles)),Fn.disabled=!0,Fn.overrideTotalTime(Yr.totalTime),void V.push(Fn);let Fr=$c;if(Nn.size>1){let oo=mn;const xa=[];for(;oo=oo.parentNode;){const Gr=Nn.get(oo);if(Gr){Fr=Gr;break}xa.push(oo)}xa.forEach(Gr=>Nn.set(Gr,Fr))}const ma=this._buildAnimation(Fn.namespaceId,Yr,es,Y,Cu,Ho);if(Fn.setRealPlayer(ma),Fr===$c)hu.push(Fn);else{const oo=this.playersByElement.get(Fr);oo&&oo.length&&(Fn.parentPlayer=yt(oo)),V.push(Fn)}}else Mr(mn,Yr.fromStyles),Fn.onDestroy(()=>fr(mn,Yr.toStyles)),Tl.push(Fn),At.has(mn)&&V.push(Fn)}),Tl.forEach(on=>{const mn=Y.get(on.element);if(mn&&mn.length){const Fn=yt(mn);on.setRealPlayer(Fn)}}),V.forEach(on=>{on.parentPlayer?on.syncPlayerEvents(on.parentPlayer):on.destroy()});for(let on=0;on<Sn.length;on++){const mn=Sn[on],Fn=mn[gi];if($s(mn,Cr),Fn&&Fn.hasAnimation)continue;let Yr=[];if(me.size){let ma=me.get(mn);ma&&ma.length&&Yr.push(...ma);let oo=this.driver.query(mn,Cn,!0);for(let xa=0;xa<oo.length;xa++){let Gr=me.get(oo[xa]);Gr&&Gr.length&&Yr.push(...Gr)}}const Fr=Yr.filter(ma=>!ma.destroyed);Fr.length?Qn(this,mn,Fr):this.processLeaveNode(mn)}return Sn.length=0,hu.forEach(on=>{this.players.push(on),on.onDone(()=>{on.destroy();const mn=this.players.indexOf(on);this.players.splice(mn,1)}),on.play()}),hu}afterFlush(d){this._flushFns.push(d)}afterFlushAnimationsDone(d){this._whenQuietFns.push(d)}_getPreviousPlayers(d,m,T,V,Y){let ue=[];if(m){const me=this.playersByQueriedElement.get(d);me&&(ue=me)}else{const me=this.playersByElement.get(d);if(me){const Se=!Y||Y==fn;me.forEach(Qe=>{Qe.queued||!Se&&Qe.triggerName!=V||ue.push(Qe)})}}return(T||V)&&(ue=ue.filter(me=>!(T&&T!=me.namespaceId||V&&V!=me.triggerName))),ue}_beforeAnimationBuild(d,m,T){const Y=m.element,ue=m.isRemovalTransition?void 0:d,me=m.isRemovalTransition?void 0:m.triggerName;for(const Se of m.timelines){const Qe=Se.element,At=Qe!==Y,Mt=Gt(T,Qe,[]);this._getPreviousPlayers(Qe,At,ue,me,m.toState).forEach(bn=>{const sn=bn.getRealPlayer();sn.beforeDestroy&&sn.beforeDestroy(),bn.destroy(),Mt.push(bn)})}Mr(Y,m.fromStyles)}_buildAnimation(d,m,T,V,Y,ue){const me=m.triggerName,Se=m.element,Qe=[],At=new Set,Mt=new Set,en=m.timelines.map(sn=>{const St=sn.element;At.add(St);const Sn=St[gi];if(Sn&&Sn.removedBeforeQueried)return new q.ZN(sn.duration,sn.delay);const wn=St!==Se,Zr=function va(N){const d=[];return Qi(N,d),d}((T.get(St)||pi).map(es=>es.getRealPlayer())).filter(es=>!!es.element&&es.element===St),nr=Y.get(St),Qr=ue.get(St),Ki=vt(this._normalizer,sn.keyframes,nr,Qr),Ws=this._buildPlayer(sn,Ki,Zr);if(sn.subTimeline&&V&&Mt.add(St),wn){const es=new Vr(d,me,St);es.setRealPlayer(Ws),Qe.push(es)}return Ws});Qe.forEach(sn=>{Gt(this.playersByQueriedElement,sn.element,[]).push(sn),sn.onDone(()=>function wr(N,d,m){let T=N.get(d);if(T){if(T.length){const V=T.indexOf(m);T.splice(V,1)}0==T.length&&N.delete(d)}return T}(this.playersByQueriedElement,sn.element,sn))}),At.forEach(sn=>Ii(sn,Mi));const bn=yt(en);return bn.onDestroy(()=>{At.forEach(sn=>$s(sn,Mi)),fr(Se,m.toStyles)}),Mt.forEach(sn=>{Gt(V,sn,[]).push(bn)}),bn}_buildPlayer(d,m,T){return m.length>0?this.driver.animate(d.element,m,d.duration,d.delay,d.easing,T):new q.ZN(d.duration,d.delay)}}class Vr{constructor(d,m,T){this.namespaceId=d,this.triggerName=m,this.element=T,this._player=new q.ZN,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(d){this._containsRealPlayer||(this._player=d,this._queuedCallbacks.forEach((m,T)=>{m.forEach(V=>$n(d,T,void 0,V))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(d.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(d){this.totalTime=d}syncPlayerEvents(d){const m=this._player;m.triggerCallback&&d.onStart(()=>m.triggerCallback("start")),d.onDone(()=>this.finish()),d.onDestroy(()=>this.destroy())}_queueEvent(d,m){Gt(this._queuedCallbacks,d,[]).push(m)}onDone(d){this.queued&&this._queueEvent("done",d),this._player.onDone(d)}onStart(d){this.queued&&this._queueEvent("start",d),this._player.onStart(d)}onDestroy(d){this.queued&&this._queueEvent("destroy",d),this._player.onDestroy(d)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(d){this.queued||this._player.setPosition(d)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(d){const m=this._player;m.triggerCallback&&m.triggerCallback(d)}}function Or(N){return N&&1===N.nodeType}function No(N,d){const m=N.style.display;return N.style.display=d??"none",m}function hs(N,d,m,T,V){const Y=[];m.forEach(Se=>Y.push(No(Se)));const ue=[];T.forEach((Se,Qe)=>{const At=new Map;Se.forEach(Mt=>{const en=d.computeStyle(Qe,Mt,V);At.set(Mt,en),(!en||0==en.length)&&(Qe[gi]=Jn,ue.push(Qe))}),N.set(Qe,At)});let me=0;return m.forEach(Se=>No(Se,Y[me++])),ue}function Vi(N,d){const m=new Map;if(N.forEach(me=>m.set(me,[])),0==d.length)return m;const V=new Set(d),Y=new Map;function ue(me){if(!me)return 1;let Se=Y.get(me);if(Se)return Se;const Qe=me.parentNode;return Se=m.has(Qe)?Qe:V.has(Qe)?1:ue(Qe),Y.set(me,Se),Se}return d.forEach(me=>{const Se=ue(me);1!==Se&&m.get(Se).push(me)}),m}function Ii(N,d){N.classList?.add(d)}function $s(N,d){N.classList?.remove(d)}function Qn(N,d,m){yt(m).onDone(()=>N.processLeaveNode(d))}function Qi(N,d){for(let m=0;m<N.length;m++){const T=N[m];T instanceof q.ZE?Qi(T.players,d):d.push(T)}}function Ui(N,d,m){const T=m.get(N);if(!T)return!1;let V=d.get(N);return V?T.forEach(Y=>V.add(Y)):d.set(N,T),m.delete(N),!0}class mi{constructor(d,m,T){this.bodyNode=d,this._driver=m,this._normalizer=T,this._triggerCache={},this.onRemovalComplete=(V,Y)=>{},this._transitionEngine=new Wi(d,m,T),this._timelineEngine=new ds(d,m,T),this._transitionEngine.onRemovalComplete=(V,Y)=>this.onRemovalComplete(V,Y)}registerTrigger(d,m,T,V,Y){const ue=d+"-"+V;let me=this._triggerCache[ue];if(!me){const Se=[],At=gn(this._driver,Y,Se,[]);if(Se.length)throw function Tt(N,d){return new Z.vHH(3404,!1)}();me=function li(N,d,m){return new lo(N,d,m)}(V,At,this._normalizer),this._triggerCache[ue]=me}this._transitionEngine.registerTrigger(m,V,me)}register(d,m){this._transitionEngine.register(d,m)}destroy(d,m){this._transitionEngine.destroy(d,m)}onInsert(d,m,T,V){this._transitionEngine.insertNode(d,m,T,V)}onRemove(d,m,T){this._transitionEngine.removeNode(d,m,T)}disableAnimations(d,m){this._transitionEngine.markElementAsDisabled(d,m)}process(d,m,T,V){if("@"==T.charAt(0)){const[Y,ue]=or(T);this._timelineEngine.command(Y,m,ue,V)}else this._transitionEngine.trigger(d,m,T,V)}listen(d,m,T,V,Y){if("@"==T.charAt(0)){const[ue,me]=or(T);return this._timelineEngine.listen(ue,m,me,Y)}return this._transitionEngine.listen(d,m,T,V,Y)}flush(d=-1){this._transitionEngine.flush(d)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(d){this._transitionEngine.afterFlushAnimationsDone(d)}}let fs=(()=>{class N{static#e=this.initialStylesByElement=new WeakMap;constructor(m,T,V){this._element=m,this._startStyles=T,this._endStyles=V,this._state=0;let Y=N.initialStylesByElement.get(m);Y||N.initialStylesByElement.set(m,Y=new Map),this._initialStyles=Y}start(){this._state<1&&(this._startStyles&&fr(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(fr(this._element,this._initialStyles),this._endStyles&&(fr(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(N.initialStylesByElement.delete(this._element),this._startStyles&&(Mr(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Mr(this._element,this._endStyles),this._endStyles=null),fr(this._element,this._initialStyles),this._state=3)}}return N})();function Tr(N){let d=null;return N.forEach((m,T)=>{(function Eo(N){return"display"===N||"position"===N})(T)&&(d=d||new Map,d.set(T,m))}),d}class _n{constructor(d,m,T,V){this.element=d,this.keyframes=m,this.options=T,this._specialStyles=V,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=T.duration,this._delay=T.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(d=>d()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const d=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,d,this.options),this._finalKeyframe=d.length?d[d.length-1]:new Map;const m=()=>this._onFinish();this.domPlayer.addEventListener("finish",m),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",m)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(d){const m=[];return d.forEach(T=>{m.push(Object.fromEntries(T))}),m}_triggerWebAnimation(d,m,T){return d.animate(this._convertKeyframesToObject(m),T)}onStart(d){this._originalOnStartFns.push(d),this._onStartFns.push(d)}onDone(d){this._originalOnDoneFns.push(d),this._onDoneFns.push(d)}onDestroy(d){this._onDestroyFns.push(d)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(d=>d()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(d=>d()),this._onDestroyFns=[])}setPosition(d){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=d*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const d=new Map;this.hasStarted()&&this._finalKeyframe.forEach((T,V)=>{"offset"!==V&&d.set(V,this._finished?T:qt(this.element,V))}),this.currentSnapshot=d}triggerCallback(d){const m="start"===d?this._onStartFns:this._onDoneFns;m.forEach(T=>T()),m.length=0}}class Bi{validateStyleProperty(d){return!0}validateAnimatableStyleProperty(d){return!0}matchesElement(d,m){return!1}containsElement(d,m){return On(d,m)}getParentElement(d){return Ln(d)}query(d,m,T){return ti(d,m,T)}computeStyle(d,m,T){return window.getComputedStyle(d)[m]}animate(d,m,T,V,Y,ue=[]){const Se={duration:T,delay:V,fill:0==V?"both":"forwards"};Y&&(Se.easing=Y);const Qe=new Map,At=ue.filter(bn=>bn instanceof _n);(function _t(N,d){return 0===N||0===d})(T,V)&&At.forEach(bn=>{bn.currentSnapshot.forEach((sn,St)=>Qe.set(St,sn))});let Mt=function Ni(N){return N.length?N[0]instanceof Map?N:N.map(d=>Br(d)):[]}(m).map(bn=>Sr(bn));Mt=function Ot(N,d,m){if(m.size&&d.length){let T=d[0],V=[];if(m.forEach((Y,ue)=>{T.has(ue)||V.push(ue),T.set(ue,Y)}),V.length)for(let Y=1;Y<d.length;Y++){let ue=d[Y];V.forEach(me=>ue.set(me,qt(N,me)))}}return d}(d,Mt,Qe);const en=function Oo(N,d){let m=null,T=null;return Array.isArray(d)&&d.length?(m=Tr(d[0]),d.length>1&&(T=Tr(d[d.length-1]))):d instanceof Map&&(m=Tr(d)),m||T?new fs(N,m,T):null}(d,Mt);return new _n(d,Mt,Se,en)}}var ps=U(6814);let xo=(()=>{class N extends q._j{constructor(m,T){super(),this._nextAnimationId=0,this._renderer=m.createRenderer(T.body,{id:"0",encapsulation:Z.ifc.None,styles:[],data:{animation:[]}})}build(m){const T=this._nextAnimationId.toString();this._nextAnimationId++;const V=Array.isArray(m)?(0,q.vP)(m):m;return co(this._renderer,null,T,"register",[V]),new Ea(T,this._renderer)}static#e=this.\u0275fac=function(T){return new(T||N)(Z.LFG(Z.FYo),Z.LFG(ps.K0))};static#t=this.\u0275prov=Z.Yz7({token:N,factory:N.\u0275fac})}return N})();class Ea extends q.LC{constructor(d,m){super(),this._id=d,this._renderer=m}create(d,m){return new ji(this._id,d,m||{},this._renderer)}}class ji{constructor(d,m,T,V){this.id=d,this.element=m,this._renderer=V,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",T)}_listen(d,m){return this._renderer.listen(this.element,`@@${this.id}:${d}`,m)}_command(d,...m){return co(this._renderer,this.element,this.id,d,m)}onDone(d){this._listen("done",d)}onStart(d){this._listen("start",d)}onDestroy(d){this._listen("destroy",d)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(d){this._command("setPosition",d)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function co(N,d,m,T,V){return N.setProperty(d,`@@${m}:${T}`,V)}const Zo="@.disabled";let ja=(()=>{class N{constructor(m,T,V){this.delegate=m,this.engine=T,this._zone=V,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,T.onRemovalComplete=(Y,ue)=>{const me=ue?.parentNode(Y);me&&ue.removeChild(me,Y)}}createRenderer(m,T){const Y=this.delegate.createRenderer(m,T);if(!(m&&T&&T.data&&T.data.animation)){let At=this._rendererCache.get(Y);return At||(At=new $i("",Y,this.engine,()=>this._rendererCache.delete(Y)),this._rendererCache.set(Y,At)),At}const ue=T.id,me=T.id+"-"+this._currentId;this._currentId++,this.engine.register(me,m);const Se=At=>{Array.isArray(At)?At.forEach(Se):this.engine.registerTrigger(ue,me,m,At.name,At)};return T.data.animation.forEach(Se),new Si(this,me,Y,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(m,T,V){m>=0&&m<this._microtaskId?this._zone.run(()=>T(V)):(0==this._animationCallbacksBuffer.length&&queueMicrotask(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(Y=>{const[ue,me]=Y;ue(me)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([T,V]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}static#e=this.\u0275fac=function(T){return new(T||N)(Z.LFG(Z.FYo),Z.LFG(mi),Z.LFG(Z.R0b))};static#t=this.\u0275prov=Z.Yz7({token:N,factory:N.\u0275fac})}return N})();class $i{constructor(d,m,T,V){this.namespaceId=d,this.delegate=m,this.engine=T,this._onDestroy=V}get data(){return this.delegate.data}destroyNode(d){this.delegate.destroyNode?.(d)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(d,m){return this.delegate.createElement(d,m)}createComment(d){return this.delegate.createComment(d)}createText(d){return this.delegate.createText(d)}appendChild(d,m){this.delegate.appendChild(d,m),this.engine.onInsert(this.namespaceId,m,d,!1)}insertBefore(d,m,T,V=!0){this.delegate.insertBefore(d,m,T),this.engine.onInsert(this.namespaceId,m,d,V)}removeChild(d,m,T){this.engine.onRemove(this.namespaceId,m,this.delegate)}selectRootElement(d,m){return this.delegate.selectRootElement(d,m)}parentNode(d){return this.delegate.parentNode(d)}nextSibling(d){return this.delegate.nextSibling(d)}setAttribute(d,m,T,V){this.delegate.setAttribute(d,m,T,V)}removeAttribute(d,m,T){this.delegate.removeAttribute(d,m,T)}addClass(d,m){this.delegate.addClass(d,m)}removeClass(d,m){this.delegate.removeClass(d,m)}setStyle(d,m,T,V){this.delegate.setStyle(d,m,T,V)}removeStyle(d,m,T){this.delegate.removeStyle(d,m,T)}setProperty(d,m,T){"@"==m.charAt(0)&&m==Zo?this.disableAnimations(d,!!T):this.delegate.setProperty(d,m,T)}setValue(d,m){this.delegate.setValue(d,m)}listen(d,m,T){return this.delegate.listen(d,m,T)}disableAnimations(d,m){this.engine.disableAnimations(d,m)}}class Si extends $i{constructor(d,m,T,V,Y){super(m,T,V,Y),this.factory=d,this.namespaceId=m}setProperty(d,m,T){"@"==m.charAt(0)?"."==m.charAt(1)&&m==Zo?this.disableAnimations(d,T=void 0===T||!!T):this.engine.process(this.namespaceId,d,m.slice(1),T):this.delegate.setProperty(d,m,T)}listen(d,m,T){if("@"==m.charAt(0)){const V=function $a(N){switch(N){case"body":return document.body;case"document":return document;case"window":return window;default:return N}}(d);let Y=m.slice(1),ue="";return"@"!=Y.charAt(0)&&([Y,ue]=function iu(N){const d=N.indexOf(".");return[N.substring(0,d),N.slice(d+1)]}(Y)),this.engine.listen(this.namespaceId,V,Y,ue,me=>{this.factory.scheduleListenerCallback(me._data||-1,T,me)})}return this.delegate.listen(d,m,T)}}const ae=[{provide:q._j,useClass:xo},{provide:Bs,useFactory:function j(){return new vo}},{provide:mi,useClass:(()=>{class N extends mi{constructor(m,T,V,Y){super(m.body,T,V)}ngOnDestroy(){this.flush()}static#e=this.\u0275fac=function(T){return new(T||N)(Z.LFG(ps.K0),Z.LFG(rn),Z.LFG(Bs),Z.LFG(Z.z2F))};static#t=this.\u0275prov=Z.Yz7({token:N,factory:N.\u0275fac})}return N})()},{provide:Z.FYo,useFactory:function H(N,d,m){return new ja(N,d,m)},deps:[f.se,mi,Z.R0b]}],b=[{provide:rn,useFactory:()=>new Bi},{provide:Z.QbO,useValue:"BrowserAnimations"},...ae],O=[{provide:rn,useClass:an},{provide:Z.QbO,useValue:"NoopAnimations"},...ae];let C=(()=>{class N{static withConfig(m){return{ngModule:N,providers:m.disableAnimations?O:b}}static#e=this.\u0275fac=function(T){return new(T||N)};static#t=this.\u0275mod=Z.oAB({type:N});static#n=this.\u0275inj=Z.cJS({providers:b,imports:[f.b2]})}return N})();var ht=U(7045),un=U(5861),ir=U(4036),lr=U(5196);let Dr=(()=>{class N{constructor(m,T){var V=this;this.autenticador=m,this.router=T,this.canActivate=(0,un.Z)(function*(){const Y=V.autenticador.obtenerUsuarioLogueado();return V.autenticador.usuarioActual=yield(0,ir.z)(Y),null==V.autenticador.usuarioActual||(V.router.navigateByUrl("bienvenido/mi-perfil"),!1)})}static#e=this.\u0275fac=function(T){return new(T||N)(Z.LFG(lr.T),Z.LFG(ht.F0))};static#t=this.\u0275prov=Z.Yz7({token:N,factory:N.\u0275fac,providedIn:"root"})}return N})(),er=(()=>{class N{constructor(m,T){var V=this;this.autenticador=m,this.router=T,this.canActivate=(0,un.Z)(function*(){const Y=V.autenticador.obtenerUsuarioLogueado();return V.autenticador.usuarioActual=yield(0,ir.z)(Y),null!=V.autenticador.usuarioActual||(V.router.navigateByUrl("home"),!1)})}static#e=this.\u0275fac=function(T){return new(T||N)(Z.LFG(lr.T),Z.LFG(ht.F0))};static#t=this.\u0275prov=Z.Yz7({token:N,factory:N.\u0275fac,providedIn:"root"})}return N})();const Xr=[{path:"",redirectTo:"home",pathMatch:"full"},{path:"home",loadChildren:()=>U.e(707).then(U.bind(U,4707)).then(N=>N.HomeModule),canActivate:[Dr]},{path:"sesiones",loadChildren:()=>U.e(591).then(U.bind(U,591)).then(N=>N.SesionesModule),canActivate:[Dr]},{path:"bienvenido",loadChildren:()=>Promise.all([U.e(519),U.e(95)]).then(U.bind(U,7095)).then(N=>N.BienvenidoModule),canActivate:[er]},{path:"encuesta",loadChildren:()=>U.e(65).then(U.bind(U,7065)).then(N=>N.EncuestaModule),canActivate:[er]},{path:"error",component:(()=>{class N{static#e=this.\u0275fac=function(T){return new(T||N)};static#t=this.\u0275cmp=Z.Xpm({type:N,selectors:[["app-error"]],decls:3,vars:0,template:function(T,V){1&T&&(Z.TgZ(0,"h1"),Z._uU(1,"Error"),Z.qZA(),Z._UZ(2,"router-outlet"))},dependencies:[ht.lC]})}return N})()},{path:"**",redirectTo:"error"}];let As=(()=>{class N{static#e=this.\u0275fac=function(T){return new(T||N)};static#t=this.\u0275mod=Z.oAB({type:N});static#n=this.\u0275inj=Z.cJS({imports:[ht.Bz.forRoot(Xr),ht.Bz]})}return N})();var jr=U(8672);let Ri=(()=>{class N{constructor(m){this.router=m,this.title="tp-final-clinica"}navigate(m){this.router.navigateByUrl(m)}static#e=this.\u0275fac=function(T){return new(T||N)(Z.Y36(ht.F0))};static#t=this.\u0275cmp=Z.Xpm({type:N,selectors:[["app-root"]],decls:11,vars:0,consts:[["lang","es"],["charset","UTF-8"],["name","viewport","content","width=device-width, initial-scale=1.0"],["bdColor","rgba(51,51,51,0.8)","size","medium","color","#fff","template","<img src='assets/spinner.gif' width='64' height='64'/>"],[2,"font-size","20px","color","white"]],template:function(T,V){1&T&&(Z.TgZ(0,"html",0)(1,"head"),Z._UZ(2,"meta",1)(3,"meta",2),Z.TgZ(4,"title"),Z._uU(5,"Clinica"),Z.qZA()(),Z.TgZ(6,"body")(7,"ngx-spinner",3)(8,"p",4),Z._uU(9,"Cargando..."),Z.qZA()()()(),Z._UZ(10,"router-outlet"))},dependencies:[ht.lC,jr.Ro]})}return N})();var Ar=U(95),to=U(2096),gs=U(2459),di=U(5592),no=U(6328),Cs=U(2181),Pi=U(7398),Sa=U(4716),Hs=U(4664);class Ia{}class mr{}class Fo{constructor(d){this.normalizedNames=new Map,this.lazyUpdate=null,d?"string"==typeof d?this.lazyInit=()=>{this.headers=new Map,d.split("\n").forEach(m=>{const T=m.indexOf(":");if(T>0){const V=m.slice(0,T),Y=V.toLowerCase(),ue=m.slice(T+1).trim();this.maybeSetNormalizedName(V,Y),this.headers.has(Y)?this.headers.get(Y).push(ue):this.headers.set(Y,[ue])}})}:typeof Headers<"u"&&d instanceof Headers?(this.headers=new Map,d.forEach((m,T)=>{this.setHeaderEntries(T,m)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(d).forEach(([m,T])=>{this.setHeaderEntries(m,T)})}:this.headers=new Map}has(d){return this.init(),this.headers.has(d.toLowerCase())}get(d){this.init();const m=this.headers.get(d.toLowerCase());return m&&m.length>0?m[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(d){return this.init(),this.headers.get(d.toLowerCase())||null}append(d,m){return this.clone({name:d,value:m,op:"a"})}set(d,m){return this.clone({name:d,value:m,op:"s"})}delete(d,m){return this.clone({name:d,value:m,op:"d"})}maybeSetNormalizedName(d,m){this.normalizedNames.has(m)||this.normalizedNames.set(m,d)}init(){this.lazyInit&&(this.lazyInit instanceof Fo?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(d=>this.applyUpdate(d)),this.lazyUpdate=null))}copyFrom(d){d.init(),Array.from(d.headers.keys()).forEach(m=>{this.headers.set(m,d.headers.get(m)),this.normalizedNames.set(m,d.normalizedNames.get(m))})}clone(d){const m=new Fo;return m.lazyInit=this.lazyInit&&this.lazyInit instanceof Fo?this.lazyInit:this,m.lazyUpdate=(this.lazyUpdate||[]).concat([d]),m}applyUpdate(d){const m=d.name.toLowerCase();switch(d.op){case"a":case"s":let T=d.value;if("string"==typeof T&&(T=[T]),0===T.length)return;this.maybeSetNormalizedName(d.name,m);const V=("a"===d.op?this.headers.get(m):void 0)||[];V.push(...T),this.headers.set(m,V);break;case"d":const Y=d.value;if(Y){let ue=this.headers.get(m);if(!ue)return;ue=ue.filter(me=>-1===Y.indexOf(me)),0===ue.length?(this.headers.delete(m),this.normalizedNames.delete(m)):this.headers.set(m,ue)}else this.headers.delete(m),this.normalizedNames.delete(m)}}setHeaderEntries(d,m){const T=(Array.isArray(m)?m:[m]).map(Y=>Y.toString()),V=d.toLowerCase();this.headers.set(V,T),this.maybeSetNormalizedName(d,V)}forEach(d){this.init(),Array.from(this.normalizedNames.keys()).forEach(m=>d(this.normalizedNames.get(m),this.headers.get(m)))}}class xs{encodeKey(d){return Iu(d)}encodeValue(d){return Iu(d)}decodeKey(d){return decodeURIComponent(d)}decodeValue(d){return decodeURIComponent(d)}}const Ra=/%(\d[a-f0-9])/gi,da={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function Iu(N){return encodeURIComponent(N).replace(Ra,(d,m)=>da[m]??d)}function ta(N){return`${N}`}class ks{constructor(d={}){if(this.updates=null,this.cloneFrom=null,this.encoder=d.encoder||new xs,d.fromString){if(d.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function ea(N,d){const m=new Map;return N.length>0&&N.replace(/^\?/,"").split("&").forEach(V=>{const Y=V.indexOf("="),[ue,me]=-1==Y?[d.decodeKey(V),""]:[d.decodeKey(V.slice(0,Y)),d.decodeValue(V.slice(Y+1))],Se=m.get(ue)||[];Se.push(me),m.set(ue,Se)}),m}(d.fromString,this.encoder)}else d.fromObject?(this.map=new Map,Object.keys(d.fromObject).forEach(m=>{const T=d.fromObject[m],V=Array.isArray(T)?T.map(ta):[ta(T)];this.map.set(m,V)})):this.map=null}has(d){return this.init(),this.map.has(d)}get(d){this.init();const m=this.map.get(d);return m?m[0]:null}getAll(d){return this.init(),this.map.get(d)||null}keys(){return this.init(),Array.from(this.map.keys())}append(d,m){return this.clone({param:d,value:m,op:"a"})}appendAll(d){const m=[];return Object.keys(d).forEach(T=>{const V=d[T];Array.isArray(V)?V.forEach(Y=>{m.push({param:T,value:Y,op:"a"})}):m.push({param:T,value:V,op:"a"})}),this.clone(m)}set(d,m){return this.clone({param:d,value:m,op:"s"})}delete(d,m){return this.clone({param:d,value:m,op:"d"})}toString(){return this.init(),this.keys().map(d=>{const m=this.encoder.encodeKey(d);return this.map.get(d).map(T=>m+"="+this.encoder.encodeValue(T)).join("&")}).filter(d=>""!==d).join("&")}clone(d){const m=new ks({encoder:this.encoder});return m.cloneFrom=this.cloneFrom||this,m.updates=(this.updates||[]).concat(d),m}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(d=>this.map.set(d,this.cloneFrom.map.get(d))),this.updates.forEach(d=>{switch(d.op){case"a":case"s":const m=("a"===d.op?this.map.get(d.param):void 0)||[];m.push(ta(d.value)),this.map.set(d.param,m);break;case"d":if(void 0===d.value){this.map.delete(d.param);break}{let T=this.map.get(d.param)||[];const V=T.indexOf(ta(d.value));-1!==V&&T.splice(V,1),T.length>0?this.map.set(d.param,T):this.map.delete(d.param)}}}),this.cloneFrom=this.updates=null)}}class Fs{constructor(){this.map=new Map}set(d,m){return this.map.set(d,m),this}get(d){return this.map.has(d)||this.map.set(d,d.defaultValue()),this.map.get(d)}delete(d){return this.map.delete(d),this}has(d){return this.map.has(d)}keys(){return this.map.keys()}}function na(N){return typeof ArrayBuffer<"u"&&N instanceof ArrayBuffer}function Pa(N){return typeof Blob<"u"&&N instanceof Blob}function ha(N){return typeof FormData<"u"&&N instanceof FormData}class ro{constructor(d,m,T,V){let Y;if(this.url=m,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=d.toUpperCase(),function Ha(N){switch(N){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||V?(this.body=void 0!==T?T:null,Y=V):Y=T,Y&&(this.reportProgress=!!Y.reportProgress,this.withCredentials=!!Y.withCredentials,Y.responseType&&(this.responseType=Y.responseType),Y.headers&&(this.headers=Y.headers),Y.context&&(this.context=Y.context),Y.params&&(this.params=Y.params)),this.headers||(this.headers=new Fo),this.context||(this.context=new Fs),this.params){const ue=this.params.toString();if(0===ue.length)this.urlWithParams=m;else{const me=m.indexOf("?");this.urlWithParams=m+(-1===me?"?":me<m.length-1?"&":"")+ue}}else this.params=new ks,this.urlWithParams=m}serializeBody(){return null===this.body?null:na(this.body)||Pa(this.body)||ha(this.body)||function Bu(N){return typeof URLSearchParams<"u"&&N instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof ks?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||ha(this.body)?null:Pa(this.body)?this.body.type||null:na(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof ks?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(d={}){const m=d.method||this.method,T=d.url||this.url,V=d.responseType||this.responseType,Y=void 0!==d.body?d.body:this.body,ue=void 0!==d.withCredentials?d.withCredentials:this.withCredentials,me=void 0!==d.reportProgress?d.reportProgress:this.reportProgress;let Se=d.headers||this.headers,Qe=d.params||this.params;const At=d.context??this.context;return void 0!==d.setHeaders&&(Se=Object.keys(d.setHeaders).reduce((Mt,en)=>Mt.set(en,d.setHeaders[en]),Se)),d.setParams&&(Qe=Object.keys(d.setParams).reduce((Mt,en)=>Mt.set(en,d.setParams[en]),Qe)),new ro(m,T,Y,{params:Qe,headers:Se,context:At,reportProgress:me,responseType:V,withCredentials:ue})}}var ra=function(N){return N[N.Sent=0]="Sent",N[N.UploadProgress=1]="UploadProgress",N[N.ResponseHeader=2]="ResponseHeader",N[N.DownloadProgress=3]="DownloadProgress",N[N.Response=4]="Response",N[N.User=5]="User",N}(ra||{});class A{constructor(d,m=200,T="OK"){this.headers=d.headers||new Fo,this.status=void 0!==d.status?d.status:m,this.statusText=d.statusText||T,this.url=d.url||null,this.ok=this.status>=200&&this.status<300}}class J extends A{constructor(d={}){super(d),this.type=ra.ResponseHeader}clone(d={}){return new J({headers:d.headers||this.headers,status:void 0!==d.status?d.status:this.status,statusText:d.statusText||this.statusText,url:d.url||this.url||void 0})}}class L extends A{constructor(d={}){super(d),this.type=ra.Response,this.body=void 0!==d.body?d.body:null}clone(d={}){return new L({body:void 0!==d.body?d.body:this.body,headers:d.headers||this.headers,status:void 0!==d.status?d.status:this.status,statusText:d.statusText||this.statusText,url:d.url||this.url||void 0})}}class Q extends A{constructor(d){super(d,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${d.url||"(unknown url)"}`:`Http failure response for ${d.url||"(unknown url)"}: ${d.status} ${d.statusText}`,this.error=d.error||null}}function pe(N,d){return{body:d,headers:N.headers,context:N.context,observe:N.observe,params:N.params,reportProgress:N.reportProgress,responseType:N.responseType,withCredentials:N.withCredentials}}let Ze=(()=>{class N{constructor(m){this.handler=m}request(m,T,V={}){let Y;if(m instanceof ro)Y=m;else{let Se,Qe;Se=V.headers instanceof Fo?V.headers:new Fo(V.headers),V.params&&(Qe=V.params instanceof ks?V.params:new ks({fromObject:V.params})),Y=new ro(m,T,void 0!==V.body?V.body:null,{headers:Se,context:V.context,params:Qe,reportProgress:V.reportProgress,responseType:V.responseType||"json",withCredentials:V.withCredentials})}const ue=(0,to.of)(Y).pipe((0,no.b)(Se=>this.handler.handle(Se)));if(m instanceof ro||"events"===V.observe)return ue;const me=ue.pipe((0,Cs.h)(Se=>Se instanceof L));switch(V.observe||"body"){case"body":switch(Y.responseType){case"arraybuffer":return me.pipe((0,Pi.U)(Se=>{if(null!==Se.body&&!(Se.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return Se.body}));case"blob":return me.pipe((0,Pi.U)(Se=>{if(null!==Se.body&&!(Se.body instanceof Blob))throw new Error("Response is not a Blob.");return Se.body}));case"text":return me.pipe((0,Pi.U)(Se=>{if(null!==Se.body&&"string"!=typeof Se.body)throw new Error("Response is not a string.");return Se.body}));default:return me.pipe((0,Pi.U)(Se=>Se.body))}case"response":return me;default:throw new Error(`Unreachable: unhandled observe type ${V.observe}}`)}}delete(m,T={}){return this.request("DELETE",m,T)}get(m,T={}){return this.request("GET",m,T)}head(m,T={}){return this.request("HEAD",m,T)}jsonp(m,T){return this.request("JSONP",m,{params:(new ks).append(T,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(m,T={}){return this.request("OPTIONS",m,T)}patch(m,T,V={}){return this.request("PATCH",m,pe(V,T))}post(m,T,V={}){return this.request("POST",m,pe(V,T))}put(m,T,V={}){return this.request("PUT",m,pe(V,T))}static#e=this.\u0275fac=function(T){return new(T||N)(Z.LFG(Ia))};static#t=this.\u0275prov=Z.Yz7({token:N,factory:N.\u0275fac})}return N})();function tr(N,d){return d(N)}function wi(N,d){return(m,T)=>d.intercept(m,{handle:V=>N(V,T)})}const ct=new Z.OlP(""),Hr=new Z.OlP(""),ni=new Z.OlP("");function Qo(){let N=null;return(d,m)=>{null===N&&(N=((0,Z.f3M)(ct,{optional:!0})??[]).reduceRight(wi,tr));const T=(0,Z.f3M)(Z.HDt),V=T.add();return N(d,m).pipe((0,Sa.x)(()=>T.remove(V)))}}let bt=(()=>{class N extends Ia{constructor(m,T){super(),this.backend=m,this.injector=T,this.chain=null,this.pendingTasks=(0,Z.f3M)(Z.HDt)}handle(m){if(null===this.chain){const V=Array.from(new Set([...this.injector.get(Hr),...this.injector.get(ni,[])]));this.chain=V.reduceRight((Y,ue)=>function Ls(N,d,m){return(T,V)=>m.runInContext(()=>d(T,Y=>N(Y,V)))}(Y,ue,this.injector),tr)}const T=this.pendingTasks.add();return this.chain(m,V=>this.backend.handle(V)).pipe((0,Sa.x)(()=>this.pendingTasks.remove(T)))}static#e=this.\u0275fac=function(T){return new(T||N)(Z.LFG(mr),Z.LFG(Z.lqb))};static#t=this.\u0275prov=Z.Yz7({token:N,factory:N.\u0275fac})}return N})();const vl=/^\)\]\}',?\n/;let Yo=(()=>{class N{constructor(m){this.xhrFactory=m}handle(m){if("JSONP"===m.method)throw new Z.vHH(-2800,!1);const T=this.xhrFactory;return(T.\u0275loadImpl?(0,gs.D)(T.\u0275loadImpl()):(0,to.of)(null)).pipe((0,Hs.w)(()=>new di.y(Y=>{const ue=T.build();if(ue.open(m.method,m.urlWithParams),m.withCredentials&&(ue.withCredentials=!0),m.headers.forEach((St,Sn)=>ue.setRequestHeader(St,Sn.join(","))),m.headers.has("Accept")||ue.setRequestHeader("Accept","application/json, text/plain, */*"),!m.headers.has("Content-Type")){const St=m.detectContentTypeHeader();null!==St&&ue.setRequestHeader("Content-Type",St)}if(m.responseType){const St=m.responseType.toLowerCase();ue.responseType="json"!==St?St:"text"}const me=m.serializeBody();let Se=null;const Qe=()=>{if(null!==Se)return Se;const St=ue.statusText||"OK",Sn=new Fo(ue.getAllResponseHeaders()),wn=function Xl(N){return"responseURL"in N&&N.responseURL?N.responseURL:/^X-Request-URL:/m.test(N.getAllResponseHeaders())?N.getResponseHeader("X-Request-URL"):null}(ue)||m.url;return Se=new J({headers:Sn,status:ue.status,statusText:St,url:wn}),Se},At=()=>{let{headers:St,status:Sn,statusText:wn,url:Zr}=Qe(),nr=null;204!==Sn&&(nr=typeof ue.response>"u"?ue.responseText:ue.response),0===Sn&&(Sn=nr?200:0);let Qr=Sn>=200&&Sn<300;if("json"===m.responseType&&"string"==typeof nr){const Ki=nr;nr=nr.replace(vl,"");try{nr=""!==nr?JSON.parse(nr):null}catch(Ws){nr=Ki,Qr&&(Qr=!1,nr={error:Ws,text:nr})}}Qr?(Y.next(new L({body:nr,headers:St,status:Sn,statusText:wn,url:Zr||void 0})),Y.complete()):Y.error(new Q({error:nr,headers:St,status:Sn,statusText:wn,url:Zr||void 0}))},Mt=St=>{const{url:Sn}=Qe(),wn=new Q({error:St,status:ue.status||0,statusText:ue.statusText||"Unknown Error",url:Sn||void 0});Y.error(wn)};let en=!1;const bn=St=>{en||(Y.next(Qe()),en=!0);let Sn={type:ra.DownloadProgress,loaded:St.loaded};St.lengthComputable&&(Sn.total=St.total),"text"===m.responseType&&ue.responseText&&(Sn.partialText=ue.responseText),Y.next(Sn)},sn=St=>{let Sn={type:ra.UploadProgress,loaded:St.loaded};St.lengthComputable&&(Sn.total=St.total),Y.next(Sn)};return ue.addEventListener("load",At),ue.addEventListener("error",Mt),ue.addEventListener("timeout",Mt),ue.addEventListener("abort",Mt),m.reportProgress&&(ue.addEventListener("progress",bn),null!==me&&ue.upload&&ue.upload.addEventListener("progress",sn)),ue.send(me),Y.next({type:ra.Sent}),()=>{ue.removeEventListener("error",Mt),ue.removeEventListener("abort",Mt),ue.removeEventListener("load",At),ue.removeEventListener("timeout",Mt),m.reportProgress&&(ue.removeEventListener("progress",bn),null!==me&&ue.upload&&ue.upload.removeEventListener("progress",sn)),ue.readyState!==ue.DONE&&ue.abort()}})))}static#e=this.\u0275fac=function(T){return new(T||N)(Z.LFG(ps.JF))};static#t=this.\u0275prov=Z.Yz7({token:N,factory:N.\u0275fac})}return N})();const ia=new Z.OlP("XSRF_ENABLED"),ju=new Z.OlP("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),sa=new Z.OlP("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class $u{}let Zt=(()=>{class N{constructor(m,T,V){this.doc=m,this.platform=T,this.cookieName=V,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const m=this.doc.cookie||"";return m!==this.lastCookieString&&(this.parseCount++,this.lastToken=(0,ps.Mx)(m,this.cookieName),this.lastCookieString=m),this.lastToken}static#e=this.\u0275fac=function(T){return new(T||N)(Z.LFG(ps.K0),Z.LFG(Z.Lbi),Z.LFG(ju))};static#t=this.\u0275prov=Z.Yz7({token:N,factory:N.\u0275fac})}return N})();function cn(N,d){const m=N.url.toLowerCase();if(!(0,Z.f3M)(ia)||"GET"===N.method||"HEAD"===N.method||m.startsWith("http://")||m.startsWith("https://"))return d(N);const T=(0,Z.f3M)($u).getToken(),V=(0,Z.f3M)(sa);return null!=T&&!N.headers.has(V)&&(N=N.clone({headers:N.headers.set(V,T)})),d(N)}var qn=function(N){return N[N.Interceptors=0]="Interceptors",N[N.LegacyInterceptors=1]="LegacyInterceptors",N[N.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",N[N.NoXsrfProtection=3]="NoXsrfProtection",N[N.JsonpSupport=4]="JsonpSupport",N[N.RequestsMadeViaParent=5]="RequestsMadeViaParent",N[N.Fetch=6]="Fetch",N}(qn||{});function _i(...N){const d=[Ze,Yo,bt,{provide:Ia,useExisting:bt},{provide:mr,useExisting:Yo},{provide:Hr,useValue:cn,multi:!0},{provide:ia,useValue:!0},{provide:$u,useClass:Zt}];for(const m of N)d.push(...m.\u0275providers);return(0,Z.MR2)(d)}const wo=new Z.OlP("LEGACY_INTERCEPTOR_FN");function wu(){return function za(N,d){return{\u0275kind:N,\u0275providers:d}}(qn.LegacyInterceptors,[{provide:wo,useFactory:Qo},{provide:Hr,useExisting:wo,multi:!0}])}let Il=(()=>{class N{static#e=this.\u0275fac=function(T){return new(T||N)};static#t=this.\u0275mod=Z.oAB({type:N});static#n=this.\u0275inj=Z.cJS({providers:[_i(wu())]})}return N})();var io=U(7217),zu=U(830),zr=U(1920),Ti=U(7213),Gu=U(6321),ms=U(7921),To=U(9360),wl=U(8251);function au(){return(0,To.e)((N,d)=>{let m,T=!1;N.subscribe((0,wl.x)(d,V=>{const Y=m;m=V,T&&d.next([Y,V]),T=!0}))})}var Wu=U(6699),fo=U(3997),Ta=(U(6365),U(3106)),v=U(5776),R=U(9058),I=U(4537);function te(N,d){if(void 0===d)return{merge:!1};if(void 0!==d.mergeFields&&void 0!==d.merge)throw new v.WA("invalid-argument",`Invalid options passed to function ${N}(): You cannot specify both "merge" and "mergeFields".`);return d}function fe(){if(typeof Uint8Array>"u")throw new v.WA("unimplemented","Uint8Arrays are not available in this environment.")}function qe(){if(!(0,v.Me)())throw new v.WA("unimplemented","Blobs are unavailable in Firestore in this environment.")}class ze{constructor(d){this._delegate=d}static fromBase64String(d){return qe(),new ze(v.Jj.fromBase64String(d))}static fromUint8Array(d){return fe(),new ze(v.Jj.fromUint8Array(d))}toBase64(){return qe(),this._delegate.toBase64()}toUint8Array(){return fe(),this._delegate.toUint8Array()}isEqual(d){return this._delegate.isEqual(d._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Ut(N){return function jn(N,d){if("object"!=typeof N||null===N)return!1;const m=N;for(const T of d)if(T in m&&"function"==typeof m[T])return!0;return!1}(N,["next","error","complete"])}class Di{enableIndexedDbPersistence(d,m){return(0,v.ST)(d._delegate,{forceOwnership:m})}enableMultiTabIndexedDbPersistence(d){return(0,v.fH)(d._delegate)}clearIndexedDbPersistence(d){return(0,v.Fc)(d._delegate)}}class Mn{constructor(d,m,T){this._delegate=m,this._persistenceProvider=T,this.INTERNAL={delete:()=>this.terminate()},d instanceof v.l7||(this._appCompat=d)}get _databaseId(){return this._delegate._databaseId}settings(d){const m=this._delegate._getSettings();!d.merge&&m.host!==d.host&&(0,v.yq)("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),d.merge&&delete(d=Object.assign(Object.assign({},m),d)).merge,this._delegate._setSettings(d)}useEmulator(d,m,T={}){(0,v.at)(this._delegate,d,m,T)}enableNetwork(){return(0,v.Ix)(this._delegate)}disableNetwork(){return(0,v.TF)(this._delegate)}enablePersistence(d){let m=!1,T=!1;return d&&(m=!!d.synchronizeTabs,T=!!d.experimentalForceOwningTab,(0,v.Wi)("synchronizeTabs",m,"experimentalForceOwningTab",T)),m?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,T)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return(0,v.Mx)(this._delegate)}onSnapshotsInSync(d){return(0,v.sc)(this._delegate,d)}get app(){if(!this._appCompat)throw new v.WA("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(d){try{return new Da(this,(0,v.hJ)(this._delegate,d))}catch(m){throw so(m,"collection()","Firestore.collection()")}}doc(d){try{return new Uo(this,(0,v.JU)(this._delegate,d))}catch(m){throw so(m,"doc()","Firestore.doc()")}}collectionGroup(d){try{return new Gs(this,(0,v.B$)(this._delegate,d))}catch(m){throw so(m,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(d){return(0,v.i3)(this._delegate,m=>d(new Ga(this,m)))}batch(){return(0,v.qY)(this._delegate),new Tu(new v.PU(this._delegate,d=>(0,v.GL)(this._delegate,d)))}loadBundle(d){return(0,v.Pb)(this._delegate,d)}namedQuery(d){return(0,v.L$)(this._delegate,d).then(m=>m?new Gs(this,m):null)}}class Ss extends v.u7{constructor(d){super(),this.firestore=d}convertBytes(d){return new ze(new v.Jj(d))}convertReference(d){const m=this.convertDocumentKey(d,this.firestore._databaseId);return Uo.forKey(m,this.firestore,null)}}class Ga{constructor(d,m){this._firestore=d,this._delegate=m,this._userDataWriter=new Ss(d)}get(d){const m=Aa(d);return this._delegate.get(m).then(T=>new oa(this._firestore,new v.xU(this._firestore._delegate,this._userDataWriter,T._key,T._document,T.metadata,m.converter)))}set(d,m,T){const V=Aa(d);return T?(te("Transaction.set",T),this._delegate.set(V,m,T)):this._delegate.set(V,m),this}update(d,m,T,...V){const Y=Aa(d);return 2===arguments.length?this._delegate.update(Y,m):this._delegate.update(Y,m,T,...V),this}delete(d){const m=Aa(d);return this._delegate.delete(m),this}}class Tu{constructor(d){this._delegate=d}set(d,m,T){const V=Aa(d);return T?(te("WriteBatch.set",T),this._delegate.set(V,m,T)):this._delegate.set(V,m),this}update(d,m,T,...V){const Y=Aa(d);return 2===arguments.length?this._delegate.update(Y,m):this._delegate.update(Y,m,T,...V),this}delete(d){const m=Aa(d);return this._delegate.delete(m),this}commit(){return this._delegate.commit()}}class Vo{constructor(d,m,T){this._firestore=d,this._userDataWriter=m,this._delegate=T}fromFirestore(d,m){const T=new v.$q(this._firestore._delegate,this._userDataWriter,d._key,d._document,d.metadata,null);return this._delegate.fromFirestore(new Wa(this._firestore,T),m??{})}toFirestore(d,m){return m?this._delegate.toFirestore(d,m):this._delegate.toFirestore(d)}static getInstance(d,m){const T=Vo.INSTANCES;let V=T.get(d);V||(V=new WeakMap,T.set(d,V));let Y=V.get(m);return Y||(Y=new Vo(d,new Ss(d),m),V.set(m,Y)),Y}}Vo.INSTANCES=new WeakMap;class Uo{constructor(d,m){this.firestore=d,this._delegate=m,this._userDataWriter=new Ss(d)}static forPath(d,m,T){if(d.length%2!=0)throw new v.WA("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${d.canonicalString()} has ${d.length}`);return new Uo(m,new v.my(m._delegate,T,new v.Ky(d)))}static forKey(d,m,T){return new Uo(m,new v.my(m._delegate,T,d))}get id(){return this._delegate.id}get parent(){return new Da(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(d){try{return new Da(this.firestore,(0,v.hJ)(this._delegate,d))}catch(m){throw so(m,"collection()","DocumentReference.collection()")}}isEqual(d){return(d=(0,R.m9)(d))instanceof v.my&&(0,v.Eo)(this._delegate,d)}set(d,m){m=te("DocumentReference.set",m);try{return m?(0,v.pl)(this._delegate,d,m):(0,v.pl)(this._delegate,d)}catch(T){throw so(T,"setDoc()","DocumentReference.set()")}}update(d,m,...T){try{return 1===arguments.length?(0,v.r7)(this._delegate,d):(0,v.r7)(this._delegate,d,m,...T)}catch(V){throw so(V,"updateDoc()","DocumentReference.update()")}}delete(){return(0,v.oe)(this._delegate)}onSnapshot(...d){const m=ec(d),T=qu(d,V=>new oa(this.firestore,new v.xU(this.firestore._delegate,this._userDataWriter,V._key,V._document,V.metadata,this._delegate.converter)));return(0,v.cf)(this._delegate,m,T)}get(d){let m;return m="cache"===d?.source?(0,v.kl)(this._delegate):"server"===d?.source?(0,v.Xk)(this._delegate):(0,v.QT)(this._delegate),m.then(T=>new oa(this.firestore,new v.xU(this.firestore._delegate,this._userDataWriter,T._key,T._document,T.metadata,this._delegate.converter)))}withConverter(d){return new Uo(this.firestore,this._delegate.withConverter(d?Vo.getInstance(this.firestore,d):null))}}function so(N,d,m){return N.message=N.message.replace(d,m),N}function ec(N){for(const d of N)if("object"==typeof d&&!Ut(d))return d;return{}}function qu(N,d){var m,T;let V;return V=Ut(N[0])?N[0]:Ut(N[1])?N[1]:"function"==typeof N[0]?{next:N[0],error:N[1],complete:N[2]}:{next:N[1],error:N[2],complete:N[3]},{next:Y=>{V.next&&V.next(d(Y))},error:null===(m=V.error)||void 0===m?void 0:m.bind(V),complete:null===(T=V.complete)||void 0===T?void 0:T.bind(V)}}class oa{constructor(d,m){this._firestore=d,this._delegate=m}get ref(){return new Uo(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(d){return this._delegate.data(d)}get(d,m){return this._delegate.get(d,m)}isEqual(d){return(0,v.qK)(this._delegate,d._delegate)}}class Wa extends oa{data(d){const m=this._delegate.data(d);return this._delegate._converter||(0,v.K9)(void 0!==m,"Document in a QueryDocumentSnapshot should exist"),m}}class Gs{constructor(d,m){this.firestore=d,this._delegate=m,this._userDataWriter=new Ss(d)}where(d,m,T){try{return new Gs(this.firestore,(0,v.IO)(this._delegate,(0,v.ar)(d,m,T)))}catch(V){throw so(V,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(d,m){try{return new Gs(this.firestore,(0,v.IO)(this._delegate,(0,v.Xo)(d,m)))}catch(T){throw so(T,/(orderBy|where)\(\)/,"Query.$1()")}}limit(d){try{return new Gs(this.firestore,(0,v.IO)(this._delegate,(0,v.b9)(d)))}catch(m){throw so(m,"limit()","Query.limit()")}}limitToLast(d){try{return new Gs(this.firestore,(0,v.IO)(this._delegate,(0,v.vh)(d)))}catch(m){throw so(m,"limitToLast()","Query.limitToLast()")}}startAt(...d){try{return new Gs(this.firestore,(0,v.IO)(this._delegate,(0,v.e0)(...d)))}catch(m){throw so(m,"startAt()","Query.startAt()")}}startAfter(...d){try{return new Gs(this.firestore,(0,v.IO)(this._delegate,(0,v.TQ)(...d)))}catch(m){throw so(m,"startAfter()","Query.startAfter()")}}endBefore(...d){try{return new Gs(this.firestore,(0,v.IO)(this._delegate,(0,v.Lx)(...d)))}catch(m){throw so(m,"endBefore()","Query.endBefore()")}}endAt(...d){try{return new Gs(this.firestore,(0,v.IO)(this._delegate,(0,v.Wu)(...d)))}catch(m){throw so(m,"endAt()","Query.endAt()")}}isEqual(d){return(0,v.iE)(this._delegate,d._delegate)}get(d){let m;return m="cache"===d?.source?(0,v.UQ)(this._delegate):"server"===d?.source?(0,v.zN)(this._delegate):(0,v.PL)(this._delegate),m.then(T=>new cu(this.firestore,new v.W(this.firestore._delegate,this._userDataWriter,this._delegate,T._snapshot)))}onSnapshot(...d){const m=ec(d),T=qu(d,V=>new cu(this.firestore,new v.W(this.firestore._delegate,this._userDataWriter,this._delegate,V._snapshot)));return(0,v.cf)(this._delegate,m,T)}withConverter(d){return new Gs(this.firestore,this._delegate.withConverter(d?Vo.getInstance(this.firestore,d):null))}}class lu{constructor(d,m){this._firestore=d,this._delegate=m}get type(){return this._delegate.type}get doc(){return new Wa(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class cu{constructor(d,m){this._firestore=d,this._delegate=m}get query(){return new Gs(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(d=>new Wa(this._firestore,d))}docChanges(d){return this._delegate.docChanges(d).map(m=>new lu(this._firestore,m))}forEach(d,m){this._delegate.forEach(T=>{d.call(m,new Wa(this._firestore,T))})}isEqual(d){return(0,v.qK)(this._delegate,d._delegate)}}class Da extends Gs{constructor(d,m){super(d,m),this.firestore=d,this._delegate=m}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const d=this._delegate.parent;return d?new Uo(this.firestore,d):null}doc(d){try{return new Uo(this.firestore,void 0===d?(0,v.JU)(this._delegate):(0,v.JU)(this._delegate,d))}catch(m){throw so(m,"doc()","CollectionReference.doc()")}}add(d){return(0,v.ET)(this._delegate,d).then(m=>new Uo(this.firestore,m))}isEqual(d){return(0,v.Eo)(this._delegate,d._delegate)}withConverter(d){return new Da(this.firestore,this._delegate.withConverter(d?Vo.getInstance(this.firestore,d):null))}}function Aa(N){return(0,v.Cf)(N,v.my)}class Ji{constructor(...d){this._delegate=new v.Lz(...d)}static documentId(){return new Ji(v.Xb.keyField().canonicalString())}isEqual(d){return(d=(0,R.m9)(d))instanceof v.Lz&&this._delegate._internalPath.isEqual(d._internalPath)}}class fa{constructor(d){this._delegate=d}static serverTimestamp(){const d=(0,v.Bt)();return d._methodName="FieldValue.serverTimestamp",new fa(d)}static delete(){const d=(0,v.AK)();return d._methodName="FieldValue.delete",new fa(d)}static arrayUnion(...d){const m=(0,v.vr)(...d);return m._methodName="FieldValue.arrayUnion",new fa(m)}static arrayRemove(...d){const m=(0,v.Ab)(...d);return m._methodName="FieldValue.arrayRemove",new fa(m)}static increment(d){const m=(0,v.nP)(d);return m._methodName="FieldValue.increment",new fa(m)}isEqual(d){return this._delegate.isEqual(d._delegate)}}const Do={Firestore:Mn,GeoPoint:v.F8,Timestamp:v.EK,Blob:ze,Transaction:Ga,WriteBatch:Tu,DocumentReference:Uo,DocumentSnapshot:oa,Query:Gs,QueryDocumentSnapshot:Wa,QuerySnapshot:cu,CollectionReference:Da,FieldPath:Ji,FieldValue:fa,setLogLevel:function ri(N){(0,v.Ub)(N)},CACHE_SIZE_UNLIMITED:v.IX};!function Ai(N){(function Du(N,d){N.INTERNAL.registerComponent(new I.wA("firestore-compat",m=>{const T=m.getProvider("app-compat").getImmediate(),V=m.getProvider("firestore").getImmediate();return d(T,V)},"PUBLIC").setServiceProps(Object.assign({},Do)))})(N,(d,m)=>new Mn(d,m,new Di)),N.registerVersion("@firebase/firestore-compat","0.3.28")}(Ta.Z);var tc=U(7142);function hi(N,d){return function Hi(N,d=Gu.z){return new di.y(m=>{let T;return null!=d?d.schedule(()=>{T=N.onSnapshot({includeMetadataChanges:!0},m)}):T=N.onSnapshot({includeMetadataChanges:!0},m),()=>{T?.()}})}(N,d)}function qa(N,d){return hi(N,d).pipe((0,Pi.U)(m=>({payload:m,type:"query"})))}class Bo{ref;afs;constructor(d,m){this.ref=d,this.afs=m}set(d,m){return this.ref.set(d,m)}update(d){return this.ref.update(d)}delete(){return this.ref.delete()}collection(d,m){const T=this.ref.collection(d),{ref:V,query:Y}=Oa(T,m);return new Ao(V,Y,this.afs)}snapshotChanges(){return function jc(N,d){return hi(N,d).pipe((0,ms.O)(void 0),au(),(0,Pi.U)(m=>{const[T,V]=m;return V.exists?T?.exists?{payload:V,type:"modified"}:{payload:V,type:"added"}:{payload:V,type:"removed"}}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(zr.iC)}valueChanges(d={}){return this.snapshotChanges().pipe((0,Pi.U)(({payload:m})=>d.idField?{...m.data(),[d.idField]:m.id}:m.data()))}get(d){return(0,gs.D)(this.ref.get(d)).pipe(zr.iC)}}function Au(N,d){return qa(N,d).pipe((0,ms.O)(void 0),au(),(0,Pi.U)(m=>{const[T,V]=m,Y=V.payload.docChanges(),ue=Y.map(me=>({type:me.type,payload:me}));return T&&JSON.stringify(T.payload.metadata)!==JSON.stringify(V.payload.metadata)&&V.payload.docs.forEach((me,Se)=>{const Qe=Y.find(Mt=>Mt.doc.ref.isEqual(me.ref)),At=T?.payload.docs.find(Mt=>Mt.ref.isEqual(me.ref));Qe&&JSON.stringify(Qe.doc.metadata)===JSON.stringify(me.metadata)||!Qe&&At&&JSON.stringify(At.metadata)===JSON.stringify(me.metadata)||ue.push({type:"modified",payload:{oldIndex:Se,newIndex:Se,type:"modified",doc:me}})}),ue}))}function Ku(N,d,m){return Au(N,m).pipe((0,Wu.R)((T,V)=>function Xi(N,d,m){return d.forEach(T=>{m.indexOf(T.type)>-1&&(N=function jo(N,d){switch(d.type){case"added":if(!N[d.newIndex]||!N[d.newIndex].doc.ref.isEqual(d.doc.ref))return nc(N,d.newIndex,0,d);break;case"modified":if(null==N[d.oldIndex]||N[d.oldIndex].doc.ref.isEqual(d.doc.ref)){if(d.oldIndex!==d.newIndex){const m=N.slice();return m.splice(d.oldIndex,1),m.splice(d.newIndex,0,d),m}return nc(N,d.newIndex,1,d)}break;case"removed":if(N[d.oldIndex]&&N[d.oldIndex].doc.ref.isEqual(d.doc.ref))return nc(N,d.oldIndex,1)}return N}(N,T))}),N}(T,V.map(Y=>Y.payload),d),[]),(0,fo.x)(),(0,Pi.U)(T=>T.map(V=>({type:V.type,payload:V}))))}function nc(N,d,m,...T){const V=N.slice();return V.splice(d,m,...T),V}function zi(N){return(!N||0===N.length)&&(N=["added","removed","modified"]),N}class Ao{ref;query;afs;constructor(d,m,T){this.ref=d,this.query=m,this.afs=T}stateChanges(d){let m=Au(this.query,this.afs.schedulers.outsideAngular);return d&&d.length>0&&(m=m.pipe((0,Pi.U)(T=>T.filter(V=>d.indexOf(V.type)>-1)))),m.pipe((0,ms.O)(void 0),au(),(0,Cs.h)(([T,V])=>V.length>0||!T),(0,Pi.U)(([,T])=>T),zr.iC)}auditTrail(d){return this.stateChanges(d).pipe((0,Wu.R)((m,T)=>[...m,...T],[]))}snapshotChanges(d){const m=zi(d);return Ku(this.query,m,this.afs.schedulers.outsideAngular).pipe(zr.iC)}valueChanges(d={}){return qa(this.query,this.afs.schedulers.outsideAngular).pipe((0,Pi.U)(m=>m.payload.docs.map(T=>d.idField?{...T.data(),[d.idField]:T.id}:T.data())),zr.iC)}get(d){return(0,gs.D)(this.query.get(d)).pipe(zr.iC)}add(d){return this.ref.add(d)}doc(d){return new Bo(this.ref.doc(d),this.afs)}}class rc{query;afs;constructor(d,m){this.query=d,this.afs=m}stateChanges(d){return d&&0!==d.length?Au(this.query,this.afs.schedulers.outsideAngular).pipe((0,Pi.U)(m=>m.filter(T=>d.indexOf(T.type)>-1)),(0,Cs.h)(m=>m.length>0),zr.iC):Au(this.query,this.afs.schedulers.outsideAngular).pipe(zr.iC)}auditTrail(d){return this.stateChanges(d).pipe((0,Wu.R)((m,T)=>[...m,...T],[]))}snapshotChanges(d){const m=zi(d);return Ku(this.query,m,this.afs.schedulers.outsideAngular).pipe(zr.iC)}valueChanges(d={}){return qa(this.query,this.afs.schedulers.outsideAngular).pipe((0,Pi.U)(T=>T.payload.docs.map(V=>d.idField?{[d.idField]:V.id,...V.data()}:V.data())),zr.iC)}get(d){return(0,gs.D)(this.query.get(d)).pipe(zr.iC)}}const Ka=new Z.OlP("angularfire2.enableFirestorePersistence"),Na=new Z.OlP("angularfire2.firestore.persistenceSettings"),Pd=new Z.OlP("angularfire2.firestore.settings"),_s=new Z.OlP("angularfire2.firestore.use-emulator");function Oa(N,d=(m=>m)){return{query:d(N),ref:N}}let du=(()=>{class N{schedulers;firestore;persistenceEnabled$;constructor(m,T,V,Y,ue,me,Se,Qe,At,Mt,en,bn,sn,St,Sn,wn,Zr){this.schedulers=Se;const nr=(0,io.on)(m,me,T),Qr=At;Mt&&(0,Ti.nw)(nr,me,en,sn,St,Sn,bn,wn),[this.firestore,this.persistenceEnabled$]=(0,io.cc)(`${nr.name}.firestore`,"AngularFirestore",nr.name,()=>{const Ki=me.runOutsideAngular(()=>nr.firestore());if(Y&&Ki.settings(Y),Qr&&Ki.useEmulator(...Qr),V&&!(0,ps.PM)(ue)){const Ws=()=>{try{return(0,gs.D)(Ki.enablePersistence(Qe||void 0).then(()=>!0,()=>!1))}catch(es){return typeof console<"u"&&console.warn(es),(0,to.of)(!1)}};return[Ki,me.runOutsideAngular(Ws)]}return[Ki,(0,to.of)(!1)]},[Y,Qr,V])}collection(m,T){let V;V="string"==typeof m?this.firestore.collection(m):m;const{ref:Y,query:ue}=Oa(V,T),me=this.schedulers.ngZone.run(()=>Y);return new Ao(me,ue,this)}collectionGroup(m,T){const V=T||(ue=>ue),Y=this.firestore.collectionGroup(m);return new rc(V(Y),this)}doc(m){let T;T="string"==typeof m?this.firestore.doc(m):m;const V=this.schedulers.ngZone.run(()=>T);return new Bo(V,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(T){return new(T||N)(Z.LFG(io.Dh),Z.LFG(io.xv,8),Z.LFG(Ka,8),Z.LFG(Pd,8),Z.LFG(Z.Lbi),Z.LFG(Z.R0b),Z.LFG(zr.HU),Z.LFG(Na,8),Z.LFG(_s,8),Z.LFG(Ti.zQ,8),Z.LFG(Ti.Qv,8),Z.LFG(Ti.L6,8),Z.LFG(Ti._Q,8),Z.LFG(Ti.rT,8),Z.LFG(Ti.lh,8),Z.LFG(Ti.f7,8),Z.LFG(zr.Rf,8))};static \u0275prov=Z.Yz7({token:N,factory:N.\u0275fac,providedIn:"any"})}return N})(),aa=(()=>{class N{constructor(){tc.Z.registerVersion("angularfire",zr.q4.full,"fst-compat")}static enablePersistence(m){return{ngModule:N,providers:[{provide:Ka,useValue:!0},{provide:Na,useValue:m}]}}static \u0275fac=function(T){return new(T||N)};static \u0275mod=Z.oAB({type:N});static \u0275inj=Z.cJS({providers:[du]})}return N})();var $o=U(721),pa=U(7350);const ga={apiKey:"AIzaSyAQcbxYDaaTa5gQya6GglbXHSrhD_22-ig",authDomain:"clinica-online-laboiv.firebaseapp.com",projectId:"clinica-online-laboiv",storageBucket:"clinica-online-laboiv.appspot.com",messagingSenderId:"236997059569",appId:"1:236997059569:web:ef51fe1275453ff2155a50"};let ic=(()=>{class N{static#e=this.\u0275fac=function(T){return new(T||N)};static#t=this.\u0275mod=Z.oAB({type:N,bootstrap:[Ri]});static#n=this.\u0275inj=Z.cJS({imports:[f.b2,As,Ar.u5,ps.ez,jr.ef,C,Il,io.hO.initializeApp(ga),aa,zu.TE,(0,$o.hX)(()=>(0,$o.ZF)(ga)),(0,pa.Cm)(()=>(0,pa.ad)())]})}return N})();f.q6().bootstrapModule(ic).catch(N=>console.error(N))},5619:(Nt,Ve,U)=>{U.d(Ve,{X:()=>Z});var f=U(8645);class Z extends f.x{constructor(ye){super(),this._value=ye}get value(){return this.getValue()}_subscribe(ye){const ge=super._subscribe(ye);return!ge.closed&&ye.next(this._value),ge}getValue(){const{hasError:ye,thrownError:ge,_value:we}=this;if(ye)throw ge;return this._throwIfClosed(),we}next(ye){super.next(this._value=ye)}}},5592:(Nt,Ve,U)=>{U.d(Ve,{y:()=>_e});var f=U(305),Z=U(7394),q=U(4850),ye=U(8407),ge=U(2653),we=U(4674),De=U(1441);let _e=(()=>{class ve{constructor(We){We&&(this._subscribe=We)}lift(We){const at=new ve;return at.source=this,at.operator=We,at}subscribe(We,at,it){const mt=function se(ve){return ve&&ve instanceof f.Lv||function re(ve){return ve&&(0,we.m)(ve.next)&&(0,we.m)(ve.error)&&(0,we.m)(ve.complete)}(ve)&&(0,Z.Nn)(ve)}(We)?We:new f.Hp(We,at,it);return(0,De.x)(()=>{const{operator:nt,source:Lt}=this;mt.add(nt?nt.call(mt,Lt):Lt?this._subscribe(mt):this._trySubscribe(mt))}),mt}_trySubscribe(We){try{return this._subscribe(We)}catch(at){We.error(at)}}forEach(We,at){return new(at=Ne(at))((it,mt)=>{const nt=new f.Hp({next:Lt=>{try{We(Lt)}catch(ot){mt(ot),nt.unsubscribe()}},error:mt,complete:it});this.subscribe(nt)})}_subscribe(We){var at;return null===(at=this.source)||void 0===at?void 0:at.subscribe(We)}[q.L](){return this}pipe(...We){return(0,ye.U)(We)(this)}toPromise(We){return new(We=Ne(We))((at,it)=>{let mt;this.subscribe(nt=>mt=nt,nt=>it(nt),()=>at(mt))})}}return ve.create=Ye=>new ve(Ye),ve})();function Ne(ve){var Ye;return null!==(Ye=ve??ge.config.Promise)&&void 0!==Ye?Ye:Promise}},8645:(Nt,Ve,U)=>{U.d(Ve,{x:()=>De});var f=U(5592),Z=U(7394);const ye=(0,U(2306).d)(Ne=>function(){Ne(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ge=U(9039),we=U(1441);let De=(()=>{class Ne extends f.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(se){const ve=new _e(this,this);return ve.operator=se,ve}_throwIfClosed(){if(this.closed)throw new ye}next(se){(0,we.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const ve of this.currentObservers)ve.next(se)}})}error(se){(0,we.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=se;const{observers:ve}=this;for(;ve.length;)ve.shift().error(se)}})}complete(){(0,we.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:se}=this;for(;se.length;)se.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var se;return(null===(se=this.observers)||void 0===se?void 0:se.length)>0}_trySubscribe(se){return this._throwIfClosed(),super._trySubscribe(se)}_subscribe(se){return this._throwIfClosed(),this._checkFinalizedStatuses(se),this._innerSubscribe(se)}_innerSubscribe(se){const{hasError:ve,isStopped:Ye,observers:We}=this;return ve||Ye?Z.Lc:(this.currentObservers=null,We.push(se),new Z.w0(()=>{this.currentObservers=null,(0,ge.P)(We,se)}))}_checkFinalizedStatuses(se){const{hasError:ve,thrownError:Ye,isStopped:We}=this;ve?se.error(Ye):We&&se.complete()}asObservable(){const se=new f.y;return se.source=this,se}}return Ne.create=(re,se)=>new _e(re,se),Ne})();class _e extends De{constructor(re,se){super(),this.destination=re,this.source=se}next(re){var se,ve;null===(ve=null===(se=this.destination)||void 0===se?void 0:se.next)||void 0===ve||ve.call(se,re)}error(re){var se,ve;null===(ve=null===(se=this.destination)||void 0===se?void 0:se.error)||void 0===ve||ve.call(se,re)}complete(){var re,se;null===(se=null===(re=this.destination)||void 0===re?void 0:re.complete)||void 0===se||se.call(re)}_subscribe(re){var se,ve;return null!==(ve=null===(se=this.source)||void 0===se?void 0:se.subscribe(re))&&void 0!==ve?ve:Z.Lc}}},305:(Nt,Ve,U)=>{U.d(Ve,{Hp:()=>it,Lv:()=>ve});var f=U(4674),Z=U(7394),q=U(2653),ye=U(3894),ge=U(2420);const we=Ne("C",void 0,void 0);function Ne(ce,Ue,Ae){return{kind:ce,value:Ue,error:Ae}}var re=U(7599),se=U(1441);class ve extends Z.w0{constructor(Ue){super(),this.isStopped=!1,Ue?(this.destination=Ue,(0,Z.Nn)(Ue)&&Ue.add(this)):this.destination=ot}static create(Ue,Ae,Ie){return new it(Ue,Ae,Ie)}next(Ue){this.isStopped?Lt(function _e(ce){return Ne("N",ce,void 0)}(Ue),this):this._next(Ue)}error(Ue){this.isStopped?Lt(function De(ce){return Ne("E",void 0,ce)}(Ue),this):(this.isStopped=!0,this._error(Ue))}complete(){this.isStopped?Lt(we,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ue){this.destination.next(Ue)}_error(Ue){try{this.destination.error(Ue)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Ye=Function.prototype.bind;function We(ce,Ue){return Ye.call(ce,Ue)}class at{constructor(Ue){this.partialObserver=Ue}next(Ue){const{partialObserver:Ae}=this;if(Ae.next)try{Ae.next(Ue)}catch(Ie){mt(Ie)}}error(Ue){const{partialObserver:Ae}=this;if(Ae.error)try{Ae.error(Ue)}catch(Ie){mt(Ie)}else mt(Ue)}complete(){const{partialObserver:Ue}=this;if(Ue.complete)try{Ue.complete()}catch(Ae){mt(Ae)}}}class it extends ve{constructor(Ue,Ae,Ie){let et;if(super(),(0,f.m)(Ue)||!Ue)et={next:Ue??void 0,error:Ae??void 0,complete:Ie??void 0};else{let Fe;this&&q.config.useDeprecatedNextContext?(Fe=Object.create(Ue),Fe.unsubscribe=()=>this.unsubscribe(),et={next:Ue.next&&We(Ue.next,Fe),error:Ue.error&&We(Ue.error,Fe),complete:Ue.complete&&We(Ue.complete,Fe)}):et=Ue}this.destination=new at(et)}}function mt(ce){q.config.useDeprecatedSynchronousErrorHandling?(0,se.O)(ce):(0,ye.h)(ce)}function Lt(ce,Ue){const{onStoppedNotification:Ae}=q.config;Ae&&re.z.setTimeout(()=>Ae(ce,Ue))}const ot={closed:!0,next:ge.Z,error:function nt(ce){throw ce},complete:ge.Z}},7394:(Nt,Ve,U)=>{U.d(Ve,{Lc:()=>we,w0:()=>ge,Nn:()=>De});var f=U(4674);const q=(0,U(2306).d)(Ne=>function(se){Ne(this),this.message=se?`${se.length} errors occurred during unsubscription:\n${se.map((ve,Ye)=>`${Ye+1}) ${ve.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=se});var ye=U(9039);class ge{constructor(re){this.initialTeardown=re,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let re;if(!this.closed){this.closed=!0;const{_parentage:se}=this;if(se)if(this._parentage=null,Array.isArray(se))for(const We of se)We.remove(this);else se.remove(this);const{initialTeardown:ve}=this;if((0,f.m)(ve))try{ve()}catch(We){re=We instanceof q?We.errors:[We]}const{_finalizers:Ye}=this;if(Ye){this._finalizers=null;for(const We of Ye)try{_e(We)}catch(at){re=re??[],at instanceof q?re=[...re,...at.errors]:re.push(at)}}if(re)throw new q(re)}}add(re){var se;if(re&&re!==this)if(this.closed)_e(re);else{if(re instanceof ge){if(re.closed||re._hasParent(this))return;re._addParent(this)}(this._finalizers=null!==(se=this._finalizers)&&void 0!==se?se:[]).push(re)}}_hasParent(re){const{_parentage:se}=this;return se===re||Array.isArray(se)&&se.includes(re)}_addParent(re){const{_parentage:se}=this;this._parentage=Array.isArray(se)?(se.push(re),se):se?[se,re]:re}_removeParent(re){const{_parentage:se}=this;se===re?this._parentage=null:Array.isArray(se)&&(0,ye.P)(se,re)}remove(re){const{_finalizers:se}=this;se&&(0,ye.P)(se,re),re instanceof ge&&re._removeParent(this)}}ge.EMPTY=(()=>{const Ne=new ge;return Ne.closed=!0,Ne})();const we=ge.EMPTY;function De(Ne){return Ne instanceof ge||Ne&&"closed"in Ne&&(0,f.m)(Ne.remove)&&(0,f.m)(Ne.add)&&(0,f.m)(Ne.unsubscribe)}function _e(Ne){(0,f.m)(Ne)?Ne():Ne.unsubscribe()}},2653:(Nt,Ve,U)=>{U.d(Ve,{config:()=>f});const f={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},4036:(Nt,Ve,U)=>{U.d(Ve,{z:()=>q});var f=U(6973),Z=U(305);function q(ye,ge){const we="object"==typeof ge;return new Promise((De,_e)=>{const Ne=new Z.Hp({next:re=>{De(re),Ne.unsubscribe()},error:_e,complete:()=>{we?De(ge.defaultValue):_e(new f.K)}});ye.subscribe(Ne)})}},5211:(Nt,Ve,U)=>{U.d(Ve,{z:()=>ge});var f=U(7537),q=U(4564),ye=U(2459);function ge(...we){return function Z(){return(0,f.J)(1)}()((0,ye.D)(we,(0,q.yG)(we)))}},6232:(Nt,Ve,U)=>{U.d(Ve,{E:()=>Z});const Z=new(U(5592).y)(ge=>ge.complete())},2459:(Nt,Ve,U)=>{U.d(Ve,{D:()=>Ue});var f=U(4829),Z=U(3093),q=U(5137),we=U(5592),_e=U(4971),Ne=U(4674),re=U(7103);function ve(Ae,Ie){if(!Ae)throw new Error("Iterable cannot be null");return new we.y(et=>{(0,re.f)(et,Ie,()=>{const Fe=Ae[Symbol.asyncIterator]();(0,re.f)(et,Ie,()=>{Fe.next().then(xe=>{xe.done?et.complete():et.next(xe.value)})},0,!0)})})}var Ye=U(8382),We=U(4026),at=U(4266),it=U(3664),mt=U(5726),nt=U(9853),Lt=U(541);function Ue(Ae,Ie){return Ie?function ce(Ae,Ie){if(null!=Ae){if((0,Ye.c)(Ae))return function ye(Ae,Ie){return(0,f.Xf)(Ae).pipe((0,q.R)(Ie),(0,Z.Q)(Ie))}(Ae,Ie);if((0,at.z)(Ae))return function De(Ae,Ie){return new we.y(et=>{let Fe=0;return Ie.schedule(function(){Fe===Ae.length?et.complete():(et.next(Ae[Fe++]),et.closed||this.schedule())})})}(Ae,Ie);if((0,We.t)(Ae))return function ge(Ae,Ie){return(0,f.Xf)(Ae).pipe((0,q.R)(Ie),(0,Z.Q)(Ie))}(Ae,Ie);if((0,mt.D)(Ae))return ve(Ae,Ie);if((0,it.T)(Ae))return function se(Ae,Ie){return new we.y(et=>{let Fe;return(0,re.f)(et,Ie,()=>{Fe=Ae[_e.h](),(0,re.f)(et,Ie,()=>{let xe,Tt;try{({value:xe,done:Tt}=Fe.next())}catch(zt){return void et.error(zt)}Tt?et.complete():et.next(xe)},0,!0)}),()=>(0,Ne.m)(Fe?.return)&&Fe.return()})}(Ae,Ie);if((0,Lt.L)(Ae))return function ot(Ae,Ie){return ve((0,Lt.Q)(Ae),Ie)}(Ae,Ie)}throw(0,nt.z)(Ae)}(Ae,Ie):(0,f.Xf)(Ae)}},4829:(Nt,Ve,U)=>{U.d(Ve,{Xf:()=>Ye});var f=U(7582),Z=U(4266),q=U(4026),ye=U(5592),ge=U(8382),we=U(5726),De=U(9853),_e=U(3664),Ne=U(541),re=U(4674),se=U(3894),ve=U(4850);function Ye(ce){if(ce instanceof ye.y)return ce;if(null!=ce){if((0,ge.c)(ce))return function We(ce){return new ye.y(Ue=>{const Ae=ce[ve.L]();if((0,re.m)(Ae.subscribe))return Ae.subscribe(Ue);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(ce);if((0,Z.z)(ce))return function at(ce){return new ye.y(Ue=>{for(let Ae=0;Ae<ce.length&&!Ue.closed;Ae++)Ue.next(ce[Ae]);Ue.complete()})}(ce);if((0,q.t)(ce))return function it(ce){return new ye.y(Ue=>{ce.then(Ae=>{Ue.closed||(Ue.next(Ae),Ue.complete())},Ae=>Ue.error(Ae)).then(null,se.h)})}(ce);if((0,we.D)(ce))return nt(ce);if((0,_e.T)(ce))return function mt(ce){return new ye.y(Ue=>{for(const Ae of ce)if(Ue.next(Ae),Ue.closed)return;Ue.complete()})}(ce);if((0,Ne.L)(ce))return function Lt(ce){return nt((0,Ne.Q)(ce))}(ce)}throw(0,De.z)(ce)}function nt(ce){return new ye.y(Ue=>{(function ot(ce,Ue){var Ae,Ie,et,Fe;return(0,f.mG)(this,void 0,void 0,function*(){try{for(Ae=(0,f.KL)(ce);!(Ie=yield Ae.next()).done;)if(Ue.next(Ie.value),Ue.closed)return}catch(xe){et={error:xe}}finally{try{Ie&&!Ie.done&&(Fe=Ae.return)&&(yield Fe.call(Ae))}finally{if(et)throw et.error}}Ue.complete()})})(ce,Ue).catch(Ae=>Ue.error(Ae))})}},3019:(Nt,Ve,U)=>{U.d(Ve,{T:()=>we});var f=U(7537),Z=U(4829),q=U(6232),ye=U(4564),ge=U(2459);function we(...De){const _e=(0,ye.yG)(De),Ne=(0,ye._6)(De,1/0),re=De;return re.length?1===re.length?(0,Z.Xf)(re[0]):(0,f.J)(Ne)((0,ge.D)(re,_e)):q.E}},2096:(Nt,Ve,U)=>{U.d(Ve,{of:()=>q});var f=U(4564),Z=U(2459);function q(...ye){const ge=(0,f.yG)(ye);return(0,Z.D)(ye,ge)}},8251:(Nt,Ve,U)=>{U.d(Ve,{x:()=>Z});var f=U(305);function Z(ye,ge,we,De,_e){return new q(ye,ge,we,De,_e)}class q extends f.Lv{constructor(ge,we,De,_e,Ne,re){super(ge),this.onFinalize=Ne,this.shouldUnsubscribe=re,this._next=we?function(se){try{we(se)}catch(ve){ge.error(ve)}}:super._next,this._error=_e?function(se){try{_e(se)}catch(ve){ge.error(ve)}finally{this.unsubscribe()}}:super._error,this._complete=De?function(){try{De()}catch(se){ge.error(se)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ge;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:we}=this;super.unsubscribe(),!we&&(null===(ge=this.onFinalize)||void 0===ge||ge.call(this))}}}},6328:(Nt,Ve,U)=>{U.d(Ve,{b:()=>q});var f=U(1631),Z=U(4674);function q(ye,ge){return(0,Z.m)(ge)?(0,f.z)(ye,ge,1):(0,f.z)(ye,1)}},3572:(Nt,Ve,U)=>{U.d(Ve,{d:()=>q});var f=U(9360),Z=U(8251);function q(ye){return(0,f.e)((ge,we)=>{let De=!1;ge.subscribe((0,Z.x)(we,_e=>{De=!0,we.next(_e)},()=>{De||we.next(ye),we.complete()}))})}},3997:(Nt,Ve,U)=>{U.d(Ve,{x:()=>ye});var f=U(2737),Z=U(9360),q=U(8251);function ye(we,De=f.y){return we=we??ge,(0,Z.e)((_e,Ne)=>{let re,se=!0;_e.subscribe((0,q.x)(Ne,ve=>{const Ye=De(ve);(se||!we(re,Ye))&&(se=!1,re=Ye,Ne.next(ve))}))})}function ge(we,De){return we===De}},2181:(Nt,Ve,U)=>{U.d(Ve,{h:()=>q});var f=U(9360),Z=U(8251);function q(ye,ge){return(0,f.e)((we,De)=>{let _e=0;we.subscribe((0,Z.x)(De,Ne=>ye.call(ge,Ne,_e++)&&De.next(Ne)))})}},4716:(Nt,Ve,U)=>{U.d(Ve,{x:()=>Z});var f=U(9360);function Z(q){return(0,f.e)((ye,ge)=>{try{ye.subscribe(ge)}finally{ge.add(q)}})}},1374:(Nt,Ve,U)=>{U.d(Ve,{P:()=>De});var f=U(6973),Z=U(2181),q=U(8180),ye=U(3572),ge=U(3026),we=U(2737);function De(_e,Ne){const re=arguments.length>=2;return se=>se.pipe(_e?(0,Z.h)((ve,Ye)=>_e(ve,Ye,se)):we.y,(0,q.q)(1),re?(0,ye.d)(Ne):(0,ge.T)(()=>new f.K))}},7398:(Nt,Ve,U)=>{U.d(Ve,{U:()=>q});var f=U(9360),Z=U(8251);function q(ye,ge){return(0,f.e)((we,De)=>{let _e=0;we.subscribe((0,Z.x)(De,Ne=>{De.next(ye.call(ge,Ne,_e++))}))})}},7537:(Nt,Ve,U)=>{U.d(Ve,{J:()=>q});var f=U(1631),Z=U(2737);function q(ye=1/0){return(0,f.z)(Z.y,ye)}},1631:(Nt,Ve,U)=>{U.d(Ve,{z:()=>_e});var f=U(7398),Z=U(4829),q=U(9360),ye=U(7103),ge=U(8251),De=U(4674);function _e(Ne,re,se=1/0){return(0,De.m)(re)?_e((ve,Ye)=>(0,f.U)((We,at)=>re(ve,We,Ye,at))((0,Z.Xf)(Ne(ve,Ye))),se):("number"==typeof re&&(se=re),(0,q.e)((ve,Ye)=>function we(Ne,re,se,ve,Ye,We,at,it){const mt=[];let nt=0,Lt=0,ot=!1;const ce=()=>{ot&&!mt.length&&!nt&&re.complete()},Ue=Ie=>nt<ve?Ae(Ie):mt.push(Ie),Ae=Ie=>{We&&re.next(Ie),nt++;let et=!1;(0,Z.Xf)(se(Ie,Lt++)).subscribe((0,ge.x)(re,Fe=>{Ye?.(Fe),We?Ue(Fe):re.next(Fe)},()=>{et=!0},void 0,()=>{if(et)try{for(nt--;mt.length&&nt<ve;){const Fe=mt.shift();at?(0,ye.f)(re,at,()=>Ae(Fe)):Ae(Fe)}ce()}catch(Fe){re.error(Fe)}}))};return Ne.subscribe((0,ge.x)(re,Ue,()=>{ot=!0,ce()})),()=>{it?.()}}(ve,Ye,Ne,se)))}},3093:(Nt,Ve,U)=>{U.d(Ve,{Q:()=>ye});var f=U(7103),Z=U(9360),q=U(8251);function ye(ge,we=0){return(0,Z.e)((De,_e)=>{De.subscribe((0,q.x)(_e,Ne=>(0,f.f)(_e,ge,()=>_e.next(Ne),we),()=>(0,f.f)(_e,ge,()=>_e.complete(),we),Ne=>(0,f.f)(_e,ge,()=>_e.error(Ne),we)))})}},6699:(Nt,Ve,U)=>{U.d(Ve,{R:()=>ye});var f=U(9360),Z=U(8251);function ye(ge,we){return(0,f.e)(function q(ge,we,De,_e,Ne){return(re,se)=>{let ve=De,Ye=we,We=0;re.subscribe((0,Z.x)(se,at=>{const it=We++;Ye=ve?ge(Ye,at,it):(ve=!0,at),_e&&se.next(Ye)},Ne&&(()=>{ve&&se.next(Ye),se.complete()})))}}(ge,we,arguments.length>=2,!0))}},3020:(Nt,Ve,U)=>{U.d(Ve,{B:()=>ge});var f=U(4829),Z=U(8645),q=U(305),ye=U(9360);function ge(De={}){const{connector:_e=(()=>new Z.x),resetOnError:Ne=!0,resetOnComplete:re=!0,resetOnRefCountZero:se=!0}=De;return ve=>{let Ye,We,at,it=0,mt=!1,nt=!1;const Lt=()=>{We?.unsubscribe(),We=void 0},ot=()=>{Lt(),Ye=at=void 0,mt=nt=!1},ce=()=>{const Ue=Ye;ot(),Ue?.unsubscribe()};return(0,ye.e)((Ue,Ae)=>{it++,!nt&&!mt&&Lt();const Ie=at=at??_e();Ae.add(()=>{it--,0===it&&!nt&&!mt&&(We=we(ce,se))}),Ie.subscribe(Ae),!Ye&&it>0&&(Ye=new q.Hp({next:et=>Ie.next(et),error:et=>{nt=!0,Lt(),We=we(ot,Ne,et),Ie.error(et)},complete:()=>{mt=!0,Lt(),We=we(ot,re),Ie.complete()}}),(0,f.Xf)(Ue).subscribe(Ye))})(ve)}}function we(De,_e,...Ne){if(!0===_e)return void De();if(!1===_e)return;const re=new q.Hp({next:()=>{re.unsubscribe(),De()}});return(0,f.Xf)(_e(...Ne)).subscribe(re)}},7921:(Nt,Ve,U)=>{U.d(Ve,{O:()=>ye});var f=U(5211),Z=U(4564),q=U(9360);function ye(...ge){const we=(0,Z.yG)(ge);return(0,q.e)((De,_e)=>{(we?(0,f.z)(ge,De,we):(0,f.z)(ge,De)).subscribe(_e)})}},5137:(Nt,Ve,U)=>{U.d(Ve,{R:()=>Z});var f=U(9360);function Z(q,ye=0){return(0,f.e)((ge,we)=>{we.add(q.schedule(()=>ge.subscribe(we),ye))})}},4664:(Nt,Ve,U)=>{U.d(Ve,{w:()=>ye});var f=U(4829),Z=U(9360),q=U(8251);function ye(ge,we){return(0,Z.e)((De,_e)=>{let Ne=null,re=0,se=!1;const ve=()=>se&&!Ne&&_e.complete();De.subscribe((0,q.x)(_e,Ye=>{Ne?.unsubscribe();let We=0;const at=re++;(0,f.Xf)(ge(Ye,at)).subscribe(Ne=(0,q.x)(_e,it=>_e.next(we?we(Ye,it,at,We++):it),()=>{Ne=null,ve()}))},()=>{se=!0,ve()}))})}},8180:(Nt,Ve,U)=>{U.d(Ve,{q:()=>ye});var f=U(6232),Z=U(9360),q=U(8251);function ye(ge){return ge<=0?()=>f.E:(0,Z.e)((we,De)=>{let _e=0;we.subscribe((0,q.x)(De,Ne=>{++_e<=ge&&(De.next(Ne),ge<=_e&&De.complete())}))})}},9773:(Nt,Ve,U)=>{U.d(Ve,{R:()=>ge});var f=U(9360),Z=U(8251),q=U(4829),ye=U(2420);function ge(we){return(0,f.e)((De,_e)=>{(0,q.Xf)(we).subscribe((0,Z.x)(_e,()=>_e.complete(),ye.Z)),!_e.closed&&De.subscribe(_e)})}},9397:(Nt,Ve,U)=>{U.d(Ve,{b:()=>ge});var f=U(4674),Z=U(9360),q=U(8251),ye=U(2737);function ge(we,De,_e){const Ne=(0,f.m)(we)||De||_e?{next:we,error:De,complete:_e}:we;return Ne?(0,Z.e)((re,se)=>{var ve;null===(ve=Ne.subscribe)||void 0===ve||ve.call(Ne);let Ye=!0;re.subscribe((0,q.x)(se,We=>{var at;null===(at=Ne.next)||void 0===at||at.call(Ne,We),se.next(We)},()=>{var We;Ye=!1,null===(We=Ne.complete)||void 0===We||We.call(Ne),se.complete()},We=>{var at;Ye=!1,null===(at=Ne.error)||void 0===at||at.call(Ne,We),se.error(We)},()=>{var We,at;Ye&&(null===(We=Ne.unsubscribe)||void 0===We||We.call(Ne)),null===(at=Ne.finalize)||void 0===at||at.call(Ne)}))}):ye.y}},3026:(Nt,Ve,U)=>{U.d(Ve,{T:()=>ye});var f=U(6973),Z=U(9360),q=U(8251);function ye(we=ge){return(0,Z.e)((De,_e)=>{let Ne=!1;De.subscribe((0,q.x)(_e,re=>{Ne=!0,_e.next(re)},()=>Ne?_e.complete():_e.error(we())))})}function ge(){return new f.K}},1954:(Nt,Ve,U)=>{U.d(Ve,{o:()=>ge});var f=U(7394);class Z extends f.w0{constructor(De,_e){super()}schedule(De,_e=0){return this}}const q={setInterval(we,De,..._e){const{delegate:Ne}=q;return Ne?.setInterval?Ne.setInterval(we,De,..._e):setInterval(we,De,..._e)},clearInterval(we){const{delegate:De}=q;return(De?.clearInterval||clearInterval)(we)},delegate:void 0};var ye=U(9039);class ge extends Z{constructor(De,_e){super(De,_e),this.scheduler=De,this.work=_e,this.pending=!1}schedule(De,_e=0){var Ne;if(this.closed)return this;this.state=De;const re=this.id,se=this.scheduler;return null!=re&&(this.id=this.recycleAsyncId(se,re,_e)),this.pending=!0,this.delay=_e,this.id=null!==(Ne=this.id)&&void 0!==Ne?Ne:this.requestAsyncId(se,this.id,_e),this}requestAsyncId(De,_e,Ne=0){return q.setInterval(De.flush.bind(De,this),Ne)}recycleAsyncId(De,_e,Ne=0){if(null!=Ne&&this.delay===Ne&&!1===this.pending)return _e;null!=_e&&q.clearInterval(_e)}execute(De,_e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Ne=this._execute(De,_e);if(Ne)return Ne;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(De,_e){let re,Ne=!1;try{this.work(De)}catch(se){Ne=!0,re=se||new Error("Scheduled action threw falsy error")}if(Ne)return this.unsubscribe(),re}unsubscribe(){if(!this.closed){const{id:De,scheduler:_e}=this,{actions:Ne}=_e;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ye.P)(Ne,this),null!=De&&(this.id=this.recycleAsyncId(_e,De,null)),this.delay=null,super.unsubscribe()}}}},2631:(Nt,Ve,U)=>{U.d(Ve,{v:()=>q});var f=U(4552);class Z{constructor(ge,we=Z.now){this.schedulerActionCtor=ge,this.now=we}schedule(ge,we=0,De){return new this.schedulerActionCtor(this,ge).schedule(De,we)}}Z.now=f.l.now;class q extends Z{constructor(ge,we=Z.now){super(ge,we),this.actions=[],this._active=!1}flush(ge){const{actions:we}=this;if(this._active)return void we.push(ge);let De;this._active=!0;do{if(De=ge.execute(ge.state,ge.delay))break}while(ge=we.shift());if(this._active=!1,De){for(;ge=we.shift();)ge.unsubscribe();throw De}}}},6321:(Nt,Ve,U)=>{U.d(Ve,{z:()=>q});var f=U(1954);const q=new(U(2631).v)(f.o)},4552:(Nt,Ve,U)=>{U.d(Ve,{l:()=>f});const f={now:()=>(f.delegate||Date).now(),delegate:void 0}},7599:(Nt,Ve,U)=>{U.d(Ve,{z:()=>f});const f={setTimeout(Z,q,...ye){const{delegate:ge}=f;return ge?.setTimeout?ge.setTimeout(Z,q,...ye):setTimeout(Z,q,...ye)},clearTimeout(Z){const{delegate:q}=f;return(q?.clearTimeout||clearTimeout)(Z)},delegate:void 0}},4971:(Nt,Ve,U)=>{U.d(Ve,{h:()=>Z});const Z=function f(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},4850:(Nt,Ve,U)=>{U.d(Ve,{L:()=>f});const f="function"==typeof Symbol&&Symbol.observable||"@@observable"},6973:(Nt,Ve,U)=>{U.d(Ve,{K:()=>Z});const Z=(0,U(2306).d)(q=>function(){q(this),this.name="EmptyError",this.message="no elements in sequence"})},4564:(Nt,Ve,U)=>{U.d(Ve,{_6:()=>we,jO:()=>ye,yG:()=>ge});var f=U(4674);function q(De){return De[De.length-1]}function ye(De){return(0,f.m)(q(De))?De.pop():void 0}function ge(De){return function Z(De){return De&&(0,f.m)(De.schedule)}(q(De))?De.pop():void 0}function we(De,_e){return"number"==typeof q(De)?De.pop():_e}},7453:(Nt,Ve,U)=>{U.d(Ve,{D:()=>ge});const{isArray:f}=Array,{getPrototypeOf:Z,prototype:q,keys:ye}=Object;function ge(De){if(1===De.length){const _e=De[0];if(f(_e))return{args:_e,keys:null};if(function we(De){return De&&"object"==typeof De&&Z(De)===q}(_e)){const Ne=ye(_e);return{args:Ne.map(re=>_e[re]),keys:Ne}}}return{args:De,keys:null}}},9039:(Nt,Ve,U)=>{function f(Z,q){if(Z){const ye=Z.indexOf(q);0<=ye&&Z.splice(ye,1)}}U.d(Ve,{P:()=>f})},2306:(Nt,Ve,U)=>{function f(Z){const ye=Z(ge=>{Error.call(ge),ge.stack=(new Error).stack});return ye.prototype=Object.create(Error.prototype),ye.prototype.constructor=ye,ye}U.d(Ve,{d:()=>f})},2714:(Nt,Ve,U)=>{function f(Z,q){return Z.reduce((ye,ge,we)=>(ye[ge]=q[we],ye),{})}U.d(Ve,{n:()=>f})},1441:(Nt,Ve,U)=>{U.d(Ve,{O:()=>ye,x:()=>q});var f=U(2653);let Z=null;function q(ge){if(f.config.useDeprecatedSynchronousErrorHandling){const we=!Z;if(we&&(Z={errorThrown:!1,error:null}),ge(),we){const{errorThrown:De,error:_e}=Z;if(Z=null,De)throw _e}}else ge()}function ye(ge){f.config.useDeprecatedSynchronousErrorHandling&&Z&&(Z.errorThrown=!0,Z.error=ge)}},7103:(Nt,Ve,U)=>{function f(Z,q,ye,ge=0,we=!1){const De=q.schedule(function(){ye(),we?Z.add(this.schedule(null,ge)):this.unsubscribe()},ge);if(Z.add(De),!we)return De}U.d(Ve,{f:()=>f})},2737:(Nt,Ve,U)=>{function f(Z){return Z}U.d(Ve,{y:()=>f})},4266:(Nt,Ve,U)=>{U.d(Ve,{z:()=>f});const f=Z=>Z&&"number"==typeof Z.length&&"function"!=typeof Z},5726:(Nt,Ve,U)=>{U.d(Ve,{D:()=>Z});var f=U(4674);function Z(q){return Symbol.asyncIterator&&(0,f.m)(q?.[Symbol.asyncIterator])}},4674:(Nt,Ve,U)=>{function f(Z){return"function"==typeof Z}U.d(Ve,{m:()=>f})},8382:(Nt,Ve,U)=>{U.d(Ve,{c:()=>q});var f=U(4850),Z=U(4674);function q(ye){return(0,Z.m)(ye[f.L])}},3664:(Nt,Ve,U)=>{U.d(Ve,{T:()=>q});var f=U(4971),Z=U(4674);function q(ye){return(0,Z.m)(ye?.[f.h])}},4026:(Nt,Ve,U)=>{U.d(Ve,{t:()=>Z});var f=U(4674);function Z(q){return(0,f.m)(q?.then)}},541:(Nt,Ve,U)=>{U.d(Ve,{L:()=>ye,Q:()=>q});var f=U(7582),Z=U(4674);function q(ge){return(0,f.FC)(this,arguments,function*(){const De=ge.getReader();try{for(;;){const{value:_e,done:Ne}=yield(0,f.qq)(De.read());if(Ne)return yield(0,f.qq)(void 0);yield yield(0,f.qq)(_e)}}finally{De.releaseLock()}})}function ye(ge){return(0,Z.m)(ge?.getReader)}},9360:(Nt,Ve,U)=>{U.d(Ve,{A:()=>Z,e:()=>q});var f=U(4674);function Z(ye){return(0,f.m)(ye?.lift)}function q(ye){return ge=>{if(Z(ge))return ge.lift(function(we){try{return ye(we,this)}catch(De){this.error(De)}});throw new TypeError("Unable to lift unknown Observable type")}}},7400:(Nt,Ve,U)=>{U.d(Ve,{Z:()=>ye});var f=U(7398);const{isArray:Z}=Array;function ye(ge){return(0,f.U)(we=>function q(ge,we){return Z(we)?ge(...we):ge(we)}(ge,we))}},2420:(Nt,Ve,U)=>{function f(){}U.d(Ve,{Z:()=>f})},8407:(Nt,Ve,U)=>{U.d(Ve,{U:()=>q,z:()=>Z});var f=U(2737);function Z(...ye){return q(ye)}function q(ye){return 0===ye.length?f.y:1===ye.length?ye[0]:function(we){return ye.reduce((De,_e)=>_e(De),we)}}},3894:(Nt,Ve,U)=>{U.d(Ve,{h:()=>q});var f=U(2653),Z=U(7599);function q(ye){Z.z.setTimeout(()=>{const{onUnhandledError:ge}=f.config;if(!ge)throw ye;ge(ye)})}},9853:(Nt,Ve,U)=>{function f(Z){return new TypeError(`You provided ${null!==Z&&"object"==typeof Z?"an invalid object":`'${Z}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}U.d(Ve,{z:()=>f})},6825:(Nt,Ve,U)=>{U.d(Ve,{LC:()=>Z,SB:()=>Ne,X$:()=>ye,ZE:()=>nt,ZN:()=>mt,_j:()=>f,eR:()=>se,jt:()=>ge,k1:()=>Lt,l3:()=>q,oB:()=>_e,vP:()=>De});class f{}class Z{}const q="*";function ye(ot,ce){return{type:7,name:ot,definitions:ce,options:{}}}function ge(ot,ce=null){return{type:4,styles:ce,timings:ot}}function De(ot,ce=null){return{type:2,steps:ot,options:ce}}function _e(ot){return{type:6,styles:ot,offset:null}}function Ne(ot,ce,Ue){return{type:0,name:ot,styles:ce,options:Ue}}function se(ot,ce,Ue=null){return{type:1,expr:ot,animation:ce,options:Ue}}class mt{constructor(ce=0,Ue=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=ce+Ue}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(ce=>ce()),this._onDoneFns=[])}onStart(ce){this._originalOnStartFns.push(ce),this._onStartFns.push(ce)}onDone(ce){this._originalOnDoneFns.push(ce),this._onDoneFns.push(ce)}onDestroy(ce){this._onDestroyFns.push(ce)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(ce=>ce()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(ce=>ce()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(ce){this._position=this.totalTime?ce*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(ce){const Ue="start"==ce?this._onStartFns:this._onDoneFns;Ue.forEach(Ae=>Ae()),Ue.length=0}}class nt{constructor(ce){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=ce;let Ue=0,Ae=0,Ie=0;const et=this.players.length;0==et?queueMicrotask(()=>this._onFinish()):this.players.forEach(Fe=>{Fe.onDone(()=>{++Ue==et&&this._onFinish()}),Fe.onDestroy(()=>{++Ae==et&&this._onDestroy()}),Fe.onStart(()=>{++Ie==et&&this._onStart()})}),this.totalTime=this.players.reduce((Fe,xe)=>Math.max(Fe,xe.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(ce=>ce()),this._onDoneFns=[])}init(){this.players.forEach(ce=>ce.init())}onStart(ce){this._onStartFns.push(ce)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(ce=>ce()),this._onStartFns=[])}onDone(ce){this._onDoneFns.push(ce)}onDestroy(ce){this._onDestroyFns.push(ce)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(ce=>ce.play())}pause(){this.players.forEach(ce=>ce.pause())}restart(){this.players.forEach(ce=>ce.restart())}finish(){this._onFinish(),this.players.forEach(ce=>ce.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(ce=>ce.destroy()),this._onDestroyFns.forEach(ce=>ce()),this._onDestroyFns=[])}reset(){this.players.forEach(ce=>ce.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(ce){const Ue=ce*this.totalTime;this.players.forEach(Ae=>{const Ie=Ae.totalTime?Math.min(1,Ue/Ae.totalTime):1;Ae.setPosition(Ie)})}getPosition(){const ce=this.players.reduce((Ue,Ae)=>null===Ue||Ae.totalTime>Ue.totalTime?Ae:Ue,null);return null!=ce?ce.getPosition():0}beforeDestroy(){this.players.forEach(ce=>{ce.beforeDestroy&&ce.beforeDestroy()})}triggerCallback(ce){const Ue="start"==ce?this._onStartFns:this._onDoneFns;Ue.forEach(Ae=>Ae()),Ue.length=0}}const Lt="!"},6814:(Nt,Ve,U)=>{U.d(Ve,{Do:()=>it,EM:()=>gr,HT:()=>ye,JF:()=>hs,K0:()=>we,Mx:()=>Xt,NF:()=>bi,O5:()=>ls,PM:()=>Os,S$:()=>Ye,V_:()=>_e,Ye:()=>mt,b0:()=>at,bD:()=>Jn,ez:()=>Zi,q:()=>q,sg:()=>Xn,w_:()=>ge});var f=U(5879);let Z=null;function q(){return Z}function ye(A){Z||(Z=A)}class ge{}const we=new f.OlP("DocumentToken");let De=(()=>{class A{historyGo(L){throw new Error("Not implemented")}static#e=this.\u0275fac=function(Q){return new(Q||A)};static#t=this.\u0275prov=f.Yz7({token:A,factory:function(){return(0,f.f3M)(Ne)},providedIn:"platform"})}return A})();const _e=new f.OlP("Location Initialized");let Ne=(()=>{class A extends De{constructor(){super(),this._doc=(0,f.f3M)(we),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return q().getBaseHref(this._doc)}onPopState(L){const Q=q().getGlobalEventTarget(this._doc,"window");return Q.addEventListener("popstate",L,!1),()=>Q.removeEventListener("popstate",L)}onHashChange(L){const Q=q().getGlobalEventTarget(this._doc,"window");return Q.addEventListener("hashchange",L,!1),()=>Q.removeEventListener("hashchange",L)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(L){this._location.pathname=L}pushState(L,Q,pe){this._history.pushState(L,Q,pe)}replaceState(L,Q,pe){this._history.replaceState(L,Q,pe)}forward(){this._history.forward()}back(){this._history.back()}historyGo(L=0){this._history.go(L)}getState(){return this._history.state}static#e=this.\u0275fac=function(Q){return new(Q||A)};static#t=this.\u0275prov=f.Yz7({token:A,factory:function(){return new A},providedIn:"platform"})}return A})();function re(A,J){if(0==A.length)return J;if(0==J.length)return A;let L=0;return A.endsWith("/")&&L++,J.startsWith("/")&&L++,2==L?A+J.substring(1):1==L?A+J:A+"/"+J}function se(A){const J=A.match(/#|\?|$/),L=J&&J.index||A.length;return A.slice(0,L-("/"===A[L-1]?1:0))+A.slice(L)}function ve(A){return A&&"?"!==A[0]?"?"+A:A}let Ye=(()=>{class A{historyGo(L){throw new Error("Not implemented")}static#e=this.\u0275fac=function(Q){return new(Q||A)};static#t=this.\u0275prov=f.Yz7({token:A,factory:function(){return(0,f.f3M)(at)},providedIn:"root"})}return A})();const We=new f.OlP("appBaseHref");let at=(()=>{class A extends Ye{constructor(L,Q){super(),this._platformLocation=L,this._removeListenerFns=[],this._baseHref=Q??this._platformLocation.getBaseHrefFromDOM()??(0,f.f3M)(we).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(L){this._removeListenerFns.push(this._platformLocation.onPopState(L),this._platformLocation.onHashChange(L))}getBaseHref(){return this._baseHref}prepareExternalUrl(L){return re(this._baseHref,L)}path(L=!1){const Q=this._platformLocation.pathname+ve(this._platformLocation.search),pe=this._platformLocation.hash;return pe&&L?`${Q}${pe}`:Q}pushState(L,Q,pe,Ze){const ut=this.prepareExternalUrl(pe+ve(Ze));this._platformLocation.pushState(L,Q,ut)}replaceState(L,Q,pe,Ze){const ut=this.prepareExternalUrl(pe+ve(Ze));this._platformLocation.replaceState(L,Q,ut)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(L=0){this._platformLocation.historyGo?.(L)}static#e=this.\u0275fac=function(Q){return new(Q||A)(f.LFG(De),f.LFG(We,8))};static#t=this.\u0275prov=f.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"})}return A})(),it=(()=>{class A extends Ye{constructor(L,Q){super(),this._platformLocation=L,this._baseHref="",this._removeListenerFns=[],null!=Q&&(this._baseHref=Q)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(L){this._removeListenerFns.push(this._platformLocation.onPopState(L),this._platformLocation.onHashChange(L))}getBaseHref(){return this._baseHref}path(L=!1){let Q=this._platformLocation.hash;return null==Q&&(Q="#"),Q.length>0?Q.substring(1):Q}prepareExternalUrl(L){const Q=re(this._baseHref,L);return Q.length>0?"#"+Q:Q}pushState(L,Q,pe,Ze){let ut=this.prepareExternalUrl(pe+ve(Ze));0==ut.length&&(ut=this._platformLocation.pathname),this._platformLocation.pushState(L,Q,ut)}replaceState(L,Q,pe,Ze){let ut=this.prepareExternalUrl(pe+ve(Ze));0==ut.length&&(ut=this._platformLocation.pathname),this._platformLocation.replaceState(L,Q,ut)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(L=0){this._platformLocation.historyGo?.(L)}static#e=this.\u0275fac=function(Q){return new(Q||A)(f.LFG(De),f.LFG(We,8))};static#t=this.\u0275prov=f.Yz7({token:A,factory:A.\u0275fac})}return A})(),mt=(()=>{class A{constructor(L){this._subject=new f.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=L;const Q=this._locationStrategy.getBaseHref();this._basePath=function ce(A){if(new RegExp("^(https?:)?//").test(A)){const[,L]=A.split(/\/\/[^\/]+/);return L}return A}(se(ot(Q))),this._locationStrategy.onPopState(pe=>{this._subject.emit({url:this.path(!0),pop:!0,state:pe.state,type:pe.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(L=!1){return this.normalize(this._locationStrategy.path(L))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(L,Q=""){return this.path()==this.normalize(L+ve(Q))}normalize(L){return A.stripTrailingSlash(function Lt(A,J){if(!A||!J.startsWith(A))return J;const L=J.substring(A.length);return""===L||["/",";","?","#"].includes(L[0])?L:J}(this._basePath,ot(L)))}prepareExternalUrl(L){return L&&"/"!==L[0]&&(L="/"+L),this._locationStrategy.prepareExternalUrl(L)}go(L,Q="",pe=null){this._locationStrategy.pushState(pe,"",L,Q),this._notifyUrlChangeListeners(this.prepareExternalUrl(L+ve(Q)),pe)}replaceState(L,Q="",pe=null){this._locationStrategy.replaceState(pe,"",L,Q),this._notifyUrlChangeListeners(this.prepareExternalUrl(L+ve(Q)),pe)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(L=0){this._locationStrategy.historyGo?.(L)}onUrlChange(L){return this._urlChangeListeners.push(L),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(Q=>{this._notifyUrlChangeListeners(Q.url,Q.state)})),()=>{const Q=this._urlChangeListeners.indexOf(L);this._urlChangeListeners.splice(Q,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(L="",Q){this._urlChangeListeners.forEach(pe=>pe(L,Q))}subscribe(L,Q,pe){return this._subject.subscribe({next:L,error:Q,complete:pe})}static#e=this.normalizeQueryParams=ve;static#t=this.joinWithSlash=re;static#n=this.stripTrailingSlash=se;static#r=this.\u0275fac=function(Q){return new(Q||A)(f.LFG(Ye))};static#i=this.\u0275prov=f.Yz7({token:A,factory:function(){return function nt(){return new mt((0,f.LFG)(Ye))}()},providedIn:"root"})}return A})();function ot(A){return A.replace(/\/index.html$/,"")}function Xt(A,J){J=encodeURIComponent(J);for(const L of A.split(";")){const Q=L.indexOf("="),[pe,Ze]=-1==Q?[L,""]:[L.slice(0,Q),L.slice(Q+1)];if(pe.trim()===J)return decodeURIComponent(Ze)}return null}class Po{constructor(J,L,Q,pe){this.$implicit=J,this.ngForOf=L,this.index=Q,this.count=pe}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Xn=(()=>{class A{set ngForOf(L){this._ngForOf=L,this._ngForOfDirty=!0}set ngForTrackBy(L){this._trackByFn=L}get ngForTrackBy(){return this._trackByFn}constructor(L,Q,pe){this._viewContainer=L,this._template=Q,this._differs=pe,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(L){L&&(this._template=L)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const L=this._ngForOf;!this._differ&&L&&(this._differ=this._differs.find(L).create(this.ngForTrackBy))}if(this._differ){const L=this._differ.diff(this._ngForOf);L&&this._applyChanges(L)}}_applyChanges(L){const Q=this._viewContainer;L.forEachOperation((pe,Ze,ut)=>{if(null==pe.previousIndex)Q.createEmbeddedView(this._template,new Po(pe.item,this._ngForOf,-1,-1),null===ut?void 0:ut);else if(null==ut)Q.remove(null===Ze?void 0:Ze);else if(null!==Ze){const Yt=Q.get(Ze);Q.move(Yt,ut),us(Yt,pe)}});for(let pe=0,Ze=Q.length;pe<Ze;pe++){const Yt=Q.get(pe).context;Yt.index=pe,Yt.count=Ze,Yt.ngForOf=this._ngForOf}L.forEachIdentityChange(pe=>{us(Q.get(pe.currentIndex),pe)})}static ngTemplateContextGuard(L,Q){return!0}static#e=this.\u0275fac=function(Q){return new(Q||A)(f.Y36(f.s_b),f.Y36(f.Rgc),f.Y36(f.ZZ4))};static#t=this.\u0275dir=f.lG2({type:A,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return A})();function us(A,J){A.context.$implicit=J.item}let ls=(()=>{class A{constructor(L,Q){this._viewContainer=L,this._context=new Zs,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=Q}set ngIf(L){this._context.$implicit=this._context.ngIf=L,this._updateView()}set ngIfThen(L){Qs("ngIfThen",L),this._thenTemplateRef=L,this._thenViewRef=null,this._updateView()}set ngIfElse(L){Qs("ngIfElse",L),this._elseTemplateRef=L,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(L,Q){return!0}static#e=this.\u0275fac=function(Q){return new(Q||A)(f.Y36(f.s_b),f.Y36(f.Rgc))};static#t=this.\u0275dir=f.lG2({type:A,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return A})();class Zs{constructor(){this.$implicit=null,this.ngIf=null}}function Qs(A,J){if(J&&!J.createEmbeddedView)throw new Error(`${A} must be a TemplateRef, but received '${(0,f.AaK)(J)}'.`)}let Zi=(()=>{class A{static#e=this.\u0275fac=function(Q){return new(Q||A)};static#t=this.\u0275mod=f.oAB({type:A});static#n=this.\u0275inj=f.cJS({})}return A})();const Jn="browser",gi="server";function bi(A){return A===Jn}function Os(A){return A===gi}let gr=(()=>{class A{static#e=this.\u0275prov=(0,f.Yz7)({token:A,providedIn:"root",factory:()=>new Or((0,f.LFG)(we),window)})}return A})();class Or{constructor(J,L){this.document=J,this.window=L,this.offset=()=>[0,0]}setOffset(J){this.offset=Array.isArray(J)?()=>J:J}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(J){this.supportsScrolling()&&this.window.scrollTo(J[0],J[1])}scrollToAnchor(J){if(!this.supportsScrolling())return;const L=function Ei(A,J){const L=A.getElementById(J)||A.getElementsByName(J)[0];if(L)return L;if("function"==typeof A.createTreeWalker&&A.body&&"function"==typeof A.body.attachShadow){const Q=A.createTreeWalker(A.body,NodeFilter.SHOW_ELEMENT);let pe=Q.currentNode;for(;pe;){const Ze=pe.shadowRoot;if(Ze){const ut=Ze.getElementById(J)||Ze.querySelector(`[name="${J}"]`);if(ut)return ut}pe=Q.nextNode()}}return null}(this.document,J);L&&(this.scrollToElement(L),L.focus())}setHistoryScrollRestoration(J){this.supportsScrolling()&&(this.window.history.scrollRestoration=J)}scrollToElement(J){const L=J.getBoundingClientRect(),Q=L.left+this.window.pageXOffset,pe=L.top+this.window.pageYOffset,Ze=this.offset();this.window.scrollTo(Q-Ze[0],pe-Ze[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class hs{}},5879:(Nt,Ve,U)=>{U.d(Ve,{$8M:()=>Zr,$WT:()=>vi,$Z:()=>D_,AFp:()=>Yh,ALo:()=>E0,AaK:()=>ve,AsE:()=>tE,CHM:()=>Il,CRH:()=>F0,DdM:()=>p0,EJc:()=>OA,EiD:()=>Bm,EpF:()=>iy,F$t:()=>hy,F4k:()=>sy,FYo:()=>sf,FiY:()=>Za,Gf:()=>x0,GfV:()=>Gp,Gpc:()=>at,HDt:()=>sw,Hsn:()=>fy,JOm:()=>Xu,JVY:()=>jy,JZr:()=>ot,KtG:()=>zs,L6k:()=>Om,LAX:()=>$d,LFG:()=>_t,LSH:()=>wp,Lbi:()=>Qd,Lck:()=>vD,MAs:()=>ry,MMx:()=>o0,MR2:()=>Ap,NdJ:()=>oy,Ojb:()=>Jh,OlP:()=>$t,Oqu:()=>eE,P3R:()=>$m,PXZ:()=>uC,Q6J:()=>$g,QGY:()=>Wg,QbO:()=>Yd,Qsj:()=>Xy,R0b:()=>So,RDi:()=>_c,Rgc:()=>sm,SBq:()=>hd,Sil:()=>FA,Suo:()=>k0,TTD:()=>hn,TgZ:()=>Ff,Tol:()=>tI,Udp:()=>Vf,VuI:()=>zC,W1O:()=>B0,X6Q:()=>mC,XFs:()=>Kt,Xpm:()=>yo,Xq5:()=>Pg,Xts:()=>Ic,Y36:()=>pd,YKP:()=>r0,YNc:()=>ey,Yjl:()=>js,Yz7:()=>Gt,Z0I:()=>Pt,ZZ4:()=>kE,_Bn:()=>n0,_UZ:()=>Ih,_c5:()=>NC,_uU:()=>uI,aQg:()=>FE,c2e:()=>iw,cJS:()=>Hn,cg1:()=>nE,dDg:()=>iC,dqk:()=>Rn,eBb:()=>rd,eFA:()=>gw,eJc:()=>vE,ekj:()=>Jv,eoX:()=>dw,f3M:()=>wt,g9A:()=>kp,h0i:()=>Dh,hGG:()=>OC,hij:()=>_y,iGM:()=>O0,ifc:()=>ar,ip1:()=>rw,jDz:()=>a0,kL8:()=>SI,lG2:()=>Ns,lcZ:()=>I0,lqb:()=>xu,lri:()=>lw,mCW:()=>yc,n5z:()=>sn,oAB:()=>Ms,oJD:()=>Ip,oxw:()=>dy,pB0:()=>id,q3G:()=>_u,q4F:()=>o_,qFp:()=>WC,qLn:()=>jl,qOj:()=>Sg,qZA:()=>pl,qzn:()=>Ol,rWj:()=>cw,rg0:()=>Ze,s9C:()=>qg,sBO:()=>_C,s_b:()=>Dy,soG:()=>Cy,tb:()=>RE,tp0:()=>Su,uIk:()=>mh,vHH:()=>ce,vpe:()=>ku,wAp:()=>Bf,xp6:()=>T_,z2F:()=>zf,z3N:()=>sl,zSh:()=>Kd,zs3:()=>ca});var f=U(8645),Z=U(7394),q=U(5592),ye=U(3019),ge=U(5619),we=U(2096),De=U(3020),_e=U(4664),Ne=U(3997);function re(t){for(let r in t)if(t[r]===re)return r;throw Error("Could not find renamed property on target object.")}function se(t,r){for(const s in r)r.hasOwnProperty(s)&&!t.hasOwnProperty(s)&&(t[s]=r[s])}function ve(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(ve).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const r=t.toString();if(null==r)return""+r;const s=r.indexOf("\n");return-1===s?r:r.substring(0,s)}function Ye(t,r){return null==t||""===t?null===r?"":r:null==r||""===r?t:t+" "+r}const We=re({__forward_ref__:re});function at(t){return t.__forward_ref__=at,t.toString=function(){return ve(this())},t}function it(t){return mt(t)?t():t}function mt(t){return"function"==typeof t&&t.hasOwnProperty(We)&&t.__forward_ref__===at}function nt(t){return t&&!!t.\u0275providers}const ot="https://g.co/ng/security#xss";class ce extends Error{constructor(r,s){super(function Ue(t,r){return`NG0${Math.abs(t)}${r?": "+r:""}`}(r,s)),this.code=r}}function Ae(t){return"string"==typeof t?t:null==t?"":String(t)}function Tt(t,r){throw new ce(-201,!1)}function yt(t,r){null==t&&function vt(t,r,s,a){throw new Error(`ASSERTION ERROR: ${t}`+(null==a?"":` [Expected=> ${s} ${a} ${r} <=Actual]`))}(r,t,null,"!=")}function Gt(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Hn(t){return{providers:t.providers||[],imports:t.imports||[]}}function Ln(t){return zn(t,Vn)||zn(t,On)}function Pt(t){return null!==Ln(t)}function zn(t,r){return t.hasOwnProperty(r)?t[r]:null}function Ir(t){return t&&(t.hasOwnProperty(Zn)||t.hasOwnProperty(ti))?t[Zn]:null}const Vn=re({\u0275prov:re}),Zn=re({\u0275inj:re}),On=re({ngInjectableDef:re}),ti=re({ngInjectorDef:re});var Kt=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(Kt||{});let an;function Kn(t){const r=an;return an=t,r}function Lr(t,r,s){const a=Ln(t);return a&&"root"==a.providedIn?void 0===a.value?a.value=a.factory():a.value:s&Kt.Optional?null:void 0!==r?r:void Tt(ve(t))}const Rn=globalThis;class $t{constructor(r,s){this._desc=r,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof s?this.__NG_ELEMENT_ID__=s:void 0!==s&&(this.\u0275prov=Gt({token:this,providedIn:s.providedIn||"root",factory:s.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const fr={},Mr="__NG_DI_FLAG__",rr="ngTempTokenPath",ne=/\n/gm,F="__source";let k;function Pe(t){const r=k;return k=t,r}function st(t,r=Kt.Default){if(void 0===k)throw new ce(-203,!1);return null===k?Lr(t,void 0,r):k.get(t,r&Kt.Optional?null:void 0,r)}function _t(t,r=Kt.Default){return(function rn(){return an}()||st)(it(t),r)}function wt(t,r=Kt.Default){return _t(t,qt(r))}function qt(t){return typeof t>"u"||"number"==typeof t?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Gn(t){const r=[];for(let s=0;s<t.length;s++){const a=it(t[s]);if(Array.isArray(a)){if(0===a.length)throw new ce(900,!1);let l,p=Kt.Default;for(let y=0;y<a.length;y++){const w=a[y],P=oi(w);"number"==typeof P?-1===P?l=w.token:p|=P:l=w}r.push(_t(l,p))}else r.push(_t(a))}return r}function ln(t,r){return t[Mr]=r,t.prototype[Mr]=r,t}function oi(t){return t[Mr]}function Ci(t){return{toString:t}.toString()}var Jr=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(Jr||{}),ar=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(ar||{});const ai={},ke=[],Oe=re({\u0275cmp:re}),rt=re({\u0275dir:re}),It=re({\u0275pipe:re}),pn=re({\u0275mod:re}),Xt=re({\u0275fac:re}),gn=re({__NG_ELEMENT_ID__:re}),xn=re({__NG_ENV_ID__:re});function pr(t,r,s){let a=t.length;for(;;){const l=t.indexOf(r,s);if(-1===l)return l;if(0===l||t.charCodeAt(l-1)<=32){const p=r.length;if(l+p===a||t.charCodeAt(l+p)<=32)return l}s=l+1}}function ui(t,r,s){let a=0;for(;a<s.length;){const l=s[a];if("number"==typeof l){if(0!==l)break;a++;const p=s[a++],y=s[a++],w=s[a++];t.setAttribute(r,y,w,p)}else{const p=l,y=s[++a];Po(p)?t.setProperty(r,p,y):t.setAttribute(r,p,y),a++}}return a}function Es(t){return 3===t||4===t||6===t}function Po(t){return 64===t.charCodeAt(0)}function Xn(t,r){if(null!==r&&0!==r.length)if(null===t||0===t.length)t=r.slice();else{let s=-1;for(let a=0;a<r.length;a++){const l=r[a];"number"==typeof l?s=l:0===s||us(t,s,l,null,-1===s||2===s?r[++a]:null)}}return t}function us(t,r,s,a,l){let p=0,y=t.length;if(-1===r)y=-1;else for(;p<t.length;){const w=t[p++];if("number"==typeof w){if(w===r){y=-1;break}if(w>r){y=p-1;break}}}for(;p<t.length;){const w=t[p];if("number"==typeof w)break;if(w===s){if(null===a)return void(null!==l&&(t[p+1]=l));if(a===t[p+1])return void(t[p+2]=l)}p++,null!==a&&p++,null!==l&&p++}-1!==y&&(t.splice(y,0,r),p=y+1),t.splice(p++,0,s),null!==a&&t.splice(p++,0,a),null!==l&&t.splice(p++,0,l)}const ki="ng-template";function ls(t,r,s){let a=0,l=!0;for(;a<t.length;){let p=t[a++];if("string"==typeof p&&l){const y=t[a++];if(s&&"class"===p&&-1!==pr(y.toLowerCase(),r,0))return!0}else{if(1===p){for(;a<t.length&&"string"==typeof(p=t[a++]);)if(p.toLowerCase()===r)return!0;return!1}"number"==typeof p&&(l=!1)}}return!1}function Zs(t){return 4===t.type&&t.value!==ki}function Qs(t,r,s){return r===(4!==t.type||s?t.value:ki)}function _o(t,r,s){let a=4;const l=t.attrs||[],p=function yi(t){for(let r=0;r<t.length;r++)if(Es(t[r]))return r;return t.length}(l);let y=!1;for(let w=0;w<r.length;w++){const P=r[w];if("number"!=typeof P){if(!y)if(4&a){if(a=2|1&a,""!==P&&!Qs(t,P,s)||""===P&&1===r.length){if(qr(a))return!1;y=!0}}else{const $=8&a?P:r[++w];if(8&a&&null!==t.attrs){if(!ls(t.attrs,$,s)){if(qr(a))return!1;y=!0}continue}const he=ur(8&a?"class":P,l,Zs(t),s);if(-1===he){if(qr(a))return!1;y=!0;continue}if(""!==$){let Me;Me=he>p?"":l[he+1].toLowerCase();const je=8&a?Me:null;if(je&&-1!==pr(je,$,0)||2&a&&$!==Me){if(qr(a))return!1;y=!0}}}}else{if(!y&&!qr(a)&&!qr(P))return!1;if(y&&qr(P))continue;y=!1,a=P|1&a}}return qr(a)||y}function qr(t){return 0==(1&t)}function ur(t,r,s,a){if(null===r)return-1;let l=0;if(a||!s){let p=!1;for(;l<r.length;){const y=r[l];if(y===t)return l;if(3===y||6===y)p=!0;else{if(1===y||2===y){let w=r[++l];for(;"string"==typeof w;)w=r[++l];continue}if(4===y)break;if(0===y){l+=4;continue}}l+=p?1:2}return-1}return function Js(t,r){let s=t.indexOf(4);if(s>-1)for(s++;s<t.length;){const a=t[s];if("number"==typeof a)return-1;if(a===r)return s;s++}return-1}(r,t)}function Us(t,r,s=!1){for(let a=0;a<r.length;a++)if(_o(t,r[a],s))return!0;return!1}function Rs(t,r){e:for(let s=0;s<r.length;s++){const a=r[s];if(t.length===a.length){for(let l=0;l<t.length;l++)if(t[l]!==a[l])continue e;return!0}}return!1}function Ps(t,r){return t?":not("+r.trim()+")":r}function Fi(t){let r=t[0],s=1,a=2,l="",p=!1;for(;s<t.length;){let y=t[s];if("string"==typeof y)if(2&a){const w=t[++s];l+="["+y+(w.length>0?'="'+w+'"':"")+"]"}else 8&a?l+="."+y:4&a&&(l+=" "+y);else""!==l&&!qr(y)&&(r+=Ps(p,l),l=""),a=y,p=p||!qr(a);s++}return""!==l&&(r+=Ps(p,l)),r}function yo(t){return Ci(()=>{const r=lo(t),s={...r,decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===Jr.OnPush,directiveDefs:null,pipeDefs:null,dependencies:r.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||ar.Emulated,styles:t.styles||ke,_:null,schemas:t.schemas||null,tView:null,id:""};Xs(s);const a=t.dependencies;return s.directiveDefs=Bn(a,!1),s.pipeDefs=Bn(a,!0),s.id=function ds(t){let r=0;const s=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(const l of s)r=Math.imul(31,r)+l.charCodeAt(0)<<0;return r+=2147483648,"c"+r}(s),s})}function Bs(t){return Wn(t)||Li(t)}function ws(t){return null!==t}function Ms(t){return Ci(()=>({type:t.type,bootstrap:t.bootstrap||ke,declarations:t.declarations||ke,imports:t.imports||ke,exports:t.exports||ke,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function Mo(t,r){if(null==t)return ai;const s={};for(const a in t)if(t.hasOwnProperty(a)){let l=t[a],p=l;Array.isArray(l)&&(p=l[1],l=l[0]),s[l]=a,r&&(r[l]=p)}return s}function Ns(t){return Ci(()=>{const r=lo(t);return Xs(r),r})}function js(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,standalone:!0===t.standalone,onDestroy:t.type.prototype.ngOnDestroy||null}}function Wn(t){return t[Oe]||null}function Li(t){return t[rt]||null}function Nr(t){return t[It]||null}function vi(t){const r=Wn(t)||Li(t)||Nr(t);return null!==r&&r.standalone}function li(t,r){const s=t[pn]||null;if(!s&&!0===r)throw new Error(`Type ${ve(t)} does not have '\u0275mod' property.`);return s}function lo(t){const r={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:r,inputTransforms:null,inputConfig:t.inputs||ai,exportAs:t.exportAs||null,standalone:!0===t.standalone,signals:!0===t.signals,selectors:t.selectors||ke,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Mo(t.inputs,r),outputs:Mo(t.outputs)}}function Xs(t){t.features?.forEach(r=>r(t))}function Bn(t,r){if(!t)return null;const s=r?Nr:Bs;return()=>("function"==typeof t?t():t).map(a=>s(a)).filter(ws)}const vr=0,xt=1,dn=2,Er=3,Gi=4,Ts=5,pi=6,Zi=7,Jn=8,gi=9,ss=10,fn=11,bi=12,Os=13,Wi=14,Vr=15,wr=16,gr=17,Or=18,Ei=19,No=20,hs=21,Vi=22,Ii=23,$s=24,Qn=25,Qi=1,eo=2,Ui=7,Oo=9,Tr=11;function _n(t){return Array.isArray(t)&&"object"==typeof t[Qi]}function Bi(t){return Array.isArray(t)&&!0===t[Qi]}function ps(t){return 0!=(4&t.flags)}function xo(t){return t.componentOffset>-1}function Ea(t){return 1==(1&t.flags)}function ji(t){return!!t.template}function co(t){return 0!=(512&t[dn])}function er(t,r){return t.hasOwnProperty(Xt)?t[Xt]:null}let jr=null,Ri=!1;function Ar(t){const r=jr;return jr=t,r}const to={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function di(t){if(!xs(t)||t.dirty){if(!t.producerMustRecompute(t)&&!Ia(t))return void(t.dirty=!1);t.producerRecomputeValue(t),t.dirty=!1}}function Pi(t){t.dirty=!0,function no(t){if(void 0===t.liveConsumerNode)return;const r=Ri;Ri=!0;try{for(const s of t.liveConsumerNode)s.dirty||Pi(s)}finally{Ri=r}}(t),t.consumerMarkedDirty?.(t)}function Sa(t){return t&&(t.nextProducerIndex=0),Ar(t)}function Hs(t,r){if(Ar(r),t&&void 0!==t.producerNode&&void 0!==t.producerIndexOfThis&&void 0!==t.producerLastReadVersion){if(xs(t))for(let s=t.nextProducerIndex;s<t.producerNode.length;s++)Xo(t.producerNode[s],t.producerIndexOfThis[s]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function Ia(t){ea(t);for(let r=0;r<t.producerNode.length;r++){const s=t.producerNode[r],a=t.producerLastReadVersion[r];if(a!==s.version||(di(s),a!==s.version))return!0}return!1}function mr(t){if(ea(t),xs(t))for(let r=0;r<t.producerNode.length;r++)Xo(t.producerNode[r],t.producerIndexOfThis[r]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function Xo(t,r){if(function Ra(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}(t),ea(t),1===t.liveConsumerNode.length)for(let a=0;a<t.producerNode.length;a++)Xo(t.producerNode[a],t.producerIndexOfThis[a]);const s=t.liveConsumerNode.length-1;if(t.liveConsumerNode[r]=t.liveConsumerNode[s],t.liveConsumerIndexOfThis[r]=t.liveConsumerIndexOfThis[s],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,r<t.liveConsumerNode.length){const a=t.liveConsumerIndexOfThis[r],l=t.liveConsumerNode[r];ea(l),l.producerIndexOfThis[a]=r}}function xs(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function ea(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}let Ha=null;function Ze(t){const r=Ar(null);try{return t()}finally{Ar(r)}}const Yt=()=>{},Ur=(()=>({...to,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:t=>{t.schedule(t.ref)},hasRun:!1,cleanupFn:Yt}))();class $r{constructor(r,s,a){this.previousValue=r,this.currentValue=s,this.firstChange=a}isFirstChange(){return this.firstChange}}function hn(){return ei}function ei(t){return t.type.prototype.ngOnChanges&&(t.setInput=wi),tr}function tr(){const t=ct(this),r=t?.current;if(r){const s=t.previous;if(s===ai)t.previous=r;else for(let a in r)s[a]=r[a];t.current=null,this.ngOnChanges(r)}}function wi(t,r,s,a){const l=this.declaredInputs[s],p=ct(t)||function Hr(t,r){return t[Ls]=r}(t,{previous:ai,current:null}),y=p.current||(p.current={}),w=p.previous,P=w[l];y[l]=new $r(P&&P.currentValue,r,w===ai),t[a]=r}hn.ngInherit=!0;const Ls="__ngSimpleChanges__";function ct(t){return t[Ls]||null}const bt=function(t,r,s){};function pt(t){for(;Array.isArray(t);)t=t[vr];return t}function ft(t,r){return pt(r[t])}function Kr(t,r){return pt(r[t.index])}function Jl(t,r){return t.data[r]}function bs(t,r){return t[r]}function Lo(t,r){const s=r[t];return _n(s)?s:s[vr]}function Yo(t,r){return null==r?null:t[r]}function ia(t){t[gr]=0}function El(t){1024&t[dn]||(t[dn]|=1024,kn(t,1))}function ju(t){1024&t[dn]&&(t[dn]&=-1025,kn(t,-1))}function kn(t,r){let s=t[Er];if(null===s)return;s[Ts]+=r;let a=s;for(s=s[Er];null!==s&&(1===r&&1===a[Ts]||-1===r&&0===a[Ts]);)s[Ts]+=r,a=s,s=s[Er]}const Zt={lFrame:fe(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Vt(){return Zt.bindingsEnabled}function wo(){return null!==Zt.skipHydrationRootTNode}function dt(){return Zt.lFrame.lView}function xr(){return Zt.lFrame.tView}function Il(t){return Zt.lFrame.contextLView=t,t[Jn]}function zs(t){return Zt.lFrame.contextLView=null,t}function Yi(){let t=qi();for(;null!==t&&64===t.type;)t=t.parent;return t}function qi(){return Zt.lFrame.currentTNode}function os(t,r){const s=Zt.lFrame;s.currentTNode=t,s.isParent=r}function ou(){return Zt.lFrame.isParent}function Be(){Zt.lFrame.isParent=!1}function zr(){const t=Zt.lFrame;let r=t.bindingRootIndex;return-1===r&&(r=t.bindingRootIndex=t.tView.bindingStartIndex),r}function ms(){return Zt.lFrame.bindingIndex++}function To(t){const r=Zt.lFrame,s=r.bindingIndex;return r.bindingIndex=r.bindingIndex+t,s}function Wu(t,r){const s=Zt.lFrame;s.bindingIndex=s.bindingRootIndex=t,uu(r)}function uu(t){Zt.lFrame.currentDirectiveIndex=t}function v(){return Zt.lFrame.currentQueryIndex}function R(t){Zt.lFrame.currentQueryIndex=t}function I(t){const r=t[xt];return 2===r.type?r.declTNode:1===r.type?t[pi]:null}function M(t,r,s){if(s&Kt.SkipSelf){let l=r,p=t;for(;!(l=l.parent,null!==l||s&Kt.Host||(l=I(p),null===l||(p=p[Wi],10&l.type))););if(null===l)return!1;r=l,t=p}const a=Zt.lFrame=te();return a.currentTNode=r,a.lView=t,!0}function B(t){const r=te(),s=t[xt];Zt.lFrame=r,r.currentTNode=s.firstChild,r.lView=t,r.tView=s,r.contextLView=t,r.bindingIndex=s.bindingStartIndex,r.inI18n=!1}function te(){const t=Zt.lFrame,r=null===t?null:t.child;return null===r?fe(t):r}function fe(t){const r={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=r),r}function qe(){const t=Zt.lFrame;return Zt.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const ze=qe;function Ut(){const t=qe();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function Mn(){return Zt.lFrame.selectedIndex}function Ss(t){Zt.lFrame.selectedIndex=t}function ri(){const t=Zt.lFrame;return Jl(t.tView,t.selectedIndex)}let ec=!0;function qu(){return ec}function oa(t){ec=t}function Gs(t,r){for(let s=r.directiveStart,a=r.directiveEnd;s<a;s++){const p=t.data[s].type.prototype,{ngAfterContentInit:y,ngAfterContentChecked:w,ngAfterViewInit:P,ngAfterViewChecked:$,ngOnDestroy:X}=p;y&&(t.contentHooks??=[]).push(-s,y),w&&((t.contentHooks??=[]).push(s,w),(t.contentCheckHooks??=[]).push(s,w)),P&&(t.viewHooks??=[]).push(-s,P),$&&((t.viewHooks??=[]).push(s,$),(t.viewCheckHooks??=[]).push(s,$)),null!=X&&(t.destroyHooks??=[]).push(s,X)}}function lu(t,r,s){Aa(t,r,3,s)}function cu(t,r,s,a){(3&t[dn])===s&&Aa(t,r,s,a)}function Da(t,r){let s=t[dn];(3&s)===r&&(s&=8191,s+=1,t[dn]=s)}function Aa(t,r,s,a){const p=a??-1,y=r.length-1;let w=0;for(let P=void 0!==a?65535&t[gr]:0;P<y;P++)if("number"==typeof r[P+1]){if(w=r[P],null!=a&&w>=a)break}else r[P]<0&&(t[gr]+=65536),(w<p||-1==p)&&(fa(t,s,r,P),t[gr]=(4294901760&t[gr])+P+2),P++}function Ji(t,r){bt(4,t,r);const s=Ar(null);try{r.call(t)}finally{Ar(s),bt(5,t,r)}}function fa(t,r,s,a){const l=s[a]<0,p=s[a+1],w=t[l?-s[a]:s[a]];l?t[dn]>>13<t[gr]>>16&&(3&t[dn])===r&&(t[dn]+=8192,Ji(w,p)):Ji(w,p)}const Do=-1;class Du{constructor(r,s,a){this.factory=r,this.resolving=!1,this.canSeeViewProviders=s,this.injectImpl=a}}function Ku(t){return t!==Do}function Xi(t){return 32767&t}function jo(t,r){let s=function nc(t){return t>>16}(t),a=r;for(;s>0;)a=a[Wi],s--;return a}let zi=!0;function Ao(t){const r=zi;return zi=t,r}const Ka=255,Na=5;let Pd=0;const _s={};function du(t,r){const s=$o(t,r);if(-1!==s)return s;const a=r[xt];a.firstCreatePass&&(t.injectorIndex=r.length,aa(a.data,t),aa(r,null),aa(a.blueprint,null));const l=pa(t,r),p=t.injectorIndex;if(Ku(l)){const y=Xi(l),w=jo(l,r),P=w[xt].data;for(let $=0;$<8;$++)r[p+$]=w[y+$]|P[y+$]}return r[p+8]=l,p}function aa(t,r){t.push(0,0,0,0,0,0,0,0,r)}function $o(t,r){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===r[t.injectorIndex+8]?-1:t.injectorIndex}function pa(t,r){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let s=0,a=null,l=r;for(;null!==l;){if(a=wn(l),null===a)return Do;if(s++,l=l[Wi],-1!==a.injectorIndex)return a.injectorIndex|s<<16}return Do}function ga(t,r,s){!function Oa(t,r,s){let a;"string"==typeof s?a=s.charCodeAt(0)||0:s.hasOwnProperty(gn)&&(a=s[gn]),null==a&&(a=s[gn]=Pd++);const l=a&Ka;r.data[t+(l>>Na)]|=1<<l}(t,r,s)}function N(t,r,s){if(s&Kt.Optional||void 0!==t)return t;Tt()}function d(t,r,s,a){if(s&Kt.Optional&&void 0===a&&(a=null),!(s&(Kt.Self|Kt.Host))){const l=t[gi],p=Kn(void 0);try{return l?l.get(r,a,s&Kt.Optional):Lr(r,a,s&Kt.Optional)}finally{Kn(p)}}return N(a,0,s)}function m(t,r,s,a=Kt.Default,l){if(null!==t){if(2048&r[dn]&&!(a&Kt.Self)){const y=function Sn(t,r,s,a,l){let p=t,y=r;for(;null!==p&&null!==y&&2048&y[dn]&&!(512&y[dn]);){const w=T(p,y,s,a|Kt.Self,_s);if(w!==_s)return w;let P=p.parent;if(!P){const $=y[No];if($){const X=$.get(s,_s,a);if(X!==_s)return X}P=wn(y),y=y[Wi]}p=P}return l}(t,r,s,a,_s);if(y!==_s)return y}const p=T(t,r,s,a,_s);if(p!==_s)return p}return d(r,s,a,l)}function T(t,r,s,a,l){const p=function me(t){if("string"==typeof t)return t.charCodeAt(0)||0;const r=t.hasOwnProperty(gn)?t[gn]:void 0;return"number"==typeof r?r>=0?r&Ka:bn:r}(s);if("function"==typeof p){if(!M(r,t,a))return a&Kt.Host?N(l,0,a):d(r,s,a,l);try{let y;if(y=p(a),null!=y||a&Kt.Optional)return y;Tt()}finally{ze()}}else if("number"==typeof p){let y=null,w=$o(t,r),P=Do,$=a&Kt.Host?r[Vr][pi]:null;for((-1===w||a&Kt.SkipSelf)&&(P=-1===w?pa(t,r):r[w+8],P!==Do&&Qe(a,!1)?(y=r[xt],w=Xi(P),r=jo(P,r)):w=-1);-1!==w;){const X=r[xt];if(Se(p,w,X.data)){const he=V(w,r,s,y,a,$);if(he!==_s)return he}P=r[w+8],P!==Do&&Qe(a,r[xt].data[w+8]===$)&&Se(p,w,r)?(y=X,w=Xi(P),r=jo(P,r)):w=-1}}return l}function V(t,r,s,a,l,p){const y=r[xt],w=y.data[t+8],X=Y(w,y,s,null==a?xo(w)&&zi:a!=y&&0!=(3&w.type),l&Kt.Host&&p===w);return null!==X?ue(r,y,X,w):_s}function Y(t,r,s,a,l){const p=t.providerIndexes,y=r.data,w=1048575&p,P=t.directiveStart,X=p>>20,Me=l?w+X:t.directiveEnd;for(let je=a?w:w+X;je<Me;je++){const lt=y[je];if(je<P&&s===lt||je>=P&&lt.type===s)return je}if(l){const je=y[P];if(je&&ji(je)&&je.type===s)return P}return null}function ue(t,r,s,a){let l=t[s];const p=r.data;if(function Ai(t){return t instanceof Du}(l)){const y=l;y.resolving&&function et(t,r){const s=r?`. Dependency path: ${r.join(" > ")} > ${t}`:"";throw new ce(-200,`Circular dependency in DI detected for ${t}${s}`)}(function Ie(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():Ae(t)}(p[s]));const w=Ao(y.canSeeViewProviders);y.resolving=!0;const $=y.injectImpl?Kn(y.injectImpl):null;M(t,a,Kt.Default);try{l=t[s]=y.factory(void 0,p,t,a),r.firstCreatePass&&s>=a.directiveStart&&function Wa(t,r,s){const{ngOnChanges:a,ngOnInit:l,ngDoCheck:p}=r.type.prototype;if(a){const y=ei(r);(s.preOrderHooks??=[]).push(t,y),(s.preOrderCheckHooks??=[]).push(t,y)}l&&(s.preOrderHooks??=[]).push(0-t,l),p&&((s.preOrderHooks??=[]).push(t,p),(s.preOrderCheckHooks??=[]).push(t,p))}(s,p[s],r)}finally{null!==$&&Kn($),Ao(w),y.resolving=!1,ze()}}return l}function Se(t,r,s){return!!(s[r+(t>>Na)]&1<<t)}function Qe(t,r){return!(t&Kt.Self||t&Kt.Host&&r)}class en{constructor(r,s){this._tNode=r,this._lView=s}get(r,s,a){return m(this._tNode,this._lView,r,qt(a),s)}}function bn(){return new en(Yi(),dt())}function sn(t){return Ci(()=>{const r=t.prototype.constructor,s=r[Xt]||St(r),a=Object.prototype;let l=Object.getPrototypeOf(t.prototype).constructor;for(;l&&l!==a;){const p=l[Xt]||St(l);if(p&&p!==s)return p;l=Object.getPrototypeOf(l)}return p=>new p})}function St(t){return mt(t)?()=>{const r=St(it(t));return r&&r()}:er(t)}function wn(t){const r=t[xt],s=r.type;return 2===s?r.declTNode:1===s?t[pi]:null}function Zr(t){return function ic(t,r){if("class"===r)return t.classes;if("style"===r)return t.styles;const s=t.attrs;if(s){const a=s.length;let l=0;for(;l<a;){const p=s[l];if(Es(p))break;if(0===p)l+=2;else if("number"==typeof p)for(l++;l<a&&"string"==typeof s[l];)l++;else{if(p===r)return s[l+1];l+=2}}}return null}(Yi(),t)}const Qr="__parameters__";function Nn(t,r,s){return Ci(()=>{const a=function es(t){return function(...s){if(t){const a=t(...s);for(const l in a)this[l]=a[l]}}}(r);function l(...p){if(this instanceof l)return a.apply(this,p),this;const y=new l(...p);return w.annotation=y,w;function w(P,$,X){const he=P.hasOwnProperty(Qr)?P[Qr]:Object.defineProperty(P,Qr,{value:[]})[Qr];for(;he.length<=X;)he.push(null);return(he[X]=he[X]||[]).push(y),P}}return s&&(l.prototype=Object.create(s.prototype)),l.prototype.ngMetadataName=t,l.annotationCls=l,l})}function ka(t,r){t.forEach(s=>Array.isArray(s)?ka(s,r):r(s))}function Hc(t,r,s){r>=t.length?t.push(s):t.splice(r,0,s)}function ys(t,r){return r>=t.length-1?t.pop():t.splice(r,1)[0]}function ao(t,r){const s=[];for(let a=0;a<t;a++)s.push(r);return s}function ua(t,r,s){let a=Qu(t,r);return a>=0?t[1|a]=s:(a=~a,function fu(t,r,s,a){let l=t.length;if(l==r)t.push(s,a);else if(1===l)t.push(a,t[0]),t[0]=s;else{for(l--,t.push(t[l-1],t[l]);l>r;)t[l]=t[l-2],l--;t[r]=s,t[r+1]=a}}(t,a,r,s)),a}function Fa(t,r){const s=Qu(t,r);if(s>=0)return t[1|s]}function Qu(t,r){return function oc(t,r,s){let a=0,l=t.length>>s;for(;l!==a;){const p=a+(l-a>>1),y=t[p<<s];if(r===y)return p<<s;y>r?l=p:a=p+1}return~(l<<s)}(t,r,1)}const Za=ln(Nn("Optional"),8),Su=ln(Nn("SkipSelf"),4);function xd(t){return 128==(128&t.flags)}var Xu=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Xu||{});const ep=new Map;let Ny=0;const Oh="__ngContext__";function Go(t,r){_n(r)?(t[Oh]=r[Ei],function fi(t){ep.set(t[Ei],t)}(r)):t[Oh]=r}let ap;function up(t,r){return ap(t,r)}function fc(t){const r=t[Er];return Bi(r)?r[Er]:r}function pm(t){return kh(t[bi])}function qs(t){return kh(t[Gi])}function kh(t){for(;null!==t&&!Bi(t);)t=t[Gi];return t}function bl(t,r,s,a,l){if(null!=a){let p,y=!1;Bi(a)?p=a:_n(a)&&(y=!0,a=a[vr]);const w=pt(a);0===t&&null!==s?null==l?wm(r,s,w):Rl(r,s,w,l||null,!0):1===t&&null!==s?Rl(r,s,w,l||null,!0):2===t?function Mu(t,r,s){const a=tl(t,r);a&&function Ly(t,r,s,a){t.removeChild(r,s,a)}(t,a,r,s)}(r,w,y):3===t&&r.destroyNode(w),null!=p&&function bm(t,r,s,a,l){const p=s[Ui];p!==pt(s)&&bl(r,t,a,p,l);for(let w=Tr;w<s.length;w++){const P=s[w];gc(P[xt],P,t,r,a,p)}}(r,t,p,s,l)}}function Ld(t,r,s){return t.createElement(r,s)}function vm(t,r){const s=t[Oo],a=s.indexOf(r);ju(r),s.splice(a,1)}function Sl(t,r){if(t.length<=Tr)return;const s=Tr+r,a=t[s];if(a){const l=a[wr];null!==l&&l!==t&&vm(l,a),r>0&&(t[s-1][Gi]=a[Gi]);const p=ys(t,Tr+r);!function gm(t,r){gc(t,r,r[fn],2,null,null),r[vr]=null,r[pi]=null}(a[xt],a);const y=p[Or];null!==y&&y.detachView(p[xt]),a[Er]=null,a[Gi]=null,a[dn]&=-129}return a}function Vd(t,r){if(!(256&r[dn])){const s=r[fn];r[Ii]&&mr(r[Ii]),r[$s]&&mr(r[$s]),s.destroyNode&&gc(t,r,s,3,null,null),function _m(t){let r=t[bi];if(!r)return cp(t[xt],t);for(;r;){let s=null;if(_n(r))s=r[bi];else{const a=r[Tr];a&&(s=a)}if(!s){for(;r&&!r[Gi]&&r!==t;)_n(r)&&cp(r[xt],r),r=r[Er];null===r&&(r=t),_n(r)&&cp(r[xt],r),s=r&&r[Gi]}r=s}}(r)}}function cp(t,r){if(!(256&r[dn])){r[dn]&=-129,r[dn]|=256,function dp(t,r){let s;if(null!=t&&null!=(s=t.destroyHooks))for(let a=0;a<s.length;a+=2){const l=r[s[a]];if(!(l instanceof Du)){const p=s[a+1];if(Array.isArray(p))for(let y=0;y<p.length;y+=2){const w=l[p[y]],P=p[y+1];bt(4,w,P);try{P.call(w)}finally{bt(5,w,P)}}else{bt(4,l,p);try{p.call(l)}finally{bt(5,l,p)}}}}}(t,r),function Em(t,r){const s=t.cleanup,a=r[Zi];if(null!==s)for(let p=0;p<s.length-1;p+=2)if("string"==typeof s[p]){const y=s[p+3];y>=0?a[y]():a[-y].unsubscribe(),p+=2}else s[p].call(a[s[p+1]]);null!==a&&(r[Zi]=null);const l=r[hs];if(null!==l){r[hs]=null;for(let p=0;p<l.length;p++)(0,l[p])()}}(t,r),1===r[xt].type&&r[fn].destroy();const s=r[wr];if(null!==s&&Bi(r[Er])){s!==r[Er]&&vm(s,r);const a=r[Or];null!==a&&a.detachView(t)}!function cm(t){ep.delete(t[Ei])}(r)}}function Fh(t,r,s){return function Im(t,r,s){let a=r;for(;null!==a&&40&a.type;)a=(r=a).parent;if(null===a)return s[vr];{const{componentOffset:l}=a;if(l>-1){const{encapsulation:p}=t.data[a.directiveStart+l];if(p===ar.None||p===ar.Emulated)return null}return Kr(a,s)}}(t,r.parent,s)}function Rl(t,r,s,a,l){t.insertBefore(r,s,a,l)}function wm(t,r,s){t.appendChild(r,s)}function Tm(t,r,s,a,l){null!==a?Rl(t,r,s,a,l):wm(t,r,s)}function tl(t,r){return t.parentNode(r)}function Am(t,r,s){return Pu(t,r,s)}let Lh,Nl,mc,jd,Pu=function hp(t,r,s){return 40&t.type?Kr(t,s):null};function Ud(t,r,s,a){const l=Fh(t,a,r),p=r[fn],w=Am(a.parent||r[pi],a,r);if(null!=l)if(Array.isArray(s))for(let P=0;P<s.length;P++)Tm(p,l,s[P],w,!1);else Tm(p,l,s,w,!1);void 0!==Lh&&Lh(p,a,r,s,l)}function Pl(t,r){if(null!==r){const s=r.type;if(3&s)return Kr(r,t);if(4&s)return nl(-1,t[r.index]);if(8&s){const a=r.child;if(null!==a)return Pl(t,a);{const l=t[r.index];return Bi(l)?nl(-1,l):pt(l)}}if(32&s)return up(r,t)()||pt(t[r.index]);{const a=Ml(t,r);return null!==a?Array.isArray(a)?a[0]:Pl(fc(t[Vr]),a):Pl(t,r.next)}}return null}function Ml(t,r){return null!==r?t[Vr][pi].projection[r.projection]:null}function nl(t,r){const s=Tr+t+1;if(s<r.length){const a=r[s],l=a[xt].firstChild;if(null!==l)return Pl(a,l)}return r[Ui]}function Vh(t,r,s,a,l,p,y){for(;null!=s;){const w=a[s.index],P=s.type;if(y&&0===r&&(w&&Go(pt(w),a),s.flags|=2),32!=(32&s.flags))if(8&P)Vh(t,r,s.child,a,l,p,!1),bl(r,t,l,w,p);else if(32&P){const $=up(s,a);let X;for(;X=$();)bl(r,t,l,X,p);bl(r,t,l,w,p)}else 16&P?pp(t,r,a,s,l,p):bl(r,t,l,w,p);s=y?s.projectionNext:s.next}}function gc(t,r,s,a,l,p){Vh(s,a,t.firstChild,r,l,p,!1)}function pp(t,r,s,a,l,p){const y=s[Vr],P=y[pi].projection[a.projection];if(Array.isArray(P))for(let $=0;$<P.length;$++)bl(r,t,l,P[$],p);else{let $=P;const X=y[Er];xd(a)&&($.flags|=128),Vh(t,r,$,X,l,p,!0)}}function gp(t,r,s){""===s?t.removeAttribute(r,"class"):t.setAttribute(r,"class",s)}function Bd(t,r,s){const{mergedAttrs:a,classes:l,styles:p}=s;null!==a&&ui(t,r,a),null!==l&&gp(t,r,l),null!==p&&function Sm(t,r,s){t.setAttribute(r,"style",s)}(t,r,p)}function nd(t){return function rl(){if(void 0===Nl&&(Nl=null,Rn.trustedTypes))try{Nl=Rn.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return Nl}()?.createHTML(t)||t}function _c(t){mc=t}function Va(){if(void 0!==mc)return mc;if(typeof document<"u")return document;throw new ce(210,!1)}function Uh(){if(void 0===jd&&(jd=null,Rn.trustedTypes))try{jd=Rn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return jd}function mp(t){return Uh()?.createHTML(t)||t}function Bh(t){return Uh()?.createScriptURL(t)||t}class il{constructor(r){this.changingThisBreaksApplicationSecurity=r}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${ot})`}}class Mm extends il{getTypeName(){return"HTML"}}class _p extends il{getTypeName(){return"Style"}}class yp extends il{getTypeName(){return"Script"}}class Nm extends il{getTypeName(){return"URL"}}class jh extends il{getTypeName(){return"ResourceURL"}}function sl(t){return t instanceof il?t.changingThisBreaksApplicationSecurity:t}function Ol(t,r){const s=function $h(t){return t instanceof il&&t.getTypeName()||null}(t);if(null!=s&&s!==r){if("ResourceURL"===s&&"URL"===r)return!0;throw new Error(`Required a safe ${r}, got a ${s} (see ${ot})`)}return s===r}function jy(t){return new Mm(t)}function Om(t){return new _p(t)}function rd(t){return new yp(t)}function $d(t){return new Nm(t)}function id(t){return new jh(t)}class xm{constructor(r){this.inertDocumentHelper=r}getInertBodyElement(r){r="<body><remove></remove>"+r;try{const s=(new window.DOMParser).parseFromString(nd(r),"text/html").body;return null===s?this.inertDocumentHelper.getInertBodyElement(r):(s.removeChild(s.firstChild),s)}catch{return null}}}class la{constructor(r){this.defaultDoc=r,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(r){const s=this.inertDocument.createElement("template");return s.innerHTML=nd(r),s}}const Hh=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function yc(t){return(t=String(t)).match(Hh)?t:"unsafe:"+t}function Nu(t){const r={};for(const s of t.split(","))r[s]=!0;return r}function Ja(...t){const r={};for(const s of t)for(const a in s)s.hasOwnProperty(a)&&(r[a]=!0);return r}const vc=Nu("area,br,col,hr,img,wbr"),Ep=Nu("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),xl=Nu("rp,rt"),Ou=Ja(vc,Ja(Ep,Nu("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Ja(xl,Nu("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Ja(xl,Ep)),zh=Nu("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Fm=Ja(zh,Nu("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Nu("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Lm=Nu("script,style,template");class zy{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(r){let s=r.firstChild,a=!0;for(;s;)if(s.nodeType===Node.ELEMENT_NODE?a=this.startElement(s):s.nodeType===Node.TEXT_NODE?this.chars(s.nodeValue):this.sanitizedSomething=!0,a&&s.firstChild)s=s.firstChild;else for(;s;){s.nodeType===Node.ELEMENT_NODE&&this.endElement(s);let l=this.checkClobberedElement(s,s.nextSibling);if(l){s=l;break}s=this.checkClobberedElement(s,s.parentNode)}return this.buf.join("")}startElement(r){const s=r.nodeName.toLowerCase();if(!Ou.hasOwnProperty(s))return this.sanitizedSomething=!0,!Lm.hasOwnProperty(s);this.buf.push("<"),this.buf.push(s);const a=r.attributes;for(let l=0;l<a.length;l++){const p=a.item(l),y=p.name,w=y.toLowerCase();if(!Fm.hasOwnProperty(w)){this.sanitizedSomething=!0;continue}let P=p.value;zh[w]&&(P=yc(P)),this.buf.push(" ",y,'="',Um(P),'"')}return this.buf.push(">"),!0}endElement(r){const s=r.nodeName.toLowerCase();Ou.hasOwnProperty(s)&&!vc.hasOwnProperty(s)&&(this.buf.push("</"),this.buf.push(s),this.buf.push(">"))}chars(r){this.buf.push(Um(r))}checkClobberedElement(r,s){if(s&&(r.compareDocumentPosition(s)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${r.outerHTML}`);return s}}const Gh=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Vm=/([^\#-~ |!])/g;function Um(t){return t.replace(/&/g,"&amp;").replace(Gh,function(r){return"&#"+(1024*(r.charCodeAt(0)-55296)+(r.charCodeAt(1)-56320)+65536)+";"}).replace(Vm,function(r){return"&#"+r.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let zd;function Bm(t,r){let s=null;try{zd=zd||function vp(t){const r=new la(t);return function km(){try{return!!(new window.DOMParser).parseFromString(nd(""),"text/html")}catch{return!1}}()?new xm(r):r}(t);let a=r?String(r):"";s=zd.getInertBodyElement(a);let l=5,p=a;do{if(0===l)throw new Error("Failed to sanitize html because the input is unstable");l--,a=p,p=s.innerHTML,s=zd.getInertBodyElement(a)}while(a!==p);return nd((new zy).sanitizeChildren(Wh(s)||s))}finally{if(s){const a=Wh(s)||s;for(;a.firstChild;)a.removeChild(a.firstChild)}}}function Wh(t){return"content"in t&&function Ec(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var _u=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(_u||{});function Ip(t){const r=Gd();return r?mp(r.sanitize(_u.HTML,t)||""):Ol(t,"HTML")?mp(sl(t)):Bm(Va(),Ae(t))}function wp(t){const r=Gd();return r?r.sanitize(_u.URL,t)||"":Ol(t,"URL")?sl(t):yc(Ae(t))}function Tp(t){const r=Gd();if(r)return Bh(r.sanitize(_u.RESOURCE_URL,t)||"");if(Ol(t,"ResourceURL"))return Bh(sl(t));throw new ce(904,!1)}function $m(t,r,s){return function Wo(t,r){return"src"===r&&("embed"===t||"frame"===t||"iframe"===t||"media"===t||"script"===t)||"href"===r&&("base"===t||"link"===t)?Tp:wp}(r,s)(t)}function Gd(){const t=dt();return t&&t[ss].sanitizer}const Ic=new $t("ENVIRONMENT_INITIALIZER"),Hm=new $t("INJECTOR",-1),Wd=new $t("INJECTOR_DEF_TYPES");class sd{get(r,s=fr){if(s===fr){const a=new Error(`NullInjectorError: No provider for ${ve(r)}!`);throw a.name="NullInjectorError",a}return s}}function Ap(t){return{\u0275providers:t}}function zm(...t){return{\u0275providers:qh(0,t),\u0275fromNgModule:!0}}function qh(t,...r){const s=[],a=new Set;let l;const p=y=>{s.push(y)};return ka(r,y=>{const w=y;kl(w,p,[],a)&&(l||=[],l.push(w))}),void 0!==l&&Kh(l,p),s}function Kh(t,r){for(let s=0;s<t.length;s++){const{ngModule:a,providers:l}=t[s];qd(l,p=>{r(p,a)})}}function kl(t,r,s,a){if(!(t=it(t)))return!1;let l=null,p=Ir(t);const y=!p&&Wn(t);if(p||y){if(y&&!y.standalone)return!1;l=t}else{const P=t.ngModule;if(p=Ir(P),!p)return!1;l=P}const w=a.has(l);if(y){if(w)return!1;if(a.add(l),y.dependencies){const P="function"==typeof y.dependencies?y.dependencies():y.dependencies;for(const $ of P)kl($,r,s,a)}}else{if(!p)return!1;{if(null!=p.imports&&!w){let $;a.add(l);try{ka(p.imports,X=>{kl(X,r,s,a)&&($||=[],$.push(X))})}finally{}void 0!==$&&Kh($,r)}if(!w){const $=er(l)||(()=>new l);r({provide:l,useFactory:$,deps:ke},l),r({provide:Wd,useValue:l,multi:!0},l),r({provide:Ic,useValue:()=>_t(l),multi:!0},l)}const P=p.providers;if(null!=P&&!w){const $=t;qd(P,X=>{r(X,$)})}}}return l!==t&&void 0!==t.providers}function qd(t,r){for(let s of t)nt(s)&&(s=s.\u0275providers),Array.isArray(s)?qd(s,r):r(s)}const bp=re({provide:String,useValue:re});function Sp(t){return null!==t&&"object"==typeof t&&bp in t}function Fl(t){return"function"==typeof t}const Kd=new $t("Set Injector scope."),Zh={},qm={};let Pp;function Zd(){return void 0===Pp&&(Pp=new sd),Pp}class xu{}class yu extends xu{get destroyed(){return this._destroyed}constructor(r,s,a,l){super(),this.parent=s,this.source=a,this.scopes=l,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,xp(r,y=>this.processProvider(y)),this.records.set(Hm,wc(void 0,this)),l.has("environment")&&this.records.set(xu,wc(void 0,this));const p=this.records.get(Kd);null!=p&&"string"==typeof p.value&&this.scopes.add(p.value),this.injectorDefTypes=new Set(this.get(Wd.multi,ke,Kt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const s of this._ngOnDestroyHooks)s.ngOnDestroy();const r=this._onDestroyHooks;this._onDestroyHooks=[];for(const s of r)s()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(r){return this.assertNotDestroyed(),this._onDestroyHooks.push(r),()=>this.removeOnDestroy(r)}runInContext(r){this.assertNotDestroyed();const s=Pe(this),a=Kn(void 0);try{return r()}finally{Pe(s),Kn(a)}}get(r,s=fr,a=Kt.Default){if(this.assertNotDestroyed(),r.hasOwnProperty(xn))return r[xn](this);a=qt(a);const p=Pe(this),y=Kn(void 0);try{if(!(a&Kt.SkipSelf)){let P=this.records.get(r);if(void 0===P){const $=function Op(t){return"function"==typeof t||"object"==typeof t&&t instanceof $t}(r)&&Ln(r);P=$&&this.injectableDefInScope($)?wc(Ll(r),Zh):null,this.records.set(r,P)}if(null!=P)return this.hydrate(r,P)}return(a&Kt.Self?Zd():this.parent).get(r,s=a&Kt.Optional&&s===fr?null:s)}catch(w){if("NullInjectorError"===w.name){if((w[rr]=w[rr]||[]).unshift(ve(r)),p)throw w;return function vs(t,r,s,a){const l=t[rr];throw r[F]&&l.unshift(r[F]),t.message=function as(t,r,s,a=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.slice(2):t;let l=ve(r);if(Array.isArray(r))l=r.map(ve).join(" -> ");else if("object"==typeof r){let p=[];for(let y in r)if(r.hasOwnProperty(y)){let w=r[y];p.push(y+":"+("string"==typeof w?JSON.stringify(w):ve(w)))}l=`{${p.join(", ")}}`}return`${s}${a?"("+a+")":""}[${l}]: ${t.replace(ne,"\n  ")}`}("\n"+t.message,l,s,a),t.ngTokenPath=l,t[rr]=null,t}(w,r,"R3InjectorError",this.source)}throw w}finally{Kn(y),Pe(p)}}resolveInjectorInitializers(){const r=Pe(this),s=Kn(void 0);try{const l=this.get(Ic.multi,ke,Kt.Self);for(const p of l)p()}finally{Pe(r),Kn(s)}}toString(){const r=[],s=this.records;for(const a of s.keys())r.push(ve(a));return`R3Injector[${r.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ce(205,!1)}processProvider(r){let s=Fl(r=it(r))?r:it(r&&r.provide);const a=function Qh(t){return Sp(t)?wc(void 0,t.useValue):wc(Np(t),Zh)}(r);if(Fl(r)||!0!==r.multi)this.records.get(s);else{let l=this.records.get(s);l||(l=wc(void 0,Zh,!0),l.factory=()=>Gn(l.multi),this.records.set(s,l)),s=r,l.multi.push(r)}this.records.set(s,a)}hydrate(r,s){return s.value===Zh&&(s.value=qm,s.value=s.factory()),"object"==typeof s.value&&s.value&&function qy(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(s.value)&&this._ngOnDestroyHooks.add(s.value),s.value}injectableDefInScope(r){if(!r.providedIn)return!1;const s=it(r.providedIn);return"string"==typeof s?"any"===s||this.scopes.has(s):this.injectorDefTypes.has(s)}removeOnDestroy(r){const s=this._onDestroyHooks.indexOf(r);-1!==s&&this._onDestroyHooks.splice(s,1)}}function Ll(t){const r=Ln(t),s=null!==r?r.factory:er(t);if(null!==s)return s;if(t instanceof $t)throw new ce(204,!1);if(t instanceof Function)return function Mp(t){const r=t.length;if(r>0)throw ao(r,"?"),new ce(204,!1);const s=function An(t){return t&&(t[Vn]||t[On])||null}(t);return null!==s?()=>s.factory(t):()=>new t}(t);throw new ce(204,!1)}function Np(t,r,s){let a;if(Fl(t)){const l=it(t);return er(l)||Ll(l)}if(Sp(t))a=()=>it(t.useValue);else if(function Gm(t){return!(!t||!t.useFactory)}(t))a=()=>t.useFactory(...Gn(t.deps||[]));else if(function Rp(t){return!(!t||!t.useExisting)}(t))a=()=>_t(it(t.useExisting));else{const l=it(t&&(t.useClass||t.provide));if(!function Km(t){return!!t.deps}(t))return er(l)||Ll(l);a=()=>new l(...Gn(t.deps))}return a}function wc(t,r,s=!1){return{factory:t,value:r,multi:s?[]:void 0}}function xp(t,r){for(const s of t)Array.isArray(s)?xp(s,r):s&&nt(s)?xp(s.\u0275providers,r):r(s)}const Yh=new $t("AppId",{providedIn:"root",factory:()=>Zm}),Zm="ng",kp=new $t("Platform Initializer"),Qd=new $t("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Yd=new $t("AnimationModuleType"),Jh=new $t("CSP nonce",{providedIn:"root",factory:()=>Va().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let Jm=(t,r,s)=>null;function $p(t,r,s=!1){return Jm(t,r,s)}class t_{}class n_{}class Jy{resolveComponentFactory(r){throw function zp(t){const r=Error(`No component factory found for ${ve(t)}.`);return r.ngComponent=t,r}(r)}}let dd=(()=>{class t{static#e=this.NULL=new Jy}return t})();function rf(){return Ul(Yi(),dt())}function Ul(t,r){return new hd(Kr(t,r))}let hd=(()=>{class t{constructor(s){this.nativeElement=s}static#e=this.__NG_ELEMENT_ID__=rf}return t})();function fd(t){return t instanceof hd?t.nativeElement:t}class sf{}let Xy=(()=>{class t{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function ev(){const t=dt(),s=Lo(Yi().index,t);return(_n(s)?s:t)[fn]}()}return t})(),s_=(()=>{class t{static#e=this.\u0275prov=Gt({token:t,providedIn:"root",factory:()=>null})}return t})();class Gp{constructor(r){this.full=r,this.major=r.split(".")[0],this.minor=r.split(".")[1],this.patch=r.split(".").slice(2).join(".")}}const o_=new Gp("16.2.12"),nh={};function al(t,r=null,s=null,a){const l=lf(t,r,s,a);return l.resolveInjectorInitializers(),l}function lf(t,r=null,s=null,a,l=new Set){const p=[s||ke,zm(t)];return a=a||("object"==typeof t?void 0:ve(t)),new yu(p,r||Zd(),a||null,l)}let ca=(()=>{class t{static#e=this.THROW_IF_NOT_FOUND=fr;static#t=this.NULL=new sd;static create(s,a){if(Array.isArray(s))return al({name:""},a,s,"");{const l=s.name??"";return al({name:l},s.parent,s.providers,l)}}static#n=this.\u0275prov=Gt({token:t,providedIn:"any",factory:()=>_t(Hm)});static#r=this.__NG_ELEMENT_ID__=-1}return t})();function Bl(t){return t.ngOriginalError}class jl{constructor(){this._console=console}handleError(r){const s=this._findOriginalError(r);this._console.error("ERROR",r),s&&this._console.error("ORIGINAL ERROR",s)}_findOriginalError(r){let s=r&&Bl(r);for(;s&&Bl(s);)s=Bl(s);return s||null}}function sh(t){return r=>{setTimeout(t,void 0,r)}}const ku=class Yp extends f.x{constructor(r=!1){super(),this.__isAsync=r}emit(r){super.next(r)}subscribe(r,s,a){let l=r,p=s||(()=>null),y=a;if(r&&"object"==typeof r){const P=r;l=P.next?.bind(P),p=P.error?.bind(P),y=P.complete?.bind(P)}this.__isAsync&&(p=sh(p),l&&(l=sh(l)),y&&(y=sh(y)));const w=super.subscribe({next:l,error:p,complete:y});return r instanceof Z.w0&&r.add(w),w}};function c_(...t){}class So{constructor({enableLongStackTrace:r=!1,shouldCoalesceEventChangeDetection:s=!1,shouldCoalesceRunChangeDetection:a=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ku(!1),this.onMicrotaskEmpty=new ku(!1),this.onStable=new ku(!1),this.onError=new ku(!1),typeof Zone>"u")throw new ce(908,!1);Zone.assertZonePatched();const l=this;l._nesting=0,l._outer=l._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(l._inner=l._inner.fork(new Zone.TaskTrackingZoneSpec)),r&&Zone.longStackTraceZoneSpec&&(l._inner=l._inner.fork(Zone.longStackTraceZoneSpec)),l.shouldCoalesceEventChangeDetection=!a&&s,l.shouldCoalesceRunChangeDetection=a,l.lastRequestAnimationFrameId=-1,l.nativeRequestAnimationFrame=function Jp(){const t="function"==typeof Rn.requestAnimationFrame;let r=Rn[t?"requestAnimationFrame":"setTimeout"],s=Rn[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&r&&s){const a=r[Zone.__symbol__("OriginalDelegate")];a&&(r=a);const l=s[Zone.__symbol__("OriginalDelegate")];l&&(s=l)}return{nativeRequestAnimationFrame:r,nativeCancelAnimationFrame:s}}().nativeRequestAnimationFrame,function rv(t){const r=()=>{!function h_(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(Rn,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,cf(t),t.isCheckStableRunning=!0,eg(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),cf(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(s,a,l,p,y,w)=>{if(function iv(t){return!(!Array.isArray(t)||1!==t.length)&&!0===t[0].data?.__ignore_ng_zone__}(w))return s.invokeTask(l,p,y,w);try{return tg(t),s.invokeTask(l,p,y,w)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===p.type||t.shouldCoalesceRunChangeDetection)&&r(),ng(t)}},onInvoke:(s,a,l,p,y,w,P)=>{try{return tg(t),s.invoke(l,p,y,w,P)}finally{t.shouldCoalesceRunChangeDetection&&r(),ng(t)}},onHasTask:(s,a,l,p)=>{s.hasTask(l,p),a===l&&("microTask"==p.change?(t._hasPendingMicrotasks=p.microTask,cf(t),eg(t)):"macroTask"==p.change&&(t.hasPendingMacrotasks=p.macroTask))},onHandleError:(s,a,l,p)=>(s.handleError(l,p),t.runOutsideAngular(()=>t.onError.emit(p)),!1)})}(l)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!So.isInAngularZone())throw new ce(909,!1)}static assertNotInAngularZone(){if(So.isInAngularZone())throw new ce(909,!1)}run(r,s,a){return this._inner.run(r,s,a)}runTask(r,s,a,l){const p=this._inner,y=p.scheduleEventTask("NgZoneEvent: "+l,r,Xp,c_,c_);try{return p.runTask(y,s,a)}finally{p.cancelTask(y)}}runGuarded(r,s,a){return this._inner.runGuarded(r,s,a)}runOutsideAngular(r){return this._outer.run(r)}}const Xp={};function eg(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function cf(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function tg(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function ng(t){t._nesting--,eg(t)}class f_{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ku,this.onMicrotaskEmpty=new ku,this.onStable=new ku,this.onError=new ku}run(r,s,a){return r.apply(s,a)}runGuarded(r,s,a){return r.apply(s,a)}runOutsideAngular(r){return r()}runTask(r,s,a,l){return r.apply(s,a)}}const p_=new $t("",{providedIn:"root",factory:g_});function g_(){const t=wt(So);let r=!0;const s=new q.y(l=>{r=t.isStable&&!t.hasPendingMacrotasks&&!t.hasPendingMicrotasks,t.runOutsideAngular(()=>{l.next(r),l.complete()})}),a=new q.y(l=>{let p;t.runOutsideAngular(()=>{p=t.onStable.subscribe(()=>{So.assertNotInAngularZone(),queueMicrotask(()=>{!r&&!t.hasPendingMacrotasks&&!t.hasPendingMicrotasks&&(r=!0,l.next(!0))})})});const y=t.onUnstable.subscribe(()=>{So.assertInAngularZone(),r&&(r=!1,t.runOutsideAngular(()=>{l.next(!1)}))});return()=>{p.unsubscribe(),y.unsubscribe()}});return(0,ye.T)(s,a.pipe((0,De.B)()))}function Fu(t){return t instanceof Function?t():t}let og=(()=>{class t{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static#e=this.\u0275prov=Gt({token:t,providedIn:"root",factory:()=>new t})}return t})();function Cc(t){for(;t;){t[dn]|=64;const r=fc(t);if(co(t)&&!r)return t;t=r}return null}const ag=new $t("",{providedIn:"root",factory:()=>!1});let ul=null;function cg(t,r){return t[r]??Lu()}function mf(t,r){const s=Lu();s.producerNode?.length&&(t[r]=ul,s.lView=t,ul=_f())}const uv={...to,consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{Cc(t.lView)},lView:null};function _f(){return Object.create(uv)}function Lu(){return ul??=_f(),ul}const sr={};function T_(t){yf(xr(),dt(),Mn()+t,!1)}function yf(t,r,s,a){if(!a)if(3==(3&r[dn])){const p=t.preOrderCheckHooks;null!==p&&lu(r,p,s)}else{const p=t.preOrderHooks;null!==p&&cu(r,p,0,s)}Ss(s)}function pd(t,r=Kt.Default){const s=dt();return null===s?_t(t,r):m(Yi(),s,it(t),r)}function D_(){throw new Error("invalid")}function vf(t,r,s,a,l,p,y,w,P,$,X){const he=r.blueprint.slice();return he[vr]=l,he[dn]=140|a,(null!==$||t&&2048&t[dn])&&(he[dn]|=2048),ia(he),he[Er]=he[Wi]=t,he[Jn]=s,he[ss]=y||t&&t[ss],he[fn]=w||t&&t[fn],he[gi]=P||t&&t[gi]||null,he[pi]=p,he[Ei]=function go(){return Ny++}(),he[Vi]=X,he[No]=$,he[Vr]=2==r.type?t[Vr]:he,he}function zl(t,r,s,a,l){let p=t.data[r];if(null===p)p=function hg(t,r,s,a,l){const p=qi(),y=ou(),P=t.data[r]=function uh(t,r,s,a,l,p){let y=r?r.injectorIndex:-1,w=0;return wo()&&(w|=128),{type:s,index:a,insertBeforeIndex:null,injectorIndex:y,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:w,providerIndexes:0,value:l,attrs:p,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:r,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,y?p:p&&p.parent,s,r,a,l);return null===t.firstChild&&(t.firstChild=P),null!==p&&(y?null==p.child&&null!==P.parent&&(p.child=P):null===p.next&&(p.next=P,P.prev=p)),P}(t,r,s,a,l),function wl(){return Zt.lFrame.inI18n}()&&(p.flags|=32);else if(64&p.type){p.type=s,p.value=a,p.attrs=l;const y=function su(){const t=Zt.lFrame,r=t.currentTNode;return t.isParent?r:r.parent}();p.injectorIndex=null===y?-1:y.injectorIndex}return os(p,!0),p}function bc(t,r,s,a){if(0===s)return-1;const l=r.length;for(let p=0;p<s;p++)r.push(a),t.blueprint.push(a),t.data.push(null);return l}function A_(t,r,s,a,l){const p=cg(r,Ii),y=Mn(),w=2&a;try{Ss(-1),w&&r.length>Qn&&yf(t,r,Qn,!1),bt(w?2:0,l);const $=w?p:null,X=Sa($);try{null!==$&&($.dirty=!1),s(a,l)}finally{Hs($,X)}}finally{w&&null===r[Ii]&&mf(r,Ii),Ss(y),bt(w?3:1,l)}}function oh(t,r,s){if(ps(r)){const a=Ar(null);try{const p=r.directiveEnd;for(let y=r.directiveStart;y<p;y++){const w=t.data[y];w.contentQueries&&w.contentQueries(1,s[y],y)}}finally{Ar(a)}}}function Ef(t,r,s){Vt()&&(function vg(t,r,s,a){const l=s.directiveStart,p=s.directiveEnd;xo(s)&&function M_(t,r,s){const a=Kr(r,t),l=fg(s);let y=16;s.signals?y=4096:s.onPush&&(y=64);const w=ch(t,vf(t,l,null,y,a,r,null,t[ss].rendererFactory.createRenderer(a,s),null,null,null));t[r.index]=w}(r,s,t.data[l+s.componentOffset]),t.firstCreatePass||du(s,r),Go(a,r);const y=s.initialInputs;for(let w=l;w<p;w++){const P=t.data[w],$=ue(r,t,w,s);Go($,r),null!==y&&_d(0,w-l,$,P,0,y),ji(P)&&(Lo(s.index,r)[Jn]=ue(r,t,w,s))}}(t,r,s,Kr(s,r)),64==(64&s.flags)&&Cf(t,r,s))}function ah(t,r,s=Kr){const a=r.localNames;if(null!==a){let l=r.index+1;for(let p=0;p<a.length;p+=2){const y=a[p+1],w=-1===y?s(r,t):t[y];t[l++]=w}}}function fg(t){const r=t.tView;return null===r||r.incompleteFirstPass?t.tView=pg(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):r}function pg(t,r,s,a,l,p,y,w,P,$,X){const he=Qn+a,Me=he+l,je=function lv(t,r){const s=[];for(let a=0;a<r;a++)s.push(a<t?null:sr);return s}(he,Me),lt="function"==typeof $?$():$;return je[xt]={type:t,blueprint:je,template:s,queries:null,viewQuery:w,declTNode:r,data:je.slice().fill(null,he),bindingStartIndex:he,expandoStartIndex:Me,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof p?p():p,pipeRegistry:"function"==typeof y?y():y,firstChild:null,schemas:P,consts:lt,incompleteFirstPass:!1,ssrId:X}}let If=t=>null;function C_(t,r,s,a){for(let l in t)if(t.hasOwnProperty(l)){s=null===s?{}:s;const p=t[l];null===a?Tf(s,r,l,p):a.hasOwnProperty(l)&&Tf(s,r,a[l],p)}return s}function Tf(t,r,s,a){t.hasOwnProperty(s)?t[s].push(r,a):t[s]=[r,a]}function Ca(t,r,s,a,l,p,y,w){const P=Kr(r,s);let X,$=r.inputs;!w&&null!=$&&(X=$[a])?(Tg(t,s,X,a,l),xo(r)&&function Df(t,r){const s=Lo(r,t);16&s[dn]||(s[dn]|=64)}(s,r.index)):3&r.type&&(a=function gd(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(a),l=null!=y?y(l,r.value||"",a):l,p.setProperty(P,a,l))}function _g(t,r,s,a){if(Vt()){const l=null===a?null:{"":-1},p=function Eg(t,r){const s=t.directiveRegistry;let a=null,l=null;if(s)for(let p=0;p<s.length;p++){const y=s[p];if(Us(r,y.selectors,!1))if(a||(a=[]),ji(y))if(null!==y.findHostDirectiveDefs){const w=[];l=l||new Map,y.findHostDirectiveDefs(y,w,l),a.unshift(...w,y),lh(t,r,w.length)}else a.unshift(y),lh(t,r,0);else l=l||new Map,y.findHostDirectiveDefs?.(y,a,l),a.push(y)}return null===a?null:[a,l]}(t,s);let y,w;null===p?y=w=null:[y,w]=p,null!==y&&S_(t,r,s,y,l,w),l&&function bf(t,r,s){if(r){const a=t.localNames=[];for(let l=0;l<r.length;l+=2){const p=s[r[l+1]];if(null==p)throw new ce(-301,!1);a.push(r[l],p)}}}(s,a,l)}s.mergedAttrs=Xn(s.mergedAttrs,s.attrs)}function S_(t,r,s,a,l,p){for(let $=0;$<a.length;$++)ga(du(s,r),t,a[$].type);!function P_(t,r,s){t.flags|=1,t.directiveStart=r,t.directiveEnd=r+s,t.providerIndexes=r}(s,t.data.length,a.length);for(let $=0;$<a.length;$++){const X=a[$];X.providersResolver&&X.providersResolver(X)}let y=!1,w=!1,P=bc(t,r,a.length,null);for(let $=0;$<a.length;$++){const X=a[$];s.mergedAttrs=Xn(s.mergedAttrs,X.hostAttrs),md(t,s,r,P,X),Ig(P,X,l),null!==X.contentQueries&&(s.flags|=4),(null!==X.hostBindings||null!==X.hostAttrs||0!==X.hostVars)&&(s.flags|=64);const he=X.type.prototype;!y&&(he.ngOnChanges||he.ngOnInit||he.ngDoCheck)&&((t.preOrderHooks??=[]).push(s.index),y=!0),!w&&(he.ngOnChanges||he.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(s.index),w=!0),P++}!function b_(t,r,s){const l=r.directiveEnd,p=t.data,y=r.attrs,w=[];let P=null,$=null;for(let X=r.directiveStart;X<l;X++){const he=p[X],Me=s?s.get(he):null,lt=Me?Me.outputs:null;P=C_(he.inputs,X,P,Me?Me.inputs:null),$=C_(he.outputs,X,$,lt);const Ct=null===P||null===y||Zs(r)?null:fv(P,X,y);w.push(Ct)}null!==P&&(P.hasOwnProperty("class")&&(r.flags|=8),P.hasOwnProperty("style")&&(r.flags|=16)),r.initialInputs=w,r.inputs=P,r.outputs=$}(t,s,p)}function Cf(t,r,s){const a=s.directiveStart,l=s.directiveEnd,p=s.index,y=function fo(){return Zt.lFrame.currentDirectiveIndex}();try{Ss(p);for(let w=a;w<l;w++){const P=t.data[w],$=r[w];uu(w),(null!==P.hostBindings||0!==P.hostVars||null!==P.hostAttrs)&&R_(P,$)}}finally{Ss(-1),uu(y)}}function R_(t,r){null!==t.hostBindings&&t.hostBindings(1,r)}function lh(t,r,s){r.componentOffset=s,(t.components??=[]).push(r.index)}function Ig(t,r,s){if(s){if(r.exportAs)for(let a=0;a<r.exportAs.length;a++)s[r.exportAs[a]]=t;ji(r)&&(s[""]=t)}}function md(t,r,s,a,l){t.data[a]=l;const p=l.factory||(l.factory=er(l.type)),y=new Du(p,ji(l),pd);t.blueprint[a]=y,s[a]=y,function Af(t,r,s,a,l){const p=l.hostBindings;if(p){let y=t.hostBindingOpCodes;null===y&&(y=t.hostBindingOpCodes=[]);const w=~r.index;(function yg(t){let r=t.length;for(;r>0;){const s=t[--r];if("number"==typeof s&&s<0)return s}return 0})(y)!=w&&y.push(w),y.push(s,a,p)}}(t,r,a,bc(t,s,l.hostVars,sr),l)}function Xa(t,r,s,a,l,p){const y=Kr(t,r);!function Sf(t,r,s,a,l,p,y){if(null==p)t.removeAttribute(r,l,s);else{const w=null==y?Ae(p):y(p,a||"",l);t.setAttribute(r,l,w,s)}}(r[fn],y,p,t.value,s,a,l)}function _d(t,r,s,a,l,p){const y=p[r];if(null!==y)for(let w=0;w<y.length;)Rf(a,s,y[w++],y[w++],y[w++])}function Rf(t,r,s,a,l){const p=Ar(null);try{const y=t.inputTransforms;null!==y&&y.hasOwnProperty(a)&&(l=y[a].call(r,l)),null!==t.setInput?t.setInput(r,l,s,a):r[a]=l}finally{Ar(p)}}function fv(t,r,s){let a=null,l=0;for(;l<s.length;){const p=s[l];if(0!==p)if(5!==p){if("number"==typeof p)break;if(t.hasOwnProperty(p)){null===a&&(a=[]);const y=t[p];for(let w=0;w<y.length;w+=2)if(y[w]===r){a.push(p,y[w+1],s[l+1]);break}}l+=2}else l+=2;else l+=4}return a}function N_(t,r,s,a){return[t,!0,!1,r,null,0,a,s,null,null,null]}function O_(t,r){const s=t.contentQueries;if(null!==s)for(let a=0;a<s.length;a+=2){const p=s[a+1];if(-1!==p){const y=t.data[p];R(s[a]),y.contentQueries(2,r[p],p)}}}function ch(t,r){return t[bi]?t[Os][Gi]=r:t[bi]=r,t[Os]=r,r}function wg(t,r,s){R(0);const a=Ar(null);try{r(t,s)}finally{Ar(a)}}function x_(t){return t[Zi]||(t[Zi]=[])}function k_(t){return t.cleanup||(t.cleanup=[])}function L_(t,r){const s=t[gi],a=s?s.get(jl,null):null;a&&a.handleError(r)}function Tg(t,r,s,a,l){for(let p=0;p<s.length;){const y=s[p++],w=s[p++];Rf(t.data[y],r[y],a,w,l)}}function ll(t,r,s){const a=ft(r,t);!function ed(t,r,s){t.setValue(r,s)}(t[fn],a,s)}function V_(t,r){const s=Lo(r,t),a=s[xt];!function U_(t,r){for(let s=r.length;s<t.blueprint.length;s++)r.push(t.blueprint[s])}(a,s);const l=s[vr];null!==l&&null===s[Vi]&&(s[Vi]=$p(l,s[gi])),dh(a,s,s[Jn])}function dh(t,r,s){B(r);try{const a=t.viewQuery;null!==a&&wg(1,a,s);const l=t.template;null!==l&&A_(t,r,l,1,s),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&O_(t,r),t.staticViewQueries&&wg(2,t.viewQuery,s);const p=t.components;null!==p&&function B_(t,r){for(let s=0;s<r.length;s++)V_(t,r[s])}(r,p)}catch(a){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),a}finally{r[dn]&=-5,Ut()}}let Dg=(()=>{class t{constructor(){this.all=new Set,this.queue=new Map}create(s,a,l){const p=typeof Zone>"u"?null:Zone.current,y=function ut(t,r,s){const a=Object.create(Ur);s&&(a.consumerAllowSignalWrites=!0),a.fn=t,a.schedule=r;const l=y=>{a.cleanupFn=y};return a.ref={notify:()=>Pi(a),run:()=>{if(a.dirty=!1,a.hasRun&&!Ia(a))return;a.hasRun=!0;const y=Sa(a);try{a.cleanupFn(),a.cleanupFn=Yt,a.fn(l)}finally{Hs(a,y)}},cleanup:()=>a.cleanupFn()},a.ref}(s,$=>{this.all.has($)&&this.queue.set($,p)},l);let w;this.all.add(y),y.notify();const P=()=>{y.cleanup(),w?.(),this.all.delete(y),this.queue.delete(y)};return w=a?.onDestroy(P),{destroy:P}}flush(){if(0!==this.queue.size)for(const[s,a]of this.queue)this.queue.delete(s),a?a.run(()=>s.run()):s.run()}get isQueueEmpty(){return 0===this.queue.size}static#e=this.\u0275prov=Gt({token:t,providedIn:"root",factory:()=>new t})}return t})();function Sc(t,r,s){let a=s?t.styles:null,l=s?t.classes:null,p=0;if(null!==r)for(let y=0;y<r.length;y++){const w=r[y];"number"==typeof w?p=w:1==p?l=Ye(l,w):2==p&&(a=Ye(a,w+": "+r[++y]+";"))}s?t.styles=a:t.stylesWithoutHost=a,s?t.classes=l:t.classesWithoutHost=l}function Rr(t,r,s,a,l=!1){for(;null!==s;){const p=r[s.index];null!==p&&a.push(pt(p)),Bi(p)&&Ag(p,a);const y=s.type;if(8&y)Rr(t,r,s.child,a);else if(32&y){const w=up(s,r);let P;for(;P=w();)a.push(P)}else if(16&y){const w=Ml(r,s);if(Array.isArray(w))a.push(...w);else{const P=fc(r[Vr]);Rr(P[xt],P,w,a,!0)}}s=l?s.projectionNext:s.next}return a}function Ag(t,r){for(let s=Tr;s<t.length;s++){const a=t[s],l=a[xt].firstChild;null!==l&&Rr(a[xt],a,l,r)}t[Ui]!==t[vr]&&r.push(t[Ui])}function hh(t,r,s,a=!0){const l=r[ss],p=l.rendererFactory,y=l.afterRenderEventManager;p.begin?.(),y?.begin();try{qo(t,r,t.template,s)}catch(P){throw a&&L_(r,P),P}finally{p.end?.(),l.effectManager?.flush(),y?.end()}}function qo(t,r,s,a){const l=r[dn];if(256!=(256&l)){r[ss].effectManager?.flush(),B(r);try{ia(r),function Gu(t){return Zt.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==s&&A_(t,r,s,2,a);const y=3==(3&l);if(y){const $=t.preOrderCheckHooks;null!==$&&lu(r,$,null)}else{const $=t.preOrderHooks;null!==$&&cu(r,$,0,null),Da(r,0)}if(function Vu(t){for(let r=pm(t);null!==r;r=qs(r)){if(!r[eo])continue;const s=r[Oo];for(let a=0;a<s.length;a++){El(s[a])}}}(r),Vs(r,2),null!==t.contentQueries&&O_(t,r),y){const $=t.contentCheckHooks;null!==$&&lu(r,$)}else{const $=t.contentHooks;null!==$&&cu(r,$,1),Da(r,1)}!function dg(t,r){const s=t.hostBindingOpCodes;if(null===s)return;const a=cg(r,$s);try{for(let l=0;l<s.length;l++){const p=s[l];if(p<0)Ss(~p);else{const y=p,w=s[++l],P=s[++l];Wu(w,y),a.dirty=!1;const $=Sa(a);try{P(2,r[y])}finally{Hs(a,$)}}}}finally{null===r[$s]&&mf(r,$s),Ss(-1)}}(t,r);const w=t.components;null!==w&&Cg(r,w,0);const P=t.viewQuery;if(null!==P&&wg(2,P,a),y){const $=t.viewCheckHooks;null!==$&&lu(r,$)}else{const $=t.viewHooks;null!==$&&cu(r,$,2),Da(r,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),r[dn]&=-73,ju(r)}finally{Ut()}}}function Vs(t,r){for(let s=pm(t);null!==s;s=qs(s))for(let a=Tr;a<s.length;a++)H_(s[a],r)}function gv(t,r,s){H_(Lo(r,t),s)}function H_(t,r){if(!function vl(t){return 128==(128&t[dn])}(t))return;const s=t[xt],a=t[dn];if(80&a&&0===r||1024&a||2===r)qo(s,t,s.template,t[Jn]);else if(t[Ts]>0){Vs(t,1);const l=s.components;null!==l&&Cg(t,l,1)}}function Cg(t,r,s){for(let a=0;a<r.length;a++)gv(t,r[a],s)}class fh{get rootNodes(){const r=this._lView,s=r[xt];return Rr(s,r,s.firstChild,[])}constructor(r,s){this._lView=r,this._cdRefInjectingView=s,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Jn]}set context(r){this._lView[Jn]=r}get destroyed(){return 256==(256&this._lView[dn])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const r=this._lView[Er];if(Bi(r)){const s=r[8],a=s?s.indexOf(this):-1;a>-1&&(Sl(r,a),ys(s,a))}this._attachedToViewContainer=!1}Vd(this._lView[xt],this._lView)}onDestroy(r){!function sa(t,r){if(256==(256&t[dn]))throw new ce(911,!1);null===t[hs]&&(t[hs]=[]),t[hs].push(r)}(this._lView,r)}markForCheck(){Cc(this._cdRefInjectingView||this._lView)}detach(){this._lView[dn]&=-129}reattach(){this._lView[dn]|=128}detectChanges(){hh(this._lView[xt],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ce(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function mm(t,r){gc(t,r,r[fn],2,null,null)}(this._lView[xt],this._lView)}attachToAppRef(r){if(this._attachedToViewContainer)throw new ce(902,!1);this._appRef=r}}class bg extends fh{constructor(r){super(r),this._view=r}detectChanges(){const r=this._view;hh(r[xt],r,r[Jn],!1)}checkNoChanges(){}get context(){return null}}class z_ extends dd{constructor(r){super(),this.ngModule=r}resolveComponentFactory(r){const s=Wn(r);return new Oi(s,this.ngModule)}}function Mf(t){const r=[];for(let s in t)t.hasOwnProperty(s)&&r.push({propName:t[s],templateName:s});return r}class _v{constructor(r,s){this.injector=r,this.parentInjector=s}get(r,s,a){a=qt(a);const l=this.injector.get(r,nh,a);return l!==nh||s===nh?l:this.parentInjector.get(r,s,a)}}class Oi extends n_{get inputs(){const r=this.componentDef,s=r.inputTransforms,a=Mf(r.inputs);if(null!==s)for(const l of a)s.hasOwnProperty(l.propName)&&(l.transform=s[l.propName]);return a}get outputs(){return Mf(this.componentDef.outputs)}constructor(r,s){super(),this.componentDef=r,this.ngModule=s,this.componentType=r.type,this.selector=function Is(t){return t.map(Fi).join(",")}(r.selectors),this.ngContentSelectors=r.ngContentSelectors?r.ngContentSelectors:[],this.isBoundToModule=!!s}create(r,s,a,l){let p=(l=l||this.ngModule)instanceof xu?l:l?.injector;p&&null!==this.componentDef.getStandaloneInjector&&(p=this.componentDef.getStandaloneInjector(p)||p);const y=p?new _v(r,p):r,w=y.get(sf,null);if(null===w)throw new ce(407,!1);const he={rendererFactory:w,sanitizer:y.get(s_,null),effectManager:y.get(Dg,null),afterRenderEventManager:y.get(og,null)},Me=w.createRenderer(null,this.componentDef),je=this.componentDef.selectors[0][0]||"div",lt=a?function gg(t,r,s,a){const p=a.get(ag,!1)||s===ar.ShadowDom,y=t.selectRootElement(r,p);return function cv(t){If(t)}(y),y}(Me,a,this.componentDef.encapsulation,y):Ld(Me,je,function mv(t){const r=t.toLowerCase();return"svg"===r?"svg":"math"===r?"math":null}(je)),Dn=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let Et=null;null!==lt&&(Et=$p(lt,y,!0));const hr=pg(0,null,null,1,0,null,null,null,null,null,null),Wr=vf(null,hr,null,Dn,null,null,he,Me,y,null,Et);let rs,ru;B(Wr);try{const Vc=this.componentDef;let Gf,VE=null;Vc.findHostDirectiveDefs?(Gf=[],VE=new Map,Vc.findHostDirectiveDefs(Vc,Gf,VE),Gf.push(Vc)):Gf=[Vc];const qC=function yv(t,r){const s=t[xt],a=Qn;return t[a]=r,zl(s,a,2,"#host",null)}(Wr,lt),KC=function Ks(t,r,s,a,l,p,y){const w=l[xt];!function G_(t,r,s,a){for(const l of t)r.mergedAttrs=Xn(r.mergedAttrs,l.hostAttrs);null!==r.mergedAttrs&&(Sc(r,r.mergedAttrs,!0),null!==s&&Bd(a,s,r))}(a,t,r,y);let P=null;null!==r&&(P=$p(r,l[gi]));const $=p.rendererFactory.createRenderer(r,s);let X=16;s.signals?X=4096:s.onPush&&(X=64);const he=vf(l,fg(s),null,X,l[t.index],t,p,$,null,null,P);return w.firstCreatePass&&lh(w,t,a.length-1),ch(l,he),l[t.index]=he}(qC,lt,Vc,Gf,Wr,he,Me);ru=Jl(hr,Qn),lt&&function Ev(t,r,s,a){if(a)ui(t,s,["ng-version",o_.full]);else{const{attrs:l,classes:p}=function Jo(t){const r=[],s=[];let a=1,l=2;for(;a<t.length;){let p=t[a];if("string"==typeof p)2===l?""!==p&&r.push(p,t[++a]):8===l&&s.push(p);else{if(!qr(l))break;l=p}a++}return{attrs:r,classes:s}}(r.selectors[0]);l&&ui(t,s,l),p&&p.length>0&&gp(t,s,p.join(" "))}}(Me,Vc,lt,a),void 0!==s&&function W_(t,r,s){const a=t.projection=[];for(let l=0;l<r.length;l++){const p=s[l];a.push(null!=p?Array.from(p):null)}}(ru,this.ngContentSelectors,s),rs=function vv(t,r,s,a,l,p){const y=Yi(),w=l[xt],P=Kr(y,l);S_(w,l,y,s,null,a);for(let X=0;X<s.length;X++)Go(ue(l,w,y.directiveStart+X,y),l);Cf(w,l,y),P&&Go(P,l);const $=ue(l,w,y.directiveStart+y.componentOffset,y);if(t[Jn]=l[Jn]=$,null!==p)for(const X of p)X($,r);return oh(w,y,t),$}(KC,Vc,Gf,VE,Wr,[Iv]),dh(hr,Wr,null)}finally{Ut()}return new qE(this.componentType,rs,Ul(ru,Wr),Wr,ru)}}class qE extends t_{constructor(r,s,a,l,p){super(),this.location=a,this._rootLView=l,this._tNode=p,this.previousInputValues=null,this.instance=s,this.hostView=this.changeDetectorRef=new bg(l),this.componentType=r}setInput(r,s){const a=this._tNode.inputs;let l;if(null!==a&&(l=a[r])){if(this.previousInputValues??=new Map,this.previousInputValues.has(r)&&Object.is(this.previousInputValues.get(r),s))return;const p=this._rootLView;Tg(p[xt],p,l,r,s),this.previousInputValues.set(r,s),Cc(Lo(this._tNode.index,p))}}get injector(){return new en(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(r){this.hostView.onDestroy(r)}}function Iv(){const t=Yi();Gs(dt()[xt],t)}function Sg(t){let r=function q_(t){return Object.getPrototypeOf(t.prototype).constructor}(t.type),s=!0;const a=[t];for(;r;){let l;if(ji(t))l=r.\u0275cmp||r.\u0275dir;else{if(r.\u0275cmp)throw new ce(903,!1);l=r.\u0275dir}if(l){if(s){a.push(l);const y=t;y.inputs=Rg(t.inputs),y.inputTransforms=Rg(t.inputTransforms),y.declaredInputs=Rg(t.declaredInputs),y.outputs=Rg(t.outputs);const w=l.hostBindings;w&&K_(t,w);const P=l.viewQuery,$=l.contentQueries;if(P&&Tv(t,P),$&&Dv(t,$),se(t.inputs,l.inputs),se(t.declaredInputs,l.declaredInputs),se(t.outputs,l.outputs),null!==l.inputTransforms&&(null===y.inputTransforms&&(y.inputTransforms={}),se(y.inputTransforms,l.inputTransforms)),ji(l)&&l.data.animation){const X=t.data;X.animation=(X.animation||[]).concat(l.data.animation)}}const p=l.features;if(p)for(let y=0;y<p.length;y++){const w=p[y];w&&w.ngInherit&&w(t),w===Sg&&(s=!1)}}r=Object.getPrototypeOf(r)}!function wv(t){let r=0,s=null;for(let a=t.length-1;a>=0;a--){const l=t[a];l.hostVars=r+=l.hostVars,l.hostAttrs=Xn(l.hostAttrs,s=Xn(s,l.hostAttrs))}}(a)}function Rg(t){return t===ai?{}:t===ke?[]:t}function Tv(t,r){const s=t.viewQuery;t.viewQuery=s?(a,l)=>{r(a,l),s(a,l)}:r}function Dv(t,r){const s=t.contentQueries;t.contentQueries=s?(a,l,p)=>{r(a,l,p),s(a,l,p)}:r}function K_(t,r){const s=t.hostBindings;t.hostBindings=s?(a,l)=>{r(a,l),s(a,l)}:r}function Pg(t){const r=t.inputConfig,s={};for(const a in r)if(r.hasOwnProperty(a)){const l=r[a];Array.isArray(l)&&l[2]&&(s[a]=l[2])}t.inputTransforms=s}function Rc(t){return!!yd(t)&&(Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t)}function yd(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function Eu(t,r,s){return t[r]=s}function Ko(t,r,s){return!Object.is(t[r],s)&&(t[r]=s,!0)}function mh(t,r,s,a){const l=dt();return Ko(l,ms(),r)&&(xr(),Xa(ri(),l,t,r,s,a)),mh}function eu(t,r,s,a){return Ko(t,ms(),s)?r+Ae(s)+a:sr}function Oc(t,r,s,a,l,p){const w=function cl(t,r,s,a){const l=Ko(t,r,s);return Ko(t,r+1,a)||l}(t,function Ti(){return Zt.lFrame.bindingIndex}(),s,l);return To(2),w?r+Ae(s)+a+Ae(l)+p:sr}function ey(t,r,s,a,l,p,y,w){const P=dt(),$=xr(),X=t+Qn,he=$.firstCreatePass?function Zl(t,r,s,a,l,p,y,w,P){const $=r.consts,X=zl(r,t,4,y||null,Yo($,w));_g(r,s,X,Yo($,P)),Gs(r,X);const he=X.tView=pg(2,X,a,l,p,r.directiveRegistry,r.pipeRegistry,null,r.schemas,$,null);return null!==r.queries&&(r.queries.template(r,X),he.queries=r.queries.embeddedTView(X)),X}(X,$,P,r,s,a,l,p,y):$.data[X];os(he,!1);const Me=ty($,P,he,t);qu()&&Ud($,P,Me,he),Go(Me,P),ch(P,P[X]=N_(Me,P,Me,he)),Ea(he)&&Ef($,P,he),null!=y&&ah(P,he,w)}let ty=function ny(t,r,s,a){return oa(!0),r[fn].createComment("")};function ry(t){return bs(function Hu(){return Zt.lFrame.contextLView}(),Qn+t)}function $g(t,r,s){const a=dt();return Ko(a,ms(),r)&&Ca(xr(),ri(),a,t,r,a[fn],s,!1),$g}function Hg(t,r,s,a,l){const y=l?"class":"style";Tg(t,s,r.inputs[y],y,a)}function Ff(t,r,s,a){const l=dt(),p=xr(),y=Qn+t,w=l[fn],P=p.firstCreatePass?function Uv(t,r,s,a,l,p){const y=r.consts,P=zl(r,t,2,a,Yo(y,l));return _g(r,s,P,Yo(y,p)),null!==P.attrs&&Sc(P,P.attrs,!1),null!==P.mergedAttrs&&Sc(P,P.mergedAttrs,!0),null!==r.queries&&r.queries.elementStart(r,P),P}(y,p,l,r,s,a):p.data[y],$=Bv(p,l,P,w,r,t);l[y]=$;const X=Ea(P);return os(P,!0),Bd(w,$,P),32!=(32&P.flags)&&qu()&&Ud(p,l,$,P),0===function qn(){return Zt.lFrame.elementDepthCount}()&&Go($,l),function za(){Zt.lFrame.elementDepthCount++}(),X&&(Ef(p,l,P),oh(p,P,l)),null!==a&&ah(l,P),Ff}function pl(){let t=Yi();ou()?Be():(t=t.parent,os(t,!1));const r=t;(function wu(t){return Zt.skipHydrationRootTNode===t})(r)&&function Ch(){Zt.skipHydrationRootTNode=null}(),function _i(){Zt.lFrame.elementDepthCount--}();const s=xr();return s.firstCreatePass&&(Gs(s,t),ps(t)&&s.queries.elementEnd(t)),null!=r.classesWithoutHost&&function jc(t){return 0!=(8&t.flags)}(r)&&Hg(s,r,dt(),r.classesWithoutHost,!0),null!=r.stylesWithoutHost&&function qa(t){return 0!=(16&t.flags)}(r)&&Hg(s,r,dt(),r.stylesWithoutHost,!1),pl}function Ih(t,r,s,a){return Ff(t,r,s,a),pl(),Ih}let Bv=(t,r,s,a,l,p)=>(oa(!0),Ld(a,l,function so(){return Zt.lFrame.currentNamespace}()));function iy(){return dt()}function Wg(t){return!!t&&"function"==typeof t.then}function sy(t){return!!t&&"function"==typeof t.subscribe}function oy(t,r,s,a){const l=dt(),p=xr(),y=Yi();return function gl(t,r,s,a,l,p,y){const w=Ea(a),$=t.firstCreatePass&&k_(t),X=r[Jn],he=x_(r);let Me=!0;if(3&a.type||y){const Ct=Kr(a,r),Qt=y?y(Ct):Ct,Dn=he.length,Et=y?Wr=>y(pt(Wr[a.index])):a.index;let hr=null;if(!y&&w&&(hr=function uy(t,r,s,a){const l=t.cleanup;if(null!=l)for(let p=0;p<l.length-1;p+=2){const y=l[p];if(y===s&&l[p+1]===a){const w=r[Zi],P=l[p+2];return w.length>P?w[P]:null}"string"==typeof y&&(p+=2)}return null}(t,r,l,a.index)),null!==hr)(hr.__ngLastListenerFn__||hr).__ngNextListenerFn__=p,hr.__ngLastListenerFn__=p,Me=!1;else{p=cy(a,r,X,p,!1);const Wr=s.listen(Qt,l,p);he.push(p,Wr),$&&$.push(l,Et,Dn,Dn+1)}}else p=cy(a,r,X,p,!1);const je=a.outputs;let lt;if(Me&&null!==je&&(lt=je[l])){const Ct=lt.length;if(Ct)for(let Qt=0;Qt<Ct;Qt+=2){const rs=r[lt[Qt]][lt[Qt+1]].subscribe(p),ru=he.length;he.push(p,rs),$&&$.push(l,a.index,ru,-(ru+1))}}}(p,l,l[fn],y,t,r,a),oy}function ly(t,r,s,a){try{return bt(6,r,s),!1!==s(a)}catch(l){return L_(t,l),!1}finally{bt(7,r,s)}}function cy(t,r,s,a,l){return function p(y){if(y===Function)return a;Cc(t.componentOffset>-1?Lo(t.index,r):r);let P=ly(r,s,a,y),$=p.__ngNextListenerFn__;for(;$;)P=ly(r,s,$,y)&&P,$=$.__ngNextListenerFn__;return l&&!1===P&&y.preventDefault(),P}}function dy(t=1){return function jn(t){return(Zt.lFrame.contextLView=function Di(t,r){for(;t>0;)r=r[Wi],t--;return r}(t,Zt.lFrame.contextLView))[Jn]}(t)}function Wv(t,r){let s=null;const a=function Ys(t){const r=t.attrs;if(null!=r){const s=r.indexOf(5);if(!(1&s))return r[s+1]}return null}(t);for(let l=0;l<r.length;l++){const p=r[l];if("*"!==p){if(null===a?Us(t,p,!0):Rs(a,p))return l}else s=l}return s}function hy(t){const r=dt()[Vr][pi];if(!r.projection){const a=r.projection=ao(t?t.length:1,null),l=a.slice();let p=r.child;for(;null!==p;){const y=t?Wv(p,t):0;null!==y&&(l[y]?l[y].projectionNext=p:a[y]=p,l[y]=p),p=p.next}}}function fy(t,r=0,s){const a=dt(),l=xr(),p=zl(l,Qn+t,16,null,s||null);null===p.projection&&(p.projection=r),Be(),(!a[Vi]||wo())&&32!=(32&p.flags)&&function fp(t,r,s){pp(r[fn],0,r,s,Fh(t,s,r),Am(s.parent||r[pi],s,r))}(l,a,p)}function qg(t,r,s){return py(t,"",r,"",s),qg}function py(t,r,s,a,l){const p=dt(),y=eu(p,r,s,a);return y!==sr&&Ca(xr(),ri(),p,t,y,p[fn],l,!1),py}function wh(t,r){return t<<17|r<<2}function Lc(t){return t>>17&32767}function i(t){return 2|t}function e(t){return(131068&t)>>2}function n(t,r){return-131069&t|r<<2}function u(t){return 1|t}function G(t,r,s,a,l){const p=t[s+1],y=null===r;let w=a?Lc(p):e(p),P=!1;for(;0!==w&&(!1===P||y);){const X=t[w+1];ee(t[w],r)&&(P=!0,t[w+1]=a?u(X):i(X)),w=a?Lc(X):e(X)}P&&(t[s+1]=a?i(p):u(p))}function ee(t,r){return null===t||null==r||(Array.isArray(t)?t[1]:t)===r||!(!Array.isArray(t)||"string"!=typeof r)&&Qu(t,r)>=0}const le={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Ce(t){return t.substring(le.key,le.keyEnd)}function Ht(t,r){const s=le.textEnd;return s===r?-1:(r=le.keyEnd=function Pr(t,r,s){for(;r<s&&t.charCodeAt(r)>32;)r++;return r}(t,le.key=r,s),yn(t,r,s))}function yn(t,r,s){for(;r<s&&t.charCodeAt(r)<=32;)r++;return r}function Vf(t,r,s){return ml(t,r,s,!1),Vf}function Jv(t,r){return ml(t,r,null,!0),Jv}function tI(t){!function _l(t,r,s,a){const l=xr(),p=To(2);l.firstUpdatePass&&rI(l,null,p,a);const y=dt();if(s!==sr&&Ko(y,p,s)){const w=l.data[Mn()];if(aI(w,a)&&!nI(l,p)){let P=a?w.classesWithoutHost:w.stylesWithoutHost;null!==P&&(s=Ye(P,s||"")),Hg(l,w,y,s,a)}else!function Qw(t,r,s,a,l,p,y,w){l===sr&&(l=ke);let P=0,$=0,X=0<l.length?l[0]:null,he=0<p.length?p[0]:null;for(;null!==X||null!==he;){const Me=P<l.length?l[P+1]:void 0,je=$<p.length?p[$+1]:void 0;let Ct,lt=null;X===he?(P+=2,$+=2,Me!==je&&(lt=he,Ct=je)):null===he||null!==X&&X<he?(P+=2,lt=X):($+=2,lt=he,Ct=je),null!==lt&&sI(t,r,s,a,lt,Ct,y,w),X=P<l.length?l[P]:null,he=$<p.length?p[$]:null}}(l,w,y,y[fn],y[p+1],y[p+1]=function Kw(t,r,s){if(null==s||""===s)return ke;const a=[],l=sl(s);if(Array.isArray(l))for(let p=0;p<l.length;p++)t(a,l[p],!0);else if("object"==typeof l)for(const p in l)l.hasOwnProperty(p)&&t(a,p,l[p]);else"string"==typeof l&&r(a,l);return a}(t,r,s),a,p)}}(Zw,Yl,t,!0)}function Yl(t,r){for(let s=function Rt(t){return function dr(t){le.key=0,le.keyEnd=0,le.value=0,le.valueEnd=0,le.textEnd=t.length}(t),Ht(t,yn(t,0,le.textEnd))}(r);s>=0;s=Ht(r,s))ua(t,Ce(r),!0)}function ml(t,r,s,a){const l=dt(),p=xr(),y=To(2);p.firstUpdatePass&&rI(p,t,y,a),r!==sr&&Ko(l,y,r)&&sI(p,p.data[Mn()],l,l[fn],t,l[y+1]=function Yw(t,r){return null==t||""===t||("string"==typeof r?t+=r:"object"==typeof t&&(t=ve(sl(t)))),t}(r,s),a,y)}function nI(t,r){return r>=t.expandoStartIndex}function rI(t,r,s,a){const l=t.data;if(null===l[s+1]){const p=l[Mn()],y=nI(t,s);aI(p,a)&&null===r&&!y&&(r=!1),r=function zw(t,r,s,a){const l=function Ta(t){const r=Zt.lFrame.currentDirectiveIndex;return-1===r?null:t[r]}(t);let p=a?r.residualClasses:r.residualStyles;if(null===l)0===(a?r.classBindings:r.styleBindings)&&(s=Yg(s=Xv(null,t,r,s,a),r.attrs,a),p=null);else{const y=r.directiveStylingLast;if(-1===y||t[y]!==l)if(s=Xv(l,t,r,s,a),null===p){let P=function Gw(t,r,s){const a=s?r.classBindings:r.styleBindings;if(0!==e(a))return t[Lc(a)]}(t,r,a);void 0!==P&&Array.isArray(P)&&(P=Xv(null,t,r,P[1],a),P=Yg(P,r.attrs,a),function Ww(t,r,s,a){t[Lc(s?r.classBindings:r.styleBindings)]=a}(t,r,a,P))}else p=function qw(t,r,s){let a;const l=r.directiveEnd;for(let p=1+r.directiveStylingLast;p<l;p++)a=Yg(a,t[p].hostAttrs,s);return Yg(a,r.attrs,s)}(t,r,a)}return void 0!==p&&(a?r.residualClasses=p:r.residualStyles=p),s}(l,p,r,a),function S(t,r,s,a,l,p){let y=p?r.classBindings:r.styleBindings,w=Lc(y),P=e(y);t[a]=s;let X,$=!1;if(Array.isArray(s)?(X=s[1],(null===X||Qu(s,X)>0)&&($=!0)):X=s,l)if(0!==P){const Me=Lc(t[w+1]);t[a+1]=wh(Me,w),0!==Me&&(t[Me+1]=n(t[Me+1],a)),t[w+1]=function Lf(t,r){return 131071&t|r<<17}(t[w+1],a)}else t[a+1]=wh(w,0),0!==w&&(t[w+1]=n(t[w+1],a)),w=a;else t[a+1]=wh(P,0),0===w?w=a:t[P+1]=n(t[P+1],a),P=a;$&&(t[a+1]=i(t[a+1])),G(t,X,a,!0),G(t,X,a,!1),function x(t,r,s,a,l){const p=l?t.residualClasses:t.residualStyles;null!=p&&"string"==typeof r&&Qu(p,r)>=0&&(s[a+1]=u(s[a+1]))}(r,X,t,a,p),y=wh(w,P),p?r.classBindings=y:r.styleBindings=y}(l,p,r,s,y,a)}}function Xv(t,r,s,a,l){let p=null;const y=s.directiveEnd;let w=s.directiveStylingLast;for(-1===w?w=s.directiveStart:w++;w<y&&(p=r[w],a=Yg(a,p.hostAttrs,l),p!==t);)w++;return null!==t&&(s.directiveStylingLast=w),a}function Yg(t,r,s){const a=s?1:2;let l=-1;if(null!==r)for(let p=0;p<r.length;p++){const y=r[p];"number"==typeof y?l=y:l===a&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),ua(t,y,!!s||r[++p]))}return void 0===t?null:t}function Zw(t,r,s){const a=String(r);""!==a&&!a.includes(" ")&&ua(t,a,s)}function sI(t,r,s,a,l,p,y,w){if(!(3&r.type))return;const P=t.data,$=P[w+1],X=function o(t){return 1==(1&t)}($)?oI(P,r,s,l,e($),y):void 0;my(X)||(my(p)||function Qg(t){return 2==(2&t)}($)&&(p=oI(P,null,s,l,w,y)),function Vy(t,r,s,a,l){if(r)l?t.addClass(s,a):t.removeClass(s,a);else{let p=-1===a.indexOf("-")?void 0:Xu.DashCase;null==l?t.removeStyle(s,a,p):("string"==typeof l&&l.endsWith("!important")&&(l=l.slice(0,-10),p|=Xu.Important),t.setStyle(s,a,l,p))}}(a,y,ft(Mn(),s),l,p))}function oI(t,r,s,a,l,p){const y=null===r;let w;for(;l>0;){const P=t[l],$=Array.isArray(P),X=$?P[1]:P,he=null===X;let Me=s[l+1];Me===sr&&(Me=he?ke:void 0);let je=he?Fa(Me,a):X===a?Me:void 0;if($&&!my(je)&&(je=Fa(P,a)),my(je)&&(w=je,y))return w;const lt=t[l+1];l=y?Lc(lt):e(lt)}if(null!==r){let P=p?r.residualClasses:r.residualStyles;null!=P&&(w=Fa(P,a))}return w}function my(t){return void 0!==t}function aI(t,r){return 0!=(t.flags&(r?8:16))}function uI(t,r=""){const s=dt(),a=xr(),l=t+Qn,p=a.firstCreatePass?zl(a,l,1,r,null):a.data[l],y=lI(a,s,p,r,t);s[l]=y,qu()&&Ud(a,s,y,p),os(p,!1)}let lI=(t,r,s,a,l)=>(oa(!0),function Fd(t,r){return t.createText(r)}(r[fn],a));function eE(t){return _y("",t,""),eE}function _y(t,r,s){const a=dt(),l=eu(a,t,r,s);return l!==sr&&ll(a,Mn(),l),_y}function tE(t,r,s,a,l){const p=dt(),y=Oc(p,t,r,s,a,l);return y!==sr&&ll(p,Mn(),y),tE}const Th=void 0;var vT=["en",[["a","p"],["AM","PM"],Th],[["AM","PM"],Th,Th],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Th,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Th,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Th,"{1} 'at' {0}",Th],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function yT(t){const s=Math.floor(Math.abs(t)),a=t.toString().replace(/^[^.]*\.?/,"").length;return 1===s&&0===a?1:5}];let Uf={};function nE(t){const r=function ET(t){return t.toLowerCase().replace(/_/g,"-")}(t);let s=RI(r);if(s)return s;const a=r.split("-")[0];if(s=RI(a),s)return s;if("en"===a)return vT;throw new ce(701,!1)}function SI(t){return nE(t)[Bf.PluralCase]}function RI(t){return t in Uf||(Uf[t]=Rn.ng&&Rn.ng.common&&Rn.ng.common.locales&&Rn.ng.common.locales[t]),Uf[t]}var Bf=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}(Bf||{});const jf="en-US";let PI=jf;function sE(t,r,s,a,l){if(t=it(t),Array.isArray(t))for(let p=0;p<t.length;p++)sE(t[p],r,s,a,l);else{const p=xr(),y=dt(),w=Yi();let P=Fl(t)?t:it(t.provide);const $=Np(t),X=1048575&w.providerIndexes,he=w.directiveStart,Me=w.providerIndexes>>20;if(Fl(t)||!t.multi){const je=new Du($,l,pd),lt=aE(P,r,l?X:X+Me,he);-1===lt?(ga(du(w,y),p,P),oE(p,t,r.length),r.push(P),w.directiveStart++,w.directiveEnd++,l&&(w.providerIndexes+=1048576),s.push(je),y.push(je)):(s[lt]=je,y[lt]=je)}else{const je=aE(P,r,X+Me,he),lt=aE(P,r,X,X+Me),Qt=lt>=0&&s[lt];if(l&&!Qt||!l&&!(je>=0&&s[je])){ga(du(w,y),p,P);const Dn=function yD(t,r,s,a,l){const p=new Du(t,s,pd);return p.multi=[],p.index=r,p.componentProviders=0,t0(p,l,a&&!s),p}(l?_D:mD,s.length,l,a,$);!l&&Qt&&(s[lt].providerFactory=Dn),oE(p,t,r.length,0),r.push(P),w.directiveStart++,w.directiveEnd++,l&&(w.providerIndexes+=1048576),s.push(Dn),y.push(Dn)}else oE(p,t,je>-1?je:lt,t0(s[l?lt:je],$,!l&&a));!l&&a&&Qt&&s[lt].componentProviders++}}}function oE(t,r,s,a){const l=Fl(r),p=function Wm(t){return!!t.useClass}(r);if(l||p){const P=(p?it(r.useClass):r).prototype.ngOnDestroy;if(P){const $=t.destroyHooks||(t.destroyHooks=[]);if(!l&&r.multi){const X=$.indexOf(s);-1===X?$.push(s,[a,P]):$[X+1].push(a,P)}else $.push(s,P)}}}function t0(t,r,s){return s&&t.componentProviders++,t.multi.push(r)-1}function aE(t,r,s,a){for(let l=s;l<a;l++)if(r[l]===t)return l;return-1}function mD(t,r,s,a){return uE(this.multi,[])}function _D(t,r,s,a){const l=this.multi;let p;if(this.providerFactory){const y=this.providerFactory.componentProviders,w=ue(s,s[xt],this.providerFactory.index,a);p=w.slice(0,y),uE(l,p);for(let P=y;P<w.length;P++)p.push(w[P])}else p=[],uE(l,p);return p}function uE(t,r){for(let s=0;s<t.length;s++)r.push((0,t[s])());return r}function n0(t,r=[]){return s=>{s.providersResolver=(a,l)=>function gD(t,r,s){const a=xr();if(a.firstCreatePass){const l=ji(t);sE(s,a.data,a.blueprint,l,!0),sE(r,a.data,a.blueprint,l,!1)}}(a,l?l(t):t,r)}}class Dh{}class r0{}function vD(t,r){return new lE(t,r??null,[])}class lE extends Dh{constructor(r,s,a){super(),this._parent=s,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new z_(this);const l=li(r);this._bootstrapComponents=Fu(l.bootstrap),this._r3Injector=lf(r,s,[{provide:Dh,useValue:this},{provide:dd,useValue:this.componentFactoryResolver},...a],ve(r),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(r)}get injector(){return this._r3Injector}destroy(){const r=this._r3Injector;!r.destroyed&&r.destroy(),this.destroyCbs.forEach(s=>s()),this.destroyCbs=null}onDestroy(r){this.destroyCbs.push(r)}}class cE extends r0{constructor(r){super(),this.moduleType=r}create(r){return new lE(this.moduleType,r,[])}}class s0 extends Dh{constructor(r){super(),this.componentFactoryResolver=new z_(this),this.instance=null;const s=new yu([...r.providers,{provide:Dh,useValue:this},{provide:dd,useValue:this.componentFactoryResolver}],r.parent||Zd(),r.debugName,new Set(["environment"]));this.injector=s,r.runEnvironmentInitializers&&s.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(r){this.injector.onDestroy(r)}}function o0(t,r,s=null){return new s0({providers:t,parent:r,debugName:s,runEnvironmentInitializers:!0}).injector}let ID=(()=>{class t{constructor(s){this._injector=s,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(s){if(!s.standalone)return null;if(!this.cachedInjectors.has(s)){const a=qh(0,s.type),l=a.length>0?o0([a],this._injector,`Standalone[${s.type.name}]`):null;this.cachedInjectors.set(s,l)}return this.cachedInjectors.get(s)}ngOnDestroy(){try{for(const s of this.cachedInjectors.values())null!==s&&s.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=Gt({token:t,providedIn:"environment",factory:()=>new t(_t(xu))})}return t})();function a0(t){t.getStandaloneInjector=r=>r.get(ID).getOrCreateStandaloneInjector(t)}function p0(t,r,s){const a=zr()+t,l=dt();return l[a]===sr?Eu(l,a,s?r.call(s):r()):function Mc(t,r){return t[r]}(l,a)}function g0(t,r,s,a,l,p){const y=r+s;return Ko(t,y,l)?Eu(t,y+1,p?a.call(p,l):a(l)):function rm(t,r){const s=t[r];return s===sr?void 0:s}(t,y+1)}function E0(t,r){const s=xr();let a;const l=t+Qn;s.firstCreatePass?(a=function UD(t,r){if(r)for(let s=r.length-1;s>=0;s--){const a=r[s];if(t===a.name)return a}}(r,s.pipeRegistry),s.data[l]=a,a.onDestroy&&(s.destroyHooks??=[]).push(l,a.onDestroy)):a=s.data[l];const p=a.factory||(a.factory=er(a.type)),w=Kn(pd);try{const P=Ao(!1),$=p();return Ao(P),function Vv(t,r,s,a){s>=t.data.length&&(t.data[s]=null,t.blueprint[s]=null),r[s]=a}(s,dt(),l,$),$}finally{Kn(w)}}function I0(t,r,s){const a=t+Qn,l=dt(),p=bs(l,a);return function im(t,r){return t[xt].data[r].pure}(l,a)?g0(l,zr(),r,p.transform,s,p):p.transform(s)}function zD(){return this._results[Symbol.iterator]()}class hE{static#e=Symbol.iterator;get changes(){return this._changes||(this._changes=new ku)}constructor(r=!1){this._emitDistinctChangesOnly=r,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const s=hE.prototype;s[Symbol.iterator]||(s[Symbol.iterator]=zD)}get(r){return this._results[r]}map(r){return this._results.map(r)}filter(r){return this._results.filter(r)}find(r){return this._results.find(r)}reduce(r,s){return this._results.reduce(r,s)}forEach(r){this._results.forEach(r)}some(r){return this._results.some(r)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(r,s){const a=this;a.dirty=!1;const l=function Gr(t){return t.flat(Number.POSITIVE_INFINITY)}(r);(this._changesDetected=!function xa(t,r,s){if(t.length!==r.length)return!1;for(let a=0;a<t.length;a++){let l=t[a],p=r[a];if(s&&(l=s(l),p=s(p)),p!==l)return!1}return!0}(a._results,l,s))&&(a._results=l,a.length=l.length,a.last=l[this.length-1],a.first=l[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}function WD(t,r,s,a=!0){const l=r[xt];if(function ym(t,r,s,a){const l=Tr+a,p=s.length;a>0&&(s[l-1][Gi]=r),a<p-Tr?(r[Gi]=s[l],Hc(s,Tr+a,r)):(s.push(r),r[Gi]=null),r[Er]=s;const y=r[wr];null!==y&&s!==y&&function Fy(t,r){const s=t[Oo];r[Vr]!==r[Er][Er][Vr]&&(t[eo]=!0),null===s?t[Oo]=[r]:s.push(r)}(y,r);const w=r[Or];null!==w&&w.insertView(t),r[dn]|=128}(l,r,t,s),a){const p=nl(s,t),y=r[fn],w=tl(y,t[Ui]);null!==w&&function lp(t,r,s,a,l,p){a[vr]=l,a[pi]=r,gc(t,a,s,1,l,p)}(l,t[pi],y,r,w,p)}}let sm=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=ZD}return t})();const qD=sm,KD=class extends qD{constructor(r,s,a){super(),this._declarationLView=r,this._declarationTContainer=s,this.elementRef=a}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(r,s){return this.createEmbeddedViewImpl(r,s)}createEmbeddedViewImpl(r,s,a){const l=function GD(t,r,s,a){const l=r.tView,w=vf(t,l,s,4096&t[dn]?4096:16,null,r,null,null,null,a?.injector??null,a?.hydrationInfo??null);w[wr]=t[r.index];const $=t[Or];return null!==$&&(w[Or]=$.createEmbeddedView(l)),dh(l,w,s),w}(this._declarationLView,this._declarationTContainer,r,{injector:s,hydrationInfo:a});return new fh(l)}};function ZD(){return wy(Yi(),dt())}function wy(t,r){return 4&t.type?new KD(r,t,Ul(t,r)):null}let Dy=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=tA}return t})();function tA(){return S0(Yi(),dt())}const nA=Dy,C0=class extends nA{constructor(r,s,a){super(),this._lContainer=r,this._hostTNode=s,this._hostLView=a}get element(){return Ul(this._hostTNode,this._hostLView)}get injector(){return new en(this._hostTNode,this._hostLView)}get parentInjector(){const r=pa(this._hostTNode,this._hostLView);if(Ku(r)){const s=jo(r,this._hostLView),a=Xi(r);return new en(s[xt].data[a+8],s)}return new en(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(r){const s=b0(this._lContainer);return null!==s&&s[r]||null}get length(){return this._lContainer.length-Tr}createEmbeddedView(r,s,a){let l,p;"number"==typeof a?l=a:null!=a&&(l=a.index,p=a.injector);const w=r.createEmbeddedViewImpl(s||{},p,null);return this.insertImpl(w,l,false),w}createComponent(r,s,a,l,p){const y=r&&!function oo(t){return"function"==typeof t}(r);let w;if(y)w=s;else{const Ct=s||{};w=Ct.index,a=Ct.injector,l=Ct.projectableNodes,p=Ct.environmentInjector||Ct.ngModuleRef}const P=y?r:new Oi(Wn(r)),$=a||this.parentInjector;if(!p&&null==P.ngModule){const Qt=(y?$:this.parentInjector).get(xu,null);Qt&&(p=Qt)}Wn(P.componentType??{});const je=P.create($,l,null,p);return this.insertImpl(je.hostView,w,false),je}insert(r,s){return this.insertImpl(r,s,!1)}insertImpl(r,s,a){const l=r._lView;if(function Xl(t){return Bi(t[Er])}(l)){const P=this.indexOf(r);if(-1!==P)this.detach(P);else{const $=l[Er],X=new C0($,$[pi],$[Er]);X.detach(X.indexOf(r))}}const y=this._adjustIndex(s),w=this._lContainer;return WD(w,l,y,!a),r.attachToViewContainerRef(),Hc(fE(w),y,r),r}move(r,s){return this.insert(r,s)}indexOf(r){const s=b0(this._lContainer);return null!==s?s.indexOf(r):-1}remove(r){const s=this._adjustIndex(r,-1),a=Sl(this._lContainer,s);a&&(ys(fE(this._lContainer),s),Vd(a[xt],a))}detach(r){const s=this._adjustIndex(r,-1),a=Sl(this._lContainer,s);return a&&null!=ys(fE(this._lContainer),s)?new fh(a):null}_adjustIndex(r,s=0){return r??this.length+s}};function b0(t){return t[8]}function fE(t){return t[8]||(t[8]=[])}function S0(t,r){let s;const a=r[t.index];return Bi(a)?s=a:(s=N_(a,r,null,t),r[t.index]=s,ch(r,s)),R0(s,r,t,a),new C0(s,t,r)}let R0=function P0(t,r,s,a){if(t[Ui])return;let l;l=8&s.type?pt(a):function rA(t,r){const s=t[fn],a=s.createComment(""),l=Kr(r,t);return Rl(s,tl(s,l),a,function Dm(t,r){return t.nextSibling(r)}(s,l),!1),a}(r,s),t[Ui]=l};class pE{constructor(r){this.queryList=r,this.matches=null}clone(){return new pE(this.queryList)}setDirty(){this.queryList.setDirty()}}class gE{constructor(r=[]){this.queries=r}createEmbeddedView(r){const s=r.queries;if(null!==s){const a=null!==r.contentQueries?r.contentQueries[0]:s.length,l=[];for(let p=0;p<a;p++){const y=s.getByIndex(p);l.push(this.queries[y.indexInDeclarationView].clone())}return new gE(l)}return null}insertView(r){this.dirtyQueriesWithMatches(r)}detachView(r){this.dirtyQueriesWithMatches(r)}dirtyQueriesWithMatches(r){for(let s=0;s<this.queries.length;s++)null!==U0(r,s).matches&&this.queries[s].setDirty()}}class M0{constructor(r,s,a=null){this.predicate=r,this.flags=s,this.read=a}}class mE{constructor(r=[]){this.queries=r}elementStart(r,s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementStart(r,s)}elementEnd(r){for(let s=0;s<this.queries.length;s++)this.queries[s].elementEnd(r)}embeddedTView(r){let s=null;for(let a=0;a<this.length;a++){const l=null!==s?s.length:0,p=this.getByIndex(a).embeddedTView(r,l);p&&(p.indexInDeclarationView=a,null!==s?s.push(p):s=[p])}return null!==s?new mE(s):null}template(r,s){for(let a=0;a<this.queries.length;a++)this.queries[a].template(r,s)}getByIndex(r){return this.queries[r]}get length(){return this.queries.length}track(r){this.queries.push(r)}}class _E{constructor(r,s=-1){this.metadata=r,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=s}elementStart(r,s){this.isApplyingToNode(s)&&this.matchTNode(r,s)}elementEnd(r){this._declarationNodeIndex===r.index&&(this._appliesToNextNode=!1)}template(r,s){this.elementStart(r,s)}embeddedTView(r,s){return this.isApplyingToNode(r)?(this.crossesNgTemplate=!0,this.addMatch(-r.index,s),new _E(this.metadata)):null}isApplyingToNode(r){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const s=this._declarationNodeIndex;let a=r.parent;for(;null!==a&&8&a.type&&a.index!==s;)a=a.parent;return s===(null!==a?a.index:-1)}return this._appliesToNextNode}matchTNode(r,s){const a=this.metadata.predicate;if(Array.isArray(a))for(let l=0;l<a.length;l++){const p=a[l];this.matchTNodeWithReadOption(r,s,oA(s,p)),this.matchTNodeWithReadOption(r,s,Y(s,r,p,!1,!1))}else a===sm?4&s.type&&this.matchTNodeWithReadOption(r,s,-1):this.matchTNodeWithReadOption(r,s,Y(s,r,a,!1,!1))}matchTNodeWithReadOption(r,s,a){if(null!==a){const l=this.metadata.read;if(null!==l)if(l===hd||l===Dy||l===sm&&4&s.type)this.addMatch(s.index,-2);else{const p=Y(s,r,l,!1,!1);null!==p&&this.addMatch(s.index,p)}else this.addMatch(s.index,a)}}addMatch(r,s){null===this.matches?this.matches=[r,s]:this.matches.push(r,s)}}function oA(t,r){const s=t.localNames;if(null!==s)for(let a=0;a<s.length;a+=2)if(s[a]===r)return s[a+1];return null}function uA(t,r,s,a){return-1===s?function aA(t,r){return 11&t.type?Ul(t,r):4&t.type?wy(t,r):null}(r,t):-2===s?function lA(t,r,s){return s===hd?Ul(r,t):s===sm?wy(r,t):s===Dy?S0(r,t):void 0}(t,r,a):ue(t,t[xt],s,r)}function N0(t,r,s,a){const l=r[Or].queries[a];if(null===l.matches){const p=t.data,y=s.matches,w=[];for(let P=0;P<y.length;P+=2){const $=y[P];w.push($<0?null:uA(r,p[$],y[P+1],s.metadata.read))}l.matches=w}return l.matches}function yE(t,r,s,a){const l=t.queries.getByIndex(s),p=l.matches;if(null!==p){const y=N0(t,r,l,s);for(let w=0;w<p.length;w+=2){const P=p[w];if(P>0)a.push(y[w/2]);else{const $=p[w+1],X=r[-P];for(let he=Tr;he<X.length;he++){const Me=X[he];Me[wr]===Me[Er]&&yE(Me[xt],Me,$,a)}if(null!==X[Oo]){const he=X[Oo];for(let Me=0;Me<he.length;Me++){const je=he[Me];yE(je[xt],je,$,a)}}}}}return a}function O0(t){const r=dt(),s=xr(),a=v();R(a+1);const l=U0(s,a);if(t.dirty&&function Bc(t){return 4==(4&t[dn])}(r)===(2==(2&l.metadata.flags))){if(null===l.matches)t.reset([]);else{const p=l.crossesNgTemplate?yE(s,r,a,[]):N0(s,r,l,a);t.reset(p,fd),t.notifyOnChanges()}return!0}return!1}function x0(t,r,s){const a=xr();a.firstCreatePass&&(V0(a,new M0(t,r,s),-1),2==(2&r)&&(a.staticViewQueries=!0)),L0(a,dt(),r)}function k0(t,r,s,a){const l=xr();if(l.firstCreatePass){const p=Yi();V0(l,new M0(r,s,a),p.index),function dA(t,r){const s=t.contentQueries||(t.contentQueries=[]);r!==(s.length?s[s.length-1]:-1)&&s.push(t.queries.length-1,r)}(l,t),2==(2&s)&&(l.staticContentQueries=!0)}L0(l,dt(),s)}function F0(){return function cA(t,r){return t[Or].queries[r].queryList}(dt(),v())}function L0(t,r,s){const a=new hE(4==(4&s));(function dv(t,r,s,a){const l=x_(r);l.push(s),t.firstCreatePass&&k_(t).push(a,l.length-1)})(t,r,a,a.destroy),null===r[Or]&&(r[Or]=new gE),r[Or].queries.push(new pE(a))}function V0(t,r,s){null===t.queries&&(t.queries=new mE),t.queries.track(new _E(r,s))}function U0(t,r){return t.queries.getByIndex(r)}function B0(t,r){return wy(t,r)}function vE(t){return!!li(t)}const rw=new $t("Application Initializer");let DE=(()=>{class t{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((s,a)=>{this.resolve=s,this.reject=a}),this.appInits=wt(rw,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const s=[];for(const l of this.appInits){const p=l();if(Wg(p))s.push(p);else if(sy(p)){const y=new Promise((w,P)=>{p.subscribe({complete:w,error:P})});s.push(y)}}const a=()=>{this.done=!0,this.resolve()};Promise.all(s).then(()=>{a()}).catch(l=>{this.reject(l)}),0===s.length&&a(),this.initialized=!0}static#e=this.\u0275fac=function(a){return new(a||t)};static#t=this.\u0275prov=Gt({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),iw=(()=>{class t{log(s){console.log(s)}warn(s){console.warn(s)}static#e=this.\u0275fac=function(a){return new(a||t)};static#t=this.\u0275prov=Gt({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();const Cy=new $t("LocaleId",{providedIn:"root",factory:()=>wt(Cy,Kt.Optional|Kt.SkipSelf)||function NA(){return typeof $localize<"u"&&$localize.locale||jf}()}),OA=new $t("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});let sw=(()=>{class t{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new ge.X(!1)}add(){this.hasPendingTasks.next(!0);const s=this.taskId++;return this.pendingTasks.add(s),s}remove(s){this.pendingTasks.delete(s),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(a){return new(a||t)};static#t=this.\u0275prov=Gt({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();class kA{constructor(r,s){this.ngModuleFactory=r,this.componentFactories=s}}let FA=(()=>{class t{compileModuleSync(s){return new cE(s)}compileModuleAsync(s){return Promise.resolve(this.compileModuleSync(s))}compileModuleAndAllComponentsSync(s){const a=this.compileModuleSync(s),p=Fu(li(s).declarations).reduce((y,w)=>{const P=Wn(w);return P&&y.push(new Oi(P)),y},[]);return new kA(a,p)}compileModuleAndAllComponentsAsync(s){return Promise.resolve(this.compileModuleAndAllComponentsSync(s))}clearCache(){}clearCacheFor(s){}getModuleId(s){}static#e=this.\u0275fac=function(a){return new(a||t)};static#t=this.\u0275prov=Gt({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const lw=new $t(""),cw=new $t("");let bE,iC=(()=>{class t{constructor(s,a,l){this._ngZone=s,this.registry=a,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,bE||(function sC(t){bE=t}(l),l.addToWindow(a)),this._watchAngularEvents(),s.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{So.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let s=this._callbacks.pop();clearTimeout(s.timeoutId),s.doneCb(this._didWork)}this._didWork=!1});else{let s=this.getPendingTasks();this._callbacks=this._callbacks.filter(a=>!a.updateCb||!a.updateCb(s)||(clearTimeout(a.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(s=>({source:s.source,creationLocation:s.creationLocation,data:s.data})):[]}addCallback(s,a,l){let p=-1;a&&a>0&&(p=setTimeout(()=>{this._callbacks=this._callbacks.filter(y=>y.timeoutId!==p),s(this._didWork,this.getPendingTasks())},a)),this._callbacks.push({doneCb:s,timeoutId:p,updateCb:l})}whenStable(s,a,l){if(l&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(s,a,l),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(s){this.registry.registerApplication(s,this)}unregisterApplication(s){this.registry.unregisterApplication(s)}findProviders(s,a,l){return[]}static#e=this.\u0275fac=function(a){return new(a||t)(_t(So),_t(dw),_t(cw))};static#t=this.\u0275prov=Gt({token:t,factory:t.\u0275fac})}return t})(),dw=(()=>{class t{constructor(){this._applications=new Map}registerApplication(s,a){this._applications.set(s,a)}unregisterApplication(s){this._applications.delete(s)}unregisterAllApplications(){this._applications.clear()}getTestability(s){return this._applications.get(s)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(s,a=!0){return bE?.findTestabilityInTree(this,s,a)??null}static#e=this.\u0275fac=function(a){return new(a||t)};static#t=this.\u0275prov=Gt({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})(),Sd=null;const hw=new $t("AllowMultipleToken"),SE=new $t("PlatformDestroyListeners"),RE=new $t("appBootstrapListener");class uC{constructor(r,s){this.name=r,this.token=s}}function gw(t,r,s=[]){const a=`Platform: ${r}`,l=new $t(a);return(p=[])=>{let y=PE();if(!y||y.injector.get(hw,!1)){const w=[...s,...p,{provide:l,useValue:!0}];t?t(w):function lC(t){if(Sd&&!Sd.get(hw,!1))throw new ce(400,!1);(function fw(){!function Pa(t){Ha=t}(()=>{throw new ce(600,!1)})})(),Sd=t;const r=t.get(_w);(function pw(t){t.get(kp,null)?.forEach(s=>s())})(t)}(function mw(t=[],r){return ca.create({name:r,providers:[{provide:Kd,useValue:"platform"},{provide:SE,useValue:new Set([()=>Sd=null])},...t]})}(w,a))}return function dC(t){const r=PE();if(!r)throw new ce(401,!1);return r}()}}function PE(){return Sd?.get(_w)??null}let _w=(()=>{class t{constructor(s){this._injector=s,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(s,a){const l=function hC(t="zone.js",r){return"noop"===t?new f_:"zone.js"===t?new So(r):t}(a?.ngZone,function yw(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}({eventCoalescing:a?.ngZoneEventCoalescing,runCoalescing:a?.ngZoneRunCoalescing}));return l.run(()=>{const p=function ED(t,r,s){return new lE(t,r,s)}(s.moduleType,this.injector,function Tw(t){return[{provide:So,useFactory:t},{provide:Ic,multi:!0,useFactory:()=>{const r=wt(pC,{optional:!0});return()=>r.initialize()}},{provide:ww,useFactory:fC},{provide:p_,useFactory:g_}]}(()=>l)),y=p.injector.get(jl,null);return l.runOutsideAngular(()=>{const w=l.onError.subscribe({next:P=>{y.handleError(P)}});p.onDestroy(()=>{Sy(this._modules,p),w.unsubscribe()})}),function vw(t,r,s){try{const a=s();return Wg(a)?a.catch(l=>{throw r.runOutsideAngular(()=>t.handleError(l)),l}):a}catch(a){throw r.runOutsideAngular(()=>t.handleError(a)),a}}(y,l,()=>{const w=p.injector.get(DE);return w.runInitializers(),w.donePromise.then(()=>(function MI(t){yt(t,"Expected localeId to be defined"),"string"==typeof t&&(PI=t.toLowerCase().replace(/_/g,"-"))}(p.injector.get(Cy,jf)||jf),this._moduleDoBootstrap(p),p))})})}bootstrapModule(s,a=[]){const l=Ew({},a);return function oC(t,r,s){const a=new cE(s);return Promise.resolve(a)}(0,0,s).then(p=>this.bootstrapModuleFactory(p,l))}_moduleDoBootstrap(s){const a=s.injector.get(zf);if(s._bootstrapComponents.length>0)s._bootstrapComponents.forEach(l=>a.bootstrap(l));else{if(!s.instance.ngDoBootstrap)throw new ce(-403,!1);s.instance.ngDoBootstrap(a)}this._modules.push(s)}onDestroy(s){this._destroyListeners.push(s)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new ce(404,!1);this._modules.slice().forEach(a=>a.destroy()),this._destroyListeners.forEach(a=>a());const s=this._injector.get(SE,null);s&&(s.forEach(a=>a()),s.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(a){return new(a||t)(_t(ca))};static#t=this.\u0275prov=Gt({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();function Ew(t,r){return Array.isArray(r)?r.reduce(Ew,t):{...t,...r}}let zf=(()=>{class t{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=wt(ww),this.zoneIsStable=wt(p_),this.componentTypes=[],this.components=[],this.isStable=wt(sw).hasPendingTasks.pipe((0,_e.w)(s=>s?(0,we.of)(!1):this.zoneIsStable),(0,Ne.x)(),(0,De.B)()),this._injector=wt(xu)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(s,a){const l=s instanceof n_;if(!this._injector.get(DE).done)throw!l&&vi(s),new ce(405,!1);let y;y=l?s:this._injector.get(dd).resolveComponentFactory(s),this.componentTypes.push(y.componentType);const w=function aC(t){return t.isBoundToModule}(y)?void 0:this._injector.get(Dh),$=y.create(ca.NULL,[],a||y.selector,w),X=$.location.nativeElement,he=$.injector.get(lw,null);return he?.registerApplication(X),$.onDestroy(()=>{this.detachView($.hostView),Sy(this.components,$),he?.unregisterApplication(X)}),this._loadComponent($),$}tick(){if(this._runningTick)throw new ce(101,!1);try{this._runningTick=!0;for(let s of this._views)s.detectChanges()}catch(s){this.internalErrorHandler(s)}finally{this._runningTick=!1}}attachView(s){const a=s;this._views.push(a),a.attachToAppRef(this)}detachView(s){const a=s;Sy(this._views,a),a.detachFromAppRef()}_loadComponent(s){this.attachView(s.hostView),this.tick(),this.components.push(s);const a=this._injector.get(RE,[]);a.push(...this._bootstrapListeners),a.forEach(l=>l(s))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(s=>s()),this._views.slice().forEach(s=>s.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(s){return this._destroyListeners.push(s),()=>Sy(this._destroyListeners,s)}destroy(){if(this._destroyed)throw new ce(406,!1);const s=this._injector;s.destroy&&!s.destroyed&&s.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(a){return new(a||t)};static#t=this.\u0275prov=Gt({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Sy(t,r){const s=t.indexOf(r);s>-1&&t.splice(s,1)}const ww=new $t("",{providedIn:"root",factory:()=>wt(jl).handleError.bind(void 0)});function fC(){const t=wt(So),r=wt(jl);return s=>t.runOutsideAngular(()=>r.handleError(s))}let pC=(()=>{class t{constructor(){this.zone=wt(So),this.applicationRef=wt(zf)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(a){return new(a||t)};static#t=this.\u0275prov=Gt({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function mC(){return!1}let _C=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=yC}return t})();function yC(t){return function vC(t,r,s){if(xo(t)&&!s){const a=Lo(t.index,r);return new fh(a,a)}return 47&t.type?new fh(r[Vr],r):null}(Yi(),dt(),16==(16&t))}class bw{constructor(){}supports(r){return Rc(r)}create(r){return new AC(r)}}const DC=(t,r)=>r;class AC{constructor(r){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=r||DC}forEachItem(r){let s;for(s=this._itHead;null!==s;s=s._next)r(s)}forEachOperation(r){let s=this._itHead,a=this._removalsHead,l=0,p=null;for(;s||a;){const y=!a||s&&s.currentIndex<Rw(a,l,p)?s:a,w=Rw(y,l,p),P=y.currentIndex;if(y===a)l--,a=a._nextRemoved;else if(s=s._next,null==y.previousIndex)l++;else{p||(p=[]);const $=w-l,X=P-l;if($!=X){for(let Me=0;Me<$;Me++){const je=Me<p.length?p[Me]:p[Me]=0,lt=je+Me;X<=lt&&lt<$&&(p[Me]=je+1)}p[y.previousIndex]=X-$}}w!==P&&r(y,w,P)}}forEachPreviousItem(r){let s;for(s=this._previousItHead;null!==s;s=s._nextPrevious)r(s)}forEachAddedItem(r){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)r(s)}forEachMovedItem(r){let s;for(s=this._movesHead;null!==s;s=s._nextMoved)r(s)}forEachRemovedItem(r){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)r(s)}forEachIdentityChange(r){let s;for(s=this._identityChangesHead;null!==s;s=s._nextIdentityChange)r(s)}diff(r){if(null==r&&(r=[]),!Rc(r))throw new ce(900,!1);return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let l,p,y,s=this._itHead,a=!1;if(Array.isArray(r)){this.length=r.length;for(let w=0;w<this.length;w++)p=r[w],y=this._trackByFn(w,p),null!==s&&Object.is(s.trackById,y)?(a&&(s=this._verifyReinsertion(s,p,y,w)),Object.is(s.item,p)||this._addIdentityChange(s,p)):(s=this._mismatch(s,p,y,w),a=!0),s=s._next}else l=0,function Pc(t,r){if(Array.isArray(t))for(let s=0;s<t.length;s++)r(t[s]);else{const s=t[Symbol.iterator]();let a;for(;!(a=s.next()).done;)r(a.value)}}(r,w=>{y=this._trackByFn(l,w),null!==s&&Object.is(s.trackById,y)?(a&&(s=this._verifyReinsertion(s,w,y,l)),Object.is(s.item,w)||this._addIdentityChange(s,w)):(s=this._mismatch(s,w,y,l),a=!0),s=s._next,l++}),this.length=l;return this._truncate(s),this.collection=r,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let r;for(r=this._previousItHead=this._itHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._additionsHead;null!==r;r=r._nextAdded)r.previousIndex=r.currentIndex;for(this._additionsHead=this._additionsTail=null,r=this._movesHead;null!==r;r=r._nextMoved)r.previousIndex=r.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(r,s,a,l){let p;return null===r?p=this._itTail:(p=r._prev,this._remove(r)),null!==(r=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null))?(Object.is(r.item,s)||this._addIdentityChange(r,s),this._reinsertAfter(r,p,l)):null!==(r=null===this._linkedRecords?null:this._linkedRecords.get(a,l))?(Object.is(r.item,s)||this._addIdentityChange(r,s),this._moveAfter(r,p,l)):r=this._addAfter(new CC(s,a),p,l),r}_verifyReinsertion(r,s,a,l){let p=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null);return null!==p?r=this._reinsertAfter(p,r._prev,l):r.currentIndex!=l&&(r.currentIndex=l,this._addToMoves(r,l)),r}_truncate(r){for(;null!==r;){const s=r._next;this._addToRemovals(this._unlink(r)),r=s}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(r,s,a){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(r);const l=r._prevRemoved,p=r._nextRemoved;return null===l?this._removalsHead=p:l._nextRemoved=p,null===p?this._removalsTail=l:p._prevRemoved=l,this._insertAfter(r,s,a),this._addToMoves(r,a),r}_moveAfter(r,s,a){return this._unlink(r),this._insertAfter(r,s,a),this._addToMoves(r,a),r}_addAfter(r,s,a){return this._insertAfter(r,s,a),this._additionsTail=null===this._additionsTail?this._additionsHead=r:this._additionsTail._nextAdded=r,r}_insertAfter(r,s,a){const l=null===s?this._itHead:s._next;return r._next=l,r._prev=s,null===l?this._itTail=r:l._prev=r,null===s?this._itHead=r:s._next=r,null===this._linkedRecords&&(this._linkedRecords=new Sw),this._linkedRecords.put(r),r.currentIndex=a,r}_remove(r){return this._addToRemovals(this._unlink(r))}_unlink(r){null!==this._linkedRecords&&this._linkedRecords.remove(r);const s=r._prev,a=r._next;return null===s?this._itHead=a:s._next=a,null===a?this._itTail=s:a._prev=s,r}_addToMoves(r,s){return r.previousIndex===s||(this._movesTail=null===this._movesTail?this._movesHead=r:this._movesTail._nextMoved=r),r}_addToRemovals(r){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Sw),this._unlinkedRecords.put(r),r.currentIndex=null,r._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=r,r._prevRemoved=null):(r._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=r),r}_addIdentityChange(r,s){return r.item=s,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=r:this._identityChangesTail._nextIdentityChange=r,r}}class CC{constructor(r,s){this.item=r,this.trackById=s,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class bC{constructor(){this._head=null,this._tail=null}add(r){null===this._head?(this._head=this._tail=r,r._nextDup=null,r._prevDup=null):(this._tail._nextDup=r,r._prevDup=this._tail,r._nextDup=null,this._tail=r)}get(r,s){let a;for(a=this._head;null!==a;a=a._nextDup)if((null===s||s<=a.currentIndex)&&Object.is(a.trackById,r))return a;return null}remove(r){const s=r._prevDup,a=r._nextDup;return null===s?this._head=a:s._nextDup=a,null===a?this._tail=s:a._prevDup=s,null===this._head}}class Sw{constructor(){this.map=new Map}put(r){const s=r.trackById;let a=this.map.get(s);a||(a=new bC,this.map.set(s,a)),a.add(r)}get(r,s){const l=this.map.get(r);return l?l.get(r,s):null}remove(r){const s=r.trackById;return this.map.get(s).remove(r)&&this.map.delete(s),r}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Rw(t,r,s){const a=t.previousIndex;if(null===a)return a;let l=0;return s&&a<s.length&&(l=s[a]),a+r+l}class Pw{constructor(){}supports(r){return r instanceof Map||yd(r)}create(){return new SC}}class SC{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(r){let s;for(s=this._mapHead;null!==s;s=s._next)r(s)}forEachPreviousItem(r){let s;for(s=this._previousMapHead;null!==s;s=s._nextPrevious)r(s)}forEachChangedItem(r){let s;for(s=this._changesHead;null!==s;s=s._nextChanged)r(s)}forEachAddedItem(r){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)r(s)}forEachRemovedItem(r){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)r(s)}diff(r){if(r){if(!(r instanceof Map||yd(r)))throw new ce(900,!1)}else r=new Map;return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let s=this._mapHead;if(this._appendAfter=null,this._forEach(r,(a,l)=>{if(s&&s.key===l)this._maybeAddToChanges(s,a),this._appendAfter=s,s=s._next;else{const p=this._getOrCreateRecordForKey(l,a);s=this._insertBeforeOrAppend(s,p)}}),s){s._prev&&(s._prev._next=null),this._removalsHead=s;for(let a=s;null!==a;a=a._nextRemoved)a===this._mapHead&&(this._mapHead=null),this._records.delete(a.key),a._nextRemoved=a._next,a.previousValue=a.currentValue,a.currentValue=null,a._prev=null,a._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(r,s){if(r){const a=r._prev;return s._next=r,s._prev=a,r._prev=s,a&&(a._next=s),r===this._mapHead&&(this._mapHead=s),this._appendAfter=r,r}return this._appendAfter?(this._appendAfter._next=s,s._prev=this._appendAfter):this._mapHead=s,this._appendAfter=s,null}_getOrCreateRecordForKey(r,s){if(this._records.has(r)){const l=this._records.get(r);this._maybeAddToChanges(l,s);const p=l._prev,y=l._next;return p&&(p._next=y),y&&(y._prev=p),l._next=null,l._prev=null,l}const a=new RC(r);return this._records.set(r,a),a.currentValue=s,this._addToAdditions(a),a}_reset(){if(this.isDirty){let r;for(this._previousMapHead=this._mapHead,r=this._previousMapHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._changesHead;null!==r;r=r._nextChanged)r.previousValue=r.currentValue;for(r=this._additionsHead;null!=r;r=r._nextAdded)r.previousValue=r.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(r,s){Object.is(s,r.currentValue)||(r.previousValue=r.currentValue,r.currentValue=s,this._addToChanges(r))}_addToAdditions(r){null===this._additionsHead?this._additionsHead=this._additionsTail=r:(this._additionsTail._nextAdded=r,this._additionsTail=r)}_addToChanges(r){null===this._changesHead?this._changesHead=this._changesTail=r:(this._changesTail._nextChanged=r,this._changesTail=r)}_forEach(r,s){r instanceof Map?r.forEach(s):Object.keys(r).forEach(a=>s(r[a],a))}}class RC{constructor(r){this.key=r,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Mw(){return new kE([new bw])}let kE=(()=>{class t{static#e=this.\u0275prov=Gt({token:t,providedIn:"root",factory:Mw});constructor(s){this.factories=s}static create(s,a){if(null!=a){const l=a.factories.slice();s=s.concat(l)}return new t(s)}static extend(s){return{provide:t,useFactory:a=>t.create(s,a||Mw()),deps:[[t,new Su,new Za]]}}find(s){const a=this.factories.find(l=>l.supports(s));if(null!=a)return a;throw new ce(901,!1)}}return t})();function Nw(){return new FE([new Pw])}let FE=(()=>{class t{static#e=this.\u0275prov=Gt({token:t,providedIn:"root",factory:Nw});constructor(s){this.factories=s}static create(s,a){if(a){const l=a.factories.slice();s=s.concat(l)}return new t(s)}static extend(s){return{provide:t,useFactory:a=>t.create(s,a||Nw()),deps:[[t,new Su,new Za]]}}find(s){const a=this.factories.find(l=>l.supports(s));if(a)return a;throw new ce(901,!1)}}return t})();const NC=gw(null,"core",[]);let OC=(()=>{class t{constructor(s){}static#e=this.\u0275fac=function(a){return new(a||t)(_t(zf))};static#t=this.\u0275mod=Ms({type:t});static#n=this.\u0275inj=Hn({})}return t})();function zC(t){return"boolean"==typeof t?t:null!=t&&"false"!==t}function WC(t){const r=Wn(t);if(!r)return null;const s=new Oi(r);return{get selector(){return s.selector},get type(){return s.componentType},get inputs(){return s.inputs},get outputs(){return s.outputs},get ngContentSelectors(){return s.ngContentSelectors},get isStandalone(){return r.standalone},get isSignal(){return r.signals}}}},721:(Nt,Ve,U)=>{U.d(Ve,{Ot:()=>ye,ZF:()=>mt,hX:()=>Ye,z6:()=>ge});var f=U(3182),Z=U(5879),q=U(1920);class ye{constructor(Ue){return Ue}}class ge{constructor(){return(0,f.C6)()}}const _e=new Z.OlP("angularfire2._apps"),Ne={provide:ye,useFactory:function De(ce){return ce&&1===ce.length?ce[0]:new ye((0,f.Mq)())},deps:[[new Z.FiY,_e]]},re={provide:ge,deps:[[new Z.FiY,_e]]};function se(ce){return(Ue,Ae)=>{const Ie=Ue.runOutsideAngular(()=>ce(Ae));return new ye(Ie)}}let ve=(()=>{class ce{constructor(Ae){(0,f.KN)("angularfire",q.q4.full,"core"),(0,f.KN)("angularfire",q.q4.full,"app"),(0,f.KN)("angular",Z.q4F.full,Ae.toString())}static \u0275fac=function(Ie){return new(Ie||ce)(Z.LFG(Z.Lbi))};static \u0275mod=Z.oAB({type:ce});static \u0275inj=Z.cJS({providers:[Ne,re]})}return ce})();function Ye(ce,...Ue){return{ngModule:ve,providers:[{provide:_e,useFactory:se(ce),multi:!0,deps:[Z.R0b,Z.zs3,q.HU,...Ue]}]}}const mt=(0,q.u3)(f.ZF,!0)},7213:(Nt,Ve,U)=>{U.d(Ve,{zQ:()=>yr,rT:()=>Tt,f7:()=>In,L6:()=>Fe,_Q:()=>xe,lh:()=>zt,Qv:()=>et,nw:()=>vn}),U(6365);var Z=U(6814),q=U(5879),ye=U(1920),ge=U(7217),we=U(8645),De=U(2096),_e=U(5592),Ne=U(2459),re=U(3019),se=U(3093),ve=U(4664),Ye=U(7398),We=U(4552);class at extends we.x{constructor(Dt=1/0,Te=1/0,Re=We.l){super(),this._bufferSize=Dt,this._windowTime=Te,this._timestampProvider=Re,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=Te===1/0,this._bufferSize=Math.max(1,Dt),this._windowTime=Math.max(1,Te)}next(Dt){const{isStopped:Te,_buffer:Re,_infiniteTimeWindow:$e,_timestampProvider:Le,_windowTime:He}=this;Te||(Re.push(Dt),!$e&&Re.push(Le.now()+He)),this._trimBuffer(),super.next(Dt)}_subscribe(Dt){this._throwIfClosed(),this._trimBuffer();const Te=this._innerSubscribe(Dt),{_infiniteTimeWindow:Re,_buffer:$e}=this,Le=$e.slice();for(let He=0;He<Le.length&&!Dt.closed;He+=Re?1:2)Dt.next(Le[He]);return this._checkFinalizedStatuses(Dt),Te}_trimBuffer(){const{_bufferSize:Dt,_timestampProvider:Te,_buffer:Re,_infiniteTimeWindow:$e}=this,Le=($e?1:2)*Dt;if(Dt<1/0&&Le<Re.length&&Re.splice(0,Re.length-Le),!$e){const He=Te.now();let tt=0;for(let yt=1;yt<Re.length&&Re[yt]<=He;yt+=2)tt=yt;tt&&Re.splice(0,tt+1)}}}var it=U(3020);function mt(Ft,Dt,Te){let Re,$e=!1;return Ft&&"object"==typeof Ft?({bufferSize:Re=1/0,windowTime:Dt=1/0,refCount:$e=!1,scheduler:Te}=Ft):Re=Ft??1/0,(0,it.B)({connector:()=>new at(Re,Dt,Te),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:$e})}var nt=U(1374),Lt=U(4674);function ot(Ft,Dt){return(0,Lt.m)(Dt)?(0,ve.w)(()=>Ft,Dt):(0,ve.w)(()=>Ft)}var ce=U(5137),Ue=U(2181);U(7142);const et=new q.OlP("angularfire2.auth.use-emulator"),Fe=new q.OlP("angularfire2.auth.settings"),xe=new q.OlP("angularfire2.auth.tenant-id"),Tt=new q.OlP("angularfire2.auth.langugage-code"),zt=new q.OlP("angularfire2.auth.use-device-language"),In=new q.OlP("angularfire.auth.persistence"),vn=(Ft,Dt,Te,Re,$e,Le,He,tt)=>(0,ge.cc)(`${Ft.name}.auth`,"AngularFireAuth",Ft.name,()=>{const yt=Dt.runOutsideAngular(()=>Ft.auth());if(Te&&yt.useEmulator(...Te),Re&&(yt.tenantId=Re),yt.languageCode=$e,Le&&yt.useDeviceLanguage(),He)for(const[vt,$n]of Object.entries(He))yt.settings[vt]=$n;return tt&&yt.setPersistence(tt),yt},[Te,Re,$e,Le,He,tt]);let yr=(()=>{class Ft{authState;idToken;user;idTokenResult;credential;constructor(Te,Re,$e,Le,He,tt,yt,vt,$n,jt,nn,Gt){const or=new we.x,Hn=(0,De.of)(void 0).pipe((0,se.Q)(He.outsideAngular),(0,ve.w)(()=>Le.runOutsideAngular(()=>Promise.resolve().then(U.bind(U,6365)))),(0,Ye.U)(()=>(0,ge.on)(Te,Le,Re)),(0,Ye.U)(Ln=>vn(Ln,Le,tt,vt,$n,jt,yt,nn)),mt({bufferSize:1,refCount:!1}));if((0,Z.PM)($e))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,De.of)(null);else{Hn.pipe((0,nt.P)()).subscribe();const Ln=Hn.pipe((0,ve.w)(An=>An.getRedirectResult().then(Ir=>Ir,()=>null)),ye.iC,mt({bufferSize:1,refCount:!1})),Pt=Hn.pipe((0,ve.w)(An=>new _e.y(Ir=>({unsubscribe:Le.runOutsideAngular(()=>An.onAuthStateChanged(Vn=>Ir.next(Vn),Vn=>Ir.error(Vn),()=>Ir.complete()))})))),zn=Hn.pipe((0,ve.w)(An=>new _e.y(Ir=>({unsubscribe:Le.runOutsideAngular(()=>An.onIdTokenChanged(Vn=>Ir.next(Vn),Vn=>Ir.error(Vn),()=>Ir.complete()))}))));this.authState=Ln.pipe(ot(Pt),(0,ce.R)(He.outsideAngular),(0,se.Q)(He.insideAngular)),this.user=Ln.pipe(ot(zn),(0,ce.R)(He.outsideAngular),(0,se.Q)(He.insideAngular)),this.idToken=this.user.pipe((0,ve.w)(An=>An?(0,Ne.D)(An.getIdToken()):(0,De.of)(null))),this.idTokenResult=this.user.pipe((0,ve.w)(An=>An?(0,Ne.D)(An.getIdTokenResult()):(0,De.of)(null))),this.credential=(0,re.T)(Ln,or,this.authState.pipe((0,Ue.h)(An=>!An))).pipe((0,Ye.U)(An=>An?.user?An:null),(0,ce.R)(He.outsideAngular),(0,se.Q)(He.insideAngular))}return(0,ge.pX)(this,Hn,Le,{spy:{apply:(Ln,Pt,zn)=>{(Ln.startsWith("signIn")||Ln.startsWith("createUser"))&&zn.then(An=>or.next(An))}}})}static \u0275fac=function(Re){return new(Re||Ft)(q.LFG(ge.Dh),q.LFG(ge.xv,8),q.LFG(q.Lbi),q.LFG(q.R0b),q.LFG(ye.HU),q.LFG(et,8),q.LFG(Fe,8),q.LFG(xe,8),q.LFG(Tt,8),q.LFG(zt,8),q.LFG(In,8),q.LFG(ye.Rf,8))};static \u0275prov=q.Yz7({token:Ft,factory:Ft.\u0275fac,providedIn:"any"})}return Ft})()},830:(Nt,Ve,U)=>{U.d(Ve,{Q1:()=>Si,TE:()=>ko});var f=U(1920),Z=U(5592),q=U(2096),ye=U(2459),ge=U(6321),we=U(9360),De=U(8251),Ne=U(7398),re=U(4664),se=U(5879),ve=U(7217),Ye=U(3106),We=U(5861),at=U(534),it=U(9058),mt=U(4537);const nt="firebasestorage.googleapis.com",Lt="storageBucket";class Ae extends it.ZR{constructor(H,ae,b=0){super(et(H),`Firebase Storage: ${ae} (${et(H)})`),this.status_=b,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ae.prototype)}get status(){return this.status_}set status(H){this.status_=H}_codeEquals(H){return et(H)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(H){this.customData.serverResponse=H,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var Ie=function(j){return j.UNKNOWN="unknown",j.OBJECT_NOT_FOUND="object-not-found",j.BUCKET_NOT_FOUND="bucket-not-found",j.PROJECT_NOT_FOUND="project-not-found",j.QUOTA_EXCEEDED="quota-exceeded",j.UNAUTHENTICATED="unauthenticated",j.UNAUTHORIZED="unauthorized",j.UNAUTHORIZED_APP="unauthorized-app",j.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",j.INVALID_CHECKSUM="invalid-checksum",j.CANCELED="canceled",j.INVALID_EVENT_NAME="invalid-event-name",j.INVALID_URL="invalid-url",j.INVALID_DEFAULT_BUCKET="invalid-default-bucket",j.NO_DEFAULT_BUCKET="no-default-bucket",j.CANNOT_SLICE_BLOB="cannot-slice-blob",j.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",j.NO_DOWNLOAD_URL="no-download-url",j.INVALID_ARGUMENT="invalid-argument",j.INVALID_ARGUMENT_COUNT="invalid-argument-count",j.APP_DELETED="app-deleted",j.INVALID_ROOT_OPERATION="invalid-root-operation",j.INVALID_FORMAT="invalid-format",j.INTERNAL_ERROR="internal-error",j.UNSUPPORTED_ENVIRONMENT="unsupported-environment",j}(Ie||{});function et(j){return"storage/"+j}function Fe(){return new Ae(Ie.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function yr(){return new Ae(Ie.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function kt(){return new Ae(Ie.CANCELED,"User canceled the upload/download.")}function Re(){return new Ae(Ie.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function tt(j){return new Ae(Ie.INVALID_ARGUMENT,j)}function yt(){return new Ae(Ie.APP_DELETED,"The Firebase app was deleted.")}function vt(j){return new Ae(Ie.INVALID_ROOT_OPERATION,"The operation '"+j+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function $n(j,H){return new Ae(Ie.INVALID_FORMAT,"String does not match format '"+j+"': "+H)}function jt(j){throw new Ae(Ie.INTERNAL_ERROR,"Internal error: "+j)}class nn{constructor(H,ae){this.bucket=H,this.path_=ae}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const H=encodeURIComponent;return"/b/"+H(this.bucket)+"/o/"+H(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(H,ae){let b;try{b=nn.makeFromUrl(H,ae)}catch{return new nn(H,"")}if(""===b.path)return b;throw function Dt(j){return new Ae(Ie.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+j+"'.")}(H)}static makeFromUrl(H,ae){let b=null;const O="([A-Za-z0-9.\\-_]+)",de=new RegExp("^gs://"+O+"(/(.*))?$","i");function ht(Ar){Ar.path_=decodeURIComponent(Ar.path)}const ir=ae.replace(/[.]/g,"\\."),Ri=[{regex:de,indices:{bucket:1,path:3},postModify:function C(Ar){"/"===Ar.path.charAt(Ar.path.length-1)&&(Ar.path_=Ar.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${ir}/v[A-Za-z0-9_]+/b/${O}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:ht},{regex:new RegExp(`^https?://${ae===nt?"(?:storage.googleapis.com|storage.cloud.google.com)":ae}/${O}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:ht}];for(let Ar=0;Ar<Ri.length;Ar++){const to=Ri[Ar],gs=to.regex.exec(H);if(gs){let no=gs[to.indices.path];no||(no=""),b=new nn(gs[to.indices.bucket],no),to.postModify(b);break}}if(null==b)throw function Ft(j){return new Ae(Ie.INVALID_URL,"Invalid URL '"+j+"'.")}(H);return b}}class Gt{constructor(H){this.promise_=Promise.reject(H)}getPromise(){return this.promise_}cancel(H=!1){}}function An(j){return"string"==typeof j||j instanceof String}function Ir(j){return Vn()&&j instanceof Blob}function Vn(){return typeof Blob<"u"}function Zn(j,H,ae,b){if(b<H)throw tt(`Invalid value for '${j}'. Expected ${H} or greater.`);if(b>ae)throw tt(`Invalid value for '${j}'. Expected ${ae} or less.`)}function On(j,H,ae){let b=H;return null==ae&&(b=`https://${H}`),`${ae}://${b}/v0${j}`}function ti(j){const H=encodeURIComponent;let ae="?";for(const b in j)j.hasOwnProperty(b)&&(ae=ae+(H(b)+"=")+H(j[b])+"&");return ae=ae.slice(0,-1),ae}var Kt=function(j){return j[j.NO_ERROR=0]="NO_ERROR",j[j.NETWORK_ERROR=1]="NETWORK_ERROR",j[j.ABORT=2]="ABORT",j}(Kt||{});function an(j,H){const ae=j>=500&&j<600,O=-1!==[408,429].indexOf(j),C=-1!==H.indexOf(j);return ae||O||C}class rn{constructor(H,ae,b,O,C,K,de,Xe,ht,un,ir,lr=!0){this.url_=H,this.method_=ae,this.headers_=b,this.body_=O,this.successCodes_=C,this.additionalRetryCodes_=K,this.callback_=de,this.errorCallback_=Xe,this.timeout_=ht,this.progressCallback_=un,this.connectionFactory_=ir,this.retry=lr,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((Dr,er)=>{this.resolve_=Dr,this.reject_=er,this.start_()})}start_(){const ae=(b,O)=>{const C=this.resolve_,K=this.reject_,de=O.connection;if(O.wasSuccessCode)try{const Xe=this.callback_(de,de.getResponse());!function Ln(j){return void 0!==j}(Xe)?C():C(Xe)}catch(Xe){K(Xe)}else if(null!==de){const Xe=Fe();Xe.serverResponse=de.getErrorText(),K(this.errorCallback_?this.errorCallback_(de,Xe):Xe)}else K(O.canceled?this.appDelete_?yt():kt():yr())};this.canceled_?ae(0,new Kn(!1,null,!0)):this.backoffId_=function or(j,H,ae){let b=1,O=null,C=null,K=!1,de=0;function Xe(){return 2===de}let ht=!1;function un(...Xr){ht||(ht=!0,H.apply(null,Xr))}function ir(Xr){O=setTimeout(()=>{O=null,j(Dr,Xe())},Xr)}function lr(){C&&clearTimeout(C)}function Dr(Xr,...As){if(ht)return void lr();if(Xr)return lr(),void un.call(null,Xr,...As);if(Xe()||K)return lr(),void un.call(null,Xr,...As);let Ri;b<64&&(b*=2),1===de?(de=2,Ri=0):Ri=1e3*(b+Math.random()),ir(Ri)}let er=!1;function ci(Xr){er||(er=!0,lr(),!ht&&(null!==O?(Xr||(de=2),clearTimeout(O),ir(0)):Xr||(de=1)))}return ir(0),C=setTimeout(()=>{K=!0,ci(!0)},ae),ci}((b,O)=>{if(O)return void b(!1,new Kn(!1,null,!0));const C=this.connectionFactory_();this.pendingConnection_=C;const K=de=>{null!==this.progressCallback_&&this.progressCallback_(de.loaded,de.lengthComputable?de.total:-1)};null!==this.progressCallback_&&C.addUploadProgressListener(K),C.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&C.removeUploadProgressListener(K),this.pendingConnection_=null;const de=C.getErrorCode()===Kt.NO_ERROR,Xe=C.getStatus();if(!de||an(Xe,this.additionalRetryCodes_)&&this.retry){const un=C.getErrorCode()===Kt.ABORT;return void b(!1,new Kn(!1,null,un))}const ht=-1!==this.successCodes_.indexOf(Xe);b(!0,new Kn(ht,C))})},ae,this.timeout_)}getPromise(){return this.promise_}cancel(H){this.canceled_=!0,this.appDelete_=H||!1,null!==this.backoffId_&&function Hn(j){j(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class Kn{constructor(H,ae,b){this.wasSuccessCode=H,this.connection=ae,this.canceled=!!b}}function Mi(...j){const H=function $t(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==H){const ae=new H;for(let b=0;b<j.length;b++)ae.append(j[b]);return ae.getBlob()}if(Vn())return new Blob(j);throw new Ae(Ie.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const Yn={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class br{constructor(H,ae){this.data=H,this.contentType=ae||null}}function Un(j,H){switch(j){case Yn.RAW:return new br(Pn(H));case Yn.BASE64:case Yn.BASE64URL:return new br(Ni(j,H));case Yn.DATA_URL:return new br(function Sr(j){const H=new si(j);return H.base64?Ni(Yn.BASE64,H.rest):function Br(j){let H;try{H=decodeURIComponent(j)}catch{throw $n(Yn.DATA_URL,"Malformed data URL.")}return Pn(H)}(H.rest)}(H),function fr(j){return new si(j).contentType}(H))}throw Fe()}function Pn(j){const H=[];for(let ae=0;ae<j.length;ae++){let b=j.charCodeAt(ae);b<=127?H.push(b):b<=2047?H.push(192|b>>6,128|63&b):55296==(64512&b)?ae<j.length-1&&56320==(64512&j.charCodeAt(ae+1))?(b=65536|(1023&b)<<10|1023&j.charCodeAt(++ae),H.push(240|b>>18,128|b>>12&63,128|b>>6&63,128|63&b)):H.push(239,191,189):56320==(64512&b)?H.push(239,191,189):H.push(224|b>>12,128|b>>6&63,128|63&b)}return new Uint8Array(H)}function Ni(j,H){switch(j){case Yn.BASE64:{const O=-1!==H.indexOf("-"),C=-1!==H.indexOf("_");if(O||C)throw $n(j,"Invalid character '"+(O?"-":"_")+"' found: is it base64url encoded?");break}case Yn.BASE64URL:{const O=-1!==H.indexOf("+"),C=-1!==H.indexOf("/");if(O||C)throw $n(j,"Invalid character '"+(O?"+":"/")+"' found: is it base64 encoded?");H=H.replace(/-/g,"+").replace(/_/g,"/");break}}let ae;try{ae=function Wt(j){if(typeof atob>"u")throw function He(j){return new Ae(Ie.UNSUPPORTED_ENVIRONMENT,`${j} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(j)}(H)}catch(O){throw O.message.includes("polyfill")?O:$n(j,"Invalid character found")}const b=new Uint8Array(ae.length);for(let O=0;O<ae.length;O++)b[O]=ae.charCodeAt(O);return b}class si{constructor(H){this.base64=!1,this.contentType=null;const ae=H.match(/^data:([^,]+)?,/);if(null===ae)throw $n(Yn.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const b=ae[1]||null;null!=b&&(this.base64=function Mr(j,H){return j.length>=H.length&&j.substring(j.length-H.length)===H}(b,";base64"),this.contentType=this.base64?b.substring(0,b.length-7):b),this.rest=H.substring(H.indexOf(",")+1)}}class rr{constructor(H,ae){let b=0,O="";Ir(H)?(this.data_=H,b=H.size,O=H.type):H instanceof ArrayBuffer?(ae?this.data_=new Uint8Array(H):(this.data_=new Uint8Array(H.byteLength),this.data_.set(new Uint8Array(H))),b=this.data_.length):H instanceof Uint8Array&&(ae?this.data_=H:(this.data_=new Uint8Array(H.length),this.data_.set(H)),b=H.length),this.size_=b,this.type_=O}size(){return this.size_}type(){return this.type_}slice(H,ae){if(Ir(this.data_)){const O=function Cn(j,H,ae){return j.webkitSlice?j.webkitSlice(H,ae):j.mozSlice?j.mozSlice(H,ae):j.slice?j.slice(H,ae):null}(this.data_,H,ae);return null===O?null:new rr(O)}{const b=new Uint8Array(this.data_.buffer,H,ae-H);return new rr(b,!0)}}static getBlob(...H){if(Vn()){const ae=H.map(b=>b instanceof rr?b.data_:b);return new rr(Mi.apply(null,ae))}{const ae=H.map(K=>An(K)?Un(Yn.RAW,K).data:K.data_);let b=0;ae.forEach(K=>{b+=K.byteLength});const O=new Uint8Array(b);let C=0;return ae.forEach(K=>{for(let de=0;de<K.length;de++)O[C++]=K[de]}),new rr(O,!0)}}uploadData(){return this.data_}}function Ee(j){let H;try{H=JSON.parse(j)}catch{return null}return function zn(j){return"object"==typeof j&&!Array.isArray(j)}(H)?H:null}function F(j){const H=j.lastIndexOf("/",j.length-2);return-1===H?j:j.slice(H+1)}function k(j,H){return H}class oe{constructor(H,ae,b,O){this.server=H,this.local=ae||H,this.writable=!!b,this.xform=O||k}}let Pe=null;function _t(){if(Pe)return Pe;const j=[];j.push(new oe("bucket")),j.push(new oe("generation")),j.push(new oe("metageneration")),j.push(new oe("name","fullPath",!0));const ae=new oe("name");ae.xform=function H(C,K){return function st(j){return!An(j)||j.length<2?j:F(j)}(K)},j.push(ae);const O=new oe("size");return O.xform=function b(C,K){return void 0!==K?Number(K):K},j.push(O),j.push(new oe("timeCreated")),j.push(new oe("updated")),j.push(new oe("md5Hash",null,!0)),j.push(new oe("cacheControl",null,!0)),j.push(new oe("contentDisposition",null,!0)),j.push(new oe("contentEncoding",null,!0)),j.push(new oe("contentLanguage",null,!0)),j.push(new oe("contentType",null,!0)),j.push(new oe("metadata","customMetadata",!0)),Pe=j,Pe}function qt(j,H,ae){const b=Ee(H);return null===b?null:function wt(j,H,ae){const b={type:"file"},O=ae.length;for(let C=0;C<O;C++){const K=ae[C];b[K.local]=K.xform(b,H[K.server])}return function Ot(j,H){Object.defineProperty(j,"ref",{get:function ae(){const C=new nn(j.bucket,j.fullPath);return H._makeStorageReference(C)}})}(b,j),b}(j,b,ae)}function ln(j,H){const ae={},b=H.length;for(let O=0;O<b;O++){const C=H[O];C.writable&&(ae[C.server]=j[C.local])}return JSON.stringify(ae)}const oi="prefixes",vs="items";class Jr{constructor(H,ae,b,O){this.url=H,this.method=ae,this.handler=b,this.timeout=O,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function ar(j){if(!j)throw Fe()}function ai(j,H){return function ae(b,O){const C=qt(j,O,H);return ar(null!==C),C}}function rt(j){return function H(ae,b){let O;return O=401===ae.getStatus()?ae.getErrorText().includes("Firebase App Check token is invalid")?function In(){return new Ae(Ie.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function zt(){return new Ae(Ie.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===ae.getStatus()?function Tt(j){return new Ae(Ie.QUOTA_EXCEEDED,"Quota for bucket '"+j+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(j.bucket):403===ae.getStatus()?function vn(j){return new Ae(Ie.UNAUTHORIZED,"User does not have permission to access '"+j+"'.")}(j.path):b,O.status=ae.getStatus(),O.serverResponse=b.serverResponse,O}}function It(j){const H=rt(j);return function ae(b,O){let C=H(b,O);return 404===b.getStatus()&&(C=function xe(j){return new Ae(Ie.OBJECT_NOT_FOUND,"Object '"+j+"' does not exist.")}(j.path)),C.serverResponse=O.serverResponse,C}}function pn(j,H,ae){const O=On(H.fullServerUrl(),j.host,j._protocol),K=j.maxOperationRetryTime,de=new Jr(O,"GET",ai(j,ae),K);return de.errorHandler=It(H),de}function Xt(j,H,ae,b,O){const C={};C.prefix=H.isRoot?"":H.path+"/",ae&&ae.length>0&&(C.delimiter=ae),b&&(C.pageToken=b),O&&(C.maxResults=O);const de=On(H.bucketOnlyServerUrl(),j.host,j._protocol),ht=j.maxOperationRetryTime,un=new Jr(de,"GET",function ke(j,H){return function ae(b,O){const C=function Ci(j,H,ae){const b=Ee(ae);return null===b?null:function as(j,H,ae){const b={prefixes:[],items:[],nextPageToken:ae.nextPageToken};if(ae[oi])for(const O of ae[oi]){const C=O.replace(/\/$/,""),K=j._makeStorageReference(new nn(H,C));b.prefixes.push(K)}if(ae[vs])for(const O of ae[vs]){const C=j._makeStorageReference(new nn(H,O.name));b.items.push(C)}return b}(j,H,b)}(j,H,O);return ar(null!==C),C}}(j,H.bucket),ht);return un.urlParams=C,un.errorHandler=rt(H),un}function Po(j,H,ae){const b=Object.assign({},ae);return b.fullPath=j.path,b.size=H.size(),b.contentType||(b.contentType=function Es(j,H){return j&&j.contentType||H&&H.type()||"application/octet-stream"}(null,H)),b}class us{constructor(H,ae,b,O){this.current=H,this.total=ae,this.finalized=!!b,this.metadata=O||null}}function ki(j,H){let ae=null;try{ae=j.getResponseHeader("X-Goog-Upload-Status")}catch{ar(!1)}return ar(!!ae&&-1!==(H||["active"]).indexOf(ae)),ae}const qr={STATE_CHANGED:"state_changed"},ur={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Us(j){switch(j){case"running":case"pausing":case"canceling":return ur.RUNNING;case"paused":return ur.PAUSED;case"success":return ur.SUCCESS;case"canceled":return ur.CANCELED;default:return ur.ERROR}}class Ys{constructor(H,ae,b){if(function Pt(j){return"function"==typeof j}(H)||null!=ae||null!=b)this.next=H,this.error=ae??void 0,this.complete=b??void 0;else{const C=H;this.next=C.next,this.error=C.error,this.complete=C.complete}}}function yi(j){return(...H)=>{Promise.resolve().then(()=>j(...H))}}let Js=null;class Rs{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Kt.NO_ERROR,this.sendPromise_=new Promise(H=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Kt.ABORT,H()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Kt.NETWORK_ERROR,H()}),this.xhr_.addEventListener("load",()=>{H()})})}send(H,ae,b,O){if(this.sent_)throw jt("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(ae,H,!0),void 0!==O)for(const C in O)O.hasOwnProperty(C)&&this.xhr_.setRequestHeader(C,O[C].toString());return void 0!==b?this.xhr_.send(b):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw jt("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw jt("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw jt("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw jt("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(H){return this.xhr_.getResponseHeader(H)}addUploadProgressListener(H){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",H)}removeUploadProgressListener(H){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",H)}}class Ps extends Rs{initXhr(){this.xhr_.responseType="text"}}function Fi(){return Js?Js():new Ps}class Bs{constructor(H,ae,b=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=H,this._blob=ae,this._metadata=b,this._mappings=_t(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=O=>{if(this._request=void 0,this._chunkMultiplier=1,O._codeEquals(Ie.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const C=this.isExponentialBackoffExpired();if(an(O.status,[])){if(!C)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();O=yr()}this._error=O,this._transition("error")}},this._metadataErrorHandler=O=>{this._request=void 0,O._codeEquals(Ie.CANCELED)?this.completeTransitions_():(this._error=O,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((O,C)=>{this._resolve=O,this._reject=C,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const H=this._transferred;return ae=>this._updateProgress(H+ae)}_shouldDoResumable(H){return H.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(H){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([ae,b])=>{switch(this._state){case"running":H(ae,b);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((H,ae)=>{const b=function ls(j,H,ae,b,O){const C=H.bucketOnlyServerUrl(),K=Po(H,b,O),de={name:K.fullPath},Xe=On(C,j.host,j._protocol),un={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${b.size()}`,"X-Goog-Upload-Header-Content-Type":K.contentType,"Content-Type":"application/json; charset=utf-8"},ir=ln(K,ae),er=new Jr(Xe,"POST",function Dr(ci){let Xr;ki(ci);try{Xr=ci.getResponseHeader("X-Goog-Upload-URL")}catch{ar(!1)}return ar(An(Xr)),Xr},j.maxUploadRetryTime);return er.urlParams=de,er.headers=un,er.body=ir,er.errorHandler=rt(H),er}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),O=this._ref.storage._makeRequest(b,Fi,H,ae);this._request=O,O.getPromise().then(C=>{this._request=void 0,this._uploadUrl=C,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const H=this._uploadUrl;this._resolveToken((ae,b)=>{const O=function Zs(j,H,ae,b){const Xe=new Jr(ae,"POST",function C(ht){const un=ki(ht,["active","final"]);let ir=null;try{ir=ht.getResponseHeader("X-Goog-Upload-Size-Received")}catch{ar(!1)}ir||ar(!1);const lr=Number(ir);return ar(!isNaN(lr)),new us(lr,b.size(),"final"===un)},j.maxUploadRetryTime);return Xe.headers={"X-Goog-Upload-Command":"query"},Xe.errorHandler=rt(H),Xe}(this._ref.storage,this._ref._location,H,this._blob),C=this._ref.storage._makeRequest(O,Fi,ae,b);this._request=C,C.getPromise().then(K=>{this._request=void 0,this._updateProgress(K.current),this._needToFetchStatus=!1,K.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const H=262144*this._chunkMultiplier,ae=new us(this._transferred,this._blob.size()),b=this._uploadUrl;this._resolveToken((O,C)=>{let K;try{K=function _o(j,H,ae,b,O,C,K,de){const Xe=new us(0,0);if(K?(Xe.current=K.current,Xe.total=K.total):(Xe.current=0,Xe.total=b.size()),b.size()!==Xe.total)throw function $e(){return new Ae(Ie.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}();const ht=Xe.total-Xe.current;let un=ht;O>0&&(un=Math.min(un,O));const ir=Xe.current;let Dr="";Dr=0===un?"finalize":ht===un?"upload, finalize":"upload";const er={"X-Goog-Upload-Command":Dr,"X-Goog-Upload-Offset":`${Xe.current}`},ci=b.slice(ir,ir+un);if(null===ci)throw Re();const Ri=new Jr(ae,"POST",function Xr(Ar,to){const gs=ki(Ar,["active","final"]),di=Xe.current+un,no=b.size();let Cs;return Cs="final"===gs?ai(H,C)(Ar,to):null,new us(di,no,"final"===gs,Cs)},H.maxUploadRetryTime);return Ri.headers=er,Ri.body=ci.uploadData(),Ri.progressCallback=de||null,Ri.errorHandler=rt(j),Ri}(this._ref._location,this._ref.storage,b,this._blob,H,this._mappings,ae,this._makeProgressCallback())}catch(Xe){return this._error=Xe,void this._transition("error")}const de=this._ref.storage._makeRequest(K,Fi,O,C,!1);this._request=de,de.getPromise().then(Xe=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(Xe.current),Xe.finalized?(this._metadata=Xe.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((H,ae)=>{const b=pn(this._ref.storage,this._ref._location,this._mappings),O=this._ref.storage._makeRequest(b,Fi,H,ae);this._request=O,O.getPromise().then(C=>{this._request=void 0,this._metadata=C,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((H,ae)=>{const b=function Xn(j,H,ae,b,O){const C=H.bucketOnlyServerUrl(),K={"X-Goog-Upload-Protocol":"multipart"},Xe=function de(){let Ri="";for(let Ar=0;Ar<2;Ar++)Ri+=Math.random().toString().slice(2);return Ri}();K["Content-Type"]="multipart/related; boundary="+Xe;const ht=Po(H,b,O),un=ln(ht,ae),Dr=rr.getBlob("--"+Xe+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+un+"\r\n--"+Xe+"\r\nContent-Type: "+ht.contentType+"\r\n\r\n",b,"\r\n--"+Xe+"--");if(null===Dr)throw Re();const er={name:ht.fullPath},ci=On(C,j.host,j._protocol),As=j.maxUploadRetryTime,jr=new Jr(ci,"POST",ai(j,ae),As);return jr.urlParams=er,jr.headers=K,jr.body=Dr.uploadData(),jr.errorHandler=rt(H),jr}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),O=this._ref.storage._makeRequest(b,Fi,H,ae);this._request=O,O.getPromise().then(C=>{this._request=void 0,this._metadata=C,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(H){const ae=this._transferred;this._transferred=H,this._transferred!==ae&&this._notifyObservers()}_transition(H){if(this._state!==H)switch(H){case"canceling":case"pausing":this._state=H,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const ae="paused"===this._state;this._state=H,ae&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=H,this._notifyObservers();break;case"canceled":this._error=kt(),this._state=H,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const H=Us(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:H,metadata:this._metadata,task:this,ref:this._ref}}on(H,ae,b,O){const C=new Ys(ae||void 0,b||void 0,O||void 0);return this._addObserver(C),()=>{this._removeObserver(C)}}then(H,ae){return this._promise.then(H,ae)}catch(H){return this.then(null,H)}_addObserver(H){this._observers.push(H),this._notifyObserver(H)}_removeObserver(H){const ae=this._observers.indexOf(H);-1!==ae&&this._observers.splice(ae,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(ae=>{this._notifyObserver(ae)})}_finishPromise(){if(void 0!==this._resolve){let H=!0;switch(Us(this._state)){case ur.SUCCESS:yi(this._resolve.bind(null,this.snapshot))();break;case ur.CANCELED:case ur.ERROR:yi(this._reject.bind(null,this._error))();break;default:H=!1}H&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(H){switch(Us(this._state)){case ur.RUNNING:case ur.PAUSED:H.next&&yi(H.next.bind(H,this.snapshot))();break;case ur.SUCCESS:H.complete&&yi(H.complete.bind(H))();break;default:H.error&&yi(H.error.bind(H,this._error))()}}resume(){const H="paused"===this._state||"pausing"===this._state;return H&&this._transition("running"),H}pause(){const H="running"===this._state;return H&&this._transition("pausing"),H}cancel(){const H="running"===this._state||"pausing"===this._state;return H&&this._transition("canceling"),H}}class ws{constructor(H,ae){this._service=H,this._location=ae instanceof nn?ae:nn.makeFromUrl(ae,H.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(H,ae){return new ws(H,ae)}get root(){const H=new nn(this._location.bucket,"");return this._newRef(this._service,H)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return F(this._location.path)}get storage(){return this._service}get parent(){const H=function ne(j){if(0===j.length)return null;const H=j.lastIndexOf("/");return-1===H?"":j.slice(0,H)}(this._location.path);if(null===H)return null;const ae=new nn(this._location.bucket,H);return new ws(this._service,ae)}_throwIfRoot(H){if(""===this._location.path)throw vt(H)}}function Li(j,H,ae){return Nr.apply(this,arguments)}function Nr(){return(Nr=(0,We.Z)(function*(j,H,ae){const O=yield vi(j,{pageToken:ae});H.prefixes.push(...O.prefixes),H.items.push(...O.items),null!=O.nextPageToken&&(yield Li(j,H,O.nextPageToken))})).apply(this,arguments)}function vi(j,H){null!=H&&"number"==typeof H.maxResults&&Zn("options.maxResults",1,1e3,H.maxResults);const ae=H||{},b=Xt(j.storage,j._location,"/",ae.pageToken,ae.maxResults);return j.storage.makeRequestWithTokens(b,Fi)}function Xs(j){j._throwIfRoot("getDownloadURL");const H=function xn(j,H,ae){const O=On(H.fullServerUrl(),j.host,j._protocol),K=j.maxOperationRetryTime,de=new Jr(O,"GET",function Oe(j,H){return function ae(b,O){const C=qt(j,O,H);return ar(null!==C),function Gn(j,H,ae,b){const O=Ee(H);if(null===O||!An(O.downloadTokens))return null;const C=O.downloadTokens;if(0===C.length)return null;const K=encodeURIComponent;return C.split(",").map(ht=>{const ir=j.fullPath;return On("/b/"+K(j.bucket)+"/o/"+K(ir),ae,b)+ti({alt:"media",token:ht})})[0]}(C,O,j.host,j._protocol)}}(j,ae),K);return de.errorHandler=It(H),de}(j.storage,j._location,_t());return j.storage.makeRequestWithTokens(H,Fi).then(ae=>{if(null===ae)throw function Le(){return new Ae(Ie.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return ae})}function cs(j,H){const ae=function z(j,H){const ae=H.split("/").filter(b=>b.length>0).join("/");return 0===j.length?ae:j+"/"+ae}(j._location.path,H),b=new nn(j._location.bucket,ae);return new ws(j.storage,b)}function xt(j,H){if(j instanceof Ts){const ae=j;if(null==ae._bucket)throw function Te(){return new Ae(Ie.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Lt+"' property when initializing the app?")}();const b=new ws(ae,ae._bucket);return null!=H?xt(b,H):b}return void 0!==H?cs(j,H):j}function dn(j,H){if(H&&function ds(j){return/^[A-Za-z]+:\/\//.test(j)}(H)){if(j instanceof Ts)return function vr(j,H){return new ws(j,H)}(j,H);throw tt("To use ref(service, url), the first argument must be a Storage instance.")}return xt(j,H)}function Er(j,H){const ae=H?.[Lt];return null==ae?null:nn.makeFromBucketSpec(ae,j)}class Ts{constructor(H,ae,b,O,C){this.app=H,this._authProvider=ae,this._appCheckProvider=b,this._url=O,this._firebaseVersion=C,this._bucket=null,this._host=nt,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=O?nn.makeFromBucketSpec(O,this._host):Er(this._host,this.app.options)}get host(){return this._host}set host(H){this._host=H,this._bucket=null!=this._url?nn.makeFromBucketSpec(this._url,H):Er(H,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(H){Zn("time",0,Number.POSITIVE_INFINITY,H),this._maxUploadRetryTime=H}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(H){Zn("time",0,Number.POSITIVE_INFINITY,H),this._maxOperationRetryTime=H}_getAuthToken(){var H=this;return(0,We.Z)(function*(){if(H._overrideAuthToken)return H._overrideAuthToken;const ae=H._authProvider.getImmediate({optional:!0});if(ae){const b=yield ae.getToken();if(null!==b)return b.accessToken}return null})()}_getAppCheckToken(){var H=this;return(0,We.Z)(function*(){const ae=H._appCheckProvider.getImmediate({optional:!0});return ae?(yield ae.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(H=>H.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(H){return new ws(this,H)}_makeRequest(H,ae,b,O,C=!0){if(this._deleted)return new Gt(yt());{const K=function is(j,H,ae,b,O,C,K=!0){const de=ti(j.urlParams),Xe=j.url+de,ht=Object.assign({},j.headers);return function Rn(j,H){H&&(j["X-Firebase-GMPID"]=H)}(ht,H),function Lr(j,H){null!==H&&H.length>0&&(j.Authorization="Firebase "+H)}(ht,ae),function ii(j,H){j["X-Firebase-Storage-Version"]="webjs/"+(H??"AppManager")}(ht,C),function Cr(j,H){null!==H&&(j["X-Firebase-AppCheck"]=H)}(ht,b),new rn(Xe,j.method,ht,j.body,j.successCodes,j.additionalRetryCodes,j.handler,j.errorHandler,j.timeout,j.progressCallback,O,K)}(H,this._appId,b,O,ae,this._firebaseVersion,C);return this._requests.add(K),K.getPromise().then(()=>this._requests.delete(K),()=>this._requests.delete(K)),K}}makeRequestWithTokens(H,ae){var b=this;return(0,We.Z)(function*(){const[O,C]=yield Promise.all([b._getAuthToken(),b._getAppCheckToken()]);return b._makeRequest(H,ae,O,C).getPromise()})()}}const pi="@firebase/storage";function Ei(j,H){return dn(j=(0,it.m9)(j),H)}function Qn(j,{instanceIdentifier:H}){const ae=j.getProvider("app").getImmediate(),b=j.getProvider("auth-internal"),O=j.getProvider("app-check-internal");return new Ts(ae,b,O,H,at.SDK_VERSION)}!function va(){(0,at._registerComponent)(new mt.wA("storage",Qn,"PUBLIC").setMultipleInstances(!0)),(0,at.registerVersion)(pi,"0.12.3",""),(0,at.registerVersion)(pi,"0.12.3","esm2017")}();class Qi{constructor(H,ae,b){this._delegate=H,this.task=ae,this.ref=b}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class eo{constructor(H,ae){this._delegate=H,this._ref=ae,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new Qi(this._delegate.snapshot,this,this._ref)}then(H,ae){return this._delegate.then(b=>{if(H)return H(new Qi(b,this,this._ref))},ae)}on(H,ae,b,O){let C;return ae&&(C="function"==typeof ae?K=>ae(new Qi(K,this,this._ref)):{next:ae.next?K=>ae.next(new Qi(K,this,this._ref)):void 0,complete:ae.complete||void 0,error:ae.error||void 0}),this._delegate.on(H,C,b||void 0,O||void 0)}}class Ui{constructor(H,ae){this._delegate=H,this._service=ae}get prefixes(){return this._delegate.prefixes.map(H=>new mi(H,this._service))}get items(){return this._delegate.items.map(H=>new mi(H,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class mi{constructor(H,ae){this._delegate=H,this.storage=ae}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(H){const ae=function No(j,H){return cs(j,H)}(this._delegate,H);return new mi(ae,this.storage)}get root(){return new mi(this._delegate.root,this.storage)}get parent(){const H=this._delegate.parent;return null==H?null:new mi(H,this.storage)}put(H,ae){return this._throwIfRoot("put"),new eo(function bi(j,H,ae){return function Ns(j,H,ae){return j._throwIfRoot("uploadBytesResumable"),new Bs(j,new rr(H),ae)}(j=(0,it.m9)(j),H,ae)}(this._delegate,H,ae),this)}putString(H,ae=Yn.RAW,b){this._throwIfRoot("putString");const O=Un(ae,H),C=Object.assign({},b);return null==C.contentType&&null!=O.contentType&&(C.contentType=O.contentType),new eo(new Bs(this._delegate,new rr(O.data,!0),C),this)}listAll(){return function wr(j){return function Wn(j){const H={prefixes:[],items:[]};return Li(j,H).then(()=>H)}(j=(0,it.m9)(j))}(this._delegate).then(H=>new Ui(H,this.storage))}list(H){return function Vr(j,H){return vi(j=(0,it.m9)(j),H)}(this._delegate,H||void 0).then(ae=>new Ui(ae,this.storage))}getMetadata(){return function Os(j){return function li(j){j._throwIfRoot("getMetadata");const H=pn(j.storage,j._location,_t());return j.storage.makeRequestWithTokens(H,Fi)}(j=(0,it.m9)(j))}(this._delegate)}updateMetadata(H){return function Wi(j,H){return function lo(j,H){j._throwIfRoot("updateMetadata");const ae=function pr(j,H,ae,b){const C=On(H.fullServerUrl(),j.host,j._protocol),de=ln(ae,b),ht=j.maxOperationRetryTime,un=new Jr(C,"PATCH",ai(j,b),ht);return un.headers={"Content-Type":"application/json; charset=utf-8"},un.body=de,un.errorHandler=It(H),un}(j.storage,j._location,H,_t());return j.storage.makeRequestWithTokens(ae,Fi)}(j=(0,it.m9)(j),H)}(this._delegate,H)}getDownloadURL(){return function gr(j){return Xs(j=(0,it.m9)(j))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function Or(j){return function Bn(j){j._throwIfRoot("deleteObject");const H=function ui(j,H){const b=On(H.fullServerUrl(),j.host,j._protocol),de=new Jr(b,"DELETE",function K(Xe,ht){},j.maxOperationRetryTime);return de.successCodes=[200,204],de.errorHandler=It(H),de}(j.storage,j._location);return j.storage.makeRequestWithTokens(H,Fi)}(j=(0,it.m9)(j))}(this._delegate)}_throwIfRoot(H){if(""===this._delegate._location.path)throw vt(H)}}class Oo{constructor(H,ae){this.app=H,this._delegate=ae}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(H){if(fs(H))throw tt("ref() expected a child path but got a URL, use refFromURL instead.");return new mi(Ei(this._delegate,H),this)}refFromURL(H){if(!fs(H))throw tt("refFromURL() expected a full URL but got a child path, use ref() instead.");try{nn.makeFromUrl(H,this._delegate.host)}catch{throw tt("refFromUrl() expected a valid full URL but got an invalid one.")}return new mi(Ei(this._delegate,H),this)}setMaxUploadRetryTime(H){this._delegate.maxUploadRetryTime=H}setMaxOperationRetryTime(H){this._delegate.maxOperationRetryTime=H}useEmulator(H,ae,b={}){!function Vi(j,H,ae,b={}){!function Gi(j,H,ae,b={}){j.host=`${H}:${ae}`,j._protocol="http";const{mockUserToken:O}=b;O&&(j._overrideAuthToken="string"==typeof O?O:(0,it.Sg)(O,j.app.options.projectId))}(j,H,ae,b)}(this._delegate,H,ae,b)}}function fs(j){return/^[A-Za-z]+:\/\//.test(j)}function Bi(j,{instanceIdentifier:H}){const ae=j.getProvider("app-compat").getImmediate(),b=j.getProvider("storage").getImmediate({identifier:H});return new Oo(ae,b)}!function ps(j){const H={TaskState:ur,TaskEvent:qr,StringFormat:Yn,Storage:Oo,Reference:mi};j.INTERNAL.registerComponent(new mt.wA("storage-compat",Bi,"PUBLIC").setServiceProps(H).setMultipleInstances(!0)),j.registerVersion("@firebase/storage-compat","0.3.6")}(Ye.Z);var xo=U(7142);function ji(j){const H=function Ea(j){return new Z.y(H=>{const ae=K=>H.next(K);ae(j.snapshot);const C=j.on("state_changed",ae);return j.then(K=>{ae(K),H.complete()},K=>{ae(j.snapshot),(K=>{H.error(K)})(K)}),function(){C()}}).pipe(function _e(j,H=ge.z){return(0,we.e)((ae,b)=>{let O=null,C=null,K=null;const de=()=>{if(O){O.unsubscribe(),O=null;const ht=C;C=null,b.next(ht)}};function Xe(){const ht=K+j,un=H.now();if(un<ht)return O=this.schedule(void 0,ht-un),void b.add(O);de()}ae.subscribe((0,De.x)(b,ht=>{C=ht,K=H.now(),O||(O=H.schedule(Xe,j),b.add(O))},()=>{de(),b.complete()},void 0,()=>{C=O=null}))})}(0))}(j);return{task:j,then:j.then.bind(j),catch:j.catch.bind(j),pause:j.pause.bind(j),cancel:j.cancel.bind(j),resume:j.resume.bind(j),snapshotChanges:()=>H,percentageChanges:()=>H.pipe((0,Ne.U)(ae=>ae.bytesTransferred/ae.totalBytes*100))}}function co(j){return{getDownloadURL:()=>(0,q.of)(void 0).pipe(f.fc,(0,re.w)(()=>j.getDownloadURL()),f.iC),getMetadata:()=>(0,q.of)(void 0).pipe(f.fc,(0,re.w)(()=>j.getMetadata()),f.iC),delete:()=>(0,ye.D)(j.delete()),child:H=>co(j.child(H)),updateMetadata:H=>(0,ye.D)(j.updateMetadata(H)),put:(H,ae)=>ji(j.put(H,ae)),putString:(H,ae,b)=>ji(j.putString(H,ae,b)),list:H=>(0,ye.D)(j.list(H)),listAll:()=>(0,ye.D)(j.listAll())}}const Ds=new se.OlP("angularfire2.storageBucket"),Zo=new se.OlP("angularfire2.storage.maxUploadRetryTime"),ja=new se.OlP("angularfire2.storage.maxOperationRetryTime"),$i=new se.OlP("angularfire2.storage.use-emulator");let Si=(()=>{class j{storage;constructor(ae,b,O,C,K,de,Xe,ht,un,ir){const lr=(0,ve.on)(ae,K,b);this.storage=(0,ve.cc)(`${lr.name}.storage.${O}`,"AngularFireStorage",lr.name,()=>{const Dr=K.runOutsideAngular(()=>lr.storage(O||void 0)),er=un;return er&&Dr.useEmulator(...er),Xe&&Dr.setMaxUploadRetryTime(Xe),ht&&Dr.setMaxOperationRetryTime(ht),Dr},[Xe,ht])}ref(ae){return co(this.storage.ref(ae))}refFromURL(ae){return co(this.storage.refFromURL(ae))}upload(ae,b,O){return co(this.storage.ref(ae)).put(b,O)}static \u0275fac=function(b){return new(b||j)(se.LFG(ve.Dh),se.LFG(ve.xv,8),se.LFG(Ds,8),se.LFG(se.Lbi),se.LFG(se.R0b),se.LFG(f.HU),se.LFG(Zo,8),se.LFG(ja,8),se.LFG($i,8),se.LFG(f.Rf,8))};static \u0275prov=se.Yz7({token:j,factory:j.\u0275fac,providedIn:"any"})}return j})(),iu=(()=>{class j{static \u0275fac=function(b){return new(b||j)};static \u0275mod=se.oAB({type:j});static \u0275inj=se.cJS({})}return j})(),ko=(()=>{class j{constructor(){xo.Z.registerVersion("angularfire",f.q4.full,"gcs-compat")}static \u0275fac=function(b){return new(b||j)};static \u0275mod=se.oAB({type:j});static \u0275inj=se.cJS({providers:[Si],imports:[iu]})}return j})()},7217:(Nt,Ve,U)=>{U.d(Ve,{Dh:()=>_e,GT:()=>we,cc:()=>We,hO:()=>Ye,on:()=>re,pX:()=>ge,xv:()=>Ne});var f=U(5879),Z=U(1920),q=U(7142);const ye=["ngOnDestroy"],ge=(nt,Lt,ot,ce={})=>new Proxy(nt,{get:(Ue,Ae)=>ot.runOutsideAngular(()=>{if(nt[Ae])return ce?.spy?.get&&ce.spy.get(Ae,nt[Ae]),nt[Ae];if(ye.indexOf(Ae)>-1)return()=>{};const Ie=Lt.toPromise().then(et=>{const Fe=et?.[Ae];return"function"==typeof Fe?Fe.bind(et):Fe?.then?Fe.then(xe=>ot.run(()=>xe)):ot.run(()=>Fe)});return new Proxy(()=>{},{get:(et,Fe)=>Ie[Fe],apply:(et,Fe,xe)=>Ie.then(Tt=>{const zt=Tt?.(...xe);return ce?.spy?.apply&&ce.spy.apply(Ae,xe,zt),zt})})})}),we=(nt,Lt)=>{Lt.forEach(ot=>{Object.getOwnPropertyNames(ot.prototype||ot).forEach(ce=>{Object.defineProperty(nt.prototype,ce,Object.getOwnPropertyDescriptor(ot.prototype||ot,ce))})})};class De{constructor(Lt){return Lt}}const _e=new f.OlP("angularfire2.app.options"),Ne=new f.OlP("angularfire2.app.name");function re(nt,Lt,ot){const Ue="object"==typeof ot&&ot||{};Ue.name=Ue.name||"string"==typeof ot&&ot||"[DEFAULT]";const Ie=q.Z.apps.filter(et=>et&&et.name===Ue.name)[0]||Lt.runOutsideAngular(()=>q.Z.initializeApp(nt,Ue));try{if(JSON.stringify(nt)!==JSON.stringify(Ie.options)){const et=!!module.hot;se("error",`${Ie.name} Firebase App already initialized with different options${et?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new De(Ie)}const se=(nt,...Lt)=>{(0,f.X6Q)()&&typeof console<"u"&&console[nt](...Lt)},ve={provide:De,useFactory:re,deps:[_e,f.R0b,[new f.FiY,Ne]]};let Ye=(()=>{class nt{static initializeApp(ot,ce){return{ngModule:nt,providers:[{provide:_e,useValue:ot},{provide:Ne,useValue:ce}]}}constructor(ot){q.Z.registerVersion("angularfire",Z.q4.full,"core"),q.Z.registerVersion("angularfire",Z.q4.full,"app-compat"),q.Z.registerVersion("angular",f.q4F.full,ot.toString())}static \u0275fac=function(ce){return new(ce||nt)(f.LFG(f.Lbi))};static \u0275mod=f.oAB({type:nt});static \u0275inj=f.cJS({providers:[ve]})}return nt})();function We(nt,Lt,ot,ce,Ue){const[,Ae,Ie]=globalThis.\u0275AngularfireInstanceCache.find(et=>et[0]===nt)||[];if(Ae)return function at(nt,Lt){try{return nt.toString()===Lt.toString()}catch{return nt===Lt}}(Ue,Ie)||(mt("error",`${Lt} was already initialized on the ${ot} Firebase App with different settings.${it?" You may need to reload as Firebase is not HMR aware.":""}`),mt("warn",{is:Ue,was:Ie})),Ae;{const et=ce();return globalThis.\u0275AngularfireInstanceCache.push([nt,et,Ue]),et}}const it=typeof module<"u"&&!!module.hot,mt=(nt,...Lt)=>{(0,f.X6Q)()&&typeof console<"u"&&console[nt](...Lt)};globalThis.\u0275AngularfireInstanceCache||=[]},7350:(Nt,Ve,U)=>{U.d(Ve,{gg:()=>Sr,ET:()=>Jr,hJ:()=>Xt,JU:()=>ki,PL:()=>Fi,ad:()=>yo,cf:()=>Nr,Cm:()=>Pe,IO:()=>ds,r7:()=>bi,ar:()=>Wi});var f=U(1920),Z=U(5879),q=U(721),ye=U(3182);U(9010),U(534),U(9058),U(7879),U(4537);class ve{constructor(){return(0,f.vb)("auth")}}var si=U(5776);class Sr{constructor(gr){return gr}}const fr="firestore",Ee=new Z.OlP("angularfire2.firestore-instances");function z(wr){return(gr,Or)=>{const Ei=gr.runOutsideAngular(()=>wr(Or));return new Sr(Ei)}}const F={provide:class Mr{constructor(){return(0,f.vb)(fr)}},deps:[[new Z.FiY,Ee]]},k={provide:Sr,useFactory:function ne(wr,gr){const Or=(0,f.JM)(fr,wr,gr);return Or&&new Sr(Or)},deps:[[new Z.FiY,Ee],q.Ot]};let oe=(()=>{class wr{constructor(){(0,ye.KN)("angularfire",f.q4.full,"fst")}static \u0275fac=function(Ei){return new(Ei||wr)};static \u0275mod=Z.oAB({type:wr});static \u0275inj=Z.cJS({providers:[k,F]})}return wr})();function Pe(wr,...gr){return{ngModule:oe,providers:[{provide:Ee,useFactory:z(wr),multi:!0,deps:[Z.R0b,Z.zs3,f.HU,q.z6,[new Z.FiY,ve],[new Z.FiY,f.Rf],...gr]}]}}const Jr=(0,f.u3)(si.ET,!0),Xt=(0,f.u3)(si.hJ,!0),ki=(0,f.u3)(si.JU,!0),Fi=(0,f.u3)(si.PL,!0),yo=(0,f.u3)(si.ad,!0),Nr=(0,f.u3)(si.cf,!0),ds=(0,f.u3)(si.IO,!0),bi=(0,f.u3)(si.r7,!0),Wi=(0,f.u3)(si.ar,!0)},1920:(Nt,Ve,U)=>{U.d(Ve,{q4:()=>We,iC:()=>zt,fc:()=>xe,HU:()=>Ae,Rf:()=>nt,vb:()=>mt,JM:()=>it,u3:()=>yr});var f=U(5879),Z=U(3182),q=U(1954),ge=U(2631);const De=new class we extends ge.v{}(class ye extends q.o{constructor(Ft,Dt){super(Ft,Dt),this.scheduler=Ft,this.work=Dt}schedule(Ft,Dt=0){return Dt>0?super.schedule(Ft,Dt):(this.delay=Dt,this.state=Ft,this.scheduler.flush(this),this)}execute(Ft,Dt){return Dt>0||this.closed?super.execute(Ft,Dt):this._execute(Ft,Dt)}requestAsyncId(Ft,Dt,Te=0){return null!=Te&&Te>0||null==Te&&this.delay>0?super.requestAsyncId(Ft,Dt,Te):(Ft.flush(this),0)}});var Ne=U(6321),re=U(5592),se=U(9397),ve=U(3093),Ye=U(5137);const We=new f.GfV("ANGULARFIRE2_VERSION");function it(kt,Ft,Dt){if(Ft){if(1===Ft.length)return Ft[0];const $e=Ft.filter(Le=>Le.app===Dt);if(1===$e.length)return $e[0]}return Dt.container.getProvider(kt).getImmediate({optional:!0})}const mt=(kt,Ft)=>{const Dt=Ft?[Ft]:(0,Z.C6)(),Te=[];return Dt.forEach(Re=>{Re.container.getProvider(kt).instances.forEach(Le=>{Te.includes(Le)||Te.push(Le)})}),Te};class nt{constructor(){return mt(Lt)}}const Lt="app-check";function ot(){}class ce{zone;delegate;constructor(Ft,Dt=De){this.zone=Ft,this.delegate=Dt}now(){return this.delegate.now()}schedule(Ft,Dt,Te){const Re=this.zone;return this.delegate.schedule(function(Le){Re.runGuarded(()=>{Ft.apply(this,[Le])})},Dt,Te)}}class Ue{zone;task=null;constructor(Ft){this.zone=Ft}call(Ft,Dt){const Te=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ot,{},ot,ot)),Dt.pipe((0,se.b)({next:Te,complete:Te,error:Te})).subscribe(Ft).add(Te)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Ae=(()=>{class kt{ngZone;outsideAngular;insideAngular;constructor(Dt){this.ngZone=Dt,this.outsideAngular=Dt.runOutsideAngular(()=>new ce(Zone.current)),this.insideAngular=Dt.run(()=>new ce(Zone.current,Ne.z)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(Te){return new(Te||kt)(f.LFG(f.R0b))};static \u0275prov=f.Yz7({token:kt,factory:kt.\u0275fac,providedIn:"root"})}return kt})();function Ie(){const kt=globalThis.\u0275AngularFireScheduler;if(!kt)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return kt}function Fe(kt){return Ie().ngZone.run(()=>kt())}function xe(kt){return kt.pipe((0,ve.Q)(Ie().outsideAngular))}function zt(kt){return function In(kt){return function(Dt){return(Dt=Dt.lift(new Ue(kt.ngZone))).pipe((0,Ye.R)(kt.outsideAngular),(0,ve.Q)(kt.insideAngular))}}(Ie())(kt)}const vn=(kt,Ft)=>function(){const Te=arguments;return Ft&&setTimeout(()=>{"scheduled"===Ft.state&&Ft.invoke()},10),Fe(()=>kt.apply(void 0,Te))},yr=(kt,Ft)=>function(){let Dt;const Te=arguments;for(let $e=0;$e<arguments.length;$e++)"function"==typeof Te[$e]&&(Ft&&(Dt||=Fe(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ot,{},ot,ot))),Te[$e]=vn(Te[$e],Dt));const Re=function et(kt){return Ie().ngZone.runOutsideAngular(()=>kt())}(()=>kt.apply(this,Te));if(!Ft){if(Re instanceof re.y){const $e=Ie();return Re.pipe((0,Ye.R)($e.outsideAngular),(0,ve.Q)($e.insideAngular))}return Fe(()=>Re)}return Re instanceof re.y?Re.pipe(zt):Re instanceof Promise?Fe(()=>new Promise(($e,Le)=>Re.then(He=>Fe(()=>$e(He)),He=>Fe(()=>Le(He))))):"function"==typeof Re&&Dt?function(){return setTimeout(()=>{Dt&&"scheduled"===Dt.state&&Dt.invoke()},10),Re.apply(this,arguments)}:Fe(()=>Re)}},95:(Nt,Ve,U)=>{U.d(Ve,{Fj:()=>ce,qu:()=>$a,u:()=>Jn,sg:()=>xt,u5:()=>H,JJ:()=>an,JL:()=>rn,F:()=>ur,On:()=>vo,YN:()=>Os,wV:()=>js,_:()=>li,UX:()=>ae,Q7:()=>Ui,EJ:()=>bi,kI:()=>xe,_Y:()=>Mo,Kr:()=>Ei});var f=U(5879),Z=U(6814),q=U(2459),ye=U(5592),ge=U(7453),we=U(4829),De=U(4564),_e=U(8251),Ne=U(7400),re=U(2714),ve=U(7398);let Ye=(()=>{class b{constructor(C,K){this._renderer=C,this._elementRef=K,this.onChange=de=>{},this.onTouched=()=>{}}setProperty(C,K){this._renderer.setProperty(this._elementRef.nativeElement,C,K)}registerOnTouched(C){this.onTouched=C}registerOnChange(C){this.onChange=C}setDisabledState(C){this.setProperty("disabled",C)}static#e=this.\u0275fac=function(K){return new(K||b)(f.Y36(f.Qsj),f.Y36(f.SBq))};static#t=this.\u0275dir=f.lG2({type:b})}return b})(),We=(()=>{class b extends Ye{static#e=this.\u0275fac=function(){let C;return function(de){return(C||(C=f.n5z(b)))(de||b)}}();static#t=this.\u0275dir=f.lG2({type:b,features:[f.qOj]})}return b})();const at=new f.OlP("NgValueAccessor"),nt={provide:at,useExisting:(0,f.Gpc)(()=>ce),multi:!0},ot=new f.OlP("CompositionEventMode");let ce=(()=>{class b extends Ye{constructor(C,K,de){super(C,K),this._compositionMode=de,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Lt(){const b=(0,Z.q)()?(0,Z.q)().getUserAgent():"";return/android (\d+)/.test(b.toLowerCase())}())}writeValue(C){this.setProperty("value",C??"")}_handleInput(C){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(C)}_compositionStart(){this._composing=!0}_compositionEnd(C){this._composing=!1,this._compositionMode&&this.onChange(C)}static#e=this.\u0275fac=function(K){return new(K||b)(f.Y36(f.Qsj),f.Y36(f.SBq),f.Y36(ot,8))};static#t=this.\u0275dir=f.lG2({type:b,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(K,de){1&K&&f.NdJ("input",function(ht){return de._handleInput(ht.target.value)})("blur",function(){return de.onTouched()})("compositionstart",function(){return de._compositionStart()})("compositionend",function(ht){return de._compositionEnd(ht.target.value)})},features:[f._Bn([nt]),f.qOj]})}return b})();function Ue(b){return null==b||("string"==typeof b||Array.isArray(b))&&0===b.length}function Ae(b){return null!=b&&"number"==typeof b.length}const Ie=new f.OlP("NgValidators"),et=new f.OlP("NgAsyncValidators"),Fe=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class xe{static min(O){return function Tt(b){return O=>{if(Ue(O.value)||Ue(b))return null;const C=parseFloat(O.value);return!isNaN(C)&&C<b?{min:{min:b,actual:O.value}}:null}}(O)}static max(O){return function zt(b){return O=>{if(Ue(O.value)||Ue(b))return null;const C=parseFloat(O.value);return!isNaN(C)&&C>b?{max:{max:b,actual:O.value}}:null}}(O)}static required(O){return In(O)}static requiredTrue(O){return function vn(b){return!0===b.value?null:{required:!0}}(O)}static email(O){return function yr(b){return Ue(b.value)||Fe.test(b.value)?null:{email:!0}}(O)}static minLength(O){return function kt(b){return O=>Ue(O.value)||!Ae(O.value)?null:O.value.length<b?{minlength:{requiredLength:b,actualLength:O.value.length}}:null}(O)}static maxLength(O){return function Ft(b){return O=>Ae(O.value)&&O.value.length>b?{maxlength:{requiredLength:b,actualLength:O.value.length}}:null}(O)}static pattern(O){return function Dt(b){if(!b)return Te;let O,C;return"string"==typeof b?(C="","^"!==b.charAt(0)&&(C+="^"),C+=b,"$"!==b.charAt(b.length-1)&&(C+="$"),O=new RegExp(C)):(C=b.toString(),O=b),K=>{if(Ue(K.value))return null;const de=K.value;return O.test(de)?null:{pattern:{requiredPattern:C,actualValue:de}}}}(O)}static nullValidator(O){return null}static compose(O){return vt(O)}static composeAsync(O){return jt(O)}}function In(b){return Ue(b.value)?{required:!0}:null}function Te(b){return null}function Re(b){return null!=b}function $e(b){return(0,f.QGY)(b)?(0,q.D)(b):b}function Le(b){let O={};return b.forEach(C=>{O=null!=C?{...O,...C}:O}),0===Object.keys(O).length?null:O}function He(b,O){return O.map(C=>C(b))}function yt(b){return b.map(O=>function tt(b){return!b.validate}(O)?O:C=>O.validate(C))}function vt(b){if(!b)return null;const O=b.filter(Re);return 0==O.length?null:function(C){return Le(He(C,O))}}function $n(b){return null!=b?vt(yt(b)):null}function jt(b){if(!b)return null;const O=b.filter(Re);return 0==O.length?null:function(C){return function se(...b){const O=(0,De.jO)(b),{args:C,keys:K}=(0,ge.D)(b),de=new ye.y(Xe=>{const{length:ht}=C;if(!ht)return void Xe.complete();const un=new Array(ht);let ir=ht,lr=ht;for(let Dr=0;Dr<ht;Dr++){let er=!1;(0,we.Xf)(C[Dr]).subscribe((0,_e.x)(Xe,ci=>{er||(er=!0,lr--),un[Dr]=ci},()=>ir--,void 0,()=>{(!ir||!er)&&(lr||Xe.next(K?(0,re.n)(K,un):un),Xe.complete())}))}});return O?de.pipe((0,Ne.Z)(O)):de}(He(C,O).map($e)).pipe((0,ve.U)(Le))}}function nn(b){return null!=b?jt(yt(b)):null}function Gt(b,O){return null===b?[O]:Array.isArray(b)?[...b,O]:[b,O]}function or(b){return b._rawValidators}function Hn(b){return b._rawAsyncValidators}function Ln(b){return b?Array.isArray(b)?b:[b]:[]}function Pt(b,O){return Array.isArray(b)?b.includes(O):b===O}function zn(b,O){const C=Ln(O);return Ln(b).forEach(de=>{Pt(C,de)||C.push(de)}),C}function An(b,O){return Ln(O).filter(C=>!Pt(b,C))}class Ir{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(O){this._rawValidators=O||[],this._composedValidatorFn=$n(this._rawValidators)}_setAsyncValidators(O){this._rawAsyncValidators=O||[],this._composedAsyncValidatorFn=nn(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(O){this._onDestroyCallbacks.push(O)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(O=>O()),this._onDestroyCallbacks=[]}reset(O=void 0){this.control&&this.control.reset(O)}hasError(O,C){return!!this.control&&this.control.hasError(O,C)}getError(O,C){return this.control?this.control.getError(O,C):null}}class Vn extends Ir{get formDirective(){return null}get path(){return null}}class Zn extends Ir{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class On{constructor(O){this._cd=O}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let an=(()=>{class b extends On{constructor(C){super(C)}static#e=this.\u0275fac=function(K){return new(K||b)(f.Y36(Zn,2))};static#t=this.\u0275dir=f.lG2({type:b,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(K,de){2&K&&f.ekj("ng-untouched",de.isUntouched)("ng-touched",de.isTouched)("ng-pristine",de.isPristine)("ng-dirty",de.isDirty)("ng-valid",de.isValid)("ng-invalid",de.isInvalid)("ng-pending",de.isPending)},features:[f.qOj]})}return b})(),rn=(()=>{class b extends On{constructor(C){super(C)}static#e=this.\u0275fac=function(K){return new(K||b)(f.Y36(Vn,10))};static#t=this.\u0275dir=f.lG2({type:b,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(K,de){2&K&&f.ekj("ng-untouched",de.isUntouched)("ng-touched",de.isTouched)("ng-pristine",de.isPristine)("ng-dirty",de.isDirty)("ng-valid",de.isValid)("ng-invalid",de.isInvalid)("ng-pending",de.isPending)("ng-submitted",de.isSubmitted)},features:[f.qOj]})}return b})();const Sr="VALID",fr="INVALID",Mr="PENDING",rr="DISABLED";function Ee(b){return(k(b)?b.validators:b)||null}function z(b,O){return(k(O)?O.asyncValidators:b)||null}function k(b){return null!=b&&!Array.isArray(b)&&"object"==typeof b}function oe(b,O,C){const K=b.controls;if(!(O?Object.keys(K):K).length)throw new f.vHH(1e3,"");if(!K[C])throw new f.vHH(1001,"")}function Pe(b,O,C){b._forEachChild((K,de)=>{if(void 0===C[de])throw new f.vHH(1002,"")})}class st{constructor(O,C){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(O),this._assignAsyncValidators(C)}get validator(){return this._composedValidatorFn}set validator(O){this._rawValidators=this._composedValidatorFn=O}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(O){this._rawAsyncValidators=this._composedAsyncValidatorFn=O}get parent(){return this._parent}get valid(){return this.status===Sr}get invalid(){return this.status===fr}get pending(){return this.status==Mr}get disabled(){return this.status===rr}get enabled(){return this.status!==rr}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(O){this._assignValidators(O)}setAsyncValidators(O){this._assignAsyncValidators(O)}addValidators(O){this.setValidators(zn(O,this._rawValidators))}addAsyncValidators(O){this.setAsyncValidators(zn(O,this._rawAsyncValidators))}removeValidators(O){this.setValidators(An(O,this._rawValidators))}removeAsyncValidators(O){this.setAsyncValidators(An(O,this._rawAsyncValidators))}hasValidator(O){return Pt(this._rawValidators,O)}hasAsyncValidator(O){return Pt(this._rawAsyncValidators,O)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(O={}){this.touched=!0,this._parent&&!O.onlySelf&&this._parent.markAsTouched(O)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(O=>O.markAllAsTouched())}markAsUntouched(O={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(C=>{C.markAsUntouched({onlySelf:!0})}),this._parent&&!O.onlySelf&&this._parent._updateTouched(O)}markAsDirty(O={}){this.pristine=!1,this._parent&&!O.onlySelf&&this._parent.markAsDirty(O)}markAsPristine(O={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(C=>{C.markAsPristine({onlySelf:!0})}),this._parent&&!O.onlySelf&&this._parent._updatePristine(O)}markAsPending(O={}){this.status=Mr,!1!==O.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!O.onlySelf&&this._parent.markAsPending(O)}disable(O={}){const C=this._parentMarkedDirty(O.onlySelf);this.status=rr,this.errors=null,this._forEachChild(K=>{K.disable({...O,onlySelf:!0})}),this._updateValue(),!1!==O.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...O,skipPristineCheck:C}),this._onDisabledChange.forEach(K=>K(!0))}enable(O={}){const C=this._parentMarkedDirty(O.onlySelf);this.status=Sr,this._forEachChild(K=>{K.enable({...O,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:O.emitEvent}),this._updateAncestors({...O,skipPristineCheck:C}),this._onDisabledChange.forEach(K=>K(!1))}_updateAncestors(O){this._parent&&!O.onlySelf&&(this._parent.updateValueAndValidity(O),O.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(O){this._parent=O}getRawValue(){return this.value}updateValueAndValidity(O={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Sr||this.status===Mr)&&this._runAsyncValidator(O.emitEvent)),!1!==O.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!O.onlySelf&&this._parent.updateValueAndValidity(O)}_updateTreeValidity(O={emitEvent:!0}){this._forEachChild(C=>C._updateTreeValidity(O)),this.updateValueAndValidity({onlySelf:!0,emitEvent:O.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?rr:Sr}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(O){if(this.asyncValidator){this.status=Mr,this._hasOwnPendingAsyncValidator=!0;const C=$e(this.asyncValidator(this));this._asyncValidationSubscription=C.subscribe(K=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(K,{emitEvent:O})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(O,C={}){this.errors=O,this._updateControlsErrors(!1!==C.emitEvent)}get(O){let C=O;return null==C||(Array.isArray(C)||(C=C.split(".")),0===C.length)?null:C.reduce((K,de)=>K&&K._find(de),this)}getError(O,C){const K=C?this.get(C):this;return K&&K.errors?K.errors[O]:null}hasError(O,C){return!!this.getError(O,C)}get root(){let O=this;for(;O._parent;)O=O._parent;return O}_updateControlsErrors(O){this.status=this._calculateStatus(),O&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(O)}_initObservables(){this.valueChanges=new f.vpe,this.statusChanges=new f.vpe}_calculateStatus(){return this._allControlsDisabled()?rr:this.errors?fr:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Mr)?Mr:this._anyControlsHaveStatus(fr)?fr:Sr}_anyControlsHaveStatus(O){return this._anyControls(C=>C.status===O)}_anyControlsDirty(){return this._anyControls(O=>O.dirty)}_anyControlsTouched(){return this._anyControls(O=>O.touched)}_updatePristine(O={}){this.pristine=!this._anyControlsDirty(),this._parent&&!O.onlySelf&&this._parent._updatePristine(O)}_updateTouched(O={}){this.touched=this._anyControlsTouched(),this._parent&&!O.onlySelf&&this._parent._updateTouched(O)}_registerOnCollectionChange(O){this._onCollectionChange=O}_setUpdateStrategy(O){k(O)&&null!=O.updateOn&&(this._updateOn=O.updateOn)}_parentMarkedDirty(O){return!O&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(O){return null}_assignValidators(O){this._rawValidators=Array.isArray(O)?O.slice():O,this._composedValidatorFn=function ne(b){return Array.isArray(b)?$n(b):b||null}(this._rawValidators)}_assignAsyncValidators(O){this._rawAsyncValidators=Array.isArray(O)?O.slice():O,this._composedAsyncValidatorFn=function F(b){return Array.isArray(b)?nn(b):b||null}(this._rawAsyncValidators)}}class _t extends st{constructor(O,C,K){super(Ee(C),z(K,C)),this.controls=O,this._initObservables(),this._setUpdateStrategy(C),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(O,C){return this.controls[O]?this.controls[O]:(this.controls[O]=C,C.setParent(this),C._registerOnCollectionChange(this._onCollectionChange),C)}addControl(O,C,K={}){this.registerControl(O,C),this.updateValueAndValidity({emitEvent:K.emitEvent}),this._onCollectionChange()}removeControl(O,C={}){this.controls[O]&&this.controls[O]._registerOnCollectionChange(()=>{}),delete this.controls[O],this.updateValueAndValidity({emitEvent:C.emitEvent}),this._onCollectionChange()}setControl(O,C,K={}){this.controls[O]&&this.controls[O]._registerOnCollectionChange(()=>{}),delete this.controls[O],C&&this.registerControl(O,C),this.updateValueAndValidity({emitEvent:K.emitEvent}),this._onCollectionChange()}contains(O){return this.controls.hasOwnProperty(O)&&this.controls[O].enabled}setValue(O,C={}){Pe(this,0,O),Object.keys(O).forEach(K=>{oe(this,!0,K),this.controls[K].setValue(O[K],{onlySelf:!0,emitEvent:C.emitEvent})}),this.updateValueAndValidity(C)}patchValue(O,C={}){null!=O&&(Object.keys(O).forEach(K=>{const de=this.controls[K];de&&de.patchValue(O[K],{onlySelf:!0,emitEvent:C.emitEvent})}),this.updateValueAndValidity(C))}reset(O={},C={}){this._forEachChild((K,de)=>{K.reset(O?O[de]:null,{onlySelf:!0,emitEvent:C.emitEvent})}),this._updatePristine(C),this._updateTouched(C),this.updateValueAndValidity(C)}getRawValue(){return this._reduceChildren({},(O,C,K)=>(O[K]=C.getRawValue(),O))}_syncPendingControls(){let O=this._reduceChildren(!1,(C,K)=>!!K._syncPendingControls()||C);return O&&this.updateValueAndValidity({onlySelf:!0}),O}_forEachChild(O){Object.keys(this.controls).forEach(C=>{const K=this.controls[C];K&&O(K,C)})}_setUpControls(){this._forEachChild(O=>{O.setParent(this),O._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(O){for(const[C,K]of Object.entries(this.controls))if(this.contains(C)&&O(K))return!0;return!1}_reduceValue(){return this._reduceChildren({},(C,K,de)=>((K.enabled||this.disabled)&&(C[de]=K.value),C))}_reduceChildren(O,C){let K=O;return this._forEachChild((de,Xe)=>{K=C(K,de,Xe)}),K}_allControlsDisabled(){for(const O of Object.keys(this.controls))if(this.controls[O].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(O){return this.controls.hasOwnProperty(O)?this.controls[O]:null}}class qt extends _t{}const ln=new f.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>oi}),oi="always";function vs(b,O){return[...O.path,b]}function as(b,O,C=oi){ai(b,O),O.valueAccessor.writeValue(b.value),(b.disabled||"always"===C)&&O.valueAccessor.setDisabledState?.(b.disabled),function Oe(b,O){O.valueAccessor.registerOnChange(C=>{b._pendingValue=C,b._pendingChange=!0,b._pendingDirty=!0,"change"===b.updateOn&&It(b,O)})}(b,O),function pn(b,O){const C=(K,de)=>{O.valueAccessor.writeValue(K),de&&O.viewToModelUpdate(K)};b.registerOnChange(C),O._registerOnDestroy(()=>{b._unregisterOnChange(C)})}(b,O),function rt(b,O){O.valueAccessor.registerOnTouched(()=>{b._pendingTouched=!0,"blur"===b.updateOn&&b._pendingChange&&It(b,O),"submit"!==b.updateOn&&b.markAsTouched()})}(b,O),function ar(b,O){if(O.valueAccessor.setDisabledState){const C=K=>{O.valueAccessor.setDisabledState(K)};b.registerOnDisabledChange(C),O._registerOnDestroy(()=>{b._unregisterOnDisabledChange(C)})}}(b,O)}function Ci(b,O,C=!0){const K=()=>{};O.valueAccessor&&(O.valueAccessor.registerOnChange(K),O.valueAccessor.registerOnTouched(K)),ke(b,O),b&&(O._invokeOnDestroyCallbacks(),b._registerOnCollectionChange(()=>{}))}function Jr(b,O){b.forEach(C=>{C.registerOnValidatorChange&&C.registerOnValidatorChange(O)})}function ai(b,O){const C=or(b);null!==O.validator?b.setValidators(Gt(C,O.validator)):"function"==typeof C&&b.setValidators([C]);const K=Hn(b);null!==O.asyncValidator?b.setAsyncValidators(Gt(K,O.asyncValidator)):"function"==typeof K&&b.setAsyncValidators([K]);const de=()=>b.updateValueAndValidity();Jr(O._rawValidators,de),Jr(O._rawAsyncValidators,de)}function ke(b,O){let C=!1;if(null!==b){if(null!==O.validator){const de=or(b);if(Array.isArray(de)&&de.length>0){const Xe=de.filter(ht=>ht!==O.validator);Xe.length!==de.length&&(C=!0,b.setValidators(Xe))}}if(null!==O.asyncValidator){const de=Hn(b);if(Array.isArray(de)&&de.length>0){const Xe=de.filter(ht=>ht!==O.asyncValidator);Xe.length!==de.length&&(C=!0,b.setAsyncValidators(Xe))}}}const K=()=>{};return Jr(O._rawValidators,K),Jr(O._rawAsyncValidators,K),C}function It(b,O){b._pendingDirty&&b.markAsDirty(),b.setValue(b._pendingValue,{emitModelToViewChange:!1}),O.viewToModelUpdate(b._pendingValue),b._pendingChange=!1}function Xt(b,O){ai(b,O)}function Xn(b,O){if(!b.hasOwnProperty("model"))return!1;const C=b.model;return!!C.isFirstChange()||!Object.is(O,C.currentValue)}function ki(b,O){b._syncPendingControls(),O.forEach(C=>{const K=C.control;"submit"===K.updateOn&&K._pendingChange&&(C.viewToModelUpdate(K._pendingValue),K._pendingChange=!1)})}function ls(b,O){if(!O)return null;let C,K,de;return Array.isArray(O),O.forEach(Xe=>{Xe.constructor===ce?C=Xe:function us(b){return Object.getPrototypeOf(b.constructor)===We}(Xe)?K=Xe:de=Xe}),de||K||C||null}const _o={provide:Vn,useExisting:(0,f.Gpc)(()=>ur)},qr=(()=>Promise.resolve())();let ur=(()=>{class b extends Vn{constructor(C,K,de){super(),this.callSetDisabledState=de,this.submitted=!1,this._directives=new Set,this.ngSubmit=new f.vpe,this.form=new _t({},$n(C),nn(K))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(C){qr.then(()=>{const K=this._findContainer(C.path);C.control=K.registerControl(C.name,C.control),as(C.control,C,this.callSetDisabledState),C.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(C)})}getControl(C){return this.form.get(C.path)}removeControl(C){qr.then(()=>{const K=this._findContainer(C.path);K&&K.removeControl(C.name),this._directives.delete(C)})}addFormGroup(C){qr.then(()=>{const K=this._findContainer(C.path),de=new _t({});Xt(de,C),K.registerControl(C.name,de),de.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(C){qr.then(()=>{const K=this._findContainer(C.path);K&&K.removeControl(C.name)})}getFormGroup(C){return this.form.get(C.path)}updateModel(C,K){qr.then(()=>{this.form.get(C.path).setValue(K)})}setValue(C){this.control.setValue(C)}onSubmit(C){return this.submitted=!0,ki(this.form,this._directives),this.ngSubmit.emit(C),"dialog"===C?.target?.method}onReset(){this.resetForm()}resetForm(C=void 0){this.form.reset(C),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(C){return C.pop(),C.length?this.form.get(C):this.form}static#e=this.\u0275fac=function(K){return new(K||b)(f.Y36(Ie,10),f.Y36(et,10),f.Y36(ln,8))};static#t=this.\u0275dir=f.lG2({type:b,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(K,de){1&K&&f.NdJ("submit",function(ht){return de.onSubmit(ht)})("reset",function(){return de.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[f._Bn([_o]),f.qOj]})}return b})();function Us(b,O){const C=b.indexOf(O);C>-1&&b.splice(C,1)}function Ys(b){return"object"==typeof b&&null!==b&&2===Object.keys(b).length&&"value"in b&&"disabled"in b}const yi=class extends st{constructor(O=null,C,K){super(Ee(C),z(K,C)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(O),this._setUpdateStrategy(C),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),k(C)&&(C.nonNullable||C.initialValueIsDefault)&&(this.defaultValue=Ys(O)?O.value:O)}setValue(O,C={}){this.value=this._pendingValue=O,this._onChange.length&&!1!==C.emitModelToViewChange&&this._onChange.forEach(K=>K(this.value,!1!==C.emitViewToModelChange)),this.updateValueAndValidity(C)}patchValue(O,C={}){this.setValue(O,C)}reset(O=this.defaultValue,C={}){this._applyFormState(O),this.markAsPristine(C),this.markAsUntouched(C),this.setValue(this.value,C),this._pendingChange=!1}_updateValue(){}_anyControls(O){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(O){this._onChange.push(O)}_unregisterOnChange(O){Us(this._onChange,O)}registerOnDisabledChange(O){this._onDisabledChange.push(O)}_unregisterOnDisabledChange(O){Us(this._onDisabledChange,O)}_forEachChild(O){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(O){Ys(O)?(this.value=this._pendingValue=O.value,O.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=O}},ws={provide:Zn,useExisting:(0,f.Gpc)(()=>vo)},Ms=(()=>Promise.resolve())();let vo=(()=>{class b extends Zn{constructor(C,K,de,Xe,ht,un){super(),this._changeDetectorRef=ht,this.callSetDisabledState=un,this.control=new yi,this._registered=!1,this.name="",this.update=new f.vpe,this._parent=C,this._setValidators(K),this._setAsyncValidators(de),this.valueAccessor=ls(0,Xe)}ngOnChanges(C){if(this._checkForErrors(),!this._registered||"name"in C){if(this._registered&&(this._checkName(),this.formDirective)){const K=C.name.previousValue;this.formDirective.removeControl({name:K,path:this._getPath(K)})}this._setUpControl()}"isDisabled"in C&&this._updateDisabled(C),Xn(C,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(C){this.viewModel=C,this.update.emit(C)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){as(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(C){Ms.then(()=>{this.control.setValue(C,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(C){const K=C.isDisabled.currentValue,de=0!==K&&(0,f.VuI)(K);Ms.then(()=>{de&&!this.control.disabled?this.control.disable():!de&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(C){return this._parent?vs(C,this._parent):[C]}static#e=this.\u0275fac=function(K){return new(K||b)(f.Y36(Vn,9),f.Y36(Ie,10),f.Y36(et,10),f.Y36(at,10),f.Y36(f.sBO,8),f.Y36(ln,8))};static#t=this.\u0275dir=f.lG2({type:b,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[f._Bn([ws]),f.qOj,f.TTD]})}return b})(),Mo=(()=>{class b{static#e=this.\u0275fac=function(K){return new(K||b)};static#t=this.\u0275dir=f.lG2({type:b,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}return b})();const Ns={provide:at,useExisting:(0,f.Gpc)(()=>js),multi:!0};let js=(()=>{class b extends We{writeValue(C){this.setProperty("value",C??"")}registerOnChange(C){this.onChange=K=>{C(""==K?null:parseFloat(K))}}static#e=this.\u0275fac=function(){let C;return function(de){return(C||(C=f.n5z(b)))(de||b)}}();static#t=this.\u0275dir=f.lG2({type:b,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(K,de){1&K&&f.NdJ("input",function(ht){return de.onChange(ht.target.value)})("blur",function(){return de.onTouched()})},features:[f._Bn([Ns]),f.qOj]})}return b})();const Wn={provide:at,useExisting:(0,f.Gpc)(()=>li),multi:!0};let Nr=(()=>{class b{static#e=this.\u0275fac=function(K){return new(K||b)};static#t=this.\u0275mod=f.oAB({type:b});static#n=this.\u0275inj=f.cJS({})}return b})(),vi=(()=>{class b{constructor(){this._accessors=[]}add(C,K){this._accessors.push([C,K])}remove(C){for(let K=this._accessors.length-1;K>=0;--K)if(this._accessors[K][1]===C)return void this._accessors.splice(K,1)}select(C){this._accessors.forEach(K=>{this._isSameGroup(K,C)&&K[1]!==C&&K[1].fireUncheck(C.value)})}_isSameGroup(C,K){return!!C[0].control&&C[0]._parent===K._control._parent&&C[1].name===K.name}static#e=this.\u0275fac=function(K){return new(K||b)};static#t=this.\u0275prov=f.Yz7({token:b,factory:b.\u0275fac,providedIn:Nr})}return b})(),li=(()=>{class b extends We{constructor(C,K,de,Xe){super(C,K),this._registry=de,this._injector=Xe,this.setDisabledStateFired=!1,this.onChange=()=>{},this.callSetDisabledState=(0,f.f3M)(ln,{optional:!0})??oi}ngOnInit(){this._control=this._injector.get(Zn),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(C){this._state=C===this.value,this.setProperty("checked",this._state)}registerOnChange(C){this._fn=C,this.onChange=()=>{C(this.value),this._registry.select(this)}}setDisabledState(C){(this.setDisabledStateFired||C||"whenDisabledForLegacyCode"===this.callSetDisabledState)&&this.setProperty("disabled",C),this.setDisabledStateFired=!0}fireUncheck(C){this.writeValue(C)}_checkName(){!this.name&&this.formControlName&&(this.name=this.formControlName)}static#e=this.\u0275fac=function(K){return new(K||b)(f.Y36(f.Qsj),f.Y36(f.SBq),f.Y36(vi),f.Y36(f.zs3))};static#t=this.\u0275dir=f.lG2({type:b,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(K,de){1&K&&f.NdJ("change",function(){return de.onChange()})("blur",function(){return de.onTouched()})},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[f._Bn([Wn]),f.qOj]})}return b})();const Bn=new f.OlP("NgModelWithFormControlWarning"),vr={provide:Vn,useExisting:(0,f.Gpc)(()=>xt)};let xt=(()=>{class b extends Vn{constructor(C,K,de){super(),this.callSetDisabledState=de,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new f.vpe,this._setValidators(C),this._setAsyncValidators(K)}ngOnChanges(C){this._checkFormPresent(),C.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(ke(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(C){const K=this.form.get(C.path);return as(K,C,this.callSetDisabledState),K.updateValueAndValidity({emitEvent:!1}),this.directives.push(C),K}getControl(C){return this.form.get(C.path)}removeControl(C){Ci(C.control||null,C,!1),function Zs(b,O){const C=b.indexOf(O);C>-1&&b.splice(C,1)}(this.directives,C)}addFormGroup(C){this._setUpFormContainer(C)}removeFormGroup(C){this._cleanUpFormContainer(C)}getFormGroup(C){return this.form.get(C.path)}addFormArray(C){this._setUpFormContainer(C)}removeFormArray(C){this._cleanUpFormContainer(C)}getFormArray(C){return this.form.get(C.path)}updateModel(C,K){this.form.get(C.path).setValue(K)}onSubmit(C){return this.submitted=!0,ki(this.form,this.directives),this.ngSubmit.emit(C),"dialog"===C?.target?.method}onReset(){this.resetForm()}resetForm(C=void 0){this.form.reset(C),this.submitted=!1}_updateDomValue(){this.directives.forEach(C=>{const K=C.control,de=this.form.get(C.path);K!==de&&(Ci(K||null,C),(b=>b instanceof yi)(de)&&(as(de,C,this.callSetDisabledState),C.control=de))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(C){const K=this.form.get(C.path);Xt(K,C),K.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(C){if(this.form){const K=this.form.get(C.path);K&&function gn(b,O){return ke(b,O)}(K,C)&&K.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){ai(this.form,this),this._oldForm&&ke(this._oldForm,this)}_checkFormPresent(){}static#e=this.\u0275fac=function(K){return new(K||b)(f.Y36(Ie,10),f.Y36(et,10),f.Y36(ln,8))};static#t=this.\u0275dir=f.lG2({type:b,selectors:[["","formGroup",""]],hostBindings:function(K,de){1&K&&f.NdJ("submit",function(ht){return de.onSubmit(ht)})("reset",function(){return de.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[f._Bn([vr]),f.qOj,f.TTD]})}return b})();const Zi={provide:Zn,useExisting:(0,f.Gpc)(()=>Jn)};let Jn=(()=>{class b extends Zn{set isDisabled(C){}static#e=this._ngModelWarningSentOnce=!1;constructor(C,K,de,Xe,ht){super(),this._ngModelWarningConfig=ht,this._added=!1,this.name=null,this.update=new f.vpe,this._ngModelWarningSent=!1,this._parent=C,this._setValidators(K),this._setAsyncValidators(de),this.valueAccessor=ls(0,Xe)}ngOnChanges(C){this._added||this._setUpControl(),Xn(C,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(C){this.viewModel=C,this.update.emit(C)}get path(){return vs(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}static#t=this.\u0275fac=function(K){return new(K||b)(f.Y36(Vn,13),f.Y36(Ie,10),f.Y36(et,10),f.Y36(at,10),f.Y36(Bn,8))};static#n=this.\u0275dir=f.lG2({type:b,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[f._Bn([Zi]),f.qOj,f.TTD]})}return b})();const gi={provide:at,useExisting:(0,f.Gpc)(()=>bi),multi:!0};function ss(b,O){return null==b?`${O}`:(O&&"object"==typeof O&&(O="Object"),`${b}: ${O}`.slice(0,50))}let bi=(()=>{class b extends We{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(C){this._compareWith=C}writeValue(C){this.value=C;const de=ss(this._getOptionId(C),C);this.setProperty("value",de)}registerOnChange(C){this.onChange=K=>{this.value=this._getOptionValue(K),C(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(C){for(const K of this._optionMap.keys())if(this._compareWith(this._optionMap.get(K),C))return K;return null}_getOptionValue(C){const K=function fn(b){return b.split(":")[0]}(C);return this._optionMap.has(K)?this._optionMap.get(K):C}static#e=this.\u0275fac=function(){let C;return function(de){return(C||(C=f.n5z(b)))(de||b)}}();static#t=this.\u0275dir=f.lG2({type:b,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(K,de){1&K&&f.NdJ("change",function(ht){return de.onChange(ht.target.value)})("blur",function(){return de.onTouched()})},inputs:{compareWith:"compareWith"},features:[f._Bn([gi]),f.qOj]})}return b})(),Os=(()=>{class b{constructor(C,K,de){this._element=C,this._renderer=K,this._select=de,this._select&&(this.id=this._select._registerOption())}set ngValue(C){null!=this._select&&(this._select._optionMap.set(this.id,C),this._setElementValue(ss(this.id,C)),this._select.writeValue(this._select.value))}set value(C){this._setElementValue(C),this._select&&this._select.writeValue(this._select.value)}_setElementValue(C){this._renderer.setProperty(this._element.nativeElement,"value",C)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static#e=this.\u0275fac=function(K){return new(K||b)(f.Y36(f.SBq),f.Y36(f.Qsj),f.Y36(bi,9))};static#t=this.\u0275dir=f.lG2({type:b,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}return b})();const Wi={provide:at,useExisting:(0,f.Gpc)(()=>Or),multi:!0};function Vr(b,O){return null==b?`${O}`:("string"==typeof O&&(O=`'${O}'`),O&&"object"==typeof O&&(O="Object"),`${b}: ${O}`.slice(0,50))}let Or=(()=>{class b extends We{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(C){this._compareWith=C}writeValue(C){let K;if(this.value=C,Array.isArray(C)){const de=C.map(Xe=>this._getOptionId(Xe));K=(Xe,ht)=>{Xe._setSelected(de.indexOf(ht.toString())>-1)}}else K=(de,Xe)=>{de._setSelected(!1)};this._optionMap.forEach(K)}registerOnChange(C){this.onChange=K=>{const de=[],Xe=K.selectedOptions;if(void 0!==Xe){const ht=Xe;for(let un=0;un<ht.length;un++){const lr=this._getOptionValue(ht[un].value);de.push(lr)}}else{const ht=K.options;for(let un=0;un<ht.length;un++){const ir=ht[un];if(ir.selected){const lr=this._getOptionValue(ir.value);de.push(lr)}}}this.value=de,C(de)}}_registerOption(C){const K=(this._idCounter++).toString();return this._optionMap.set(K,C),K}_getOptionId(C){for(const K of this._optionMap.keys())if(this._compareWith(this._optionMap.get(K)._value,C))return K;return null}_getOptionValue(C){const K=function wr(b){return b.split(":")[0]}(C);return this._optionMap.has(K)?this._optionMap.get(K)._value:C}static#e=this.\u0275fac=function(){let C;return function(de){return(C||(C=f.n5z(b)))(de||b)}}();static#t=this.\u0275dir=f.lG2({type:b,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(K,de){1&K&&f.NdJ("change",function(ht){return de.onChange(ht.target)})("blur",function(){return de.onTouched()})},inputs:{compareWith:"compareWith"},features:[f._Bn([Wi]),f.qOj]})}return b})(),Ei=(()=>{class b{constructor(C,K,de){this._element=C,this._renderer=K,this._select=de,this._select&&(this.id=this._select._registerOption(this))}set ngValue(C){null!=this._select&&(this._value=C,this._setElementValue(Vr(this.id,C)),this._select.writeValue(this._select.value))}set value(C){this._select?(this._value=C,this._setElementValue(Vr(this.id,C)),this._select.writeValue(this._select.value)):this._setElementValue(C)}_setElementValue(C){this._renderer.setProperty(this._element.nativeElement,"value",C)}_setSelected(C){this._renderer.setProperty(this._element.nativeElement,"selected",C)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static#e=this.\u0275fac=function(K){return new(K||b)(f.Y36(f.SBq),f.Y36(f.Qsj),f.Y36(Or,9))};static#t=this.\u0275dir=f.lG2({type:b,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}return b})(),Vi=(()=>{class b{constructor(){this._validator=Te}ngOnChanges(C){if(this.inputName in C){const K=this.normalizeInput(C[this.inputName].currentValue);this._enabled=this.enabled(K),this._validator=this._enabled?this.createValidator(K):Te,this._onChange&&this._onChange()}}validate(C){return this._validator(C)}registerOnValidatorChange(C){this._onChange=C}enabled(C){return null!=C}static#e=this.\u0275fac=function(K){return new(K||b)};static#t=this.\u0275dir=f.lG2({type:b,features:[f.TTD]})}return b})();const Qi={provide:Ie,useExisting:(0,f.Gpc)(()=>Ui),multi:!0};let Ui=(()=>{class b extends Vi{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=f.VuI,this.createValidator=C=>In}enabled(C){return C}static#e=this.\u0275fac=function(){let C;return function(de){return(C||(C=f.n5z(b)))(de||b)}}();static#t=this.\u0275dir=f.lG2({type:b,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(K,de){2&K&&f.uIk("required",de._enabled?"":null)},inputs:{required:"required"},features:[f._Bn([Qi]),f.qOj]})}return b})(),Ds=(()=>{class b{static#e=this.\u0275fac=function(K){return new(K||b)};static#t=this.\u0275mod=f.oAB({type:b});static#n=this.\u0275inj=f.cJS({imports:[Nr]})}return b})();class Zo extends st{constructor(O,C,K){super(Ee(C),z(K,C)),this.controls=O,this._initObservables(),this._setUpdateStrategy(C),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(O){return this.controls[this._adjustIndex(O)]}push(O,C={}){this.controls.push(O),this._registerControl(O),this.updateValueAndValidity({emitEvent:C.emitEvent}),this._onCollectionChange()}insert(O,C,K={}){this.controls.splice(O,0,C),this._registerControl(C),this.updateValueAndValidity({emitEvent:K.emitEvent})}removeAt(O,C={}){let K=this._adjustIndex(O);K<0&&(K=0),this.controls[K]&&this.controls[K]._registerOnCollectionChange(()=>{}),this.controls.splice(K,1),this.updateValueAndValidity({emitEvent:C.emitEvent})}setControl(O,C,K={}){let de=this._adjustIndex(O);de<0&&(de=0),this.controls[de]&&this.controls[de]._registerOnCollectionChange(()=>{}),this.controls.splice(de,1),C&&(this.controls.splice(de,0,C),this._registerControl(C)),this.updateValueAndValidity({emitEvent:K.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(O,C={}){Pe(this,0,O),O.forEach((K,de)=>{oe(this,!1,de),this.at(de).setValue(K,{onlySelf:!0,emitEvent:C.emitEvent})}),this.updateValueAndValidity(C)}patchValue(O,C={}){null!=O&&(O.forEach((K,de)=>{this.at(de)&&this.at(de).patchValue(K,{onlySelf:!0,emitEvent:C.emitEvent})}),this.updateValueAndValidity(C))}reset(O=[],C={}){this._forEachChild((K,de)=>{K.reset(O[de],{onlySelf:!0,emitEvent:C.emitEvent})}),this._updatePristine(C),this._updateTouched(C),this.updateValueAndValidity(C)}getRawValue(){return this.controls.map(O=>O.getRawValue())}clear(O={}){this.controls.length<1||(this._forEachChild(C=>C._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:O.emitEvent}))}_adjustIndex(O){return O<0?O+this.length:O}_syncPendingControls(){let O=this.controls.reduce((C,K)=>!!K._syncPendingControls()||C,!1);return O&&this.updateValueAndValidity({onlySelf:!0}),O}_forEachChild(O){this.controls.forEach((C,K)=>{O(C,K)})}_updateValue(){this.value=this.controls.filter(O=>O.enabled||this.disabled).map(O=>O.value)}_anyControls(O){return this.controls.some(C=>C.enabled&&O(C))}_setUpControls(){this._forEachChild(O=>this._registerControl(O))}_allControlsDisabled(){for(const O of this.controls)if(O.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(O){O.setParent(this),O._registerOnCollectionChange(this._onCollectionChange)}_find(O){return this.at(O)??null}}function Si(b){return!!b&&(void 0!==b.asyncValidators||void 0!==b.validators||void 0!==b.updateOn)}let $a=(()=>{class b{constructor(){this.useNonNullable=!1}get nonNullable(){const C=new b;return C.useNonNullable=!0,C}group(C,K=null){const de=this._reduceControls(C);let Xe={};return Si(K)?Xe=K:null!==K&&(Xe.validators=K.validator,Xe.asyncValidators=K.asyncValidator),new _t(de,Xe)}record(C,K=null){const de=this._reduceControls(C);return new qt(de,K)}control(C,K,de){let Xe={};return this.useNonNullable?(Si(K)?Xe=K:(Xe.validators=K,Xe.asyncValidators=de),new yi(C,{...Xe,nonNullable:!0})):new yi(C,K,de)}array(C,K,de){const Xe=C.map(ht=>this._createControl(ht));return new Zo(Xe,K,de)}_reduceControls(C){const K={};return Object.keys(C).forEach(de=>{K[de]=this._createControl(C[de])}),K}_createControl(C){return C instanceof yi||C instanceof st?C:Array.isArray(C)?this.control(C[0],C.length>1?C[1]:null,C.length>2?C[2]:null):this.control(C)}static#e=this.\u0275fac=function(K){return new(K||b)};static#t=this.\u0275prov=f.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"})}return b})(),H=(()=>{class b{static withConfig(C){return{ngModule:b,providers:[{provide:ln,useValue:C.callSetDisabledState??oi}]}}static#e=this.\u0275fac=function(K){return new(K||b)};static#t=this.\u0275mod=f.oAB({type:b});static#n=this.\u0275inj=f.cJS({imports:[Ds]})}return b})(),ae=(()=>{class b{static withConfig(C){return{ngModule:b,providers:[{provide:Bn,useValue:C.warnOnNgModelWithFormControl??"always"},{provide:ln,useValue:C.callSetDisabledState??oi}]}}static#e=this.\u0275fac=function(K){return new(K||b)};static#t=this.\u0275mod=f.oAB({type:b});static#n=this.\u0275inj=f.cJS({imports:[Ds]})}return b})()},6593:(Nt,Ve,U)=>{U.d(Ve,{Dx:()=>Zn,H7:()=>br,b2:()=>Pt,q6:()=>Gt,se:()=>Fe});var f=U(5879),Z=U(6814);class q extends Z.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class ye extends q{static makeCurrent(){(0,Z.HT)(new ye)}onAndCancel(z,F,k){return z.addEventListener(F,k),()=>{z.removeEventListener(F,k)}}dispatchEvent(z,F){z.dispatchEvent(F)}remove(z){z.parentNode&&z.parentNode.removeChild(z)}createElement(z,F){return(F=F||this.getDefaultDocument()).createElement(z)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(z){return z.nodeType===Node.ELEMENT_NODE}isShadowRoot(z){return z instanceof DocumentFragment}getGlobalEventTarget(z,F){return"window"===F?window:"document"===F?z:"body"===F?z.body:null}getBaseHref(z){const F=function we(){return ge=ge||document.querySelector("base"),ge?ge.getAttribute("href"):null}();return null==F?null:function _e(ne){De=De||document.createElement("a"),De.setAttribute("href",ne);const z=De.pathname;return"/"===z.charAt(0)?z:`/${z}`}(F)}resetBaseElement(){ge=null}getUserAgent(){return window.navigator.userAgent}getCookie(z){return(0,Z.Mx)(document.cookie,z)}}let De,ge=null,re=(()=>{class ne{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(k){return new(k||ne)};static#t=this.\u0275prov=f.Yz7({token:ne,factory:ne.\u0275fac})}return ne})();const se=new f.OlP("EventManagerPlugins");let ve=(()=>{class ne{constructor(F,k){this._zone=k,this._eventNameToPlugin=new Map,F.forEach(oe=>{oe.manager=this}),this._plugins=F.slice().reverse()}addEventListener(F,k,oe){return this._findPluginFor(k).addEventListener(F,k,oe)}getZone(){return this._zone}_findPluginFor(F){let k=this._eventNameToPlugin.get(F);if(k)return k;if(k=this._plugins.find(Pe=>Pe.supports(F)),!k)throw new f.vHH(5101,!1);return this._eventNameToPlugin.set(F,k),k}static#e=this.\u0275fac=function(k){return new(k||ne)(f.LFG(se),f.LFG(f.R0b))};static#t=this.\u0275prov=f.Yz7({token:ne,factory:ne.\u0275fac})}return ne})();class Ye{constructor(z){this._doc=z}}const We="ng-app-id";let at=(()=>{class ne{constructor(F,k,oe,Pe={}){this.doc=F,this.appId=k,this.nonce=oe,this.platformId=Pe,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=(0,Z.PM)(Pe),this.resetHostNodes()}addStyles(F){for(const k of F)1===this.changeUsageCount(k,1)&&this.onStyleAdded(k)}removeStyles(F){for(const k of F)this.changeUsageCount(k,-1)<=0&&this.onStyleRemoved(k)}ngOnDestroy(){const F=this.styleNodesInDOM;F&&(F.forEach(k=>k.remove()),F.clear());for(const k of this.getAllStyles())this.onStyleRemoved(k);this.resetHostNodes()}addHost(F){this.hostNodes.add(F);for(const k of this.getAllStyles())this.addStyleToHost(F,k)}removeHost(F){this.hostNodes.delete(F)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(F){for(const k of this.hostNodes)this.addStyleToHost(k,F)}onStyleRemoved(F){const k=this.styleRef;k.get(F)?.elements?.forEach(oe=>oe.remove()),k.delete(F)}collectServerRenderedStyles(){const F=this.doc.head?.querySelectorAll(`style[${We}="${this.appId}"]`);if(F?.length){const k=new Map;return F.forEach(oe=>{null!=oe.textContent&&k.set(oe.textContent,oe)}),k}return null}changeUsageCount(F,k){const oe=this.styleRef;if(oe.has(F)){const Pe=oe.get(F);return Pe.usage+=k,Pe.usage}return oe.set(F,{usage:k,elements:[]}),k}getStyleElement(F,k){const oe=this.styleNodesInDOM,Pe=oe?.get(k);if(Pe?.parentNode===F)return oe.delete(k),Pe.removeAttribute(We),Pe;{const st=this.doc.createElement("style");return this.nonce&&st.setAttribute("nonce",this.nonce),st.textContent=k,this.platformIsServer&&st.setAttribute(We,this.appId),st}}addStyleToHost(F,k){const oe=this.getStyleElement(F,k);F.appendChild(oe);const Pe=this.styleRef,st=Pe.get(k)?.elements;st?st.push(oe):Pe.set(k,{elements:[oe],usage:1})}resetHostNodes(){const F=this.hostNodes;F.clear(),F.add(this.doc.head)}static#e=this.\u0275fac=function(k){return new(k||ne)(f.LFG(Z.K0),f.LFG(f.AFp),f.LFG(f.Ojb,8),f.LFG(f.Lbi))};static#t=this.\u0275prov=f.Yz7({token:ne,factory:ne.\u0275fac})}return ne})();const it={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},mt=/%COMP%/g,Ue=new f.OlP("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function et(ne,z){return z.map(F=>F.replace(mt,ne))}let Fe=(()=>{class ne{constructor(F,k,oe,Pe,st,_t,Ot,wt=null){this.eventManager=F,this.sharedStylesHost=k,this.appId=oe,this.removeStylesOnCompDestroy=Pe,this.doc=st,this.platformId=_t,this.ngZone=Ot,this.nonce=wt,this.rendererByCompId=new Map,this.platformIsServer=(0,Z.PM)(_t),this.defaultRenderer=new xe(F,st,Ot,this.platformIsServer)}createRenderer(F,k){if(!F||!k)return this.defaultRenderer;this.platformIsServer&&k.encapsulation===f.ifc.ShadowDom&&(k={...k,encapsulation:f.ifc.Emulated});const oe=this.getOrCreateRenderer(F,k);return oe instanceof kt?oe.applyToHost(F):oe instanceof yr&&oe.applyStyles(),oe}getOrCreateRenderer(F,k){const oe=this.rendererByCompId;let Pe=oe.get(k.id);if(!Pe){const st=this.doc,_t=this.ngZone,Ot=this.eventManager,wt=this.sharedStylesHost,qt=this.removeStylesOnCompDestroy,Gn=this.platformIsServer;switch(k.encapsulation){case f.ifc.Emulated:Pe=new kt(Ot,wt,k,this.appId,qt,st,_t,Gn);break;case f.ifc.ShadowDom:return new vn(Ot,wt,F,k,st,_t,this.nonce,Gn);default:Pe=new yr(Ot,wt,k,qt,st,_t,Gn)}oe.set(k.id,Pe)}return Pe}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(k){return new(k||ne)(f.LFG(ve),f.LFG(at),f.LFG(f.AFp),f.LFG(Ue),f.LFG(Z.K0),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(f.Ojb))};static#t=this.\u0275prov=f.Yz7({token:ne,factory:ne.\u0275fac})}return ne})();class xe{constructor(z,F,k,oe){this.eventManager=z,this.doc=F,this.ngZone=k,this.platformIsServer=oe,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(z,F){return F?this.doc.createElementNS(it[F]||F,z):this.doc.createElement(z)}createComment(z){return this.doc.createComment(z)}createText(z){return this.doc.createTextNode(z)}appendChild(z,F){(In(z)?z.content:z).appendChild(F)}insertBefore(z,F,k){z&&(In(z)?z.content:z).insertBefore(F,k)}removeChild(z,F){z&&z.removeChild(F)}selectRootElement(z,F){let k="string"==typeof z?this.doc.querySelector(z):z;if(!k)throw new f.vHH(-5104,!1);return F||(k.textContent=""),k}parentNode(z){return z.parentNode}nextSibling(z){return z.nextSibling}setAttribute(z,F,k,oe){if(oe){F=oe+":"+F;const Pe=it[oe];Pe?z.setAttributeNS(Pe,F,k):z.setAttribute(F,k)}else z.setAttribute(F,k)}removeAttribute(z,F,k){if(k){const oe=it[k];oe?z.removeAttributeNS(oe,F):z.removeAttribute(`${k}:${F}`)}else z.removeAttribute(F)}addClass(z,F){z.classList.add(F)}removeClass(z,F){z.classList.remove(F)}setStyle(z,F,k,oe){oe&(f.JOm.DashCase|f.JOm.Important)?z.style.setProperty(F,k,oe&f.JOm.Important?"important":""):z.style[F]=k}removeStyle(z,F,k){k&f.JOm.DashCase?z.style.removeProperty(F):z.style[F]=""}setProperty(z,F,k){z[F]=k}setValue(z,F){z.nodeValue=F}listen(z,F,k){if("string"==typeof z&&!(z=(0,Z.q)().getGlobalEventTarget(this.doc,z)))throw new Error(`Unsupported event target ${z} for event ${F}`);return this.eventManager.addEventListener(z,F,this.decoratePreventDefault(k))}decoratePreventDefault(z){return F=>{if("__ngUnwrap__"===F)return z;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>z(F)):z(F))&&F.preventDefault()}}}function In(ne){return"TEMPLATE"===ne.tagName&&void 0!==ne.content}class vn extends xe{constructor(z,F,k,oe,Pe,st,_t,Ot){super(z,Pe,st,Ot),this.sharedStylesHost=F,this.hostEl=k,this.shadowRoot=k.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const wt=et(oe.id,oe.styles);for(const qt of wt){const Gn=document.createElement("style");_t&&Gn.setAttribute("nonce",_t),Gn.textContent=qt,this.shadowRoot.appendChild(Gn)}}nodeOrShadowRoot(z){return z===this.hostEl?this.shadowRoot:z}appendChild(z,F){return super.appendChild(this.nodeOrShadowRoot(z),F)}insertBefore(z,F,k){return super.insertBefore(this.nodeOrShadowRoot(z),F,k)}removeChild(z,F){return super.removeChild(this.nodeOrShadowRoot(z),F)}parentNode(z){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(z)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class yr extends xe{constructor(z,F,k,oe,Pe,st,_t,Ot){super(z,Pe,st,_t),this.sharedStylesHost=F,this.removeStylesOnCompDestroy=oe,this.styles=Ot?et(Ot,k.styles):k.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class kt extends yr{constructor(z,F,k,oe,Pe,st,_t,Ot){const wt=oe+"-"+k.id;super(z,F,k,Pe,st,_t,Ot,wt),this.contentAttr=function Ae(ne){return"_ngcontent-%COMP%".replace(mt,ne)}(wt),this.hostAttr=function Ie(ne){return"_nghost-%COMP%".replace(mt,ne)}(wt)}applyToHost(z){this.applyStyles(),this.setAttribute(z,this.hostAttr,"")}createElement(z,F){const k=super.createElement(z,F);return super.setAttribute(k,this.contentAttr,""),k}}let Ft=(()=>{class ne extends Ye{constructor(F){super(F)}supports(F){return!0}addEventListener(F,k,oe){return F.addEventListener(k,oe,!1),()=>this.removeEventListener(F,k,oe)}removeEventListener(F,k,oe){return F.removeEventListener(k,oe)}static#e=this.\u0275fac=function(k){return new(k||ne)(f.LFG(Z.K0))};static#t=this.\u0275prov=f.Yz7({token:ne,factory:ne.\u0275fac})}return ne})();const Dt=["alt","control","meta","shift"],Te={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Re={alt:ne=>ne.altKey,control:ne=>ne.ctrlKey,meta:ne=>ne.metaKey,shift:ne=>ne.shiftKey};let $e=(()=>{class ne extends Ye{constructor(F){super(F)}supports(F){return null!=ne.parseEventName(F)}addEventListener(F,k,oe){const Pe=ne.parseEventName(k),st=ne.eventCallback(Pe.fullKey,oe,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,Z.q)().onAndCancel(F,Pe.domEventName,st))}static parseEventName(F){const k=F.toLowerCase().split("."),oe=k.shift();if(0===k.length||"keydown"!==oe&&"keyup"!==oe)return null;const Pe=ne._normalizeKey(k.pop());let st="",_t=k.indexOf("code");if(_t>-1&&(k.splice(_t,1),st="code."),Dt.forEach(wt=>{const qt=k.indexOf(wt);qt>-1&&(k.splice(qt,1),st+=wt+".")}),st+=Pe,0!=k.length||0===Pe.length)return null;const Ot={};return Ot.domEventName=oe,Ot.fullKey=st,Ot}static matchEventFullKeyCode(F,k){let oe=Te[F.key]||F.key,Pe="";return k.indexOf("code.")>-1&&(oe=F.code,Pe="code."),!(null==oe||!oe)&&(oe=oe.toLowerCase()," "===oe?oe="space":"."===oe&&(oe="dot"),Dt.forEach(st=>{st!==oe&&(0,Re[st])(F)&&(Pe+=st+".")}),Pe+=oe,Pe===k)}static eventCallback(F,k,oe){return Pe=>{ne.matchEventFullKeyCode(Pe,F)&&oe.runGuarded(()=>k(Pe))}}static _normalizeKey(F){return"esc"===F?"escape":F}static#e=this.\u0275fac=function(k){return new(k||ne)(f.LFG(Z.K0))};static#t=this.\u0275prov=f.Yz7({token:ne,factory:ne.\u0275fac})}return ne})();const Gt=(0,f.eFA)(f._c5,"browser",[{provide:f.Lbi,useValue:Z.bD},{provide:f.g9A,useValue:function vt(){ye.makeCurrent()},multi:!0},{provide:Z.K0,useFactory:function jt(){return(0,f.RDi)(document),document},deps:[]}]),or=new f.OlP(""),Hn=[{provide:f.rWj,useClass:class Ne{addToWindow(z){f.dqk.getAngularTestability=(k,oe=!0)=>{const Pe=z.findTestabilityInTree(k,oe);if(null==Pe)throw new f.vHH(5103,!1);return Pe},f.dqk.getAllAngularTestabilities=()=>z.getAllTestabilities(),f.dqk.getAllAngularRootElements=()=>z.getAllRootElements(),f.dqk.frameworkStabilizers||(f.dqk.frameworkStabilizers=[]),f.dqk.frameworkStabilizers.push(k=>{const oe=f.dqk.getAllAngularTestabilities();let Pe=oe.length,st=!1;const _t=function(Ot){st=st||Ot,Pe--,0==Pe&&k(st)};oe.forEach(Ot=>{Ot.whenStable(_t)})})}findTestabilityInTree(z,F,k){return null==F?null:z.getTestability(F)??(k?(0,Z.q)().isShadowRoot(F)?this.findTestabilityInTree(z,F.host,!0):this.findTestabilityInTree(z,F.parentElement,!0):null)}},deps:[]},{provide:f.lri,useClass:f.dDg,deps:[f.R0b,f.eoX,f.rWj]},{provide:f.dDg,useClass:f.dDg,deps:[f.R0b,f.eoX,f.rWj]}],Ln=[{provide:f.zSh,useValue:"root"},{provide:f.qLn,useFactory:function $n(){return new f.qLn},deps:[]},{provide:se,useClass:Ft,multi:!0,deps:[Z.K0,f.R0b,f.Lbi]},{provide:se,useClass:$e,multi:!0,deps:[Z.K0]},Fe,at,ve,{provide:f.FYo,useExisting:Fe},{provide:Z.JF,useClass:re,deps:[]},[]];let Pt=(()=>{class ne{constructor(F){}static withServerTransition(F){return{ngModule:ne,providers:[{provide:f.AFp,useValue:F.appId}]}}static#e=this.\u0275fac=function(k){return new(k||ne)(f.LFG(or,12))};static#t=this.\u0275mod=f.oAB({type:ne});static#n=this.\u0275inj=f.cJS({providers:[...Ln,...Hn],imports:[Z.ez,f.hGG]})}return ne})(),Zn=(()=>{class ne{constructor(F){this._doc=F}getTitle(){return this._doc.title}setTitle(F){this._doc.title=F||""}static#e=this.\u0275fac=function(k){return new(k||ne)(f.LFG(Z.K0))};static#t=this.\u0275prov=f.Yz7({token:ne,factory:function(k){let oe=null;return oe=k?new k:function Vn(){return new Zn((0,f.LFG)(Z.K0))}(),oe},providedIn:"root"})}return ne})();typeof window<"u"&&window;let br=(()=>{class ne{static#e=this.\u0275fac=function(k){return new(k||ne)};static#t=this.\u0275prov=f.Yz7({token:ne,factory:function(k){let oe=null;return oe=k?new(k||ne):f.LFG(Pn),oe},providedIn:"root"})}return ne})(),Pn=(()=>{class ne extends br{constructor(F){super(),this._doc=F}sanitize(F,k){if(null==k)return null;switch(F){case f.q3G.NONE:return k;case f.q3G.HTML:return(0,f.qzn)(k,"HTML")?(0,f.z3N)(k):(0,f.EiD)(this._doc,String(k)).toString();case f.q3G.STYLE:return(0,f.qzn)(k,"Style")?(0,f.z3N)(k):k;case f.q3G.SCRIPT:if((0,f.qzn)(k,"Script"))return(0,f.z3N)(k);throw new f.vHH(5200,!1);case f.q3G.URL:return(0,f.qzn)(k,"URL")?(0,f.z3N)(k):(0,f.mCW)(String(k));case f.q3G.RESOURCE_URL:if((0,f.qzn)(k,"ResourceURL"))return(0,f.z3N)(k);throw new f.vHH(5201,!1);default:throw new f.vHH(5202,!1)}}bypassSecurityTrustHtml(F){return(0,f.JVY)(F)}bypassSecurityTrustStyle(F){return(0,f.L6k)(F)}bypassSecurityTrustScript(F){return(0,f.eBb)(F)}bypassSecurityTrustUrl(F){return(0,f.LAX)(F)}bypassSecurityTrustResourceUrl(F){return(0,f.pB0)(F)}static#e=this.\u0275fac=function(k){return new(k||ne)(f.LFG(Z.K0))};static#t=this.\u0275prov=f.Yz7({token:ne,factory:function(k){let oe=null;return oe=k?new k:function Un(ne){return new Pn(ne.get(Z.K0))}(f.LFG(f.zs3)),oe},providedIn:"root"})}return ne})()},7045:(Nt,Ve,U)=>{U.d(Ve,{F0:()=>bs,Bz:()=>Hu,lC:()=>fn});var f=U(5879),Z=U(5592),q=U(4674),ge=U(2459),we=U(2096),De=U(5619),_e=U(7453),Ne=U(2737),re=U(7400),se=U(4564),ve=U(2714),Ye=U(8251),We=U(7103);function at(...v){const R=(0,se.yG)(v),I=(0,se.jO)(v),{args:M,keys:B}=(0,_e.D)(v);if(0===M.length)return(0,ge.D)([],R);const te=new Z.y(function it(v,R,I=Ne.y){return M=>{mt(R,()=>{const{length:B}=v,te=new Array(B);let fe=B,qe=B;for(let ze=0;ze<B;ze++)mt(R,()=>{const Ut=(0,ge.D)(v[ze],R);let jn=!1;Ut.subscribe((0,Ye.x)(M,Di=>{te[ze]=Di,jn||(jn=!0,qe--),qe||M.next(I(te.slice()))},()=>{--fe||M.complete()}))},M)},M)}}(M,R,B?fe=>(0,ve.n)(B,fe):Ne.y));return I?te.pipe((0,re.Z)(I)):te}function mt(v,R,I){v?(0,We.f)(I,v,R):R()}var nt=U(6973),Lt=U(5211),ot=U(4829);function ce(v){return new Z.y(R=>{(0,ot.Xf)(v()).subscribe(R)})}var Ue=U(8407);function Ae(v,R){const I=(0,q.m)(v)?v:()=>v,M=B=>B.error(I());return new Z.y(R?B=>R.schedule(M,0,B):M)}var Ie=U(6232),et=U(7394),Fe=U(9360);function xe(){return(0,Fe.e)((v,R)=>{let I=null;v._refCount++;const M=(0,Ye.x)(R,void 0,void 0,void 0,()=>{if(!v||v._refCount<=0||0<--v._refCount)return void(I=null);const B=v._connection,te=I;I=null,B&&(!te||B===te)&&B.unsubscribe(),R.unsubscribe()});v.subscribe(M),M.closed||(I=v.connect())})}class Tt extends Z.y{constructor(R,I){super(),this.source=R,this.subjectFactory=I,this._subject=null,this._refCount=0,this._connection=null,(0,Fe.A)(R)&&(this.lift=R.lift)}_subscribe(R){return this.getSubject().subscribe(R)}getSubject(){const R=this._subject;return(!R||R.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:R}=this;this._subject=this._connection=null,R?.unsubscribe()}connect(){let R=this._connection;if(!R){R=this._connection=new et.w0;const I=this.getSubject();R.add(this.source.subscribe((0,Ye.x)(I,void 0,()=>{this._teardown(),I.complete()},M=>{this._teardown(),I.error(M)},()=>this._teardown()))),R.closed&&(this._connection=null,R=et.w0.EMPTY)}return R}refCount(){return xe()(this)}}var zt=U(8645),In=U(6814),vn=U(7398),yr=U(4664),kt=U(8180),Ft=U(7921),Dt=U(2181),Te=U(1631),Re=U(1374),$e=U(6328),Le=U(9397);function He(v){return(0,Fe.e)((R,I)=>{let te,M=null,B=!1;M=R.subscribe((0,Ye.x)(I,void 0,void 0,fe=>{te=(0,ot.Xf)(v(fe,He(v)(R))),M?(M.unsubscribe(),M=null,te.subscribe(I)):B=!0})),B&&(M.unsubscribe(),M=null,te.subscribe(I))})}var tt=U(6699),yt=U(3572);function vt(v){return v<=0?()=>Ie.E:(0,Fe.e)((R,I)=>{let M=[];R.subscribe((0,Ye.x)(I,B=>{M.push(B),v<M.length&&M.shift()},()=>{for(const B of M)I.next(B);I.complete()},void 0,()=>{M=null}))})}var $n=U(3026),Gt=U(4716),or=U(9773),Hn=U(7537),Ln=U(6593);const Pt="primary",zn=Symbol("RouteTitle");class An{constructor(R){this.params=R||{}}has(R){return Object.prototype.hasOwnProperty.call(this.params,R)}get(R){if(this.has(R)){const I=this.params[R];return Array.isArray(I)?I[0]:I}return null}getAll(R){if(this.has(R)){const I=this.params[R];return Array.isArray(I)?I:[I]}return[]}get keys(){return Object.keys(this.params)}}function Ir(v){return new An(v)}function Vn(v,R,I){const M=I.path.split("/");if(M.length>v.length||"full"===I.pathMatch&&(R.hasChildren()||M.length<v.length))return null;const B={};for(let te=0;te<M.length;te++){const fe=M[te],qe=v[te];if(fe.startsWith(":"))B[fe.substring(1)]=qe;else if(fe!==qe.path)return null}return{consumed:v.slice(0,M.length),posParams:B}}function On(v,R){const I=v?Object.keys(v):void 0,M=R?Object.keys(R):void 0;if(!I||!M||I.length!=M.length)return!1;let B;for(let te=0;te<I.length;te++)if(B=I[te],!ti(v[B],R[B]))return!1;return!0}function ti(v,R){if(Array.isArray(v)&&Array.isArray(R)){if(v.length!==R.length)return!1;const I=[...v].sort(),M=[...R].sort();return I.every((B,te)=>M[te]===B)}return v===R}function Kt(v){return v.length>0?v[v.length-1]:null}function an(v){return function ye(v){return!!v&&(v instanceof Z.y||(0,q.m)(v.lift)&&(0,q.m)(v.subscribe))}(v)?v:(0,f.QGY)(v)?(0,ge.D)(Promise.resolve(v)):(0,we.of)(v)}const rn={exact:function Rn(v,R,I){if(!Un(v.segments,R.segments)||!Mi(v.segments,R.segments,I)||v.numberOfChildren!==R.numberOfChildren)return!1;for(const M in R.children)if(!v.children[M]||!Rn(v.children[M],R.children[M],I))return!1;return!0},subset:is},Kn={exact:function ii(v,R){return On(v,R)},subset:function Cr(v,R){return Object.keys(R).length<=Object.keys(v).length&&Object.keys(R).every(I=>ti(v[I],R[I]))},ignored:()=>!0};function Lr(v,R,I){return rn[I.paths](v.root,R.root,I.matrixParams)&&Kn[I.queryParams](v.queryParams,R.queryParams)&&!("exact"===I.fragment&&v.fragment!==R.fragment)}function is(v,R,I){return $t(v,R,R.segments,I)}function $t(v,R,I,M){if(v.segments.length>I.length){const B=v.segments.slice(0,I.length);return!(!Un(B,I)||R.hasChildren()||!Mi(B,I,M))}if(v.segments.length===I.length){if(!Un(v.segments,I)||!Mi(v.segments,I,M))return!1;for(const B in R.children)if(!v.children[B]||!is(v.children[B],R.children[B],M))return!1;return!0}{const B=I.slice(0,v.segments.length),te=I.slice(v.segments.length);return!!(Un(v.segments,B)&&Mi(v.segments,B,M)&&v.children[Pt])&&$t(v.children[Pt],R,te,M)}}function Mi(v,R,I){return R.every((M,B)=>Kn[I](v[B].parameters,M.parameters))}class Cn{constructor(R=new Wt([],{}),I={},M=null){this.root=R,this.queryParams=I,this.fragment=M}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ir(this.queryParams)),this._queryParamMap}toString(){return si.serialize(this)}}class Wt{constructor(R,I){this.segments=R,this.children=I,this.parent=null,Object.values(I).forEach(M=>M.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Sr(this)}}class Yn{constructor(R,I){this.path=R,this.parameters=I}get parameterMap(){return this._parameterMap||(this._parameterMap=Ir(this.parameters)),this._parameterMap}toString(){return k(this)}}function Un(v,R){return v.length===R.length&&v.every((I,M)=>I.path===R[M].path)}let Br=(()=>{class v{static#e=this.\u0275fac=function(M){return new(M||v)};static#t=this.\u0275prov=f.Yz7({token:v,factory:function(){return new Ni},providedIn:"root"})}return v})();class Ni{parse(R){const I=new vs(R);return new Cn(I.parseRootSegment(),I.parseQueryParams(),I.parseFragment())}serialize(R){const I=`/${fr(R.root,!0)}`,M=function Pe(v){const R=Object.keys(v).map(I=>{const M=v[I];return Array.isArray(M)?M.map(B=>`${rr(I)}=${rr(B)}`).join("&"):`${rr(I)}=${rr(M)}`}).filter(I=>!!I);return R.length?`?${R.join("&")}`:""}(R.queryParams);return`${I}${M}${"string"==typeof R.fragment?`#${function Ee(v){return encodeURI(v)}(R.fragment)}`:""}`}}const si=new Ni;function Sr(v){return v.segments.map(R=>k(R)).join("/")}function fr(v,R){if(!v.hasChildren())return Sr(v);if(R){const I=v.children[Pt]?fr(v.children[Pt],!1):"",M=[];return Object.entries(v.children).forEach(([B,te])=>{B!==Pt&&M.push(`${B}:${fr(te,!1)}`)}),M.length>0?`${I}(${M.join("//")})`:I}{const I=function Pn(v,R){let I=[];return Object.entries(v.children).forEach(([M,B])=>{M===Pt&&(I=I.concat(R(B,M)))}),Object.entries(v.children).forEach(([M,B])=>{M!==Pt&&(I=I.concat(R(B,M)))}),I}(v,(M,B)=>B===Pt?[fr(v.children[Pt],!1)]:[`${B}:${fr(M,!1)}`]);return 1===Object.keys(v.children).length&&null!=v.children[Pt]?`${Sr(v)}/${I[0]}`:`${Sr(v)}/(${I.join("//")})`}}function Mr(v){return encodeURIComponent(v).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function rr(v){return Mr(v).replace(/%3B/gi,";")}function ne(v){return Mr(v).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function z(v){return decodeURIComponent(v)}function F(v){return z(v.replace(/\+/g,"%20"))}function k(v){return`${ne(v.path)}${function oe(v){return Object.keys(v).map(R=>`;${ne(R)}=${ne(v[R])}`).join("")}(v.parameters)}`}const st=/^[^\/()?;#]+/;function _t(v){const R=v.match(st);return R?R[0]:""}const Ot=/^[^\/()?;=#]+/,qt=/^[^=?&#]+/,ln=/^[^&#]+/;class vs{constructor(R){this.url=R,this.remaining=R}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Wt([],{}):new Wt([],this.parseChildren())}parseQueryParams(){const R={};if(this.consumeOptional("?"))do{this.parseQueryParam(R)}while(this.consumeOptional("&"));return R}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const R=[];for(this.peekStartsWith("(")||R.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),R.push(this.parseSegment());let I={};this.peekStartsWith("/(")&&(this.capture("/"),I=this.parseParens(!0));let M={};return this.peekStartsWith("(")&&(M=this.parseParens(!1)),(R.length>0||Object.keys(I).length>0)&&(M[Pt]=new Wt(R,I)),M}parseSegment(){const R=_t(this.remaining);if(""===R&&this.peekStartsWith(";"))throw new f.vHH(4009,!1);return this.capture(R),new Yn(z(R),this.parseMatrixParams())}parseMatrixParams(){const R={};for(;this.consumeOptional(";");)this.parseParam(R);return R}parseParam(R){const I=function wt(v){const R=v.match(Ot);return R?R[0]:""}(this.remaining);if(!I)return;this.capture(I);let M="";if(this.consumeOptional("=")){const B=_t(this.remaining);B&&(M=B,this.capture(M))}R[z(I)]=z(M)}parseQueryParam(R){const I=function Gn(v){const R=v.match(qt);return R?R[0]:""}(this.remaining);if(!I)return;this.capture(I);let M="";if(this.consumeOptional("=")){const fe=function oi(v){const R=v.match(ln);return R?R[0]:""}(this.remaining);fe&&(M=fe,this.capture(M))}const B=F(I),te=F(M);if(R.hasOwnProperty(B)){let fe=R[B];Array.isArray(fe)||(fe=[fe],R[B]=fe),fe.push(te)}else R[B]=te}parseParens(R){const I={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const M=_t(this.remaining),B=this.remaining[M.length];if("/"!==B&&")"!==B&&";"!==B)throw new f.vHH(4010,!1);let te;M.indexOf(":")>-1?(te=M.slice(0,M.indexOf(":")),this.capture(te),this.capture(":")):R&&(te=Pt);const fe=this.parseChildren();I[te]=1===Object.keys(fe).length?fe[Pt]:new Wt([],fe),this.consumeOptional("//")}return I}peekStartsWith(R){return this.remaining.startsWith(R)}consumeOptional(R){return!!this.peekStartsWith(R)&&(this.remaining=this.remaining.substring(R.length),!0)}capture(R){if(!this.consumeOptional(R))throw new f.vHH(4011,!1)}}function as(v){return v.segments.length>0?new Wt([],{[Pt]:v}):v}function Ci(v){const R={};for(const M of Object.keys(v.children)){const te=Ci(v.children[M]);if(M===Pt&&0===te.segments.length&&te.hasChildren())for(const[fe,qe]of Object.entries(te.children))R[fe]=qe;else(te.segments.length>0||te.hasChildren())&&(R[M]=te)}return function Jr(v){if(1===v.numberOfChildren&&v.children[Pt]){const R=v.children[Pt];return new Wt(v.segments.concat(R.segments),R.children)}return v}(new Wt(v.segments,R))}function ar(v){return v instanceof Cn}function ke(v){let R;const B=as(function I(te){const fe={};for(const ze of te.children){const Ut=I(ze);fe[ze.outlet]=Ut}const qe=new Wt(te.url,fe);return te===v&&(R=qe),qe}(v.root));return R??B}function Oe(v,R,I,M){let B=v;for(;B.parent;)B=B.parent;if(0===R.length)return pn(B,B,B,I,M);const te=function xn(v){if("string"==typeof v[0]&&1===v.length&&"/"===v[0])return new gn(!0,0,v);let R=0,I=!1;const M=v.reduce((B,te,fe)=>{if("object"==typeof te&&null!=te){if(te.outlets){const qe={};return Object.entries(te.outlets).forEach(([ze,Ut])=>{qe[ze]="string"==typeof Ut?Ut.split("/"):Ut}),[...B,{outlets:qe}]}if(te.segmentPath)return[...B,te.segmentPath]}return"string"!=typeof te?[...B,te]:0===fe?(te.split("/").forEach((qe,ze)=>{0==ze&&"."===qe||(0==ze&&""===qe?I=!0:".."===qe?R++:""!=qe&&B.push(qe))}),B):[...B,te]},[]);return new gn(I,R,M)}(R);if(te.toRoot())return pn(B,B,new Wt([],{}),I,M);const fe=function ui(v,R,I){if(v.isAbsolute)return new pr(R,!0,0);if(!I)return new pr(R,!1,NaN);if(null===I.parent)return new pr(I,!0,0);const M=rt(v.commands[0])?0:1;return function Es(v,R,I){let M=v,B=R,te=I;for(;te>B;){if(te-=B,M=M.parent,!M)throw new f.vHH(4005,!1);B=M.segments.length}return new pr(M,!1,B-te)}(I,I.segments.length-1+M,v.numberOfDoubleDots)}(te,B,v),qe=fe.processChildren?us(fe.segmentGroup,fe.index,te.commands):Xn(fe.segmentGroup,fe.index,te.commands);return pn(B,fe.segmentGroup,qe,I,M)}function rt(v){return"object"==typeof v&&null!=v&&!v.outlets&&!v.segmentPath}function It(v){return"object"==typeof v&&null!=v&&v.outlets}function pn(v,R,I,M,B){let fe,te={};M&&Object.entries(M).forEach(([ze,Ut])=>{te[ze]=Array.isArray(Ut)?Ut.map(jn=>`${jn}`):`${Ut}`}),fe=v===R?I:Xt(v,R,I);const qe=as(Ci(fe));return new Cn(qe,te,B)}function Xt(v,R,I){const M={};return Object.entries(v.children).forEach(([B,te])=>{M[B]=te===R?I:Xt(te,R,I)}),new Wt(v.segments,M)}class gn{constructor(R,I,M){if(this.isAbsolute=R,this.numberOfDoubleDots=I,this.commands=M,R&&M.length>0&&rt(M[0]))throw new f.vHH(4003,!1);const B=M.find(It);if(B&&B!==Kt(M))throw new f.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class pr{constructor(R,I,M){this.segmentGroup=R,this.processChildren=I,this.index=M}}function Xn(v,R,I){if(v||(v=new Wt([],{})),0===v.segments.length&&v.hasChildren())return us(v,R,I);const M=function ki(v,R,I){let M=0,B=R;const te={match:!1,pathIndex:0,commandIndex:0};for(;B<v.segments.length;){if(M>=I.length)return te;const fe=v.segments[B],qe=I[M];if(It(qe))break;const ze=`${qe}`,Ut=M<I.length-1?I[M+1]:null;if(B>0&&void 0===ze)break;if(ze&&Ut&&"object"==typeof Ut&&void 0===Ut.outlets){if(!_o(ze,Ut,fe))return te;M+=2}else{if(!_o(ze,{},fe))return te;M++}B++}return{match:!0,pathIndex:B,commandIndex:M}}(v,R,I),B=I.slice(M.commandIndex);if(M.match&&M.pathIndex<v.segments.length){const te=new Wt(v.segments.slice(0,M.pathIndex),{});return te.children[Pt]=new Wt(v.segments.slice(M.pathIndex),v.children),us(te,0,B)}return M.match&&0===B.length?new Wt(v.segments,{}):M.match&&!v.hasChildren()?ls(v,R,I):M.match?us(v,0,B):ls(v,R,I)}function us(v,R,I){if(0===I.length)return new Wt(v.segments,{});{const M=function Po(v){return It(v[0])?v[0].outlets:{[Pt]:v}}(I),B={};if(Object.keys(M).some(te=>te!==Pt)&&v.children[Pt]&&1===v.numberOfChildren&&0===v.children[Pt].segments.length){const te=us(v.children[Pt],R,I);return new Wt(v.segments,te.children)}return Object.entries(M).forEach(([te,fe])=>{"string"==typeof fe&&(fe=[fe]),null!==fe&&(B[te]=Xn(v.children[te],R,fe))}),Object.entries(v.children).forEach(([te,fe])=>{void 0===M[te]&&(B[te]=fe)}),new Wt(v.segments,B)}}function ls(v,R,I){const M=v.segments.slice(0,R);let B=0;for(;B<I.length;){const te=I[B];if(It(te)){const ze=Zs(te.outlets);return new Wt(M,ze)}if(0===B&&rt(I[0])){M.push(new Yn(v.segments[R].path,Qs(I[0]))),B++;continue}const fe=It(te)?te.outlets[Pt]:`${te}`,qe=B<I.length-1?I[B+1]:null;fe&&qe&&rt(qe)?(M.push(new Yn(fe,Qs(qe))),B+=2):(M.push(new Yn(fe,{})),B++)}return new Wt(M,{})}function Zs(v){const R={};return Object.entries(v).forEach(([I,M])=>{"string"==typeof M&&(M=[M]),null!==M&&(R[I]=ls(new Wt([],{}),0,M))}),R}function Qs(v){const R={};return Object.entries(v).forEach(([I,M])=>R[I]=`${M}`),R}function _o(v,R,I){return v==I.path&&On(R,I.parameters)}const qr="imperative";class ur{constructor(R,I){this.id=R,this.url=I}}class Us extends ur{constructor(R,I,M="imperative",B=null){super(R,I),this.type=0,this.navigationTrigger=M,this.restoredState=B}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Ys extends ur{constructor(R,I,M){super(R,I),this.urlAfterRedirects=M,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class yi extends ur{constructor(R,I,M,B){super(R,I),this.reason=M,this.code=B,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Js extends ur{constructor(R,I,M,B){super(R,I),this.reason=M,this.code=B,this.type=16}}class Rs extends ur{constructor(R,I,M,B){super(R,I),this.error=M,this.target=B,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Ps extends ur{constructor(R,I,M,B){super(R,I),this.urlAfterRedirects=M,this.state=B,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Fi extends ur{constructor(R,I,M,B){super(R,I),this.urlAfterRedirects=M,this.state=B,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Is extends ur{constructor(R,I,M,B,te){super(R,I),this.urlAfterRedirects=M,this.state=B,this.shouldActivate=te,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Jo extends ur{constructor(R,I,M,B){super(R,I),this.urlAfterRedirects=M,this.state=B,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class yo extends ur{constructor(R,I,M,B){super(R,I),this.urlAfterRedirects=M,this.state=B,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ya{constructor(R){this.route=R,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Bs{constructor(R){this.route=R,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class ws{constructor(R){this.snapshot=R,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ms{constructor(R){this.snapshot=R,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class vo{constructor(R){this.snapshot=R,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Mo{constructor(R){this.snapshot=R,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ns{constructor(R,I,M){this.routerEvent=R,this.position=I,this.anchor=M,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class js{}class Wn{constructor(R){this.url=R}}class Nr{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new vi,this.attachRef=null}}let vi=(()=>{class v{constructor(){this.contexts=new Map}onChildOutletCreated(I,M){const B=this.getOrCreateContext(I);B.outlet=M,this.contexts.set(I,B)}onChildOutletDestroyed(I){const M=this.getContext(I);M&&(M.outlet=null,M.attachRef=null)}onOutletDeactivated(){const I=this.contexts;return this.contexts=new Map,I}onOutletReAttached(I){this.contexts=I}getOrCreateContext(I){let M=this.getContext(I);return M||(M=new Nr,this.contexts.set(I,M)),M}getContext(I){return this.contexts.get(I)||null}static#e=this.\u0275fac=function(M){return new(M||v)};static#t=this.\u0275prov=f.Yz7({token:v,factory:v.\u0275fac,providedIn:"root"})}return v})();class li{constructor(R){this._root=R}get root(){return this._root.value}parent(R){const I=this.pathFromRoot(R);return I.length>1?I[I.length-2]:null}children(R){const I=lo(R,this._root);return I?I.children.map(M=>M.value):[]}firstChild(R){const I=lo(R,this._root);return I&&I.children.length>0?I.children[0].value:null}siblings(R){const I=Xs(R,this._root);return I.length<2?[]:I[I.length-2].children.map(B=>B.value).filter(B=>B!==R)}pathFromRoot(R){return Xs(R,this._root).map(I=>I.value)}}function lo(v,R){if(v===R.value)return R;for(const I of R.children){const M=lo(v,I);if(M)return M}return null}function Xs(v,R){if(v===R.value)return[R];for(const I of R.children){const M=Xs(v,I);if(M.length)return M.unshift(R),M}return[]}class Bn{constructor(R,I){this.value=R,this.children=I}toString(){return`TreeNode(${this.value})`}}function cs(v){const R={};return v&&v.children.forEach(I=>R[I.value.outlet]=I),R}class ds extends li{constructor(R,I){super(R),this.snapshot=I,Zi(this,R)}toString(){return this.snapshot.toString()}}function vr(v,R){const I=function xt(v,R){const fe=new Ts([],{},{},"",{},Pt,R,null,{});return new pi("",new Bn(fe,[]))}(0,R),M=new De.X([new Yn("",{})]),B=new De.X({}),te=new De.X({}),fe=new De.X({}),qe=new De.X(""),ze=new dn(M,B,fe,qe,te,Pt,R,I.root);return ze.snapshot=I.root,new ds(new Bn(ze,[]),I)}class dn{constructor(R,I,M,B,te,fe,qe,ze){this.urlSubject=R,this.paramsSubject=I,this.queryParamsSubject=M,this.fragmentSubject=B,this.dataSubject=te,this.outlet=fe,this.component=qe,this._futureSnapshot=ze,this.title=this.dataSubject?.pipe((0,vn.U)(Ut=>Ut[zn]))??(0,we.of)(void 0),this.url=R,this.params=I,this.queryParams=M,this.fragment=B,this.data=te}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,vn.U)(R=>Ir(R)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,vn.U)(R=>Ir(R)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Er(v,R="emptyOnly"){const I=v.pathFromRoot;let M=0;if("always"!==R)for(M=I.length-1;M>=1;){const B=I[M],te=I[M-1];if(B.routeConfig&&""===B.routeConfig.path)M--;else{if(te.component)break;M--}}return function Gi(v){return v.reduce((R,I)=>({params:{...R.params,...I.params},data:{...R.data,...I.data},resolve:{...I.data,...R.resolve,...I.routeConfig?.data,...I._resolvedData}}),{params:{},data:{},resolve:{}})}(I.slice(M))}class Ts{get title(){return this.data?.[zn]}constructor(R,I,M,B,te,fe,qe,ze,Ut){this.url=R,this.params=I,this.queryParams=M,this.fragment=B,this.data=te,this.outlet=fe,this.component=qe,this.routeConfig=ze,this._resolve=Ut}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Ir(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ir(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(M=>M.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class pi extends li{constructor(R,I){super(I),this.url=R,Zi(this,I)}toString(){return Jn(this._root)}}function Zi(v,R){R.value._routerState=v,R.children.forEach(I=>Zi(v,I))}function Jn(v){const R=v.children.length>0?` { ${v.children.map(Jn).join(", ")} } `:"";return`${v.value}${R}`}function gi(v){if(v.snapshot){const R=v.snapshot,I=v._futureSnapshot;v.snapshot=I,On(R.queryParams,I.queryParams)||v.queryParamsSubject.next(I.queryParams),R.fragment!==I.fragment&&v.fragmentSubject.next(I.fragment),On(R.params,I.params)||v.paramsSubject.next(I.params),function Zn(v,R){if(v.length!==R.length)return!1;for(let I=0;I<v.length;++I)if(!On(v[I],R[I]))return!1;return!0}(R.url,I.url)||v.urlSubject.next(I.url),On(R.data,I.data)||v.dataSubject.next(I.data)}else v.snapshot=v._futureSnapshot,v.dataSubject.next(v._futureSnapshot.data)}function ss(v,R){const I=On(v.params,R.params)&&function br(v,R){return Un(v,R)&&v.every((I,M)=>On(I.parameters,R[M].parameters))}(v.url,R.url);return I&&!(!v.parent!=!R.parent)&&(!v.parent||ss(v.parent,R.parent))}let fn=(()=>{class v{constructor(){this.activated=null,this._activatedRoute=null,this.name=Pt,this.activateEvents=new f.vpe,this.deactivateEvents=new f.vpe,this.attachEvents=new f.vpe,this.detachEvents=new f.vpe,this.parentContexts=(0,f.f3M)(vi),this.location=(0,f.f3M)(f.s_b),this.changeDetector=(0,f.f3M)(f.sBO),this.environmentInjector=(0,f.f3M)(f.lqb),this.inputBinder=(0,f.f3M)(Os,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(I){if(I.name){const{firstChange:M,previousValue:B}=I.name;if(M)return;this.isTrackedInParentContexts(B)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(B)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(I){return this.parentContexts.getContext(I)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const I=this.parentContexts.getContext(this.name);I?.route&&(I.attachRef?this.attach(I.attachRef,I.route):this.activateWith(I.route,I.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new f.vHH(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new f.vHH(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new f.vHH(4012,!1);this.location.detach();const I=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(I.instance),I}attach(I,M){this.activated=I,this._activatedRoute=M,this.location.insert(I.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(I.instance)}deactivate(){if(this.activated){const I=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(I)}}activateWith(I,M){if(this.isActivated)throw new f.vHH(4013,!1);this._activatedRoute=I;const B=this.location,fe=I.snapshot.component,qe=this.parentContexts.getOrCreateContext(this.name).children,ze=new bi(I,qe,B.injector);this.activated=B.createComponent(fe,{index:B.length,injector:ze,environmentInjector:M??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(M){return new(M||v)};static#t=this.\u0275dir=f.lG2({type:v,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[f.TTD]})}return v})();class bi{constructor(R,I,M){this.route=R,this.childContexts=I,this.parent=M}get(R,I){return R===dn?this.route:R===vi?this.childContexts:this.parent.get(R,I)}}const Os=new f.OlP("");let Wi=(()=>{class v{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(I){this.unsubscribeFromRouteData(I),this.subscribeToRouteData(I)}unsubscribeFromRouteData(I){this.outletDataSubscriptions.get(I)?.unsubscribe(),this.outletDataSubscriptions.delete(I)}subscribeToRouteData(I){const{activatedRoute:M}=I,B=at([M.queryParams,M.params,M.data]).pipe((0,yr.w)(([te,fe,qe],ze)=>(qe={...te,...fe,...qe},0===ze?(0,we.of)(qe):Promise.resolve(qe)))).subscribe(te=>{if(!I.isActivated||!I.activatedComponentRef||I.activatedRoute!==M||null===M.component)return void this.unsubscribeFromRouteData(I);const fe=(0,f.qFp)(M.component);if(fe)for(const{templateName:qe}of fe.inputs)I.activatedComponentRef.setInput(qe,te[qe]);else this.unsubscribeFromRouteData(I)});this.outletDataSubscriptions.set(I,B)}static#e=this.\u0275fac=function(M){return new(M||v)};static#t=this.\u0275prov=f.Yz7({token:v,factory:v.\u0275fac})}return v})();function wr(v,R,I){if(I&&v.shouldReuseRoute(R.value,I.value.snapshot)){const M=I.value;M._futureSnapshot=R.value;const B=function gr(v,R,I){return R.children.map(M=>{for(const B of I.children)if(v.shouldReuseRoute(M.value,B.value.snapshot))return wr(v,M,B);return wr(v,M)})}(v,R,I);return new Bn(M,B)}{if(v.shouldAttach(R.value)){const te=v.retrieve(R.value);if(null!==te){const fe=te.route;return fe.value._futureSnapshot=R.value,fe.children=R.children.map(qe=>wr(v,qe)),fe}}const M=function Or(v){return new dn(new De.X(v.url),new De.X(v.params),new De.X(v.queryParams),new De.X(v.fragment),new De.X(v.data),v.outlet,v.component,v)}(R.value),B=R.children.map(te=>wr(v,te));return new Bn(M,B)}}const Ei="ngNavigationCancelingError";function No(v,R){const{redirectTo:I,navigationBehaviorOptions:M}=ar(R)?{redirectTo:R,navigationBehaviorOptions:void 0}:R,B=hs(!1,0,R);return B.url=I,B.navigationBehaviorOptions=M,B}function hs(v,R,I){const M=new Error("NavigationCancelingError: "+(v||""));return M[Ei]=!0,M.cancellationCode=R,I&&(M.url=I),M}function Ii(v){return v&&v[Ei]}let $s=(()=>{class v{static#e=this.\u0275fac=function(M){return new(M||v)};static#t=this.\u0275cmp=f.Xpm({type:v,selectors:[["ng-component"]],standalone:!0,features:[f.jDz],decls:1,vars:0,template:function(M,B){1&M&&f._UZ(0,"router-outlet")},dependencies:[fn],encapsulation:2})}return v})();function Eo(v){const R=v.children&&v.children.map(Eo),I=R?{...v,children:R}:{...v};return!I.component&&!I.loadComponent&&(R||I.loadChildren)&&I.outlet&&I.outlet!==Pt&&(I.component=$s),I}function _n(v){return v.outlet||Pt}function ps(v){if(!v)return null;if(v.routeConfig?._injector)return v.routeConfig._injector;for(let R=v.parent;R;R=R.parent){const I=R.routeConfig;if(I?._loadedInjector)return I._loadedInjector;if(I?._injector)return I._injector}return null}class ji{constructor(R,I,M,B,te){this.routeReuseStrategy=R,this.futureState=I,this.currState=M,this.forwardEvent=B,this.inputBindingEnabled=te}activate(R){const I=this.futureState._root,M=this.currState?this.currState._root:null;this.deactivateChildRoutes(I,M,R),gi(this.futureState.root),this.activateChildRoutes(I,M,R)}deactivateChildRoutes(R,I,M){const B=cs(I);R.children.forEach(te=>{const fe=te.value.outlet;this.deactivateRoutes(te,B[fe],M),delete B[fe]}),Object.values(B).forEach(te=>{this.deactivateRouteAndItsChildren(te,M)})}deactivateRoutes(R,I,M){const B=R.value,te=I?I.value:null;if(B===te)if(B.component){const fe=M.getContext(B.outlet);fe&&this.deactivateChildRoutes(R,I,fe.children)}else this.deactivateChildRoutes(R,I,M);else te&&this.deactivateRouteAndItsChildren(I,M)}deactivateRouteAndItsChildren(R,I){R.value.component&&this.routeReuseStrategy.shouldDetach(R.value.snapshot)?this.detachAndStoreRouteSubtree(R,I):this.deactivateRouteAndOutlet(R,I)}detachAndStoreRouteSubtree(R,I){const M=I.getContext(R.value.outlet),B=M&&R.value.component?M.children:I,te=cs(R);for(const fe of Object.keys(te))this.deactivateRouteAndItsChildren(te[fe],B);if(M&&M.outlet){const fe=M.outlet.detach(),qe=M.children.onOutletDeactivated();this.routeReuseStrategy.store(R.value.snapshot,{componentRef:fe,route:R,contexts:qe})}}deactivateRouteAndOutlet(R,I){const M=I.getContext(R.value.outlet),B=M&&R.value.component?M.children:I,te=cs(R);for(const fe of Object.keys(te))this.deactivateRouteAndItsChildren(te[fe],B);M&&(M.outlet&&(M.outlet.deactivate(),M.children.onOutletDeactivated()),M.attachRef=null,M.route=null)}activateChildRoutes(R,I,M){const B=cs(I);R.children.forEach(te=>{this.activateRoutes(te,B[te.value.outlet],M),this.forwardEvent(new Mo(te.value.snapshot))}),R.children.length&&this.forwardEvent(new Ms(R.value.snapshot))}activateRoutes(R,I,M){const B=R.value,te=I?I.value:null;if(gi(B),B===te)if(B.component){const fe=M.getOrCreateContext(B.outlet);this.activateChildRoutes(R,I,fe.children)}else this.activateChildRoutes(R,I,M);else if(B.component){const fe=M.getOrCreateContext(B.outlet);if(this.routeReuseStrategy.shouldAttach(B.snapshot)){const qe=this.routeReuseStrategy.retrieve(B.snapshot);this.routeReuseStrategy.store(B.snapshot,null),fe.children.onOutletReAttached(qe.contexts),fe.attachRef=qe.componentRef,fe.route=qe.route.value,fe.outlet&&fe.outlet.attach(qe.componentRef,qe.route.value),gi(qe.route.value),this.activateChildRoutes(R,null,fe.children)}else{const qe=ps(B.snapshot);fe.attachRef=null,fe.route=B,fe.injector=qe,fe.outlet&&fe.outlet.activateWith(B,fe.injector),this.activateChildRoutes(R,null,fe.children)}}else this.activateChildRoutes(R,null,M)}}class co{constructor(R){this.path=R,this.route=this.path[this.path.length-1]}}class Ds{constructor(R,I){this.component=R,this.route=I}}function Zo(v,R,I){const M=v._root;return Si(M,R?R._root:null,I,[M.value])}function $i(v,R){const I=Symbol(),M=R.get(v,I);return M===I?"function"!=typeof v||(0,f.Z0I)(v)?R.get(v):v:M}function Si(v,R,I,M,B={canDeactivateChecks:[],canActivateChecks:[]}){const te=cs(R);return v.children.forEach(fe=>{(function $a(v,R,I,M,B={canDeactivateChecks:[],canActivateChecks:[]}){const te=v.value,fe=R?R.value:null,qe=I?I.getContext(v.value.outlet):null;if(fe&&te.routeConfig===fe.routeConfig){const ze=function iu(v,R,I){if("function"==typeof I)return I(v,R);switch(I){case"pathParamsChange":return!Un(v.url,R.url);case"pathParamsOrQueryParamsChange":return!Un(v.url,R.url)||!On(v.queryParams,R.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!ss(v,R)||!On(v.queryParams,R.queryParams);default:return!ss(v,R)}}(fe,te,te.routeConfig.runGuardsAndResolvers);ze?B.canActivateChecks.push(new co(M)):(te.data=fe.data,te._resolvedData=fe._resolvedData),Si(v,R,te.component?qe?qe.children:null:I,M,B),ze&&qe&&qe.outlet&&qe.outlet.isActivated&&B.canDeactivateChecks.push(new Ds(qe.outlet.component,fe))}else fe&&ko(R,qe,B),B.canActivateChecks.push(new co(M)),Si(v,null,te.component?qe?qe.children:null:I,M,B)})(fe,te[fe.value.outlet],I,M.concat([fe.value]),B),delete te[fe.value.outlet]}),Object.entries(te).forEach(([fe,qe])=>ko(qe,I.getContext(fe),B)),B}function ko(v,R,I){const M=cs(v),B=v.value;Object.entries(M).forEach(([te,fe])=>{ko(fe,B.component?R?R.children.getContext(te):null:R,I)}),I.canDeactivateChecks.push(new Ds(B.component&&R&&R.outlet&&R.outlet.isActivated?R.outlet.component:null,B))}function j(v){return"function"==typeof v}function ht(v){return v instanceof nt.K||"EmptyError"===v?.name}const un=Symbol("INITIAL_VALUE");function ir(){return(0,yr.w)(v=>at(v.map(R=>R.pipe((0,kt.q)(1),(0,Ft.O)(un)))).pipe((0,vn.U)(R=>{for(const I of R)if(!0!==I){if(I===un)return un;if(!1===I||I instanceof Cn)return I}return!0}),(0,Dt.h)(R=>R!==un),(0,kt.q)(1)))}function to(v){return(0,Ue.z)((0,Le.b)(R=>{if(ar(R))throw No(0,R)}),(0,vn.U)(R=>!0===R))}class di{constructor(R){this.segmentGroup=R||null}}class no{constructor(R){this.urlTree=R}}function Cs(v){return Ae(new di(v))}function Pi(v){return Ae(new no(v))}class Ia{constructor(R,I){this.urlSerializer=R,this.urlTree=I}noMatchError(R){return new f.vHH(4002,!1)}lineralizeSegments(R,I){let M=[],B=I.root;for(;;){if(M=M.concat(B.segments),0===B.numberOfChildren)return(0,we.of)(M);if(B.numberOfChildren>1||!B.children[Pt])return Ae(new f.vHH(4e3,!1));B=B.children[Pt]}}applyRedirectCommands(R,I,M){return this.applyRedirectCreateUrlTree(I,this.urlSerializer.parse(I),R,M)}applyRedirectCreateUrlTree(R,I,M,B){const te=this.createSegmentGroup(R,I.root,M,B);return new Cn(te,this.createQueryParams(I.queryParams,this.urlTree.queryParams),I.fragment)}createQueryParams(R,I){const M={};return Object.entries(R).forEach(([B,te])=>{if("string"==typeof te&&te.startsWith(":")){const qe=te.substring(1);M[B]=I[qe]}else M[B]=te}),M}createSegmentGroup(R,I,M,B){const te=this.createSegments(R,I.segments,M,B);let fe={};return Object.entries(I.children).forEach(([qe,ze])=>{fe[qe]=this.createSegmentGroup(R,ze,M,B)}),new Wt(te,fe)}createSegments(R,I,M,B){return I.map(te=>te.path.startsWith(":")?this.findPosParam(R,te,B):this.findOrReturn(te,M))}findPosParam(R,I,M){const B=M[I.path.substring(1)];if(!B)throw new f.vHH(4001,!1);return B}findOrReturn(R,I){let M=0;for(const B of I){if(B.path===R.path)return I.splice(M),B;M++}return R}}const mr={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Fo(v,R,I,M,B){const te=Xo(v,R,I);return te.matched?(M=function Qn(v,R){return v.providers&&!v._injector&&(v._injector=(0,f.MMx)(v.providers,R,`Route: ${v.path}`)),v._injector??R}(R,M),function gs(v,R,I,M){const B=R.canMatch;if(!B||0===B.length)return(0,we.of)(!0);const te=B.map(fe=>{const qe=$i(fe,v);return an(function K(v){return v&&j(v.canMatch)}(qe)?qe.canMatch(R,I):v.runInContext(()=>qe(R,I)))});return(0,we.of)(te).pipe(ir(),to())}(M,R,I).pipe((0,vn.U)(fe=>!0===fe?te:{...mr}))):(0,we.of)(te)}function Xo(v,R,I){if(""===R.path)return"full"===R.pathMatch&&(v.hasChildren()||I.length>0)?{...mr}:{matched:!0,consumedSegments:[],remainingSegments:I,parameters:{},positionalParamSegments:{}};const B=(R.matcher||Vn)(I,v,R);if(!B)return{...mr};const te={};Object.entries(B.posParams??{}).forEach(([qe,ze])=>{te[qe]=ze.path});const fe=B.consumed.length>0?{...te,...B.consumed[B.consumed.length-1].parameters}:te;return{matched:!0,consumedSegments:B.consumed,remainingSegments:I.slice(B.consumed.length),parameters:fe,positionalParamSegments:B.posParams??{}}}function xs(v,R,I,M){return I.length>0&&function da(v,R,I){return I.some(M=>ta(v,R,M)&&_n(M)!==Pt)}(v,I,M)?{segmentGroup:new Wt(R,Ra(M,new Wt(I,v.children))),slicedSegments:[]}:0===I.length&&function Iu(v,R,I){return I.some(M=>ta(v,R,M))}(v,I,M)?{segmentGroup:new Wt(v.segments,ea(v,0,I,M,v.children)),slicedSegments:I}:{segmentGroup:new Wt(v.segments,v.children),slicedSegments:I}}function ea(v,R,I,M,B){const te={};for(const fe of M)if(ta(v,I,fe)&&!B[_n(fe)]){const qe=new Wt([],{});te[_n(fe)]=qe}return{...B,...te}}function Ra(v,R){const I={};I[Pt]=R;for(const M of v)if(""===M.path&&_n(M)!==Pt){const B=new Wt([],{});I[_n(M)]=B}return I}function ta(v,R,I){return(!(v.hasChildren()||R.length>0)||"full"!==I.pathMatch)&&""===I.path}class Ha{constructor(R,I,M,B,te,fe,qe){this.injector=R,this.configLoader=I,this.rootComponentType=M,this.config=B,this.urlTree=te,this.paramsInheritanceStrategy=fe,this.urlSerializer=qe,this.allowRedirects=!0,this.applyRedirects=new Ia(this.urlSerializer,this.urlTree)}noMatchError(R){return new f.vHH(4002,!1)}recognize(){const R=xs(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,R,Pt).pipe(He(I=>{if(I instanceof no)return this.allowRedirects=!1,this.urlTree=I.urlTree,this.match(I.urlTree);throw I instanceof di?this.noMatchError(I):I}),(0,vn.U)(I=>{const M=new Ts([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Pt,this.rootComponentType,null,{}),B=new Bn(M,I),te=new pi("",B),fe=function ai(v,R,I=null,M=null){return Oe(ke(v),R,I,M)}(M,[],this.urlTree.queryParams,this.urlTree.fragment);return fe.queryParams=this.urlTree.queryParams,te.url=this.urlSerializer.serialize(fe),this.inheritParamsAndData(te._root),{state:te,tree:fe}}))}match(R){return this.processSegmentGroup(this.injector,this.config,R.root,Pt).pipe(He(M=>{throw M instanceof di?this.noMatchError(M):M}))}inheritParamsAndData(R){const I=R.value,M=Er(I,this.paramsInheritanceStrategy);I.params=Object.freeze(M.params),I.data=Object.freeze(M.data),R.children.forEach(B=>this.inheritParamsAndData(B))}processSegmentGroup(R,I,M,B){return 0===M.segments.length&&M.hasChildren()?this.processChildren(R,I,M):this.processSegment(R,I,M,M.segments,B,!0)}processChildren(R,I,M){const B=[];for(const te of Object.keys(M.children))"primary"===te?B.unshift(te):B.push(te);return(0,ge.D)(B).pipe((0,$e.b)(te=>{const fe=M.children[te],qe=function Bi(v,R){const I=v.filter(M=>_n(M)===R);return I.push(...v.filter(M=>_n(M)!==R)),I}(I,te);return this.processSegmentGroup(R,qe,fe,te)}),(0,tt.R)((te,fe)=>(te.push(...fe),te)),(0,yt.d)(null),function jt(v,R){const I=arguments.length>=2;return M=>M.pipe(v?(0,Dt.h)((B,te)=>v(B,te,M)):Ne.y,vt(1),I?(0,yt.d)(R):(0,$n.T)(()=>new nt.K))}(),(0,Te.z)(te=>{if(null===te)return Cs(M);const fe=ha(te);return function na(v){v.sort((R,I)=>R.value.outlet===Pt?-1:I.value.outlet===Pt?1:R.value.outlet.localeCompare(I.value.outlet))}(fe),(0,we.of)(fe)}))}processSegment(R,I,M,B,te,fe){return(0,ge.D)(I).pipe((0,$e.b)(qe=>this.processSegmentAgainstRoute(qe._injector??R,I,qe,M,B,te,fe).pipe(He(ze=>{if(ze instanceof di)return(0,we.of)(null);throw ze}))),(0,Re.P)(qe=>!!qe),He(qe=>{if(ht(qe))return function ho(v,R,I){return 0===R.length&&!v.children[I]}(M,B,te)?(0,we.of)([]):Cs(M);throw qe}))}processSegmentAgainstRoute(R,I,M,B,te,fe,qe){return function ks(v,R,I,M){return!!(_n(v)===M||M!==Pt&&ta(R,I,v))&&("**"===v.path||Xo(R,v,I).matched)}(M,B,te,fe)?void 0===M.redirectTo?this.matchSegmentAgainstRoute(R,B,M,te,fe,qe):qe&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(R,B,I,M,te,fe):Cs(B):Cs(B)}expandSegmentAgainstRouteUsingRedirect(R,I,M,B,te,fe){return"**"===B.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(R,M,B,fe):this.expandRegularSegmentAgainstRouteUsingRedirect(R,I,M,B,te,fe)}expandWildCardWithParamsAgainstRouteUsingRedirect(R,I,M,B){const te=this.applyRedirects.applyRedirectCommands([],M.redirectTo,{});return M.redirectTo.startsWith("/")?Pi(te):this.applyRedirects.lineralizeSegments(M,te).pipe((0,Te.z)(fe=>{const qe=new Wt(fe,{});return this.processSegment(R,I,qe,fe,B,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(R,I,M,B,te,fe){const{matched:qe,consumedSegments:ze,remainingSegments:Ut,positionalParamSegments:jn}=Xo(I,B,te);if(!qe)return Cs(I);const Di=this.applyRedirects.applyRedirectCommands(ze,B.redirectTo,jn);return B.redirectTo.startsWith("/")?Pi(Di):this.applyRedirects.lineralizeSegments(B,Di).pipe((0,Te.z)(Mn=>this.processSegment(R,M,I,Mn.concat(Ut),fe,!1)))}matchSegmentAgainstRoute(R,I,M,B,te,fe){let qe;if("**"===M.path){const ze=B.length>0?Kt(B).parameters:{},Ut=new Ts(B,ze,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,ro(M),_n(M),M.component??M._loadedComponent??null,M,ra(M));qe=(0,we.of)({snapshot:Ut,consumedSegments:[],remainingSegments:[]}),I.children={}}else qe=Fo(I,M,B,R).pipe((0,vn.U)(({matched:ze,consumedSegments:Ut,remainingSegments:jn,parameters:Di})=>ze?{snapshot:new Ts(Ut,Di,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,ro(M),_n(M),M.component??M._loadedComponent??null,M,ra(M)),consumedSegments:Ut,remainingSegments:jn}:null));return qe.pipe((0,yr.w)(ze=>null===ze?Cs(I):this.getChildConfig(R=M._injector??R,M,B).pipe((0,yr.w)(({routes:Ut})=>{const jn=M._loadedInjector??R,{snapshot:Di,consumedSegments:Mn,remainingSegments:Ss}=ze,{segmentGroup:ri,slicedSegments:Ga}=xs(I,Mn,Ss,Ut);if(0===Ga.length&&ri.hasChildren())return this.processChildren(jn,Ut,ri).pipe((0,vn.U)(Vo=>null===Vo?null:[new Bn(Di,Vo)]));if(0===Ut.length&&0===Ga.length)return(0,we.of)([new Bn(Di,[])]);const Tu=_n(M)===te;return this.processSegment(jn,Ut,ri,Ga,Tu?Pt:te,!0).pipe((0,vn.U)(Vo=>[new Bn(Di,Vo)]))}))))}getChildConfig(R,I,M){return I.children?(0,we.of)({routes:I.children,injector:R}):I.loadChildren?void 0!==I._loadedRoutes?(0,we.of)({routes:I._loadedRoutes,injector:I._loadedInjector}):function Ar(v,R,I,M){const B=R.canLoad;if(void 0===B||0===B.length)return(0,we.of)(!0);const te=B.map(fe=>{const qe=$i(fe,v);return an(function ae(v){return v&&j(v.canLoad)}(qe)?qe.canLoad(R,I):v.runInContext(()=>qe(R,I)))});return(0,we.of)(te).pipe(ir(),to())}(R,I,M).pipe((0,Te.z)(B=>B?this.configLoader.loadChildren(R,I).pipe((0,Le.b)(te=>{I._loadedRoutes=te.routes,I._loadedInjector=te.injector})):function Hs(v){return Ae(hs(!1,3))}())):(0,we.of)({routes:[],injector:R})}}function Pa(v){const R=v.value.routeConfig;return R&&""===R.path}function ha(v){const R=[],I=new Set;for(const M of v){if(!Pa(M)){R.push(M);continue}const B=R.find(te=>M.value.routeConfig===te.value.routeConfig);void 0!==B?(B.children.push(...M.children),I.add(B)):R.push(M)}for(const M of I){const B=ha(M.children);R.push(new Bn(M.value,B))}return R.filter(M=>!I.has(M))}function ro(v){return v.data||{}}function ra(v){return v.resolve||{}}function ut(v){return"string"==typeof v.title||null===v.title}function Yt(v){return(0,yr.w)(R=>{const I=v(R);return I?(0,ge.D)(I).pipe((0,vn.U)(()=>R)):(0,we.of)(R)})}const Ur=new f.OlP("ROUTES");let _r=(()=>{class v{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,f.f3M)(f.Sil)}loadComponent(I){if(this.componentLoaders.get(I))return this.componentLoaders.get(I);if(I._loadedComponent)return(0,we.of)(I._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(I);const M=an(I.loadComponent()).pipe((0,vn.U)(ei),(0,Le.b)(te=>{this.onLoadEndListener&&this.onLoadEndListener(I),I._loadedComponent=te}),(0,Gt.x)(()=>{this.componentLoaders.delete(I)})),B=new Tt(M,()=>new zt.x).pipe(xe());return this.componentLoaders.set(I,B),B}loadChildren(I,M){if(this.childrenLoaders.get(M))return this.childrenLoaders.get(M);if(M._loadedRoutes)return(0,we.of)({routes:M._loadedRoutes,injector:M._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(M);const te=function $r(v,R,I,M){return an(v.loadChildren()).pipe((0,vn.U)(ei),(0,Te.z)(B=>B instanceof f.YKP||Array.isArray(B)?(0,we.of)(B):(0,ge.D)(R.compileModuleAsync(B))),(0,vn.U)(B=>{M&&M(v);let te,fe,qe=!1;return Array.isArray(B)?(fe=B,!0):(te=B.create(I).injector,fe=te.get(Ur,[],{optional:!0,self:!0}).flat()),{routes:fe.map(Eo),injector:te}}))}(M,this.compiler,I,this.onLoadEndListener).pipe((0,Gt.x)(()=>{this.childrenLoaders.delete(M)})),fe=new Tt(te,()=>new zt.x).pipe(xe());return this.childrenLoaders.set(M,fe),fe}static#e=this.\u0275fac=function(M){return new(M||v)};static#t=this.\u0275prov=f.Yz7({token:v,factory:v.\u0275fac,providedIn:"root"})}return v})();function ei(v){return function hn(v){return v&&"object"==typeof v&&"default"in v}(v)?v.default:v}let tr=(()=>{class v{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new zt.x,this.transitionAbortSubject=new zt.x,this.configLoader=(0,f.f3M)(_r),this.environmentInjector=(0,f.f3M)(f.lqb),this.urlSerializer=(0,f.f3M)(Br),this.rootContexts=(0,f.f3M)(vi),this.inputBindingEnabled=null!==(0,f.f3M)(Os,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>(0,we.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=B=>this.events.next(new Bs(B)),this.configLoader.onLoadStartListener=B=>this.events.next(new ya(B))}complete(){this.transitions?.complete()}handleNavigationRequest(I){const M=++this.navigationId;this.transitions?.next({...this.transitions.value,...I,id:M})}setupNavigations(I,M,B){return this.transitions=new De.X({id:0,currentUrlTree:M,currentRawUrl:M,currentBrowserUrl:M,extractedUrl:I.urlHandlingStrategy.extract(M),urlAfterRedirects:I.urlHandlingStrategy.extract(M),rawUrl:M,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:qr,restoredState:null,currentSnapshot:B.snapshot,targetSnapshot:null,currentRouterState:B,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe((0,Dt.h)(te=>0!==te.id),(0,vn.U)(te=>({...te,extractedUrl:I.urlHandlingStrategy.extract(te.rawUrl)})),(0,yr.w)(te=>{this.currentTransition=te;let fe=!1,qe=!1;return(0,we.of)(te).pipe((0,Le.b)(ze=>{this.currentNavigation={id:ze.id,initialUrl:ze.rawUrl,extractedUrl:ze.extractedUrl,trigger:ze.source,extras:ze.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,yr.w)(ze=>{const Ut=ze.currentBrowserUrl.toString(),jn=!I.navigated||ze.extractedUrl.toString()!==Ut||Ut!==ze.currentUrlTree.toString();if(!jn&&"reload"!==(ze.extras.onSameUrlNavigation??I.onSameUrlNavigation)){const Mn="";return this.events.next(new Js(ze.id,this.urlSerializer.serialize(ze.rawUrl),Mn,0)),ze.resolve(null),Ie.E}if(I.urlHandlingStrategy.shouldProcessUrl(ze.rawUrl))return(0,we.of)(ze).pipe((0,yr.w)(Mn=>{const Ss=this.transitions?.getValue();return this.events.next(new Us(Mn.id,this.urlSerializer.serialize(Mn.extractedUrl),Mn.source,Mn.restoredState)),Ss!==this.transitions?.getValue()?Ie.E:Promise.resolve(Mn)}),function A(v,R,I,M,B,te){return(0,Te.z)(fe=>function Fs(v,R,I,M,B,te,fe="emptyOnly"){return new Ha(v,R,I,M,B,fe,te).recognize()}(v,R,I,M,fe.extractedUrl,B,te).pipe((0,vn.U)(({state:qe,tree:ze})=>({...fe,targetSnapshot:qe,urlAfterRedirects:ze}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,I.config,this.urlSerializer,I.paramsInheritanceStrategy),(0,Le.b)(Mn=>{te.targetSnapshot=Mn.targetSnapshot,te.urlAfterRedirects=Mn.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:Mn.urlAfterRedirects};const Ss=new Ps(Mn.id,this.urlSerializer.serialize(Mn.extractedUrl),this.urlSerializer.serialize(Mn.urlAfterRedirects),Mn.targetSnapshot);this.events.next(Ss)}));if(jn&&I.urlHandlingStrategy.shouldProcessUrl(ze.currentRawUrl)){const{id:Mn,extractedUrl:Ss,source:ri,restoredState:Ga,extras:Tu}=ze,Vo=new Us(Mn,this.urlSerializer.serialize(Ss),ri,Ga);this.events.next(Vo);const Uo=vr(0,this.rootComponentType).snapshot;return this.currentTransition=te={...ze,targetSnapshot:Uo,urlAfterRedirects:Ss,extras:{...Tu,skipLocationChange:!1,replaceUrl:!1}},(0,we.of)(te)}{const Mn="";return this.events.next(new Js(ze.id,this.urlSerializer.serialize(ze.extractedUrl),Mn,1)),ze.resolve(null),Ie.E}}),(0,Le.b)(ze=>{const Ut=new Fi(ze.id,this.urlSerializer.serialize(ze.extractedUrl),this.urlSerializer.serialize(ze.urlAfterRedirects),ze.targetSnapshot);this.events.next(Ut)}),(0,vn.U)(ze=>(this.currentTransition=te={...ze,guards:Zo(ze.targetSnapshot,ze.currentSnapshot,this.rootContexts)},te)),function lr(v,R){return(0,Te.z)(I=>{const{targetSnapshot:M,currentSnapshot:B,guards:{canActivateChecks:te,canDeactivateChecks:fe}}=I;return 0===fe.length&&0===te.length?(0,we.of)({...I,guardsResult:!0}):function Dr(v,R,I,M){return(0,ge.D)(v).pipe((0,Te.z)(B=>function Ri(v,R,I,M,B){const te=R&&R.routeConfig?R.routeConfig.canDeactivate:null;if(!te||0===te.length)return(0,we.of)(!0);const fe=te.map(qe=>{const ze=ps(R)??B,Ut=$i(qe,ze);return an(function C(v){return v&&j(v.canDeactivate)}(Ut)?Ut.canDeactivate(v,R,I,M):ze.runInContext(()=>Ut(v,R,I,M))).pipe((0,Re.P)())});return(0,we.of)(fe).pipe(ir())}(B.component,B.route,I,R,M)),(0,Re.P)(B=>!0!==B,!0))}(fe,M,B,v).pipe((0,Te.z)(qe=>qe&&function H(v){return"boolean"==typeof v}(qe)?function er(v,R,I,M){return(0,ge.D)(R).pipe((0,$e.b)(B=>(0,Lt.z)(function Xr(v,R){return null!==v&&R&&R(new ws(v)),(0,we.of)(!0)}(B.route.parent,M),function ci(v,R){return null!==v&&R&&R(new vo(v)),(0,we.of)(!0)}(B.route,M),function jr(v,R,I){const M=R[R.length-1],te=R.slice(0,R.length-1).reverse().map(fe=>function ja(v){const R=v.routeConfig?v.routeConfig.canActivateChild:null;return R&&0!==R.length?{node:v,guards:R}:null}(fe)).filter(fe=>null!==fe).map(fe=>ce(()=>{const qe=fe.guards.map(ze=>{const Ut=ps(fe.node)??I,jn=$i(ze,Ut);return an(function O(v){return v&&j(v.canActivateChild)}(jn)?jn.canActivateChild(M,v):Ut.runInContext(()=>jn(M,v))).pipe((0,Re.P)())});return(0,we.of)(qe).pipe(ir())}));return(0,we.of)(te).pipe(ir())}(v,B.path,I),function As(v,R,I){const M=R.routeConfig?R.routeConfig.canActivate:null;if(!M||0===M.length)return(0,we.of)(!0);const B=M.map(te=>ce(()=>{const fe=ps(R)??I,qe=$i(te,fe);return an(function b(v){return v&&j(v.canActivate)}(qe)?qe.canActivate(R,v):fe.runInContext(()=>qe(R,v))).pipe((0,Re.P)())}));return(0,we.of)(B).pipe(ir())}(v,B.route,I))),(0,Re.P)(B=>!0!==B,!0))}(M,te,v,R):(0,we.of)(qe)),(0,vn.U)(qe=>({...I,guardsResult:qe})))})}(this.environmentInjector,ze=>this.events.next(ze)),(0,Le.b)(ze=>{if(te.guardsResult=ze.guardsResult,ar(ze.guardsResult))throw No(0,ze.guardsResult);const Ut=new Is(ze.id,this.urlSerializer.serialize(ze.extractedUrl),this.urlSerializer.serialize(ze.urlAfterRedirects),ze.targetSnapshot,!!ze.guardsResult);this.events.next(Ut)}),(0,Dt.h)(ze=>!!ze.guardsResult||(this.cancelNavigationTransition(ze,"",3),!1)),Yt(ze=>{if(ze.guards.canActivateChecks.length)return(0,we.of)(ze).pipe((0,Le.b)(Ut=>{const jn=new Jo(Ut.id,this.urlSerializer.serialize(Ut.extractedUrl),this.urlSerializer.serialize(Ut.urlAfterRedirects),Ut.targetSnapshot);this.events.next(jn)}),(0,yr.w)(Ut=>{let jn=!1;return(0,we.of)(Ut).pipe(function J(v,R){return(0,Te.z)(I=>{const{targetSnapshot:M,guards:{canActivateChecks:B}}=I;if(!B.length)return(0,we.of)(I);let te=0;return(0,ge.D)(B).pipe((0,$e.b)(fe=>function L(v,R,I,M){const B=v.routeConfig,te=v._resolve;return void 0!==B?.title&&!ut(B)&&(te[zn]=B.title),function Q(v,R,I,M){const B=function pe(v){return[...Object.keys(v),...Object.getOwnPropertySymbols(v)]}(v);if(0===B.length)return(0,we.of)({});const te={};return(0,ge.D)(B).pipe((0,Te.z)(fe=>function Ze(v,R,I,M){const B=ps(R)??M,te=$i(v,B);return an(te.resolve?te.resolve(R,I):B.runInContext(()=>te(R,I)))}(v[fe],R,I,M).pipe((0,Re.P)(),(0,Le.b)(qe=>{te[fe]=qe}))),vt(1),function nn(v){return(0,vn.U)(()=>v)}(te),He(fe=>ht(fe)?Ie.E:Ae(fe)))}(te,v,R,M).pipe((0,vn.U)(fe=>(v._resolvedData=fe,v.data=Er(v,I).resolve,B&&ut(B)&&(v.data[zn]=B.title),null)))}(fe.route,M,v,R)),(0,Le.b)(()=>te++),vt(1),(0,Te.z)(fe=>te===B.length?(0,we.of)(I):Ie.E))})}(I.paramsInheritanceStrategy,this.environmentInjector),(0,Le.b)({next:()=>jn=!0,complete:()=>{jn||this.cancelNavigationTransition(Ut,"",2)}}))}),(0,Le.b)(Ut=>{const jn=new yo(Ut.id,this.urlSerializer.serialize(Ut.extractedUrl),this.urlSerializer.serialize(Ut.urlAfterRedirects),Ut.targetSnapshot);this.events.next(jn)}))}),Yt(ze=>{const Ut=jn=>{const Di=[];jn.routeConfig?.loadComponent&&!jn.routeConfig._loadedComponent&&Di.push(this.configLoader.loadComponent(jn.routeConfig).pipe((0,Le.b)(Mn=>{jn.component=Mn}),(0,vn.U)(()=>{})));for(const Mn of jn.children)Di.push(...Ut(Mn));return Di};return at(Ut(ze.targetSnapshot.root)).pipe((0,yt.d)(),(0,kt.q)(1))}),Yt(()=>this.afterPreactivation()),(0,vn.U)(ze=>{const Ut=function Vr(v,R,I){const M=wr(v,R._root,I?I._root:void 0);return new ds(M,R)}(I.routeReuseStrategy,ze.targetSnapshot,ze.currentRouterState);return this.currentTransition=te={...ze,targetRouterState:Ut},te}),(0,Le.b)(()=>{this.events.next(new js)}),((v,R,I,M)=>(0,vn.U)(B=>(new ji(R,B.targetRouterState,B.currentRouterState,I,M).activate(v),B)))(this.rootContexts,I.routeReuseStrategy,ze=>this.events.next(ze),this.inputBindingEnabled),(0,kt.q)(1),(0,Le.b)({next:ze=>{fe=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Ys(ze.id,this.urlSerializer.serialize(ze.extractedUrl),this.urlSerializer.serialize(ze.urlAfterRedirects))),I.titleStrategy?.updateTitle(ze.targetRouterState.snapshot),ze.resolve(!0)},complete:()=>{fe=!0}}),(0,or.R)(this.transitionAbortSubject.pipe((0,Le.b)(ze=>{throw ze}))),(0,Gt.x)(()=>{fe||qe||this.cancelNavigationTransition(te,"",1),this.currentNavigation?.id===te.id&&(this.currentNavigation=null)}),He(ze=>{if(qe=!0,Ii(ze))this.events.next(new yi(te.id,this.urlSerializer.serialize(te.extractedUrl),ze.message,ze.cancellationCode)),function Vi(v){return Ii(v)&&ar(v.url)}(ze)?this.events.next(new Wn(ze.url)):te.resolve(!1);else{this.events.next(new Rs(te.id,this.urlSerializer.serialize(te.extractedUrl),ze,te.targetSnapshot??void 0));try{te.resolve(I.errorHandler(ze))}catch(Ut){te.reject(Ut)}}return Ie.E}))}))}cancelNavigationTransition(I,M,B){const te=new yi(I.id,this.urlSerializer.serialize(I.extractedUrl),M,B);this.events.next(te),I.resolve(!1)}static#e=this.\u0275fac=function(M){return new(M||v)};static#t=this.\u0275prov=f.Yz7({token:v,factory:v.\u0275fac,providedIn:"root"})}return v})();function wi(v){return v!==qr}let Ls=(()=>{class v{buildTitle(I){let M,B=I.root;for(;void 0!==B;)M=this.getResolvedTitleForRoute(B)??M,B=B.children.find(te=>te.outlet===Pt);return M}getResolvedTitleForRoute(I){return I.data[zn]}static#e=this.\u0275fac=function(M){return new(M||v)};static#t=this.\u0275prov=f.Yz7({token:v,factory:function(){return(0,f.f3M)(ct)},providedIn:"root"})}return v})(),ct=(()=>{class v extends Ls{constructor(I){super(),this.title=I}updateTitle(I){const M=this.buildTitle(I);void 0!==M&&this.title.setTitle(M)}static#e=this.\u0275fac=function(M){return new(M||v)(f.LFG(Ln.Dx))};static#t=this.\u0275prov=f.Yz7({token:v,factory:v.\u0275fac,providedIn:"root"})}return v})(),Hr=(()=>{class v{static#e=this.\u0275fac=function(M){return new(M||v)};static#t=this.\u0275prov=f.Yz7({token:v,factory:function(){return(0,f.f3M)(Qo)},providedIn:"root"})}return v})();class ni{shouldDetach(R){return!1}store(R,I){}shouldAttach(R){return!1}retrieve(R){return null}shouldReuseRoute(R,I){return R.routeConfig===I.routeConfig}}let Qo=(()=>{class v extends ni{static#e=this.\u0275fac=function(){let I;return function(B){return(I||(I=f.n5z(v)))(B||v)}}();static#t=this.\u0275prov=f.Yz7({token:v,factory:v.\u0275fac,providedIn:"root"})}return v})();const bt=new f.OlP("",{providedIn:"root",factory:()=>({})});let Jt=(()=>{class v{static#e=this.\u0275fac=function(M){return new(M||v)};static#t=this.\u0275prov=f.Yz7({token:v,factory:function(){return(0,f.f3M)(Uc)},providedIn:"root"})}return v})(),Uc=(()=>{class v{shouldProcessUrl(I){return!0}extract(I){return I}merge(I,M){return I}static#e=this.\u0275fac=function(M){return new(M||v)};static#t=this.\u0275prov=f.Yz7({token:v,factory:v.\u0275fac,providedIn:"root"})}return v})();var pt=function(v){return v[v.COMPLETE=0]="COMPLETE",v[v.FAILED=1]="FAILED",v[v.REDIRECTING=2]="REDIRECTING",v}(pt||{});function Je(v,R){v.events.pipe((0,Dt.h)(I=>I instanceof Ys||I instanceof yi||I instanceof Rs||I instanceof Js),(0,vn.U)(I=>I instanceof Ys||I instanceof Js?pt.COMPLETE:I instanceof yi&&(0===I.code||1===I.code)?pt.REDIRECTING:pt.FAILED),(0,Dt.h)(I=>I!==pt.REDIRECTING),(0,kt.q)(1)).subscribe(()=>{R()})}function ft(v){throw v}function Kr(v,R,I){return R.parse("/")}const yl={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Jl={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let bs=(()=>{class v{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,f.f3M)(f.c2e),this.isNgZoneEnabled=!1,this._events=new zt.x,this.options=(0,f.f3M)(bt,{optional:!0})||{},this.pendingTasks=(0,f.f3M)(f.HDt),this.errorHandler=this.options.errorHandler||ft,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||Kr,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,f.f3M)(Jt),this.routeReuseStrategy=(0,f.f3M)(Hr),this.titleStrategy=(0,f.f3M)(Ls),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=(0,f.f3M)(Ur,{optional:!0})?.flat()??[],this.navigationTransitions=(0,f.f3M)(tr),this.urlSerializer=(0,f.f3M)(Br),this.location=(0,f.f3M)(In.Ye),this.componentInputBindingEnabled=!!(0,f.f3M)(Os,{optional:!0}),this.eventsSubscription=new et.w0,this.isNgZoneEnabled=(0,f.f3M)(f.R0b)instanceof f.R0b&&f.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Cn,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=vr(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(I=>{this.lastSuccessfulId=I.id,this.currentPageId=this.browserPageId},I=>{this.console.warn(`Unhandled Navigation Error: ${I}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const I=this.navigationTransitions.events.subscribe(M=>{try{const{currentTransition:B}=this.navigationTransitions;if(null===B)return void(Bc(M)&&this._events.next(M));if(M instanceof Us)wi(B.source)&&(this.browserUrlTree=B.extractedUrl);else if(M instanceof Js)this.rawUrlTree=B.rawUrl;else if(M instanceof Ps){if("eager"===this.urlUpdateStrategy){if(!B.extras.skipLocationChange){const te=this.urlHandlingStrategy.merge(B.urlAfterRedirects,B.rawUrl);this.setBrowserUrl(te,B)}this.browserUrlTree=B.urlAfterRedirects}}else if(M instanceof js)this.currentUrlTree=B.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(B.urlAfterRedirects,B.rawUrl),this.routerState=B.targetRouterState,"deferred"===this.urlUpdateStrategy&&(B.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,B),this.browserUrlTree=B.urlAfterRedirects);else if(M instanceof yi)0!==M.code&&1!==M.code&&(this.navigated=!0),(3===M.code||2===M.code)&&this.restoreHistory(B);else if(M instanceof Wn){const te=this.urlHandlingStrategy.merge(M.url,B.currentRawUrl),fe={skipLocationChange:B.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||wi(B.source)};this.scheduleNavigation(te,qr,null,fe,{resolve:B.resolve,reject:B.reject,promise:B.promise})}M instanceof Rs&&this.restoreHistory(B,!0),M instanceof Ys&&(this.navigated=!0),Bc(M)&&this._events.next(M)}catch(B){this.navigationTransitions.transitionAbortSubject.next(B)}});this.eventsSubscription.add(I)}resetRootComponentType(I){this.routerState.root.component=I,this.navigationTransitions.rootComponentType=I}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const I=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),qr,I)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(I=>{const M="popstate"===I.type?"popstate":"hashchange";"popstate"===M&&setTimeout(()=>{this.navigateToSyncWithBrowser(I.url,M,I.state)},0)}))}navigateToSyncWithBrowser(I,M,B){const te={replaceUrl:!0},fe=B?.navigationId?B:null;if(B){const ze={...B};delete ze.navigationId,delete ze.\u0275routerPageId,0!==Object.keys(ze).length&&(te.state=ze)}const qe=this.parseUrl(I);this.scheduleNavigation(qe,M,fe,te)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(I){this.config=I.map(Eo),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(I,M={}){const{relativeTo:B,queryParams:te,fragment:fe,queryParamsHandling:qe,preserveFragment:ze}=M,Ut=ze?this.currentUrlTree.fragment:fe;let Di,jn=null;switch(qe){case"merge":jn={...this.currentUrlTree.queryParams,...te};break;case"preserve":jn=this.currentUrlTree.queryParams;break;default:jn=te||null}null!==jn&&(jn=this.removeEmptyProps(jn));try{Di=ke(B?B.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof I[0]||!I[0].startsWith("/"))&&(I=[]),Di=this.currentUrlTree.root}return Oe(Di,I,jn,Ut??null)}navigateByUrl(I,M={skipLocationChange:!1}){const B=ar(I)?I:this.parseUrl(I),te=this.urlHandlingStrategy.merge(B,this.rawUrlTree);return this.scheduleNavigation(te,qr,null,M)}navigate(I,M={skipLocationChange:!1}){return function Lo(v){for(let R=0;R<v.length;R++)if(null==v[R])throw new f.vHH(4008,!1)}(I),this.navigateByUrl(this.createUrlTree(I,M),M)}serializeUrl(I){return this.urlSerializer.serialize(I)}parseUrl(I){let M;try{M=this.urlSerializer.parse(I)}catch(B){M=this.malformedUriErrorHandler(B,this.urlSerializer,I)}return M}isActive(I,M){let B;if(B=!0===M?{...yl}:!1===M?{...Jl}:M,ar(I))return Lr(this.currentUrlTree,I,B);const te=this.parseUrl(I);return Lr(this.currentUrlTree,te,B)}removeEmptyProps(I){return Object.keys(I).reduce((M,B)=>{const te=I[B];return null!=te&&(M[B]=te),M},{})}scheduleNavigation(I,M,B,te,fe){if(this.disposed)return Promise.resolve(!1);let qe,ze,Ut;fe?(qe=fe.resolve,ze=fe.reject,Ut=fe.promise):Ut=new Promise((Di,Mn)=>{qe=Di,ze=Mn});const jn=this.pendingTasks.add();return Je(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(jn))}),this.navigationTransitions.handleNavigationRequest({source:M,restoredState:B,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:I,extras:te,resolve:qe,reject:ze,promise:Ut,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Ut.catch(Di=>Promise.reject(Di))}setBrowserUrl(I,M){const B=this.urlSerializer.serialize(I);if(this.location.isCurrentPathEqualTo(B)||M.extras.replaceUrl){const fe={...M.extras.state,...this.generateNgRouterState(M.id,this.browserPageId)};this.location.replaceState(B,"",fe)}else{const te={...M.extras.state,...this.generateNgRouterState(M.id,this.browserPageId+1)};this.location.go(B,"",te)}}restoreHistory(I,M=!1){if("computed"===this.canceledNavigationResolution){const te=this.currentPageId-this.browserPageId;0!==te?this.location.historyGo(te):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===te&&(this.resetState(I),this.browserUrlTree=I.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(M&&this.resetState(I),this.resetUrlToCurrentUrlTree())}resetState(I){this.routerState=I.currentRouterState,this.currentUrlTree=I.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,I.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(I,M){return"computed"===this.canceledNavigationResolution?{navigationId:I,\u0275routerPageId:M}:{navigationId:I}}static#e=this.\u0275fac=function(M){return new(M||v)};static#t=this.\u0275prov=f.Yz7({token:v,factory:v.\u0275fac,providedIn:"root"})}return v})();function Bc(v){return!(v instanceof js||v instanceof Wn)}class ia{}let kn=(()=>{class v{constructor(I,M,B,te,fe){this.router=I,this.injector=B,this.preloadingStrategy=te,this.loader=fe}setUpPreloading(){this.subscription=this.router.events.pipe((0,Dt.h)(I=>I instanceof Ys),(0,$e.b)(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(I,M){const B=[];for(const te of M){te.providers&&!te._injector&&(te._injector=(0,f.MMx)(te.providers,I,`Route: ${te.path}`));const fe=te._injector??I,qe=te._loadedInjector??fe;(te.loadChildren&&!te._loadedRoutes&&void 0===te.canLoad||te.loadComponent&&!te._loadedComponent)&&B.push(this.preloadConfig(fe,te)),(te.children||te._loadedRoutes)&&B.push(this.processRoutes(qe,te.children??te._loadedRoutes))}return(0,ge.D)(B).pipe((0,Hn.J)())}preloadConfig(I,M){return this.preloadingStrategy.preload(M,()=>{let B;B=M.loadChildren&&void 0===M.canLoad?this.loader.loadChildren(I,M):(0,we.of)(null);const te=B.pipe((0,Te.z)(fe=>null===fe?(0,we.of)(void 0):(M._loadedRoutes=fe.routes,M._loadedInjector=fe.injector,this.processRoutes(fe.injector??I,fe.routes))));if(M.loadComponent&&!M._loadedComponent){const fe=this.loader.loadComponent(M);return(0,ge.D)([te,fe]).pipe((0,Hn.J)())}return te})}static#e=this.\u0275fac=function(M){return new(M||v)(f.LFG(bs),f.LFG(f.Sil),f.LFG(f.lqb),f.LFG(ia),f.LFG(_r))};static#t=this.\u0275prov=f.Yz7({token:v,factory:v.\u0275fac,providedIn:"root"})}return v})();const sa=new f.OlP("");let $u=(()=>{class v{constructor(I,M,B,te,fe={}){this.urlSerializer=I,this.transitions=M,this.viewportScroller=B,this.zone=te,this.options=fe,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},fe.scrollPositionRestoration=fe.scrollPositionRestoration||"disabled",fe.anchorScrolling=fe.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(I=>{I instanceof Us?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=I.navigationTrigger,this.restoredId=I.restoredState?I.restoredState.navigationId:0):I instanceof Ys?(this.lastId=I.id,this.scheduleScrollEvent(I,this.urlSerializer.parse(I.urlAfterRedirects).fragment)):I instanceof Js&&0===I.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(I,this.urlSerializer.parse(I.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(I=>{I instanceof Ns&&(I.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(I.position):I.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(I.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(I,M){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Ns(I,"popstate"===this.lastSource?this.store[this.restoredId]:null,M))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(M){f.$Z()};static#t=this.\u0275prov=f.Yz7({token:v,factory:v.\u0275fac})}return v})();function Io(v,R){return{\u0275kind:v,\u0275providers:R}}function wo(){const v=(0,f.f3M)(f.zs3);return R=>{const I=v.get(f.z2F);if(R!==I.components[0])return;const M=v.get(bs),B=v.get(wu);1===v.get(wa)&&M.initialNavigation(),v.get(dt,null,f.XFs.Optional)?.setUpPreloading(),v.get(sa,null,f.XFs.Optional)?.init(),M.resetRootComponentType(I.componentTypes[0]),B.closed||(B.next(),B.complete(),B.unsubscribe())}}const wu=new f.OlP("",{factory:()=>new zt.x}),wa=new f.OlP("",{providedIn:"root",factory:()=>1}),dt=new f.OlP("");function xr(v){return Io(0,[{provide:dt,useExisting:kn},{provide:ia,useExisting:v}])}const os=new f.OlP("ROUTER_FORROOT_GUARD"),ou=[In.Ye,{provide:Br,useClass:Ni},bs,vi,{provide:dn,useFactory:function cn(v){return v.routerState.root},deps:[bs]},_r,[]];function Be(){return new f.PXZ("Router",bs)}let Hu=(()=>{class v{constructor(I){}static forRoot(I,M){return{ngModule:v,providers:[ou,[],{provide:Ur,multi:!0,useValue:I},{provide:os,useFactory:Ti,deps:[[bs,new f.FiY,new f.tp0]]},{provide:bt,useValue:M||{}},M?.useHash?{provide:In.S$,useClass:In.Do}:{provide:In.S$,useClass:In.b0},{provide:sa,useFactory:()=>{const v=(0,f.f3M)(In.EM),R=(0,f.f3M)(f.R0b),I=(0,f.f3M)(bt),M=(0,f.f3M)(tr),B=(0,f.f3M)(Br);return I.scrollOffset&&v.setOffset(I.scrollOffset),new $u(B,M,v,R,I)}},M?.preloadingStrategy?xr(M.preloadingStrategy).\u0275providers:[],{provide:f.PXZ,multi:!0,useFactory:Be},M?.initialNavigation?Gu(M):[],M?.bindToComponentInputs?Io(8,[Wi,{provide:Os,useExisting:Wi}]).\u0275providers:[],[{provide:ms,useFactory:wo},{provide:f.tb,multi:!0,useExisting:ms}]]}}static forChild(I){return{ngModule:v,providers:[{provide:Ur,multi:!0,useValue:I}]}}static#e=this.\u0275fac=function(M){return new(M||v)(f.LFG(os,8))};static#t=this.\u0275mod=f.oAB({type:v});static#n=this.\u0275inj=f.cJS({})}return v})();function Ti(v){return"guarded"}function Gu(v){return["disabled"===v.initialNavigation?Io(3,[{provide:f.ip1,multi:!0,useFactory:()=>{const R=(0,f.f3M)(bs);return()=>{R.setUpLocationChangeListener()}}},{provide:wa,useValue:2}]).\u0275providers:[],"enabledBlocking"===v.initialNavigation?Io(2,[{provide:wa,useValue:0},{provide:f.ip1,multi:!0,deps:[f.zs3],useFactory:R=>{const I=R.get(In.V_,Promise.resolve());return()=>I.then(()=>new Promise(M=>{const B=R.get(bs),te=R.get(wu);Je(B,()=>{M(!0)}),R.get(tr).afterPreactivation=()=>(M(!0),te.closed?(0,we.of)(void 0):te),B.initialNavigation()}))}}]).\u0275providers:[]]}const ms=new f.OlP("")},3106:(Nt,Ve,U)=>{U.d(Ve,{Z:()=>at});var f=U(9058),Z=U(4537),q=U(534),ye=U(7879);class ge{constructor(mt,nt){this._delegate=mt,this.firebase=nt,(0,q._addComponent)(mt,new Z.wA("app-compat",()=>this,"PUBLIC")),this.container=mt.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(mt){this._delegate.automaticDataCollectionEnabled=mt}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(mt=>{this._delegate.checkDestroyed(),mt()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,q.deleteApp)(this._delegate)))}_getService(mt,nt=q._DEFAULT_ENTRY_NAME){var Lt;this._delegate.checkDestroyed();const ot=this._delegate.container.getProvider(mt);return!ot.isInitialized()&&"EXPLICIT"===(null===(Lt=ot.getComponent())||void 0===Lt?void 0:Lt.instantiationMode)&&ot.initialize(),ot.getImmediate({identifier:nt})}_removeServiceInstance(mt,nt=q._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(mt).clearInstance(nt)}_addComponent(mt){(0,q._addComponent)(this._delegate,mt)}_addOrOverwriteComponent(mt){(0,q._addOrOverwriteComponent)(this._delegate,mt)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const De=new f.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),re=function Ne(){const it=function _e(it){const mt={},nt={__esModule:!0,initializeApp:function ce(et,Fe={}){const xe=q.initializeApp(et,Fe);if((0,f.r3)(mt,xe.name))return mt[xe.name];const Tt=new it(xe,nt);return mt[xe.name]=Tt,Tt},app:ot,registerVersion:q.registerVersion,setLogLevel:q.setLogLevel,onLog:q.onLog,apps:null,SDK_VERSION:q.SDK_VERSION,INTERNAL:{registerComponent:function Ae(et){const Fe=et.name,xe=Fe.replace("-compat","");if(q._registerComponent(et)&&"PUBLIC"===et.type){const Tt=(zt=ot())=>{if("function"!=typeof zt[xe])throw De.create("invalid-app-argument",{appName:Fe});return zt[xe]()};void 0!==et.serviceProps&&(0,f.ZB)(Tt,et.serviceProps),nt[xe]=Tt,it.prototype[xe]=function(...zt){return this._getService.bind(this,Fe).apply(this,et.multipleInstances?zt:[])}}return"PUBLIC"===et.type?nt[xe]:null},removeApp:function Lt(et){delete mt[et]},useAsService:function Ie(et,Fe){return"serverAuth"===Fe?null:Fe},modularAPIs:q}};function ot(et){if(!(0,f.r3)(mt,et=et||q._DEFAULT_ENTRY_NAME))throw De.create("no-app",{appName:et});return mt[et]}return nt.default=nt,Object.defineProperty(nt,"apps",{get:function Ue(){return Object.keys(mt).map(et=>mt[et])}}),ot.App=it,nt}(ge);return it.INTERNAL=Object.assign(Object.assign({},it.INTERNAL),{createFirebaseNamespace:Ne,extendNamespace:function mt(nt){(0,f.ZB)(it,nt)},createSubscribe:f.ne,ErrorFactory:f.LL,deepExtend:f.ZB}),it}(),se=new ye.Yd("@firebase/app-compat");if((0,f.jU)()&&void 0!==self.firebase){se.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const it=self.firebase.SDK_VERSION;it&&it.indexOf("LITE")>=0&&se.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const at=re;!function We(it){(0,q.registerVersion)("@firebase/app-compat","0.2.30",it)}()},534:(Nt,Ve,U)=>{U.r(Ve),U.d(Ve,{FirebaseError:()=>ye.ZR,SDK_VERSION:()=>Br,_DEFAULT_ENTRY_NAME:()=>Kt,_addComponent:()=>ii,_addOrOverwriteComponent:()=>Rn,_apps:()=>rn,_clearComponents:()=>Wt,_components:()=>Lr,_getProvider:()=>is,_isFirebaseApp:()=>Mi,_isFirebaseServerApp:()=>Cn,_registerComponent:()=>Cr,_removeServiceInstance:()=>$t,_serverApps:()=>Kn,deleteApp:()=>Mr,getApp:()=>Sr,getApps:()=>fr,initializeApp:()=>Ni,initializeServerApp:()=>si,onLog:()=>ne,registerVersion:()=>Ee,setLogLevel:()=>z});var f=U(5861),Z=U(4537),q=U(7879),ye=U(9058);const ge=(ke,Oe)=>Oe.some(rt=>ke instanceof rt);let we,De;const re=new WeakMap,se=new WeakMap,ve=new WeakMap,Ye=new WeakMap,We=new WeakMap;let mt={get(ke,Oe,rt){if(ke instanceof IDBTransaction){if("done"===Oe)return se.get(ke);if("objectStoreNames"===Oe)return ke.objectStoreNames||ve.get(ke);if("store"===Oe)return rt.objectStoreNames[1]?void 0:rt.objectStore(rt.objectStoreNames[0])}return ce(ke[Oe])},set:(ke,Oe,rt)=>(ke[Oe]=rt,!0),has:(ke,Oe)=>ke instanceof IDBTransaction&&("done"===Oe||"store"===Oe)||Oe in ke};function ot(ke){return"function"==typeof ke?function Lt(ke){return ke!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Ne(){return De||(De=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(ke)?function(...Oe){return ke.apply(Ue(this),Oe),ce(re.get(this))}:function(...Oe){return ce(ke.apply(Ue(this),Oe))}:function(Oe,...rt){const It=ke.call(Ue(this),Oe,...rt);return ve.set(It,Oe.sort?Oe.sort():[Oe]),ce(It)}}(ke):(ke instanceof IDBTransaction&&function it(ke){if(se.has(ke))return;const Oe=new Promise((rt,It)=>{const pn=()=>{ke.removeEventListener("complete",Xt),ke.removeEventListener("error",gn),ke.removeEventListener("abort",gn)},Xt=()=>{rt(),pn()},gn=()=>{It(ke.error||new DOMException("AbortError","AbortError")),pn()};ke.addEventListener("complete",Xt),ke.addEventListener("error",gn),ke.addEventListener("abort",gn)});se.set(ke,Oe)}(ke),ge(ke,function _e(){return we||(we=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(ke,mt):ke)}function ce(ke){if(ke instanceof IDBRequest)return function at(ke){const Oe=new Promise((rt,It)=>{const pn=()=>{ke.removeEventListener("success",Xt),ke.removeEventListener("error",gn)},Xt=()=>{rt(ce(ke.result)),pn()},gn=()=>{It(ke.error),pn()};ke.addEventListener("success",Xt),ke.addEventListener("error",gn)});return Oe.then(rt=>{rt instanceof IDBCursor&&re.set(rt,ke)}).catch(()=>{}),We.set(Oe,ke),Oe}(ke);if(Ye.has(ke))return Ye.get(ke);const Oe=ot(ke);return Oe!==ke&&(Ye.set(ke,Oe),We.set(Oe,ke)),Oe}const Ue=ke=>We.get(ke),et=["get","getKey","getAll","getAllKeys","count"],Fe=["put","add","delete","clear"],xe=new Map;function Tt(ke,Oe){if(!(ke instanceof IDBDatabase)||Oe in ke||"string"!=typeof Oe)return;if(xe.get(Oe))return xe.get(Oe);const rt=Oe.replace(/FromIndex$/,""),It=Oe!==rt,pn=Fe.includes(rt);if(!(rt in(It?IDBIndex:IDBObjectStore).prototype)||!pn&&!et.includes(rt))return;const Xt=function(){var gn=(0,f.Z)(function*(xn,...pr){const ui=this.transaction(xn,pn?"readwrite":"readonly");let Es=ui.store;return It&&(Es=Es.index(pr.shift())),(yield Promise.all([Es[rt](...pr),pn&&ui.done]))[0]});return function(pr){return gn.apply(this,arguments)}}();return xe.set(Oe,Xt),Xt}!function nt(ke){mt=ke(mt)}(ke=>({...ke,get:(Oe,rt,It)=>Tt(Oe,rt)||ke.get(Oe,rt,It),has:(Oe,rt)=>!!Tt(Oe,rt)||ke.has(Oe,rt)}));class zt{constructor(Oe){this.container=Oe}getPlatformInfoString(){return this.container.getProviders().map(rt=>{if(function In(ke){const Oe=ke.getComponent();return"VERSION"===Oe?.type}(rt)){const It=rt.getImmediate();return`${It.library}/${It.version}`}return null}).filter(rt=>rt).join(" ")}}const vn="@firebase/app",yr="0.10.0",kt=new q.Yd("@firebase/app"),Kt="[DEFAULT]",an={[vn]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},rn=new Map,Kn=new Map,Lr=new Map;function ii(ke,Oe){try{ke.container.addComponent(Oe)}catch(rt){kt.debug(`Component ${Oe.name} failed to register with FirebaseApp ${ke.name}`,rt)}}function Rn(ke,Oe){ke.container.addOrOverwriteComponent(Oe)}function Cr(ke){const Oe=ke.name;if(Lr.has(Oe))return kt.debug(`There were multiple attempts to register component ${Oe}.`),!1;Lr.set(Oe,ke);for(const rt of rn.values())ii(rt,ke);for(const rt of Kn.values())ii(rt,ke);return!0}function is(ke,Oe){const rt=ke.container.getProvider("heartbeat").getImmediate({optional:!0});return rt&&rt.triggerHeartbeat(),ke.container.getProvider(Oe)}function $t(ke,Oe,rt=Kt){is(ke,Oe).clearInstance(rt)}function Mi(ke){return void 0!==ke.options}function Cn(ke){return void 0!==ke.settings}function Wt(){Lr.clear()}const br=new ye.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class Un{constructor(Oe,rt,It){this._isDeleted=!1,this._options=Object.assign({},Oe),this._config=Object.assign({},rt),this._name=rt.name,this._automaticDataCollectionEnabled=rt.automaticDataCollectionEnabled,this._container=It,this.container.addComponent(new Z.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Oe){this.checkDestroyed(),this._automaticDataCollectionEnabled=Oe}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Oe){this._isDeleted=Oe}checkDestroyed(){if(this.isDeleted)throw br.create("app-deleted",{appName:this._name})}}class Pn extends Un{constructor(Oe,rt,It,pn){const Xt=void 0!==rt.automaticDataCollectionEnabled&&rt.automaticDataCollectionEnabled,gn={name:It,automaticDataCollectionEnabled:Xt};super(void 0!==Oe.apiKey?Oe:Oe.options,gn,pn),this._serverConfig=Object.assign({automaticDataCollectionEnabled:Xt},rt),this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()}),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,rt.releaseOnDeref=void 0,Ee(vn,yr,"serverapp")}get refCount(){return this._refCount}incRefCount(Oe){this.isDeleted||(this._refCount++,void 0!==Oe&&this._finalizationRegistry.register(Oe,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){Mr(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw br.create("server-app-deleted")}}const Br="10.10.0";function Ni(ke,Oe={}){let rt=ke;"object"!=typeof Oe&&(Oe={name:Oe});const It=Object.assign({name:Kt,automaticDataCollectionEnabled:!1},Oe),pn=It.name;if("string"!=typeof pn||!pn)throw br.create("bad-app-name",{appName:String(pn)});if(rt||(rt=(0,ye.aH)()),!rt)throw br.create("no-options");const Xt=rn.get(pn);if(Xt){if((0,ye.vZ)(rt,Xt.options)&&(0,ye.vZ)(It,Xt.config))return Xt;throw br.create("duplicate-app",{appName:pn})}const gn=new Z.H0(pn);for(const pr of Lr.values())gn.addComponent(pr);const xn=new Un(rt,It,gn);return rn.set(pn,xn),xn}function si(ke,Oe){if((0,ye.jU)())throw br.create("invalid-server-app-environment");let rt;void 0===Oe.automaticDataCollectionEnabled&&(Oe.automaticDataCollectionEnabled=!1),rt=Mi(ke)?ke.options:ke;const It=Object.assign(Object.assign({},Oe),rt);if(void 0!==It.releaseOnDeref&&delete It.releaseOnDeref,void 0!==Oe.releaseOnDeref&&typeof FinalizationRegistry>"u")throw br.create("finalization-registry-not-supported",{});const Xt=""+(ui=JSON.stringify(It),[...ui].reduce((Es,Po)=>Math.imul(31,Es)+Po.charCodeAt(0)|0,0)),gn=Kn.get(Xt);var ui;if(gn)return gn.incRefCount(Oe.releaseOnDeref),gn;const xn=new Z.H0(Xt);for(const ui of Lr.values())xn.addComponent(ui);const pr=new Pn(rt,Oe,Xt,xn);return Kn.set(Xt,pr),pr}function Sr(ke=Kt){const Oe=rn.get(ke);if(!Oe&&ke===Kt&&(0,ye.aH)())return Ni();if(!Oe)throw br.create("no-app",{appName:ke});return Oe}function fr(){return Array.from(rn.values())}function Mr(ke){return rr.apply(this,arguments)}function rr(){return(rr=(0,f.Z)(function*(ke){let Oe=!1;const rt=ke.name;rn.has(rt)?(Oe=!0,rn.delete(rt)):Kn.has(rt)&&ke.decRefCount()<=0&&(Kn.delete(rt),Oe=!0),Oe&&(yield Promise.all(ke.container.getProviders().map(It=>It.delete())),ke.isDeleted=!0)})).apply(this,arguments)}function Ee(ke,Oe,rt){var It;let pn=null!==(It=an[ke])&&void 0!==It?It:ke;rt&&(pn+=`-${rt}`);const Xt=pn.match(/\s|\//),gn=Oe.match(/\s|\//);if(Xt||gn){const xn=[`Unable to register library "${pn}" with version "${Oe}":`];return Xt&&xn.push(`library name "${pn}" contains illegal characters (whitespace or "/")`),Xt&&gn&&xn.push("and"),gn&&xn.push(`version name "${Oe}" contains illegal characters (whitespace or "/")`),void kt.warn(xn.join(" "))}Cr(new Z.wA(`${pn}-version`,()=>({library:pn,version:Oe}),"VERSION"))}function ne(ke,Oe){if(null!==ke&&"function"!=typeof ke)throw br.create("invalid-log-argument");(0,q.Am)(ke,Oe)}function z(ke){(0,q.Ub)(ke)}const F="firebase-heartbeat-database",k=1,oe="firebase-heartbeat-store";let Pe=null;function st(){return Pe||(Pe=function Ae(ke,Oe,{blocked:rt,upgrade:It,blocking:pn,terminated:Xt}={}){const gn=indexedDB.open(ke,Oe),xn=ce(gn);return It&&gn.addEventListener("upgradeneeded",pr=>{It(ce(gn.result),pr.oldVersion,pr.newVersion,ce(gn.transaction),pr)}),rt&&gn.addEventListener("blocked",pr=>rt(pr.oldVersion,pr.newVersion,pr)),xn.then(pr=>{Xt&&pr.addEventListener("close",()=>Xt()),pn&&pr.addEventListener("versionchange",ui=>pn(ui.oldVersion,ui.newVersion,ui))}).catch(()=>{}),xn}(F,k,{upgrade:(ke,Oe)=>{if(0===Oe)try{ke.createObjectStore(oe)}catch(rt){console.warn(rt)}}}).catch(ke=>{throw br.create("idb-open",{originalErrorMessage:ke.message})})),Pe}function Ot(){return(Ot=(0,f.Z)(function*(ke){try{const rt=(yield st()).transaction(oe),It=yield rt.objectStore(oe).get(Gn(ke));return yield rt.done,It}catch(Oe){if(Oe instanceof ye.ZR)kt.warn(Oe.message);else{const rt=br.create("idb-get",{originalErrorMessage:Oe?.message});kt.warn(rt.message)}}})).apply(this,arguments)}function wt(ke,Oe){return qt.apply(this,arguments)}function qt(){return(qt=(0,f.Z)(function*(ke,Oe){try{const It=(yield st()).transaction(oe,"readwrite");yield It.objectStore(oe).put(Oe,Gn(ke)),yield It.done}catch(rt){if(rt instanceof ye.ZR)kt.warn(rt.message);else{const It=br.create("idb-set",{originalErrorMessage:rt?.message});kt.warn(It.message)}}})).apply(this,arguments)}function Gn(ke){return`${ke.name}!${ke.options.appId}`}class vs{constructor(Oe){this.container=Oe,this._heartbeatsCache=null;const rt=this.container.getProvider("app").getImmediate();this._storage=new Jr(rt),this._heartbeatsCachePromise=this._storage.read().then(It=>(this._heartbeatsCache=It,It))}triggerHeartbeat(){var Oe=this;return(0,f.Z)(function*(){var rt,It;const Xt=Oe.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),gn=as();if((null!=(null===(rt=Oe._heartbeatsCache)||void 0===rt?void 0:rt.heartbeats)||(Oe._heartbeatsCache=yield Oe._heartbeatsCachePromise,null!=(null===(It=Oe._heartbeatsCache)||void 0===It?void 0:It.heartbeats)))&&Oe._heartbeatsCache.lastSentHeartbeatDate!==gn&&!Oe._heartbeatsCache.heartbeats.some(xn=>xn.date===gn))return Oe._heartbeatsCache.heartbeats.push({date:gn,agent:Xt}),Oe._heartbeatsCache.heartbeats=Oe._heartbeatsCache.heartbeats.filter(xn=>{const pr=new Date(xn.date).valueOf();return Date.now()-pr<=2592e6}),Oe._storage.overwrite(Oe._heartbeatsCache)})()}getHeartbeatsHeader(){var Oe=this;return(0,f.Z)(function*(){var rt;if(null===Oe._heartbeatsCache&&(yield Oe._heartbeatsCachePromise),null==(null===(rt=Oe._heartbeatsCache)||void 0===rt?void 0:rt.heartbeats)||0===Oe._heartbeatsCache.heartbeats.length)return"";const It=as(),{heartbeatsToSend:pn,unsentEntries:Xt}=function Ci(ke,Oe=1024){const rt=[];let It=ke.slice();for(const pn of ke){const Xt=rt.find(gn=>gn.agent===pn.agent);if(Xt){if(Xt.dates.push(pn.date),ar(rt)>Oe){Xt.dates.pop();break}}else if(rt.push({agent:pn.agent,dates:[pn.date]}),ar(rt)>Oe){rt.pop();break}It=It.slice(1)}return{heartbeatsToSend:rt,unsentEntries:It}}(Oe._heartbeatsCache.heartbeats),gn=(0,ye.L)(JSON.stringify({version:2,heartbeats:pn}));return Oe._heartbeatsCache.lastSentHeartbeatDate=It,Xt.length>0?(Oe._heartbeatsCache.heartbeats=Xt,yield Oe._storage.overwrite(Oe._heartbeatsCache)):(Oe._heartbeatsCache.heartbeats=[],Oe._storage.overwrite(Oe._heartbeatsCache)),gn})()}}function as(){return(new Date).toISOString().substring(0,10)}class Jr{constructor(Oe){this.app=Oe,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,f.Z)(function*(){return!!(0,ye.hl)()&&(0,ye.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Oe=this;return(0,f.Z)(function*(){if(yield Oe._canUseIndexedDBPromise){const It=yield function _t(ke){return Ot.apply(this,arguments)}(Oe.app);return It?.heartbeats?It:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite(Oe){var rt=this;return(0,f.Z)(function*(){var It;if(yield rt._canUseIndexedDBPromise){const Xt=yield rt.read();return wt(rt.app,{lastSentHeartbeatDate:null!==(It=Oe.lastSentHeartbeatDate)&&void 0!==It?It:Xt.lastSentHeartbeatDate,heartbeats:Oe.heartbeats})}})()}add(Oe){var rt=this;return(0,f.Z)(function*(){var It;if(yield rt._canUseIndexedDBPromise){const Xt=yield rt.read();return wt(rt.app,{lastSentHeartbeatDate:null!==(It=Oe.lastSentHeartbeatDate)&&void 0!==It?It:Xt.lastSentHeartbeatDate,heartbeats:[...Xt.heartbeats,...Oe.heartbeats]})}})()}}function ar(ke){return(0,ye.L)(JSON.stringify({version:2,heartbeats:ke})).length}!function ai(ke){Cr(new Z.wA("platform-logger",Oe=>new zt(Oe),"PRIVATE")),Cr(new Z.wA("heartbeat",Oe=>new vs(Oe),"PRIVATE")),Ee(vn,yr,ke),Ee(vn,yr,"esm2017"),Ee("fire-js","")}("")},4537:(Nt,Ve,U)=>{U.d(Ve,{H0:()=>_e,wA:()=>q});var f=U(5861),Z=U(9058);class q{constructor(re,se,ve){this.name=re,this.instanceFactory=se,this.type=ve,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(re){return this.instantiationMode=re,this}setMultipleInstances(re){return this.multipleInstances=re,this}setServiceProps(re){return this.serviceProps=re,this}setInstanceCreatedCallback(re){return this.onInstanceCreated=re,this}}const ye="[DEFAULT]";class ge{constructor(re,se){this.name=re,this.container=se,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(re){const se=this.normalizeInstanceIdentifier(re);if(!this.instancesDeferred.has(se)){const ve=new Z.BH;if(this.instancesDeferred.set(se,ve),this.isInitialized(se)||this.shouldAutoInitialize())try{const Ye=this.getOrInitializeService({instanceIdentifier:se});Ye&&ve.resolve(Ye)}catch{}}return this.instancesDeferred.get(se).promise}getImmediate(re){var se;const ve=this.normalizeInstanceIdentifier(re?.identifier),Ye=null!==(se=re?.optional)&&void 0!==se&&se;if(!this.isInitialized(ve)&&!this.shouldAutoInitialize()){if(Ye)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:ve})}catch(We){if(Ye)return null;throw We}}getComponent(){return this.component}setComponent(re){if(re.name!==this.name)throw Error(`Mismatching Component ${re.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=re,this.shouldAutoInitialize()){if(function De(Ne){return"EAGER"===Ne.instantiationMode}(re))try{this.getOrInitializeService({instanceIdentifier:ye})}catch{}for(const[se,ve]of this.instancesDeferred.entries()){const Ye=this.normalizeInstanceIdentifier(se);try{const We=this.getOrInitializeService({instanceIdentifier:Ye});ve.resolve(We)}catch{}}}}clearInstance(re=ye){this.instancesDeferred.delete(re),this.instancesOptions.delete(re),this.instances.delete(re)}delete(){var re=this;return(0,f.Z)(function*(){const se=Array.from(re.instances.values());yield Promise.all([...se.filter(ve=>"INTERNAL"in ve).map(ve=>ve.INTERNAL.delete()),...se.filter(ve=>"_delete"in ve).map(ve=>ve._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(re=ye){return this.instances.has(re)}getOptions(re=ye){return this.instancesOptions.get(re)||{}}initialize(re={}){const{options:se={}}=re,ve=this.normalizeInstanceIdentifier(re.instanceIdentifier);if(this.isInitialized(ve))throw Error(`${this.name}(${ve}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ye=this.getOrInitializeService({instanceIdentifier:ve,options:se});for(const[We,at]of this.instancesDeferred.entries())ve===this.normalizeInstanceIdentifier(We)&&at.resolve(Ye);return Ye}onInit(re,se){var ve;const Ye=this.normalizeInstanceIdentifier(se),We=null!==(ve=this.onInitCallbacks.get(Ye))&&void 0!==ve?ve:new Set;We.add(re),this.onInitCallbacks.set(Ye,We);const at=this.instances.get(Ye);return at&&re(at,Ye),()=>{We.delete(re)}}invokeOnInitCallbacks(re,se){const ve=this.onInitCallbacks.get(se);if(ve)for(const Ye of ve)try{Ye(re,se)}catch{}}getOrInitializeService({instanceIdentifier:re,options:se={}}){let ve=this.instances.get(re);if(!ve&&this.component&&(ve=this.component.instanceFactory(this.container,{instanceIdentifier:(Ne=re,Ne===ye?void 0:Ne),options:se}),this.instances.set(re,ve),this.instancesOptions.set(re,se),this.invokeOnInitCallbacks(ve,re),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,re,ve)}catch{}var Ne;return ve||null}normalizeInstanceIdentifier(re=ye){return this.component?this.component.multipleInstances?re:ye:re}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class _e{constructor(re){this.name=re,this.providers=new Map}addComponent(re){const se=this.getProvider(re.name);if(se.isComponentSet())throw new Error(`Component ${re.name} has already been registered with ${this.name}`);se.setComponent(re)}addOrOverwriteComponent(re){this.getProvider(re.name).isComponentSet()&&this.providers.delete(re.name),this.addComponent(re)}getProvider(re){if(this.providers.has(re))return this.providers.get(re);const se=new ge(re,this);return this.providers.set(re,se),se}getProviders(){return Array.from(this.providers.values())}}},7879:(Nt,Ve,U)=>{U.d(Ve,{Am:()=>Ne,Ub:()=>_e,Yd:()=>De,in:()=>Z});const f=[];var Z=function(re){return re[re.DEBUG=0]="DEBUG",re[re.VERBOSE=1]="VERBOSE",re[re.INFO=2]="INFO",re[re.WARN=3]="WARN",re[re.ERROR=4]="ERROR",re[re.SILENT=5]="SILENT",re}(Z||{});const q={debug:Z.DEBUG,verbose:Z.VERBOSE,info:Z.INFO,warn:Z.WARN,error:Z.ERROR,silent:Z.SILENT},ye=Z.INFO,ge={[Z.DEBUG]:"log",[Z.VERBOSE]:"log",[Z.INFO]:"info",[Z.WARN]:"warn",[Z.ERROR]:"error"},we=(re,se,...ve)=>{if(se<re.logLevel)return;const Ye=(new Date).toISOString(),We=ge[se];if(!We)throw new Error(`Attempted to log a message with an invalid logType (value: ${se})`);console[We](`[${Ye}]  ${re.name}:`,...ve)};class De{constructor(se){this.name=se,this._logLevel=ye,this._logHandler=we,this._userLogHandler=null,f.push(this)}get logLevel(){return this._logLevel}set logLevel(se){if(!(se in Z))throw new TypeError(`Invalid value "${se}" assigned to \`logLevel\``);this._logLevel=se}setLogLevel(se){this._logLevel="string"==typeof se?q[se]:se}get logHandler(){return this._logHandler}set logHandler(se){if("function"!=typeof se)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=se}get userLogHandler(){return this._userLogHandler}set userLogHandler(se){this._userLogHandler=se}debug(...se){this._userLogHandler&&this._userLogHandler(this,Z.DEBUG,...se),this._logHandler(this,Z.DEBUG,...se)}log(...se){this._userLogHandler&&this._userLogHandler(this,Z.VERBOSE,...se),this._logHandler(this,Z.VERBOSE,...se)}info(...se){this._userLogHandler&&this._userLogHandler(this,Z.INFO,...se),this._logHandler(this,Z.INFO,...se)}warn(...se){this._userLogHandler&&this._userLogHandler(this,Z.WARN,...se),this._logHandler(this,Z.WARN,...se)}error(...se){this._userLogHandler&&this._userLogHandler(this,Z.ERROR,...se),this._logHandler(this,Z.ERROR,...se)}}function _e(re){f.forEach(se=>{se.setLogLevel(re)})}function Ne(re,se){for(const ve of f){let Ye=null;se&&se.level&&(Ye=q[se.level]),ve.userLogHandler=null===re?null:(We,at,...it)=>{const mt=it.map(nt=>{if(null==nt)return null;if("string"==typeof nt)return nt;if("number"==typeof nt||"boolean"==typeof nt)return nt.toString();if(nt instanceof Error)return nt.message;try{return JSON.stringify(nt)}catch{return null}}).filter(nt=>nt).join(" ");at>=(Ye??We.logLevel)&&re({level:Z[at].toLowerCase(),message:mt,args:it,type:We.name})}}}},3182:(Nt,Ve,U)=>{U.d(Ve,{C6:()=>f.getApps,KN:()=>f.registerVersion,Mq:()=>f.getApp,ZF:()=>f.initializeApp});var f=U(534);(0,f.registerVersion)("firebase","10.10.0","app")},7142:(Nt,Ve,U)=>{U.d(Ve,{Z:()=>f.Z});var f=U(3106);f.Z.registerVersion("firebase","10.10.0","app-compat")},6365:(Nt,Ve,U)=>{U.r(Ve);var f=U(5861),Z=U(3106),q=U(9010),ye=U(9058),De=(U(534),U(7879),U(4537));function _e(){return window}function se(){return se=(0,f.Z)(function*(z,F,k){var oe;const{BuildInfo:Pe}=_e();(0,q.au)(F.sessionId,"AuthEvent did not contain a session ID");const st=yield function nt(z){return Lt.apply(this,arguments)}(F.sessionId),_t={};return(0,q.av)()?_t.ibi=Pe.packageName:(0,q.aw)()?_t.apn=Pe.packageName:(0,q.ax)(z,"operation-not-supported-in-this-environment"),Pe.displayName&&(_t.appDisplayName=Pe.displayName),_t.sessionId=st,(0,q.ay)(z,k,F.type,void 0,null!==(oe=F.eventId)&&void 0!==oe?oe:void 0,_t)}),se.apply(this,arguments)}function Ye(){return(Ye=(0,f.Z)(function*(z){const{BuildInfo:F}=_e(),k={};(0,q.av)()?k.iosBundleId=F.packageName:(0,q.aw)()?k.androidPackageName=F.packageName:(0,q.ax)(z,"operation-not-supported-in-this-environment"),yield(0,q.az)(z,k)})).apply(this,arguments)}function it(){return(it=(0,f.Z)(function*(z,F,k){const{cordova:oe}=_e();let Pe=()=>{};try{yield new Promise((st,_t)=>{let Ot=null;function wt(){var ln;st();const oi=null===(ln=oe.plugins.browsertab)||void 0===ln?void 0:ln.close;"function"==typeof oi&&oi(),"function"==typeof k?.close&&k.close()}function qt(){Ot||(Ot=window.setTimeout(()=>{_t((0,q.aB)(z,"redirect-cancelled-by-user"))},2e3))}function Gn(){"visible"===document?.visibilityState&&qt()}F.addPassiveListener(wt),document.addEventListener("resume",qt,!1),(0,q.aw)()&&document.addEventListener("visibilitychange",Gn,!1),Pe=()=>{F.removePassiveListener(wt),document.removeEventListener("resume",qt,!1),document.removeEventListener("visibilitychange",Gn,!1),Ot&&window.clearTimeout(Ot)}})}finally{Pe()}})).apply(this,arguments)}function Lt(){return(Lt=(0,f.Z)(function*(z){const F=function ot(z){if((0,q.au)(/[0-9a-zA-Z]+/.test(z),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(z);const F=new ArrayBuffer(z.length),k=new Uint8Array(F);for(let oe=0;oe<z.length;oe++)k[oe]=z.charCodeAt(oe);return k}(z),k=yield crypto.subtle.digest("SHA-256",F);return Array.from(new Uint8Array(k)).map(Pe=>Pe.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class Ue extends q.aD{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(F=>{this.resolveInialized=F})}addPassiveListener(F){this.passiveListeners.add(F)}removePassiveListener(F){this.passiveListeners.delete(F)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(F){return this.resolveInialized(),this.passiveListeners.forEach(k=>k(F)),super.onEvent(F)}initialized(){var F=this;return(0,f.Z)(function*(){yield F.initPromise})()}}function et(z){return Fe.apply(this,arguments)}function Fe(){return(Fe=(0,f.Z)(function*(z){const F=yield zt()._get(In(z));return F&&(yield zt()._remove(In(z))),F})).apply(this,arguments)}function Tt(){const z=[];for(let k=0;k<20;k++){const oe=Math.floor(62*Math.random());z.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(oe))}return z.join("")}function zt(){return(0,q.aE)(q.b)}function In(z){return(0,q.aF)("authEvent",z.config.apiKey,z.name)}function kt(z){if(!z?.includes("?"))return{};const[F,...k]=z.split("?");return(0,ye.zd)(k.join("?"))}const Te=class Dt{constructor(){this._redirectPersistence=q.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=q.aG,this._overrideRedirectResult=q.aH}_initialize(F){var k=this;return(0,f.Z)(function*(){const oe=F._key();let Pe=k.eventManagers.get(oe);return Pe||(Pe=new Ue(F),k.eventManagers.set(oe,Pe),k.attachCallbackListeners(F,Pe)),Pe})()}_openPopup(F){(0,q.ax)(F,"operation-not-supported-in-this-environment")}_openRedirect(F,k,oe,Pe){var st=this;return(0,f.Z)(function*(){!function mt(z){var F,k,oe,Pe,st,_t,Ot,wt,qt,Gn;const ln=_e();(0,q.aC)("function"==typeof(null===(F=ln?.universalLinks)||void 0===F?void 0:F.subscribe),z,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,q.aC)(typeof(null===(k=ln?.BuildInfo)||void 0===k?void 0:k.packageName)<"u",z,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,q.aC)("function"==typeof(null===(st=null===(Pe=null===(oe=ln?.cordova)||void 0===oe?void 0:oe.plugins)||void 0===Pe?void 0:Pe.browsertab)||void 0===st?void 0:st.openUrl),z,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,q.aC)("function"==typeof(null===(wt=null===(Ot=null===(_t=ln?.cordova)||void 0===_t?void 0:_t.plugins)||void 0===Ot?void 0:Ot.browsertab)||void 0===wt?void 0:wt.isAvailable),z,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,q.aC)("function"==typeof(null===(Gn=null===(qt=ln?.cordova)||void 0===qt?void 0:qt.InAppBrowser)||void 0===Gn?void 0:Gn.open),z,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(F);const _t=yield st._initialize(F);yield _t.initialized(),_t.resetRedirect(),(0,q.aI)(),yield st._originValidation(F);const Ot=function Ae(z,F,k=null){return{type:F,eventId:k,urlResponse:null,sessionId:Tt(),postBody:null,tenantId:z.tenantId,error:(0,q.aB)(z,"no-auth-event")}}(F,oe,Pe);yield function Ie(z,F){return zt()._set(In(z),F)}(F,Ot);const wt=yield function re(z,F,k){return se.apply(this,arguments)}(F,Ot,k),qt=yield function We(z){const{cordova:F}=_e();return new Promise(k=>{F.plugins.browsertab.isAvailable(oe=>{let Pe=null;oe?F.plugins.browsertab.openUrl(z):Pe=F.InAppBrowser.open(z,(0,q.aA)()?"_blank":"_system","location=yes"),k(Pe)})})}(wt);return function at(z,F,k){return it.apply(this,arguments)}(F,_t,qt)})()}_isIframeWebStorageSupported(F,k){throw new Error("Method not implemented.")}_originValidation(F){const k=F._key();return this.originValidationPromises[k]||(this.originValidationPromises[k]=function ve(z){return Ye.apply(this,arguments)}(F)),this.originValidationPromises[k]}attachCallbackListeners(F,k){const{universalLinks:oe,handleOpenURL:Pe,BuildInfo:st}=_e(),_t=setTimeout((0,f.Z)(function*(){yield et(F),k.onEvent(Re())}),500),Ot=function(){var Gn=(0,f.Z)(function*(ln){clearTimeout(_t);const oi=yield et(F);let vs=null;oi&&ln?.url&&(vs=function xe(z,F){var k,oe;const Pe=function yr(z){const F=kt(z),k=F.link?decodeURIComponent(F.link):void 0,oe=kt(k).link,Pe=F.deep_link_id?decodeURIComponent(F.deep_link_id):void 0;return kt(Pe).link||Pe||oe||k||z}(F);if(Pe.includes("/__/auth/callback")){const st=kt(Pe),_t=st.firebaseError?function vn(z){try{return JSON.parse(z)}catch{return null}}(decodeURIComponent(st.firebaseError)):null,Ot=null===(oe=null===(k=_t?.code)||void 0===k?void 0:k.split("auth/"))||void 0===oe?void 0:oe[1],wt=Ot?(0,q.aB)(Ot):null;return wt?{type:z.type,eventId:z.eventId,tenantId:z.tenantId,error:wt,urlResponse:null,sessionId:null,postBody:null}:{type:z.type,eventId:z.eventId,tenantId:z.tenantId,sessionId:z.sessionId,urlResponse:Pe,postBody:null}}return null}(oi,ln.url)),k.onEvent(vs||Re())});return function(oi){return Gn.apply(this,arguments)}}();typeof oe<"u"&&"function"==typeof oe.subscribe&&oe.subscribe(null,Ot);const wt=Pe,qt=`${st.packageName.toLowerCase()}://`;_e().handleOpenURL=function(){var Gn=(0,f.Z)(function*(ln){if(ln.toLowerCase().startsWith(qt)&&Ot({url:ln}),"function"==typeof wt)try{wt(ln)}catch(oi){console.error(oi)}});return function(ln){return Gn.apply(this,arguments)}}()}};function Re(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,q.aB)("no-auth-event")}}function yt(){var z;return(null===(z=self?.location)||void 0===z?void 0:z.protocol)||null}function $n(z=(0,ye.z$)()){return!("file:"!==yt()&&"ionic:"!==yt()&&"capacitor:"!==yt()||!z.toLowerCase().match(/iphone|ipad|ipod|android/))}function Hn(){try{const z=self.localStorage,F=q.aN();if(z)return z.setItem(F,"1"),z.removeItem(F),!function or(z=(0,ye.z$)()){return function nn(){return(0,ye.w1)()&&11===document?.documentMode}()||function Gt(z=(0,ye.z$)()){return/Edge\/\d+/.test(z)}(z)}()||(0,ye.hl)()}catch{return Ln()&&(0,ye.hl)()}return!1}function Ln(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Pt(){return(function vt(){return"http:"===yt()||"https:"===yt()}()||(0,ye.ru)()||$n())&&!function jt(){return(0,ye.b$)()||(0,ye.UG)()}()&&Hn()&&!Ln()}function zn(){return $n()&&typeof document<"u"}function Ir(){return(Ir=(0,f.Z)(function*(){return!!zn()&&new Promise(z=>{const F=setTimeout(()=>{z(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(F),z(!0)})})})).apply(this,arguments)}const Zn={LOCAL:"local",NONE:"none",SESSION:"session"},On=q.aC,ti="persistence";function an(z){return rn.apply(this,arguments)}function rn(){return(rn=(0,f.Z)(function*(z){yield z._initializationPromise;const F=Lr(),k=q.aF(ti,z.config.apiKey,z.name);F&&F.setItem(k,z._getPersistence())})).apply(this,arguments)}function Lr(){var z;try{return(null===(z=function Vn(){return typeof window<"u"?window:null}())||void 0===z?void 0:z.sessionStorage)||null}catch{return null}}const ii=q.aC;class Rn{constructor(){this.browserResolver=q.aE(q.k),this.cordovaResolver=q.aE(Te),this.underlyingResolver=null,this._redirectPersistence=q.a,this._completeRedirectFn=q.aG,this._overrideRedirectResult=q.aH}_initialize(F){var k=this;return(0,f.Z)(function*(){return yield k.selectUnderlyingResolver(),k.assertedUnderlyingResolver._initialize(F)})()}_openPopup(F,k,oe,Pe){var st=this;return(0,f.Z)(function*(){return yield st.selectUnderlyingResolver(),st.assertedUnderlyingResolver._openPopup(F,k,oe,Pe)})()}_openRedirect(F,k,oe,Pe){var st=this;return(0,f.Z)(function*(){return yield st.selectUnderlyingResolver(),st.assertedUnderlyingResolver._openRedirect(F,k,oe,Pe)})()}_isIframeWebStorageSupported(F,k){this.assertedUnderlyingResolver._isIframeWebStorageSupported(F,k)}_originValidation(F){return this.assertedUnderlyingResolver._originValidation(F)}get _shouldInitProactively(){return zn()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return ii(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var F=this;return(0,f.Z)(function*(){if(F.underlyingResolver)return;const k=yield function An(){return Ir.apply(this,arguments)}();F.underlyingResolver=k?F.cordovaResolver:F.browserResolver})()}}function Cr(z){return z.unwrap()}function $t(z){return Cn(z)}function Cn(z){const{_tokenResponse:F}=z instanceof ye.ZR?z.customData:z;if(!F)return null;if(!(z instanceof ye.ZR)&&"temporaryProof"in F&&"phoneNumber"in F)return q.P.credentialFromResult(z);const k=F.providerId;if(!k||k===q.p.PASSWORD)return null;let oe;switch(k){case q.p.GOOGLE:oe=q.X;break;case q.p.FACEBOOK:oe=q.W;break;case q.p.GITHUB:oe=q.Y;break;case q.p.TWITTER:oe=q.$;break;default:const{oauthIdToken:Pe,oauthAccessToken:st,oauthTokenSecret:_t,pendingToken:Ot,nonce:wt}=F;return st||_t||Pe||Ot?Ot?k.startsWith("saml.")?q.aQ._create(k,Ot):q.N._fromParams({providerId:k,signInMethod:k,pendingToken:Ot,idToken:Pe,accessToken:st}):new q.Z(k).credential({idToken:Pe,accessToken:st,rawNonce:wt}):null}return z instanceof ye.ZR?oe.credentialFromError(z):oe.credentialFromResult(z)}function Wt(z,F){return F.catch(k=>{throw k instanceof ye.ZR&&function Mi(z,F){var k;const oe=null===(k=F.customData)||void 0===k?void 0:k._tokenResponse;if("auth/multi-factor-auth-required"===F?.code)F.resolver=new Un(z,q.as(z,F));else if(oe){const Pe=Cn(F),st=F;Pe&&(st.credential=Pe,st.tenantId=oe.tenantId||void 0,st.email=oe.email||void 0,st.phoneNumber=oe.phoneNumber||void 0)}}(z,k),k}).then(k=>{const Pe=k.user;return{operationType:k.operationType,credential:$t(k),additionalUserInfo:q.aq(k),user:Pn.getOrCreate(Pe)}})}function Yn(z,F){return br.apply(this,arguments)}function br(){return(br=(0,f.Z)(function*(z,F){const k=yield F;return{verificationId:k.verificationId,confirm:oe=>Wt(z,k.confirm(oe))}})).apply(this,arguments)}class Un{constructor(F,k){this.resolver=k,this.auth=function is(z){return z.wrapped()}(F)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(F){return Wt(Cr(this.auth),this.resolver.resolveSignIn(F))}}class Pn{constructor(F){this._delegate=F,this.multiFactor=q.at(F)}static getOrCreate(F){return Pn.USER_MAP.has(F)||Pn.USER_MAP.set(F,new Pn(F)),Pn.USER_MAP.get(F)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(F){return this._delegate.getIdTokenResult(F)}getIdToken(F){return this._delegate.getIdToken(F)}linkAndRetrieveDataWithCredential(F){return this.linkWithCredential(F)}linkWithCredential(F){var k=this;return(0,f.Z)(function*(){return Wt(k.auth,q.a2(k._delegate,F))})()}linkWithPhoneNumber(F,k){var oe=this;return(0,f.Z)(function*(){return Yn(oe.auth,q.l(oe._delegate,F,k))})()}linkWithPopup(F){var k=this;return(0,f.Z)(function*(){return Wt(k.auth,q.d(k._delegate,F,Rn))})()}linkWithRedirect(F){var k=this;return(0,f.Z)(function*(){return yield an(q.aJ(k.auth)),q.g(k._delegate,F,Rn)})()}reauthenticateAndRetrieveDataWithCredential(F){return this.reauthenticateWithCredential(F)}reauthenticateWithCredential(F){var k=this;return(0,f.Z)(function*(){return Wt(k.auth,q.a3(k._delegate,F))})()}reauthenticateWithPhoneNumber(F,k){return Yn(this.auth,q.r(this._delegate,F,k))}reauthenticateWithPopup(F){return Wt(this.auth,q.e(this._delegate,F,Rn))}reauthenticateWithRedirect(F){var k=this;return(0,f.Z)(function*(){return yield an(q.aJ(k.auth)),q.h(k._delegate,F,Rn)})()}sendEmailVerification(F){return q.ag(this._delegate,F)}unlink(F){var k=this;return(0,f.Z)(function*(){return yield q.ap(k._delegate,F),k})()}updateEmail(F){return q.al(this._delegate,F)}updatePassword(F){return q.am(this._delegate,F)}updatePhoneNumber(F){return q.u(this._delegate,F)}updateProfile(F){return q.ak(this._delegate,F)}verifyBeforeUpdateEmail(F,k){return q.ah(this._delegate,F,k)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Pn.USER_MAP=new WeakMap;const Br=q.aC;let Ni=(()=>{class z{constructor(k,oe){if(this.app=k,oe.isInitialized())return this._delegate=oe.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:Pe}=k.options;Br(Pe,"invalid-api-key",{appName:k.name}),Br(Pe,"invalid-api-key",{appName:k.name});const st=typeof window<"u"?Rn:void 0;this._delegate=oe.initialize({options:{persistence:Sr(Pe,k.name),popupRedirectResolver:st}}),this._delegate._updateErrorMap(q.G),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Pn.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(k){this._delegate.languageCode=k}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(k){this._delegate.tenantId=k}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(k,oe){q.K(this._delegate,k,oe)}applyActionCode(k){return q.a7(this._delegate,k)}checkActionCode(k){return q.a8(this._delegate,k)}confirmPasswordReset(k,oe){return q.a6(this._delegate,k,oe)}createUserWithEmailAndPassword(k,oe){var Pe=this;return(0,f.Z)(function*(){return Wt(Pe._delegate,q.aa(Pe._delegate,k,oe))})()}fetchProvidersForEmail(k){return this.fetchSignInMethodsForEmail(k)}fetchSignInMethodsForEmail(k){return q.af(this._delegate,k)}isSignInWithEmailLink(k){return q.ad(this._delegate,k)}getRedirectResult(){var k=this;return(0,f.Z)(function*(){Br(Pt(),k._delegate,"operation-not-supported-in-this-environment");const oe=yield q.j(k._delegate,Rn);return oe?Wt(k._delegate,Promise.resolve(oe)):{credential:null,user:null}})()}addFrameworkForLogging(k){!function $e(z,F){(0,q.aJ)(z)._logFramework(F)}(this._delegate,k)}onAuthStateChanged(k,oe,Pe){const{next:st,error:_t,complete:Ot}=si(k,oe,Pe);return this._delegate.onAuthStateChanged(st,_t,Ot)}onIdTokenChanged(k,oe,Pe){const{next:st,error:_t,complete:Ot}=si(k,oe,Pe);return this._delegate.onIdTokenChanged(st,_t,Ot)}sendSignInLinkToEmail(k,oe){return q.ac(this._delegate,k,oe)}sendPasswordResetEmail(k,oe){return q.a5(this._delegate,k,oe||void 0)}setPersistence(k){var oe=this;return(0,f.Z)(function*(){let Pe;switch(function Kt(z,F){On(Object.values(Zn).includes(F),z,"invalid-persistence-type"),(0,ye.b$)()?On(F!==Zn.SESSION,z,"unsupported-persistence-type"):(0,ye.UG)()?On(F===Zn.NONE,z,"unsupported-persistence-type"):Ln()?On(F===Zn.NONE||F===Zn.LOCAL&&(0,ye.hl)(),z,"unsupported-persistence-type"):On(F===Zn.NONE||Hn(),z,"unsupported-persistence-type")}(oe._delegate,k),k){case Zn.SESSION:Pe=q.a;break;case Zn.LOCAL:Pe=(yield q.aE(q.i)._isAvailable())?q.i:q.b;break;case Zn.NONE:Pe=q.U;break;default:return q.ax("argument-error",{appName:oe._delegate.name})}return oe._delegate.setPersistence(Pe)})()}signInAndRetrieveDataWithCredential(k){return this.signInWithCredential(k)}signInAnonymously(){return Wt(this._delegate,q.a0(this._delegate))}signInWithCredential(k){return Wt(this._delegate,q.a1(this._delegate,k))}signInWithCustomToken(k){return Wt(this._delegate,q.a4(this._delegate,k))}signInWithEmailAndPassword(k,oe){return Wt(this._delegate,q.ab(this._delegate,k,oe))}signInWithEmailLink(k,oe){return Wt(this._delegate,q.ae(this._delegate,k,oe))}signInWithPhoneNumber(k,oe){return Yn(this._delegate,q.s(this._delegate,k,oe))}signInWithPopup(k){var oe=this;return(0,f.Z)(function*(){return Br(Pt(),oe._delegate,"operation-not-supported-in-this-environment"),Wt(oe._delegate,q.c(oe._delegate,k,Rn))})()}signInWithRedirect(k){var oe=this;return(0,f.Z)(function*(){return Br(Pt(),oe._delegate,"operation-not-supported-in-this-environment"),yield an(oe._delegate),q.f(oe._delegate,k,Rn)})()}updateCurrentUser(k){return this._delegate.updateCurrentUser(k)}verifyPasswordResetCode(k){return q.a9(this._delegate,k)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return z.Persistence=Zn,z})();function si(z,F,k){let oe=z;"function"!=typeof z&&({next:oe,error:F,complete:k}=z);const Pe=oe;return{next:_t=>Pe(_t&&Pn.getOrCreate(_t)),error:F,complete:k}}function Sr(z,F){const k=function Kn(z,F){const k=Lr();if(!k)return[];const oe=q.aF(ti,z,F);switch(k.getItem(oe)){case Zn.NONE:return[q.U];case Zn.LOCAL:return[q.i,q.a];case Zn.SESSION:return[q.a];default:return[]}}(z,F);if(typeof self<"u"&&!k.includes(q.i)&&k.push(q.i),typeof window<"u")for(const oe of[q.b,q.a])k.includes(oe)||k.push(oe);return k.includes(q.U)||k.push(q.U),k}class fr{constructor(){this.providerId="phone",this._delegate=new q.P(Cr(Z.Z.auth()))}static credential(F,k){return q.P.credential(F,k)}verifyPhoneNumber(F,k){return this._delegate.verifyPhoneNumber(F,k)}unwrap(){return this._delegate}}fr.PHONE_SIGN_IN_METHOD=q.P.PHONE_SIGN_IN_METHOD,fr.PROVIDER_ID=q.P.PROVIDER_ID;const Mr=q.aC;class rr{constructor(F,k,oe=Z.Z.app()){var Pe;Mr(null===(Pe=oe.options)||void 0===Pe?void 0:Pe.apiKey,"invalid-api-key",{appName:oe.name}),this._delegate=new q.R(oe.auth(),F,k),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function ne(z){z.INTERNAL.registerComponent(new De.wA("auth-compat",F=>{const k=F.getProvider("app-compat").getImmediate(),oe=F.getProvider("auth");return new Ni(k,oe)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:q.A.EMAIL_SIGNIN,PASSWORD_RESET:q.A.PASSWORD_RESET,RECOVER_EMAIL:q.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:q.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:q.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:q.A.VERIFY_EMAIL}},EmailAuthProvider:q.V,FacebookAuthProvider:q.W,GithubAuthProvider:q.Y,GoogleAuthProvider:q.X,OAuthProvider:q.Z,SAMLAuthProvider:q._,PhoneAuthProvider:fr,PhoneMultiFactorGenerator:q.m,RecaptchaVerifier:rr,TwitterAuthProvider:q.$,Auth:Ni,AuthCredential:q.L,Error:ye.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),z.registerVersion("@firebase/auth-compat","0.5.5")}(Z.Z)},8672:(Nt,Ve,U)=>{U.d(Ve,{Ro:()=>Ue,ef:()=>Ae,t2:()=>Lt});var f=U(5879),Z=U(5619),q=U(8645),ye=U(2181),ge=U(9773),we=U(6825),De=U(6814),_e=U(6593);const Ne=["overlay"];function re(Ie,et){1&Ie&&f._UZ(0,"div")}function se(Ie,et){if(1&Ie&&(f.TgZ(0,"div"),f.YNc(1,re,1,0,"div",6),f.qZA()),2&Ie){const Fe=f.oxw(2);f.Tol(Fe.spinner.class),f.Udp("color",Fe.spinner.color),f.xp6(1),f.Q6J("ngForOf",Fe.spinner.divArray)}}function ve(Ie,et){if(1&Ie&&(f._UZ(0,"div",7),f.ALo(1,"safeHtml")),2&Ie){const Fe=f.oxw(2);f.Q6J("innerHTML",f.lcZ(1,1,Fe.template),f.oJD)}}function Ye(Ie,et){if(1&Ie&&(f.TgZ(0,"div",1,2),f.YNc(2,se,2,5,"div",3),f.YNc(3,ve,2,3,"div",4),f.TgZ(4,"div",5),f.Hsn(5),f.qZA()()),2&Ie){const Fe=f.oxw();f.Udp("background-color",Fe.spinner.bdColor)("z-index",Fe.spinner.zIndex)("position",Fe.spinner.fullScreen?"fixed":"absolute"),f.Q6J("@.disabled",Fe.disableAnimation)("@fadeIn","in"),f.xp6(2),f.Q6J("ngIf",!Fe.template),f.xp6(1),f.Q6J("ngIf",Fe.template),f.xp6(1),f.Udp("z-index",Fe.spinner.zIndex)}}const We=["*"],at={"ball-8bits":16,"ball-atom":4,"ball-beat":3,"ball-circus":5,"ball-climbing-dot":4,"ball-clip-rotate":1,"ball-clip-rotate-multiple":2,"ball-clip-rotate-pulse":2,"ball-elastic-dots":5,"ball-fall":3,"ball-fussion":4,"ball-grid-beat":9,"ball-grid-pulse":9,"ball-newton-cradle":4,"ball-pulse":3,"ball-pulse-rise":5,"ball-pulse-sync":3,"ball-rotate":1,"ball-running-dots":5,"ball-scale":1,"ball-scale-multiple":3,"ball-scale-pulse":2,"ball-scale-ripple":1,"ball-scale-ripple-multiple":3,"ball-spin":8,"ball-spin-clockwise":8,"ball-spin-clockwise-fade":8,"ball-spin-clockwise-fade-rotating":8,"ball-spin-fade":8,"ball-spin-fade-rotating":8,"ball-spin-rotate":2,"ball-square-clockwise-spin":8,"ball-square-spin":8,"ball-triangle-path":3,"ball-zig-zag":2,"ball-zig-zag-deflect":2,cog:1,"cube-transition":2,fire:3,"line-scale":5,"line-scale-party":5,"line-scale-pulse-out":5,"line-scale-pulse-out-rapid":5,"line-spin-clockwise-fade":8,"line-spin-clockwise-fade-rotating":8,"line-spin-fade":8,"line-spin-fade-rotating":8,pacman:6,"square-jelly-box":2,"square-loader":1,"square-spin":1,timer:1,"triangle-skew-spin":1},mt="primary";class nt{constructor(et){Object.assign(this,et)}static create(et){return!et?.template&&!et?.type&&console.warn('[ngx-spinner]: Property "type" is missed. Please, provide animation type to <ngx-spinner> component\n        and ensure css is added to angular.json file'),new nt(et)}}let Lt=(()=>{class Ie{constructor(){this.spinnerObservable=new Z.X(null)}getSpinner(Fe){return this.spinnerObservable.asObservable().pipe((0,ye.h)(xe=>xe&&xe.name===Fe))}show(Fe=mt,xe){return new Promise((Tt,zt)=>{setTimeout(()=>{xe&&Object.keys(xe).length?(xe.name=Fe,this.spinnerObservable.next(new nt({...xe,show:!0})),Tt(!0)):(this.spinnerObservable.next(new nt({name:Fe,show:!0})),Tt(!0))},10)})}hide(Fe=mt,xe=10){return new Promise((Tt,zt)=>{setTimeout(()=>{this.spinnerObservable.next(new nt({name:Fe,show:!1})),Tt(!0)},xe)})}static#e=this.\u0275fac=function(xe){return new(xe||Ie)};static#t=this.\u0275prov=f.Yz7({token:Ie,factory:Ie.\u0275fac,providedIn:"root"})}return Ie})();const ot=new f.OlP("NGX_SPINNER_CONFIG");let ce=(()=>{class Ie{constructor(Fe){this._sanitizer=Fe}transform(Fe){if(Fe)return this._sanitizer.bypassSecurityTrustHtml(Fe)}static#e=this.\u0275fac=function(xe){return new(xe||Ie)(f.Y36(_e.H7,16))};static#t=this.\u0275pipe=f.Yjl({name:"safeHtml",type:Ie,pure:!0})}return Ie})(),Ue=(()=>{class Ie{constructor(Fe,xe,Tt,zt){this.spinnerService=Fe,this.changeDetector=xe,this.elementRef=Tt,this.globalConfig=zt,this.disableAnimation=!1,this.spinner=new nt,this.ngUnsubscribe=new q.x,this.setDefaultOptions=()=>{const{type:In}=this.globalConfig??{};this.spinner=nt.create({name:this.name,bdColor:this.bdColor,size:this.size,color:this.color,type:this.type??In,fullScreen:this.fullScreen,divArray:this.divArray,divCount:this.divCount,show:this.show,zIndex:this.zIndex,template:this.template,showSpinner:this.showSpinner})},this.bdColor="rgba(51,51,51,0.8)",this.zIndex=99999,this.color="#fff",this.size="large",this.fullScreen=!0,this.name=mt,this.template=null,this.showSpinner=!1,this.divArray=[],this.divCount=0,this.show=!1}initObservable(){this.spinnerService.getSpinner(this.name).pipe((0,ge.R)(this.ngUnsubscribe)).subscribe(Fe=>{this.setDefaultOptions(),Object.assign(this.spinner,Fe),Fe.show&&this.onInputChange(),this.changeDetector.detectChanges()})}ngOnInit(){this.setDefaultOptions(),this.initObservable()}isSpinnerZone(Fe){return Fe===this.elementRef.nativeElement.parentElement||Fe.parentNode&&this.isSpinnerZone(Fe.parentNode)}ngOnChanges(Fe){for(const xe in Fe)if(xe){const Tt=Fe[xe];if(Tt.isFirstChange())return;typeof Tt.currentValue<"u"&&Tt.currentValue!==Tt.previousValue&&""!==Tt.currentValue&&(this.spinner[xe]=Tt.currentValue,"showSpinner"===xe&&(Tt.currentValue?this.spinnerService.show(this.spinner.name,this.spinner):this.spinnerService.hide(this.spinner.name)),"name"===xe&&this.initObservable())}}getClass(Fe,xe){this.spinner.divCount=at[Fe],this.spinner.divArray=Array(this.spinner.divCount).fill(0).map((zt,In)=>In);let Tt="";switch(xe.toLowerCase()){case"small":Tt="la-sm";break;case"medium":Tt="la-2x";break;case"large":Tt="la-3x"}return"la-"+Fe+" "+Tt}onInputChange(){this.spinner.class=this.getClass(this.spinner.type,this.spinner.size)}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}static#e=this.\u0275fac=function(xe){return new(xe||Ie)(f.Y36(Lt),f.Y36(f.sBO),f.Y36(f.SBq),f.Y36(ot,8))};static#t=this.\u0275cmp=f.Xpm({type:Ie,selectors:[["ngx-spinner"]],viewQuery:function(xe,Tt){if(1&xe&&f.Gf(Ne,5),2&xe){let zt;f.iGM(zt=f.CRH())&&(Tt.spinnerDOM=zt.first)}},inputs:{bdColor:"bdColor",size:"size",color:"color",type:"type",fullScreen:"fullScreen",name:"name",zIndex:"zIndex",template:"template",showSpinner:"showSpinner",disableAnimation:"disableAnimation"},features:[f.TTD],ngContentSelectors:We,decls:1,vars:1,consts:[["class","ngx-spinner-overlay",3,"background-color","z-index","position",4,"ngIf"],[1,"ngx-spinner-overlay"],["overlay",""],[3,"class","color",4,"ngIf"],[3,"innerHTML",4,"ngIf"],[1,"loading-text"],[4,"ngFor","ngForOf"],[3,"innerHTML"]],template:function(xe,Tt){1&xe&&(f.F$t(),f.YNc(0,Ye,6,12,"div",0)),2&xe&&f.Q6J("ngIf",Tt.spinner.show)},dependencies:[De.sg,De.O5,ce],styles:[".ngx-spinner-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%}.ngx-spinner-overlay[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:not(.loading-text){top:50%;left:50%;margin:0;position:absolute;transform:translate(-50%,-50%)}.loading-text[_ngcontent-%COMP%]{position:absolute;top:60%;left:50%;transform:translate(-50%,-60%)}"],data:{animation:[(0,we.X$)("fadeIn",[(0,we.SB)("in",(0,we.oB)({opacity:1})),(0,we.eR)(":enter",[(0,we.oB)({opacity:0}),(0,we.jt)(300)]),(0,we.eR)(":leave",(0,we.jt)(200,(0,we.oB)({opacity:0})))])]},changeDetection:0})}return Ie})(),Ae=(()=>{class Ie{static forRoot(Fe){return{ngModule:Ie,providers:[{provide:ot,useValue:Fe}]}}static#e=this.\u0275fac=function(xe){return new(xe||Ie)};static#t=this.\u0275mod=f.oAB({type:Ie});static#n=this.\u0275inj=f.cJS({imports:[De.ez]})}return Ie})()},5861:(Nt,Ve,U)=>{function f(q,ye,ge,we,De,_e,Ne){try{var re=q[_e](Ne),se=re.value}catch(ve){return void ge(ve)}re.done?ye(se):Promise.resolve(se).then(we,De)}function Z(q){return function(){var ye=this,ge=arguments;return new Promise(function(we,De){var _e=q.apply(ye,ge);function Ne(se){f(_e,we,De,Ne,re,"next",se)}function re(se){f(_e,we,De,Ne,re,"throw",se)}Ne(void 0)})}}U.d(Ve,{Z:()=>Z})},7582:(Nt,Ve,U)=>{function ye(Te,Re){var $e={};for(var Le in Te)Object.prototype.hasOwnProperty.call(Te,Le)&&Re.indexOf(Le)<0&&($e[Le]=Te[Le]);if(null!=Te&&"function"==typeof Object.getOwnPropertySymbols){var He=0;for(Le=Object.getOwnPropertySymbols(Te);He<Le.length;He++)Re.indexOf(Le[He])<0&&Object.prototype.propertyIsEnumerable.call(Te,Le[He])&&($e[Le[He]]=Te[Le[He]])}return $e}function ve(Te,Re,$e,Le){return new($e||($e=Promise))(function(tt,yt){function vt(nn){try{jt(Le.next(nn))}catch(Gt){yt(Gt)}}function $n(nn){try{jt(Le.throw(nn))}catch(Gt){yt(Gt)}}function jt(nn){nn.done?tt(nn.value):function He(tt){return tt instanceof $e?tt:new $e(function(yt){yt(tt)})}(nn.value).then(vt,$n)}jt((Le=Le.apply(Te,Re||[])).next())})}function ce(Te){return this instanceof ce?(this.v=Te,this):new ce(Te)}function Ue(Te,Re,$e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var He,Le=$e.apply(Te,Re||[]),tt=[];return He={},yt("next"),yt("throw"),yt("return"),He[Symbol.asyncIterator]=function(){return this},He;function yt(or){Le[or]&&(He[or]=function(Hn){return new Promise(function(Ln,Pt){tt.push([or,Hn,Ln,Pt])>1||vt(or,Hn)})})}function vt(or,Hn){try{!function $n(or){or.value instanceof ce?Promise.resolve(or.value.v).then(jt,nn):Gt(tt[0][2],or)}(Le[or](Hn))}catch(Ln){Gt(tt[0][3],Ln)}}function jt(or){vt("next",or)}function nn(or){vt("throw",or)}function Gt(or,Hn){or(Hn),tt.shift(),tt.length&&vt(tt[0][0],tt[0][1])}}function Ie(Te){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var $e,Re=Te[Symbol.asyncIterator];return Re?Re.call(Te):(Te=function it(Te){var Re="function"==typeof Symbol&&Symbol.iterator,$e=Re&&Te[Re],Le=0;if($e)return $e.call(Te);if(Te&&"number"==typeof Te.length)return{next:function(){return Te&&Le>=Te.length&&(Te=void 0),{value:Te&&Te[Le++],done:!Te}}};throw new TypeError(Re?"Object is not iterable.":"Symbol.iterator is not defined.")}(Te),$e={},Le("next"),Le("throw"),Le("return"),$e[Symbol.asyncIterator]=function(){return this},$e);function Le(tt){$e[tt]=Te[tt]&&function(yt){return new Promise(function(vt,$n){!function He(tt,yt,vt,$n){Promise.resolve($n).then(function(jt){tt({value:jt,done:vt})},yt)}(vt,$n,(yt=Te[tt](yt)).done,yt.value)})}}}U.d(Ve,{FC:()=>Ue,KL:()=>Ie,_T:()=>ye,mG:()=>ve,qq:()=>ce}),"function"==typeof SuppressedError&&SuppressedError}},Nt=>{Nt(Nt.s=510)}]);