"use strict";(self.webpackChunktp_final_clinica=self.webpackChunktp_final_clinica||[]).push([[292],{7292:(D,g,s)=>{s.r(g),s.d(g,{RegistroModule:()=>Q});var p=s(6814),d=s(7045),u=s(5861),t=s(95),h=s(3519),f=s.n(h),e=s(5879),x=s(8672),v=s(7411),_=s(4774),c=s(7679);function C(o,l){if(1&o&&(e.TgZ(0,"span",39),e._uU(1),e.qZA()),2&o){const i=e.oxw(2);e.xp6(1),e.hij(" ",i.obtenerError("nombre")," ")}}function Z(o,l){if(1&o&&(e.TgZ(0,"span",39),e._uU(1),e.qZA()),2&o){const i=e.oxw(2);e.xp6(1),e.hij(" ",i.obtenerError("apellido")," ")}}function b(o,l){if(1&o&&(e.TgZ(0,"span",39),e._uU(1),e.qZA()),2&o){const i=e.oxw(2);e.xp6(1),e.hij(" ",i.obtenerError("edad")," ")}}function T(o,l){if(1&o&&(e.TgZ(0,"span",39),e._uU(1),e.qZA()),2&o){const i=e.oxw(2);e.xp6(1),e.hij(" ",i.obtenerError("dni")," ")}}function A(o,l){if(1&o&&(e.TgZ(0,"span",39),e._uU(1),e.qZA()),2&o){const i=e.oxw(2);e.xp6(1),e.hij(" ",i.obtenerError("email")," ")}}function M(o,l){if(1&o&&(e.TgZ(0,"span",39),e._uU(1),e.qZA()),2&o){const i=e.oxw(2);e.xp6(1),e.hij(" ",i.obtenerError("clave")," ")}}function U(o,l){1&o&&(e.TgZ(0,"span",39),e._uU(1," Seleccione una imagen por favor "),e.qZA())}function E(o,l){1&o&&(e.TgZ(0,"span",39),e._uU(1," Seleccione una imagen por favor "),e.qZA())}const m=function(){return{standalone:!0}};function q(o,l){if(1&o){const i=e.EpF();e.TgZ(0,"div",32)(1,"label",40),e.NdJ("ngModelChange",function(n){e.CHM(i);const r=e.oxw(2);return e.KtG(r.imagenPerfilDos=n)}),e._uU(2,"Imagen de perfil 2: "),e.qZA(),e.TgZ(3,"input",34),e.NdJ("change",function(n){e.CHM(i);const r=e.oxw(2);return e.KtG(r.guardarImagenDos(n))}),e.qZA(),e.YNc(4,E,2,0,"span",20),e.qZA()}if(2&o){const i=e.oxw(2);e.xp6(1),e.Q6J("ngModel",i.imagenPerfilDos)("ngModelOptions",e.DdM(3,m)),e.xp6(3),e.Q6J("ngIf",i.validarImagenDos())}}function I(o,l){if(1&o&&(e.TgZ(0,"span",39),e._uU(1),e.qZA()),2&o){const i=e.oxw(3);e.xp6(1),e.hij(" ",i.obtenerError("obraSocial")," ")}}function R(o,l){if(1&o&&(e.TgZ(0,"div",27)(1,"label",41),e._uU(2,"Obra social"),e.qZA(),e._UZ(3,"input",42),e.YNc(4,I,2,1,"span",20),e.qZA()),2&o){const i=e.oxw(2);e.xp6(4),e.Q6J("ngIf",i.esValidoElCampo("obraSocial"))}}function N(o,l){if(1&o&&(e.TgZ(0,"span",39),e._uU(1),e.qZA()),2&o){const i=e.oxw(3);e.xp6(1),e.hij(" ",i.obtenerError("especialidad")," ")}}function P(o,l){if(1&o){const i=e.EpF();e.TgZ(0,"div",27)(1,"label",43),e._uU(2,"Especialidad"),e.qZA(),e._UZ(3,"br")(4,"p-multiSelect",44)(5,"br"),e.TgZ(6,"label",45),e._uU(7,"No encuentras tu especialidad. Agregala a la lista: "),e.qZA(),e.TgZ(8,"input",46),e.NdJ("ngModelChange",function(n){e.CHM(i);const r=e.oxw(2);return e.KtG(r.especialidadAgregada=n)}),e.qZA(),e.TgZ(9,"input",47),e.NdJ("click",function(){e.CHM(i);const n=e.oxw(2);return e.KtG(n.agregarEspecialidad())}),e.qZA(),e.YNc(10,N,2,1,"span",20),e.TgZ(11,"span"),e._uU(12),e.qZA()()}if(2&o){const i=e.oxw(2);e.xp6(4),e.Q6J("options",i.listaEspecialidades),e.xp6(4),e.Q6J("ngModel",i.especialidadAgregada)("ngModelOptions",e.DdM(5,m)),e.xp6(2),e.Q6J("ngIf",i.esValidoElCampo("especialidad")),e.xp6(2),e.hij(" ",i.mensajeConfirmacion," ")}}function O(o,l){1&o&&(e.TgZ(0,"div"),e._uU(1,"This field is required."),e.qZA())}function y(o,l){if(1&o&&(e.TgZ(0,"div",52),e.YNc(1,O,2,0,"div",53),e.qZA()),2&o){e.oxw();const i=e.MAs(2);e.xp6(1),e.Q6J("ngIf",null==i.errors?null:i.errors.required)}}function J(o,l){if(1&o){const i=e.EpF();e.TgZ(0,"div",48)(1,"re-captcha",49,50),e.NdJ("resolved",function(n){e.CHM(i);const r=e.oxw(2);return e.KtG(r.resolverCaptcha(n))})("ngModelChange",function(n){e.CHM(i);const r=e.oxw(2);return e.KtG(r.token=n)}),e.qZA(),e.YNc(3,y,2,1,"div",51),e.qZA()}if(2&o){const i=e.MAs(2),a=e.oxw(2);e.xp6(1),e.ekj("is-invalid",i.invalid&&(i.dirty||i.touched)),e.Q6J("ngModel",a.token),e.xp6(2),e.Q6J("ngIf",i.invalid&&(i.dirty||i.touched))}}function w(o,l){if(1&o){const i=e.EpF();e.TgZ(0,"form",13,14),e.NdJ("ngSubmit",function(){e.CHM(i);const n=e.oxw();return e.KtG(n.registrarse())}),e.TgZ(2,"h4",15),e._uU(3),e.qZA(),e.TgZ(4,"div",16)(5,"div",17)(6,"label",18),e._uU(7,"Nombre"),e.qZA(),e._UZ(8,"input",19),e.YNc(9,C,2,1,"span",20),e.qZA(),e.TgZ(10,"div",17)(11,"label",21),e._uU(12,"Apellido"),e.qZA(),e._UZ(13,"input",22),e.YNc(14,Z,2,1,"span",20),e.qZA(),e._UZ(15,"br")(16,"br"),e.TgZ(17,"div",17)(18,"label",23),e._uU(19,"Edad"),e.qZA(),e._UZ(20,"input",24),e.YNc(21,b,2,1,"span",20),e.qZA(),e.TgZ(22,"div",17)(23,"label",25),e._uU(24,"DNI"),e.qZA(),e._UZ(25,"input",26),e.YNc(26,T,2,1,"span",20),e.qZA(),e.TgZ(27,"div",27)(28,"label",28),e._uU(29,"Email"),e.qZA(),e._UZ(30,"input",29),e.YNc(31,A,2,1,"span",20),e.qZA(),e.TgZ(32,"div",27)(33,"label",30),e._uU(34,"Contrase\xf1a"),e.TgZ(35,"span"),e._uU(36," (Minimo 6 caracteres)"),e.qZA()(),e._UZ(37,"input",31),e.YNc(38,M,2,1,"span",20),e.qZA(),e.TgZ(39,"div",32)(40,"label",33),e.NdJ("ngModelChange",function(n){e.CHM(i);const r=e.oxw();return e.KtG(r.imagenPerfilUno=n)}),e._uU(41,"Imagen de perfil: "),e.qZA(),e.TgZ(42,"input",34),e.NdJ("change",function(n){e.CHM(i);const r=e.oxw();return e.KtG(r.guardarImagenUno(n))}),e.qZA(),e.YNc(43,U,2,0,"span",20),e.qZA(),e.YNc(44,q,5,4,"div",35),e.YNc(45,R,5,1,"div",36),e.YNc(46,P,13,6,"div",36),e.qZA(),e.YNc(47,J,4,4,"div",37),e.TgZ(48,"button",38),e._uU(49,"Registrarse"),e.qZA()()}if(2&o){const i=e.oxw();e.Q6J("formGroup",i.formulario),e.xp6(3),e.hij("Registro de usuario de tipo : ",i.tipoUsuario,""),e.xp6(6),e.Q6J("ngIf",i.esValidoElCampo("nombre")),e.xp6(5),e.Q6J("ngIf",i.esValidoElCampo("apellido")),e.xp6(7),e.Q6J("ngIf",i.esValidoElCampo("edad")),e.xp6(5),e.Q6J("ngIf",i.esValidoElCampo("dni")),e.xp6(5),e.Q6J("ngIf",i.esValidoElCampo("email")),e.xp6(7),e.Q6J("ngIf",i.esValidoElCampo("clave")),e.xp6(2),e.Q6J("ngModel",i.imagenPerfilUno)("ngModelOptions",e.DdM(16,m)),e.xp6(3),e.Q6J("ngIf",i.validarImagenUno()),e.xp6(1),e.Q6J("ngIf","Paciente"==i.tipoUsuario),e.xp6(1),e.Q6J("ngIf","Paciente"==i.tipoUsuario),e.xp6(1),e.Q6J("ngIf","Especialista"==i.tipoUsuario),e.xp6(1),e.Q6J("ngIf",i.validarFormulario()),e.xp6(1),e.Q6J("disabled",i.flagCaptcha)}}const k=[{path:"",component:(()=>{class o{constructor(i,a,n,r){this.spinner=i,this.autenticador=a,this.forms=n,this.router=r,this.formulario=this.forms.group({nombre:["",[t.kI.required]],apellido:["",[t.kI.required]],edad:["",[t.kI.required,t.kI.min(1),t.kI.max(100)]],dni:["",[t.kI.required,t.kI.min(1e6),t.kI.max(99999999)]],especialidad:["",[t.kI.required]],email:["",[t.kI.email,t.kI.required]],clave:["",[t.kI.required,t.kI.minLength(6)]],obraSocial:["",[t.kI.required]]}),this.tipoUsuario="",this.imagenPerfilUno=null,this.imagenPerfilDos=null,this.mensajeError="",this.flagRegistro=!1,this.mensajeConfirmacion="",this.especialidadAgregada=null,this.listaEspecialidades=[{especialidad:"Psicologia"},{especialidad:"Cardiolog\xeda"},{especialidad:"Neurolog\xeda"}],this.flagCaptcha=!0,this.token=void 0}resolverCaptcha(i){null!=i&&i.length>0&&(this.flagCaptcha=!1)}send(i){if(i.invalid)for(const a of Object.keys(i.controls))i.controls[a].markAsTouched();else console.debug(`Token [${this.token}] generated`)}ngOnInit(){this.formulario.reset()}esValidoElCampo(i){return this.formulario.controls[i].errors&&this.formulario.controls[i].touched}validarImagenUno(){return null==this.imagenPerfilUno&&this.flagRegistro}validarImagenDos(){return null==this.imagenPerfilDos&&this.flagRegistro}verificarEspecialidad(){return"Otro"==this.formulario.value.especialidad}obtenerError(i){if(!this.formulario.controls[i]&&!this.formulario.controls[i].errors)return null;const a=this.formulario.controls[i].errors;for(const n of Object.keys(a))switch(n){case"required":return"Este campo es requerido";case"minlength":return`Minimo ${a.minlength.requiredLength} caracteres.`;case"maxlength":return`Maximo ${a.maxlength.requiredLength} caracteres.`;case"min":return`Como minimo debe ser ${a.min.min}.`;case"max":return`Como maximo debe ser ${a.max.max}.`;case"email":return"El formato del mail es incorrecto"}return null}lanzarSpinner(i){var a=this;return(0,u.Z)(function*(){""!=a.tipoUsuario&&(a.spinner.show(),setTimeout(()=>{a.spinner.hide()},i))})()}guardarImagenUno(i){this.imagenPerfilUno=i.target.files[0],console.log("Se guardo imagen 1")}guardarImagenDos(i){this.imagenPerfilDos=i.target.files[0],console.log("Se guardo imagen 2")}validarFormulario(){if(!(this.esValidoElCampo("nombre")||this.esValidoElCampo("apellido")||this.esValidoElCampo("dni")||this.esValidoElCampo("edad")||this.esValidoElCampo("email")||this.esValidoElCampo("clave")||this.validarImagenUno())){if("Paciente"==this.tipoUsuario&&!this.esValidoElCampo("obraSocial")&&!this.validarImagenDos())return!0;if(!this.esValidoElCampo("especialidad"))return!0}return!1}registrarse(){var i=this;if(this.flagRegistro=!0,this.validarFormulario()){console.log("DATOS BIEN INGRESADOS");const a={tipo:this.tipoUsuario,nombre:this.formulario.value.nombre,apellido:this.formulario.value.apellido,edad:this.formulario.value.edad,dni:this.formulario.value.dni,email:this.formulario.value.email,imagenPerfilUno:this.imagenPerfilUno,imagenPerfilDos:this.imagenPerfilDos,obraSocial:this.formulario.value.obraSocial,especialidad:this.formulario.value.especialidad,estaActiva:!1,hora:new Date};this.spinner.show(),this.autenticador.registro(a,this.formulario.value.clave).then(n=>{setTimeout(()=>{if("string"!=typeof n){let r="Paciente"==a.tipo?"Se ha registrado como paciente exitosamente. Se enviado un correo electronico al email: "+a.email+" por favor verifiquelo para poder iniciar sesi\xf3n":"Se ha registrado como especialista exitosamente. Se enviado un correo electronico al email: "+a.email+" por favor verifiquelo para poder iniciar sesi\xf3n. Recuerde que para poder iniciar sesi\xf3n su cuenta debe ser validada por un administrador, proceso que puede llevar hasta 48 hs habiles en resolverse. Tenga paciencia.";f().fire({icon:"success",title:"Usuario registrado con exito",footer:r,showConfirmButton:!0}).then(()=>{this.spinner.show(),setTimeout((0,u.Z)(function*(){i.spinner.hide(),yield i.autenticador.cerrarSesion(),i.navigate("sesiones/login")}),500)})}else this.mostrarError(n),f().fire({icon:"error",title:"Oops...",text:"Error al crear cuenta",footer:this.mensajeError});this.spinner.hide()},100)})}else console.log("REVISE LOS DATOS INGRESADOS"),this.formulario.markAllAsTouched()}elegirTipo(i){this.spinner.show(),setTimeout(()=>{this.tipoUsuario=i,this.spinner.hide()},1500)}mostrarError(i){switch(i){case"auth/email-already-in-use":this.mensajeError="El correo ya est\xe1 registrado, prueba con otro";break;case"auth/invalid-email":this.mensajeError="El formato de correo es invalido";break;case"dni-duplicado":this.mensajeError="El dni "+this.formulario.value.dni+" ya se encuentra registrado en el sistema por lo tanto no es v\xe1lido para registrarse";break;case"auth/operation-not-allowed":this.mensajeError="Operaci\xf3n no permitida"}}navigate(i){this.router.navigateByUrl(i)}agregarEspecialidad(){null!=this.especialidadAgregada&&(null==this.listaEspecialidades.find(i=>i.especialidad==this.especialidadAgregada)?(this.listaEspecialidades.push({especialidad:this.especialidadAgregada}),this.mensajeConfirmacion="Especialidad "+this.especialidadAgregada+" agregada con \xe9xito",setTimeout(()=>{this.mensajeConfirmacion=""},2e3)):(this.mensajeConfirmacion="La especialidad "+this.especialidadAgregada+" ya existe en la lista",setTimeout(()=>{this.mensajeConfirmacion=""},2e3)))}static#e=this.\u0275fac=function(a){return new(a||o)(e.Y36(x.t2),e.Y36(v.T),e.Y36(t.qu),e.Y36(d.F0))};static#i=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-registro"]],decls:23,vars:1,consts:[[1,"bg-dark"],[1,"container"],[1,"py-5","text-center"],[1,"lead"],[1,"row","g-5"],["id","tipo-usuario",1,"text-center"],["for","tipo-usuario",1,"form-label",2,"font-size","x-large"],["type","image","height","250px","width","300px","src","../../../assets/paciente.png",1,"imagen",2,"margin-right","150px",3,"click"],["type","image","height","250px","width","300px","src","../../../assets/medico.png",1,"imagen",3,"click"],[1,"mb-4"],["class","needs-validation","novalidate","",3,"formGroup","ngSubmit",4,"ngIf"],[1,"my-5","pt-5","text-muted","text-center","text-small"],[1,"mb-1"],["novalidate","",1,"needs-validation",3,"formGroup","ngSubmit"],["form","ngForm"],[1,"mb-3"],[1,"row","g-3"],[1,"col-sm-6"],["for","nombre",1,"form-label"],["type","text","id","nombre","placeholder","Ingrese nombre","required","","formControlName","nombre",1,"form-control"],["class","form-text text-danger",4,"ngIf"],["for","apellido",1,"form-label"],["type","text","id","apellido","placeholder","Ingrese apellido","required","","formControlName","apellido",1,"form-control"],["for","edad",1,"form-label"],["type","number","id","edad","placeholder","Ingrese edad","required","","formControlName","edad",1,"form-control"],["for","dni",1,"form-label"],["type","number","id","dni","placeholder","Ingrese dni","required","","formControlName","dni",1,"form-control"],[1,"col-9"],["for","email",1,"form-label"],["type","email","id","email","placeholder","Ingrese email (ej: mariano@gmail.com)","required","","formControlName","email",1,"form-control"],["for","clave",1,"form-label"],["type","password","id","clave","placeholder","*********","required","","formControlName","clave",1,"form-control"],[1,"col-6"],["for","archivo","id","foto1","name","imagenPerfilUno",1,"form-label",2,"margin-right","5px",3,"ngModel","ngModelOptions","ngModelChange"],["type","file",1,"archivo",3,"change"],["class","col-6",4,"ngIf"],["class","col-9",4,"ngIf"],["class","captcha",4,"ngIf"],["type","submit",1,"w-50","btn","btn-danger","btn-lg",2,"margin-top","10px",3,"disabled"],[1,"form-text","text-danger"],["for","archivo","id","foto2","name","imagenPerfilDos",1,"form-label",2,"margin-right","5px",3,"ngModel","ngModelOptions","ngModelChange"],["for","obra-social",1,"form-label"],["type","text","id","obra-social","placeholder","Ingrese obra social","required","","formControlName","obraSocial",1,"form-control"],["for","especialidad",1,"form-label","text-center"],["formControlName","especialidad","name","especialidad","optionLabel","especialidad","placeholder","Elige una especialidad",1,"especialidad",3,"options"],["for","especialidad",1,"form-label"],["type","text","placeholder","Ej: Gen\xe9tica","name","especialidad-agregada",2,"margin-left","5px",3,"ngModel","ngModelOptions","ngModelChange"],["value","Agregar",1,"btn","btn-primary",2,"margin-left","5px",3,"click"],[1,"captcha"],["id","recaptcha","name","recaptcha","required","",3,"ngModel","resolved","ngModelChange"],["recaptcha","ngModel"],["class","invalid-feedback",4,"ngIf"],[1,"invalid-feedback"],[4,"ngIf"]],template:function(a,n){1&a&&(e.TgZ(0,"body",0)(1,"div",1)(2,"main")(3,"div",2)(4,"h2"),e._uU(5,"Registrar usuario"),e.qZA(),e.TgZ(6,"p",3),e._uU(7,"Por medio del siguiente formulario se puede registrar un nuevo usuario para la clinica online de Mariano"),e.qZA()(),e.TgZ(8,"div",4)(9,"div")(10,"div",5)(11,"label",6),e._uU(12,"Tipo de Usuario"),e.qZA(),e._UZ(13,"br")(14,"br"),e.TgZ(15,"input",7),e.NdJ("click",function(){return n.elegirTipo("Paciente")}),e.qZA(),e.TgZ(16,"input",8),e.NdJ("click",function(){return n.elegirTipo("Especialista")}),e.qZA()(),e._UZ(17,"hr",9),e.YNc(18,w,50,17,"form",10),e.qZA()()(),e.TgZ(19,"footer",11)(20,"p",12),e._uU(21,"\xa9 2024 Clinica Online Fern\xe1ndez Mariano 4A"),e.qZA()()()(),e._UZ(22,"router-outlet")),2&a&&(e.xp6(18),e.Q6J("ngIf",""!=n.tipoUsuario))},dependencies:[p.O5,d.lC,t._Y,t.Fj,t.wV,t.JJ,t.JL,t.Q7,t.On,t.sg,t.u,_.NU,c.Vd,c.wT],styles:["title[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h4[_ngcontent-%COMP%], label[_ngcontent-%COMP%], p[_ngcontent-%COMP%], span[_ngcontent-%COMP%]{color:#fff}body[_ngcontent-%COMP%]{height:200vh}[_ngcontent-%COMP%]::placeholder{color:#28283076;font-size:1.2em}.archivo[_ngcontent-%COMP%]{color:#fff}#tipo-usuario[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:18px}.mb-4[_ngcontent-%COMP%]{color:#fff}.formulario[_ngcontent-%COMP%]{width:100%}.imagen[_ngcontent-%COMP%]{border:rgb(255,255,255) 3px solid;background-color:#000;opacity:.8}.imagen[_ngcontent-%COMP%]:hover{opacity:1;transform:scale(1.1)}#tipo-usuario[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{height:80px;width:300px;background-color:#bd0e0ecf;color:#fff}.especialidad[_ngcontent-%COMP%]{margin:7px}.captcha[_ngcontent-%COMP%]{margin-top:40px;margin-bottom:40px}re-captcha.is-invalid[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{border:1px solid #dc3545!important;border-radius:.2rem}"]})}return o})()}];let S=(()=>{class o{static#e=this.\u0275fac=function(a){return new(a||o)};static#i=this.\u0275mod=e.oAB({type:o});static#o=this.\u0275inj=e.cJS({imports:[d.Bz.forChild(k),d.Bz]})}return o})();var j=s(553);let Q=(()=>{class o{static#e=this.\u0275fac=function(a){return new(a||o)};static#i=this.\u0275mod=e.oAB({type:o});static#o=this.\u0275inj=e.cJS({providers:[{provide:c.BZ,useValue:{siteKey:j.N.recaptcha.siteKey}}],imports:[p.ez,S,t.u5,p.ez,t.UX,_.q4,c.lQ,c.a]})}return o})()}}]);