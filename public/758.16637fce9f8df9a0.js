"use strict";(self.webpackChunktp_final_clinica=self.webpackChunktp_final_clinica||[]).push([[758],{2758:(V,g,i)=>{i.r(g),i.d(g,{VerTurnosModule:()=>w});var d=i(6814),p=i(7045),f=i(5861),h=i(4036),b=i(3519),u=i.n(b),t=i(5879),T=i(4067),m=i(8672),c=i(95);function x(o,s){1&o&&(t.TgZ(0,"p",19),t._uU(1,"Estado: Pendiente"),t.qZA())}function _(o,s){1&o&&(t.TgZ(0,"p",20),t._uU(1,"Estado: Aceptado"),t.qZA())}function v(o,s){1&o&&(t.TgZ(0,"p",21),t._uU(1,"Estado: Cancelado"),t.qZA())}function Z(o,s){1&o&&(t.TgZ(0,"p",22),t._uU(1,"Estado: Finalizado"),t.qZA())}function C(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"button",23),t.NdJ("click",function(){t.CHM(e);const r=t.oxw(2).$implicit,a=t.oxw();return t.KtG(a.cancelarTurno(r))}),t._uU(1,"Cancelar Turno"),t.qZA()}}function U(o,s){if(1&o&&(t.TgZ(0,"div",11)(1,"h3",12),t._uU(2),t.qZA(),t.TgZ(3,"p",12),t._uU(4),t.qZA(),t.TgZ(5,"p",12),t._uU(6),t.qZA(),t.TgZ(7,"p",12),t._uU(8),t.qZA(),t.YNc(9,x,2,0,"p",13),t.YNc(10,_,2,0,"p",14),t.YNc(11,v,2,0,"p",15),t.YNc(12,Z,2,0,"p",16),t._UZ(13,"hr",17),t.YNc(14,C,2,0,"button",18),t.qZA()),2&o){const e=t.oxw().$implicit,n=t.oxw();t.xp6(2),t.hij("Especialista: ",n.obtenerApellidoNombre(e.uidEspecialista),""),t.xp6(2),t.hij("Especialidad: ",e.especialidad," "),t.xp6(2),t.hij("Paciente: ",n.obtenerApellidoNombre(e.uidPaciente),""),t.xp6(2),t.hij("Fecha y Hora:",n.obtenerFechaYHora(e.horarioTurno),""),t.xp6(1),t.Q6J("ngIf","Pendiente"==e.estadoTurno),t.xp6(1),t.Q6J("ngIf","Aceptado"==e.estadoTurno),t.xp6(1),t.Q6J("ngIf","Cancelado"==e.estadoTurno),t.xp6(1),t.Q6J("ngIf","Realizado"==e.estadoTurno),t.xp6(2),t.Q6J("ngIf","Pendiente"==e.estadoTurno)}}function A(o,s){if(1&o&&(t.TgZ(0,"div",9),t.YNc(1,U,15,9,"div",10),t.qZA()),2&o){const e=s.$implicit,n=t.oxw();t.xp6(1),t.Q6J("ngIf",n.verificarBusqueda(e))}}const y=[{path:"",component:(()=>{class o{constructor(e,n){this.firestore=e,this.spinner=n,this.turnosDisponibles=[],this.tipoFiltrado="Especialidad",this.palabraBusqueda="",this.todosUsuarios=[]}ngOnInit(){var e=this;this.suscripcionTurnos=this.firestore.obtenerTurnos().subscribe(function(){var n=(0,f.Z)(function*(r){e.spinner.show(),setTimeout((0,f.Z)(function*(){e.turnosDisponibles=e.verificarId(r[0].idTurno)?e.turnosDisponibles.concat(r):yield(0,h.z)(e.firestore.obtenerTurnos()),e.spinner.hide()}),500)});return function(r){return n.apply(this,arguments)}}()),this.suscripcionUsuarios=this.firestore.obtenerUsuarios().subscribe(n=>{this.todosUsuarios=this.todosUsuarios.concat(n)})}ngOnDestroy(){this.suscripcionTurnos.unsubscribe(),this.suscripcionUsuarios.unsubscribe()}verificarBusqueda(e){return"Especialidad"==this.tipoFiltrado?e.especialidad.toLowerCase().indexOf(this.palabraBusqueda.toLowerCase())>=0:this.obtenerApellidoNombre(e.uidEspecialista).toLowerCase().indexOf(this.palabraBusqueda.toLowerCase())>=0}verificarId(e){for(let n=0;n<this.turnosDisponibles.length;n++)if(this.turnosDisponibles[n].idTurno==e)return!1;return!0}cambiarTipoFiltro(e){this.tipoFiltrado=e}obtenerApellidoNombre(e){for(let n=0;n<this.todosUsuarios.length;n++)if(this.todosUsuarios[n].uid==e)return this.todosUsuarios[n].nombre+" "+this.todosUsuarios[n].apellido;return"Usuario no encontrado"}obtenerFechaYHora(e){return e.toDate().toLocaleString().slice(0,-3).replace(",","")}cancelarTurno(e){var n=this;u().fire({title:"Cancelar Turno",text:"Por favor escriba un comentario del porque cancela el turno",input:"text",showCancelButton:!0,confirmButtonText:"Aceptar",cancelButtonText:"Cancelar",inputValidator:r=>!r&&"Por favor escribe su comentario"}).then(r=>{r.value&&u().fire({title:"\xbfSeguro qu\xe9 desea cancelar el turno? Est\xe1 acci\xf3n no se puede deshacer",text:"Comentario: "+r.value,showCancelButton:!0,confirmButtonText:"Cancelar Turno",confirmButtonColor:"red",cancelButtonText:"Cancelar Operacion"}).then(function(){var a=(0,f.Z)(function*(l){if(l.isConfirmed){const B={rese\u00f1a:'"'+r.value+'"\n(comentario hecho por el Administrador '+n.firestore.datosUsuarioActual.nombre+" "+n.firestore.datosUsuarioActual.apellido+" operaci\xf3n: cancelaci\xf3n)",estadoTurno:"Cancelado"};u().fire("Turno cancelado con \xe9xito","","success"),yield n.firestore.editarTurnos(e.idTurno,B)}else u().fire("Operaci\xf3n cancelada con \xe9xito","","error")});return function(l){return a.apply(this,arguments)}}())})}static#t=this.\u0275fac=function(n){return new(n||o)(t.Y36(T.C),t.Y36(m.t2))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-ver-turnos"]],decls:25,vars:3,consts:[[1,"bg-dark"],[1,"text-light",2,"text-align","center","margin","auto"],[1,"card","contenido",2,"background-color","yellow"],[1,"contenido-busqueda"],[2,"text-align","center"],[1,"barra-busqueda"],[1,"btn","btn-outline-light","bg-primary",3,"click"],["type","text","placeholder","Buscar turno...",1,"busqueda",3,"ngModel","ngModelChange"],["class","lista-turnos",4,"ngFor","ngForOf"],[1,"lista-turnos"],["class","card bg-primary turno",4,"ngIf"],[1,"card","bg-primary","turno"],[1,"text-light","texto-turnos"],["class","text-warning bg-dark texto-turnos",4,"ngIf"],["class","text-sucess bg-dark texto-turnos",4,"ngIf"],["class","text-danger bg-dark texto-turnos",4,"ngIf"],["class","text-primary bg-dark texto-turnos",4,"ngIf"],[1,"mb-4",2,"color","white"],["class","btn btn-outline-light bg-danger boton",3,"click",4,"ngIf"],[1,"text-warning","bg-dark","texto-turnos"],[1,"text-sucess","bg-dark","texto-turnos"],[1,"text-danger","bg-dark","texto-turnos"],[1,"text-primary","bg-dark","texto-turnos"],[1,"btn","btn-outline-light","bg-danger","boton",3,"click"]],template:function(n,r){1&n&&(t.TgZ(0,"body",0),t._UZ(1,"br"),t.TgZ(2,"h2",1),t._uU(3,"Turnos cargados en la clinica"),t.qZA(),t._UZ(4,"br"),t.TgZ(5,"div",2)(6,"div",3),t._UZ(7,"br"),t.TgZ(8,"h3",4),t._uU(9,"Puede buscar el turno que desee"),t.qZA(),t._UZ(10,"br"),t.TgZ(11,"div",5)(12,"p"),t._uU(13),t.qZA(),t.TgZ(14,"button",6),t.NdJ("click",function(){return r.cambiarTipoFiltro("Especialidad")}),t._uU(15,"Especialidad"),t.qZA(),t.TgZ(16,"button",6),t.NdJ("click",function(){return r.cambiarTipoFiltro("Especialista")}),t._uU(17,"Especialista"),t.qZA(),t.TgZ(18,"input",7),t.NdJ("ngModelChange",function(l){return r.palabraBusqueda=l}),t.qZA()(),t._UZ(19,"br"),t.TgZ(20,"h3",4),t._uU(21,"Turnos disponibles"),t.qZA(),t._UZ(22,"br"),t.YNc(23,A,2,1,"div",8),t.qZA()()(),t._UZ(24,"router-outlet")),2&n&&(t.xp6(13),t.hij("Filtrar por: ",r.tipoFiltrado,""),t.xp6(5),t.Q6J("ngModel",r.palabraBusqueda),t.xp6(5),t.Q6J("ngForOf",r.turnosDisponibles))},dependencies:[d.sg,d.O5,c.Fj,c.JJ,c.On,p.lC],styles:[".contenido[_ngcontent-%COMP%]{overflow-y:scroll;flex-wrap:wrap;min-height:90vh;border-radius:40px;margin-left:2%;margin-right:2%}.barra-busqueda[_ngcontent-%COMP%]{text-align:center}.busqueda[_ngcontent-%COMP%]{width:512px}.turno[_ngcontent-%COMP%]{border-radius:40px;overflow:hidden;height:380px;width:440px;transition:.5s;text-align:center;border:5px solid;border-color:#000;margin:10px}.boton[_ngcontent-%COMP%]{border-radius:40px;overflow:hidden}.texto-turnos[_ngcontent-%COMP%]{text-align:center}.lista-turnos[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;float:left;flex-wrap:wrap;min-height:60vh}"]})}return o})()}];let q=(()=>{class o{static#t=this.\u0275fac=function(n){return new(n||o)};static#e=this.\u0275mod=t.oAB({type:o});static#n=this.\u0275inj=t.cJS({imports:[p.Bz.forChild(y),p.Bz]})}return o})(),w=(()=>{class o{static#t=this.\u0275fac=function(n){return new(n||o)};static#e=this.\u0275mod=t.oAB({type:o});static#n=this.\u0275inj=t.cJS({imports:[d.ez,c.u5,q]})}return o})()}}]);